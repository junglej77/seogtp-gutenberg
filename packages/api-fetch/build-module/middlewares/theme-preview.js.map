{"version":3,"names":["addQueryArgs","getQueryArg","removeQueryArgs","createThemePreviewMiddleware","themePath","options","next","url","wpThemePreview","undefined","wp_theme_preview","path"],"sources":["@wordpress/api-fetch/src/middlewares/theme-preview.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { addQueryArgs, getQueryArg, removeQueryArgs } from '@wordpress/url';\r\n\r\n/**\r\n * This appends a `wp_theme_preview` parameter to the REST API request URL if\r\n * the admin URL contains a `theme` GET parameter.\r\n *\r\n * If the REST API request URL has contained the `wp_theme_preview` parameter as `''`,\r\n * then bypass this middleware.\r\n *\r\n * @param {Record<string, any>} themePath\r\n * @return {import('../types').APIFetchMiddleware} Preloading middleware.\r\n */\r\nconst createThemePreviewMiddleware = ( themePath ) => ( options, next ) => {\r\n\tif ( typeof options.url === 'string' ) {\r\n\t\tconst wpThemePreview = getQueryArg( options.url, 'wp_theme_preview' );\r\n\t\tif ( wpThemePreview === undefined ) {\r\n\t\t\toptions.url = addQueryArgs( options.url, {\r\n\t\t\t\twp_theme_preview: themePath,\r\n\t\t\t} );\r\n\t\t} else if ( wpThemePreview === '' ) {\r\n\t\t\toptions.url = removeQueryArgs( options.url, 'wp_theme_preview' );\r\n\t\t}\r\n\t}\r\n\r\n\tif ( typeof options.path === 'string' ) {\r\n\t\tconst wpThemePreview = getQueryArg( options.path, 'wp_theme_preview' );\r\n\t\tif ( wpThemePreview === undefined ) {\r\n\t\t\toptions.path = addQueryArgs( options.path, {\r\n\t\t\t\twp_theme_preview: themePath,\r\n\t\t\t} );\r\n\t\t} else if ( wpThemePreview === '' ) {\r\n\t\t\toptions.path = removeQueryArgs( options.path, 'wp_theme_preview' );\r\n\t\t}\r\n\t}\r\n\r\n\treturn next( options );\r\n};\r\n\r\nexport default createThemePreviewMiddleware;\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,YAAY,EAAEC,WAAW,EAAEC,eAAe,QAAQ,gBAAgB;;AAE3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,4BAA4B,GAAKC,SAAS,IAAM,CAAEC,OAAO,EAAEC,IAAI,KAAM;EAC1E,IAAK,OAAOD,OAAO,CAACE,GAAG,KAAK,QAAQ,EAAG;IACtC,MAAMC,cAAc,GAAGP,WAAW,CAAEI,OAAO,CAACE,GAAG,EAAE,kBAAmB,CAAC;IACrE,IAAKC,cAAc,KAAKC,SAAS,EAAG;MACnCJ,OAAO,CAACE,GAAG,GAAGP,YAAY,CAAEK,OAAO,CAACE,GAAG,EAAE;QACxCG,gBAAgB,EAAEN;MACnB,CAAE,CAAC;IACJ,CAAC,MAAM,IAAKI,cAAc,KAAK,EAAE,EAAG;MACnCH,OAAO,CAACE,GAAG,GAAGL,eAAe,CAAEG,OAAO,CAACE,GAAG,EAAE,kBAAmB,CAAC;IACjE;EACD;EAEA,IAAK,OAAOF,OAAO,CAACM,IAAI,KAAK,QAAQ,EAAG;IACvC,MAAMH,cAAc,GAAGP,WAAW,CAAEI,OAAO,CAACM,IAAI,EAAE,kBAAmB,CAAC;IACtE,IAAKH,cAAc,KAAKC,SAAS,EAAG;MACnCJ,OAAO,CAACM,IAAI,GAAGX,YAAY,CAAEK,OAAO,CAACM,IAAI,EAAE;QAC1CD,gBAAgB,EAAEN;MACnB,CAAE,CAAC;IACJ,CAAC,MAAM,IAAKI,cAAc,KAAK,EAAE,EAAG;MACnCH,OAAO,CAACM,IAAI,GAAGT,eAAe,CAAEG,OAAO,CAACM,IAAI,EAAE,kBAAmB,CAAC;IACnE;EACD;EAEA,OAAOL,IAAI,CAAED,OAAQ,CAAC;AACvB,CAAC;AAED,eAAeF,4BAA4B","ignoreList":[]}