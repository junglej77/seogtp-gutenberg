{"version":3,"names":["__","sprintf","Button","createBlock","getBlockType","parse","useSelect","useDispatch","store","blockEditorStore","blockDirectoryStore","jsx","_jsx","InstallButton","attributes","block","clientId","isInstallingBlock","select","isInstalling","id","installBlockType","replaceBlock","__next40pxDefaultSize","onClick","then","success","blockType","name","originalBlock","originalContent","innerBlocks","accessibleWhenDisabled","disabled","isBusy","variant","children","title"],"sources":["@wordpress/block-directory/src/plugins/get-install-missing/install-button.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { Button } from '@wordpress/components';\r\nimport { createBlock, getBlockType, parse } from '@wordpress/blocks';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { store as blockEditorStore } from '@wordpress/block-editor';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockDirectoryStore } from '../../store';\r\n\r\nexport default function InstallButton( { attributes, block, clientId } ) {\r\n\tconst isInstallingBlock = useSelect(\r\n\t\t( select ) => select( blockDirectoryStore ).isInstalling( block.id ),\r\n\t\t[ block.id ]\r\n\t);\r\n\tconst { installBlockType } = useDispatch( blockDirectoryStore );\r\n\tconst { replaceBlock } = useDispatch( blockEditorStore );\r\n\r\n\treturn (\r\n\t\t<Button\r\n\t\t\t// TODO: Switch to `true` (40px size) if possible\r\n\t\t\t__next40pxDefaultSize={ false }\r\n\t\t\tonClick={ () =>\r\n\t\t\t\tinstallBlockType( block ).then( ( success ) => {\r\n\t\t\t\t\tif ( success ) {\r\n\t\t\t\t\t\tconst blockType = getBlockType( block.name );\r\n\t\t\t\t\t\tconst [ originalBlock ] = parse(\r\n\t\t\t\t\t\t\tattributes.originalContent\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tif ( originalBlock && blockType ) {\r\n\t\t\t\t\t\t\treplaceBlock(\r\n\t\t\t\t\t\t\t\tclientId,\r\n\t\t\t\t\t\t\t\tcreateBlock(\r\n\t\t\t\t\t\t\t\t\tblockType.name,\r\n\t\t\t\t\t\t\t\t\toriginalBlock.attributes,\r\n\t\t\t\t\t\t\t\t\toriginalBlock.innerBlocks\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} )\r\n\t\t\t}\r\n\t\t\taccessibleWhenDisabled\r\n\t\t\tdisabled={ isInstallingBlock }\r\n\t\t\tisBusy={ isInstallingBlock }\r\n\t\t\tvariant=\"primary\"\r\n\t\t>\r\n\t\t\t{ sprintf(\r\n\t\t\t\t/* translators: %s: block name */\r\n\t\t\t\t__( 'Install %s' ),\r\n\t\t\t\tblock.title\r\n\t\t\t) }\r\n\t\t</Button>\r\n\t);\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,EAAE,EAAEC,OAAO,QAAQ,iBAAiB;AAC7C,SAASC,MAAM,QAAQ,uBAAuB;AAC9C,SAASC,WAAW,EAAEC,YAAY,EAAEC,KAAK,QAAQ,mBAAmB;AACpE,SAASC,SAAS,EAAEC,WAAW,QAAQ,iBAAiB;AACxD,SAASC,KAAK,IAAIC,gBAAgB,QAAQ,yBAAyB;;AAEnE;AACA;AACA;AACA,SAASD,KAAK,IAAIE,mBAAmB,QAAQ,aAAa;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAE3D,eAAe,SAASC,aAAaA,CAAE;EAAEC,UAAU;EAAEC,KAAK;EAAEC;AAAS,CAAC,EAAG;EACxE,MAAMC,iBAAiB,GAAGX,SAAS,CAChCY,MAAM,IAAMA,MAAM,CAAER,mBAAoB,CAAC,CAACS,YAAY,CAAEJ,KAAK,CAACK,EAAG,CAAC,EACpE,CAAEL,KAAK,CAACK,EAAE,CACX,CAAC;EACD,MAAM;IAAEC;EAAiB,CAAC,GAAGd,WAAW,CAAEG,mBAAoB,CAAC;EAC/D,MAAM;IAAEY;EAAa,CAAC,GAAGf,WAAW,CAAEE,gBAAiB,CAAC;EAExD,oBACCG,IAAA,CAACV;EACA;EAAA;IACAqB,qBAAqB,EAAG,KAAO;IAC/BC,OAAO,EAAGA,CAAA,KACTH,gBAAgB,CAAEN,KAAM,CAAC,CAACU,IAAI,CAAIC,OAAO,IAAM;MAC9C,IAAKA,OAAO,EAAG;QACd,MAAMC,SAAS,GAAGvB,YAAY,CAAEW,KAAK,CAACa,IAAK,CAAC;QAC5C,MAAM,CAAEC,aAAa,CAAE,GAAGxB,KAAK,CAC9BS,UAAU,CAACgB,eACZ,CAAC;QACD,IAAKD,aAAa,IAAIF,SAAS,EAAG;UACjCL,YAAY,CACXN,QAAQ,EACRb,WAAW,CACVwB,SAAS,CAACC,IAAI,EACdC,aAAa,CAACf,UAAU,EACxBe,aAAa,CAACE,WACf,CACD,CAAC;QACF;MACD;IACD,CAAE,CACF;IACDC,sBAAsB;IACtBC,QAAQ,EAAGhB,iBAAmB;IAC9BiB,MAAM,EAAGjB,iBAAmB;IAC5BkB,OAAO,EAAC,SAAS;IAAAC,QAAA,EAEfnC,OAAO,EACR;IACAD,EAAE,CAAE,YAAa,CAAC,EAClBe,KAAK,CAACsB,KACP;EAAC,CACM,CAAC;AAEX","ignoreList":[]}