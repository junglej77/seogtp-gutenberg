{"version":3,"names":["combineReducers","downloadableBlocks","state","action","type","filterValue","isRequesting","results","blockManagement","installedBlockTypes","isInstalling","item","filter","blockType","name","blockId","errorNotices","message","isFatal","restState"],"sources":["@wordpress/block-directory/src/store/reducer.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { combineReducers } from '@wordpress/data';\r\n\r\n/**\r\n * Reducer returning an array of downloadable blocks.\r\n *\r\n * @param {Object} state  Current state.\r\n * @param {Object} action Dispatched action.\r\n *\r\n * @return {Object} Updated state.\r\n */\r\nexport const downloadableBlocks = ( state = {}, action ) => {\r\n\tswitch ( action.type ) {\r\n\t\tcase 'FETCH_DOWNLOADABLE_BLOCKS':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t[ action.filterValue ]: {\r\n\t\t\t\t\tisRequesting: true,\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\tcase 'RECEIVE_DOWNLOADABLE_BLOCKS':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t[ action.filterValue ]: {\r\n\t\t\t\t\tresults: action.downloadableBlocks,\r\n\t\t\t\t\tisRequesting: false,\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t}\r\n\treturn state;\r\n};\r\n\r\n/**\r\n * Reducer managing the installation and deletion of blocks.\r\n *\r\n * @param {Object} state  Current state.\r\n * @param {Object} action Dispatched action.\r\n *\r\n * @return {Object} Updated state.\r\n */\r\nexport const blockManagement = (\r\n\tstate = {\r\n\t\tinstalledBlockTypes: [],\r\n\t\tisInstalling: {},\r\n\t},\r\n\taction\r\n) => {\r\n\tswitch ( action.type ) {\r\n\t\tcase 'ADD_INSTALLED_BLOCK_TYPE':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tinstalledBlockTypes: [\r\n\t\t\t\t\t...state.installedBlockTypes,\r\n\t\t\t\t\taction.item,\r\n\t\t\t\t],\r\n\t\t\t};\r\n\t\tcase 'REMOVE_INSTALLED_BLOCK_TYPE':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tinstalledBlockTypes: state.installedBlockTypes.filter(\r\n\t\t\t\t\t( blockType ) => blockType.name !== action.item.name\r\n\t\t\t\t),\r\n\t\t\t};\r\n\t\tcase 'SET_INSTALLING_BLOCK':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisInstalling: {\r\n\t\t\t\t\t...state.isInstalling,\r\n\t\t\t\t\t[ action.blockId ]: action.isInstalling,\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t}\r\n\treturn state;\r\n};\r\n\r\n/**\r\n * Reducer returning an object of error notices.\r\n *\r\n * @param {Object} state  Current state.\r\n * @param {Object} action Dispatched action.\r\n *\r\n * @return {Object} Updated state.\r\n */\r\nexport const errorNotices = ( state = {}, action ) => {\r\n\tswitch ( action.type ) {\r\n\t\tcase 'SET_ERROR_NOTICE':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t[ action.blockId ]: {\r\n\t\t\t\t\tmessage: action.message,\r\n\t\t\t\t\tisFatal: action.isFatal,\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\tcase 'CLEAR_ERROR_NOTICE':\r\n\t\t\tconst { [ action.blockId ]: blockId, ...restState } = state;\r\n\t\t\treturn restState;\r\n\t}\r\n\treturn state;\r\n};\r\n\r\nexport default combineReducers( {\r\n\tdownloadableBlocks,\r\n\tblockManagement,\r\n\terrorNotices,\r\n} );\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,eAAe,QAAQ,iBAAiB;;AAEjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,kBAAkB,GAAGA,CAAEC,KAAK,GAAG,CAAC,CAAC,EAAEC,MAAM,KAAM;EAC3D,QAASA,MAAM,CAACC,IAAI;IACnB,KAAK,2BAA2B;MAC/B,OAAO;QACN,GAAGF,KAAK;QACR,CAAEC,MAAM,CAACE,WAAW,GAAI;UACvBC,YAAY,EAAE;QACf;MACD,CAAC;IACF,KAAK,6BAA6B;MACjC,OAAO;QACN,GAAGJ,KAAK;QACR,CAAEC,MAAM,CAACE,WAAW,GAAI;UACvBE,OAAO,EAAEJ,MAAM,CAACF,kBAAkB;UAClCK,YAAY,EAAE;QACf;MACD,CAAC;EACH;EACA,OAAOJ,KAAK;AACb,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMM,eAAe,GAAGA,CAC9BN,KAAK,GAAG;EACPO,mBAAmB,EAAE,EAAE;EACvBC,YAAY,EAAE,CAAC;AAChB,CAAC,EACDP,MAAM,KACF;EACJ,QAASA,MAAM,CAACC,IAAI;IACnB,KAAK,0BAA0B;MAC9B,OAAO;QACN,GAAGF,KAAK;QACRO,mBAAmB,EAAE,CACpB,GAAGP,KAAK,CAACO,mBAAmB,EAC5BN,MAAM,CAACQ,IAAI;MAEb,CAAC;IACF,KAAK,6BAA6B;MACjC,OAAO;QACN,GAAGT,KAAK;QACRO,mBAAmB,EAAEP,KAAK,CAACO,mBAAmB,CAACG,MAAM,CAClDC,SAAS,IAAMA,SAAS,CAACC,IAAI,KAAKX,MAAM,CAACQ,IAAI,CAACG,IACjD;MACD,CAAC;IACF,KAAK,sBAAsB;MAC1B,OAAO;QACN,GAAGZ,KAAK;QACRQ,YAAY,EAAE;UACb,GAAGR,KAAK,CAACQ,YAAY;UACrB,CAAEP,MAAM,CAACY,OAAO,GAAIZ,MAAM,CAACO;QAC5B;MACD,CAAC;EACH;EACA,OAAOR,KAAK;AACb,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMc,YAAY,GAAGA,CAAEd,KAAK,GAAG,CAAC,CAAC,EAAEC,MAAM,KAAM;EACrD,QAASA,MAAM,CAACC,IAAI;IACnB,KAAK,kBAAkB;MACtB,OAAO;QACN,GAAGF,KAAK;QACR,CAAEC,MAAM,CAACY,OAAO,GAAI;UACnBE,OAAO,EAAEd,MAAM,CAACc,OAAO;UACvBC,OAAO,EAAEf,MAAM,CAACe;QACjB;MACD,CAAC;IACF,KAAK,oBAAoB;MACxB,MAAM;QAAE,CAAEf,MAAM,CAACY,OAAO,GAAIA,OAAO;QAAE,GAAGI;MAAU,CAAC,GAAGjB,KAAK;MAC3D,OAAOiB,SAAS;EAClB;EACA,OAAOjB,KAAK;AACb,CAAC;AAED,eAAeF,eAAe,CAAE;EAC/BC,kBAAkB;EAClBO,eAAe;EACfQ;AACD,CAAE,CAAC","ignoreList":[]}