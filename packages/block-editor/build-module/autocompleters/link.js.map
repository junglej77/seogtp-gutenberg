{"version":3,"names":["apiFetch","addQueryArgs","Icon","page","post","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","SHOWN_SUGGESTIONS","createLinkCompleter","name","className","triggerPrefix","options","letters","path","per_page","search","type","order_by","filter","option","title","getOptionKeywords","item","expansionWords","split","getOptionLabel","children","icon","subtype","getOptionCompletion","href","url"],"sources":["@wordpress/block-editor/src/autocompleters/link.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\n// Disable Reason: Needs to be refactored.\r\n// eslint-disable-next-line no-restricted-imports\r\nimport apiFetch from '@wordpress/api-fetch';\r\nimport { addQueryArgs } from '@wordpress/url';\r\nimport { Icon, page, post } from '@wordpress/icons';\r\n\r\nconst SHOWN_SUGGESTIONS = 10;\r\n\r\n/** @typedef {import('@wordpress/components').WPCompleter} WPCompleter */\r\n\r\n/**\r\n * Creates a suggestion list for links to posts or pages.\r\n *\r\n * @return {WPCompleter} A links completer.\r\n */\r\nfunction createLinkCompleter() {\r\n\treturn {\r\n\t\tname: 'links',\r\n\t\tclassName: 'block-editor-autocompleters__link',\r\n\t\ttriggerPrefix: '[[',\r\n\t\toptions: async ( letters ) => {\r\n\t\t\tlet options = await apiFetch( {\r\n\t\t\t\tpath: addQueryArgs( '/wp/v2/search', {\r\n\t\t\t\t\tper_page: SHOWN_SUGGESTIONS,\r\n\t\t\t\t\tsearch: letters,\r\n\t\t\t\t\ttype: 'post',\r\n\t\t\t\t\torder_by: 'menu_order',\r\n\t\t\t\t} ),\r\n\t\t\t} );\r\n\r\n\t\t\toptions = options.filter( ( option ) => option.title !== '' );\r\n\r\n\t\t\treturn options;\r\n\t\t},\r\n\t\tgetOptionKeywords( item ) {\r\n\t\t\tconst expansionWords = item.title.split( /\\s+/ );\r\n\t\t\treturn [ ...expansionWords ];\r\n\t\t},\r\n\t\tgetOptionLabel( item ) {\r\n\t\t\treturn (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Icon\r\n\t\t\t\t\t\tkey=\"icon\"\r\n\t\t\t\t\t\ticon={ item.subtype === 'page' ? page : post }\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{ item.title }\r\n\t\t\t\t</>\r\n\t\t\t);\r\n\t\t},\r\n\t\tgetOptionCompletion( item ) {\r\n\t\t\treturn <a href={ item.url }>{ item.title }</a>;\r\n\t\t},\r\n\t};\r\n}\r\n\r\n/**\r\n * Creates a suggestion list for links to posts or pages..\r\n *\r\n * @return {WPCompleter} A link completer.\r\n */\r\nexport default createLinkCompleter();\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA,OAAOA,QAAQ,MAAM,sBAAsB;AAC3C,SAASC,YAAY,QAAQ,gBAAgB;AAC7C,SAASC,IAAI,EAAEC,IAAI,EAAEC,IAAI,QAAQ,kBAAkB;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAEpD,MAAMC,iBAAiB,GAAG,EAAE;;AAE5B;;AAEA;AACA;AACA;AACA;AACA;AACA,SAASC,mBAAmBA,CAAA,EAAG;EAC9B,OAAO;IACNC,IAAI,EAAE,OAAO;IACbC,SAAS,EAAE,mCAAmC;IAC9CC,aAAa,EAAE,IAAI;IACnBC,OAAO,EAAE,MAAQC,OAAO,IAAM;MAC7B,IAAID,OAAO,GAAG,MAAMhB,QAAQ,CAAE;QAC7BkB,IAAI,EAAEjB,YAAY,CAAE,eAAe,EAAE;UACpCkB,QAAQ,EAAER,iBAAiB;UAC3BS,MAAM,EAAEH,OAAO;UACfI,IAAI,EAAE,MAAM;UACZC,QAAQ,EAAE;QACX,CAAE;MACH,CAAE,CAAC;MAEHN,OAAO,GAAGA,OAAO,CAACO,MAAM,CAAIC,MAAM,IAAMA,MAAM,CAACC,KAAK,KAAK,EAAG,CAAC;MAE7D,OAAOT,OAAO;IACf,CAAC;IACDU,iBAAiBA,CAAEC,IAAI,EAAG;MACzB,MAAMC,cAAc,GAAGD,IAAI,CAACF,KAAK,CAACI,KAAK,CAAE,KAAM,CAAC;MAChD,OAAO,CAAE,GAAGD,cAAc,CAAE;IAC7B,CAAC;IACDE,cAAcA,CAAEH,IAAI,EAAG;MACtB,oBACCjB,KAAA,CAAAF,SAAA;QAAAuB,QAAA,gBACCzB,IAAA,CAACJ,IAAI;UAEJ8B,IAAI,EAAGL,IAAI,CAACM,OAAO,KAAK,MAAM,GAAG9B,IAAI,GAAGC;QAAM,GAD1C,MAEJ,CAAC,EACAuB,IAAI,CAACF,KAAK;MAAA,CACX,CAAC;IAEL,CAAC;IACDS,mBAAmBA,CAAEP,IAAI,EAAG;MAC3B,oBAAOrB,IAAA;QAAG6B,IAAI,EAAGR,IAAI,CAACS,GAAK;QAAAL,QAAA,EAAGJ,IAAI,CAACF;MAAK,CAAK,CAAC;IAC/C;EACD,CAAC;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAeb,mBAAmB,CAAC,CAAC","ignoreList":[]}