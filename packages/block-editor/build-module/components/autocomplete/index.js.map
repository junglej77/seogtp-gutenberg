{"version":3,"names":["applyFilters","hasFilter","Autocomplete","__unstableUseAutocompleteProps","useAutocompleteProps","useMemo","getDefaultBlockName","getBlockSupport","useBlockEditContext","blockAutocompleter","linkAutocompleter","jsx","_jsx","EMPTY_ARRAY","useCompleters","completers","name","filteredCompleters","map","completer","useBlockEditorAutocompleteProps","props","BlockEditorAutocomplete"],"sources":["@wordpress/block-editor/src/components/autocomplete/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { applyFilters, hasFilter } from '@wordpress/hooks';\r\nimport {\r\n\tAutocomplete,\r\n\t__unstableUseAutocompleteProps as useAutocompleteProps,\r\n} from '@wordpress/components';\r\nimport { useMemo } from '@wordpress/element';\r\nimport { getDefaultBlockName, getBlockSupport } from '@wordpress/blocks';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { useBlockEditContext } from '../block-edit/context';\r\nimport blockAutocompleter from '../../autocompleters/block';\r\nimport linkAutocompleter from '../../autocompleters/link';\r\n\r\n/**\r\n * Shared reference to an empty array for cases where it is important to avoid\r\n * returning a new array reference on every invocation.\r\n *\r\n * @type {Array}\r\n */\r\nconst EMPTY_ARRAY = [];\r\n\r\nfunction useCompleters( { completers = EMPTY_ARRAY } ) {\r\n\tconst { name } = useBlockEditContext();\r\n\treturn useMemo( () => {\r\n\t\tlet filteredCompleters = [ ...completers, linkAutocompleter ];\r\n\r\n\t\tif (\r\n\t\t\tname === getDefaultBlockName() ||\r\n\t\t\tgetBlockSupport( name, '__experimentalSlashInserter', false )\r\n\t\t) {\r\n\t\t\tfilteredCompleters = [ ...filteredCompleters, blockAutocompleter ];\r\n\t\t}\r\n\r\n\t\tif ( hasFilter( 'editor.Autocomplete.completers' ) ) {\r\n\t\t\t// Provide copies so filters may directly modify them.\r\n\t\t\tif ( filteredCompleters === completers ) {\r\n\t\t\t\tfilteredCompleters = filteredCompleters.map(\r\n\t\t\t\t\t( completer ) => ( { ...completer } )\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tfilteredCompleters = applyFilters(\r\n\t\t\t\t'editor.Autocomplete.completers',\r\n\t\t\t\tfilteredCompleters,\r\n\t\t\t\tname\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn filteredCompleters;\r\n\t}, [ completers, name ] );\r\n}\r\n\r\nexport function useBlockEditorAutocompleteProps( props ) {\r\n\treturn useAutocompleteProps( {\r\n\t\t...props,\r\n\t\tcompleters: useCompleters( props ),\r\n\t} );\r\n}\r\n\r\n/**\r\n * Wrap the default Autocomplete component with one that supports a filter hook\r\n * for customizing its list of autocompleters.\r\n *\r\n * @type {import('react').FC}\r\n */\r\nfunction BlockEditorAutocomplete( props ) {\r\n\treturn <Autocomplete { ...props } completers={ useCompleters( props ) } />;\r\n}\r\n\r\n/**\r\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/autocomplete/README.md\r\n */\r\nexport default BlockEditorAutocomplete;\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,YAAY,EAAEC,SAAS,QAAQ,kBAAkB;AAC1D,SACCC,YAAY,EACZC,8BAA8B,IAAIC,oBAAoB,QAChD,uBAAuB;AAC9B,SAASC,OAAO,QAAQ,oBAAoB;AAC5C,SAASC,mBAAmB,EAAEC,eAAe,QAAQ,mBAAmB;;AAExE;AACA;AACA;AACA,SAASC,mBAAmB,QAAQ,uBAAuB;AAC3D,OAAOC,kBAAkB,MAAM,4BAA4B;AAC3D,OAAOC,iBAAiB,MAAM,2BAA2B;;AAEzD;AACA;AACA;AACA;AACA;AACA;AALA,SAAAC,GAAA,IAAAC,IAAA;AAMA,MAAMC,WAAW,GAAG,EAAE;AAEtB,SAASC,aAAaA,CAAE;EAAEC,UAAU,GAAGF;AAAY,CAAC,EAAG;EACtD,MAAM;IAAEG;EAAK,CAAC,GAAGR,mBAAmB,CAAC,CAAC;EACtC,OAAOH,OAAO,CAAE,MAAM;IACrB,IAAIY,kBAAkB,GAAG,CAAE,GAAGF,UAAU,EAAEL,iBAAiB,CAAE;IAE7D,IACCM,IAAI,KAAKV,mBAAmB,CAAC,CAAC,IAC9BC,eAAe,CAAES,IAAI,EAAE,6BAA6B,EAAE,KAAM,CAAC,EAC5D;MACDC,kBAAkB,GAAG,CAAE,GAAGA,kBAAkB,EAAER,kBAAkB,CAAE;IACnE;IAEA,IAAKR,SAAS,CAAE,gCAAiC,CAAC,EAAG;MACpD;MACA,IAAKgB,kBAAkB,KAAKF,UAAU,EAAG;QACxCE,kBAAkB,GAAGA,kBAAkB,CAACC,GAAG,CACxCC,SAAS,KAAQ;UAAE,GAAGA;QAAU,CAAC,CACpC,CAAC;MACF;MAEAF,kBAAkB,GAAGjB,YAAY,CAChC,gCAAgC,EAChCiB,kBAAkB,EAClBD,IACD,CAAC;IACF;IAEA,OAAOC,kBAAkB;EAC1B,CAAC,EAAE,CAAEF,UAAU,EAAEC,IAAI,CAAG,CAAC;AAC1B;AAEA,OAAO,SAASI,+BAA+BA,CAAEC,KAAK,EAAG;EACxD,OAAOjB,oBAAoB,CAAE;IAC5B,GAAGiB,KAAK;IACRN,UAAU,EAAED,aAAa,CAAEO,KAAM;EAClC,CAAE,CAAC;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,uBAAuBA,CAAED,KAAK,EAAG;EACzC,oBAAOT,IAAA,CAACV,YAAY;IAAA,GAAMmB,KAAK;IAAGN,UAAU,EAAGD,aAAa,CAAEO,KAAM;EAAG,CAAE,CAAC;AAC3E;;AAEA;AACA;AACA;AACA,eAAeC,uBAAuB","ignoreList":[]}