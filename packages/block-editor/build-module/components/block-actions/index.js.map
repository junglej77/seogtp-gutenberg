{"version":3,"names":["useDispatch","useSelect","hasBlockSupport","switchToBlockType","store","blocksStore","useNotifyCopy","usePasteStyles","blockEditorStore","BlockActions","clientIds","children","__experimentalUpdateSelection","updateSelection","getDefaultBlockName","getGroupingBlockName","selected","select","canInsertBlockType","getBlockRootClientId","getBlocksByClientId","getDirectInsertBlock","canMoveBlocks","canRemoveBlocks","blocks","rootClientId","canInsertDefaultBlock","directInsertBlock","canMove","canRemove","canInsertBlock","canCopyStyles","every","block","name","canDuplicate","getBlocks","removeBlocks","replaceBlocks","duplicateBlocks","insertAfterBlock","insertBeforeBlock","flashBlock","setBlockMovingClientId","setNavigationMode","selectBlock","notifyCopy","pasteStyles","onDuplicate","onRemove","onInsertBefore","onInsertAfter","length","onMoveTo","onGroup","groupingBlockName","newBlocks","onUngroup","innerBlocks","onCopy","onPasteStyles"],"sources":["@wordpress/block-editor/src/components/block-actions/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\nimport {\r\n\thasBlockSupport,\r\n\tswitchToBlockType,\r\n\tstore as blocksStore,\r\n} from '@wordpress/blocks';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { useNotifyCopy } from '../../utils/use-notify-copy';\r\nimport usePasteStyles from '../use-paste-styles';\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nexport default function BlockActions( {\r\n\tclientIds,\r\n\tchildren,\r\n\t__experimentalUpdateSelection: updateSelection,\r\n} ) {\r\n\tconst { getDefaultBlockName, getGroupingBlockName } =\r\n\t\tuseSelect( blocksStore );\r\n\tconst selected = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst {\r\n\t\t\t\tcanInsertBlockType,\r\n\t\t\t\tgetBlockRootClientId,\r\n\t\t\t\tgetBlocksByClientId,\r\n\t\t\t\tgetDirectInsertBlock,\r\n\t\t\t\tcanMoveBlocks,\r\n\t\t\t\tcanRemoveBlocks,\r\n\t\t\t} = select( blockEditorStore );\r\n\r\n\t\t\tconst blocks = getBlocksByClientId( clientIds );\r\n\t\t\tconst rootClientId = getBlockRootClientId( clientIds[ 0 ] );\r\n\t\t\tconst canInsertDefaultBlock = canInsertBlockType(\r\n\t\t\t\tgetDefaultBlockName(),\r\n\t\t\t\trootClientId\r\n\t\t\t);\r\n\t\t\tconst directInsertBlock = rootClientId\r\n\t\t\t\t? getDirectInsertBlock( rootClientId )\r\n\t\t\t\t: null;\r\n\r\n\t\t\treturn {\r\n\t\t\t\tcanMove: canMoveBlocks( clientIds ),\r\n\t\t\t\tcanRemove: canRemoveBlocks( clientIds ),\r\n\t\t\t\tcanInsertBlock: canInsertDefaultBlock || !! directInsertBlock,\r\n\t\t\t\tcanCopyStyles: blocks.every( ( block ) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t!! block &&\r\n\t\t\t\t\t\t( hasBlockSupport( block.name, 'color' ) ||\r\n\t\t\t\t\t\t\thasBlockSupport( block.name, 'typography' ) )\r\n\t\t\t\t\t);\r\n\t\t\t\t} ),\r\n\t\t\t\tcanDuplicate: blocks.every( ( block ) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t!! block &&\r\n\t\t\t\t\t\thasBlockSupport( block.name, 'multiple', true ) &&\r\n\t\t\t\t\t\tcanInsertBlockType( block.name, rootClientId )\r\n\t\t\t\t\t);\r\n\t\t\t\t} ),\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ clientIds, getDefaultBlockName ]\r\n\t);\r\n\tconst { getBlocksByClientId, getBlocks } = useSelect( blockEditorStore );\r\n\r\n\tconst { canMove, canRemove, canInsertBlock, canCopyStyles, canDuplicate } =\r\n\t\tselected;\r\n\r\n\tconst {\r\n\t\tremoveBlocks,\r\n\t\treplaceBlocks,\r\n\t\tduplicateBlocks,\r\n\t\tinsertAfterBlock,\r\n\t\tinsertBeforeBlock,\r\n\t\tflashBlock,\r\n\t\tsetBlockMovingClientId,\r\n\t\tsetNavigationMode,\r\n\t\tselectBlock,\r\n\t} = useDispatch( blockEditorStore );\r\n\r\n\tconst notifyCopy = useNotifyCopy();\r\n\tconst pasteStyles = usePasteStyles();\r\n\r\n\treturn children( {\r\n\t\tcanCopyStyles,\r\n\t\tcanDuplicate,\r\n\t\tcanInsertBlock,\r\n\t\tcanMove,\r\n\t\tcanRemove,\r\n\t\tonDuplicate() {\r\n\t\t\treturn duplicateBlocks( clientIds, updateSelection );\r\n\t\t},\r\n\t\tonRemove() {\r\n\t\t\treturn removeBlocks( clientIds, updateSelection );\r\n\t\t},\r\n\t\tonInsertBefore() {\r\n\t\t\tinsertBeforeBlock( clientIds[ 0 ] );\r\n\t\t},\r\n\t\tonInsertAfter() {\r\n\t\t\tinsertAfterBlock( clientIds[ clientIds.length - 1 ] );\r\n\t\t},\r\n\t\tonMoveTo() {\r\n\t\t\tsetNavigationMode( true );\r\n\t\t\tselectBlock( clientIds[ 0 ] );\r\n\t\t\tsetBlockMovingClientId( clientIds[ 0 ] );\r\n\t\t},\r\n\t\tonGroup() {\r\n\t\t\tif ( ! clientIds.length ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst groupingBlockName = getGroupingBlockName();\r\n\r\n\t\t\t// Activate the `transform` on `core/group` which does the conversion.\r\n\t\t\tconst newBlocks = switchToBlockType(\r\n\t\t\t\tgetBlocksByClientId( clientIds ),\r\n\t\t\t\tgroupingBlockName\r\n\t\t\t);\r\n\r\n\t\t\tif ( ! newBlocks ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\treplaceBlocks( clientIds, newBlocks );\r\n\t\t},\r\n\t\tonUngroup() {\r\n\t\t\tif ( ! clientIds.length ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst innerBlocks = getBlocks( clientIds[ 0 ] );\r\n\t\t\tif ( ! innerBlocks.length ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\treplaceBlocks( clientIds, innerBlocks );\r\n\t\t},\r\n\t\tonCopy() {\r\n\t\t\tif ( clientIds.length === 1 ) {\r\n\t\t\t\tflashBlock( clientIds[ 0 ] );\r\n\t\t\t}\r\n\t\t\tnotifyCopy( 'copy', clientIds );\r\n\t\t},\r\n\t\tasync onPasteStyles() {\r\n\t\t\tawait pasteStyles( getBlocksByClientId( clientIds ) );\r\n\t\t},\r\n\t} );\r\n}\r\n"],"mappings":"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","ignoreList":[]}