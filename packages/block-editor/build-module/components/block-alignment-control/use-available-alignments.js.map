{"version":3,"names":["useSelect","useLayout","store","blockEditorStore","getLayoutType","EMPTY_ARRAY","DEFAULT_CONTROLS","WIDE_CONTROLS","useAvailableAlignments","controls","includes","isNoneOnly","length","wideControlsEnabled","themeSupportsLayout","isBlockBasedTheme","select","_settings$alignWide","settings","getSettings","alignWide","supportsLayout","__unstableIsBlockBasedTheme","layout","layoutType","type","layoutAlignments","getAlignments","alignments","filter","alignment","name","control","map"],"sources":["@wordpress/block-editor/src/components/block-alignment-control/use-available-alignments.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { useLayout } from '../block-list/layout';\r\nimport { store as blockEditorStore } from '../../store';\r\nimport { getLayoutType } from '../../layouts';\r\n\r\nconst EMPTY_ARRAY = [];\r\nconst DEFAULT_CONTROLS = [ 'none', 'left', 'center', 'right', 'wide', 'full' ];\r\nconst WIDE_CONTROLS = [ 'wide', 'full' ];\r\n\r\nexport default function useAvailableAlignments( controls = DEFAULT_CONTROLS ) {\r\n\t// Always add the `none` option if not exists.\r\n\tif ( ! controls.includes( 'none' ) ) {\r\n\t\tcontrols = [ 'none', ...controls ];\r\n\t}\r\n\tconst isNoneOnly = controls.length === 1 && controls[ 0 ] === 'none';\r\n\r\n\tconst [ wideControlsEnabled, themeSupportsLayout, isBlockBasedTheme ] =\r\n\t\tuseSelect(\r\n\t\t\t( select ) => {\r\n\t\t\t\t// If `isNoneOnly` is true, we'll be returning early because there is\r\n\t\t\t\t// nothing to filter on an empty array. We won't need the info from\r\n\t\t\t\t// the `useSelect` but we must call it anyway because Rules of Hooks.\r\n\t\t\t\t// So the callback returns early to avoid block editor subscription.\r\n\t\t\t\tif ( isNoneOnly ) {\r\n\t\t\t\t\treturn [ false, false, false ];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst settings = select( blockEditorStore ).getSettings();\r\n\t\t\t\treturn [\r\n\t\t\t\t\tsettings.alignWide ?? false,\r\n\t\t\t\t\tsettings.supportsLayout,\r\n\t\t\t\t\tsettings.__unstableIsBlockBasedTheme,\r\n\t\t\t\t];\r\n\t\t\t},\r\n\t\t\t[ isNoneOnly ]\r\n\t\t);\r\n\tconst layout = useLayout();\r\n\r\n\tif ( isNoneOnly ) {\r\n\t\treturn EMPTY_ARRAY;\r\n\t}\r\n\r\n\tconst layoutType = getLayoutType( layout?.type );\r\n\r\n\tif ( themeSupportsLayout ) {\r\n\t\tconst layoutAlignments = layoutType.getAlignments(\r\n\t\t\tlayout,\r\n\t\t\tisBlockBasedTheme\r\n\t\t);\r\n\t\tconst alignments = layoutAlignments.filter( ( alignment ) =>\r\n\t\t\tcontrols.includes( alignment.name )\r\n\t\t);\r\n\t\t// While we treat `none` as an alignment, we shouldn't return it if no\r\n\t\t// other alignments exist.\r\n\t\tif ( alignments.length === 1 && alignments[ 0 ].name === 'none' ) {\r\n\t\t\treturn EMPTY_ARRAY;\r\n\t\t}\r\n\t\treturn alignments;\r\n\t}\r\n\r\n\t// Starting here, it's the fallback for themes not supporting the layout config.\r\n\tif ( layoutType.name !== 'default' && layoutType.name !== 'constrained' ) {\r\n\t\treturn EMPTY_ARRAY;\r\n\t}\r\n\r\n\tconst alignments = controls\r\n\t\t.filter( ( control ) => {\r\n\t\t\tif ( layout.alignments ) {\r\n\t\t\t\treturn layout.alignments.includes( control );\r\n\t\t\t}\r\n\r\n\t\t\tif ( ! wideControlsEnabled && WIDE_CONTROLS.includes( control ) ) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\treturn DEFAULT_CONTROLS.includes( control );\r\n\t\t} )\r\n\t\t.map( ( name ) => ( { name } ) );\r\n\r\n\t// While we treat `none` as an alignment, we shouldn't return it if no\r\n\t// other alignments exist.\r\n\tif ( alignments.length === 1 && alignments[ 0 ].name === 'none' ) {\r\n\t\treturn EMPTY_ARRAY;\r\n\t}\r\n\r\n\treturn alignments;\r\n}\r\n"],"mappings":"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","ignoreList":[]}