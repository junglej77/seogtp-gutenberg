{"version":3,"names":["useMergeRefs","useRef","BlockList","BlockTools","EditorStyles","Iframe","WritingFlow","useMouseMoveTypingReset","useBlockSelectionClearer","useBlockCommands","jsx","_jsx","jsxs","_jsxs","EDITOR_STYLE_TRANSFORM_OPTIONS","ignoredSelectors","ExperimentalBlockCanvas","shouldIframe","height","children","styles","contentRef","contentRefProp","iframeProps","resetTypingRef","clearerRef","localRef","__unstableContentRef","style","display","scope","transformOptions","ref","className","tabIndex","width","name","BlockCanvas"],"sources":["@wordpress/block-editor/src/components/block-canvas/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useMergeRefs } from '@wordpress/compose';\r\nimport { useRef } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockList from '../block-list';\r\nimport BlockTools from '../block-tools';\r\nimport EditorStyles from '../editor-styles';\r\nimport Iframe from '../iframe';\r\nimport WritingFlow from '../writing-flow';\r\nimport { useMouseMoveTypingReset } from '../observe-typing';\r\nimport { useBlockSelectionClearer } from '../block-selection-clearer';\r\nimport { useBlockCommands } from '../use-block-commands';\r\n\r\n// EditorStyles is a memoized component, so avoid passing a new\r\n// object reference on each render.\r\nconst EDITOR_STYLE_TRANSFORM_OPTIONS = {\r\n\t// Don't transform selectors that already specify `.editor-styles-wrapper`.\r\n\tignoredSelectors: [ /\\.editor-styles-wrapper/gi ],\r\n};\r\n\r\nexport function ExperimentalBlockCanvas( {\r\n\tshouldIframe = true,\r\n\theight = '300px',\r\n\tchildren = <BlockList />,\r\n\tstyles,\r\n\tcontentRef: contentRefProp,\r\n\tiframeProps,\r\n} ) {\r\n\tuseBlockCommands();\r\n\tconst resetTypingRef = useMouseMoveTypingReset();\r\n\tconst clearerRef = useBlockSelectionClearer();\r\n\tconst localRef = useRef();\r\n\tconst contentRef = useMergeRefs( [ contentRefProp, clearerRef, localRef ] );\r\n\r\n\tif ( ! shouldIframe ) {\r\n\t\treturn (\r\n\t\t\t<BlockTools\r\n\t\t\t\t__unstableContentRef={ localRef }\r\n\t\t\t\tstyle={ { height, display: 'flex' } }\r\n\t\t\t>\r\n\t\t\t\t<EditorStyles\r\n\t\t\t\t\tstyles={ styles }\r\n\t\t\t\t\tscope=\":where(.editor-styles-wrapper)\"\r\n\t\t\t\t\ttransformOptions={ EDITOR_STYLE_TRANSFORM_OPTIONS }\r\n\t\t\t\t/>\r\n\t\t\t\t<WritingFlow\r\n\t\t\t\t\tref={ contentRef }\r\n\t\t\t\t\tclassName=\"editor-styles-wrapper\"\r\n\t\t\t\t\ttabIndex={ -1 }\r\n\t\t\t\t\tstyle={ {\r\n\t\t\t\t\t\theight: '100%',\r\n\t\t\t\t\t\twidth: '100%',\r\n\t\t\t\t\t} }\r\n\t\t\t\t>\r\n\t\t\t\t\t{ children }\r\n\t\t\t\t</WritingFlow>\r\n\t\t\t</BlockTools>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<BlockTools\r\n\t\t\t__unstableContentRef={ localRef }\r\n\t\t\tstyle={ { height, display: 'flex' } }\r\n\t\t>\r\n\t\t\t<Iframe\r\n\t\t\t\t{ ...iframeProps }\r\n\t\t\t\tref={ resetTypingRef }\r\n\t\t\t\tcontentRef={ contentRef }\r\n\t\t\t\tstyle={ {\r\n\t\t\t\t\t...iframeProps?.style,\r\n\t\t\t\t} }\r\n\t\t\t\tname=\"editor-canvas\"\r\n\t\t\t>\r\n\t\t\t\t<EditorStyles styles={ styles } />\r\n\t\t\t\t{ children }\r\n\t\t\t</Iframe>\r\n\t\t</BlockTools>\r\n\t);\r\n}\r\n\r\n/**\r\n * BlockCanvas component is a component used to display the canvas of the block editor.\r\n * What we call the canvas is an iframe containing the block list that you can manipulate.\r\n * The component is also responsible of wiring up all the necessary hooks to enable\r\n * the keyboard navigation across blocks in the editor and inject content styles into the iframe.\r\n *\r\n * @example\r\n *\r\n * ```jsx\r\n * function MyBlockEditor() {\r\n *   const [ blocks, updateBlocks ] = useState([]);\r\n *   return (\r\n *     <BlockEditorProvider\r\n *       value={ blocks }\r\n *       onInput={ updateBlocks }\r\n *       onChange={ persistBlocks }\r\n *      >\r\n *        <BlockCanvas height=\"400px\" />\r\n *      </BlockEditorProvider>\r\n *    );\r\n * }\r\n * ```\r\n *\r\n * @param {Object}  props          Component props.\r\n * @param {string}  props.height   Canvas height, defaults to 300px.\r\n * @param {Array}   props.styles   Content styles to inject into the iframe.\r\n * @param {Element} props.children Content of the canvas, defaults to the BlockList component.\r\n * @return {Element}               Block Breadcrumb.\r\n */\r\nfunction BlockCanvas( { children, height, styles } ) {\r\n\treturn (\r\n\t\t<ExperimentalBlockCanvas height={ height } styles={ styles }>\r\n\t\t\t{ children }\r\n\t\t</ExperimentalBlockCanvas>\r\n\t);\r\n}\r\n\r\nexport default BlockCanvas;\r\n"],"mappings":"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","ignoreList":[]}