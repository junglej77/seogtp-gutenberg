{"version":3,"names":["clsx","diffChars","__","getSaveContent","BlockView","jsx","_jsx","jsxs","_jsxs","BlockCompare","block","onKeep","onConvert","convertor","convertButtonText","getDifference","originalContent","newContent","difference","map","item","pos","classes","added","removed","className","children","value","getConvertedContent","convertedBlock","newBlocks","Array","isArray","name","attributes","innerBlocks","join","converted","title","action","actionText","rawContent","renderedContent"],"sources":["@wordpress/block-editor/src/components/block-compare/index.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n// diff doesn't tree-shake correctly, so we import from the individual\r\n// module here, to avoid including too much of the library\r\nimport { diffChars } from 'diff/lib/diff/character';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { getSaveContent } from '@wordpress/blocks';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockView from './block-view';\r\n\r\nfunction BlockCompare( {\r\n\tblock,\r\n\tonKeep,\r\n\tonConvert,\r\n\tconvertor,\r\n\tconvertButtonText,\r\n} ) {\r\n\tfunction getDifference( originalContent, newContent ) {\r\n\t\tconst difference = diffChars( originalContent, newContent );\r\n\r\n\t\treturn difference.map( ( item, pos ) => {\r\n\t\t\tconst classes = clsx( {\r\n\t\t\t\t'block-editor-block-compare__added': item.added,\r\n\t\t\t\t'block-editor-block-compare__removed': item.removed,\r\n\t\t\t} );\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<span key={ pos } className={ classes }>\r\n\t\t\t\t\t{ item.value }\r\n\t\t\t\t</span>\r\n\t\t\t);\r\n\t\t} );\r\n\t}\r\n\r\n\tfunction getConvertedContent( convertedBlock ) {\r\n\t\t// The convertor may return an array of items or a single item.\r\n\t\tconst newBlocks = Array.isArray( convertedBlock )\r\n\t\t\t? convertedBlock\r\n\t\t\t: [ convertedBlock ];\r\n\r\n\t\t// Get converted block details.\r\n\t\tconst newContent = newBlocks.map( ( item ) =>\r\n\t\t\tgetSaveContent( item.name, item.attributes, item.innerBlocks )\r\n\t\t);\r\n\r\n\t\treturn newContent.join( '' );\r\n\t}\r\n\r\n\tconst converted = getConvertedContent( convertor( block ) );\r\n\tconst difference = getDifference( block.originalContent, converted );\r\n\r\n\treturn (\r\n\t\t<div className=\"block-editor-block-compare__wrapper\">\r\n\t\t\t<BlockView\r\n\t\t\t\ttitle={ __( 'Current' ) }\r\n\t\t\t\tclassName=\"block-editor-block-compare__current\"\r\n\t\t\t\taction={ onKeep }\r\n\t\t\t\tactionText={ __( 'Convert to HTML' ) }\r\n\t\t\t\trawContent={ block.originalContent }\r\n\t\t\t\trenderedContent={ block.originalContent }\r\n\t\t\t/>\r\n\r\n\t\t\t<BlockView\r\n\t\t\t\ttitle={ __( 'After Conversion' ) }\r\n\t\t\t\tclassName=\"block-editor-block-compare__converted\"\r\n\t\t\t\taction={ onConvert }\r\n\t\t\t\tactionText={ convertButtonText }\r\n\t\t\t\trawContent={ difference }\r\n\t\t\t\trenderedContent={ converted }\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default BlockCompare;\r\n"],"mappings":"AAAA;AACA;AACA;AACA,OAAOA,IAAI,MAAM,MAAM;AACvB;AACA;AACA,SAASC,SAAS,QAAQ,yBAAyB;;AAEnD;AACA;AACA;AACA,SAASC,EAAE,QAAQ,iBAAiB;AACpC,SAASC,cAAc,QAAQ,mBAAmB;;AAElD;AACA;AACA;AACA,OAAOC,SAAS,MAAM,cAAc;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAErC,SAASC,YAAYA,CAAE;EACtBC,KAAK;EACLC,MAAM;EACNC,SAAS;EACTC,SAAS;EACTC;AACD,CAAC,EAAG;EACH,SAASC,aAAaA,CAAEC,eAAe,EAAEC,UAAU,EAAG;IACrD,MAAMC,UAAU,GAAGjB,SAAS,CAAEe,eAAe,EAAEC,UAAW,CAAC;IAE3D,OAAOC,UAAU,CAACC,GAAG,CAAE,CAAEC,IAAI,EAAEC,GAAG,KAAM;MACvC,MAAMC,OAAO,GAAGtB,IAAI,CAAE;QACrB,mCAAmC,EAAEoB,IAAI,CAACG,KAAK;QAC/C,qCAAqC,EAAEH,IAAI,CAACI;MAC7C,CAAE,CAAC;MAEH,oBACClB,IAAA;QAAkBmB,SAAS,EAAGH,OAAS;QAAAI,QAAA,EACpCN,IAAI,CAACO;MAAK,GADDN,GAEN,CAAC;IAET,CAAE,CAAC;EACJ;EAEA,SAASO,mBAAmBA,CAAEC,cAAc,EAAG;IAC9C;IACA,MAAMC,SAAS,GAAGC,KAAK,CAACC,OAAO,CAAEH,cAAe,CAAC,GAC9CA,cAAc,GACd,CAAEA,cAAc,CAAE;;IAErB;IACA,MAAMZ,UAAU,GAAGa,SAAS,CAACX,GAAG,CAAIC,IAAI,IACvCjB,cAAc,CAAEiB,IAAI,CAACa,IAAI,EAAEb,IAAI,CAACc,UAAU,EAAEd,IAAI,CAACe,WAAY,CAC9D,CAAC;IAED,OAAOlB,UAAU,CAACmB,IAAI,CAAE,EAAG,CAAC;EAC7B;EAEA,MAAMC,SAAS,GAAGT,mBAAmB,CAAEf,SAAS,CAAEH,KAAM,CAAE,CAAC;EAC3D,MAAMQ,UAAU,GAAGH,aAAa,CAAEL,KAAK,CAACM,eAAe,EAAEqB,SAAU,CAAC;EAEpE,oBACC7B,KAAA;IAAKiB,SAAS,EAAC,qCAAqC;IAAAC,QAAA,gBACnDpB,IAAA,CAACF,SAAS;MACTkC,KAAK,EAAGpC,EAAE,CAAE,SAAU,CAAG;MACzBuB,SAAS,EAAC,qCAAqC;MAC/Cc,MAAM,EAAG5B,MAAQ;MACjB6B,UAAU,EAAGtC,EAAE,CAAE,iBAAkB,CAAG;MACtCuC,UAAU,EAAG/B,KAAK,CAACM,eAAiB;MACpC0B,eAAe,EAAGhC,KAAK,CAACM;IAAiB,CACzC,CAAC,eAEFV,IAAA,CAACF,SAAS;MACTkC,KAAK,EAAGpC,EAAE,CAAE,kBAAmB,CAAG;MAClCuB,SAAS,EAAC,uCAAuC;MACjDc,MAAM,EAAG3B,SAAW;MACpB4B,UAAU,EAAG1B,iBAAmB;MAChC2B,UAAU,EAAGvB,UAAY;MACzBwB,eAAe,EAAGL;IAAW,CAC7B,CAAC;EAAA,CACE,CAAC;AAER;AAEA,eAAe5B,YAAY","ignoreList":[]}