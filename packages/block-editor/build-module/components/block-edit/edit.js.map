{"version":3,"names":["clsx","withFilters","getBlockDefaultClassName","hasBlockSupport","getBlockType","useContext","useMemo","BlockContext","jsx","_jsx","DEFAULT_BLOCK_CONTEXT","Edit","props","name","blockType","Component","edit","save","EditWithFilters","EditWithGeneratedProps","attributes","blockContext","context","usesContext","Object","fromEntries","entries","filter","key","includes","apiVersion","generatedClassName","className"],"sources":["@wordpress/block-editor/src/components/block-edit/edit.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { withFilters } from '@wordpress/components';\r\nimport {\r\n\tgetBlockDefaultClassName,\r\n\thasBlockSupport,\r\n\tgetBlockType,\r\n} from '@wordpress/blocks';\r\nimport { useContext, useMemo } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockContext from '../block-context';\r\n\r\n/**\r\n * Default value used for blocks which do not define their own context needs,\r\n * used to guarantee that a block's `context` prop will always be an object. It\r\n * is assigned as a constant since it is always expected to be an empty object,\r\n * and in order to avoid unnecessary React reconciliations of a changing object.\r\n *\r\n * @type {{}}\r\n */\r\nconst DEFAULT_BLOCK_CONTEXT = {};\r\n\r\nconst Edit = ( props ) => {\r\n\tconst { name } = props;\r\n\tconst blockType = getBlockType( name );\r\n\r\n\tif ( ! blockType ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\t// `edit` and `save` are functions or components describing the markup\r\n\t// with which a block is displayed. If `blockType` is valid, assign\r\n\t// them preferentially as the render value for the block.\r\n\tconst Component = blockType.edit || blockType.save;\r\n\r\n\treturn <Component { ...props } />;\r\n};\r\n\r\nconst EditWithFilters = withFilters( 'editor.BlockEdit' )( Edit );\r\n\r\nconst EditWithGeneratedProps = ( props ) => {\r\n\tconst { attributes = {}, name } = props;\r\n\tconst blockType = getBlockType( name );\r\n\tconst blockContext = useContext( BlockContext );\r\n\r\n\t// Assign context values using the block type's declared context needs.\r\n\tconst context = useMemo( () => {\r\n\t\treturn blockType && blockType.usesContext\r\n\t\t\t? Object.fromEntries(\r\n\t\t\t\t\tObject.entries( blockContext ).filter( ( [ key ] ) =>\r\n\t\t\t\t\t\tblockType.usesContext.includes( key )\r\n\t\t\t\t\t)\r\n\t\t\t  )\r\n\t\t\t: DEFAULT_BLOCK_CONTEXT;\r\n\t}, [ blockType, blockContext ] );\r\n\r\n\tif ( ! blockType ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tif ( blockType.apiVersion > 1 ) {\r\n\t\treturn <EditWithFilters { ...props } context={ context } />;\r\n\t}\r\n\r\n\t// Generate a class name for the block's editable form.\r\n\tconst generatedClassName = hasBlockSupport( blockType, 'className', true )\r\n\t\t? getBlockDefaultClassName( name )\r\n\t\t: null;\r\n\tconst className = clsx(\r\n\t\tgeneratedClassName,\r\n\t\tattributes.className,\r\n\t\tprops.className\r\n\t);\r\n\r\n\treturn (\r\n\t\t<EditWithFilters\r\n\t\t\t{ ...props }\r\n\t\t\tcontext={ context }\r\n\t\t\tclassName={ className }\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default EditWithGeneratedProps;\r\n"],"mappings":"AAAA;AACA;AACA;AACA,OAAOA,IAAI,MAAM,MAAM;;AAEvB;AACA;AACA;AACA,SAASC,WAAW,QAAQ,uBAAuB;AACnD,SACCC,wBAAwB,EACxBC,eAAe,EACfC,YAAY,QACN,mBAAmB;AAC1B,SAASC,UAAU,EAAEC,OAAO,QAAQ,oBAAoB;;AAExD;AACA;AACA;AACA,OAAOC,YAAY,MAAM,kBAAkB;;AAE3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA,SAAAC,GAAA,IAAAC,IAAA;AAQA,MAAMC,qBAAqB,GAAG,CAAC,CAAC;AAEhC,MAAMC,IAAI,GAAKC,KAAK,IAAM;EACzB,MAAM;IAAEC;EAAK,CAAC,GAAGD,KAAK;EACtB,MAAME,SAAS,GAAGV,YAAY,CAAES,IAAK,CAAC;EAEtC,IAAK,CAAEC,SAAS,EAAG;IAClB,OAAO,IAAI;EACZ;;EAEA;EACA;EACA;EACA,MAAMC,SAAS,GAAGD,SAAS,CAACE,IAAI,IAAIF,SAAS,CAACG,IAAI;EAElD,oBAAOR,IAAA,CAACM,SAAS;IAAA,GAAMH;EAAK,CAAI,CAAC;AAClC,CAAC;AAED,MAAMM,eAAe,GAAGjB,WAAW,CAAE,kBAAmB,CAAC,CAAEU,IAAK,CAAC;AAEjE,MAAMQ,sBAAsB,GAAKP,KAAK,IAAM;EAC3C,MAAM;IAAEQ,UAAU,GAAG,CAAC,CAAC;IAAEP;EAAK,CAAC,GAAGD,KAAK;EACvC,MAAME,SAAS,GAAGV,YAAY,CAAES,IAAK,CAAC;EACtC,MAAMQ,YAAY,GAAGhB,UAAU,CAAEE,YAAa,CAAC;;EAE/C;EACA,MAAMe,OAAO,GAAGhB,OAAO,CAAE,MAAM;IAC9B,OAAOQ,SAAS,IAAIA,SAAS,CAACS,WAAW,GACtCC,MAAM,CAACC,WAAW,CAClBD,MAAM,CAACE,OAAO,CAAEL,YAAa,CAAC,CAACM,MAAM,CAAE,CAAE,CAAEC,GAAG,CAAE,KAC/Cd,SAAS,CAACS,WAAW,CAACM,QAAQ,CAAED,GAAI,CACrC,CACA,CAAC,GACDlB,qBAAqB;EACzB,CAAC,EAAE,CAAEI,SAAS,EAAEO,YAAY,CAAG,CAAC;EAEhC,IAAK,CAAEP,SAAS,EAAG;IAClB,OAAO,IAAI;EACZ;EAEA,IAAKA,SAAS,CAACgB,UAAU,GAAG,CAAC,EAAG;IAC/B,oBAAOrB,IAAA,CAACS,eAAe;MAAA,GAAMN,KAAK;MAAGU,OAAO,EAAGA;IAAS,CAAE,CAAC;EAC5D;;EAEA;EACA,MAAMS,kBAAkB,GAAG5B,eAAe,CAAEW,SAAS,EAAE,WAAW,EAAE,IAAK,CAAC,GACvEZ,wBAAwB,CAAEW,IAAK,CAAC,GAChC,IAAI;EACP,MAAMmB,SAAS,GAAGhC,IAAI,CACrB+B,kBAAkB,EAClBX,UAAU,CAACY,SAAS,EACpBpB,KAAK,CAACoB,SACP,CAAC;EAED,oBACCvB,IAAA,CAACS,eAAe;IAAA,GACVN,KAAK;IACVU,OAAO,EAAGA,OAAS;IACnBU,SAAS,EAAGA;EAAW,CACvB,CAAC;AAEJ,CAAC;AAED,eAAeb,sBAAsB","ignoreList":[]}