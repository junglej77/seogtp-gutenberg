{"version":3,"names":["TouchableWithoutFeedback","__","sprintf","useSelect","useDispatch","createBlock","getBlockType","Warning","store","blockEditorStore","jsx","_jsx","BlockInvalidWarning","clientId","selector","select","getBlock","block","name","blockType","title","blockIcon","icon","blockTitle","accessibilityLabel","replaceBlock","recoverBlock","attributes","innerBlocks","attemptBlockRecovery","onPress","accessible","accessibilityRole","children","message"],"sources":["@wordpress/block-editor/src/components/block-list/block-invalid-warning.native.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport { TouchableWithoutFeedback } from 'react-native';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { createBlock, getBlockType } from '@wordpress/blocks';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport Warning from '../warning';\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nexport default function BlockInvalidWarning( { clientId } ) {\r\n\tconst selector = ( select ) => {\r\n\t\tconst { getBlock } = select( blockEditorStore );\r\n\t\tconst block = getBlock( clientId );\r\n\t\tconst { name } = block || {};\r\n\r\n\t\tconst blockType = getBlockType( name || 'core/missing' );\r\n\t\tconst title = blockType?.title;\r\n\t\tconst blockIcon = blockType?.icon;\r\n\r\n\t\treturn {\r\n\t\t\tblock,\r\n\t\t\tblockTitle: title,\r\n\t\t\ticon: blockIcon,\r\n\t\t};\r\n\t};\r\n\r\n\tconst { block, blockTitle, icon } = useSelect( selector, [ clientId ] );\r\n\r\n\tconst accessibilityLabel = sprintf(\r\n\t\t/* translators: accessibility text for blocks with invalid content. %d: localized block title */\r\n\t\t__( '%s block. This block has invalid content' ),\r\n\t\tblockTitle\r\n\t);\r\n\r\n\tconst { replaceBlock } = useDispatch( blockEditorStore );\r\n\r\n\tconst recoverBlock = ( { name, attributes, innerBlocks } ) =>\r\n\t\tcreateBlock( name, attributes, innerBlocks );\r\n\r\n\tconst attemptBlockRecovery = () => {\r\n\t\treplaceBlock( block.clientId, recoverBlock( block ) );\r\n\t};\r\n\r\n\treturn (\r\n\t\t<TouchableWithoutFeedback\r\n\t\t\tonPress={ attemptBlockRecovery }\r\n\t\t\taccessible\r\n\t\t\taccessibilityRole=\"button\"\r\n\t\t>\r\n\t\t\t<Warning\r\n\t\t\t\ttitle={ blockTitle }\r\n\t\t\t\t// eslint-disable-next-line @wordpress/i18n-no-collapsible-whitespace\r\n\t\t\t\tmessage={ __(\r\n\t\t\t\t\t'Problem displaying block. \\nTap to attempt block recovery.'\r\n\t\t\t\t) }\r\n\t\t\t\ticon={ icon }\r\n\t\t\t\taccessibilityLabel={ accessibilityLabel }\r\n\t\t\t/>\r\n\t\t</TouchableWithoutFeedback>\r\n\t);\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,wBAAwB,QAAQ,cAAc;;AAEvD;AACA;AACA;AACA,SAASC,EAAE,EAAEC,OAAO,QAAQ,iBAAiB;AAC7C,SAASC,SAAS,EAAEC,WAAW,QAAQ,iBAAiB;AACxD,SAASC,WAAW,EAAEC,YAAY,QAAQ,mBAAmB;;AAE7D;AACA;AACA;AACA,OAAOC,OAAO,MAAM,YAAY;AAChC,SAASC,KAAK,IAAIC,gBAAgB,QAAQ,aAAa;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAExD,eAAe,SAASC,mBAAmBA,CAAE;EAAEC;AAAS,CAAC,EAAG;EAC3D,MAAMC,QAAQ,GAAKC,MAAM,IAAM;IAC9B,MAAM;MAAEC;IAAS,CAAC,GAAGD,MAAM,CAAEN,gBAAiB,CAAC;IAC/C,MAAMQ,KAAK,GAAGD,QAAQ,CAAEH,QAAS,CAAC;IAClC,MAAM;MAAEK;IAAK,CAAC,GAAGD,KAAK,IAAI,CAAC,CAAC;IAE5B,MAAME,SAAS,GAAGb,YAAY,CAAEY,IAAI,IAAI,cAAe,CAAC;IACxD,MAAME,KAAK,GAAGD,SAAS,EAAEC,KAAK;IAC9B,MAAMC,SAAS,GAAGF,SAAS,EAAEG,IAAI;IAEjC,OAAO;MACNL,KAAK;MACLM,UAAU,EAAEH,KAAK;MACjBE,IAAI,EAAED;IACP,CAAC;EACF,CAAC;EAED,MAAM;IAAEJ,KAAK;IAAEM,UAAU;IAAED;EAAK,CAAC,GAAGnB,SAAS,CAAEW,QAAQ,EAAE,CAAED,QAAQ,CAAG,CAAC;EAEvE,MAAMW,kBAAkB,GAAGtB,OAAO,EACjC;EACAD,EAAE,CAAE,0CAA2C,CAAC,EAChDsB,UACD,CAAC;EAED,MAAM;IAAEE;EAAa,CAAC,GAAGrB,WAAW,CAAEK,gBAAiB,CAAC;EAExD,MAAMiB,YAAY,GAAGA,CAAE;IAAER,IAAI;IAAES,UAAU;IAAEC;EAAY,CAAC,KACvDvB,WAAW,CAAEa,IAAI,EAAES,UAAU,EAAEC,WAAY,CAAC;EAE7C,MAAMC,oBAAoB,GAAGA,CAAA,KAAM;IAClCJ,YAAY,CAAER,KAAK,CAACJ,QAAQ,EAAEa,YAAY,CAAET,KAAM,CAAE,CAAC;EACtD,CAAC;EAED,oBACCN,IAAA,CAACX,wBAAwB;IACxB8B,OAAO,EAAGD,oBAAsB;IAChCE,UAAU;IACVC,iBAAiB,EAAC,QAAQ;IAAAC,QAAA,eAE1BtB,IAAA,CAACJ,OAAO;MACPa,KAAK,EAAGG;MACR;MAAA;MACAW,OAAO,EAAGjC,EAAE,CACX,4DACD,CAAG;MACHqB,IAAI,EAAGA,IAAM;MACbE,kBAAkB,EAAGA;IAAoB,CACzC;EAAC,CACuB,CAAC;AAE7B","ignoreList":[]}