{"version":3,"names":["clsx","memo","useCallback","RawHTML","useContext","useMemo","getBlockType","getSaveContent","isUnmodifiedDefaultBlock","serializeRawBlock","switchToBlockType","getDefaultBlockName","isUnmodifiedBlock","isReusableBlock","getBlockDefaultClassName","hasBlockSupport","store","blocksStore","withFilters","withDispatch","useDispatch","useSelect","compose","safeHTML","BlockEdit","BlockInvalidWarning","BlockCrashWarning","BlockCrashBoundary","BlockHtml","useBlockProps","blockEditorStore","useLayout","PrivateBlockContext","unlock","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","mergeWrapperProps","propsA","propsB","newProps","hasOwnProperty","className","style","Block","children","isHtml","props","__unstableIsHtml","BlockListBlock","block","__unstableBlockSource","mode","isLocked","canRemove","clientId","isSelected","isSelectionEnabled","__unstableLayoutClassNames","layoutClassNames","name","isValid","attributes","wrapperProps","setAttributes","onReplace","onInsertBlocksAfter","onMerge","toggleSelection","_wrapperProps","mayDisplayControls","mayDisplayParentControls","themeSupportsLayout","context","removeBlock","onRemove","parentLayout","blockEdit","insertBlocksAfter","undefined","mergeBlocks","__unstableParentLayout","Object","keys","length","blockEditingMode","isPreviewMode","blockType","getEditWrapperProps","isAligned","isSticky","includes","saveContent","display","apiVersion","dataAlign","restWrapperProps","updatedWrapperProps","Provider","value","fallback","applyWithDispatch","dispatch","ownProps","registry","updateBlockAttributes","insertBlocks","replaceBlocks","__unstableMarkLastChangeAsPersistent","moveBlocksToPosition","selectBlock","newAttributes","getMultiSelectedBlockClientIds","select","multiSelectedBlockClientIds","clientIds","onInsertBlocks","blocks","index","rootClientId","getBlockIndex","forward","getPreviousBlockClientId","getNextBlockClientId","getBlock","getBlockAttributes","getBlockName","getBlockOrder","getBlockRootClientId","canInsertBlockType","switchToDefaultOrRemove","defaultBlockName","replacement","nextBlockClientId","batch","moveFirstItemUp","_clientId","changeSelection","targetRootClientId","blockOrder","firstClientId","every","nextRootClientId","rootAttributes","previousRootAttributes","key","previousBlockClientId","previousRootClientId","indexToSelect","initialPosition","replacementBlocks","Array","isArray","selectionEnabled","BlockListBlockProvider","selectedProps","isBlockSelected","getBlockMode","getTemplateLock","getBlockWithoutAttributes","canRemoveBlock","canMoveBlock","getSettings","getTemporarilyEditingAsBlocks","getBlockEditingMode","isFirstMultiSelectedBlock","hasSelectedInnerBlock","getBlocksByName","isBlockMultiSelected","isBlockSubtreeDisabled","isBlockHighlighted","__unstableIsFullySelected","__unstableSelectionHasUnmergeableBlock","isBlockBeingDragged","isDragging","hasBlockMovingClientId","__unstableHasActiveBlockOverlayActive","__unstableGetEditorMode","getSelectedBlocksInitialCaretPosition","blockWithoutAttributes","_hasBlockSupport","getActiveBlockVariation","blockName","supportsLayout","__unstableIsPreviewMode","hasLightBlockWrapper","previewContext","isReusable","defaultClassName","blockTitle","title","_isSelected","canMove","match","isMultiSelected","checkDeep","isAncestorOfSelectedBlock","movingClientId","multiple","blocksWithSameName","isInvalid","editorMode","templateLock","isTemporarilyEditingAsBlocks","id","blockApiVersion","isSubtreeDisabled","hasOverlay","isHighlighted","isPartiallySelected","hasChildSelected","isBlockMovingMode","canInsertMovingBlock","isEditingDisabled","hasEditableOutline","originalBlockClientId","privateContext"],"sources":["@wordpress/block-editor/src/components/block-list/block.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tmemo,\r\n\tuseCallback,\r\n\tRawHTML,\r\n\tuseContext,\r\n\tuseMemo,\r\n} from '@wordpress/element';\r\nimport {\r\n\tgetBlockType,\r\n\tgetSaveContent,\r\n\tisUnmodifiedDefaultBlock,\r\n\tserializeRawBlock,\r\n\tswitchToBlockType,\r\n\tgetDefaultBlockName,\r\n\tisUnmodifiedBlock,\r\n\tisReusableBlock,\r\n\tgetBlockDefaultClassName,\r\n\thasBlockSupport,\r\n\tstore as blocksStore,\r\n} from '@wordpress/blocks';\r\nimport { withFilters } from '@wordpress/components';\r\nimport { withDispatch, useDispatch, useSelect } from '@wordpress/data';\r\nimport { compose } from '@wordpress/compose';\r\nimport { safeHTML } from '@wordpress/dom';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockEdit from '../block-edit';\r\nimport BlockInvalidWarning from './block-invalid-warning';\r\nimport BlockCrashWarning from './block-crash-warning';\r\nimport BlockCrashBoundary from './block-crash-boundary';\r\nimport BlockHtml from './block-html';\r\nimport { useBlockProps } from './use-block-props';\r\nimport { store as blockEditorStore } from '../../store';\r\nimport { useLayout } from './layout';\r\nimport { PrivateBlockContext } from './private-block-context';\r\n\r\nimport { unlock } from '../../lock-unlock';\r\n\r\n/**\r\n * Merges wrapper props with special handling for classNames and styles.\r\n *\r\n * @param {Object} propsA\r\n * @param {Object} propsB\r\n *\r\n * @return {Object} Merged props.\r\n */\r\nfunction mergeWrapperProps( propsA, propsB ) {\r\n\tconst newProps = {\r\n\t\t...propsA,\r\n\t\t...propsB,\r\n\t};\r\n\r\n\t// May be set to undefined, so check if the property is set!\r\n\tif (\r\n\t\tpropsA?.hasOwnProperty( 'className' ) &&\r\n\t\tpropsB?.hasOwnProperty( 'className' )\r\n\t) {\r\n\t\tnewProps.className = clsx( propsA.className, propsB.className );\r\n\t}\r\n\r\n\tif (\r\n\t\tpropsA?.hasOwnProperty( 'style' ) &&\r\n\t\tpropsB?.hasOwnProperty( 'style' )\r\n\t) {\r\n\t\tnewProps.style = { ...propsA.style, ...propsB.style };\r\n\t}\r\n\r\n\treturn newProps;\r\n}\r\n\r\nfunction Block( { children, isHtml, ...props } ) {\r\n\treturn (\r\n\t\t<div { ...useBlockProps( props, { __unstableIsHtml: isHtml } ) }>\r\n\t\t\t{ children }\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction BlockListBlock( {\r\n\tblock: { __unstableBlockSource },\r\n\tmode,\r\n\tisLocked,\r\n\tcanRemove,\r\n\tclientId,\r\n\tisSelected,\r\n\tisSelectionEnabled,\r\n\tclassName,\r\n\t__unstableLayoutClassNames: layoutClassNames,\r\n\tname,\r\n\tisValid,\r\n\tattributes,\r\n\twrapperProps,\r\n\tsetAttributes,\r\n\tonReplace,\r\n\tonInsertBlocksAfter,\r\n\tonMerge,\r\n\ttoggleSelection,\r\n} ) {\r\n\tconst {\r\n\t\tmayDisplayControls,\r\n\t\tmayDisplayParentControls,\r\n\t\tthemeSupportsLayout,\r\n\t\t...context\r\n\t} = useContext( PrivateBlockContext );\r\n\tconst { removeBlock } = useDispatch( blockEditorStore );\r\n\tconst onRemove = useCallback(\r\n\t\t() => removeBlock( clientId ),\r\n\t\t[ clientId, removeBlock ]\r\n\t);\r\n\r\n\tconst parentLayout = useLayout() || {};\r\n\r\n\t// We wrap the BlockEdit component in a div that hides it when editing in\r\n\t// HTML mode. This allows us to render all of the ancillary pieces\r\n\t// (InspectorControls, etc.) which are inside `BlockEdit` but not\r\n\t// `BlockHTML`, even in HTML mode.\r\n\tlet blockEdit = (\r\n\t\t<BlockEdit\r\n\t\t\tname={ name }\r\n\t\t\tisSelected={ isSelected }\r\n\t\t\tattributes={ attributes }\r\n\t\t\tsetAttributes={ setAttributes }\r\n\t\t\tinsertBlocksAfter={ isLocked ? undefined : onInsertBlocksAfter }\r\n\t\t\tonReplace={ canRemove ? onReplace : undefined }\r\n\t\t\tonRemove={ canRemove ? onRemove : undefined }\r\n\t\t\tmergeBlocks={ canRemove ? onMerge : undefined }\r\n\t\t\tclientId={ clientId }\r\n\t\t\tisSelectionEnabled={ isSelectionEnabled }\r\n\t\t\ttoggleSelection={ toggleSelection }\r\n\t\t\t__unstableLayoutClassNames={ layoutClassNames }\r\n\t\t\t__unstableParentLayout={\r\n\t\t\t\tObject.keys( parentLayout ).length ? parentLayout : undefined\r\n\t\t\t}\r\n\t\t\tmayDisplayControls={ mayDisplayControls }\r\n\t\t\tmayDisplayParentControls={ mayDisplayParentControls }\r\n\t\t\tblockEditingMode={ context.blockEditingMode }\r\n\t\t\tisPreviewMode={ context.isPreviewMode }\r\n\t\t/>\r\n\t);\r\n\r\n\tconst blockType = getBlockType( name );\r\n\r\n\t// Determine whether the block has props to apply to the wrapper.\r\n\tif ( blockType?.getEditWrapperProps ) {\r\n\t\twrapperProps = mergeWrapperProps(\r\n\t\t\twrapperProps,\r\n\t\t\tblockType.getEditWrapperProps( attributes )\r\n\t\t);\r\n\t}\r\n\r\n\tconst isAligned =\r\n\t\twrapperProps &&\r\n\t\t!! wrapperProps[ 'data-align' ] &&\r\n\t\t! themeSupportsLayout;\r\n\r\n\t// Support for sticky position in classic themes with alignment wrappers.\r\n\r\n\tconst isSticky = className?.includes( 'is-position-sticky' );\r\n\r\n\t// For aligned blocks, provide a wrapper element so the block can be\r\n\t// positioned relative to the block column.\r\n\t// This is only kept for classic themes that don't support layout\r\n\t// Historically we used to rely on extra divs and data-align to\r\n\t// provide the alignments styles in the editor.\r\n\t// Due to the differences between frontend and backend, we migrated\r\n\t// to the layout feature, and we're now aligning the markup of frontend\r\n\t// and backend.\r\n\tif ( isAligned ) {\r\n\t\tblockEdit = (\r\n\t\t\t<div\r\n\t\t\t\tclassName={ clsx( 'wp-block', isSticky && className ) }\r\n\t\t\t\tdata-align={ wrapperProps[ 'data-align' ] }\r\n\t\t\t>\r\n\t\t\t\t{ blockEdit }\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tlet block;\r\n\r\n\tif ( ! isValid ) {\r\n\t\tconst saveContent = __unstableBlockSource\r\n\t\t\t? serializeRawBlock( __unstableBlockSource )\r\n\t\t\t: getSaveContent( blockType, attributes );\r\n\r\n\t\tblock = (\r\n\t\t\t<Block className=\"has-warning\">\r\n\t\t\t\t<BlockInvalidWarning clientId={ clientId } />\r\n\t\t\t\t<RawHTML>{ safeHTML( saveContent ) }</RawHTML>\r\n\t\t\t</Block>\r\n\t\t);\r\n\t} else if ( mode === 'html' ) {\r\n\t\t// Render blockEdit so the inspector controls don't disappear.\r\n\t\t// See #8969.\r\n\t\tblock = (\r\n\t\t\t<>\r\n\t\t\t\t<div style={ { display: 'none' } }>{ blockEdit }</div>\r\n\t\t\t\t<Block isHtml>\r\n\t\t\t\t\t<BlockHtml clientId={ clientId } />\r\n\t\t\t\t</Block>\r\n\t\t\t</>\r\n\t\t);\r\n\t} else if ( blockType?.apiVersion > 1 ) {\r\n\t\tblock = blockEdit;\r\n\t} else {\r\n\t\tblock = <Block>{ blockEdit }</Block>;\r\n\t}\r\n\r\n\tconst { 'data-align': dataAlign, ...restWrapperProps } = wrapperProps ?? {};\r\n\tconst updatedWrapperProps = {\r\n\t\t...restWrapperProps,\r\n\t\tclassName: clsx(\r\n\t\t\trestWrapperProps.className,\r\n\t\t\tdataAlign && themeSupportsLayout && `align${ dataAlign }`,\r\n\t\t\t! ( dataAlign && isSticky ) && className\r\n\t\t),\r\n\t};\r\n\r\n\t// We set a new context with the adjusted and filtered wrapperProps (through\r\n\t// `editor.BlockListBlock`), which the `BlockListBlockProvider` did not have\r\n\t// access to.\r\n\t// Note that the context value doesn't have to be memoized in this case\r\n\t// because when it changes, this component will be re-rendered anyway, and\r\n\t// none of the consumers (BlockListBlock and useBlockProps) are memoized or\r\n\t// \"pure\". This is different from the public BlockEditContext, where\r\n\t// consumers might be memoized or \"pure\".\r\n\treturn (\r\n\t\t<PrivateBlockContext.Provider\r\n\t\t\tvalue={ {\r\n\t\t\t\twrapperProps: updatedWrapperProps,\r\n\t\t\t\tisAligned,\r\n\t\t\t\t...context,\r\n\t\t\t} }\r\n\t\t>\r\n\t\t\t<BlockCrashBoundary\r\n\t\t\t\tfallback={\r\n\t\t\t\t\t<Block className=\"has-warning\">\r\n\t\t\t\t\t\t<BlockCrashWarning />\r\n\t\t\t\t\t</Block>\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t{ block }\r\n\t\t\t</BlockCrashBoundary>\r\n\t\t</PrivateBlockContext.Provider>\r\n\t);\r\n}\r\n\r\nconst applyWithDispatch = withDispatch( ( dispatch, ownProps, registry ) => {\r\n\tconst {\r\n\t\tupdateBlockAttributes,\r\n\t\tinsertBlocks,\r\n\t\tmergeBlocks,\r\n\t\treplaceBlocks,\r\n\t\ttoggleSelection,\r\n\t\t__unstableMarkLastChangeAsPersistent,\r\n\t\tmoveBlocksToPosition,\r\n\t\tremoveBlock,\r\n\t\tselectBlock,\r\n\t} = dispatch( blockEditorStore );\r\n\r\n\t// Do not add new properties here, use `useDispatch` instead to avoid\r\n\t// leaking new props to the public API (editor.BlockListBlock filter).\r\n\treturn {\r\n\t\tsetAttributes( newAttributes ) {\r\n\t\t\tconst { getMultiSelectedBlockClientIds } =\r\n\t\t\t\tregistry.select( blockEditorStore );\r\n\t\t\tconst multiSelectedBlockClientIds =\r\n\t\t\t\tgetMultiSelectedBlockClientIds();\r\n\t\t\tconst { clientId } = ownProps;\r\n\t\t\tconst clientIds = multiSelectedBlockClientIds.length\r\n\t\t\t\t? multiSelectedBlockClientIds\r\n\t\t\t\t: [ clientId ];\r\n\r\n\t\t\tupdateBlockAttributes( clientIds, newAttributes );\r\n\t\t},\r\n\t\tonInsertBlocks( blocks, index ) {\r\n\t\t\tconst { rootClientId } = ownProps;\r\n\t\t\tinsertBlocks( blocks, index, rootClientId );\r\n\t\t},\r\n\t\tonInsertBlocksAfter( blocks ) {\r\n\t\t\tconst { clientId, rootClientId } = ownProps;\r\n\t\t\tconst { getBlockIndex } = registry.select( blockEditorStore );\r\n\t\t\tconst index = getBlockIndex( clientId );\r\n\t\t\tinsertBlocks( blocks, index + 1, rootClientId );\r\n\t\t},\r\n\t\tonMerge( forward ) {\r\n\t\t\tconst { clientId, rootClientId } = ownProps;\r\n\t\t\tconst {\r\n\t\t\t\tgetPreviousBlockClientId,\r\n\t\t\t\tgetNextBlockClientId,\r\n\t\t\t\tgetBlock,\r\n\t\t\t\tgetBlockAttributes,\r\n\t\t\t\tgetBlockName,\r\n\t\t\t\tgetBlockOrder,\r\n\t\t\t\tgetBlockIndex,\r\n\t\t\t\tgetBlockRootClientId,\r\n\t\t\t\tcanInsertBlockType,\r\n\t\t\t} = registry.select( blockEditorStore );\r\n\r\n\t\t\tfunction switchToDefaultOrRemove() {\r\n\t\t\t\tconst block = getBlock( clientId );\r\n\t\t\t\tconst defaultBlockName = getDefaultBlockName();\r\n\t\t\t\tif ( getBlockName( clientId ) !== defaultBlockName ) {\r\n\t\t\t\t\tconst replacement = switchToBlockType(\r\n\t\t\t\t\t\tblock,\r\n\t\t\t\t\t\tdefaultBlockName\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif ( replacement && replacement.length ) {\r\n\t\t\t\t\t\treplaceBlocks( clientId, replacement );\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if ( isUnmodifiedDefaultBlock( block ) ) {\r\n\t\t\t\t\tconst nextBlockClientId = getNextBlockClientId( clientId );\r\n\t\t\t\t\tif ( nextBlockClientId ) {\r\n\t\t\t\t\t\tregistry.batch( () => {\r\n\t\t\t\t\t\t\tremoveBlock( clientId );\r\n\t\t\t\t\t\t\tselectBlock( nextBlockClientId );\r\n\t\t\t\t\t\t} );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Moves the block with clientId up one level. If the block type\r\n\t\t\t * cannot be inserted at the new location, it will be attempted to\r\n\t\t\t * convert to the default block type.\r\n\t\t\t *\r\n\t\t\t * @param {string}  _clientId       The block to move.\r\n\t\t\t * @param {boolean} changeSelection Whether to change the selection\r\n\t\t\t *                                  to the moved block.\r\n\t\t\t */\r\n\t\t\tfunction moveFirstItemUp( _clientId, changeSelection = true ) {\r\n\t\t\t\tconst targetRootClientId = getBlockRootClientId( _clientId );\r\n\t\t\t\tconst blockOrder = getBlockOrder( _clientId );\r\n\t\t\t\tconst [ firstClientId ] = blockOrder;\r\n\r\n\t\t\t\tif (\r\n\t\t\t\t\tblockOrder.length === 1 &&\r\n\t\t\t\t\tisUnmodifiedBlock( getBlock( firstClientId ) )\r\n\t\t\t\t) {\r\n\t\t\t\t\tremoveBlock( _clientId );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tregistry.batch( () => {\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tcanInsertBlockType(\r\n\t\t\t\t\t\t\t\tgetBlockName( firstClientId ),\r\n\t\t\t\t\t\t\t\ttargetRootClientId\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tmoveBlocksToPosition(\r\n\t\t\t\t\t\t\t\t[ firstClientId ],\r\n\t\t\t\t\t\t\t\t_clientId,\r\n\t\t\t\t\t\t\t\ttargetRootClientId,\r\n\t\t\t\t\t\t\t\tgetBlockIndex( _clientId )\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconst replacement = switchToBlockType(\r\n\t\t\t\t\t\t\t\tgetBlock( firstClientId ),\r\n\t\t\t\t\t\t\t\tgetDefaultBlockName()\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\treplacement &&\r\n\t\t\t\t\t\t\t\treplacement.length &&\r\n\t\t\t\t\t\t\t\treplacement.every( ( block ) =>\r\n\t\t\t\t\t\t\t\t\tcanInsertBlockType(\r\n\t\t\t\t\t\t\t\t\t\tblock.name,\r\n\t\t\t\t\t\t\t\t\t\ttargetRootClientId\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\tinsertBlocks(\r\n\t\t\t\t\t\t\t\t\treplacement,\r\n\t\t\t\t\t\t\t\t\tgetBlockIndex( _clientId ),\r\n\t\t\t\t\t\t\t\t\ttargetRootClientId,\r\n\t\t\t\t\t\t\t\t\tchangeSelection\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\tremoveBlock( firstClientId, false );\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tswitchToDefaultOrRemove();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t! getBlockOrder( _clientId ).length &&\r\n\t\t\t\t\t\t\tisUnmodifiedBlock( getBlock( _clientId ) )\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tremoveBlock( _clientId, false );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// For `Delete` or forward merge, we should do the exact same thing\r\n\t\t\t// as `Backspace`, but from the other block.\r\n\t\t\tif ( forward ) {\r\n\t\t\t\tif ( rootClientId ) {\r\n\t\t\t\t\tconst nextRootClientId =\r\n\t\t\t\t\t\tgetNextBlockClientId( rootClientId );\r\n\r\n\t\t\t\t\tif ( nextRootClientId ) {\r\n\t\t\t\t\t\t// If there is a block that follows with the same parent\r\n\t\t\t\t\t\t// block name and the same attributes, merge the inner\r\n\t\t\t\t\t\t// blocks.\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tgetBlockName( rootClientId ) ===\r\n\t\t\t\t\t\t\tgetBlockName( nextRootClientId )\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tconst rootAttributes =\r\n\t\t\t\t\t\t\t\tgetBlockAttributes( rootClientId );\r\n\t\t\t\t\t\t\tconst previousRootAttributes =\r\n\t\t\t\t\t\t\t\tgetBlockAttributes( nextRootClientId );\r\n\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tObject.keys( rootAttributes ).every(\r\n\t\t\t\t\t\t\t\t\t( key ) =>\r\n\t\t\t\t\t\t\t\t\t\trootAttributes[ key ] ===\r\n\t\t\t\t\t\t\t\t\t\tpreviousRootAttributes[ key ]\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\tregistry.batch( () => {\r\n\t\t\t\t\t\t\t\t\tmoveBlocksToPosition(\r\n\t\t\t\t\t\t\t\t\t\tgetBlockOrder( nextRootClientId ),\r\n\t\t\t\t\t\t\t\t\t\tnextRootClientId,\r\n\t\t\t\t\t\t\t\t\t\trootClientId\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\tremoveBlock( nextRootClientId, false );\r\n\t\t\t\t\t\t\t\t} );\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmergeBlocks( rootClientId, nextRootClientId );\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst nextBlockClientId = getNextBlockClientId( clientId );\r\n\r\n\t\t\t\tif ( ! nextBlockClientId ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( getBlockOrder( nextBlockClientId ).length ) {\r\n\t\t\t\t\tmoveFirstItemUp( nextBlockClientId, false );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmergeBlocks( clientId, nextBlockClientId );\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tconst previousBlockClientId =\r\n\t\t\t\t\tgetPreviousBlockClientId( clientId );\r\n\r\n\t\t\t\tif ( previousBlockClientId ) {\r\n\t\t\t\t\tmergeBlocks( previousBlockClientId, clientId );\r\n\t\t\t\t} else if ( rootClientId ) {\r\n\t\t\t\t\tconst previousRootClientId =\r\n\t\t\t\t\t\tgetPreviousBlockClientId( rootClientId );\r\n\r\n\t\t\t\t\t// If there is a preceding block with the same parent block\r\n\t\t\t\t\t// name and the same attributes, merge the inner blocks.\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tpreviousRootClientId &&\r\n\t\t\t\t\t\tgetBlockName( rootClientId ) ===\r\n\t\t\t\t\t\t\tgetBlockName( previousRootClientId )\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tconst rootAttributes =\r\n\t\t\t\t\t\t\tgetBlockAttributes( rootClientId );\r\n\t\t\t\t\t\tconst previousRootAttributes =\r\n\t\t\t\t\t\t\tgetBlockAttributes( previousRootClientId );\r\n\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tObject.keys( rootAttributes ).every(\r\n\t\t\t\t\t\t\t\t( key ) =>\r\n\t\t\t\t\t\t\t\t\trootAttributes[ key ] ===\r\n\t\t\t\t\t\t\t\t\tpreviousRootAttributes[ key ]\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tregistry.batch( () => {\r\n\t\t\t\t\t\t\t\tmoveBlocksToPosition(\r\n\t\t\t\t\t\t\t\t\tgetBlockOrder( rootClientId ),\r\n\t\t\t\t\t\t\t\t\trootClientId,\r\n\t\t\t\t\t\t\t\t\tpreviousRootClientId\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\tremoveBlock( rootClientId, false );\r\n\t\t\t\t\t\t\t} );\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tmoveFirstItemUp( rootClientId );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tswitchToDefaultOrRemove();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonReplace( blocks, indexToSelect, initialPosition ) {\r\n\t\t\tif (\r\n\t\t\t\tblocks.length &&\r\n\t\t\t\t! isUnmodifiedDefaultBlock( blocks[ blocks.length - 1 ] )\r\n\t\t\t) {\r\n\t\t\t\t__unstableMarkLastChangeAsPersistent();\r\n\t\t\t}\r\n\t\t\t//Unsynced patterns are nested in an array so we need to flatten them.\r\n\t\t\tconst replacementBlocks =\r\n\t\t\t\tblocks?.length === 1 && Array.isArray( blocks[ 0 ] )\r\n\t\t\t\t\t? blocks[ 0 ]\r\n\t\t\t\t\t: blocks;\r\n\t\t\treplaceBlocks(\r\n\t\t\t\t[ ownProps.clientId ],\r\n\t\t\t\treplacementBlocks,\r\n\t\t\t\tindexToSelect,\r\n\t\t\t\tinitialPosition\r\n\t\t\t);\r\n\t\t},\r\n\t\ttoggleSelection( selectionEnabled ) {\r\n\t\t\ttoggleSelection( selectionEnabled );\r\n\t\t},\r\n\t};\r\n} );\r\n\r\n// This component is used by the BlockListBlockProvider component below. It will\r\n// add the props necessary for the `editor.BlockListBlock` filters.\r\nBlockListBlock = compose(\r\n\tapplyWithDispatch,\r\n\twithFilters( 'editor.BlockListBlock' )\r\n)( BlockListBlock );\r\n\r\n// This component provides all the information we need through a single store\r\n// subscription (useSelect mapping). Only the necessary props are passed down\r\n// to the BlockListBlock component, which is a filtered component, so these\r\n// props are public API. To avoid adding to the public API, we use a private\r\n// context to pass the rest of the information to the filtered BlockListBlock\r\n// component, and useBlockProps.\r\nfunction BlockListBlockProvider( props ) {\r\n\tconst { clientId, rootClientId } = props;\r\n\tconst selectedProps = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst {\r\n\t\t\t\tisBlockSelected,\r\n\t\t\t\tgetBlockMode,\r\n\t\t\t\tisSelectionEnabled,\r\n\t\t\t\tgetTemplateLock,\r\n\t\t\t\tgetBlockWithoutAttributes,\r\n\t\t\t\tgetBlockAttributes,\r\n\t\t\t\tcanRemoveBlock,\r\n\t\t\t\tcanMoveBlock,\r\n\r\n\t\t\t\tgetSettings,\r\n\t\t\t\tgetTemporarilyEditingAsBlocks,\r\n\t\t\t\tgetBlockEditingMode,\r\n\t\t\t\tgetBlockName,\r\n\t\t\t\tisFirstMultiSelectedBlock,\r\n\t\t\t\tgetMultiSelectedBlockClientIds,\r\n\t\t\t\thasSelectedInnerBlock,\r\n\t\t\t\tgetBlocksByName,\r\n\r\n\t\t\t\tgetBlockIndex,\r\n\t\t\t\tisBlockMultiSelected,\r\n\t\t\t\tisBlockSubtreeDisabled,\r\n\t\t\t\tisBlockHighlighted,\r\n\t\t\t\t__unstableIsFullySelected,\r\n\t\t\t\t__unstableSelectionHasUnmergeableBlock,\r\n\t\t\t\tisBlockBeingDragged,\r\n\t\t\t\tisDragging,\r\n\t\t\t\thasBlockMovingClientId,\r\n\t\t\t\tcanInsertBlockType,\r\n\t\t\t\t__unstableHasActiveBlockOverlayActive,\r\n\t\t\t\t__unstableGetEditorMode,\r\n\t\t\t\tgetSelectedBlocksInitialCaretPosition,\r\n\t\t\t} = unlock( select( blockEditorStore ) );\r\n\t\t\tconst blockWithoutAttributes =\r\n\t\t\t\tgetBlockWithoutAttributes( clientId );\r\n\r\n\t\t\t// This is a temporary fix.\r\n\t\t\t// This function should never be called when a block is not\r\n\t\t\t// present in the state. It happens now because the order in\r\n\t\t\t// withSelect rendering is not correct.\r\n\t\t\tif ( ! blockWithoutAttributes ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst {\r\n\t\t\t\thasBlockSupport: _hasBlockSupport,\r\n\t\t\t\tgetActiveBlockVariation,\r\n\t\t\t} = select( blocksStore );\r\n\t\t\tconst attributes = getBlockAttributes( clientId );\r\n\t\t\tconst { name: blockName, isValid } = blockWithoutAttributes;\r\n\t\t\tconst blockType = getBlockType( blockName );\r\n\t\t\tconst { supportsLayout, __unstableIsPreviewMode: isPreviewMode } =\r\n\t\t\t\tgetSettings();\r\n\t\t\tconst hasLightBlockWrapper = blockType?.apiVersion > 1;\r\n\t\t\tconst previewContext = {\r\n\t\t\t\tisPreviewMode,\r\n\t\t\t\tblockWithoutAttributes,\r\n\t\t\t\tname: blockName,\r\n\t\t\t\tattributes,\r\n\t\t\t\tisValid,\r\n\t\t\t\tthemeSupportsLayout: supportsLayout,\r\n\t\t\t\tindex: getBlockIndex( clientId ),\r\n\t\t\t\tisReusable: isReusableBlock( blockType ),\r\n\t\t\t\tclassName: hasLightBlockWrapper\r\n\t\t\t\t\t? attributes.className\r\n\t\t\t\t\t: undefined,\r\n\t\t\t\tdefaultClassName: hasLightBlockWrapper\r\n\t\t\t\t\t? getBlockDefaultClassName( blockName )\r\n\t\t\t\t\t: undefined,\r\n\t\t\t\tblockTitle: blockType?.title,\r\n\t\t\t};\r\n\r\n\t\t\t// When in preview mode, we can avoid a lot of selection and\r\n\t\t\t// editing related selectors.\r\n\t\t\tif ( isPreviewMode ) {\r\n\t\t\t\treturn previewContext;\r\n\t\t\t}\r\n\r\n\t\t\tconst _isSelected = isBlockSelected( clientId );\r\n\t\t\tconst canRemove = canRemoveBlock( clientId );\r\n\t\t\tconst canMove = canMoveBlock( clientId );\r\n\t\t\tconst match = getActiveBlockVariation( blockName, attributes );\r\n\t\t\tconst isMultiSelected = isBlockMultiSelected( clientId );\r\n\t\t\tconst checkDeep = true;\r\n\t\t\tconst isAncestorOfSelectedBlock = hasSelectedInnerBlock(\r\n\t\t\t\tclientId,\r\n\t\t\t\tcheckDeep\r\n\t\t\t);\r\n\t\t\tconst movingClientId = hasBlockMovingClientId();\r\n\t\t\tconst blockEditingMode = getBlockEditingMode( clientId );\r\n\r\n\t\t\tconst multiple = hasBlockSupport( blockName, 'multiple', true );\r\n\r\n\t\t\t// For block types with `multiple` support, there is no \"original\r\n\t\t\t// block\" to be found in the content, as the block itself is valid.\r\n\t\t\tconst blocksWithSameName = multiple\r\n\t\t\t\t? []\r\n\t\t\t\t: getBlocksByName( blockName );\r\n\t\t\tconst isInvalid =\r\n\t\t\t\tblocksWithSameName.length &&\r\n\t\t\t\tblocksWithSameName[ 0 ] !== clientId;\r\n\r\n\t\t\tconst editorMode = __unstableGetEditorMode();\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...previewContext,\r\n\t\t\t\tmode: getBlockMode( clientId ),\r\n\t\t\t\tisSelectionEnabled: isSelectionEnabled(),\r\n\t\t\t\tisLocked: !! getTemplateLock( rootClientId ),\r\n\t\t\t\ttemplateLock: getTemplateLock( clientId ),\r\n\t\t\t\tcanRemove,\r\n\t\t\t\tcanMove,\r\n\t\t\t\tisSelected: _isSelected,\r\n\t\t\t\tisTemporarilyEditingAsBlocks:\r\n\t\t\t\t\tgetTemporarilyEditingAsBlocks() === clientId,\r\n\t\t\t\tblockEditingMode,\r\n\t\t\t\tmayDisplayControls:\r\n\t\t\t\t\t_isSelected ||\r\n\t\t\t\t\t( isFirstMultiSelectedBlock( clientId ) &&\r\n\t\t\t\t\t\tgetMultiSelectedBlockClientIds().every(\r\n\t\t\t\t\t\t\t( id ) => getBlockName( id ) === blockName\r\n\t\t\t\t\t\t) ),\r\n\t\t\t\tmayDisplayParentControls:\r\n\t\t\t\t\t_hasBlockSupport(\r\n\t\t\t\t\t\tgetBlockName( clientId ),\r\n\t\t\t\t\t\t'__experimentalExposeControlsToChildren',\r\n\t\t\t\t\t\tfalse\r\n\t\t\t\t\t) && hasSelectedInnerBlock( clientId ),\r\n\t\t\t\tblockApiVersion: blockType?.apiVersion || 1,\r\n\t\t\t\tblockTitle: match?.title || blockType?.title,\r\n\t\t\t\teditorMode,\r\n\t\t\t\tisSubtreeDisabled:\r\n\t\t\t\t\tblockEditingMode === 'disabled' &&\r\n\t\t\t\t\tisBlockSubtreeDisabled( clientId ),\r\n\t\t\t\thasOverlay:\r\n\t\t\t\t\t__unstableHasActiveBlockOverlayActive( clientId ) &&\r\n\t\t\t\t\t! isDragging(),\r\n\t\t\t\tinitialPosition:\r\n\t\t\t\t\t_isSelected &&\r\n\t\t\t\t\t( editorMode === 'edit' || editorMode === 'zoom-out' ) // Don't recalculate the initialPosition when toggling in/out of zoom-out mode\r\n\t\t\t\t\t\t? getSelectedBlocksInitialCaretPosition()\r\n\t\t\t\t\t\t: undefined,\r\n\t\t\t\tisHighlighted: isBlockHighlighted( clientId ),\r\n\t\t\t\tisMultiSelected,\r\n\t\t\t\tisPartiallySelected:\r\n\t\t\t\t\tisMultiSelected &&\r\n\t\t\t\t\t! __unstableIsFullySelected() &&\r\n\t\t\t\t\t! __unstableSelectionHasUnmergeableBlock(),\r\n\t\t\t\tisDragging: isBlockBeingDragged( clientId ),\r\n\t\t\t\thasChildSelected: isAncestorOfSelectedBlock,\r\n\t\t\t\tisBlockMovingMode: !! movingClientId,\r\n\t\t\t\tcanInsertMovingBlock:\r\n\t\t\t\t\tmovingClientId &&\r\n\t\t\t\t\tcanInsertBlockType(\r\n\t\t\t\t\t\tgetBlockName( movingClientId ),\r\n\t\t\t\t\t\trootClientId\r\n\t\t\t\t\t),\r\n\t\t\t\tisEditingDisabled: blockEditingMode === 'disabled',\r\n\t\t\t\thasEditableOutline:\r\n\t\t\t\t\tblockEditingMode !== 'disabled' &&\r\n\t\t\t\t\tgetBlockEditingMode( rootClientId ) === 'disabled',\r\n\t\t\t\toriginalBlockClientId: isInvalid\r\n\t\t\t\t\t? blocksWithSameName[ 0 ]\r\n\t\t\t\t\t: false,\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ clientId, rootClientId ]\r\n\t);\r\n\r\n\tconst {\r\n\t\tisPreviewMode,\r\n\t\t// Fill values that end up as a public API and may not be defined in\r\n\t\t// preview mode.\r\n\t\tmode = 'visual',\r\n\t\tisSelectionEnabled = false,\r\n\t\tisLocked = false,\r\n\t\tcanRemove = false,\r\n\t\tcanMove = false,\r\n\t\tblockWithoutAttributes,\r\n\t\tname,\r\n\t\tattributes,\r\n\t\tisValid,\r\n\t\tisSelected = false,\r\n\t\tthemeSupportsLayout,\r\n\t\tisTemporarilyEditingAsBlocks,\r\n\t\tblockEditingMode,\r\n\t\teditorMode,\r\n\t\tmayDisplayControls,\r\n\t\tmayDisplayParentControls,\r\n\t\tindex,\r\n\t\tblockApiVersion,\r\n\t\tblockTitle,\r\n\t\tisSubtreeDisabled,\r\n\t\thasOverlay,\r\n\t\tinitialPosition,\r\n\t\tisHighlighted,\r\n\t\tisMultiSelected,\r\n\t\tisPartiallySelected,\r\n\t\tisReusable,\r\n\t\tisDragging,\r\n\t\thasChildSelected,\r\n\t\tisBlockMovingMode,\r\n\t\tcanInsertMovingBlock,\r\n\t\ttemplateLock,\r\n\t\tisEditingDisabled,\r\n\t\thasEditableOutline,\r\n\t\tclassName,\r\n\t\tdefaultClassName,\r\n\t\toriginalBlockClientId,\r\n\t} = selectedProps;\r\n\r\n\t// Users of the editor.BlockListBlock filter used to be able to\r\n\t// access the block prop.\r\n\t// Ideally these blocks would rely on the clientId prop only.\r\n\t// This is kept for backward compatibility reasons.\r\n\tconst block = useMemo(\r\n\t\t() => ( { ...blockWithoutAttributes, attributes } ),\r\n\t\t[ blockWithoutAttributes, attributes ]\r\n\t);\r\n\r\n\t// Block is sometimes not mounted at the right time, causing it be\r\n\t// undefined see issue for more info\r\n\t// https://github.com/WordPress/gutenberg/issues/17013\r\n\tif ( ! selectedProps ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst privateContext = {\r\n\t\tisPreviewMode,\r\n\t\tclientId,\r\n\t\tclassName,\r\n\t\tindex,\r\n\t\tmode,\r\n\t\tname,\r\n\t\tblockApiVersion,\r\n\t\tblockTitle,\r\n\t\tisSelected,\r\n\t\tisSubtreeDisabled,\r\n\t\thasOverlay,\r\n\t\tinitialPosition,\r\n\t\tblockEditingMode,\r\n\t\teditorMode,\r\n\t\tisHighlighted,\r\n\t\tisMultiSelected,\r\n\t\tisPartiallySelected,\r\n\t\tisReusable,\r\n\t\tisDragging,\r\n\t\thasChildSelected,\r\n\t\tisBlockMovingMode,\r\n\t\tcanInsertMovingBlock,\r\n\t\ttemplateLock,\r\n\t\tisEditingDisabled,\r\n\t\thasEditableOutline,\r\n\t\tisTemporarilyEditingAsBlocks,\r\n\t\tdefaultClassName,\r\n\t\tmayDisplayControls,\r\n\t\tmayDisplayParentControls,\r\n\t\toriginalBlockClientId,\r\n\t\tthemeSupportsLayout,\r\n\t};\r\n\r\n\t// Here we separate between the props passed to BlockListBlock and any other\r\n\t// information we selected for internal use. BlockListBlock is a filtered\r\n\t// component and thus ALL the props are PUBLIC API.\r\n\r\n\t// Note that the context value doesn't have to be memoized in this case\r\n\t// because when it changes, this component will be re-rendered anyway, and\r\n\t// none of the consumers (BlockListBlock and useBlockProps) are memoized or\r\n\t// \"pure\". This is different from the public BlockEditContext, where\r\n\t// consumers might be memoized or \"pure\".\r\n\treturn (\r\n\t\t<PrivateBlockContext.Provider value={ privateContext }>\r\n\t\t\t<BlockListBlock\r\n\t\t\t\t{ ...props }\r\n\t\t\t\t// WARNING: all the following props are public API (through the\r\n\t\t\t\t// editor.BlockListBlock filter) and normally nothing new should\r\n\t\t\t\t// be added to it.\r\n\t\t\t\t{ ...{\r\n\t\t\t\t\tmode,\r\n\t\t\t\t\tisSelectionEnabled,\r\n\t\t\t\t\tisLocked,\r\n\t\t\t\t\tcanRemove,\r\n\t\t\t\t\tcanMove,\r\n\t\t\t\t\t// Users of the editor.BlockListBlock filter used to be able\r\n\t\t\t\t\t// to access the block prop. Ideally these blocks would rely\r\n\t\t\t\t\t// on the clientId prop only. This is kept for backward\r\n\t\t\t\t\t// compatibility reasons.\r\n\t\t\t\t\tblock,\r\n\t\t\t\t\tname,\r\n\t\t\t\t\tattributes,\r\n\t\t\t\t\tisValid,\r\n\t\t\t\t\tisSelected,\r\n\t\t\t\t} }\r\n\t\t\t/>\r\n\t\t</PrivateBlockContext.Provider>\r\n\t);\r\n}\r\n\r\nexport default memo( BlockListBlockProvider );\r\n"],"mappings":"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","ignoreList":[]}