{"version":3,"names":["Pressable","View","clsx","useCallback","useMemo","useState","useRef","memo","withFilters","__experimentalGetAccessibleBlockLabel","getAccessibleBlockLabel","getBlockType","getDefaultBlockName","isUnmodifiedBlock","isUnmodifiedDefaultBlock","switchToBlockType","useDispatch","useSelect","withDispatch","withSelect","compose","ifCondition","BlockEdit","BlockDraggable","BlockInvalidWarning","BlockOutline","store","blockEditorStore","useLayout","useScrollUponInsertion","useSettings","unlock","BlockCrashBoundary","BlockCrashWarning","getMergedGlobalStyles","GlobalStylesContext","useGlobalStyles","useMobileGlobalStylesColors","jsx","_jsx","jsxs","_jsxs","EMPTY_ARRAY","mergeWrapperProps","propsA","propsB","newProps","hasOwnProperty","className","style","BlockWrapper","accessibilityLabel","blockCategory","children","clientId","draggingClientId","draggingEnabled","hasInnerBlocks","isDescendentBlockSelected","isSelected","isTouchable","marginHorizontal","marginVertical","name","onFocus","blockWrapperStyles","flex","blockWrapperStyle","accessible","ref","isLayoutCalculated","setIsLayoutCalculated","elementRef","onLayout","accessibilityRole","disabled","onPress","blockName","fallback","enabled","testID","BlockListBlock","attributes","blockWidth","blockWrapperWidth","canRemove","contentStyle","isLocked","isSelectionEnabled","isStackedHorizontally","isValid","onDeleteBlock","onInsertBlocksAfter","onMerge","onReplace","parentBlockAlignment","parentWidth","rootClientId","setAttributes","toggleSelection","wrapperProps","baseGlobalStyles","blockType","isDescendantOfParentSelected","isParentSelected","order","mayDisplayControls","blockEditingMode","select","getBlockCount","getBlockHierarchyRootClientId","getBlockIndex","getBlockParents","getSelectedBlockClientId","getSettings","hasSelectedInnerBlock","getBlockName","isFirstMultiSelectedBlock","getMultiSelectedBlockClientIds","getBlockEditingMode","currentBlockType","currentBlockCategory","category","blockOrder","descendentBlockSelected","selectedBlockClientId","parents","parentSelected","selectedParents","descendantOfParentSelected","includes","blockHasInnerBlocks","isDraggingEnabled","currentDraggingClientId","globalStylesBaseStyles","__experimentalGlobalStylesBaseStyles","every","id","removeBlock","selectBlock","initialBlockWidth","setBlockWidth","parentLayout","defaultColors","globalStyle","fontSizes","onRemove","nativeEvent","layoutWidth","Math","floor","layout","width","getEditWrapperProps","mergedStyle","JSON","stringify","Object","fromEntries","entries","filter","key","BLOCK_STYLE_ATTRIBUTES","isFocused","Provider","value","insertBlocksAfter","undefined","mergeBlocks","__unstableParentLayout","keys","length","applyWithSelect","isBlockSelected","getBlockMode","getTemplateLock","getBlockWithoutAttributes","getBlockAttributes","canRemoveBlock","canMoveBlock","block","templateLock","canMove","mode","applyWithDispatch","dispatch","ownProps","registry","updateBlockAttributes","insertBlocks","replaceBlocks","__unstableMarkLastChangeAsPersistent","moveBlocksToPosition","newAttributes","multiSelectedBlockClientIds","clientIds","onInsertBlocks","blocks","index","forward","getPreviousBlockClientId","getNextBlockClientId","getBlock","getBlockOrder","getBlockRootClientId","canInsertBlockType","moveFirstItemUp","_clientId","changeSelection","targetRootClientId","firstClientId","batch","replacement","nextRootClientId","rootAttributes","previousRootAttributes","nextBlockClientId","previousBlockClientId","previousRootClientId","indexToSelect","initialPosition","meta","selectionEnabled"],"sources":["@wordpress/block-editor/src/components/block-list/block.native.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport { Pressable, View } from 'react-native';\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tuseCallback,\r\n\tuseMemo,\r\n\tuseState,\r\n\tuseRef,\r\n\tmemo,\r\n} from '@wordpress/element';\r\nimport { withFilters } from '@wordpress/components';\r\nimport {\r\n\t__experimentalGetAccessibleBlockLabel as getAccessibleBlockLabel,\r\n\tgetBlockType,\r\n\tgetDefaultBlockName,\r\n\tisUnmodifiedBlock,\r\n\tisUnmodifiedDefaultBlock,\r\n\tswitchToBlockType,\r\n} from '@wordpress/blocks';\r\nimport {\r\n\tuseDispatch,\r\n\tuseSelect,\r\n\twithDispatch,\r\n\twithSelect,\r\n} from '@wordpress/data';\r\nimport { compose, ifCondition } from '@wordpress/compose';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockEdit from '../block-edit';\r\nimport BlockDraggable from '../block-draggable';\r\nimport BlockInvalidWarning from './block-invalid-warning';\r\nimport BlockOutline from './block-outline';\r\nimport { store as blockEditorStore } from '../../store';\r\nimport { useLayout } from './layout';\r\nimport useScrollUponInsertion from './use-scroll-upon-insertion';\r\nimport { useSettings } from '../use-settings';\r\nimport { unlock } from '../../lock-unlock';\r\nimport BlockCrashBoundary from './block-crash-boundary';\r\nimport BlockCrashWarning from './block-crash-warning';\r\nimport {\r\n\tgetMergedGlobalStyles,\r\n\tGlobalStylesContext,\r\n\tuseGlobalStyles,\r\n\tuseMobileGlobalStylesColors,\r\n} from '../global-styles/use-global-styles-context';\r\n\r\nconst EMPTY_ARRAY = [];\r\n\r\n/**\r\n * Merges wrapper props with special handling for classNames and styles.\r\n *\r\n * @param {Object} propsA\r\n * @param {Object} propsB\r\n *\r\n * @return {Object} Merged props.\r\n */\r\nfunction mergeWrapperProps( propsA, propsB ) {\r\n\tconst newProps = {\r\n\t\t...propsA,\r\n\t\t...propsB,\r\n\t};\r\n\r\n\t// May be set to undefined, so check if the property is set!\r\n\tif (\r\n\t\tpropsA?.hasOwnProperty( 'className' ) &&\r\n\t\tpropsB?.hasOwnProperty( 'className' )\r\n\t) {\r\n\t\tnewProps.className = clsx( propsA.className, propsB.className );\r\n\t}\r\n\r\n\tif (\r\n\t\tpropsA?.hasOwnProperty( 'style' ) &&\r\n\t\tpropsB?.hasOwnProperty( 'style' )\r\n\t) {\r\n\t\tnewProps.style = { ...propsA.style, ...propsB.style };\r\n\t}\r\n\r\n\treturn newProps;\r\n}\r\n\r\nfunction BlockWrapper( {\r\n\taccessibilityLabel,\r\n\tblockCategory,\r\n\tchildren,\r\n\tclientId,\r\n\tdraggingClientId,\r\n\tdraggingEnabled,\r\n\thasInnerBlocks,\r\n\tisDescendentBlockSelected,\r\n\tisSelected,\r\n\tisTouchable,\r\n\tmarginHorizontal,\r\n\tmarginVertical,\r\n\tname,\r\n\tonFocus,\r\n} ) {\r\n\tconst blockWrapperStyles = { flex: 1 };\r\n\tconst blockWrapperStyle = [\r\n\t\tblockWrapperStyles,\r\n\t\t{\r\n\t\t\tmarginVertical,\r\n\t\t\tmarginHorizontal,\r\n\t\t},\r\n\t];\r\n\tconst accessible = ! ( isSelected || isDescendentBlockSelected );\r\n\r\n\tconst ref = useRef();\r\n\tconst [ isLayoutCalculated, setIsLayoutCalculated ] = useState();\r\n\tuseScrollUponInsertion( {\r\n\t\tclientId,\r\n\t\tisSelected,\r\n\t\tisLayoutCalculated,\r\n\t\telementRef: ref,\r\n\t} );\r\n\tconst onLayout = useCallback( () => {\r\n\t\tsetIsLayoutCalculated( true );\r\n\t}, [] );\r\n\r\n\treturn (\r\n\t\t<Pressable\r\n\t\t\taccessibilityLabel={ accessibilityLabel }\r\n\t\t\taccessibilityRole=\"button\"\r\n\t\t\taccessible={ accessible }\r\n\t\t\tdisabled={ ! isTouchable }\r\n\t\t\tonPress={ onFocus }\r\n\t\t\tstyle={ blockWrapperStyle }\r\n\t\t\tref={ ref }\r\n\t\t\tonLayout={ onLayout }\r\n\t\t>\r\n\t\t\t<BlockOutline\r\n\t\t\t\tblockCategory={ blockCategory }\r\n\t\t\t\thasInnerBlocks={ hasInnerBlocks }\r\n\t\t\t\tisSelected={ isSelected }\r\n\t\t\t\tname={ name }\r\n\t\t\t/>\r\n\t\t\t<BlockCrashBoundary\r\n\t\t\t\tblockName={ name }\r\n\t\t\t\tfallback={ <BlockCrashWarning /> }\r\n\t\t\t>\r\n\t\t\t\t<BlockDraggable\r\n\t\t\t\t\tclientId={ clientId }\r\n\t\t\t\t\tdraggingClientId={ draggingClientId }\r\n\t\t\t\t\tenabled={ draggingEnabled }\r\n\t\t\t\t\ttestID=\"draggable-trigger-content\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{ children }\r\n\t\t\t\t</BlockDraggable>\r\n\t\t\t</BlockCrashBoundary>\r\n\t\t</Pressable>\r\n\t);\r\n}\r\n\r\nfunction BlockListBlock( {\r\n\tattributes,\r\n\tblockWidth: blockWrapperWidth,\r\n\tcanRemove,\r\n\tclientId,\r\n\tcontentStyle,\r\n\tisLocked,\r\n\tisSelected,\r\n\tisSelectionEnabled,\r\n\tisStackedHorizontally,\r\n\tisValid,\r\n\tmarginHorizontal,\r\n\tmarginVertical,\r\n\tname,\r\n\tonDeleteBlock,\r\n\tonInsertBlocksAfter,\r\n\tonMerge,\r\n\tonReplace,\r\n\tparentBlockAlignment,\r\n\tparentWidth,\r\n\trootClientId,\r\n\tsetAttributes,\r\n\ttoggleSelection,\r\n\twrapperProps,\r\n} ) {\r\n\tconst {\r\n\t\tbaseGlobalStyles,\r\n\t\tblockCategory,\r\n\t\tblockType,\r\n\t\tdraggingClientId,\r\n\t\tdraggingEnabled,\r\n\t\thasInnerBlocks,\r\n\t\tisDescendantOfParentSelected,\r\n\t\tisDescendentBlockSelected,\r\n\t\tisParentSelected,\r\n\t\torder,\r\n\t\tmayDisplayControls,\r\n\t\tblockEditingMode,\r\n\t} = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst {\r\n\t\t\t\tgetBlockCount,\r\n\t\t\t\tgetBlockHierarchyRootClientId,\r\n\t\t\t\tgetBlockIndex,\r\n\t\t\t\tgetBlockParents,\r\n\t\t\t\tgetSelectedBlockClientId,\r\n\t\t\t\tgetSettings,\r\n\t\t\t\thasSelectedInnerBlock,\r\n\t\t\t\tgetBlockName,\r\n\t\t\t\tisFirstMultiSelectedBlock,\r\n\t\t\t\tgetMultiSelectedBlockClientIds,\r\n\t\t\t\tgetBlockEditingMode,\r\n\t\t\t} = select( blockEditorStore );\r\n\t\t\tconst currentBlockType = getBlockType( name || 'core/missing' );\r\n\t\t\tconst currentBlockCategory = currentBlockType?.category;\r\n\t\t\tconst blockOrder = getBlockIndex( clientId );\r\n\t\t\tconst descendentBlockSelected = hasSelectedInnerBlock(\r\n\t\t\t\tclientId,\r\n\t\t\t\ttrue\r\n\t\t\t);\r\n\t\t\tconst selectedBlockClientId = getSelectedBlockClientId();\r\n\r\n\t\t\tconst parents = getBlockParents( clientId, true );\r\n\t\t\tconst parentSelected =\r\n\t\t\t\t// Set false as a default value to prevent re-render when it's changed from null to false.\r\n\t\t\t\t( selectedBlockClientId || false ) &&\r\n\t\t\t\tselectedBlockClientId === rootClientId;\r\n\r\n\t\t\tconst selectedParents = clientId ? parents : [];\r\n\t\t\tconst descendantOfParentSelected =\r\n\t\t\t\tselectedParents.includes( rootClientId );\r\n\t\t\tconst blockHasInnerBlocks = getBlockCount( clientId ) > 0;\r\n\r\n\t\t\t// For blocks with inner blocks, we only enable the dragging in the nested\r\n\t\t\t// blocks if any of them are selected. This way we prevent the long-press\r\n\t\t\t// gesture from being disabled for elements within the block UI.\r\n\t\t\tconst isDraggingEnabled =\r\n\t\t\t\t! blockHasInnerBlocks ||\r\n\t\t\t\tisSelected ||\r\n\t\t\t\t! descendentBlockSelected;\r\n\t\t\t// Dragging nested blocks is not supported yet. For this reason, the block to be dragged\r\n\t\t\t// will be the top in the hierarchy.\r\n\t\t\tconst currentDraggingClientId =\r\n\t\t\t\tgetBlockHierarchyRootClientId( clientId );\r\n\r\n\t\t\tconst globalStylesBaseStyles =\r\n\t\t\t\tgetSettings()?.__experimentalGlobalStylesBaseStyles;\r\n\r\n\t\t\treturn {\r\n\t\t\t\tbaseGlobalStyles: globalStylesBaseStyles,\r\n\t\t\t\tblockCategory: currentBlockCategory,\r\n\t\t\t\tblockType: currentBlockType,\r\n\t\t\t\tdraggingClientId: currentDraggingClientId,\r\n\t\t\t\tdraggingEnabled: isDraggingEnabled,\r\n\t\t\t\thasInnerBlocks: blockHasInnerBlocks,\r\n\t\t\t\tisDescendantOfParentSelected: descendantOfParentSelected,\r\n\t\t\t\tisDescendentBlockSelected: descendentBlockSelected,\r\n\t\t\t\tisParentSelected: parentSelected,\r\n\t\t\t\torder: blockOrder,\r\n\t\t\t\tmayDisplayControls:\r\n\t\t\t\t\tisSelected ||\r\n\t\t\t\t\t( isFirstMultiSelectedBlock( clientId ) &&\r\n\t\t\t\t\t\tgetMultiSelectedBlockClientIds().every(\r\n\t\t\t\t\t\t\t( id ) => getBlockName( id ) === name\r\n\t\t\t\t\t\t) ),\r\n\t\t\t\tblockEditingMode: getBlockEditingMode( clientId ),\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ clientId, isSelected, name, rootClientId ]\r\n\t);\r\n\tconst { removeBlock, selectBlock } = useDispatch( blockEditorStore );\r\n\tconst initialBlockWidth = blockWrapperWidth - 2 * marginHorizontal;\r\n\tconst [ blockWidth, setBlockWidth ] = useState( initialBlockWidth );\r\n\tconst parentLayout = useLayout() || {};\r\n\tconst defaultColors = useMobileGlobalStylesColors();\r\n\tconst globalStyle = useGlobalStyles();\r\n\tconst [ fontSizes ] = useSettings( 'typography.fontSizes' );\r\n\r\n\tconst onRemove = useCallback(\r\n\t\t() => removeBlock( clientId ),\r\n\t\t[ clientId, removeBlock ]\r\n\t);\r\n\tconst onFocus = useCallback( () => {\r\n\t\tif ( ! isSelected ) {\r\n\t\t\tselectBlock( clientId );\r\n\t\t}\r\n\t}, [ selectBlock, clientId, isSelected ] );\r\n\r\n\tconst onLayout = useCallback(\r\n\t\t( { nativeEvent } ) => {\r\n\t\t\tconst layoutWidth = Math.floor( nativeEvent.layout.width );\r\n\r\n\t\t\tif ( ! blockWidth || ! layoutWidth ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif ( blockWidth !== layoutWidth ) {\r\n\t\t\t\tsetBlockWidth( layoutWidth );\r\n\t\t\t}\r\n\t\t},\r\n\t\t[ blockWidth, setBlockWidth ]\r\n\t);\r\n\r\n\t// Determine whether the block has props to apply to the wrapper.\r\n\tif ( blockType?.getEditWrapperProps ) {\r\n\t\twrapperProps = mergeWrapperProps(\r\n\t\t\twrapperProps,\r\n\t\t\tblockType.getEditWrapperProps( attributes )\r\n\t\t);\r\n\t}\r\n\r\n\t// Inherited styles merged with block level styles.\r\n\tconst mergedStyle = useMemo( () => {\r\n\t\treturn getMergedGlobalStyles(\r\n\t\t\tbaseGlobalStyles,\r\n\t\t\tglobalStyle,\r\n\t\t\twrapperProps?.style,\r\n\t\t\tattributes,\r\n\t\t\tdefaultColors,\r\n\t\t\tname,\r\n\t\t\tfontSizes || EMPTY_ARRAY\r\n\t\t);\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [\r\n\t\t// It is crucial to keep the dependencies array minimal to prevent unnecessary calls that could negatively impact performance.\r\n\t\t// JSON.stringify is used for the following purposes:\r\n\t\t// 1. To create a single, comparable value from the globalStyle, wrapperProps.style, and attributes objects. This allows useMemo to\r\n\t\t//    efficiently determine if a change has occurred in any of these objects.\r\n\t\t// 2. To filter the attributes object, ensuring that only the relevant attributes (included in\r\n\t\t//    GlobalStylesContext.BLOCK_STYLE_ATTRIBUTES) are considered as dependencies. This reduces the likelihood of\r\n\t\t//    unnecessary useMemo calls when other, unrelated attributes change.\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\tJSON.stringify( globalStyle ),\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\tJSON.stringify( wrapperProps?.style ),\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\tJSON.stringify(\r\n\t\t\tObject.fromEntries(\r\n\t\t\t\tObject.entries( attributes ?? {} ).filter( ( [ key ] ) =>\r\n\t\t\t\t\tGlobalStylesContext.BLOCK_STYLE_ATTRIBUTES.includes( key )\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t),\r\n\t] );\r\n\r\n\tconst isFocused = isSelected || isDescendentBlockSelected;\r\n\tconst isTouchable =\r\n\t\tisSelected ||\r\n\t\tisDescendantOfParentSelected ||\r\n\t\tisParentSelected ||\r\n\t\t! rootClientId;\r\n\r\n\tconst accessibilityLabel = getAccessibleBlockLabel(\r\n\t\tblockType,\r\n\t\tattributes,\r\n\t\torder + 1\r\n\t);\r\n\r\n\treturn (\r\n\t\t<BlockWrapper\r\n\t\t\taccessibilityLabel={ accessibilityLabel }\r\n\t\t\tblockCategory={ blockCategory }\r\n\t\t\tclientId={ clientId }\r\n\t\t\tdraggingClientId={ draggingClientId }\r\n\t\t\tdraggingEnabled={ draggingEnabled }\r\n\t\t\thasInnerBlocks={ hasInnerBlocks }\r\n\t\t\tisDescendentBlockSelected={ isDescendentBlockSelected }\r\n\t\t\tisFocused={ isFocused }\r\n\t\t\tisSelected={ isSelected }\r\n\t\t\tisStackedHorizontally={ isStackedHorizontally }\r\n\t\t\tisTouchable={ isTouchable }\r\n\t\t\tmarginHorizontal={ marginHorizontal }\r\n\t\t\tmarginVertical={ marginVertical }\r\n\t\t\tname={ name }\r\n\t\t\tonFocus={ onFocus }\r\n\t\t>\r\n\t\t\t{ () =>\r\n\t\t\t\t! isValid ? (\r\n\t\t\t\t\t<BlockInvalidWarning clientId={ clientId } />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<GlobalStylesContext.Provider value={ mergedStyle }>\r\n\t\t\t\t\t\t<BlockEdit\r\n\t\t\t\t\t\t\tattributes={ attributes }\r\n\t\t\t\t\t\t\tblockWidth={ blockWidth }\r\n\t\t\t\t\t\t\tclientId={ clientId }\r\n\t\t\t\t\t\t\tcontentStyle={ contentStyle }\r\n\t\t\t\t\t\t\tinsertBlocksAfter={\r\n\t\t\t\t\t\t\t\tisLocked ? undefined : onInsertBlocksAfter\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tisSelected={ isSelected }\r\n\t\t\t\t\t\t\tisSelectionEnabled={ isSelectionEnabled }\r\n\t\t\t\t\t\t\tmergeBlocks={ canRemove ? onMerge : undefined }\r\n\t\t\t\t\t\t\tname={ name }\r\n\t\t\t\t\t\t\tonDeleteBlock={ onDeleteBlock }\r\n\t\t\t\t\t\t\tonFocus={ onFocus }\r\n\t\t\t\t\t\t\tonRemove={ canRemove ? onRemove : undefined }\r\n\t\t\t\t\t\t\tonReplace={ canRemove ? onReplace : undefined }\r\n\t\t\t\t\t\t\tparentBlockAlignment={ parentBlockAlignment }\r\n\t\t\t\t\t\t\tparentWidth={ parentWidth }\r\n\t\t\t\t\t\t\tsetAttributes={ setAttributes }\r\n\t\t\t\t\t\t\tstyle={ mergedStyle }\r\n\t\t\t\t\t\t\ttoggleSelection={ toggleSelection }\r\n\t\t\t\t\t\t\t__unstableParentLayout={\r\n\t\t\t\t\t\t\t\tObject.keys( parentLayout ).length\r\n\t\t\t\t\t\t\t\t\t? parentLayout\r\n\t\t\t\t\t\t\t\t\t: undefined\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\twrapperProps={ wrapperProps }\r\n\t\t\t\t\t\t\tmayDisplayControls={ mayDisplayControls }\r\n\t\t\t\t\t\t\tblockEditingMode={ blockEditingMode }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<View onLayout={ onLayout } />\r\n\t\t\t\t\t</GlobalStylesContext.Provider>\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t</BlockWrapper>\r\n\t);\r\n}\r\n\r\nconst applyWithSelect = withSelect( ( select, { clientId, rootClientId } ) => {\r\n\tconst {\r\n\t\tisBlockSelected,\r\n\t\tgetBlockMode,\r\n\t\tisSelectionEnabled,\r\n\t\tgetTemplateLock,\r\n\t\tgetBlockWithoutAttributes,\r\n\t\tgetBlockAttributes,\r\n\t\tcanRemoveBlock,\r\n\t\tcanMoveBlock,\r\n\t} = unlock( select( blockEditorStore ) );\r\n\tconst block = getBlockWithoutAttributes( clientId );\r\n\tconst attributes = getBlockAttributes( clientId );\r\n\tconst isSelected = isBlockSelected( clientId );\r\n\tconst templateLock = getTemplateLock( rootClientId );\r\n\tconst canRemove = canRemoveBlock( clientId );\r\n\tconst canMove = canMoveBlock( clientId );\r\n\r\n\t// The fallback to `{}` is a temporary fix.\r\n\t// This function should never be called when a block is not present in\r\n\t// the state. It happens now because the order in withSelect rendering\r\n\t// is not correct.\r\n\tconst { name, isValid } = block || {};\r\n\r\n\t// Do not add new properties here, use `useSelect` instead to avoid\r\n\t// leaking new props to the public API (editor.BlockListBlock filter).\r\n\treturn {\r\n\t\tmode: getBlockMode( clientId ),\r\n\t\tisSelectionEnabled: isSelectionEnabled(),\r\n\t\tisLocked: !! templateLock,\r\n\t\tcanRemove,\r\n\t\tcanMove,\r\n\t\t// Users of the editor.BlockListBlock filter used to be able to\r\n\t\t// access the block prop.\r\n\t\t// Ideally these blocks would rely on the clientId prop only.\r\n\t\t// This is kept for backward compatibility reasons.\r\n\t\tblock,\r\n\t\tname,\r\n\t\tattributes,\r\n\t\tisValid,\r\n\t\tisSelected,\r\n\t};\r\n} );\r\n\r\nconst applyWithDispatch = withDispatch( ( dispatch, ownProps, registry ) => {\r\n\tconst {\r\n\t\tupdateBlockAttributes,\r\n\t\tinsertBlocks,\r\n\t\tmergeBlocks,\r\n\t\treplaceBlocks,\r\n\t\ttoggleSelection,\r\n\t\t__unstableMarkLastChangeAsPersistent,\r\n\t\tmoveBlocksToPosition,\r\n\t\tremoveBlock,\r\n\t} = dispatch( blockEditorStore );\r\n\r\n\t// Do not add new properties here, use `useDispatch` instead to avoid\r\n\t// leaking new props to the public API (editor.BlockListBlock filter).\r\n\treturn {\r\n\t\tsetAttributes( newAttributes ) {\r\n\t\t\tconst { getMultiSelectedBlockClientIds } =\r\n\t\t\t\tregistry.select( blockEditorStore );\r\n\t\t\tconst multiSelectedBlockClientIds =\r\n\t\t\t\tgetMultiSelectedBlockClientIds();\r\n\t\t\tconst { clientId } = ownProps;\r\n\t\t\tconst clientIds = multiSelectedBlockClientIds.length\r\n\t\t\t\t? multiSelectedBlockClientIds\r\n\t\t\t\t: [ clientId ];\r\n\r\n\t\t\tupdateBlockAttributes( clientIds, newAttributes );\r\n\t\t},\r\n\t\tonInsertBlocks( blocks, index ) {\r\n\t\t\tconst { rootClientId } = ownProps;\r\n\t\t\tinsertBlocks( blocks, index, rootClientId );\r\n\t\t},\r\n\t\tonInsertBlocksAfter( blocks ) {\r\n\t\t\tconst { clientId, rootClientId } = ownProps;\r\n\t\t\tconst { getBlockIndex } = registry.select( blockEditorStore );\r\n\t\t\tconst index = getBlockIndex( clientId );\r\n\t\t\tinsertBlocks( blocks, index + 1, rootClientId );\r\n\t\t},\r\n\t\tonMerge( forward ) {\r\n\t\t\tconst { clientId, rootClientId } = ownProps;\r\n\t\t\tconst {\r\n\t\t\t\tgetPreviousBlockClientId,\r\n\t\t\t\tgetNextBlockClientId,\r\n\t\t\t\tgetBlock,\r\n\t\t\t\tgetBlockAttributes,\r\n\t\t\t\tgetBlockName,\r\n\t\t\t\tgetBlockOrder,\r\n\t\t\t\tgetBlockIndex,\r\n\t\t\t\tgetBlockRootClientId,\r\n\t\t\t\tcanInsertBlockType,\r\n\t\t\t} = registry.select( blockEditorStore );\r\n\r\n\t\t\t/**\r\n\t\t\t * Moves the block with clientId up one level. If the block type\r\n\t\t\t * cannot be inserted at the new location, it will be attempted to\r\n\t\t\t * convert to the default block type.\r\n\t\t\t *\r\n\t\t\t * @param {string}  _clientId       The block to move.\r\n\t\t\t * @param {boolean} changeSelection Whether to change the selection\r\n\t\t\t *                                  to the moved block.\r\n\t\t\t */\r\n\t\t\tfunction moveFirstItemUp( _clientId, changeSelection = true ) {\r\n\t\t\t\tconst targetRootClientId = getBlockRootClientId( _clientId );\r\n\t\t\t\tconst blockOrder = getBlockOrder( _clientId );\r\n\t\t\t\tconst [ firstClientId ] = blockOrder;\r\n\r\n\t\t\t\tif (\r\n\t\t\t\t\tblockOrder.length === 1 &&\r\n\t\t\t\t\tisUnmodifiedBlock( getBlock( firstClientId ) )\r\n\t\t\t\t) {\r\n\t\t\t\t\tremoveBlock( _clientId );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tregistry.batch( () => {\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tcanInsertBlockType(\r\n\t\t\t\t\t\t\t\tgetBlockName( firstClientId ),\r\n\t\t\t\t\t\t\t\ttargetRootClientId\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tmoveBlocksToPosition(\r\n\t\t\t\t\t\t\t\t[ firstClientId ],\r\n\t\t\t\t\t\t\t\t_clientId,\r\n\t\t\t\t\t\t\t\ttargetRootClientId,\r\n\t\t\t\t\t\t\t\tgetBlockIndex( _clientId )\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconst replacement = switchToBlockType(\r\n\t\t\t\t\t\t\t\tgetBlock( firstClientId ),\r\n\t\t\t\t\t\t\t\tgetDefaultBlockName()\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\tif ( replacement && replacement.length ) {\r\n\t\t\t\t\t\t\t\tinsertBlocks(\r\n\t\t\t\t\t\t\t\t\treplacement,\r\n\t\t\t\t\t\t\t\t\tgetBlockIndex( _clientId ),\r\n\t\t\t\t\t\t\t\t\ttargetRootClientId,\r\n\t\t\t\t\t\t\t\t\tchangeSelection\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\tremoveBlock( firstClientId, false );\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t! getBlockOrder( _clientId ).length &&\r\n\t\t\t\t\t\t\tisUnmodifiedBlock( getBlock( _clientId ) )\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tremoveBlock( _clientId, false );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// For `Delete` or forward merge, we should do the exact same thing\r\n\t\t\t// as `Backspace`, but from the other block.\r\n\t\t\tif ( forward ) {\r\n\t\t\t\tif ( rootClientId ) {\r\n\t\t\t\t\tconst nextRootClientId =\r\n\t\t\t\t\t\tgetNextBlockClientId( rootClientId );\r\n\r\n\t\t\t\t\tif ( nextRootClientId ) {\r\n\t\t\t\t\t\t// If there is a block that follows with the same parent\r\n\t\t\t\t\t\t// block name and the same attributes, merge the inner\r\n\t\t\t\t\t\t// blocks.\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tgetBlockName( rootClientId ) ===\r\n\t\t\t\t\t\t\tgetBlockName( nextRootClientId )\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tconst rootAttributes =\r\n\t\t\t\t\t\t\t\tgetBlockAttributes( rootClientId );\r\n\t\t\t\t\t\t\tconst previousRootAttributes =\r\n\t\t\t\t\t\t\t\tgetBlockAttributes( nextRootClientId );\r\n\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tObject.keys( rootAttributes ).every(\r\n\t\t\t\t\t\t\t\t\t( key ) =>\r\n\t\t\t\t\t\t\t\t\t\trootAttributes[ key ] ===\r\n\t\t\t\t\t\t\t\t\t\tpreviousRootAttributes[ key ]\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\tregistry.batch( () => {\r\n\t\t\t\t\t\t\t\t\tmoveBlocksToPosition(\r\n\t\t\t\t\t\t\t\t\t\tgetBlockOrder( nextRootClientId ),\r\n\t\t\t\t\t\t\t\t\t\tnextRootClientId,\r\n\t\t\t\t\t\t\t\t\t\trootClientId\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\tremoveBlock( nextRootClientId, false );\r\n\t\t\t\t\t\t\t\t} );\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmergeBlocks( rootClientId, nextRootClientId );\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst nextBlockClientId = getNextBlockClientId( clientId );\r\n\r\n\t\t\t\tif ( ! nextBlockClientId ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( getBlockOrder( nextBlockClientId ).length ) {\r\n\t\t\t\t\tmoveFirstItemUp( nextBlockClientId, false );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmergeBlocks( clientId, nextBlockClientId );\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tconst previousBlockClientId =\r\n\t\t\t\t\tgetPreviousBlockClientId( clientId );\r\n\r\n\t\t\t\tif ( previousBlockClientId ) {\r\n\t\t\t\t\tmergeBlocks( previousBlockClientId, clientId );\r\n\t\t\t\t} else if ( rootClientId ) {\r\n\t\t\t\t\tconst previousRootClientId =\r\n\t\t\t\t\t\tgetPreviousBlockClientId( rootClientId );\r\n\r\n\t\t\t\t\t// If there is a preceding block with the same parent block\r\n\t\t\t\t\t// name and the same attributes, merge the inner blocks.\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tpreviousRootClientId &&\r\n\t\t\t\t\t\tgetBlockName( rootClientId ) ===\r\n\t\t\t\t\t\t\tgetBlockName( previousRootClientId )\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tconst rootAttributes =\r\n\t\t\t\t\t\t\tgetBlockAttributes( rootClientId );\r\n\t\t\t\t\t\tconst previousRootAttributes =\r\n\t\t\t\t\t\t\tgetBlockAttributes( previousRootClientId );\r\n\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tObject.keys( rootAttributes ).every(\r\n\t\t\t\t\t\t\t\t( key ) =>\r\n\t\t\t\t\t\t\t\t\trootAttributes[ key ] ===\r\n\t\t\t\t\t\t\t\t\tpreviousRootAttributes[ key ]\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tregistry.batch( () => {\r\n\t\t\t\t\t\t\t\tmoveBlocksToPosition(\r\n\t\t\t\t\t\t\t\t\tgetBlockOrder( rootClientId ),\r\n\t\t\t\t\t\t\t\t\trootClientId,\r\n\t\t\t\t\t\t\t\t\tpreviousRootClientId\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\tremoveBlock( rootClientId, false );\r\n\t\t\t\t\t\t\t} );\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tmoveFirstItemUp( rootClientId );\r\n\t\t\t\t} else if (\r\n\t\t\t\t\tgetBlockName( clientId ) !== getDefaultBlockName()\r\n\t\t\t\t) {\r\n\t\t\t\t\tconst replacement = switchToBlockType(\r\n\t\t\t\t\t\tgetBlock( clientId ),\r\n\t\t\t\t\t\tgetDefaultBlockName()\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif ( replacement && replacement.length ) {\r\n\t\t\t\t\t\treplaceBlocks( clientId, replacement );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonReplace( blocks, indexToSelect, initialPosition, meta ) {\r\n\t\t\tif (\r\n\t\t\t\tblocks.length &&\r\n\t\t\t\t! isUnmodifiedDefaultBlock( blocks[ blocks.length - 1 ] )\r\n\t\t\t) {\r\n\t\t\t\t__unstableMarkLastChangeAsPersistent();\r\n\t\t\t}\r\n\t\t\treplaceBlocks(\r\n\t\t\t\t[ ownProps.clientId ],\r\n\t\t\t\tblocks,\r\n\t\t\t\tindexToSelect,\r\n\t\t\t\tinitialPosition,\r\n\t\t\t\tmeta\r\n\t\t\t);\r\n\t\t},\r\n\t\ttoggleSelection( selectionEnabled ) {\r\n\t\t\ttoggleSelection( selectionEnabled );\r\n\t\t},\r\n\t};\r\n} );\r\n\r\nexport default compose(\r\n\tmemo,\r\n\tapplyWithSelect,\r\n\tapplyWithDispatch,\r\n\t// Block is sometimes not mounted at the right time, causing it be undefined\r\n\t// see issue for more info\r\n\t// https://github.com/WordPress/gutenberg/issues/17013\r\n\tifCondition( ( { block } ) => !! block ),\r\n\twithFilters( 'editor.BlockListBlock' )\r\n)( BlockListBlock );\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,SAAS,EAAEC,IAAI,QAAQ,cAAc;AAC9C,OAAOC,IAAI,MAAM,MAAM;;AAEvB;AACA;AACA;AACA,SACCC,WAAW,EACXC,OAAO,EACPC,QAAQ,EACRC,MAAM,EACNC,IAAI,QACE,oBAAoB;AAC3B,SAASC,WAAW,QAAQ,uBAAuB;AACnD,SACCC,qCAAqC,IAAIC,uBAAuB,EAChEC,YAAY,EACZC,mBAAmB,EACnBC,iBAAiB,EACjBC,wBAAwB,EACxBC,iBAAiB,QACX,mBAAmB;AAC1B,SACCC,WAAW,EACXC,SAAS,EACTC,YAAY,EACZC,UAAU,QACJ,iBAAiB;AACxB,SAASC,OAAO,EAAEC,WAAW,QAAQ,oBAAoB;;AAEzD;AACA;AACA;AACA,OAAOC,SAAS,MAAM,eAAe;AACrC,OAAOC,cAAc,MAAM,oBAAoB;AAC/C,OAAOC,mBAAmB,MAAM,yBAAyB;AACzD,OAAOC,YAAY,MAAM,iBAAiB;AAC1C,SAASC,KAAK,IAAIC,gBAAgB,QAAQ,aAAa;AACvD,SAASC,SAAS,QAAQ,UAAU;AACpC,OAAOC,sBAAsB,MAAM,6BAA6B;AAChE,SAASC,WAAW,QAAQ,iBAAiB;AAC7C,SAASC,MAAM,QAAQ,mBAAmB;AAC1C,OAAOC,kBAAkB,MAAM,wBAAwB;AACvD,OAAOC,iBAAiB,MAAM,uBAAuB;AACrD,SACCC,qBAAqB,EACrBC,mBAAmB,EACnBC,eAAe,EACfC,2BAA2B,QACrB,4CAA4C;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAEpD,MAAMC,WAAW,GAAG,EAAE;;AAEtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,iBAAiBA,CAAEC,MAAM,EAAEC,MAAM,EAAG;EAC5C,MAAMC,QAAQ,GAAG;IAChB,GAAGF,MAAM;IACT,GAAGC;EACJ,CAAC;;EAED;EACA,IACCD,MAAM,EAAEG,cAAc,CAAE,WAAY,CAAC,IACrCF,MAAM,EAAEE,cAAc,CAAE,WAAY,CAAC,EACpC;IACDD,QAAQ,CAACE,SAAS,GAAG9C,IAAI,CAAE0C,MAAM,CAACI,SAAS,EAAEH,MAAM,CAACG,SAAU,CAAC;EAChE;EAEA,IACCJ,MAAM,EAAEG,cAAc,CAAE,OAAQ,CAAC,IACjCF,MAAM,EAAEE,cAAc,CAAE,OAAQ,CAAC,EAChC;IACDD,QAAQ,CAACG,KAAK,GAAG;MAAE,GAAGL,MAAM,CAACK,KAAK;MAAE,GAAGJ,MAAM,CAACI;IAAM,CAAC;EACtD;EAEA,OAAOH,QAAQ;AAChB;AAEA,SAASI,YAAYA,CAAE;EACtBC,kBAAkB;EAClBC,aAAa;EACbC,QAAQ;EACRC,QAAQ;EACRC,gBAAgB;EAChBC,eAAe;EACfC,cAAc;EACdC,yBAAyB;EACzBC,UAAU;EACVC,WAAW;EACXC,gBAAgB;EAChBC,cAAc;EACdC,IAAI;EACJC;AACD,CAAC,EAAG;EACH,MAAMC,kBAAkB,GAAG;IAAEC,IAAI,EAAE;EAAE,CAAC;EACtC,MAAMC,iBAAiB,GAAG,CACzBF,kBAAkB,EAClB;IACCH,cAAc;IACdD;EACD,CAAC,CACD;EACD,MAAMO,UAAU,GAAG,EAAIT,UAAU,IAAID,yBAAyB,CAAE;EAEhE,MAAMW,GAAG,GAAG/D,MAAM,CAAC,CAAC;EACpB,MAAM,CAAEgE,kBAAkB,EAAEC,qBAAqB,CAAE,GAAGlE,QAAQ,CAAC,CAAC;EAChEwB,sBAAsB,CAAE;IACvByB,QAAQ;IACRK,UAAU;IACVW,kBAAkB;IAClBE,UAAU,EAAEH;EACb,CAAE,CAAC;EACH,MAAMI,QAAQ,GAAGtE,WAAW,CAAE,MAAM;IACnCoE,qBAAqB,CAAE,IAAK,CAAC;EAC9B,CAAC,EAAE,EAAG,CAAC;EAEP,oBACC9B,KAAA,CAACzC,SAAS;IACTmD,kBAAkB,EAAGA,kBAAoB;IACzCuB,iBAAiB,EAAC,QAAQ;IAC1BN,UAAU,EAAGA,UAAY;IACzBO,QAAQ,EAAG,CAAEf,WAAa;IAC1BgB,OAAO,EAAGZ,OAAS;IACnBf,KAAK,EAAGkB,iBAAmB;IAC3BE,GAAG,EAAGA,GAAK;IACXI,QAAQ,EAAGA,QAAU;IAAApB,QAAA,gBAErBd,IAAA,CAACd,YAAY;MACZ2B,aAAa,EAAGA,aAAe;MAC/BK,cAAc,EAAGA,cAAgB;MACjCE,UAAU,EAAGA,UAAY;MACzBI,IAAI,EAAGA;IAAM,CACb,CAAC,eACFxB,IAAA,CAACP,kBAAkB;MAClB6C,SAAS,EAAGd,IAAM;MAClBe,QAAQ,eAAGvC,IAAA,CAACN,iBAAiB,IAAE,CAAG;MAAAoB,QAAA,eAElCd,IAAA,CAAChB,cAAc;QACd+B,QAAQ,EAAGA,QAAU;QACrBC,gBAAgB,EAAGA,gBAAkB;QACrCwB,OAAO,EAAGvB,eAAiB;QAC3BwB,MAAM,EAAC,2BAA2B;QAAA3B,QAAA,EAEhCA;MAAQ,CACK;IAAC,CACE,CAAC;EAAA,CACX,CAAC;AAEd;AAEA,SAAS4B,cAAcA,CAAE;EACxBC,UAAU;EACVC,UAAU,EAAEC,iBAAiB;EAC7BC,SAAS;EACT/B,QAAQ;EACRgC,YAAY;EACZC,QAAQ;EACR5B,UAAU;EACV6B,kBAAkB;EAClBC,qBAAqB;EACrBC,OAAO;EACP7B,gBAAgB;EAChBC,cAAc;EACdC,IAAI;EACJ4B,aAAa;EACbC,mBAAmB;EACnBC,OAAO;EACPC,SAAS;EACTC,oBAAoB;EACpBC,WAAW;EACXC,YAAY;EACZC,aAAa;EACbC,eAAe;EACfC;AACD,CAAC,EAAG;EACH,MAAM;IACLC,gBAAgB;IAChBjD,aAAa;IACbkD,SAAS;IACT/C,gBAAgB;IAChBC,eAAe;IACfC,cAAc;IACd8C,4BAA4B;IAC5B7C,yBAAyB;IACzB8C,gBAAgB;IAChBC,KAAK;IACLC,kBAAkB;IAClBC;EACD,CAAC,GAAG1F,SAAS,CACV2F,MAAM,IAAM;IACb,MAAM;MACLC,aAAa;MACbC,6BAA6B;MAC7BC,aAAa;MACbC,eAAe;MACfC,wBAAwB;MACxBC,WAAW;MACXC,qBAAqB;MACrBC,YAAY;MACZC,yBAAyB;MACzBC,8BAA8B;MAC9BC;IACD,CAAC,GAAGX,MAAM,CAAEjF,gBAAiB,CAAC;IAC9B,MAAM6F,gBAAgB,GAAG7G,YAAY,CAAEoD,IAAI,IAAI,cAAe,CAAC;IAC/D,MAAM0D,oBAAoB,GAAGD,gBAAgB,EAAEE,QAAQ;IACvD,MAAMC,UAAU,GAAGZ,aAAa,CAAEzD,QAAS,CAAC;IAC5C,MAAMsE,uBAAuB,GAAGT,qBAAqB,CACpD7D,QAAQ,EACR,IACD,CAAC;IACD,MAAMuE,qBAAqB,GAAGZ,wBAAwB,CAAC,CAAC;IAExD,MAAMa,OAAO,GAAGd,eAAe,CAAE1D,QAAQ,EAAE,IAAK,CAAC;IACjD,MAAMyE,cAAc;IACnB;IACA,CAAEF,qBAAqB,IAAI,KAAK,KAChCA,qBAAqB,KAAK5B,YAAY;IAEvC,MAAM+B,eAAe,GAAG1E,QAAQ,GAAGwE,OAAO,GAAG,EAAE;IAC/C,MAAMG,0BAA0B,GAC/BD,eAAe,CAACE,QAAQ,CAAEjC,YAAa,CAAC;IACzC,MAAMkC,mBAAmB,GAAGtB,aAAa,CAAEvD,QAAS,CAAC,GAAG,CAAC;;IAEzD;IACA;IACA;IACA,MAAM8E,iBAAiB,GACtB,CAAED,mBAAmB,IACrBxE,UAAU,IACV,CAAEiE,uBAAuB;IAC1B;IACA;IACA,MAAMS,uBAAuB,GAC5BvB,6BAA6B,CAAExD,QAAS,CAAC;IAE1C,MAAMgF,sBAAsB,GAC3BpB,WAAW,CAAC,CAAC,EAAEqB,oCAAoC;IAEpD,OAAO;MACNlC,gBAAgB,EAAEiC,sBAAsB;MACxClF,aAAa,EAAEqE,oBAAoB;MACnCnB,SAAS,EAAEkB,gBAAgB;MAC3BjE,gBAAgB,EAAE8E,uBAAuB;MACzC7E,eAAe,EAAE4E,iBAAiB;MAClC3E,cAAc,EAAE0E,mBAAmB;MACnC5B,4BAA4B,EAAE0B,0BAA0B;MACxDvE,yBAAyB,EAAEkE,uBAAuB;MAClDpB,gBAAgB,EAAEuB,cAAc;MAChCtB,KAAK,EAAEkB,UAAU;MACjBjB,kBAAkB,EACjB/C,UAAU,IACR0D,yBAAyB,CAAE/D,QAAS,CAAC,IACtCgE,8BAA8B,CAAC,CAAC,CAACkB,KAAK,CACnCC,EAAE,IAAMrB,YAAY,CAAEqB,EAAG,CAAC,KAAK1E,IAClC,CAAG;MACL4C,gBAAgB,EAAEY,mBAAmB,CAAEjE,QAAS;IACjD,CAAC;EACF,CAAC,EACD,CAAEA,QAAQ,EAAEK,UAAU,EAAEI,IAAI,EAAEkC,YAAY,CAC3C,CAAC;EACD,MAAM;IAAEyC,WAAW;IAAEC;EAAY,CAAC,GAAG3H,WAAW,CAAEW,gBAAiB,CAAC;EACpE,MAAMiH,iBAAiB,GAAGxD,iBAAiB,GAAG,CAAC,GAAGvB,gBAAgB;EAClE,MAAM,CAAEsB,UAAU,EAAE0D,aAAa,CAAE,GAAGxI,QAAQ,CAAEuI,iBAAkB,CAAC;EACnE,MAAME,YAAY,GAAGlH,SAAS,CAAC,CAAC,IAAI,CAAC,CAAC;EACtC,MAAMmH,aAAa,GAAG1G,2BAA2B,CAAC,CAAC;EACnD,MAAM2G,WAAW,GAAG5G,eAAe,CAAC,CAAC;EACrC,MAAM,CAAE6G,SAAS,CAAE,GAAGnH,WAAW,CAAE,sBAAuB,CAAC;EAE3D,MAAMoH,QAAQ,GAAG/I,WAAW,CAC3B,MAAMuI,WAAW,CAAEpF,QAAS,CAAC,EAC7B,CAAEA,QAAQ,EAAEoF,WAAW,CACxB,CAAC;EACD,MAAM1E,OAAO,GAAG7D,WAAW,CAAE,MAAM;IAClC,IAAK,CAAEwD,UAAU,EAAG;MACnBgF,WAAW,CAAErF,QAAS,CAAC;IACxB;EACD,CAAC,EAAE,CAAEqF,WAAW,EAAErF,QAAQ,EAAEK,UAAU,CAAG,CAAC;EAE1C,MAAMc,QAAQ,GAAGtE,WAAW,CAC3B,CAAE;IAAEgJ;EAAY,CAAC,KAAM;IACtB,MAAMC,WAAW,GAAGC,IAAI,CAACC,KAAK,CAAEH,WAAW,CAACI,MAAM,CAACC,KAAM,CAAC;IAE1D,IAAK,CAAErE,UAAU,IAAI,CAAEiE,WAAW,EAAG;MACpC;IACD;IAEA,IAAKjE,UAAU,KAAKiE,WAAW,EAAG;MACjCP,aAAa,CAAEO,WAAY,CAAC;IAC7B;EACD,CAAC,EACD,CAAEjE,UAAU,EAAE0D,aAAa,CAC5B,CAAC;;EAED;EACA,IAAKvC,SAAS,EAAEmD,mBAAmB,EAAG;IACrCrD,YAAY,GAAGzD,iBAAiB,CAC/ByD,YAAY,EACZE,SAAS,CAACmD,mBAAmB,CAAEvE,UAAW,CAC3C,CAAC;EACF;;EAEA;EACA,MAAMwE,WAAW,GAAGtJ,OAAO,CAAE,MAAM;IAClC,OAAO8B,qBAAqB,CAC3BmE,gBAAgB,EAChB2C,WAAW,EACX5C,YAAY,EAAEnD,KAAK,EACnBiC,UAAU,EACV6D,aAAa,EACbhF,IAAI,EACJkF,SAAS,IAAIvG,WACd,CAAC;IACD;EACD,CAAC,EAAE;EACF;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACAiH,IAAI,CAACC,SAAS,CAAEZ,WAAY,CAAC;EAC7B;EACAW,IAAI,CAACC,SAAS,CAAExD,YAAY,EAAEnD,KAAM,CAAC;EACrC;EACA0G,IAAI,CAACC,SAAS,CACbC,MAAM,CAACC,WAAW,CACjBD,MAAM,CAACE,OAAO,CAAE7E,UAAU,aAAVA,UAAU,cAAVA,UAAU,GAAI,CAAC,CAAE,CAAC,CAAC8E,MAAM,CAAE,CAAE,CAAEC,GAAG,CAAE,KACnD9H,mBAAmB,CAAC+H,sBAAsB,CAAChC,QAAQ,CAAE+B,GAAI,CAC1D,CACD,CACD,CAAC,CACA,CAAC;EAEH,MAAME,SAAS,GAAGxG,UAAU,IAAID,yBAAyB;EACzD,MAAME,WAAW,GAChBD,UAAU,IACV4C,4BAA4B,IAC5BC,gBAAgB,IAChB,CAAEP,YAAY;EAEf,MAAM9C,kBAAkB,GAAGzC,uBAAuB,CACjD4F,SAAS,EACTpB,UAAU,EACVuB,KAAK,GAAG,CACT,CAAC;EAED,oBACClE,IAAA,CAACW,YAAY;IACZC,kBAAkB,EAAGA,kBAAoB;IACzCC,aAAa,EAAGA,aAAe;IAC/BE,QAAQ,EAAGA,QAAU;IACrBC,gBAAgB,EAAGA,gBAAkB;IACrCC,eAAe,EAAGA,eAAiB;IACnCC,cAAc,EAAGA,cAAgB;IACjCC,yBAAyB,EAAGA,yBAA2B;IACvDyG,SAAS,EAAGA,SAAW;IACvBxG,UAAU,EAAGA,UAAY;IACzB8B,qBAAqB,EAAGA,qBAAuB;IAC/C7B,WAAW,EAAGA,WAAa;IAC3BC,gBAAgB,EAAGA,gBAAkB;IACrCC,cAAc,EAAGA,cAAgB;IACjCC,IAAI,EAAGA,IAAM;IACbC,OAAO,EAAGA,OAAS;IAAAX,QAAA,EAEjBA,CAAA,KACD,CAAEqC,OAAO,gBACRnD,IAAA,CAACf,mBAAmB;MAAC8B,QAAQ,EAAGA;IAAU,CAAE,CAAC,gBAE7Cb,KAAA,CAACN,mBAAmB,CAACiI,QAAQ;MAACC,KAAK,EAAGX,WAAa;MAAArG,QAAA,gBAClDd,IAAA,CAACjB,SAAS;QACT4D,UAAU,EAAGA,UAAY;QACzBC,UAAU,EAAGA,UAAY;QACzB7B,QAAQ,EAAGA,QAAU;QACrBgC,YAAY,EAAGA,YAAc;QAC7BgF,iBAAiB,EAChB/E,QAAQ,GAAGgF,SAAS,GAAG3E,mBACvB;QACDjC,UAAU,EAAGA,UAAY;QACzB6B,kBAAkB,EAAGA,kBAAoB;QACzCgF,WAAW,EAAGnF,SAAS,GAAGQ,OAAO,GAAG0E,SAAW;QAC/CxG,IAAI,EAAGA,IAAM;QACb4B,aAAa,EAAGA,aAAe;QAC/B3B,OAAO,EAAGA,OAAS;QACnBkF,QAAQ,EAAG7D,SAAS,GAAG6D,QAAQ,GAAGqB,SAAW;QAC7CzE,SAAS,EAAGT,SAAS,GAAGS,SAAS,GAAGyE,SAAW;QAC/CxE,oBAAoB,EAAGA,oBAAsB;QAC7CC,WAAW,EAAGA,WAAa;QAC3BE,aAAa,EAAGA,aAAe;QAC/BjD,KAAK,EAAGyG,WAAa;QACrBvD,eAAe,EAAGA,eAAiB;QACnCsE,sBAAsB,EACrBZ,MAAM,CAACa,IAAI,CAAE5B,YAAa,CAAC,CAAC6B,MAAM,GAC/B7B,YAAY,GACZyB,SACH;QACDnE,YAAY,EAAGA,YAAc;QAC7BM,kBAAkB,EAAGA,kBAAoB;QACzCC,gBAAgB,EAAGA;MAAkB,CACrC,CAAC,eACFpE,IAAA,CAACtC,IAAI;QAACwE,QAAQ,EAAGA;MAAU,CAAE,CAAC;IAAA,CACD;EAC9B,CAEW,CAAC;AAEjB;AAEA,MAAMmG,eAAe,GAAGzJ,UAAU,CAAE,CAAEyF,MAAM,EAAE;EAAEtD,QAAQ;EAAE2C;AAAa,CAAC,KAAM;EAC7E,MAAM;IACL4E,eAAe;IACfC,YAAY;IACZtF,kBAAkB;IAClBuF,eAAe;IACfC,yBAAyB;IACzBC,kBAAkB;IAClBC,cAAc;IACdC;EACD,CAAC,GAAGpJ,MAAM,CAAE6E,MAAM,CAAEjF,gBAAiB,CAAE,CAAC;EACxC,MAAMyJ,KAAK,GAAGJ,yBAAyB,CAAE1H,QAAS,CAAC;EACnD,MAAM4B,UAAU,GAAG+F,kBAAkB,CAAE3H,QAAS,CAAC;EACjD,MAAMK,UAAU,GAAGkH,eAAe,CAAEvH,QAAS,CAAC;EAC9C,MAAM+H,YAAY,GAAGN,eAAe,CAAE9E,YAAa,CAAC;EACpD,MAAMZ,SAAS,GAAG6F,cAAc,CAAE5H,QAAS,CAAC;EAC5C,MAAMgI,OAAO,GAAGH,YAAY,CAAE7H,QAAS,CAAC;;EAExC;EACA;EACA;EACA;EACA,MAAM;IAAES,IAAI;IAAE2B;EAAQ,CAAC,GAAG0F,KAAK,IAAI,CAAC,CAAC;;EAErC;EACA;EACA,OAAO;IACNG,IAAI,EAAET,YAAY,CAAExH,QAAS,CAAC;IAC9BkC,kBAAkB,EAAEA,kBAAkB,CAAC,CAAC;IACxCD,QAAQ,EAAE,CAAC,CAAE8F,YAAY;IACzBhG,SAAS;IACTiG,OAAO;IACP;IACA;IACA;IACA;IACAF,KAAK;IACLrH,IAAI;IACJmB,UAAU;IACVQ,OAAO;IACP/B;EACD,CAAC;AACF,CAAE,CAAC;AAEH,MAAM6H,iBAAiB,GAAGtK,YAAY,CAAE,CAAEuK,QAAQ,EAAEC,QAAQ,EAAEC,QAAQ,KAAM;EAC3E,MAAM;IACLC,qBAAqB;IACrBC,YAAY;IACZrB,WAAW;IACXsB,aAAa;IACb3F,eAAe;IACf4F,oCAAoC;IACpCC,oBAAoB;IACpBtD;EACD,CAAC,GAAG+C,QAAQ,CAAE9J,gBAAiB,CAAC;;EAEhC;EACA;EACA,OAAO;IACNuE,aAAaA,CAAE+F,aAAa,EAAG;MAC9B,MAAM;QAAE3E;MAA+B,CAAC,GACvCqE,QAAQ,CAAC/E,MAAM,CAAEjF,gBAAiB,CAAC;MACpC,MAAMuK,2BAA2B,GAChC5E,8BAA8B,CAAC,CAAC;MACjC,MAAM;QAAEhE;MAAS,CAAC,GAAGoI,QAAQ;MAC7B,MAAMS,SAAS,GAAGD,2BAA2B,CAACvB,MAAM,GACjDuB,2BAA2B,GAC3B,CAAE5I,QAAQ,CAAE;MAEfsI,qBAAqB,CAAEO,SAAS,EAAEF,aAAc,CAAC;IAClD,CAAC;IACDG,cAAcA,CAAEC,MAAM,EAAEC,KAAK,EAAG;MAC/B,MAAM;QAAErG;MAAa,CAAC,GAAGyF,QAAQ;MACjCG,YAAY,CAAEQ,MAAM,EAAEC,KAAK,EAAErG,YAAa,CAAC;IAC5C,CAAC;IACDL,mBAAmBA,CAAEyG,MAAM,EAAG;MAC7B,MAAM;QAAE/I,QAAQ;QAAE2C;MAAa,CAAC,GAAGyF,QAAQ;MAC3C,MAAM;QAAE3E;MAAc,CAAC,GAAG4E,QAAQ,CAAC/E,MAAM,CAAEjF,gBAAiB,CAAC;MAC7D,MAAM2K,KAAK,GAAGvF,aAAa,CAAEzD,QAAS,CAAC;MACvCuI,YAAY,CAAEQ,MAAM,EAAEC,KAAK,GAAG,CAAC,EAAErG,YAAa,CAAC;IAChD,CAAC;IACDJ,OAAOA,CAAE0G,OAAO,EAAG;MAClB,MAAM;QAAEjJ,QAAQ;QAAE2C;MAAa,CAAC,GAAGyF,QAAQ;MAC3C,MAAM;QACLc,wBAAwB;QACxBC,oBAAoB;QACpBC,QAAQ;QACRzB,kBAAkB;QAClB7D,YAAY;QACZuF,aAAa;QACb5F,aAAa;QACb6F,oBAAoB;QACpBC;MACD,CAAC,GAAGlB,QAAQ,CAAC/E,MAAM,CAAEjF,gBAAiB,CAAC;;MAEvC;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACG,SAASmL,eAAeA,CAAEC,SAAS,EAAEC,eAAe,GAAG,IAAI,EAAG;QAC7D,MAAMC,kBAAkB,GAAGL,oBAAoB,CAAEG,SAAU,CAAC;QAC5D,MAAMpF,UAAU,GAAGgF,aAAa,CAAEI,SAAU,CAAC;QAC7C,MAAM,CAAEG,aAAa,CAAE,GAAGvF,UAAU;QAEpC,IACCA,UAAU,CAACgD,MAAM,KAAK,CAAC,IACvB9J,iBAAiB,CAAE6L,QAAQ,CAAEQ,aAAc,CAAE,CAAC,EAC7C;UACDxE,WAAW,CAAEqE,SAAU,CAAC;QACzB,CAAC,MAAM;UACNpB,QAAQ,CAACwB,KAAK,CAAE,MAAM;YACrB,IACCN,kBAAkB,CACjBzF,YAAY,CAAE8F,aAAc,CAAC,EAC7BD,kBACD,CAAC,EACA;cACDjB,oBAAoB,CACnB,CAAEkB,aAAa,CAAE,EACjBH,SAAS,EACTE,kBAAkB,EAClBlG,aAAa,CAAEgG,SAAU,CAC1B,CAAC;YACF,CAAC,MAAM;cACN,MAAMK,WAAW,GAAGrM,iBAAiB,CACpC2L,QAAQ,CAAEQ,aAAc,CAAC,EACzBtM,mBAAmB,CAAC,CACrB,CAAC;cAED,IAAKwM,WAAW,IAAIA,WAAW,CAACzC,MAAM,EAAG;gBACxCkB,YAAY,CACXuB,WAAW,EACXrG,aAAa,CAAEgG,SAAU,CAAC,EAC1BE,kBAAkB,EAClBD,eACD,CAAC;gBACDtE,WAAW,CAAEwE,aAAa,EAAE,KAAM,CAAC;cACpC;YACD;YAEA,IACC,CAAEP,aAAa,CAAEI,SAAU,CAAC,CAACpC,MAAM,IACnC9J,iBAAiB,CAAE6L,QAAQ,CAAEK,SAAU,CAAE,CAAC,EACzC;cACDrE,WAAW,CAAEqE,SAAS,EAAE,KAAM,CAAC;YAChC;UACD,CAAE,CAAC;QACJ;MACD;;MAEA;MACA;MACA,IAAKR,OAAO,EAAG;QACd,IAAKtG,YAAY,EAAG;UACnB,MAAMoH,gBAAgB,GACrBZ,oBAAoB,CAAExG,YAAa,CAAC;UAErC,IAAKoH,gBAAgB,EAAG;YACvB;YACA;YACA;YACA,IACCjG,YAAY,CAAEnB,YAAa,CAAC,KAC5BmB,YAAY,CAAEiG,gBAAiB,CAAC,EAC/B;cACD,MAAMC,cAAc,GACnBrC,kBAAkB,CAAEhF,YAAa,CAAC;cACnC,MAAMsH,sBAAsB,GAC3BtC,kBAAkB,CAAEoC,gBAAiB,CAAC;cAEvC,IACCxD,MAAM,CAACa,IAAI,CAAE4C,cAAe,CAAC,CAAC9E,KAAK,CAChCyB,GAAG,IACJqD,cAAc,CAAErD,GAAG,CAAE,KACrBsD,sBAAsB,CAAEtD,GAAG,CAC7B,CAAC,EACA;gBACD0B,QAAQ,CAACwB,KAAK,CAAE,MAAM;kBACrBnB,oBAAoB,CACnBW,aAAa,CAAEU,gBAAiB,CAAC,EACjCA,gBAAgB,EAChBpH,YACD,CAAC;kBACDyC,WAAW,CAAE2E,gBAAgB,EAAE,KAAM,CAAC;gBACvC,CAAE,CAAC;gBACH;cACD;YACD,CAAC,MAAM;cACN7C,WAAW,CAAEvE,YAAY,EAAEoH,gBAAiB,CAAC;cAC7C;YACD;UACD;QACD;QAEA,MAAMG,iBAAiB,GAAGf,oBAAoB,CAAEnJ,QAAS,CAAC;QAE1D,IAAK,CAAEkK,iBAAiB,EAAG;UAC1B;QACD;QAEA,IAAKb,aAAa,CAAEa,iBAAkB,CAAC,CAAC7C,MAAM,EAAG;UAChDmC,eAAe,CAAEU,iBAAiB,EAAE,KAAM,CAAC;QAC5C,CAAC,MAAM;UACNhD,WAAW,CAAElH,QAAQ,EAAEkK,iBAAkB,CAAC;QAC3C;MACD,CAAC,MAAM;QACN,MAAMC,qBAAqB,GAC1BjB,wBAAwB,CAAElJ,QAAS,CAAC;QAErC,IAAKmK,qBAAqB,EAAG;UAC5BjD,WAAW,CAAEiD,qBAAqB,EAAEnK,QAAS,CAAC;QAC/C,CAAC,MAAM,IAAK2C,YAAY,EAAG;UAC1B,MAAMyH,oBAAoB,GACzBlB,wBAAwB,CAAEvG,YAAa,CAAC;;UAEzC;UACA;UACA,IACCyH,oBAAoB,IACpBtG,YAAY,CAAEnB,YAAa,CAAC,KAC3BmB,YAAY,CAAEsG,oBAAqB,CAAC,EACpC;YACD,MAAMJ,cAAc,GACnBrC,kBAAkB,CAAEhF,YAAa,CAAC;YACnC,MAAMsH,sBAAsB,GAC3BtC,kBAAkB,CAAEyC,oBAAqB,CAAC;YAE3C,IACC7D,MAAM,CAACa,IAAI,CAAE4C,cAAe,CAAC,CAAC9E,KAAK,CAChCyB,GAAG,IACJqD,cAAc,CAAErD,GAAG,CAAE,KACrBsD,sBAAsB,CAAEtD,GAAG,CAC7B,CAAC,EACA;cACD0B,QAAQ,CAACwB,KAAK,CAAE,MAAM;gBACrBnB,oBAAoB,CACnBW,aAAa,CAAE1G,YAAa,CAAC,EAC7BA,YAAY,EACZyH,oBACD,CAAC;gBACDhF,WAAW,CAAEzC,YAAY,EAAE,KAAM,CAAC;cACnC,CAAE,CAAC;cACH;YACD;UACD;UAEA6G,eAAe,CAAE7G,YAAa,CAAC;QAChC,CAAC,MAAM,IACNmB,YAAY,CAAE9D,QAAS,CAAC,KAAK1C,mBAAmB,CAAC,CAAC,EACjD;UACD,MAAMwM,WAAW,GAAGrM,iBAAiB,CACpC2L,QAAQ,CAAEpJ,QAAS,CAAC,EACpB1C,mBAAmB,CAAC,CACrB,CAAC;UACD,IAAKwM,WAAW,IAAIA,WAAW,CAACzC,MAAM,EAAG;YACxCmB,aAAa,CAAExI,QAAQ,EAAE8J,WAAY,CAAC;UACvC;QACD;MACD;IACD,CAAC;IACDtH,SAASA,CAAEuG,MAAM,EAAEsB,aAAa,EAAEC,eAAe,EAAEC,IAAI,EAAG;MACzD,IACCxB,MAAM,CAAC1B,MAAM,IACb,CAAE7J,wBAAwB,CAAEuL,MAAM,CAAEA,MAAM,CAAC1B,MAAM,GAAG,CAAC,CAAG,CAAC,EACxD;QACDoB,oCAAoC,CAAC,CAAC;MACvC;MACAD,aAAa,CACZ,CAAEJ,QAAQ,CAACpI,QAAQ,CAAE,EACrB+I,MAAM,EACNsB,aAAa,EACbC,eAAe,EACfC,IACD,CAAC;IACF,CAAC;IACD1H,eAAeA,CAAE2H,gBAAgB,EAAG;MACnC3H,eAAe,CAAE2H,gBAAiB,CAAC;IACpC;EACD,CAAC;AACF,CAAE,CAAC;AAEH,eAAe1M,OAAO,CACrBb,IAAI,EACJqK,eAAe,EACfY,iBAAiB;AACjB;AACA;AACA;AACAnK,WAAW,CAAE,CAAE;EAAE+J;AAAM,CAAC,KAAM,CAAC,CAAEA,KAAM,CAAC,EACxC5K,WAAW,CAAE,uBAAwB,CACtC,CAAC,CAAEyE,cAAe,CAAC","ignoreList":[]}