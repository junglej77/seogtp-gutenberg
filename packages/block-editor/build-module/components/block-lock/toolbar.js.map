{"version":3,"names":["__","ToolbarButton","ToolbarGroup","useReducer","useRef","useEffect","lock","unlock","BlockLockModal","useBlockLock","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","BlockLockToolbar","clientId","canLock","isLocked","isModalOpen","toggleModal","isActive","hasLockButtonShownRef","current","label","children","className","disabled","icon","onClick","onClose"],"sources":["@wordpress/block-editor/src/components/block-lock/toolbar.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { ToolbarButton, ToolbarGroup } from '@wordpress/components';\r\nimport { useReducer, useRef, useEffect } from '@wordpress/element';\r\nimport { lock, unlock } from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockLockModal from './modal';\r\nimport useBlockLock from './use-block-lock';\r\n\r\nexport default function BlockLockToolbar( { clientId } ) {\r\n\tconst { canLock, isLocked } = useBlockLock( clientId );\r\n\r\n\tconst [ isModalOpen, toggleModal ] = useReducer(\r\n\t\t( isActive ) => ! isActive,\r\n\t\tfalse\r\n\t);\r\n\r\n\tconst hasLockButtonShownRef = useRef( false );\r\n\r\n\t// If the block lock button has been shown, we don't want to remove it\r\n\t// from the toolbar until the toolbar is rendered again without it.\r\n\t// Removing it beforehand can cause focus loss issues, such as when\r\n\t// unlocking the block from the modal. It needs to return focus from\r\n\t// whence it came, and to do that, we need to leave the button in the toolbar.\r\n\tuseEffect( () => {\r\n\t\tif ( isLocked ) {\r\n\t\t\thasLockButtonShownRef.current = true;\r\n\t\t}\r\n\t}, [ isLocked ] );\r\n\r\n\tif ( ! isLocked && ! hasLockButtonShownRef.current ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tlet label = isLocked ? __( 'Unlock' ) : __( 'Lock' );\r\n\r\n\tif ( ! canLock && isLocked ) {\r\n\t\tlabel = __( 'Locked' );\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<ToolbarGroup className=\"block-editor-block-lock-toolbar\">\r\n\t\t\t\t<ToolbarButton\r\n\t\t\t\t\tdisabled={ ! canLock }\r\n\t\t\t\t\ticon={ isLocked ? lock : unlock }\r\n\t\t\t\t\tlabel={ label }\r\n\t\t\t\t\tonClick={ toggleModal }\r\n\t\t\t\t\taria-expanded={ isModalOpen }\r\n\t\t\t\t\taria-haspopup=\"dialog\"\r\n\t\t\t\t/>\r\n\t\t\t</ToolbarGroup>\r\n\t\t\t{ isModalOpen && (\r\n\t\t\t\t<BlockLockModal clientId={ clientId } onClose={ toggleModal } />\r\n\t\t\t) }\r\n\t\t</>\r\n\t);\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,EAAE,QAAQ,iBAAiB;AACpC,SAASC,aAAa,EAAEC,YAAY,QAAQ,uBAAuB;AACnE,SAASC,UAAU,EAAEC,MAAM,EAAEC,SAAS,QAAQ,oBAAoB;AAClE,SAASC,IAAI,EAAEC,MAAM,QAAQ,kBAAkB;;AAE/C;AACA;AACA;AACA,OAAOC,cAAc,MAAM,SAAS;AACpC,OAAOC,YAAY,MAAM,kBAAkB;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAE5C,eAAe,SAASC,gBAAgBA,CAAE;EAAEC;AAAS,CAAC,EAAG;EACxD,MAAM;IAAEC,OAAO;IAAEC;EAAS,CAAC,GAAGV,YAAY,CAAEQ,QAAS,CAAC;EAEtD,MAAM,CAAEG,WAAW,EAAEC,WAAW,CAAE,GAAGlB,UAAU,CAC5CmB,QAAQ,IAAM,CAAEA,QAAQ,EAC1B,KACD,CAAC;EAED,MAAMC,qBAAqB,GAAGnB,MAAM,CAAE,KAAM,CAAC;;EAE7C;EACA;EACA;EACA;EACA;EACAC,SAAS,CAAE,MAAM;IAChB,IAAKc,QAAQ,EAAG;MACfI,qBAAqB,CAACC,OAAO,GAAG,IAAI;IACrC;EACD,CAAC,EAAE,CAAEL,QAAQ,CAAG,CAAC;EAEjB,IAAK,CAAEA,QAAQ,IAAI,CAAEI,qBAAqB,CAACC,OAAO,EAAG;IACpD,OAAO,IAAI;EACZ;EAEA,IAAIC,KAAK,GAAGN,QAAQ,GAAGnB,EAAE,CAAE,QAAS,CAAC,GAAGA,EAAE,CAAE,MAAO,CAAC;EAEpD,IAAK,CAAEkB,OAAO,IAAIC,QAAQ,EAAG;IAC5BM,KAAK,GAAGzB,EAAE,CAAE,QAAS,CAAC;EACvB;EAEA,oBACCe,KAAA,CAAAF,SAAA;IAAAa,QAAA,gBACCf,IAAA,CAACT,YAAY;MAACyB,SAAS,EAAC,iCAAiC;MAAAD,QAAA,eACxDf,IAAA,CAACV,aAAa;QACb2B,QAAQ,EAAG,CAAEV,OAAS;QACtBW,IAAI,EAAGV,QAAQ,GAAGb,IAAI,GAAGC,MAAQ;QACjCkB,KAAK,EAAGA,KAAO;QACfK,OAAO,EAAGT,WAAa;QACvB,iBAAgBD,WAAa;QAC7B,iBAAc;MAAQ,CACtB;IAAC,CACW,CAAC,EACbA,WAAW,iBACZT,IAAA,CAACH,cAAc;MAACS,QAAQ,EAAGA,QAAU;MAACc,OAAO,EAAGV;IAAa,CAAE,CAC/D;EAAA,CACA,CAAC;AAEL","ignoreList":[]}