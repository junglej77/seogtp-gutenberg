{"version":3,"names":["clsx","dragHandle","ToolbarGroup","ToolbarItem","Button","useSelect","__","BlockDraggable","BlockMoverUpButton","BlockMoverDownButton","store","blockEditorStore","jsx","_jsx","jsxs","_jsxs","BlockMover","clientIds","hideDragHandle","isBlockMoverUpButtonDisabled","isBlockMoverDownButtonDisabled","canMove","rootClientId","isFirst","isLast","orientation","isManualGrid","select","_getBlockAttributes","getBlockIndex","getBlockListSettings","canMoveBlocks","getBlockOrder","getBlockRootClientId","getBlockAttributes","normalizedClientIds","Array","isArray","firstClientId","_rootClientId","firstIndex","lastIndex","length","blockOrder","layout","type","isManualPlacement","window","__experimentalEnableGridInteractivity","className","children","fadeWhenDisabled","draggableProps","__next40pxDefaultSize","icon","label","tabIndex","itemProps","disabled"],"sources":["@wordpress/block-editor/src/components/block-mover/index.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\n\r\nimport { dragHandle } from '@wordpress/icons';\r\nimport { ToolbarGroup, ToolbarItem, Button } from '@wordpress/components';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockDraggable from '../block-draggable';\r\nimport { BlockMoverUpButton, BlockMoverDownButton } from './button';\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nfunction BlockMover( {\r\n\tclientIds,\r\n\thideDragHandle,\r\n\tisBlockMoverUpButtonDisabled,\r\n\tisBlockMoverDownButtonDisabled,\r\n} ) {\r\n\tconst {\r\n\t\tcanMove,\r\n\t\trootClientId,\r\n\t\tisFirst,\r\n\t\tisLast,\r\n\t\torientation,\r\n\t\tisManualGrid,\r\n\t} = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst {\r\n\t\t\t\tgetBlockIndex,\r\n\t\t\t\tgetBlockListSettings,\r\n\t\t\t\tcanMoveBlocks,\r\n\t\t\t\tgetBlockOrder,\r\n\t\t\t\tgetBlockRootClientId,\r\n\t\t\t\tgetBlockAttributes,\r\n\t\t\t} = select( blockEditorStore );\r\n\t\t\tconst normalizedClientIds = Array.isArray( clientIds )\r\n\t\t\t\t? clientIds\r\n\t\t\t\t: [ clientIds ];\r\n\t\t\tconst firstClientId = normalizedClientIds[ 0 ];\r\n\t\t\tconst _rootClientId = getBlockRootClientId( firstClientId );\r\n\t\t\tconst firstIndex = getBlockIndex( firstClientId );\r\n\t\t\tconst lastIndex = getBlockIndex(\r\n\t\t\t\tnormalizedClientIds[ normalizedClientIds.length - 1 ]\r\n\t\t\t);\r\n\t\t\tconst blockOrder = getBlockOrder( _rootClientId );\r\n\t\t\tconst { layout = {} } = getBlockAttributes( _rootClientId ) ?? {};\r\n\r\n\t\t\treturn {\r\n\t\t\t\tcanMove: canMoveBlocks( clientIds ),\r\n\t\t\t\trootClientId: _rootClientId,\r\n\t\t\t\tisFirst: firstIndex === 0,\r\n\t\t\t\tisLast: lastIndex === blockOrder.length - 1,\r\n\t\t\t\torientation: getBlockListSettings( _rootClientId )?.orientation,\r\n\t\t\t\tisManualGrid:\r\n\t\t\t\t\tlayout.type === 'grid' &&\r\n\t\t\t\t\tlayout.isManualPlacement &&\r\n\t\t\t\t\twindow.__experimentalEnableGridInteractivity,\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ clientIds ]\r\n\t);\r\n\r\n\tif (\r\n\t\t! canMove ||\r\n\t\t( isFirst && isLast && ! rootClientId ) ||\r\n\t\t( hideDragHandle && isManualGrid )\r\n\t) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<ToolbarGroup\r\n\t\t\tclassName={ clsx( 'block-editor-block-mover', {\r\n\t\t\t\t'is-horizontal': orientation === 'horizontal',\r\n\t\t\t} ) }\r\n\t\t>\r\n\t\t\t{ ! hideDragHandle && (\r\n\t\t\t\t<BlockDraggable clientIds={ clientIds } fadeWhenDisabled>\r\n\t\t\t\t\t{ ( draggableProps ) => (\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\t\ticon={ dragHandle }\r\n\t\t\t\t\t\t\tclassName=\"block-editor-block-mover__drag-handle\"\r\n\t\t\t\t\t\t\tlabel={ __( 'Drag' ) }\r\n\t\t\t\t\t\t\t// Should not be able to tab to drag handle as this\r\n\t\t\t\t\t\t\t// button can only be used with a pointer device.\r\n\t\t\t\t\t\t\ttabIndex=\"-1\"\r\n\t\t\t\t\t\t\t{ ...draggableProps }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) }\r\n\t\t\t\t</BlockDraggable>\r\n\t\t\t) }\r\n\t\t\t{ ! isManualGrid && (\r\n\t\t\t\t<div className=\"block-editor-block-mover__move-button-container\">\r\n\t\t\t\t\t<ToolbarItem>\r\n\t\t\t\t\t\t{ ( itemProps ) => (\r\n\t\t\t\t\t\t\t<BlockMoverUpButton\r\n\t\t\t\t\t\t\t\tdisabled={ isBlockMoverUpButtonDisabled }\r\n\t\t\t\t\t\t\t\tclientIds={ clientIds }\r\n\t\t\t\t\t\t\t\t{ ...itemProps }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t</ToolbarItem>\r\n\t\t\t\t\t<ToolbarItem>\r\n\t\t\t\t\t\t{ ( itemProps ) => (\r\n\t\t\t\t\t\t\t<BlockMoverDownButton\r\n\t\t\t\t\t\t\t\tdisabled={ isBlockMoverDownButtonDisabled }\r\n\t\t\t\t\t\t\t\tclientIds={ clientIds }\r\n\t\t\t\t\t\t\t\t{ ...itemProps }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t</ToolbarItem>\r\n\t\t\t\t</div>\r\n\t\t\t) }\r\n\t\t</ToolbarGroup>\r\n\t);\r\n}\r\n\r\n/**\r\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-mover/README.md\r\n */\r\nexport default BlockMover;\r\n"],"mappings":"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","ignoreList":[]}