{"version":3,"names":["Platform","__","Picker","ToolbarButton","ToolbarGroup","withInstanceId","compose","withSelect","withDispatch","useCallback","useEffect","useRef","useState","getMoversSetup","store","blockEditorStore","jsx","_jsx","jsxs","_jsxs","BLOCK_MOVER_DIRECTION_TOP","BLOCK_MOVER_DIRECTION_BOTTOM","BlockMover","isFirst","isLast","canMove","onMoveDown","onMoveUp","onLongMove","firstIndex","numberOfBlocks","rootClientId","isStackedHorizontally","pickerRef","shouldPresentPicker","setShouldPresentPicker","blockPageMoverState","setBlockPageMoverState","undefined","showBlockPageMover","direction","current","presentPicker","description","backwardButtonHint","forwardButtonHint","firstBlockTitle","lastBlockTitle","icon","backward","backwardButtonIcon","forward","forwardButtonIcon","title","backwardButtonTitle","forwardButtonTitle","blockPageMoverOptions","label","value","onSelect","filter","el","onPickerSelect","option","find","onLongPressMoveUp","onLongPressMoveDown","children","isDisabled","onClick","onLongPress","extraProps","hint","ref","options","onChange","leftAlign","hideCancelButton","OS","select","clientIds","getBlockIndex","canMoveBlocks","getBlockRootClientId","getBlockOrder","normalizedClientIds","Array","isArray","firstClientId","blockOrder","lastIndex","length","dispatch","moveBlocksDown","moveBlocksUp","moveBlocksToPosition","args","targetIndex"],"sources":["@wordpress/block-editor/src/components/block-mover/index.native.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport { Platform } from 'react-native';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { Picker, ToolbarButton, ToolbarGroup } from '@wordpress/components';\r\nimport { withInstanceId, compose } from '@wordpress/compose';\r\nimport { withSelect, withDispatch } from '@wordpress/data';\r\nimport { useCallback, useEffect, useRef, useState } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { getMoversSetup } from './mover-description';\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nexport const BLOCK_MOVER_DIRECTION_TOP = 'blockPageMoverOptions-moveToTop';\r\nexport const BLOCK_MOVER_DIRECTION_BOTTOM =\r\n\t'blockPageMoverOptions-moveToBottom';\r\n\r\nexport const BlockMover = ( {\r\n\tisFirst,\r\n\tisLast,\r\n\tcanMove,\r\n\tonMoveDown,\r\n\tonMoveUp,\r\n\tonLongMove,\r\n\tfirstIndex,\r\n\tnumberOfBlocks,\r\n\trootClientId,\r\n\tisStackedHorizontally,\r\n} ) => {\r\n\tconst pickerRef = useRef();\r\n\tconst [ shouldPresentPicker, setShouldPresentPicker ] = useState( false );\r\n\tconst [ blockPageMoverState, setBlockPageMoverState ] =\r\n\t\tuseState( undefined );\r\n\tconst showBlockPageMover = ( direction ) => () => {\r\n\t\tif ( ! pickerRef.current ) {\r\n\t\t\tsetBlockPageMoverState( undefined );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetBlockPageMoverState( direction );\r\n\t\tsetShouldPresentPicker( true );\r\n\t};\r\n\r\n\t// Ensure that the picker is only presented after state updates.\r\n\tuseEffect( () => {\r\n\t\tif ( shouldPresentPicker ) {\r\n\t\t\tpickerRef.current?.presentPicker();\r\n\t\t\tsetShouldPresentPicker( false );\r\n\t\t}\r\n\t}, [ shouldPresentPicker ] );\r\n\r\n\tconst {\r\n\t\tdescription: {\r\n\t\t\tbackwardButtonHint,\r\n\t\t\tforwardButtonHint,\r\n\t\t\tfirstBlockTitle,\r\n\t\t\tlastBlockTitle,\r\n\t\t},\r\n\t\ticon: { backward: backwardButtonIcon, forward: forwardButtonIcon },\r\n\t\ttitle: { backward: backwardButtonTitle, forward: forwardButtonTitle },\r\n\t} = getMoversSetup( isStackedHorizontally, { firstIndex } );\r\n\r\n\tconst blockPageMoverOptions = [\r\n\t\t{\r\n\t\t\ticon: backwardButtonIcon,\r\n\t\t\tlabel: __( 'Move to top' ),\r\n\t\t\tvalue: BLOCK_MOVER_DIRECTION_TOP,\r\n\t\t\tonSelect: () => {\r\n\t\t\t\tonLongMove()( 0 );\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ticon: forwardButtonIcon,\r\n\t\t\tlabel: __( 'Move to bottom' ),\r\n\t\t\tvalue: BLOCK_MOVER_DIRECTION_BOTTOM,\r\n\t\t\tonSelect: () => {\r\n\t\t\t\tonLongMove()( numberOfBlocks );\r\n\t\t\t},\r\n\t\t},\r\n\t].filter( ( el ) => el.value === blockPageMoverState );\r\n\r\n\tconst onPickerSelect = ( value ) => {\r\n\t\tconst option = blockPageMoverOptions.find(\r\n\t\t\t( el ) => el.value === value\r\n\t\t);\r\n\t\tif ( option && option.onSelect ) {\r\n\t\t\toption.onSelect();\r\n\t\t}\r\n\t};\r\n\r\n\tconst onLongPressMoveUp = useCallback(\r\n\t\tshowBlockPageMover( BLOCK_MOVER_DIRECTION_TOP ),\r\n\t\t[]\r\n\t);\r\n\tconst onLongPressMoveDown = useCallback(\r\n\t\tshowBlockPageMover( BLOCK_MOVER_DIRECTION_BOTTOM ),\r\n\t\t[]\r\n\t);\r\n\r\n\tif ( ! canMove || ( isFirst && isLast && ! rootClientId ) ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<ToolbarGroup>\r\n\t\t\t<ToolbarButton\r\n\t\t\t\ttitle={ ! isFirst ? backwardButtonTitle : firstBlockTitle }\r\n\t\t\t\tisDisabled={ isFirst }\r\n\t\t\t\tonClick={ onMoveUp }\r\n\t\t\t\tonLongPress={ onLongPressMoveUp }\r\n\t\t\t\ticon={ backwardButtonIcon }\r\n\t\t\t\textraProps={ { hint: backwardButtonHint } }\r\n\t\t\t/>\r\n\r\n\t\t\t<ToolbarButton\r\n\t\t\t\ttitle={ ! isLast ? forwardButtonTitle : lastBlockTitle }\r\n\t\t\t\tisDisabled={ isLast }\r\n\t\t\t\tonClick={ onMoveDown }\r\n\t\t\t\tonLongPress={ onLongPressMoveDown }\r\n\t\t\t\ticon={ forwardButtonIcon }\r\n\t\t\t\textraProps={ {\r\n\t\t\t\t\thint: forwardButtonHint,\r\n\t\t\t\t} }\r\n\t\t\t/>\r\n\r\n\t\t\t<Picker\r\n\t\t\t\tref={ pickerRef }\r\n\t\t\t\toptions={ blockPageMoverOptions }\r\n\t\t\t\tonChange={ onPickerSelect }\r\n\t\t\t\ttitle={ __( 'Change block position' ) }\r\n\t\t\t\tleftAlign\r\n\t\t\t\thideCancelButton={ Platform.OS !== 'ios' }\r\n\t\t\t/>\r\n\t\t</ToolbarGroup>\r\n\t);\r\n};\r\n\r\nexport default compose(\r\n\twithSelect( ( select, { clientIds } ) => {\r\n\t\tconst {\r\n\t\t\tgetBlockIndex,\r\n\t\t\tcanMoveBlocks,\r\n\t\t\tgetBlockRootClientId,\r\n\t\t\tgetBlockOrder,\r\n\t\t} = select( blockEditorStore );\r\n\t\tconst normalizedClientIds = Array.isArray( clientIds )\r\n\t\t\t? clientIds\r\n\t\t\t: [ clientIds ];\r\n\t\tconst firstClientId = normalizedClientIds[ 0 ];\r\n\t\tconst rootClientId = getBlockRootClientId( firstClientId );\r\n\t\tconst blockOrder = getBlockOrder( rootClientId );\r\n\t\tconst firstIndex = getBlockIndex( firstClientId );\r\n\t\tconst lastIndex = getBlockIndex(\r\n\t\t\tnormalizedClientIds[ normalizedClientIds.length - 1 ]\r\n\t\t);\r\n\r\n\t\treturn {\r\n\t\t\tfirstIndex,\r\n\t\t\tnumberOfBlocks: blockOrder.length - 1,\r\n\t\t\tisFirst: firstIndex === 0,\r\n\t\t\tisLast: lastIndex === blockOrder.length - 1,\r\n\t\t\tcanMove: canMoveBlocks( clientIds ),\r\n\t\t\trootClientId,\r\n\t\t};\r\n\t} ),\r\n\twithDispatch( ( dispatch, { clientIds, rootClientId } ) => {\r\n\t\tconst { moveBlocksDown, moveBlocksUp, moveBlocksToPosition } =\r\n\t\t\tdispatch( blockEditorStore );\r\n\t\treturn {\r\n\t\t\tonMoveDown: ( ...args ) =>\r\n\t\t\t\tmoveBlocksDown( clientIds, rootClientId, ...args ),\r\n\t\t\tonMoveUp: ( ...args ) =>\r\n\t\t\t\tmoveBlocksUp( clientIds, rootClientId, ...args ),\r\n\t\t\tonLongMove:\r\n\t\t\t\t( targetIndex ) =>\r\n\t\t\t\t( ...args ) =>\r\n\t\t\t\t\tmoveBlocksToPosition(\r\n\t\t\t\t\t\tclientIds,\r\n\t\t\t\t\t\trootClientId,\r\n\t\t\t\t\t\ttargetIndex,\r\n\t\t\t\t\t\t...args\r\n\t\t\t\t\t),\r\n\t\t};\r\n\t} ),\r\n\twithInstanceId\r\n)( BlockMover );\r\n"],"mappings":"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","ignoreList":[]}