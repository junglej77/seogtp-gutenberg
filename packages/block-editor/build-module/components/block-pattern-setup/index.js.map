{"version":3,"names":["useDispatch","cloneBlock","Composite","VisuallyHidden","useState","useInstanceId","__","store","blockEditorStore","BlockPreview","SetupToolbar","usePatternsSetup","VIEWMODES","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SetupContent","viewMode","activeSlide","patterns","onBlockPatternSelect","showTitles","containerClass","carousel","slideClass","Map","className","children","map","pattern","index","BlockPatternSlide","active","get","name","role","BlockPattern","onSelect","baseClassName","blocks","description","viewportWidth","descriptionId","Item","render","undefined","title","id","onClick","minHeight","BlockPatternSetup","clientId","blockName","filterPatternsFn","initialViewMode","setViewMode","setActiveSlide","replaceBlock","length","onBlockPatternSelectDefault","clonedBlocks","block","onPatternSelectCallback","totalSlides","handleNext","Math","min","handlePrevious","max"],"sources":["@wordpress/block-editor/src/components/block-pattern-setup/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useDispatch } from '@wordpress/data';\r\nimport { cloneBlock } from '@wordpress/blocks';\r\nimport { Composite, VisuallyHidden } from '@wordpress/components';\r\n\r\nimport { useState } from '@wordpress/element';\r\nimport { useInstanceId } from '@wordpress/compose';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\nimport BlockPreview from '../block-preview';\r\nimport SetupToolbar from './setup-toolbar';\r\nimport usePatternsSetup from './use-patterns-setup';\r\nimport { VIEWMODES } from './constants';\r\n\r\nconst SetupContent = ( {\r\n\tviewMode,\r\n\tactiveSlide,\r\n\tpatterns,\r\n\tonBlockPatternSelect,\r\n\tshowTitles,\r\n} ) => {\r\n\tconst containerClass = 'block-editor-block-pattern-setup__container';\r\n\r\n\tif ( viewMode === VIEWMODES.carousel ) {\r\n\t\tconst slideClass = new Map( [\r\n\t\t\t[ activeSlide, 'active-slide' ],\r\n\t\t\t[ activeSlide - 1, 'previous-slide' ],\r\n\t\t\t[ activeSlide + 1, 'next-slide' ],\r\n\t\t] );\r\n\t\treturn (\r\n\t\t\t<div className=\"block-editor-block-pattern-setup__carousel\">\r\n\t\t\t\t<div className={ containerClass }>\r\n\t\t\t\t\t<div className=\"carousel-container\">\r\n\t\t\t\t\t\t{ patterns.map( ( pattern, index ) => (\r\n\t\t\t\t\t\t\t<BlockPatternSlide\r\n\t\t\t\t\t\t\t\tactive={ index === activeSlide }\r\n\t\t\t\t\t\t\t\tclassName={ slideClass.get( index ) || '' }\r\n\t\t\t\t\t\t\t\tkey={ pattern.name }\r\n\t\t\t\t\t\t\t\tpattern={ pattern }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) ) }\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"block-editor-block-pattern-setup__grid\">\r\n\t\t\t<Composite\r\n\t\t\t\trole=\"listbox\"\r\n\t\t\t\tclassName={ containerClass }\r\n\t\t\t\taria-label={ __( 'Patterns list' ) }\r\n\t\t\t>\r\n\t\t\t\t{ patterns.map( ( pattern ) => (\r\n\t\t\t\t\t<BlockPattern\r\n\t\t\t\t\t\tkey={ pattern.name }\r\n\t\t\t\t\t\tpattern={ pattern }\r\n\t\t\t\t\t\tonSelect={ onBlockPatternSelect }\r\n\t\t\t\t\t\tshowTitles={ showTitles }\r\n\t\t\t\t\t/>\r\n\t\t\t\t) ) }\r\n\t\t\t</Composite>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nfunction BlockPattern( { pattern, onSelect, showTitles } ) {\r\n\tconst baseClassName = 'block-editor-block-pattern-setup-list';\r\n\tconst { blocks, description, viewportWidth = 700 } = pattern;\r\n\tconst descriptionId = useInstanceId(\r\n\t\tBlockPattern,\r\n\t\t`${ baseClassName }__item-description`\r\n\t);\r\n\treturn (\r\n\t\t<div className={ `${ baseClassName }__list-item` }>\r\n\t\t\t<Composite.Item\r\n\t\t\t\trender={\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\taria-describedby={\r\n\t\t\t\t\t\t\tdescription ? descriptionId : undefined\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\taria-label={ pattern.title }\r\n\t\t\t\t\t\tclassName={ `${ baseClassName }__item` }\r\n\t\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t\tid={ `${ baseClassName }__pattern__${ pattern.name }` }\r\n\t\t\t\trole=\"option\"\r\n\t\t\t\tonClick={ () => onSelect( blocks ) }\r\n\t\t\t>\r\n\t\t\t\t<BlockPreview\r\n\t\t\t\t\tblocks={ blocks }\r\n\t\t\t\t\tviewportWidth={ viewportWidth }\r\n\t\t\t\t/>\r\n\t\t\t\t{ showTitles && (\r\n\t\t\t\t\t<div className={ `${ baseClassName }__item-title` }>\r\n\t\t\t\t\t\t{ pattern.title }\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) }\r\n\t\t\t\t{ !! description && (\r\n\t\t\t\t\t<VisuallyHidden id={ descriptionId }>\r\n\t\t\t\t\t\t{ description }\r\n\t\t\t\t\t</VisuallyHidden>\r\n\t\t\t\t) }\r\n\t\t\t</Composite.Item>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction BlockPatternSlide( { active, className, pattern, minHeight } ) {\r\n\tconst { blocks, title, description } = pattern;\r\n\tconst descriptionId = useInstanceId(\r\n\t\tBlockPatternSlide,\r\n\t\t'block-editor-block-pattern-setup-list__item-description'\r\n\t);\r\n\treturn (\r\n\t\t<div\r\n\t\t\taria-hidden={ ! active }\r\n\t\t\trole=\"img\"\r\n\t\t\tclassName={ `pattern-slide ${ className }` }\r\n\t\t\taria-label={ title }\r\n\t\t\taria-describedby={ description ? descriptionId : undefined }\r\n\t\t>\r\n\t\t\t<BlockPreview blocks={ blocks } minHeight={ minHeight } />\r\n\t\t\t{ !! description && (\r\n\t\t\t\t<VisuallyHidden id={ descriptionId }>\r\n\t\t\t\t\t{ description }\r\n\t\t\t\t</VisuallyHidden>\r\n\t\t\t) }\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst BlockPatternSetup = ( {\r\n\tclientId,\r\n\tblockName,\r\n\tfilterPatternsFn,\r\n\tonBlockPatternSelect,\r\n\tinitialViewMode = VIEWMODES.carousel,\r\n\tshowTitles = false,\r\n} ) => {\r\n\tconst [ viewMode, setViewMode ] = useState( initialViewMode );\r\n\tconst [ activeSlide, setActiveSlide ] = useState( 0 );\r\n\tconst { replaceBlock } = useDispatch( blockEditorStore );\r\n\tconst patterns = usePatternsSetup( clientId, blockName, filterPatternsFn );\r\n\r\n\tif ( ! patterns?.length ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst onBlockPatternSelectDefault = ( blocks ) => {\r\n\t\tconst clonedBlocks = blocks.map( ( block ) => cloneBlock( block ) );\r\n\t\treplaceBlock( clientId, clonedBlocks );\r\n\t};\r\n\tconst onPatternSelectCallback =\r\n\t\tonBlockPatternSelect || onBlockPatternSelectDefault;\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div\r\n\t\t\t\tclassName={ `block-editor-block-pattern-setup view-mode-${ viewMode }` }\r\n\t\t\t>\r\n\t\t\t\t<SetupContent\r\n\t\t\t\t\tviewMode={ viewMode }\r\n\t\t\t\t\tactiveSlide={ activeSlide }\r\n\t\t\t\t\tpatterns={ patterns }\r\n\t\t\t\t\tonBlockPatternSelect={ onPatternSelectCallback }\r\n\t\t\t\t\tshowTitles={ showTitles }\r\n\t\t\t\t/>\r\n\t\t\t\t<SetupToolbar\r\n\t\t\t\t\tviewMode={ viewMode }\r\n\t\t\t\t\tsetViewMode={ setViewMode }\r\n\t\t\t\t\tactiveSlide={ activeSlide }\r\n\t\t\t\t\ttotalSlides={ patterns.length }\r\n\t\t\t\t\thandleNext={ () => {\r\n\t\t\t\t\t\tsetActiveSlide( ( active ) =>\r\n\t\t\t\t\t\t\tMath.min( active + 1, patterns.length - 1 )\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} }\r\n\t\t\t\t\thandlePrevious={ () => {\r\n\t\t\t\t\t\tsetActiveSlide( ( active ) =>\r\n\t\t\t\t\t\t\tMath.max( active - 1, 0 )\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} }\r\n\t\t\t\t\tonBlockPatternSelect={ () => {\r\n\t\t\t\t\t\tonPatternSelectCallback(\r\n\t\t\t\t\t\t\tpatterns[ activeSlide ].blocks\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} }\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default BlockPatternSetup;\r\n"],"mappings":"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","ignoreList":[]}