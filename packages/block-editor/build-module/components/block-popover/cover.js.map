{"version":3,"names":["useEffect","useState","useMemo","forwardRef","useBlockElement","PrivateBlockPopover","jsx","_jsx","BlockPopoverCover","clientId","bottomClientId","children","shift","additionalStyles","props","ref","_bottomClientId","selectedElement","CoverContainer","width","setWidth","offsetWidth","height","setHeight","offsetHeight","observer","window","ResizeObserver","observe","box","disconnect","style","position"],"sources":["@wordpress/block-editor/src/components/block-popover/cover.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useEffect, useState, useMemo, forwardRef } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { useBlockElement } from '../block-list/use-block-props/use-block-refs';\r\nimport { PrivateBlockPopover } from '.';\r\n\r\nfunction BlockPopoverCover(\r\n\t{\r\n\t\tclientId,\r\n\t\tbottomClientId,\r\n\t\tchildren,\r\n\t\tshift = false,\r\n\t\tadditionalStyles,\r\n\t\t...props\r\n\t},\r\n\tref\r\n) {\r\n\tbottomClientId ??= clientId;\r\n\r\n\tconst selectedElement = useBlockElement( clientId );\r\n\r\n\treturn (\r\n\t\t<PrivateBlockPopover\r\n\t\t\tref={ ref }\r\n\t\t\tclientId={ clientId }\r\n\t\t\tbottomClientId={ bottomClientId }\r\n\t\t\tshift={ shift }\r\n\t\t\t{ ...props }\r\n\t\t>\r\n\t\t\t{ selectedElement && clientId === bottomClientId ? (\r\n\t\t\t\t<CoverContainer\r\n\t\t\t\t\tselectedElement={ selectedElement }\r\n\t\t\t\t\tadditionalStyles={ additionalStyles }\r\n\t\t\t\t>\r\n\t\t\t\t\t{ children }\r\n\t\t\t\t</CoverContainer>\r\n\t\t\t) : (\r\n\t\t\t\tchildren\r\n\t\t\t) }\r\n\t\t</PrivateBlockPopover>\r\n\t);\r\n}\r\n\r\nfunction CoverContainer( {\r\n\tselectedElement,\r\n\tadditionalStyles = {},\r\n\tchildren,\r\n} ) {\r\n\tconst [ width, setWidth ] = useState( selectedElement.offsetWidth );\r\n\tconst [ height, setHeight ] = useState( selectedElement.offsetHeight );\r\n\r\n\tuseEffect( () => {\r\n\t\tconst observer = new window.ResizeObserver( () => {\r\n\t\t\tsetWidth( selectedElement.offsetWidth );\r\n\t\t\tsetHeight( selectedElement.offsetHeight );\r\n\t\t} );\r\n\t\tobserver.observe( selectedElement, { box: 'border-box' } );\r\n\t\treturn () => observer.disconnect();\r\n\t}, [ selectedElement ] );\r\n\r\n\tconst style = useMemo( () => {\r\n\t\treturn {\r\n\t\t\tposition: 'absolute',\r\n\t\t\twidth,\r\n\t\t\theight,\r\n\t\t\t...additionalStyles,\r\n\t\t};\r\n\t}, [ width, height, additionalStyles ] );\r\n\r\n\treturn <div style={ style }>{ children }</div>;\r\n}\r\n\r\nexport default forwardRef( BlockPopoverCover );\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,SAAS,EAAEC,QAAQ,EAAEC,OAAO,EAAEC,UAAU,QAAQ,oBAAoB;;AAE7E;AACA;AACA;AACA,SAASC,eAAe,QAAQ,8CAA8C;AAC9E,SAASC,mBAAmB,QAAQ,GAAG;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAExC,SAASC,iBAAiBA,CACzB;EACCC,QAAQ;EACRC,cAAc;EACdC,QAAQ;EACRC,KAAK,GAAG,KAAK;EACbC,gBAAgB;EAChB,GAAGC;AACJ,CAAC,EACDC,GAAG,EACF;EAAA,IAAAC,eAAA;EACD,CAAAA,eAAA,GAAAN,cAAc,cAAAM,eAAA,cAAAA,eAAA,GAAdN,cAAc,GAAKD,QAAQ;EAE3B,MAAMQ,eAAe,GAAGb,eAAe,CAAEK,QAAS,CAAC;EAEnD,oBACCF,IAAA,CAACF,mBAAmB;IACnBU,GAAG,EAAGA,GAAK;IACXN,QAAQ,EAAGA,QAAU;IACrBC,cAAc,EAAGA,cAAgB;IACjCE,KAAK,EAAGA,KAAO;IAAA,GACVE,KAAK;IAAAH,QAAA,EAERM,eAAe,IAAIR,QAAQ,KAAKC,cAAc,gBAC/CH,IAAA,CAACW,cAAc;MACdD,eAAe,EAAGA,eAAiB;MACnCJ,gBAAgB,EAAGA,gBAAkB;MAAAF,QAAA,EAEnCA;IAAQ,CACK,CAAC,GAEjBA;EACA,CACmB,CAAC;AAExB;AAEA,SAASO,cAAcA,CAAE;EACxBD,eAAe;EACfJ,gBAAgB,GAAG,CAAC,CAAC;EACrBF;AACD,CAAC,EAAG;EACH,MAAM,CAAEQ,KAAK,EAAEC,QAAQ,CAAE,GAAGnB,QAAQ,CAAEgB,eAAe,CAACI,WAAY,CAAC;EACnE,MAAM,CAAEC,MAAM,EAAEC,SAAS,CAAE,GAAGtB,QAAQ,CAAEgB,eAAe,CAACO,YAAa,CAAC;EAEtExB,SAAS,CAAE,MAAM;IAChB,MAAMyB,QAAQ,GAAG,IAAIC,MAAM,CAACC,cAAc,CAAE,MAAM;MACjDP,QAAQ,CAAEH,eAAe,CAACI,WAAY,CAAC;MACvCE,SAAS,CAAEN,eAAe,CAACO,YAAa,CAAC;IAC1C,CAAE,CAAC;IACHC,QAAQ,CAACG,OAAO,CAAEX,eAAe,EAAE;MAAEY,GAAG,EAAE;IAAa,CAAE,CAAC;IAC1D,OAAO,MAAMJ,QAAQ,CAACK,UAAU,CAAC,CAAC;EACnC,CAAC,EAAE,CAAEb,eAAe,CAAG,CAAC;EAExB,MAAMc,KAAK,GAAG7B,OAAO,CAAE,MAAM;IAC5B,OAAO;MACN8B,QAAQ,EAAE,UAAU;MACpBb,KAAK;MACLG,MAAM;MACN,GAAGT;IACJ,CAAC;EACF,CAAC,EAAE,CAAEM,KAAK,EAAEG,MAAM,EAAET,gBAAgB,CAAG,CAAC;EAExC,oBAAON,IAAA;IAAKwB,KAAK,EAAGA,KAAO;IAAApB,QAAA,EAAGA;EAAQ,CAAO,CAAC;AAC/C;AAEA,eAAeR,UAAU,CAAEK,iBAAkB,CAAC","ignoreList":[]}