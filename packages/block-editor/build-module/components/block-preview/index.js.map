{"version":3,"names":["clsx","useDisabled","useMergeRefs","useSelect","memo","useMemo","deprecated","ExperimentalBlockEditorProvider","AutoHeightBlockPreview","EditorStyles","store","blockEditorStore","BlockListItems","jsx","_jsx","jsxs","_jsxs","EMPTY_ADDITIONAL_STYLES","BlockPreview","blocks","viewportWidth","minHeight","additionalStyles","__experimentalMinHeight","__experimentalPadding","since","version","alternative","css","originalSettings","select","getSettings","settings","focusMode","__unstableIsPreviewMode","renderedBlocks","Array","isArray","length","value","children","useBlockPreview","props","layout","styles","undefined","disabledRef","ref","renderAppender","className"],"sources":["@wordpress/block-editor/src/components/block-preview/index.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useDisabled, useMergeRefs } from '@wordpress/compose';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { memo, useMemo } from '@wordpress/element';\r\nimport deprecated from '@wordpress/deprecated';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { ExperimentalBlockEditorProvider } from '../provider';\r\nimport AutoHeightBlockPreview from './auto';\r\nimport EditorStyles from '../editor-styles';\r\nimport { store as blockEditorStore } from '../../store';\r\nimport { BlockListItems } from '../block-list';\r\n\r\nconst EMPTY_ADDITIONAL_STYLES = [];\r\n\r\nexport function BlockPreview( {\r\n\tblocks,\r\n\tviewportWidth = 1200,\r\n\tminHeight,\r\n\tadditionalStyles = EMPTY_ADDITIONAL_STYLES,\r\n\t// Deprecated props:\r\n\t__experimentalMinHeight,\r\n\t__experimentalPadding,\r\n} ) {\r\n\tif ( __experimentalMinHeight ) {\r\n\t\tminHeight = __experimentalMinHeight;\r\n\t\tdeprecated( 'The __experimentalMinHeight prop', {\r\n\t\t\tsince: '6.2',\r\n\t\t\tversion: '6.4',\r\n\t\t\talternative: 'minHeight',\r\n\t\t} );\r\n\t}\r\n\tif ( __experimentalPadding ) {\r\n\t\tadditionalStyles = [\r\n\t\t\t...additionalStyles,\r\n\t\t\t{ css: `body { padding: ${ __experimentalPadding }px; }` },\r\n\t\t];\r\n\t\tdeprecated( 'The __experimentalPadding prop of BlockPreview', {\r\n\t\t\tsince: '6.2',\r\n\t\t\tversion: '6.4',\r\n\t\t\talternative: 'additionalStyles',\r\n\t\t} );\r\n\t}\r\n\r\n\tconst originalSettings = useSelect(\r\n\t\t( select ) => select( blockEditorStore ).getSettings(),\r\n\t\t[]\r\n\t);\r\n\tconst settings = useMemo(\r\n\t\t() => ( {\r\n\t\t\t...originalSettings,\r\n\t\t\tfocusMode: false, // Disable \"Spotlight mode\".\r\n\t\t\t__unstableIsPreviewMode: true,\r\n\t\t} ),\r\n\t\t[ originalSettings ]\r\n\t);\r\n\tconst renderedBlocks = useMemo(\r\n\t\t() => ( Array.isArray( blocks ) ? blocks : [ blocks ] ),\r\n\t\t[ blocks ]\r\n\t);\r\n\r\n\tif ( ! blocks || blocks.length === 0 ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<ExperimentalBlockEditorProvider\r\n\t\t\tvalue={ renderedBlocks }\r\n\t\t\tsettings={ settings }\r\n\t\t>\r\n\t\t\t<AutoHeightBlockPreview\r\n\t\t\t\tviewportWidth={ viewportWidth }\r\n\t\t\t\tminHeight={ minHeight }\r\n\t\t\t\tadditionalStyles={ additionalStyles }\r\n\t\t\t/>\r\n\t\t</ExperimentalBlockEditorProvider>\r\n\t);\r\n}\r\n\r\n/**\r\n * BlockPreview renders a preview of a block or array of blocks.\r\n *\r\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-preview/README.md\r\n *\r\n * @param {Object}       preview               options for how the preview should be shown\r\n * @param {Array|Object} preview.blocks        A block instance (object) or an array of blocks to be previewed.\r\n * @param {number}       preview.viewportWidth Width of the preview container in pixels. Controls at what size the blocks will be rendered inside the preview. Default: 700.\r\n *\r\n * @return {Component} The component to be rendered.\r\n */\r\nexport default memo( BlockPreview );\r\n\r\n/**\r\n * This hook is used to lightly mark an element as a block preview wrapper\r\n * element. Call this hook and pass the returned props to the element to mark as\r\n * a block preview wrapper, automatically rendering inner blocks as children. If\r\n * you define a ref for the element, it is important to pass the ref to this\r\n * hook, which the hook in turn will pass to the component through the props it\r\n * returns. Optionally, you can also pass any other props through this hook, and\r\n * they will be merged and returned.\r\n *\r\n * @param {Object}    options        Preview options.\r\n * @param {WPBlock[]} options.blocks Block objects.\r\n * @param {Object}    options.props  Optional. Props to pass to the element. Must contain\r\n *                                   the ref if one is defined.\r\n * @param {Object}    options.layout Layout settings to be used in the preview.\r\n */\r\nexport function useBlockPreview( { blocks, props = {}, layout } ) {\r\n\tconst originalSettings = useSelect(\r\n\t\t( select ) => select( blockEditorStore ).getSettings(),\r\n\t\t[]\r\n\t);\r\n\tconst settings = useMemo(\r\n\t\t() => ( {\r\n\t\t\t...originalSettings,\r\n\t\t\tstyles: undefined, // Clear styles included by the parent settings, as they are already output by the parent's EditorStyles.\r\n\t\t\tfocusMode: false, // Disable \"Spotlight mode\".\r\n\t\t\t__unstableIsPreviewMode: true,\r\n\t\t} ),\r\n\t\t[ originalSettings ]\r\n\t);\r\n\tconst disabledRef = useDisabled();\r\n\tconst ref = useMergeRefs( [ props.ref, disabledRef ] );\r\n\tconst renderedBlocks = useMemo(\r\n\t\t() => ( Array.isArray( blocks ) ? blocks : [ blocks ] ),\r\n\t\t[ blocks ]\r\n\t);\r\n\r\n\tconst children = (\r\n\t\t<ExperimentalBlockEditorProvider\r\n\t\t\tvalue={ renderedBlocks }\r\n\t\t\tsettings={ settings }\r\n\t\t>\r\n\t\t\t<EditorStyles />\r\n\t\t\t<BlockListItems renderAppender={ false } layout={ layout } />\r\n\t\t</ExperimentalBlockEditorProvider>\r\n\t);\r\n\r\n\treturn {\r\n\t\t...props,\r\n\t\tref,\r\n\t\tclassName: clsx(\r\n\t\t\tprops.className,\r\n\t\t\t'block-editor-block-preview__live-content',\r\n\t\t\t'components-disabled'\r\n\t\t),\r\n\t\tchildren: blocks?.length ? children : null,\r\n\t};\r\n}\r\n"],"mappings":"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","ignoreList":[]}