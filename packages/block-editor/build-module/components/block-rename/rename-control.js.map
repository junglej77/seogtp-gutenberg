{"version":3,"names":["MenuItem","useSelect","useDispatch","__","useState","store","blockEditorStore","useBlockDisplayInformation","isEmptyString","BlockRenameModal","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","BlockRenameControl","clientId","renamingBlock","setRenamingBlock","metadata","select","getBlockAttributes","_metadata","updateBlockAttributes","customName","name","hasPatternOverrides","bindings","Object","values","some","binding","source","onChange","newName","blockInformation","children","onClick","blockName","originalBlockName","title","hasOverridesWarning","onClose","onSave","undefined"],"sources":["@wordpress/block-editor/src/components/block-rename/rename-control.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { MenuItem } from '@wordpress/components';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useState } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\nimport { useBlockDisplayInformation } from '..';\r\nimport isEmptyString from './is-empty-string';\r\nimport BlockRenameModal from './modal';\r\n\r\nexport default function BlockRenameControl( { clientId } ) {\r\n\tconst [ renamingBlock, setRenamingBlock ] = useState( false );\r\n\r\n\tconst { metadata } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst { getBlockAttributes } = select( blockEditorStore );\r\n\r\n\t\t\tconst _metadata = getBlockAttributes( clientId )?.metadata;\r\n\t\t\treturn {\r\n\t\t\t\tmetadata: _metadata,\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ clientId ]\r\n\t);\r\n\r\n\tconst { updateBlockAttributes } = useDispatch( blockEditorStore );\r\n\r\n\tconst customName = metadata?.name;\r\n\tconst hasPatternOverrides =\r\n\t\t!! customName &&\r\n\t\t!! metadata?.bindings &&\r\n\t\tObject.values( metadata.bindings ).some(\r\n\t\t\t( binding ) => binding.source === 'core/pattern-overrides'\r\n\t\t);\r\n\r\n\tfunction onChange( newName ) {\r\n\t\tupdateBlockAttributes( [ clientId ], {\r\n\t\t\tmetadata: {\r\n\t\t\t\t...metadata,\r\n\t\t\t\tname: newName,\r\n\t\t\t},\r\n\t\t} );\r\n\t}\r\n\r\n\tconst blockInformation = useBlockDisplayInformation( clientId );\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<MenuItem\r\n\t\t\t\tonClick={ () => {\r\n\t\t\t\t\tsetRenamingBlock( true );\r\n\t\t\t\t} }\r\n\t\t\t\taria-expanded={ renamingBlock }\r\n\t\t\t\taria-haspopup=\"dialog\"\r\n\t\t\t>\r\n\t\t\t\t{ __( 'Rename' ) }\r\n\t\t\t</MenuItem>\r\n\t\t\t{ renamingBlock && (\r\n\t\t\t\t<BlockRenameModal\r\n\t\t\t\t\tblockName={ customName || '' }\r\n\t\t\t\t\toriginalBlockName={ blockInformation?.title }\r\n\t\t\t\t\thasOverridesWarning={ hasPatternOverrides }\r\n\t\t\t\t\tonClose={ () => setRenamingBlock( false ) }\r\n\t\t\t\t\tonSave={ ( newName ) => {\r\n\t\t\t\t\t\t// If the new value is the block's original name (e.g. `Group`)\r\n\t\t\t\t\t\t// or it is an empty string then assume the intent is to reset\r\n\t\t\t\t\t\t// the value. Therefore reset the metadata.\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tnewName === blockInformation?.title ||\r\n\t\t\t\t\t\t\tisEmptyString( newName )\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tnewName = undefined;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tonChange( newName );\r\n\t\t\t\t\t} }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t</>\r\n\t);\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,QAAQ,QAAQ,uBAAuB;AAChD,SAASC,SAAS,EAAEC,WAAW,QAAQ,iBAAiB;AACxD,SAASC,EAAE,QAAQ,iBAAiB;AACpC,SAASC,QAAQ,QAAQ,oBAAoB;;AAE7C;AACA;AACA;AACA,SAASC,KAAK,IAAIC,gBAAgB,QAAQ,aAAa;AACvD,SAASC,0BAA0B,QAAQ,IAAI;AAC/C,OAAOC,aAAa,MAAM,mBAAmB;AAC7C,OAAOC,gBAAgB,MAAM,SAAS;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAEvC,eAAe,SAASC,kBAAkBA,CAAE;EAAEC;AAAS,CAAC,EAAG;EAC1D,MAAM,CAAEC,aAAa,EAAEC,gBAAgB,CAAE,GAAGf,QAAQ,CAAE,KAAM,CAAC;EAE7D,MAAM;IAAEgB;EAAS,CAAC,GAAGnB,SAAS,CAC3BoB,MAAM,IAAM;IACb,MAAM;MAAEC;IAAmB,CAAC,GAAGD,MAAM,CAAEf,gBAAiB,CAAC;IAEzD,MAAMiB,SAAS,GAAGD,kBAAkB,CAAEL,QAAS,CAAC,EAAEG,QAAQ;IAC1D,OAAO;MACNA,QAAQ,EAAEG;IACX,CAAC;EACF,CAAC,EACD,CAAEN,QAAQ,CACX,CAAC;EAED,MAAM;IAAEO;EAAsB,CAAC,GAAGtB,WAAW,CAAEI,gBAAiB,CAAC;EAEjE,MAAMmB,UAAU,GAAGL,QAAQ,EAAEM,IAAI;EACjC,MAAMC,mBAAmB,GACxB,CAAC,CAAEF,UAAU,IACb,CAAC,CAAEL,QAAQ,EAAEQ,QAAQ,IACrBC,MAAM,CAACC,MAAM,CAAEV,QAAQ,CAACQ,QAAS,CAAC,CAACG,IAAI,CACpCC,OAAO,IAAMA,OAAO,CAACC,MAAM,KAAK,wBACnC,CAAC;EAEF,SAASC,QAAQA,CAAEC,OAAO,EAAG;IAC5BX,qBAAqB,CAAE,CAAEP,QAAQ,CAAE,EAAE;MACpCG,QAAQ,EAAE;QACT,GAAGA,QAAQ;QACXM,IAAI,EAAES;MACP;IACD,CAAE,CAAC;EACJ;EAEA,MAAMC,gBAAgB,GAAG7B,0BAA0B,CAAEU,QAAS,CAAC;EAE/D,oBACCF,KAAA,CAAAF,SAAA;IAAAwB,QAAA,gBACC1B,IAAA,CAACX,QAAQ;MACRsC,OAAO,EAAGA,CAAA,KAAM;QACfnB,gBAAgB,CAAE,IAAK,CAAC;MACzB,CAAG;MACH,iBAAgBD,aAAe;MAC/B,iBAAc,QAAQ;MAAAmB,QAAA,EAEpBlC,EAAE,CAAE,QAAS;IAAC,CACP,CAAC,EACTe,aAAa,iBACdP,IAAA,CAACF,gBAAgB;MAChB8B,SAAS,EAAGd,UAAU,IAAI,EAAI;MAC9Be,iBAAiB,EAAGJ,gBAAgB,EAAEK,KAAO;MAC7CC,mBAAmB,EAAGf,mBAAqB;MAC3CgB,OAAO,EAAGA,CAAA,KAAMxB,gBAAgB,CAAE,KAAM,CAAG;MAC3CyB,MAAM,EAAKT,OAAO,IAAM;QACvB;QACA;QACA;QACA,IACCA,OAAO,KAAKC,gBAAgB,EAAEK,KAAK,IACnCjC,aAAa,CAAE2B,OAAQ,CAAC,EACvB;UACDA,OAAO,GAAGU,SAAS;QACpB;QAEAX,QAAQ,CAAEC,OAAQ,CAAC;MACpB;IAAG,CACH,CACD;EAAA,CACA,CAAC;AAEL","ignoreList":[]}