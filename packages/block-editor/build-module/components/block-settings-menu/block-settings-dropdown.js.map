{"version":3,"names":["getBlockType","serialize","store","blocksStore","DropdownMenu","MenuGroup","MenuItem","useDispatch","useSelect","moreVertical","Children","cloneElement","__","displayShortcut","keyboardShortcutsStore","pipe","useCopyToClipboard","BlockActions","BlockHTMLConvertButton","__unstableBlockSettingsMenuFirstItem","BlockSettingsMenuControls","BlockParentSelectorMenuItem","blockEditorStore","unlock","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","POPOVER_PROPS","className","placement","CopyMenuItem","clientIds","onCopy","label","shortcut","getBlocksByClientId","ref","copyMenuItemLabel","children","BlockSettingsDropdown","block","__experimentalSelectBlock","props","currentClientId","clientId","count","length","firstBlockClientId","firstParentClientId","onlyBlock","parentBlockType","previousBlockClientId","selectedBlockClientIds","openedBlockSettingsMenu","isContentOnly","select","getBlockCount","getBlockName","getBlockRootClientId","getPreviousBlockClientId","getSelectedBlockClientIds","getBlockAttributes","getOpenedBlockSettingsMenu","getBlockEditingMode","getActiveBlockVariation","_firstParentClientId","parentBlockName","getBlockOrder","setOpenedBlockSettingsMenu","shortcuts","getShortcutRepresentation","duplicate","remove","insertAfter","insertBefore","hasSelectedBlocks","updateSelectionAfterDuplicate","clientIdsPromise","ids","updateSelectionAfterRemove","blockToFocus","shouldUpdateSelection","parentBlockIsSelected","includes","open","undefined","onToggle","localOpen","__experimentalUpdateSelection","canCopyStyles","canDuplicate","canInsertBlock","canMove","canRemove","onDuplicate","onInsertAfter","onInsertBefore","onRemove","onPasteStyles","onMoveTo","icon","popoverProps","noIcons","onClose","Slot","fillProps","parentClientId","primary","onClick","map","child"],"sources":["@wordpress/block-editor/src/components/block-settings-menu/block-settings-dropdown.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tgetBlockType,\r\n\tserialize,\r\n\tstore as blocksStore,\r\n} from '@wordpress/blocks';\r\nimport { DropdownMenu, MenuGroup, MenuItem } from '@wordpress/components';\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\nimport { moreVertical } from '@wordpress/icons';\r\nimport { Children, cloneElement } from '@wordpress/element';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { displayShortcut } from '@wordpress/keycodes';\r\nimport { store as keyboardShortcutsStore } from '@wordpress/keyboard-shortcuts';\r\nimport { pipe, useCopyToClipboard } from '@wordpress/compose';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockActions from '../block-actions';\r\nimport BlockHTMLConvertButton from './block-html-convert-button';\r\nimport __unstableBlockSettingsMenuFirstItem from './block-settings-menu-first-item';\r\nimport BlockSettingsMenuControls from '../block-settings-menu-controls';\r\nimport BlockParentSelectorMenuItem from './block-parent-selector-menu-item';\r\nimport { store as blockEditorStore } from '../../store';\r\nimport { unlock } from '../../lock-unlock';\r\n\r\nconst POPOVER_PROPS = {\r\n\tclassName: 'block-editor-block-settings-menu__popover',\r\n\tplacement: 'bottom-start',\r\n};\r\n\r\nfunction CopyMenuItem( { clientIds, onCopy, label, shortcut } ) {\r\n\tconst { getBlocksByClientId } = useSelect( blockEditorStore );\r\n\tconst ref = useCopyToClipboard(\r\n\t\t() => serialize( getBlocksByClientId( clientIds ) ),\r\n\t\tonCopy\r\n\t);\r\n\tconst copyMenuItemLabel = label ? label : __( 'Copy' );\r\n\treturn (\r\n\t\t<MenuItem ref={ ref } shortcut={ shortcut }>\r\n\t\t\t{ copyMenuItemLabel }\r\n\t\t</MenuItem>\r\n\t);\r\n}\r\n\r\nexport function BlockSettingsDropdown( {\r\n\tblock,\r\n\tclientIds,\r\n\tchildren,\r\n\t__experimentalSelectBlock,\r\n\t...props\r\n} ) {\r\n\t// Get the client id of the current block for this menu, if one is set.\r\n\tconst currentClientId = block?.clientId;\r\n\tconst count = clientIds.length;\r\n\tconst firstBlockClientId = clientIds[ 0 ];\r\n\tconst {\r\n\t\tfirstParentClientId,\r\n\t\tonlyBlock,\r\n\t\tparentBlockType,\r\n\t\tpreviousBlockClientId,\r\n\t\tselectedBlockClientIds,\r\n\t\topenedBlockSettingsMenu,\r\n\t\tisContentOnly,\r\n\t} = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst {\r\n\t\t\t\tgetBlockCount,\r\n\t\t\t\tgetBlockName,\r\n\t\t\t\tgetBlockRootClientId,\r\n\t\t\t\tgetPreviousBlockClientId,\r\n\t\t\t\tgetSelectedBlockClientIds,\r\n\t\t\t\tgetBlockAttributes,\r\n\t\t\t\tgetOpenedBlockSettingsMenu,\r\n\t\t\t\tgetBlockEditingMode,\r\n\t\t\t} = unlock( select( blockEditorStore ) );\r\n\r\n\t\t\tconst { getActiveBlockVariation } = select( blocksStore );\r\n\r\n\t\t\tconst _firstParentClientId =\r\n\t\t\t\tgetBlockRootClientId( firstBlockClientId );\r\n\t\t\tconst parentBlockName =\r\n\t\t\t\t_firstParentClientId && getBlockName( _firstParentClientId );\r\n\r\n\t\t\treturn {\r\n\t\t\t\tfirstParentClientId: _firstParentClientId,\r\n\t\t\t\tonlyBlock: 1 === getBlockCount( _firstParentClientId ),\r\n\t\t\t\tparentBlockType:\r\n\t\t\t\t\t_firstParentClientId &&\r\n\t\t\t\t\t( getActiveBlockVariation(\r\n\t\t\t\t\t\tparentBlockName,\r\n\t\t\t\t\t\tgetBlockAttributes( _firstParentClientId )\r\n\t\t\t\t\t) ||\r\n\t\t\t\t\t\tgetBlockType( parentBlockName ) ),\r\n\t\t\t\tpreviousBlockClientId:\r\n\t\t\t\t\tgetPreviousBlockClientId( firstBlockClientId ),\r\n\t\t\t\tselectedBlockClientIds: getSelectedBlockClientIds(),\r\n\t\t\t\topenedBlockSettingsMenu: getOpenedBlockSettingsMenu(),\r\n\t\t\t\tisContentOnly:\r\n\t\t\t\t\tgetBlockEditingMode( firstBlockClientId ) === 'contentOnly',\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ firstBlockClientId ]\r\n\t);\r\n\tconst { getBlockOrder, getSelectedBlockClientIds } =\r\n\t\tuseSelect( blockEditorStore );\r\n\r\n\tconst { setOpenedBlockSettingsMenu } = unlock(\r\n\t\tuseDispatch( blockEditorStore )\r\n\t);\r\n\r\n\tconst shortcuts = useSelect( ( select ) => {\r\n\t\tconst { getShortcutRepresentation } = select( keyboardShortcutsStore );\r\n\t\treturn {\r\n\t\t\tduplicate: getShortcutRepresentation(\r\n\t\t\t\t'core/block-editor/duplicate'\r\n\t\t\t),\r\n\t\t\tremove: getShortcutRepresentation( 'core/block-editor/remove' ),\r\n\t\t\tinsertAfter: getShortcutRepresentation(\r\n\t\t\t\t'core/block-editor/insert-after'\r\n\t\t\t),\r\n\t\t\tinsertBefore: getShortcutRepresentation(\r\n\t\t\t\t'core/block-editor/insert-before'\r\n\t\t\t),\r\n\t\t};\r\n\t}, [] );\r\n\tconst hasSelectedBlocks = selectedBlockClientIds.length > 0;\r\n\r\n\tasync function updateSelectionAfterDuplicate( clientIdsPromise ) {\r\n\t\tif ( ! __experimentalSelectBlock ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst ids = await clientIdsPromise;\r\n\t\tif ( ids && ids[ 0 ] ) {\r\n\t\t\t__experimentalSelectBlock( ids[ 0 ], false );\r\n\t\t}\r\n\t}\r\n\r\n\tfunction updateSelectionAfterRemove() {\r\n\t\tif ( ! __experimentalSelectBlock ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet blockToFocus = previousBlockClientId || firstParentClientId;\r\n\r\n\t\t// Focus the first block if there's no previous block nor parent block.\r\n\t\tif ( ! blockToFocus ) {\r\n\t\t\tblockToFocus = getBlockOrder()[ 0 ];\r\n\t\t}\r\n\r\n\t\t// Only update the selection if the original selection is removed.\r\n\t\tconst shouldUpdateSelection =\r\n\t\t\thasSelectedBlocks && getSelectedBlockClientIds().length === 0;\r\n\r\n\t\t__experimentalSelectBlock( blockToFocus, shouldUpdateSelection );\r\n\t}\r\n\r\n\t// This can occur when the selected block (the parent)\r\n\t// displays child blocks within a List View.\r\n\tconst parentBlockIsSelected =\r\n\t\tselectedBlockClientIds?.includes( firstParentClientId );\r\n\r\n\t// When a currentClientId is in use, treat the menu as a controlled component.\r\n\t// This ensures that only one block settings menu is open at a time.\r\n\t// This is a temporary solution to work around an issue with `onFocusOutside`\r\n\t// where it does not allow a dropdown to be closed if focus was never within\r\n\t// the dropdown to begin with. Examples include a user either CMD+Clicking or\r\n\t// right clicking into an inactive window.\r\n\t// See: https://github.com/WordPress/gutenberg/pull/54083\r\n\tconst open = ! currentClientId\r\n\t\t? undefined\r\n\t\t: openedBlockSettingsMenu === currentClientId || false;\r\n\r\n\tfunction onToggle( localOpen ) {\r\n\t\tif ( localOpen && openedBlockSettingsMenu !== currentClientId ) {\r\n\t\t\tsetOpenedBlockSettingsMenu( currentClientId );\r\n\t\t} else if (\r\n\t\t\t! localOpen &&\r\n\t\t\topenedBlockSettingsMenu &&\r\n\t\t\topenedBlockSettingsMenu === currentClientId\r\n\t\t) {\r\n\t\t\tsetOpenedBlockSettingsMenu( undefined );\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<BlockActions\r\n\t\t\tclientIds={ clientIds }\r\n\t\t\t__experimentalUpdateSelection={ ! __experimentalSelectBlock }\r\n\t\t>\r\n\t\t\t{ ( {\r\n\t\t\t\tcanCopyStyles,\r\n\t\t\t\tcanDuplicate,\r\n\t\t\t\tcanInsertBlock,\r\n\t\t\t\tcanMove,\r\n\t\t\t\tcanRemove,\r\n\t\t\t\tonDuplicate,\r\n\t\t\t\tonInsertAfter,\r\n\t\t\t\tonInsertBefore,\r\n\t\t\t\tonRemove,\r\n\t\t\t\tonCopy,\r\n\t\t\t\tonPasteStyles,\r\n\t\t\t\tonMoveTo,\r\n\t\t\t} ) => (\r\n\t\t\t\t<DropdownMenu\r\n\t\t\t\t\ticon={ moreVertical }\r\n\t\t\t\t\tlabel={ __( 'Options' ) }\r\n\t\t\t\t\tclassName=\"block-editor-block-settings-menu\"\r\n\t\t\t\t\tpopoverProps={ POPOVER_PROPS }\r\n\t\t\t\t\topen={ open }\r\n\t\t\t\t\tonToggle={ onToggle }\r\n\t\t\t\t\tnoIcons\r\n\t\t\t\t\t{ ...props }\r\n\t\t\t\t>\r\n\t\t\t\t\t{ ( { onClose } ) => (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<MenuGroup>\r\n\t\t\t\t\t\t\t\t<__unstableBlockSettingsMenuFirstItem.Slot\r\n\t\t\t\t\t\t\t\t\tfillProps={ { onClose } }\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t{ ! parentBlockIsSelected &&\r\n\t\t\t\t\t\t\t\t\t!! firstParentClientId && (\r\n\t\t\t\t\t\t\t\t\t\t<BlockParentSelectorMenuItem\r\n\t\t\t\t\t\t\t\t\t\t\tparentClientId={\r\n\t\t\t\t\t\t\t\t\t\t\t\tfirstParentClientId\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tparentBlockType={ parentBlockType }\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t{ count === 1 && (\r\n\t\t\t\t\t\t\t\t\t<BlockHTMLConvertButton\r\n\t\t\t\t\t\t\t\t\t\tclientId={ firstBlockClientId }\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t{ ! isContentOnly && (\r\n\t\t\t\t\t\t\t\t\t<CopyMenuItem\r\n\t\t\t\t\t\t\t\t\t\tclientIds={ clientIds }\r\n\t\t\t\t\t\t\t\t\t\tonCopy={ onCopy }\r\n\t\t\t\t\t\t\t\t\t\tshortcut={ displayShortcut.primary(\r\n\t\t\t\t\t\t\t\t\t\t\t'c'\r\n\t\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t{ canDuplicate && (\r\n\t\t\t\t\t\t\t\t\t<MenuItem\r\n\t\t\t\t\t\t\t\t\t\tonClick={ pipe(\r\n\t\t\t\t\t\t\t\t\t\t\tonClose,\r\n\t\t\t\t\t\t\t\t\t\t\tonDuplicate,\r\n\t\t\t\t\t\t\t\t\t\t\tupdateSelectionAfterDuplicate\r\n\t\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t\t\tshortcut={ shortcuts.duplicate }\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{ __( 'Duplicate' ) }\r\n\t\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t{ canInsertBlock && ! isContentOnly && (\r\n\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t<MenuItem\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={ pipe(\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClose,\r\n\t\t\t\t\t\t\t\t\t\t\t\tonInsertBefore\r\n\t\t\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t\t\t\tshortcut={ shortcuts.insertBefore }\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{ __( 'Add before' ) }\r\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t\t\t<MenuItem\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={ pipe(\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClose,\r\n\t\t\t\t\t\t\t\t\t\t\t\tonInsertAfter\r\n\t\t\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t\t\t\tshortcut={ shortcuts.insertAfter }\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{ __( 'Add after' ) }\r\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t</MenuGroup>\r\n\t\t\t\t\t\t\t{ canCopyStyles && ! isContentOnly && (\r\n\t\t\t\t\t\t\t\t<MenuGroup>\r\n\t\t\t\t\t\t\t\t\t<CopyMenuItem\r\n\t\t\t\t\t\t\t\t\t\tclientIds={ clientIds }\r\n\t\t\t\t\t\t\t\t\t\tonCopy={ onCopy }\r\n\t\t\t\t\t\t\t\t\t\tlabel={ __( 'Copy styles' ) }\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<MenuItem onClick={ onPasteStyles }>\r\n\t\t\t\t\t\t\t\t\t\t{ __( 'Paste styles' ) }\r\n\t\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t</MenuGroup>\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t<BlockSettingsMenuControls.Slot\r\n\t\t\t\t\t\t\t\tfillProps={ {\r\n\t\t\t\t\t\t\t\t\tonClose,\r\n\t\t\t\t\t\t\t\t\tcanMove,\r\n\t\t\t\t\t\t\t\t\tonMoveTo,\r\n\t\t\t\t\t\t\t\t\tonlyBlock,\r\n\t\t\t\t\t\t\t\t\tcount,\r\n\t\t\t\t\t\t\t\t\tfirstBlockClientId,\r\n\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t\tclientIds={ clientIds }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t{ typeof children === 'function'\r\n\t\t\t\t\t\t\t\t? children( { onClose } )\r\n\t\t\t\t\t\t\t\t: Children.map( ( child ) =>\r\n\t\t\t\t\t\t\t\t\t\tcloneElement( child, { onClose } )\r\n\t\t\t\t\t\t\t\t  ) }\r\n\t\t\t\t\t\t\t{ canRemove && (\r\n\t\t\t\t\t\t\t\t<MenuGroup>\r\n\t\t\t\t\t\t\t\t\t<MenuItem\r\n\t\t\t\t\t\t\t\t\t\tonClick={ pipe(\r\n\t\t\t\t\t\t\t\t\t\t\tonClose,\r\n\t\t\t\t\t\t\t\t\t\t\tonRemove,\r\n\t\t\t\t\t\t\t\t\t\t\tupdateSelectionAfterRemove\r\n\t\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t\t\tshortcut={ shortcuts.remove }\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{ __( 'Delete' ) }\r\n\t\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t</MenuGroup>\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t) }\r\n\t\t\t\t</DropdownMenu>\r\n\t\t\t) }\r\n\t\t</BlockActions>\r\n\t);\r\n}\r\n\r\nexport default BlockSettingsDropdown;\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SACCA,YAAY,EACZC,SAAS,EACTC,KAAK,IAAIC,WAAW,QACd,mBAAmB;AAC1B,SAASC,YAAY,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,uBAAuB;AACzE,SAASC,WAAW,EAAEC,SAAS,QAAQ,iBAAiB;AACxD,SAASC,YAAY,QAAQ,kBAAkB;AAC/C,SAASC,QAAQ,EAAEC,YAAY,QAAQ,oBAAoB;AAC3D,SAASC,EAAE,QAAQ,iBAAiB;AACpC,SAASC,eAAe,QAAQ,qBAAqB;AACrD,SAASX,KAAK,IAAIY,sBAAsB,QAAQ,+BAA+B;AAC/E,SAASC,IAAI,EAAEC,kBAAkB,QAAQ,oBAAoB;;AAE7D;AACA;AACA;AACA,OAAOC,YAAY,MAAM,kBAAkB;AAC3C,OAAOC,sBAAsB,MAAM,6BAA6B;AAChE,OAAOC,oCAAoC,MAAM,kCAAkC;AACnF,OAAOC,yBAAyB,MAAM,iCAAiC;AACvE,OAAOC,2BAA2B,MAAM,mCAAmC;AAC3E,SAASnB,KAAK,IAAIoB,gBAAgB,QAAQ,aAAa;AACvD,SAASC,MAAM,QAAQ,mBAAmB;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAE3C,MAAMC,aAAa,GAAG;EACrBC,SAAS,EAAE,2CAA2C;EACtDC,SAAS,EAAE;AACZ,CAAC;AAED,SAASC,YAAYA,CAAE;EAAEC,SAAS;EAAEC,MAAM;EAAEC,KAAK;EAAEC;AAAS,CAAC,EAAG;EAC/D,MAAM;IAAEC;EAAoB,CAAC,GAAG9B,SAAS,CAAEc,gBAAiB,CAAC;EAC7D,MAAMiB,GAAG,GAAGvB,kBAAkB,CAC7B,MAAMf,SAAS,CAAEqC,mBAAmB,CAAEJ,SAAU,CAAE,CAAC,EACnDC,MACD,CAAC;EACD,MAAMK,iBAAiB,GAAGJ,KAAK,GAAGA,KAAK,GAAGxB,EAAE,CAAE,MAAO,CAAC;EACtD,oBACCa,IAAA,CAACnB,QAAQ;IAACiC,GAAG,EAAGA,GAAK;IAACF,QAAQ,EAAGA,QAAU;IAAAI,QAAA,EACxCD;EAAiB,CACV,CAAC;AAEb;AAEA,OAAO,SAASE,qBAAqBA,CAAE;EACtCC,KAAK;EACLT,SAAS;EACTO,QAAQ;EACRG,yBAAyB;EACzB,GAAGC;AACJ,CAAC,EAAG;EACH;EACA,MAAMC,eAAe,GAAGH,KAAK,EAAEI,QAAQ;EACvC,MAAMC,KAAK,GAAGd,SAAS,CAACe,MAAM;EAC9B,MAAMC,kBAAkB,GAAGhB,SAAS,CAAE,CAAC,CAAE;EACzC,MAAM;IACLiB,mBAAmB;IACnBC,SAAS;IACTC,eAAe;IACfC,qBAAqB;IACrBC,sBAAsB;IACtBC,uBAAuB;IACvBC;EACD,CAAC,GAAGjD,SAAS,CACVkD,MAAM,IAAM;IACb,MAAM;MACLC,aAAa;MACbC,YAAY;MACZC,oBAAoB;MACpBC,wBAAwB;MACxBC,yBAAyB;MACzBC,kBAAkB;MAClBC,0BAA0B;MAC1BC;IACD,CAAC,GAAG3C,MAAM,CAAEmC,MAAM,CAAEpC,gBAAiB,CAAE,CAAC;IAExC,MAAM;MAAE6C;IAAwB,CAAC,GAAGT,MAAM,CAAEvD,WAAY,CAAC;IAEzD,MAAMiE,oBAAoB,GACzBP,oBAAoB,CAAEX,kBAAmB,CAAC;IAC3C,MAAMmB,eAAe,GACpBD,oBAAoB,IAAIR,YAAY,CAAEQ,oBAAqB,CAAC;IAE7D,OAAO;MACNjB,mBAAmB,EAAEiB,oBAAoB;MACzChB,SAAS,EAAE,CAAC,KAAKO,aAAa,CAAES,oBAAqB,CAAC;MACtDf,eAAe,EACde,oBAAoB,KAClBD,uBAAuB,CACxBE,eAAe,EACfL,kBAAkB,CAAEI,oBAAqB,CAC1C,CAAC,IACApE,YAAY,CAAEqE,eAAgB,CAAC,CAAE;MACnCf,qBAAqB,EACpBQ,wBAAwB,CAAEZ,kBAAmB,CAAC;MAC/CK,sBAAsB,EAAEQ,yBAAyB,CAAC,CAAC;MACnDP,uBAAuB,EAAES,0BAA0B,CAAC,CAAC;MACrDR,aAAa,EACZS,mBAAmB,CAAEhB,kBAAmB,CAAC,KAAK;IAChD,CAAC;EACF,CAAC,EACD,CAAEA,kBAAkB,CACrB,CAAC;EACD,MAAM;IAAEoB,aAAa;IAAEP;EAA0B,CAAC,GACjDvD,SAAS,CAAEc,gBAAiB,CAAC;EAE9B,MAAM;IAAEiD;EAA2B,CAAC,GAAGhD,MAAM,CAC5ChB,WAAW,CAAEe,gBAAiB,CAC/B,CAAC;EAED,MAAMkD,SAAS,GAAGhE,SAAS,CAAIkD,MAAM,IAAM;IAC1C,MAAM;MAAEe;IAA0B,CAAC,GAAGf,MAAM,CAAE5C,sBAAuB,CAAC;IACtE,OAAO;MACN4D,SAAS,EAAED,yBAAyB,CACnC,6BACD,CAAC;MACDE,MAAM,EAAEF,yBAAyB,CAAE,0BAA2B,CAAC;MAC/DG,WAAW,EAAEH,yBAAyB,CACrC,gCACD,CAAC;MACDI,YAAY,EAAEJ,yBAAyB,CACtC,iCACD;IACD,CAAC;EACF,CAAC,EAAE,EAAG,CAAC;EACP,MAAMK,iBAAiB,GAAGvB,sBAAsB,CAACN,MAAM,GAAG,CAAC;EAE3D,eAAe8B,6BAA6BA,CAAEC,gBAAgB,EAAG;IAChE,IAAK,CAAEpC,yBAAyB,EAAG;MAClC;IACD;IAEA,MAAMqC,GAAG,GAAG,MAAMD,gBAAgB;IAClC,IAAKC,GAAG,IAAIA,GAAG,CAAE,CAAC,CAAE,EAAG;MACtBrC,yBAAyB,CAAEqC,GAAG,CAAE,CAAC,CAAE,EAAE,KAAM,CAAC;IAC7C;EACD;EAEA,SAASC,0BAA0BA,CAAA,EAAG;IACrC,IAAK,CAAEtC,yBAAyB,EAAG;MAClC;IACD;IAEA,IAAIuC,YAAY,GAAG7B,qBAAqB,IAAIH,mBAAmB;;IAE/D;IACA,IAAK,CAAEgC,YAAY,EAAG;MACrBA,YAAY,GAAGb,aAAa,CAAC,CAAC,CAAE,CAAC,CAAE;IACpC;;IAEA;IACA,MAAMc,qBAAqB,GAC1BN,iBAAiB,IAAIf,yBAAyB,CAAC,CAAC,CAACd,MAAM,KAAK,CAAC;IAE9DL,yBAAyB,CAAEuC,YAAY,EAAEC,qBAAsB,CAAC;EACjE;;EAEA;EACA;EACA,MAAMC,qBAAqB,GAC1B9B,sBAAsB,EAAE+B,QAAQ,CAAEnC,mBAAoB,CAAC;;EAExD;EACA;EACA;EACA;EACA;EACA;EACA;EACA,MAAMoC,IAAI,GAAG,CAAEzC,eAAe,GAC3B0C,SAAS,GACThC,uBAAuB,KAAKV,eAAe,IAAI,KAAK;EAEvD,SAAS2C,QAAQA,CAAEC,SAAS,EAAG;IAC9B,IAAKA,SAAS,IAAIlC,uBAAuB,KAAKV,eAAe,EAAG;MAC/DyB,0BAA0B,CAAEzB,eAAgB,CAAC;IAC9C,CAAC,MAAM,IACN,CAAE4C,SAAS,IACXlC,uBAAuB,IACvBA,uBAAuB,KAAKV,eAAe,EAC1C;MACDyB,0BAA0B,CAAEiB,SAAU,CAAC;IACxC;EACD;EAEA,oBACC/D,IAAA,CAACR,YAAY;IACZiB,SAAS,EAAGA,SAAW;IACvByD,6BAA6B,EAAG,CAAE/C,yBAA2B;IAAAH,QAAA,EAE3DA,CAAE;MACHmD,aAAa;MACbC,YAAY;MACZC,cAAc;MACdC,OAAO;MACPC,SAAS;MACTC,WAAW;MACXC,aAAa;MACbC,cAAc;MACdC,QAAQ;MACRjE,MAAM;MACNkE,aAAa;MACbC;IACD,CAAC,kBACA7E,IAAA,CAACrB,YAAY;MACZmG,IAAI,EAAG9F,YAAc;MACrB2B,KAAK,EAAGxB,EAAE,CAAE,SAAU,CAAG;MACzBmB,SAAS,EAAC,kCAAkC;MAC5CyE,YAAY,EAAG1E,aAAe;MAC9ByD,IAAI,EAAGA,IAAM;MACbE,QAAQ,EAAGA,QAAU;MACrBgB,OAAO;MAAA,GACF5D,KAAK;MAAAJ,QAAA,EAERA,CAAE;QAAEiE;MAAQ,CAAC,kBACd7E,KAAA,CAAAF,SAAA;QAAAc,QAAA,gBACCZ,KAAA,CAACxB,SAAS;UAAAoC,QAAA,gBACThB,IAAA,CAACN,oCAAoC,CAACwF,IAAI;YACzCC,SAAS,EAAG;cAAEF;YAAQ;UAAG,CACzB,CAAC,EACA,CAAErB,qBAAqB,IACxB,CAAC,CAAElC,mBAAmB,iBACrB1B,IAAA,CAACJ,2BAA2B;YAC3BwF,cAAc,EACb1D,mBACA;YACDE,eAAe,EAAGA;UAAiB,CACnC,CACD,EACAL,KAAK,KAAK,CAAC,iBACZvB,IAAA,CAACP,sBAAsB;YACtB6B,QAAQ,EAAGG;UAAoB,CAC/B,CACD,EACC,CAAEO,aAAa,iBAChBhC,IAAA,CAACQ,YAAY;YACZC,SAAS,EAAGA,SAAW;YACvBC,MAAM,EAAGA,MAAQ;YACjBE,QAAQ,EAAGxB,eAAe,CAACiG,OAAO,CACjC,GACD;UAAG,CACH,CACD,EACCjB,YAAY,iBACbpE,IAAA,CAACnB,QAAQ;YACRyG,OAAO,EAAGhG,IAAI,CACb2F,OAAO,EACPT,WAAW,EACXlB,6BACD,CAAG;YACH1C,QAAQ,EAAGmC,SAAS,CAACE,SAAW;YAAAjC,QAAA,EAE9B7B,EAAE,CAAE,WAAY;UAAC,CACV,CACV,EACCkF,cAAc,IAAI,CAAErC,aAAa,iBAClC5B,KAAA,CAAAF,SAAA;YAAAc,QAAA,gBACChB,IAAA,CAACnB,QAAQ;cACRyG,OAAO,EAAGhG,IAAI,CACb2F,OAAO,EACPP,cACD,CAAG;cACH9D,QAAQ,EAAGmC,SAAS,CAACK,YAAc;cAAApC,QAAA,EAEjC7B,EAAE,CAAE,YAAa;YAAC,CACX,CAAC,eACXa,IAAA,CAACnB,QAAQ;cACRyG,OAAO,EAAGhG,IAAI,CACb2F,OAAO,EACPR,aACD,CAAG;cACH7D,QAAQ,EAAGmC,SAAS,CAACI,WAAa;cAAAnC,QAAA,EAEhC7B,EAAE,CAAE,WAAY;YAAC,CACV,CAAC;UAAA,CACV,CACF;QAAA,CACS,CAAC,EACVgF,aAAa,IAAI,CAAEnC,aAAa,iBACjC5B,KAAA,CAACxB,SAAS;UAAAoC,QAAA,gBACThB,IAAA,CAACQ,YAAY;YACZC,SAAS,EAAGA,SAAW;YACvBC,MAAM,EAAGA,MAAQ;YACjBC,KAAK,EAAGxB,EAAE,CAAE,aAAc;UAAG,CAC7B,CAAC,eACFa,IAAA,CAACnB,QAAQ;YAACyG,OAAO,EAAGV,aAAe;YAAA5D,QAAA,EAChC7B,EAAE,CAAE,cAAe;UAAC,CACb,CAAC;QAAA,CACD,CACX,eACDa,IAAA,CAACL,yBAAyB,CAACuF,IAAI;UAC9BC,SAAS,EAAG;YACXF,OAAO;YACPX,OAAO;YACPO,QAAQ;YACRlD,SAAS;YACTJ,KAAK;YACLE;UACD,CAAG;UACHhB,SAAS,EAAGA;QAAW,CACvB,CAAC,EACA,OAAOO,QAAQ,KAAK,UAAU,GAC7BA,QAAQ,CAAE;UAAEiE;QAAQ,CAAE,CAAC,GACvBhG,QAAQ,CAACsG,GAAG,CAAIC,KAAK,IACrBtG,YAAY,CAAEsG,KAAK,EAAE;UAAEP;QAAQ,CAAE,CACjC,CAAC,EACFV,SAAS,iBACVvE,IAAA,CAACpB,SAAS;UAAAoC,QAAA,eACThB,IAAA,CAACnB,QAAQ;YACRyG,OAAO,EAAGhG,IAAI,CACb2F,OAAO,EACPN,QAAQ,EACRlB,0BACD,CAAG;YACH7C,QAAQ,EAAGmC,SAAS,CAACG,MAAQ;YAAAlC,QAAA,EAE3B7B,EAAE,CAAE,QAAS;UAAC,CACP;QAAC,CACD,CACX;MAAA,CACA;IACF,CACY;EACd,CACY,CAAC;AAEjB;AAEA,eAAe8B,qBAAqB","ignoreList":[]}