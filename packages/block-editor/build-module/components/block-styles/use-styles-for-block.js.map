{"version":3,"names":["useDispatch","useSelect","cloneBlock","getBlockType","getBlockFromExample","store","blocksStore","useMemo","getActiveStyle","getRenderedStyles","replaceActiveStyle","blockEditorStore","useGenericPreviewBlock","block","type","example","blockName","name","attributes","innerBlocks","useStylesForBlocks","clientId","onSwitch","selector","select","getBlock","blockType","getBlockStyles","styles","className","updateBlockAttributes","stylesToRender","activeStyle","genericPreviewBlock","onSelect","style","styleClassName"],"sources":["@wordpress/block-editor/src/components/block-styles/use-styles-for-block.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\nimport {\r\n\tcloneBlock,\r\n\tgetBlockType,\r\n\tgetBlockFromExample,\r\n\tstore as blocksStore,\r\n} from '@wordpress/blocks';\r\nimport { useMemo } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { getActiveStyle, getRenderedStyles, replaceActiveStyle } from './utils';\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\n/**\r\n *\r\n * @param {WPBlock}     block Block object.\r\n * @param {WPBlockType} type  Block type settings.\r\n * @return {WPBlock}          A generic block ready for styles preview.\r\n */\r\nfunction useGenericPreviewBlock( block, type ) {\r\n\treturn useMemo( () => {\r\n\t\tconst example = type?.example;\r\n\t\tconst blockName = type?.name;\r\n\r\n\t\tif ( example && blockName ) {\r\n\t\t\treturn getBlockFromExample( blockName, {\r\n\t\t\t\tattributes: example.attributes,\r\n\t\t\t\tinnerBlocks: example.innerBlocks,\r\n\t\t\t} );\r\n\t\t}\r\n\r\n\t\tif ( block ) {\r\n\t\t\treturn cloneBlock( block );\r\n\t\t}\r\n\t}, [ type?.example ? block?.name : block, type ] );\r\n}\r\n\r\n/**\r\n * @typedef useStylesForBlocksArguments\r\n * @property {string}     clientId Block client ID.\r\n * @property {() => void} onSwitch Block style switch callback function.\r\n */\r\n\r\n/**\r\n *\r\n * @param {useStylesForBlocksArguments} useStylesForBlocks arguments.\r\n * @return {Object}                                         Results of the select methods.\r\n */\r\nexport default function useStylesForBlocks( { clientId, onSwitch } ) {\r\n\tconst selector = ( select ) => {\r\n\t\tconst { getBlock } = select( blockEditorStore );\r\n\t\tconst block = getBlock( clientId );\r\n\r\n\t\tif ( ! block ) {\r\n\t\t\treturn {};\r\n\t\t}\r\n\t\tconst blockType = getBlockType( block.name );\r\n\t\tconst { getBlockStyles } = select( blocksStore );\r\n\r\n\t\treturn {\r\n\t\t\tblock,\r\n\t\t\tblockType,\r\n\t\t\tstyles: getBlockStyles( block.name ),\r\n\t\t\tclassName: block.attributes.className || '',\r\n\t\t};\r\n\t};\r\n\tconst { styles, block, blockType, className } = useSelect( selector, [\r\n\t\tclientId,\r\n\t] );\r\n\tconst { updateBlockAttributes } = useDispatch( blockEditorStore );\r\n\tconst stylesToRender = getRenderedStyles( styles );\r\n\tconst activeStyle = getActiveStyle( stylesToRender, className );\r\n\tconst genericPreviewBlock = useGenericPreviewBlock( block, blockType );\r\n\r\n\tconst onSelect = ( style ) => {\r\n\t\tconst styleClassName = replaceActiveStyle(\r\n\t\t\tclassName,\r\n\t\t\tactiveStyle,\r\n\t\t\tstyle\r\n\t\t);\r\n\t\tupdateBlockAttributes( clientId, {\r\n\t\t\tclassName: styleClassName,\r\n\t\t} );\r\n\t\tonSwitch();\r\n\t};\r\n\r\n\treturn {\r\n\t\tonSelect,\r\n\t\tstylesToRender,\r\n\t\tactiveStyle,\r\n\t\tgenericPreviewBlock,\r\n\t\tclassName,\r\n\t};\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,WAAW,EAAEC,SAAS,QAAQ,iBAAiB;AACxD,SACCC,UAAU,EACVC,YAAY,EACZC,mBAAmB,EACnBC,KAAK,IAAIC,WAAW,QACd,mBAAmB;AAC1B,SAASC,OAAO,QAAQ,oBAAoB;;AAE5C;AACA;AACA;AACA,SAASC,cAAc,EAAEC,iBAAiB,EAAEC,kBAAkB,QAAQ,SAAS;AAC/E,SAASL,KAAK,IAAIM,gBAAgB,QAAQ,aAAa;;AAEvD;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,sBAAsBA,CAAEC,KAAK,EAAEC,IAAI,EAAG;EAC9C,OAAOP,OAAO,CAAE,MAAM;IACrB,MAAMQ,OAAO,GAAGD,IAAI,EAAEC,OAAO;IAC7B,MAAMC,SAAS,GAAGF,IAAI,EAAEG,IAAI;IAE5B,IAAKF,OAAO,IAAIC,SAAS,EAAG;MAC3B,OAAOZ,mBAAmB,CAAEY,SAAS,EAAE;QACtCE,UAAU,EAAEH,OAAO,CAACG,UAAU;QAC9BC,WAAW,EAAEJ,OAAO,CAACI;MACtB,CAAE,CAAC;IACJ;IAEA,IAAKN,KAAK,EAAG;MACZ,OAAOX,UAAU,CAAEW,KAAM,CAAC;IAC3B;EACD,CAAC,EAAE,CAAEC,IAAI,EAAEC,OAAO,GAAGF,KAAK,EAAEI,IAAI,GAAGJ,KAAK,EAAEC,IAAI,CAAG,CAAC;AACnD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,SAASM,kBAAkBA,CAAE;EAAEC,QAAQ;EAAEC;AAAS,CAAC,EAAG;EACpE,MAAMC,QAAQ,GAAKC,MAAM,IAAM;IAC9B,MAAM;MAAEC;IAAS,CAAC,GAAGD,MAAM,CAAEb,gBAAiB,CAAC;IAC/C,MAAME,KAAK,GAAGY,QAAQ,CAAEJ,QAAS,CAAC;IAElC,IAAK,CAAER,KAAK,EAAG;MACd,OAAO,CAAC,CAAC;IACV;IACA,MAAMa,SAAS,GAAGvB,YAAY,CAAEU,KAAK,CAACI,IAAK,CAAC;IAC5C,MAAM;MAAEU;IAAe,CAAC,GAAGH,MAAM,CAAElB,WAAY,CAAC;IAEhD,OAAO;MACNO,KAAK;MACLa,SAAS;MACTE,MAAM,EAAED,cAAc,CAAEd,KAAK,CAACI,IAAK,CAAC;MACpCY,SAAS,EAAEhB,KAAK,CAACK,UAAU,CAACW,SAAS,IAAI;IAC1C,CAAC;EACF,CAAC;EACD,MAAM;IAAED,MAAM;IAAEf,KAAK;IAAEa,SAAS;IAAEG;EAAU,CAAC,GAAG5B,SAAS,CAAEsB,QAAQ,EAAE,CACpEF,QAAQ,CACP,CAAC;EACH,MAAM;IAAES;EAAsB,CAAC,GAAG9B,WAAW,CAAEW,gBAAiB,CAAC;EACjE,MAAMoB,cAAc,GAAGtB,iBAAiB,CAAEmB,MAAO,CAAC;EAClD,MAAMI,WAAW,GAAGxB,cAAc,CAAEuB,cAAc,EAAEF,SAAU,CAAC;EAC/D,MAAMI,mBAAmB,GAAGrB,sBAAsB,CAAEC,KAAK,EAAEa,SAAU,CAAC;EAEtE,MAAMQ,QAAQ,GAAKC,KAAK,IAAM;IAC7B,MAAMC,cAAc,GAAG1B,kBAAkB,CACxCmB,SAAS,EACTG,WAAW,EACXG,KACD,CAAC;IACDL,qBAAqB,CAAET,QAAQ,EAAE;MAChCQ,SAAS,EAAEO;IACZ,CAAE,CAAC;IACHd,QAAQ,CAAC,CAAC;EACX,CAAC;EAED,OAAO;IACNY,QAAQ;IACRH,cAAc;IACdC,WAAW;IACXC,mBAAmB;IACnBJ;EACD,CAAC;AACF","ignoreList":[]}