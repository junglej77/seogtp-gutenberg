{"version":3,"names":["findNodeHandle","Platform","__","sprintf","switchToBlockType","Picker","useDispatch","store","noticesStore","blockEditorStore","jsx","_jsx","BlockTransformationsMenu","anchorNodeRef","blockTitle","pickerRef","possibleTransformations","selectedBlock","selectedBlockClientId","replaceBlocks","createSuccessNotice","pickerOptions","_selectedBlock$name","selectedBlockName","name","blocksThatSplitWhenTransformed","map","item","label","length","includes","id","title","value","getAnchor","undefined","onPickerSelect","selectedItem","find","successNotice","testID","ref","options","onChange","hideCancelButton","OS","leftAlign"],"sources":["@wordpress/block-editor/src/components/block-switcher/block-transformations-menu.native.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport { findNodeHandle, Platform } from 'react-native';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { switchToBlockType } from '@wordpress/blocks';\r\nimport { Picker } from '@wordpress/components';\r\nimport { useDispatch } from '@wordpress/data';\r\nimport { store as noticesStore } from '@wordpress/notices';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nconst BlockTransformationsMenu = ( {\r\n\tanchorNodeRef,\r\n\tblockTitle,\r\n\tpickerRef,\r\n\tpossibleTransformations,\r\n\tselectedBlock,\r\n\tselectedBlockClientId,\r\n} ) => {\r\n\tconst { replaceBlocks } = useDispatch( blockEditorStore );\r\n\tconst { createSuccessNotice } = useDispatch( noticesStore );\r\n\r\n\tconst pickerOptions = () => {\r\n\t\tconst selectedBlockName = selectedBlock?.name ?? '';\r\n\t\tconst blocksThatSplitWhenTransformed = {\r\n\t\t\t'core/list': [ 'core/paragraph', 'core/heading' ],\r\n\t\t\t'core/quote': [ 'core/paragraph' ],\r\n\t\t\t'core/pullquote': [ 'core/paragraph' ],\r\n\t\t};\r\n\r\n\t\treturn possibleTransformations.map( ( item ) => {\r\n\t\t\tconst label =\r\n\t\t\t\tselectedBlockName.length &&\r\n\t\t\t\tblocksThatSplitWhenTransformed[ selectedBlockName ] &&\r\n\t\t\t\tblocksThatSplitWhenTransformed[ selectedBlockName ].includes(\r\n\t\t\t\t\titem.id\r\n\t\t\t\t)\r\n\t\t\t\t\t? `${ item.title } blocks`\r\n\t\t\t\t\t: item.title;\r\n\t\t\treturn {\r\n\t\t\t\tlabel,\r\n\t\t\t\tvalue: item.id,\r\n\t\t\t};\r\n\t\t} );\r\n\t};\r\n\r\n\tconst getAnchor = () =>\r\n\t\tanchorNodeRef ? findNodeHandle( anchorNodeRef ) : undefined;\r\n\r\n\tfunction onPickerSelect( value ) {\r\n\t\treplaceBlocks(\r\n\t\t\tselectedBlockClientId,\r\n\t\t\tswitchToBlockType( selectedBlock, value )\r\n\t\t);\r\n\r\n\t\tconst selectedItem = pickerOptions().find(\r\n\t\t\t( item ) => item.value === value\r\n\t\t);\r\n\t\tconst successNotice = sprintf(\r\n\t\t\t/* translators: 1: From block title, e.g. Paragraph. 2: To block title, e.g. Header. */\r\n\t\t\t__( '%1$s transformed to %2$s' ),\r\n\t\t\tblockTitle,\r\n\t\t\tselectedItem.label\r\n\t\t);\r\n\t\tcreateSuccessNotice( successNotice );\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Picker\r\n\t\t\ttestID=\"block-transformations-menu\"\r\n\t\t\tref={ pickerRef }\r\n\t\t\toptions={ pickerOptions() }\r\n\t\t\tonChange={ onPickerSelect }\r\n\t\t\thideCancelButton={ Platform.OS !== 'ios' }\r\n\t\t\tleftAlign\r\n\t\t\tgetAnchor={ getAnchor }\r\n\t\t\t// translators: %s: block title e.g: \"Paragraph\".\r\n\t\t\ttitle={ sprintf( __( 'Transform %s to' ), blockTitle ) }\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default BlockTransformationsMenu;\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,cAAc,EAAEC,QAAQ,QAAQ,cAAc;;AAEvD;AACA;AACA;AACA,SAASC,EAAE,EAAEC,OAAO,QAAQ,iBAAiB;AAC7C,SAASC,iBAAiB,QAAQ,mBAAmB;AACrD,SAASC,MAAM,QAAQ,uBAAuB;AAC9C,SAASC,WAAW,QAAQ,iBAAiB;AAC7C,SAASC,KAAK,IAAIC,YAAY,QAAQ,oBAAoB;;AAE1D;AACA;AACA;AACA,SAASD,KAAK,IAAIE,gBAAgB,QAAQ,aAAa;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAExD,MAAMC,wBAAwB,GAAGA,CAAE;EAClCC,aAAa;EACbC,UAAU;EACVC,SAAS;EACTC,uBAAuB;EACvBC,aAAa;EACbC;AACD,CAAC,KAAM;EACN,MAAM;IAAEC;EAAc,CAAC,GAAGb,WAAW,CAAEG,gBAAiB,CAAC;EACzD,MAAM;IAAEW;EAAoB,CAAC,GAAGd,WAAW,CAAEE,YAAa,CAAC;EAE3D,MAAMa,aAAa,GAAGA,CAAA,KAAM;IAAA,IAAAC,mBAAA;IAC3B,MAAMC,iBAAiB,IAAAD,mBAAA,GAAGL,aAAa,EAAEO,IAAI,cAAAF,mBAAA,cAAAA,mBAAA,GAAI,EAAE;IACnD,MAAMG,8BAA8B,GAAG;MACtC,WAAW,EAAE,CAAE,gBAAgB,EAAE,cAAc,CAAE;MACjD,YAAY,EAAE,CAAE,gBAAgB,CAAE;MAClC,gBAAgB,EAAE,CAAE,gBAAgB;IACrC,CAAC;IAED,OAAOT,uBAAuB,CAACU,GAAG,CAAIC,IAAI,IAAM;MAC/C,MAAMC,KAAK,GACVL,iBAAiB,CAACM,MAAM,IACxBJ,8BAA8B,CAAEF,iBAAiB,CAAE,IACnDE,8BAA8B,CAAEF,iBAAiB,CAAE,CAACO,QAAQ,CAC3DH,IAAI,CAACI,EACN,CAAC,GACG,GAAGJ,IAAI,CAACK,KAAO,SAAQ,GACxBL,IAAI,CAACK,KAAK;MACd,OAAO;QACNJ,KAAK;QACLK,KAAK,EAAEN,IAAI,CAACI;MACb,CAAC;IACF,CAAE,CAAC;EACJ,CAAC;EAED,MAAMG,SAAS,GAAGA,CAAA,KACjBrB,aAAa,GAAGb,cAAc,CAAEa,aAAc,CAAC,GAAGsB,SAAS;EAE5D,SAASC,cAAcA,CAAEH,KAAK,EAAG;IAChCd,aAAa,CACZD,qBAAqB,EACrBd,iBAAiB,CAAEa,aAAa,EAAEgB,KAAM,CACzC,CAAC;IAED,MAAMI,YAAY,GAAGhB,aAAa,CAAC,CAAC,CAACiB,IAAI,CACtCX,IAAI,IAAMA,IAAI,CAACM,KAAK,KAAKA,KAC5B,CAAC;IACD,MAAMM,aAAa,GAAGpC,OAAO,EAC5B;IACAD,EAAE,CAAE,0BAA2B,CAAC,EAChCY,UAAU,EACVuB,YAAY,CAACT,KACd,CAAC;IACDR,mBAAmB,CAAEmB,aAAc,CAAC;EACrC;EAEA,oBACC5B,IAAA,CAACN,MAAM;IACNmC,MAAM,EAAC,4BAA4B;IACnCC,GAAG,EAAG1B,SAAW;IACjB2B,OAAO,EAAGrB,aAAa,CAAC,CAAG;IAC3BsB,QAAQ,EAAGP,cAAgB;IAC3BQ,gBAAgB,EAAG3C,QAAQ,CAAC4C,EAAE,KAAK,KAAO;IAC1CC,SAAS;IACTZ,SAAS,EAAGA;IACZ;IAAA;IACAF,KAAK,EAAG7B,OAAO,CAAED,EAAE,CAAE,iBAAkB,CAAC,EAAEY,UAAW;EAAG,CACxD,CAAC;AAEJ,CAAC;AAED,eAAeF,wBAAwB","ignoreList":[]}