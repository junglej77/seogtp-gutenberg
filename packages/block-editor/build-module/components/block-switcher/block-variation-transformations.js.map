{"version":3,"names":["MenuItem","getBlockMenuDefaultClassName","cloneBlock","store","blocksStore","useSelect","useState","useMemo","blockEditorStore","BlockIcon","PreviewBlockPopover","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","EMPTY_OBJECT","useBlockVariationTransforms","clientIds","blocks","activeBlockVariation","blockVariationTransformations","select","getBlockAttributes","canRemoveBlocks","getActiveBlockVariation","getBlockVariations","canRemove","length","firstBlock","name","clientId","transformations","filter","BlockVariationTransformations","onSelect","hoveredTransformItemName","setHoveredTransformItemName","children","find","attributes","map","item","BlockVariationTranformationItem","icon","title","className","onClick","event","preventDefault","onMouseLeave","onMouseEnter","showColors"],"sources":["@wordpress/block-editor/src/components/block-switcher/block-variation-transformations.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { MenuItem } from '@wordpress/components';\r\nimport {\r\n\tgetBlockMenuDefaultClassName,\r\n\tcloneBlock,\r\n\tstore as blocksStore,\r\n} from '@wordpress/blocks';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { useState, useMemo } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\nimport BlockIcon from '../block-icon';\r\nimport PreviewBlockPopover from './preview-block-popover';\r\n\r\nconst EMPTY_OBJECT = {};\r\n\r\nexport function useBlockVariationTransforms( { clientIds, blocks } ) {\r\n\tconst { activeBlockVariation, blockVariationTransformations } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst { getBlockAttributes, canRemoveBlocks } =\r\n\t\t\t\tselect( blockEditorStore );\r\n\t\t\tconst { getActiveBlockVariation, getBlockVariations } =\r\n\t\t\t\tselect( blocksStore );\r\n\r\n\t\t\tconst canRemove = canRemoveBlocks( clientIds );\r\n\t\t\t// Only handle single selected blocks for now.\r\n\t\t\tif ( blocks.length !== 1 || ! canRemove ) {\r\n\t\t\t\treturn EMPTY_OBJECT;\r\n\t\t\t}\r\n\t\t\tconst [ firstBlock ] = blocks;\r\n\t\t\treturn {\r\n\t\t\t\tblockVariationTransformations: getBlockVariations(\r\n\t\t\t\t\tfirstBlock.name,\r\n\t\t\t\t\t'transform'\r\n\t\t\t\t),\r\n\t\t\t\tactiveBlockVariation: getActiveBlockVariation(\r\n\t\t\t\t\tfirstBlock.name,\r\n\t\t\t\t\tgetBlockAttributes( firstBlock.clientId )\r\n\t\t\t\t),\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ clientIds, blocks ]\r\n\t);\r\n\tconst transformations = useMemo( () => {\r\n\t\treturn blockVariationTransformations?.filter(\r\n\t\t\t( { name } ) => name !== activeBlockVariation?.name\r\n\t\t);\r\n\t}, [ blockVariationTransformations, activeBlockVariation ] );\r\n\treturn transformations;\r\n}\r\n\r\nconst BlockVariationTransformations = ( {\r\n\ttransformations,\r\n\tonSelect,\r\n\tblocks,\r\n} ) => {\r\n\tconst [ hoveredTransformItemName, setHoveredTransformItemName ] =\r\n\t\tuseState();\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ hoveredTransformItemName && (\r\n\t\t\t\t<PreviewBlockPopover\r\n\t\t\t\t\tblocks={ cloneBlock(\r\n\t\t\t\t\t\tblocks[ 0 ],\r\n\t\t\t\t\t\ttransformations.find(\r\n\t\t\t\t\t\t\t( { name } ) => name === hoveredTransformItemName\r\n\t\t\t\t\t\t).attributes\r\n\t\t\t\t\t) }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t\t{ transformations?.map( ( item ) => (\r\n\t\t\t\t<BlockVariationTranformationItem\r\n\t\t\t\t\tkey={ item.name }\r\n\t\t\t\t\titem={ item }\r\n\t\t\t\t\tonSelect={ onSelect }\r\n\t\t\t\t\tsetHoveredTransformItemName={ setHoveredTransformItemName }\r\n\t\t\t\t/>\r\n\t\t\t) ) }\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nfunction BlockVariationTranformationItem( {\r\n\titem,\r\n\tonSelect,\r\n\tsetHoveredTransformItemName,\r\n} ) {\r\n\tconst { name, icon, title } = item;\r\n\treturn (\r\n\t\t<MenuItem\r\n\t\t\tclassName={ getBlockMenuDefaultClassName( name ) }\r\n\t\t\tonClick={ ( event ) => {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tonSelect( name );\r\n\t\t\t} }\r\n\t\t\tonMouseLeave={ () => setHoveredTransformItemName( null ) }\r\n\t\t\tonMouseEnter={ () => setHoveredTransformItemName( name ) }\r\n\t\t>\r\n\t\t\t<BlockIcon icon={ icon } showColors />\r\n\t\t\t{ title }\r\n\t\t</MenuItem>\r\n\t);\r\n}\r\n\r\nexport default BlockVariationTransformations;\r\n"],"mappings":"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","ignoreList":[]}