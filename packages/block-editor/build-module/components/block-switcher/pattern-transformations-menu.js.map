{"version":3,"names":["__","useState","useInstanceId","useViewportMatch","chevronRight","Composite","MenuGroup","MenuItem","Popover","VisuallyHidden","BlockPreview","useTransformedPatterns","jsx","_jsx","jsxs","_jsxs","PatternTransformationsMenu","blocks","patterns","statePatterns","onSelect","showTransforms","setShowTransforms","length","className","children","PreviewPatternsPopover","onClick","event","preventDefault","icon","isMobile","placement","offset","BlockPatternsList","role","map","pattern","BlockPattern","name","baseClassName","descriptionId","Item","render","title","description","undefined","transformedBlocks","viewportWidth","id"],"sources":["@wordpress/block-editor/src/components/block-switcher/pattern-transformations-menu.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useState } from '@wordpress/element';\r\nimport { useInstanceId, useViewportMatch } from '@wordpress/compose';\r\nimport { chevronRight } from '@wordpress/icons';\r\n\r\nimport {\r\n\tComposite,\r\n\tMenuGroup,\r\n\tMenuItem,\r\n\tPopover,\r\n\tVisuallyHidden,\r\n} from '@wordpress/components';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockPreview from '../block-preview';\r\nimport useTransformedPatterns from './use-transformed-patterns';\r\n\r\nfunction PatternTransformationsMenu( {\r\n\tblocks,\r\n\tpatterns: statePatterns,\r\n\tonSelect,\r\n} ) {\r\n\tconst [ showTransforms, setShowTransforms ] = useState( false );\r\n\tconst patterns = useTransformedPatterns( statePatterns, blocks );\r\n\r\n\tif ( ! patterns.length ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<MenuGroup className=\"block-editor-block-switcher__pattern__transforms__menugroup\">\r\n\t\t\t{ showTransforms && (\r\n\t\t\t\t<PreviewPatternsPopover\r\n\t\t\t\t\tpatterns={ patterns }\r\n\t\t\t\t\tonSelect={ onSelect }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t\t<MenuItem\r\n\t\t\t\tonClick={ ( event ) => {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tsetShowTransforms( ! showTransforms );\r\n\t\t\t\t} }\r\n\t\t\t\ticon={ chevronRight }\r\n\t\t\t>\r\n\t\t\t\t{ __( 'Patterns' ) }\r\n\t\t\t</MenuItem>\r\n\t\t</MenuGroup>\r\n\t);\r\n}\r\n\r\nfunction PreviewPatternsPopover( { patterns, onSelect } ) {\r\n\tconst isMobile = useViewportMatch( 'medium', '<' );\r\n\r\n\treturn (\r\n\t\t<div className=\"block-editor-block-switcher__popover-preview-container\">\r\n\t\t\t<Popover\r\n\t\t\t\tclassName=\"block-editor-block-switcher__popover-preview\"\r\n\t\t\t\tplacement={ isMobile ? 'bottom' : 'right-start' }\r\n\t\t\t\toffset={ 16 }\r\n\t\t\t>\r\n\t\t\t\t<div className=\"block-editor-block-switcher__preview is-pattern-list-preview\">\r\n\t\t\t\t\t<BlockPatternsList\r\n\t\t\t\t\t\tpatterns={ patterns }\r\n\t\t\t\t\t\tonSelect={ onSelect }\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</Popover>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction BlockPatternsList( { patterns, onSelect } ) {\r\n\treturn (\r\n\t\t<Composite\r\n\t\t\trole=\"listbox\"\r\n\t\t\tclassName=\"block-editor-block-switcher__preview-patterns-container\"\r\n\t\t\taria-label={ __( 'Patterns list' ) }\r\n\t\t>\r\n\t\t\t{ patterns.map( ( pattern ) => (\r\n\t\t\t\t<BlockPattern\r\n\t\t\t\t\tkey={ pattern.name }\r\n\t\t\t\t\tpattern={ pattern }\r\n\t\t\t\t\tonSelect={ onSelect }\r\n\t\t\t\t/>\r\n\t\t\t) ) }\r\n\t\t</Composite>\r\n\t);\r\n}\r\n\r\nfunction BlockPattern( { pattern, onSelect } ) {\r\n\t// TODO check pattern/preview width...\r\n\tconst baseClassName =\r\n\t\t'block-editor-block-switcher__preview-patterns-container';\r\n\tconst descriptionId = useInstanceId(\r\n\t\tBlockPattern,\r\n\t\t`${ baseClassName }-list__item-description`\r\n\t);\r\n\treturn (\r\n\t\t<div className={ `${ baseClassName }-list__list-item` }>\r\n\t\t\t<Composite.Item\r\n\t\t\t\trender={\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\trole=\"option\"\r\n\t\t\t\t\t\taria-label={ pattern.title }\r\n\t\t\t\t\t\taria-describedby={\r\n\t\t\t\t\t\t\tpattern.description ? descriptionId : undefined\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tclassName={ `${ baseClassName }-list__item` }\r\n\t\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t\tonClick={ () => onSelect( pattern.transformedBlocks ) }\r\n\t\t\t>\r\n\t\t\t\t<BlockPreview\r\n\t\t\t\t\tblocks={ pattern.transformedBlocks }\r\n\t\t\t\t\tviewportWidth={ pattern.viewportWidth || 500 }\r\n\t\t\t\t/>\r\n\t\t\t\t<div className={ `${ baseClassName }-list__item-title` }>\r\n\t\t\t\t\t{ pattern.title }\r\n\t\t\t\t</div>\r\n\t\t\t</Composite.Item>\r\n\t\t\t{ !! pattern.description && (\r\n\t\t\t\t<VisuallyHidden id={ descriptionId }>\r\n\t\t\t\t\t{ pattern.description }\r\n\t\t\t\t</VisuallyHidden>\r\n\t\t\t) }\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default PatternTransformationsMenu;\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,EAAE,QAAQ,iBAAiB;AACpC,SAASC,QAAQ,QAAQ,oBAAoB;AAC7C,SAASC,aAAa,EAAEC,gBAAgB,QAAQ,oBAAoB;AACpE,SAASC,YAAY,QAAQ,kBAAkB;AAE/C,SACCC,SAAS,EACTC,SAAS,EACTC,QAAQ,EACRC,OAAO,EACPC,cAAc,QACR,uBAAuB;;AAE9B;AACA;AACA;AACA,OAAOC,YAAY,MAAM,kBAAkB;AAC3C,OAAOC,sBAAsB,MAAM,4BAA4B;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAEhE,SAASC,0BAA0BA,CAAE;EACpCC,MAAM;EACNC,QAAQ,EAAEC,aAAa;EACvBC;AACD,CAAC,EAAG;EACH,MAAM,CAAEC,cAAc,EAAEC,iBAAiB,CAAE,GAAGrB,QAAQ,CAAE,KAAM,CAAC;EAC/D,MAAMiB,QAAQ,GAAGP,sBAAsB,CAAEQ,aAAa,EAAEF,MAAO,CAAC;EAEhE,IAAK,CAAEC,QAAQ,CAACK,MAAM,EAAG;IACxB,OAAO,IAAI;EACZ;EAEA,oBACCR,KAAA,CAACT,SAAS;IAACkB,SAAS,EAAC,6DAA6D;IAAAC,QAAA,GAC/EJ,cAAc,iBACfR,IAAA,CAACa,sBAAsB;MACtBR,QAAQ,EAAGA,QAAU;MACrBE,QAAQ,EAAGA;IAAU,CACrB,CACD,eACDP,IAAA,CAACN,QAAQ;MACRoB,OAAO,EAAKC,KAAK,IAAM;QACtBA,KAAK,CAACC,cAAc,CAAC,CAAC;QACtBP,iBAAiB,CAAE,CAAED,cAAe,CAAC;MACtC,CAAG;MACHS,IAAI,EAAG1B,YAAc;MAAAqB,QAAA,EAEnBzB,EAAE,CAAE,UAAW;IAAC,CACT,CAAC;EAAA,CACD,CAAC;AAEd;AAEA,SAAS0B,sBAAsBA,CAAE;EAAER,QAAQ;EAAEE;AAAS,CAAC,EAAG;EACzD,MAAMW,QAAQ,GAAG5B,gBAAgB,CAAE,QAAQ,EAAE,GAAI,CAAC;EAElD,oBACCU,IAAA;IAAKW,SAAS,EAAC,wDAAwD;IAAAC,QAAA,eACtEZ,IAAA,CAACL,OAAO;MACPgB,SAAS,EAAC,8CAA8C;MACxDQ,SAAS,EAAGD,QAAQ,GAAG,QAAQ,GAAG,aAAe;MACjDE,MAAM,EAAG,EAAI;MAAAR,QAAA,eAEbZ,IAAA;QAAKW,SAAS,EAAC,8DAA8D;QAAAC,QAAA,eAC5EZ,IAAA,CAACqB,iBAAiB;UACjBhB,QAAQ,EAAGA,QAAU;UACrBE,QAAQ,EAAGA;QAAU,CACrB;MAAC,CACE;IAAC,CACE;EAAC,CACN,CAAC;AAER;AAEA,SAASc,iBAAiBA,CAAE;EAAEhB,QAAQ;EAAEE;AAAS,CAAC,EAAG;EACpD,oBACCP,IAAA,CAACR,SAAS;IACT8B,IAAI,EAAC,SAAS;IACdX,SAAS,EAAC,yDAAyD;IACnE,cAAaxB,EAAE,CAAE,eAAgB,CAAG;IAAAyB,QAAA,EAElCP,QAAQ,CAACkB,GAAG,CAAIC,OAAO,iBACxBxB,IAAA,CAACyB,YAAY;MAEZD,OAAO,EAAGA,OAAS;MACnBjB,QAAQ,EAAGA;IAAU,GAFfiB,OAAO,CAACE,IAGd,CACA;EAAC,CACO,CAAC;AAEd;AAEA,SAASD,YAAYA,CAAE;EAAED,OAAO;EAAEjB;AAAS,CAAC,EAAG;EAC9C;EACA,MAAMoB,aAAa,GAClB,yDAAyD;EAC1D,MAAMC,aAAa,GAAGvC,aAAa,CAClCoC,YAAY,EACX,GAAGE,aAAe,yBACpB,CAAC;EACD,oBACCzB,KAAA;IAAKS,SAAS,EAAI,GAAGgB,aAAe,kBAAmB;IAAAf,QAAA,gBACtDV,KAAA,CAACV,SAAS,CAACqC,IAAI;MACdC,MAAM,eACL9B,IAAA;QACCsB,IAAI,EAAC,QAAQ;QACb,cAAaE,OAAO,CAACO,KAAO;QAC5B,oBACCP,OAAO,CAACQ,WAAW,GAAGJ,aAAa,GAAGK,SACtC;QACDtB,SAAS,EAAI,GAAGgB,aAAe;MAAc,CAC7C,CACD;MACDb,OAAO,EAAGA,CAAA,KAAMP,QAAQ,CAAEiB,OAAO,CAACU,iBAAkB,CAAG;MAAAtB,QAAA,gBAEvDZ,IAAA,CAACH,YAAY;QACZO,MAAM,EAAGoB,OAAO,CAACU,iBAAmB;QACpCC,aAAa,EAAGX,OAAO,CAACW,aAAa,IAAI;MAAK,CAC9C,CAAC,eACFnC,IAAA;QAAKW,SAAS,EAAI,GAAGgB,aAAe,mBAAoB;QAAAf,QAAA,EACrDY,OAAO,CAACO;MAAK,CACX,CAAC;IAAA,CACS,CAAC,EACf,CAAC,CAAEP,OAAO,CAACQ,WAAW,iBACvBhC,IAAA,CAACJ,cAAc;MAACwC,EAAE,EAAGR,aAAe;MAAAhB,QAAA,EACjCY,OAAO,CAACQ;IAAW,CACN,CAChB;EAAA,CACG,CAAC;AAER;AAEA,eAAe7B,0BAA0B","ignoreList":[]}