{"version":3,"names":["useSelect","__experimentalGetBlockLabel","getBlockLabel","store","blocksStore","blockEditorStore","useBlockDisplayTitle","clientId","maximumLength","context","blockTitle","select","getBlockName","getBlockAttributes","getBlockType","getActiveBlockVariation","blockName","blockType","attributes","label","title","match","length","omission","slice"],"sources":["@wordpress/block-editor/src/components/block-title/use-block-display-title.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect } from '@wordpress/data';\r\nimport {\r\n\t__experimentalGetBlockLabel as getBlockLabel,\r\n\tstore as blocksStore,\r\n} from '@wordpress/blocks';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\n/**\r\n * Returns the block's configured title as a string, or empty if the title\r\n * cannot be determined.\r\n *\r\n * @example\r\n *\r\n * ```js\r\n * useBlockDisplayTitle( { clientId: 'afd1cb17-2c08-4e7a-91be-007ba7ddc3a1', maximumLength: 17 } );\r\n * ```\r\n *\r\n * @param {Object}           props\r\n * @param {string}           props.clientId      Client ID of block.\r\n * @param {number|undefined} props.maximumLength The maximum length that the block title string may be before truncated.\r\n * @param {string|undefined} props.context       The context to pass to `getBlockLabel`.\r\n * @return {?string} Block title.\r\n */\r\nexport default function useBlockDisplayTitle( {\r\n\tclientId,\r\n\tmaximumLength,\r\n\tcontext,\r\n} ) {\r\n\tconst blockTitle = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tif ( ! clientId ) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tconst { getBlockName, getBlockAttributes } =\r\n\t\t\t\tselect( blockEditorStore );\r\n\t\t\tconst { getBlockType, getActiveBlockVariation } =\r\n\t\t\t\tselect( blocksStore );\r\n\r\n\t\t\tconst blockName = getBlockName( clientId );\r\n\t\t\tconst blockType = getBlockType( blockName );\r\n\t\t\tif ( ! blockType ) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tconst attributes = getBlockAttributes( clientId );\r\n\t\t\tconst label = getBlockLabel( blockType, attributes, context );\r\n\t\t\t// If the label is defined we prioritize it over a possible block variation title match.\r\n\t\t\tif ( label !== blockType.title ) {\r\n\t\t\t\treturn label;\r\n\t\t\t}\r\n\r\n\t\t\tconst match = getActiveBlockVariation( blockName, attributes );\r\n\t\t\t// Label will fallback to the title if no label is defined for the current label context.\r\n\t\t\treturn match?.title || blockType.title;\r\n\t\t},\r\n\t\t[ clientId, context ]\r\n\t);\r\n\r\n\tif ( ! blockTitle ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tif (\r\n\t\tmaximumLength &&\r\n\t\tmaximumLength > 0 &&\r\n\t\tblockTitle.length > maximumLength\r\n\t) {\r\n\t\tconst omission = '...';\r\n\t\treturn (\r\n\t\t\tblockTitle.slice( 0, maximumLength - omission.length ) + omission\r\n\t\t);\r\n\t}\r\n\r\n\treturn blockTitle;\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,SAAS,QAAQ,iBAAiB;AAC3C,SACCC,2BAA2B,IAAIC,aAAa,EAC5CC,KAAK,IAAIC,WAAW,QACd,mBAAmB;;AAE1B;AACA;AACA;AACA,SAASD,KAAK,IAAIE,gBAAgB,QAAQ,aAAa;;AAEvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAASC,oBAAoBA,CAAE;EAC7CC,QAAQ;EACRC,aAAa;EACbC;AACD,CAAC,EAAG;EACH,MAAMC,UAAU,GAAGV,SAAS,CACzBW,MAAM,IAAM;IACb,IAAK,CAAEJ,QAAQ,EAAG;MACjB,OAAO,IAAI;IACZ;IAEA,MAAM;MAAEK,YAAY;MAAEC;IAAmB,CAAC,GACzCF,MAAM,CAAEN,gBAAiB,CAAC;IAC3B,MAAM;MAAES,YAAY;MAAEC;IAAwB,CAAC,GAC9CJ,MAAM,CAAEP,WAAY,CAAC;IAEtB,MAAMY,SAAS,GAAGJ,YAAY,CAAEL,QAAS,CAAC;IAC1C,MAAMU,SAAS,GAAGH,YAAY,CAAEE,SAAU,CAAC;IAC3C,IAAK,CAAEC,SAAS,EAAG;MAClB,OAAO,IAAI;IACZ;IAEA,MAAMC,UAAU,GAAGL,kBAAkB,CAAEN,QAAS,CAAC;IACjD,MAAMY,KAAK,GAAGjB,aAAa,CAAEe,SAAS,EAAEC,UAAU,EAAET,OAAQ,CAAC;IAC7D;IACA,IAAKU,KAAK,KAAKF,SAAS,CAACG,KAAK,EAAG;MAChC,OAAOD,KAAK;IACb;IAEA,MAAME,KAAK,GAAGN,uBAAuB,CAAEC,SAAS,EAAEE,UAAW,CAAC;IAC9D;IACA,OAAOG,KAAK,EAAED,KAAK,IAAIH,SAAS,CAACG,KAAK;EACvC,CAAC,EACD,CAAEb,QAAQ,EAAEE,OAAO,CACpB,CAAC;EAED,IAAK,CAAEC,UAAU,EAAG;IACnB,OAAO,IAAI;EACZ;EAEA,IACCF,aAAa,IACbA,aAAa,GAAG,CAAC,IACjBE,UAAU,CAACY,MAAM,GAAGd,aAAa,EAChC;IACD,MAAMe,QAAQ,GAAG,KAAK;IACtB,OACCb,UAAU,CAACc,KAAK,CAAE,CAAC,EAAEhB,aAAa,GAAGe,QAAQ,CAACD,MAAO,CAAC,GAAGC,QAAQ;EAEnE;EAEA,OAAOb,UAAU;AAClB","ignoreList":[]}