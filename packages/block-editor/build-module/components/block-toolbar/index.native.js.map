{"version":3,"names":["useSelect","useDispatch","useCallback","BlockActionsMenu","BlockControls","BlockMover","UngroupButton","BlockSettingsButton","store","blockEditorStore","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","REMOVE_EMPY_PARENT_BLOCKS","BlockToolbar","anchorNodeRef","rootClientId","blockClientId","isSelected","isValidAndVisual","isStackedHorizontally","parentBlockName","parentNumberOfInnerBlocks","select","getBlockListSettings","getBlockMode","getBlockName","getBlockCount","getBlockRootClientId","getSelectedBlockClientIds","isBlockValid","selectedBlockClientIds","selectedBlockClientId","blockRootClientId","blockListSettings","orientation","isBlockStackedHorizontally","parentName","numberOfInnerBlocks","length","removeBlock","onRemove","includes","children","Slot","fills","group","clientIds","clientId","onDelete"],"sources":["@wordpress/block-editor/src/components/block-toolbar/index.native.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { useCallback } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockActionsMenu from './block-toolbar-menu';\r\nimport BlockControls from '../block-controls';\r\nimport BlockMover from '../block-mover';\r\nimport UngroupButton from '../ungroup-button';\r\nimport { BlockSettingsButton } from '../block-settings';\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nconst REMOVE_EMPY_PARENT_BLOCKS = [\r\n\t'core/buttons',\r\n\t'core/columns',\r\n\t'core/social-links',\r\n];\r\n\r\nexport default function BlockToolbar( { anchorNodeRef } ) {\r\n\tconst {\r\n\t\trootClientId,\r\n\t\tblockClientId,\r\n\t\tisSelected,\r\n\t\tisValidAndVisual,\r\n\t\tisStackedHorizontally,\r\n\t\tparentBlockName,\r\n\t\tparentNumberOfInnerBlocks,\r\n\t} = useSelect( ( select ) => {\r\n\t\tconst {\r\n\t\t\tgetBlockListSettings,\r\n\t\t\tgetBlockMode,\r\n\t\t\tgetBlockName,\r\n\t\t\tgetBlockCount,\r\n\t\t\tgetBlockRootClientId,\r\n\t\t\tgetSelectedBlockClientIds,\r\n\t\t\tisBlockValid,\r\n\t\t} = select( blockEditorStore );\r\n\t\tconst selectedBlockClientIds = getSelectedBlockClientIds();\r\n\t\tconst selectedBlockClientId = selectedBlockClientIds[ 0 ];\r\n\t\tconst blockRootClientId = getBlockRootClientId( selectedBlockClientId );\r\n\t\tconst blockListSettings = getBlockListSettings( blockRootClientId );\r\n\t\tconst orientation = blockListSettings?.orientation;\r\n\t\tconst isBlockStackedHorizontally = orientation === 'horizontal';\r\n\t\tconst parentName = getBlockName( blockRootClientId );\r\n\t\tconst numberOfInnerBlocks = getBlockCount( blockRootClientId );\r\n\r\n\t\treturn {\r\n\t\t\trootClientId: blockRootClientId,\r\n\t\t\tblockClientId: selectedBlockClientId,\r\n\t\t\tisSelected: selectedBlockClientIds.length > 0,\r\n\t\t\tisStackedHorizontally: isBlockStackedHorizontally,\r\n\t\t\tparentBlockName: parentName,\r\n\t\t\tparentNumberOfInnerBlocks: numberOfInnerBlocks,\r\n\t\t\tisValidAndVisual:\r\n\t\t\t\tselectedBlockClientIds.length === 1\r\n\t\t\t\t\t? isBlockValid( selectedBlockClientIds[ 0 ] ) &&\r\n\t\t\t\t\t  getBlockMode( selectedBlockClientIds[ 0 ] ) === 'visual'\r\n\t\t\t\t\t: false,\r\n\t\t};\r\n\t}, [] );\r\n\r\n\tconst { removeBlock } = useDispatch( blockEditorStore );\r\n\tconst onRemove = useCallback( () => {\r\n\t\t// Temp: remove parent block for specific cases where they don't\r\n\t\t// have inner blocks, ideally we should match the behavior as in\r\n\t\t// the Web editor and show a placeholder instead of removing the parent.\r\n\t\tif (\r\n\t\t\tREMOVE_EMPY_PARENT_BLOCKS.includes( parentBlockName ) &&\r\n\t\t\tparentNumberOfInnerBlocks === 1\r\n\t\t) {\r\n\t\t\tremoveBlock( rootClientId );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tremoveBlock( blockClientId );\r\n\t}, [\r\n\t\tblockClientId,\r\n\t\tparentBlockName,\r\n\t\tparentNumberOfInnerBlocks,\r\n\t\tremoveBlock,\r\n\t\trootClientId,\r\n\t] );\r\n\r\n\tif ( ! isSelected ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ isValidAndVisual && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<BlockSettingsButton.Slot>\r\n\t\t\t\t\t\t{ /* Render only one settings icon even if we have more than one fill - need for hooks with controls. */ }\r\n\t\t\t\t\t\t{ ( fills = [ null ] ) => {\r\n\t\t\t\t\t\t\tif ( ! fills?.length > 0 ) {\r\n\t\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn fills[ 0 ];\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t</BlockSettingsButton.Slot>\r\n\t\t\t\t\t<BlockControls.Slot group=\"block\" />\r\n\t\t\t\t\t<BlockControls.Slot />\r\n\t\t\t\t\t<BlockControls.Slot group=\"inline\" />\r\n\t\t\t\t\t<BlockControls.Slot group=\"other\" />\r\n\t\t\t\t\t<UngroupButton />\r\n\r\n\t\t\t\t\t<BlockMover\r\n\t\t\t\t\t\tclientIds={ [ blockClientId ] }\r\n\t\t\t\t\t\tisStackedHorizontally={ isStackedHorizontally }\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<BlockActionsMenu\r\n\t\t\t\t\t\tclientId={ blockClientId }\r\n\t\t\t\t\t\tisStackedHorizontally={ isStackedHorizontally }\r\n\t\t\t\t\t\tonDelete={ onRemove }\r\n\t\t\t\t\t\tanchorNodeRef={ anchorNodeRef }\r\n\t\t\t\t\t/>\r\n\t\t\t\t</>\r\n\t\t\t) }\r\n\t\t</>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}