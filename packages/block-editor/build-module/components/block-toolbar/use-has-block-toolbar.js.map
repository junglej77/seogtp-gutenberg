{"version":3,"names":["useSelect","getBlockType","hasBlockSupport","store","blockEditorStore","useHasAnyBlockControls","useHasBlockToolbar","isToolbarEnabled","isDefaultEditingMode","select","getBlockEditingMode","getBlockName","getBlockSelectionStart","selectedBlockClientId","blockType","hasAnyBlockControls"],"sources":["@wordpress/block-editor/src/components/block-toolbar/use-has-block-toolbar.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect } from '@wordpress/data';\r\nimport { getBlockType, hasBlockSupport } from '@wordpress/blocks';\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\nimport { useHasAnyBlockControls } from '../block-controls/use-has-block-controls';\r\n\r\n/**\r\n * Returns true if the block toolbar should be shown.\r\n *\r\n * @return {boolean} Whether the block toolbar component will be rendered.\r\n */\r\nexport function useHasBlockToolbar() {\r\n\tconst { isToolbarEnabled, isDefaultEditingMode } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst {\r\n\t\t\t\tgetBlockEditingMode,\r\n\t\t\t\tgetBlockName,\r\n\t\t\t\tgetBlockSelectionStart,\r\n\t\t\t} = select( blockEditorStore );\r\n\r\n\t\t\t// we only care about the 1st selected block\r\n\t\t\t// for the toolbar, so we use getBlockSelectionStart\r\n\t\t\t// instead of getSelectedBlockClientIds\r\n\t\t\tconst selectedBlockClientId = getBlockSelectionStart();\r\n\r\n\t\t\tconst blockType =\r\n\t\t\t\tselectedBlockClientId &&\r\n\t\t\t\tgetBlockType( getBlockName( selectedBlockClientId ) );\r\n\r\n\t\t\treturn {\r\n\t\t\t\tisToolbarEnabled:\r\n\t\t\t\t\tblockType &&\r\n\t\t\t\t\thasBlockSupport( blockType, '__experimentalToolbar', true ),\r\n\t\t\t\tisDefaultEditingMode:\r\n\t\t\t\t\tgetBlockEditingMode( selectedBlockClientId ) === 'default',\r\n\t\t\t};\r\n\t\t},\r\n\t\t[]\r\n\t);\r\n\r\n\tconst hasAnyBlockControls = useHasAnyBlockControls();\r\n\r\n\tif (\r\n\t\t! isToolbarEnabled ||\r\n\t\t( ! isDefaultEditingMode && ! hasAnyBlockControls )\r\n\t) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\treturn true;\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,YAAY,EAAEC,eAAe,QAAQ,mBAAmB;AACjE;AACA;AACA;AACA,SAASC,KAAK,IAAIC,gBAAgB,QAAQ,aAAa;AACvD,SAASC,sBAAsB,QAAQ,0CAA0C;;AAEjF;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,kBAAkBA,CAAA,EAAG;EACpC,MAAM;IAAEC,gBAAgB;IAAEC;EAAqB,CAAC,GAAGR,SAAS,CACzDS,MAAM,IAAM;IACb,MAAM;MACLC,mBAAmB;MACnBC,YAAY;MACZC;IACD,CAAC,GAAGH,MAAM,CAAEL,gBAAiB,CAAC;;IAE9B;IACA;IACA;IACA,MAAMS,qBAAqB,GAAGD,sBAAsB,CAAC,CAAC;IAEtD,MAAME,SAAS,GACdD,qBAAqB,IACrBZ,YAAY,CAAEU,YAAY,CAAEE,qBAAsB,CAAE,CAAC;IAEtD,OAAO;MACNN,gBAAgB,EACfO,SAAS,IACTZ,eAAe,CAAEY,SAAS,EAAE,uBAAuB,EAAE,IAAK,CAAC;MAC5DN,oBAAoB,EACnBE,mBAAmB,CAAEG,qBAAsB,CAAC,KAAK;IACnD,CAAC;EACF,CAAC,EACD,EACD,CAAC;EAED,MAAME,mBAAmB,GAAGV,sBAAsB,CAAC,CAAC;EAEpD,IACC,CAAEE,gBAAgB,IAChB,CAAEC,oBAAoB,IAAI,CAAEO,mBAAqB,EAClD;IACD,OAAO,KAAK;EACb;EAEA,OAAO,IAAI;AACZ","ignoreList":[]}