{"version":3,"names":["clsx","dragHandle","Button","Flex","FlexItem","useSelect","useDispatch","forwardRef","useEffect","BACKSPACE","DELETE","UP","DOWN","LEFT","RIGHT","TAB","ESCAPE","ENTER","SPACE","__experimentalGetAccessibleBlockLabel","getAccessibleBlockLabel","store","blocksStore","speak","focus","__","BlockTitle","BlockIcon","blockEditorStore","BlockDraggable","useBlockElement","jsx","_jsx","jsxs","_jsxs","BlockSelectionButton","clientId","rootClientId","ref","selected","select","getBlock","getBlockIndex","hasBlockMovingClientId","getBlockListSettings","__unstableGetEditorMode","getNextBlockClientId","getPreviousBlockClientId","canMoveBlock","getActiveBlockVariation","getBlockType","index","name","attributes","blockType","orientation","match","blockMovingMode","editorMode","icon","label","canMove","setNavigationMode","removeBlock","current","blockElement","getBlockRootClientId","getClientIdsOfDescendants","getSelectedBlockClientId","getMultiSelectedBlocksEndClientId","selectBlock","clearSelectedBlock","setBlockMovingClientId","moveBlockToPosition","onKeyDown","event","keyCode","isUp","isDown","isLeft","isRight","isTab","isEscape","isEnter","isSpace","isShift","shiftKey","preventDefault","selectedBlockClientId","selectionEndClientId","selectionBeforeEndClientId","selectionAfterEndClientId","navigateUp","navigateDown","navigateOut","navigateIn","focusedBlockUid","_getBlockRootClientId","_getClientIdsOfDescen","startingBlockClientId","defaultPrevented","sourceRoot","destRoot","sourceBlockIndex","destinationBlockIndex","nextTabbable","tabbable","findNext","contains","ownerDocument","defaultView","frameElement","findPrevious","classNames","dragHandleLabel","showBlockDraggable","className","children","justify","showColors","clientIds","draggableProps","__next40pxDefaultSize","tabIndex","onClick","undefined","showTooltip","maximumLength"],"sources":["@wordpress/block-editor/src/components/block-tools/block-selection-button.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { dragHandle } from '@wordpress/icons';\r\nimport { Button, Flex, FlexItem } from '@wordpress/components';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { forwardRef, useEffect } from '@wordpress/element';\r\nimport {\r\n\tBACKSPACE,\r\n\tDELETE,\r\n\tUP,\r\n\tDOWN,\r\n\tLEFT,\r\n\tRIGHT,\r\n\tTAB,\r\n\tESCAPE,\r\n\tENTER,\r\n\tSPACE,\r\n} from '@wordpress/keycodes';\r\nimport {\r\n\t__experimentalGetAccessibleBlockLabel as getAccessibleBlockLabel,\r\n\tstore as blocksStore,\r\n} from '@wordpress/blocks';\r\nimport { speak } from '@wordpress/a11y';\r\nimport { focus } from '@wordpress/dom';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockTitle from '../block-title';\r\nimport BlockIcon from '../block-icon';\r\nimport { store as blockEditorStore } from '../../store';\r\nimport BlockDraggable from '../block-draggable';\r\nimport { useBlockElement } from '../block-list/use-block-props/use-block-refs';\r\n\r\n/**\r\n * Block selection button component, displaying the label of the block. If the block\r\n * descends from a root block, a button is displayed enabling the user to select\r\n * the root block.\r\n *\r\n * @param {string} props          Component props.\r\n * @param {string} props.clientId Client ID of block.\r\n * @param {Object} ref            Reference to the component.\r\n *\r\n * @return {Component} The component to be rendered.\r\n */\r\nfunction BlockSelectionButton( { clientId, rootClientId }, ref ) {\r\n\tconst selected = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst {\r\n\t\t\t\tgetBlock,\r\n\t\t\t\tgetBlockIndex,\r\n\t\t\t\thasBlockMovingClientId,\r\n\t\t\t\tgetBlockListSettings,\r\n\t\t\t\t__unstableGetEditorMode,\r\n\t\t\t\tgetNextBlockClientId,\r\n\t\t\t\tgetPreviousBlockClientId,\r\n\t\t\t\tcanMoveBlock,\r\n\t\t\t} = select( blockEditorStore );\r\n\t\t\tconst { getActiveBlockVariation, getBlockType } =\r\n\t\t\t\tselect( blocksStore );\r\n\t\t\tconst index = getBlockIndex( clientId );\r\n\t\t\tconst { name, attributes } = getBlock( clientId );\r\n\t\t\tconst blockType = getBlockType( name );\r\n\t\t\tconst orientation =\r\n\t\t\t\tgetBlockListSettings( rootClientId )?.orientation;\r\n\t\t\tconst match = getActiveBlockVariation( name, attributes );\r\n\r\n\t\t\treturn {\r\n\t\t\t\tblockMovingMode: hasBlockMovingClientId(),\r\n\t\t\t\teditorMode: __unstableGetEditorMode(),\r\n\t\t\t\ticon: match?.icon || blockType.icon,\r\n\t\t\t\tlabel: getAccessibleBlockLabel(\r\n\t\t\t\t\tblockType,\r\n\t\t\t\t\tattributes,\r\n\t\t\t\t\tindex + 1,\r\n\t\t\t\t\torientation\r\n\t\t\t\t),\r\n\t\t\t\tcanMove: canMoveBlock( clientId, rootClientId ),\r\n\t\t\t\tgetNextBlockClientId,\r\n\t\t\t\tgetPreviousBlockClientId,\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ clientId, rootClientId ]\r\n\t);\r\n\tconst { label, icon, blockMovingMode, editorMode, canMove } = selected;\r\n\tconst { setNavigationMode, removeBlock } = useDispatch( blockEditorStore );\r\n\r\n\t// Focus the breadcrumb in navigation mode.\r\n\tuseEffect( () => {\r\n\t\tif ( editorMode === 'navigation' ) {\r\n\t\t\tref.current.focus();\r\n\t\t\tspeak( label );\r\n\t\t}\r\n\t}, [ label, editorMode ] );\r\n\tconst blockElement = useBlockElement( clientId );\r\n\r\n\tconst {\r\n\t\thasBlockMovingClientId,\r\n\t\tgetBlockIndex,\r\n\t\tgetBlockRootClientId,\r\n\t\tgetClientIdsOfDescendants,\r\n\t\tgetSelectedBlockClientId,\r\n\t\tgetMultiSelectedBlocksEndClientId,\r\n\t\tgetPreviousBlockClientId,\r\n\t\tgetNextBlockClientId,\r\n\t} = useSelect( blockEditorStore );\r\n\tconst {\r\n\t\tselectBlock,\r\n\t\tclearSelectedBlock,\r\n\t\tsetBlockMovingClientId,\r\n\t\tmoveBlockToPosition,\r\n\t} = useDispatch( blockEditorStore );\r\n\r\n\tfunction onKeyDown( event ) {\r\n\t\tconst { keyCode } = event;\r\n\t\tconst isUp = keyCode === UP;\r\n\t\tconst isDown = keyCode === DOWN;\r\n\t\tconst isLeft = keyCode === LEFT;\r\n\t\tconst isRight = keyCode === RIGHT;\r\n\t\tconst isTab = keyCode === TAB;\r\n\t\tconst isEscape = keyCode === ESCAPE;\r\n\t\tconst isEnter = keyCode === ENTER;\r\n\t\tconst isSpace = keyCode === SPACE;\r\n\t\tconst isShift = event.shiftKey;\r\n\r\n\t\tif ( keyCode === BACKSPACE || keyCode === DELETE ) {\r\n\t\t\tremoveBlock( clientId );\r\n\t\t\tevent.preventDefault();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst selectedBlockClientId = getSelectedBlockClientId();\r\n\t\tconst selectionEndClientId = getMultiSelectedBlocksEndClientId();\r\n\t\tconst selectionBeforeEndClientId = getPreviousBlockClientId(\r\n\t\t\tselectionEndClientId || selectedBlockClientId\r\n\t\t);\r\n\t\tconst selectionAfterEndClientId = getNextBlockClientId(\r\n\t\t\tselectionEndClientId || selectedBlockClientId\r\n\t\t);\r\n\r\n\t\tconst navigateUp = ( isTab && isShift ) || isUp;\r\n\t\tconst navigateDown = ( isTab && ! isShift ) || isDown;\r\n\t\t// Move out of current nesting level (no effect if at root level).\r\n\t\tconst navigateOut = isLeft;\r\n\t\t// Move into next nesting level (no effect if the current block has no innerBlocks).\r\n\t\tconst navigateIn = isRight;\r\n\r\n\t\tlet focusedBlockUid;\r\n\t\tif ( navigateUp ) {\r\n\t\t\tfocusedBlockUid = selectionBeforeEndClientId;\r\n\t\t} else if ( navigateDown ) {\r\n\t\t\tfocusedBlockUid = selectionAfterEndClientId;\r\n\t\t} else if ( navigateOut ) {\r\n\t\t\tfocusedBlockUid =\r\n\t\t\t\tgetBlockRootClientId( selectedBlockClientId ) ??\r\n\t\t\t\tselectedBlockClientId;\r\n\t\t} else if ( navigateIn ) {\r\n\t\t\tfocusedBlockUid =\r\n\t\t\t\tgetClientIdsOfDescendants( selectedBlockClientId )[ 0 ] ??\r\n\t\t\t\tselectedBlockClientId;\r\n\t\t}\r\n\t\tconst startingBlockClientId = hasBlockMovingClientId();\r\n\t\tif ( isEscape && startingBlockClientId && ! event.defaultPrevented ) {\r\n\t\t\tsetBlockMovingClientId( null );\r\n\t\t\tevent.preventDefault();\r\n\t\t}\r\n\t\tif ( ( isEnter || isSpace ) && startingBlockClientId ) {\r\n\t\t\tconst sourceRoot = getBlockRootClientId( startingBlockClientId );\r\n\t\t\tconst destRoot = getBlockRootClientId( selectedBlockClientId );\r\n\t\t\tconst sourceBlockIndex = getBlockIndex( startingBlockClientId );\r\n\t\t\tlet destinationBlockIndex = getBlockIndex( selectedBlockClientId );\r\n\t\t\tif (\r\n\t\t\t\tsourceBlockIndex < destinationBlockIndex &&\r\n\t\t\t\tsourceRoot === destRoot\r\n\t\t\t) {\r\n\t\t\t\tdestinationBlockIndex -= 1;\r\n\t\t\t}\r\n\t\t\tmoveBlockToPosition(\r\n\t\t\t\tstartingBlockClientId,\r\n\t\t\t\tsourceRoot,\r\n\t\t\t\tdestRoot,\r\n\t\t\t\tdestinationBlockIndex\r\n\t\t\t);\r\n\t\t\tselectBlock( startingBlockClientId );\r\n\t\t\tsetBlockMovingClientId( null );\r\n\t\t}\r\n\t\t// Prevent the block from being moved into itself.\r\n\t\tif (\r\n\t\t\tstartingBlockClientId &&\r\n\t\t\tselectedBlockClientId === startingBlockClientId &&\r\n\t\t\tnavigateIn\r\n\t\t) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif ( navigateDown || navigateUp || navigateOut || navigateIn ) {\r\n\t\t\tif ( focusedBlockUid ) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tselectBlock( focusedBlockUid );\r\n\t\t\t} else if ( isTab && selectedBlockClientId ) {\r\n\t\t\t\tlet nextTabbable;\r\n\r\n\t\t\t\tif ( navigateDown ) {\r\n\t\t\t\t\tnextTabbable = blockElement;\r\n\t\t\t\t\tdo {\r\n\t\t\t\t\t\tnextTabbable = focus.tabbable.findNext( nextTabbable );\r\n\t\t\t\t\t} while (\r\n\t\t\t\t\t\tnextTabbable &&\r\n\t\t\t\t\t\tblockElement.contains( nextTabbable )\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tif ( ! nextTabbable ) {\r\n\t\t\t\t\t\tnextTabbable =\r\n\t\t\t\t\t\t\tblockElement.ownerDocument.defaultView.frameElement;\r\n\t\t\t\t\t\tnextTabbable = focus.tabbable.findNext( nextTabbable );\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnextTabbable = focus.tabbable.findPrevious( blockElement );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( nextTabbable ) {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tnextTabbable.focus();\r\n\t\t\t\t\tclearSelectedBlock();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst classNames = clsx(\r\n\t\t'block-editor-block-list__block-selection-button',\r\n\t\t{\r\n\t\t\t'is-block-moving-mode': !! blockMovingMode,\r\n\t\t}\r\n\t);\r\n\r\n\tconst dragHandleLabel = __( 'Drag' );\r\n\tconst showBlockDraggable = canMove && editorMode === 'navigation';\r\n\r\n\treturn (\r\n\t\t<div className={ classNames }>\r\n\t\t\t<Flex\r\n\t\t\t\tjustify=\"center\"\r\n\t\t\t\tclassName=\"block-editor-block-list__block-selection-button__content\"\r\n\t\t\t>\r\n\t\t\t\t<FlexItem>\r\n\t\t\t\t\t<BlockIcon icon={ icon } showColors />\r\n\t\t\t\t</FlexItem>\r\n\t\t\t\t{ showBlockDraggable && (\r\n\t\t\t\t\t<FlexItem>\r\n\t\t\t\t\t\t<BlockDraggable clientIds={ [ clientId ] }>\r\n\t\t\t\t\t\t\t{ ( draggableProps ) => (\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t// TODO: Switch to `true` (40px size) if possible\r\n\t\t\t\t\t\t\t\t\t__next40pxDefaultSize={ false }\r\n\t\t\t\t\t\t\t\t\ticon={ dragHandle }\r\n\t\t\t\t\t\t\t\t\tclassName=\"block-selection-button_drag-handle\"\r\n\t\t\t\t\t\t\t\t\tlabel={ dragHandleLabel }\r\n\t\t\t\t\t\t\t\t\t// Should not be able to tab to drag handle as this\r\n\t\t\t\t\t\t\t\t\t// button can only be used with a pointer device.\r\n\t\t\t\t\t\t\t\t\ttabIndex=\"-1\"\r\n\t\t\t\t\t\t\t\t\t{ ...draggableProps }\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t</BlockDraggable>\r\n\t\t\t\t\t</FlexItem>\r\n\t\t\t\t) }\r\n\t\t\t\t{ editorMode === 'navigation' && (\r\n\t\t\t\t\t<FlexItem>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t// TODO: Switch to `true` (40px size) if possible\r\n\t\t\t\t\t\t\t__next40pxDefaultSize={ false }\r\n\t\t\t\t\t\t\tref={ ref }\r\n\t\t\t\t\t\t\tonClick={\r\n\t\t\t\t\t\t\t\teditorMode === 'navigation'\r\n\t\t\t\t\t\t\t\t\t? () => setNavigationMode( false )\r\n\t\t\t\t\t\t\t\t\t: undefined\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonKeyDown={ onKeyDown }\r\n\t\t\t\t\t\t\tlabel={ label }\r\n\t\t\t\t\t\t\tshowTooltip={ false }\r\n\t\t\t\t\t\t\tclassName=\"block-selection-button_select-button\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<BlockTitle\r\n\t\t\t\t\t\t\t\tclientId={ clientId }\r\n\t\t\t\t\t\t\t\tmaximumLength={ 35 }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</FlexItem>\r\n\t\t\t\t) }\r\n\t\t\t</Flex>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default forwardRef( BlockSelectionButton );\r\n"],"mappings":"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","ignoreList":[]}