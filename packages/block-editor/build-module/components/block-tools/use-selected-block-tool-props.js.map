{"version":3,"names":["useSelect","store","blockEditorStore","useSelectedBlockToolProps","clientId","selectedBlockProps","select","getBlockRootClientId","getBlockParents","__experimentalGetBlockListSettingsForBlocks","isBlockInsertionPointVisible","getBlockInsertionPoint","getBlockOrder","hasMultiSelection","getLastMultiSelectedBlockClientId","blockParentsClientIds","parentBlockListSettings","capturingClientId","find","parentClientId","__experimentalCaptureToolbars","isInsertionPointVisible","insertionPoint","order","rootClientId","index","lastClientId"],"sources":["@wordpress/block-editor/src/components/block-tools/use-selected-block-tool-props.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\n/**\r\n * Returns props for the selected block tools and empty block inserter.\r\n *\r\n * @param {string} clientId Selected block client ID.\r\n */\r\nexport default function useSelectedBlockToolProps( clientId ) {\r\n\tconst selectedBlockProps = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst {\r\n\t\t\t\tgetBlockRootClientId,\r\n\t\t\t\tgetBlockParents,\r\n\t\t\t\t__experimentalGetBlockListSettingsForBlocks,\r\n\t\t\t\tisBlockInsertionPointVisible,\r\n\t\t\t\tgetBlockInsertionPoint,\r\n\t\t\t\tgetBlockOrder,\r\n\t\t\t\thasMultiSelection,\r\n\t\t\t\tgetLastMultiSelectedBlockClientId,\r\n\t\t\t} = select( blockEditorStore );\r\n\r\n\t\t\tconst blockParentsClientIds = getBlockParents( clientId );\r\n\r\n\t\t\t// Get Block List Settings for all ancestors of the current Block clientId.\r\n\t\t\tconst parentBlockListSettings =\r\n\t\t\t\t__experimentalGetBlockListSettingsForBlocks(\r\n\t\t\t\t\tblockParentsClientIds\r\n\t\t\t\t);\r\n\r\n\t\t\t// Get the clientId of the topmost parent with the capture toolbars setting.\r\n\t\t\tconst capturingClientId = blockParentsClientIds.find(\r\n\t\t\t\t( parentClientId ) =>\r\n\t\t\t\t\tparentBlockListSettings[ parentClientId ]\r\n\t\t\t\t\t\t?.__experimentalCaptureToolbars\r\n\t\t\t);\r\n\r\n\t\t\tlet isInsertionPointVisible = false;\r\n\t\t\tif ( isBlockInsertionPointVisible() ) {\r\n\t\t\t\tconst insertionPoint = getBlockInsertionPoint();\r\n\t\t\t\tconst order = getBlockOrder( insertionPoint.rootClientId );\r\n\t\t\t\tisInsertionPointVisible =\r\n\t\t\t\t\torder[ insertionPoint.index ] === clientId;\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tcapturingClientId,\r\n\t\t\t\tisInsertionPointVisible,\r\n\t\t\t\tlastClientId: hasMultiSelection()\r\n\t\t\t\t\t? getLastMultiSelectedBlockClientId()\r\n\t\t\t\t\t: null,\r\n\t\t\t\trootClientId: getBlockRootClientId( clientId ),\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ clientId ]\r\n\t);\r\n\r\n\treturn selectedBlockProps;\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,SAAS,QAAQ,iBAAiB;;AAE3C;AACA;AACA;AACA,SAASC,KAAK,IAAIC,gBAAgB,QAAQ,aAAa;;AAEvD;AACA;AACA;AACA;AACA;AACA,eAAe,SAASC,yBAAyBA,CAAEC,QAAQ,EAAG;EAC7D,MAAMC,kBAAkB,GAAGL,SAAS,CACjCM,MAAM,IAAM;IACb,MAAM;MACLC,oBAAoB;MACpBC,eAAe;MACfC,2CAA2C;MAC3CC,4BAA4B;MAC5BC,sBAAsB;MACtBC,aAAa;MACbC,iBAAiB;MACjBC;IACD,CAAC,GAAGR,MAAM,CAAEJ,gBAAiB,CAAC;IAE9B,MAAMa,qBAAqB,GAAGP,eAAe,CAAEJ,QAAS,CAAC;;IAEzD;IACA,MAAMY,uBAAuB,GAC5BP,2CAA2C,CAC1CM,qBACD,CAAC;;IAEF;IACA,MAAME,iBAAiB,GAAGF,qBAAqB,CAACG,IAAI,CACjDC,cAAc,IACfH,uBAAuB,CAAEG,cAAc,CAAE,EACtCC,6BACL,CAAC;IAED,IAAIC,uBAAuB,GAAG,KAAK;IACnC,IAAKX,4BAA4B,CAAC,CAAC,EAAG;MACrC,MAAMY,cAAc,GAAGX,sBAAsB,CAAC,CAAC;MAC/C,MAAMY,KAAK,GAAGX,aAAa,CAAEU,cAAc,CAACE,YAAa,CAAC;MAC1DH,uBAAuB,GACtBE,KAAK,CAAED,cAAc,CAACG,KAAK,CAAE,KAAKrB,QAAQ;IAC5C;IAEA,OAAO;MACNa,iBAAiB;MACjBI,uBAAuB;MACvBK,YAAY,EAAEb,iBAAiB,CAAC,CAAC,GAC9BC,iCAAiC,CAAC,CAAC,GACnC,IAAI;MACPU,YAAY,EAAEjB,oBAAoB,CAAEH,QAAS;IAC9C,CAAC;EACF,CAAC,EACD,CAAEA,QAAQ,CACX,CAAC;EAED,OAAOC,kBAAkB;AAC1B","ignoreList":[]}