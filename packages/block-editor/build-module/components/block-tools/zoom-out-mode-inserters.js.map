{"version":3,"names":["useSelect","useDispatch","useEffect","useState","BlockPopoverInbetween","ZoomOutModeInserterButton","store","blockEditorStore","unlock","jsx","_jsx","ZoomOutModeInserters","isReady","setIsReady","hasSelection","blockInsertionPoint","blockOrder","blockInsertionPointVisible","setInserterIsOpened","sectionRootClientId","selectedBlockClientId","hoveredBlockClientId","select","getSettings","getBlockInsertionPoint","getBlockOrder","getSelectionStart","getSelectedBlockClientId","getHoveredBlockClientId","isBlockInsertionPointVisible","getSectionRootClientId","root","clientId","__experimentalSetIsInserterOpened","showInsertionPoint","timeout","setTimeout","clearTimeout","undefined","map","index","shouldRenderInsertionPoint","previousClientId","nextClientId","isSelected","isHovered","children","isVisible","onClick","rootClientId","insertionIndex","tab","category","operation"],"sources":["@wordpress/block-editor/src/components/block-tools/zoom-out-mode-inserters.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { useEffect, useState } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockPopoverInbetween from '../block-popover/inbetween';\r\nimport ZoomOutModeInserterButton from './zoom-out-mode-inserter-button';\r\nimport { store as blockEditorStore } from '../../store';\r\nimport { unlock } from '../../lock-unlock';\r\n\r\nfunction ZoomOutModeInserters() {\r\n\tconst [ isReady, setIsReady ] = useState( false );\r\n\tconst {\r\n\t\thasSelection,\r\n\t\tblockInsertionPoint,\r\n\t\tblockOrder,\r\n\t\tblockInsertionPointVisible,\r\n\t\tsetInserterIsOpened,\r\n\t\tsectionRootClientId,\r\n\t\tselectedBlockClientId,\r\n\t\thoveredBlockClientId,\r\n\t} = useSelect( ( select ) => {\r\n\t\tconst {\r\n\t\t\tgetSettings,\r\n\t\t\tgetBlockInsertionPoint,\r\n\t\t\tgetBlockOrder,\r\n\t\t\tgetSelectionStart,\r\n\t\t\tgetSelectedBlockClientId,\r\n\t\t\tgetHoveredBlockClientId,\r\n\t\t\tisBlockInsertionPointVisible,\r\n\t\t\tgetSectionRootClientId,\r\n\t\t} = unlock( select( blockEditorStore ) );\r\n\r\n\t\tconst root = getSectionRootClientId();\r\n\r\n\t\treturn {\r\n\t\t\thasSelection: !! getSelectionStart().clientId,\r\n\t\t\tblockInsertionPoint: getBlockInsertionPoint(),\r\n\t\t\tblockOrder: getBlockOrder( root ),\r\n\t\t\tblockInsertionPointVisible: isBlockInsertionPointVisible(),\r\n\t\t\tsectionRootClientId: root,\r\n\t\t\tsetInserterIsOpened:\r\n\t\t\t\tgetSettings().__experimentalSetIsInserterOpened,\r\n\t\t\tselectedBlockClientId: getSelectedBlockClientId(),\r\n\t\t\thoveredBlockClientId: getHoveredBlockClientId(),\r\n\t\t};\r\n\t}, [] );\r\n\r\n\tconst { showInsertionPoint } = useDispatch( blockEditorStore );\r\n\r\n\t// Defer the initial rendering to avoid the jumps due to the animation.\r\n\tuseEffect( () => {\r\n\t\tconst timeout = setTimeout( () => {\r\n\t\t\tsetIsReady( true );\r\n\t\t}, 500 );\r\n\t\treturn () => {\r\n\t\t\tclearTimeout( timeout );\r\n\t\t};\r\n\t}, [] );\r\n\r\n\tif ( ! isReady ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn [ undefined, ...blockOrder ].map( ( clientId, index ) => {\r\n\t\tconst shouldRenderInsertionPoint =\r\n\t\t\tblockInsertionPointVisible && blockInsertionPoint.index === index;\r\n\r\n\t\tconst previousClientId = clientId;\r\n\t\tconst nextClientId = blockOrder[ index ];\r\n\r\n\t\tconst isSelected =\r\n\t\t\thasSelection &&\r\n\t\t\t( selectedBlockClientId === previousClientId ||\r\n\t\t\t\tselectedBlockClientId === nextClientId );\r\n\r\n\t\tconst isHovered =\r\n\t\t\thoveredBlockClientId === previousClientId ||\r\n\t\t\thoveredBlockClientId === nextClientId;\r\n\r\n\t\treturn (\r\n\t\t\t<BlockPopoverInbetween\r\n\t\t\t\tkey={ index }\r\n\t\t\t\tpreviousClientId={ previousClientId }\r\n\t\t\t\tnextClientId={ nextClientId }\r\n\t\t\t>\r\n\t\t\t\t{ ! shouldRenderInsertionPoint && (\r\n\t\t\t\t\t<ZoomOutModeInserterButton\r\n\t\t\t\t\t\tisVisible={ isSelected || isHovered }\r\n\t\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\t\tsetInserterIsOpened( {\r\n\t\t\t\t\t\t\t\trootClientId: sectionRootClientId,\r\n\t\t\t\t\t\t\t\tinsertionIndex: index,\r\n\t\t\t\t\t\t\t\ttab: 'patterns',\r\n\t\t\t\t\t\t\t\tcategory: 'all',\r\n\t\t\t\t\t\t\t} );\r\n\t\t\t\t\t\t\tshowInsertionPoint( sectionRootClientId, index, {\r\n\t\t\t\t\t\t\t\toperation: 'insert',\r\n\t\t\t\t\t\t\t} );\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t/>\r\n\t\t\t\t) }\r\n\t\t\t</BlockPopoverInbetween>\r\n\t\t);\r\n\t} );\r\n}\r\n\r\nexport default ZoomOutModeInserters;\r\n"],"mappings":"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","ignoreList":[]}