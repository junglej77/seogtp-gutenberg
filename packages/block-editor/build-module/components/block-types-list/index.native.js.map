{"version":3,"names":["Dimensions","FlatList","SectionList","StyleSheet","Text","TouchableWithoutFeedback","View","useState","useEffect","BottomSheet","Gradient","usePreferredColorScheme","usePreferredColorSchemeStyle","styles","InserterButton","jsx","_jsx","jsxs","_jsxs","MIN_COL_NUM","BlockTypesList","name","sections","onSelect","label","listProps","initialNumToRender","numberOfColumns","setNumberOfColumns","itemWidth","setItemWidth","maxWidth","setMaxWidth","dimensionsChangeSubscription","addEventListener","onLayout","remove","calculateItemWidth","paddingLeft","itemPaddingLeft","paddingRight","itemPaddingRight","Styles","modalItem","width","modalIconWrapper","columnStyle","sumLeftRightPadding","bottomSheetWidth","getWidth","containerTotalWidth","itemTotalWidth","columnsFitToWidth","Math","floor","numColumns","max","updatedItemWidth","contentContainerStyle","flatten","renderSection","item","accessible","children","data","list","ItemSeparatorComponent","style","scrollEnabled","renderItem","renderListItem","colorScheme","sectionHeaderGradientValue","sectionHeaderTitleStyles","renderSectionHeader","section","metadata","icon","title","gradientValue","testID","accessibilityLabel","keyboardShouldPersistTaps","paddingBottom","safeAreaBottomInset"],"sources":["@wordpress/block-editor/src/components/block-types-list/index.native.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport {\r\n\tDimensions,\r\n\tFlatList,\r\n\tSectionList,\r\n\tStyleSheet,\r\n\tText,\r\n\tTouchableWithoutFeedback,\r\n\tView,\r\n} from 'react-native';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useState, useEffect } from '@wordpress/element';\r\nimport { BottomSheet, Gradient } from '@wordpress/components';\r\nimport {\r\n\tusePreferredColorScheme,\r\n\tusePreferredColorSchemeStyle,\r\n} from '@wordpress/compose';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport styles from './style.scss';\r\nimport InserterButton from '../inserter-button';\r\n\r\nconst MIN_COL_NUM = 3;\r\n\r\nexport default function BlockTypesList( {\r\n\tname,\r\n\tsections,\r\n\tonSelect,\r\n\tlabel,\r\n\tlistProps,\r\n\tinitialNumToRender = 3,\r\n} ) {\r\n\tconst [ numberOfColumns, setNumberOfColumns ] = useState( MIN_COL_NUM );\r\n\tconst [ itemWidth, setItemWidth ] = useState();\r\n\tconst [ maxWidth, setMaxWidth ] = useState();\r\n\r\n\tuseEffect( () => {\r\n\t\tconst dimensionsChangeSubscription = Dimensions.addEventListener(\r\n\t\t\t'change',\r\n\t\t\tonLayout\r\n\t\t);\r\n\t\tonLayout();\r\n\t\treturn () => {\r\n\t\t\tdimensionsChangeSubscription.remove();\r\n\t\t};\r\n\t}, [] );\r\n\r\n\tfunction calculateItemWidth() {\r\n\t\tconst { paddingLeft: itemPaddingLeft, paddingRight: itemPaddingRight } =\r\n\t\t\tInserterButton.Styles.modalItem;\r\n\t\tconst { width } = InserterButton.Styles.modalIconWrapper;\r\n\t\treturn width + itemPaddingLeft + itemPaddingRight;\r\n\t}\r\n\r\n\tfunction onLayout() {\r\n\t\tconst columnStyle = styles[ 'block-types-list__column' ];\r\n\t\tconst sumLeftRightPadding =\r\n\t\t\tcolumnStyle.paddingLeft + columnStyle.paddingRight;\r\n\r\n\t\tconst bottomSheetWidth = BottomSheet.getWidth();\r\n\t\tconst containerTotalWidth = bottomSheetWidth - sumLeftRightPadding;\r\n\t\tconst itemTotalWidth = calculateItemWidth();\r\n\r\n\t\tconst columnsFitToWidth = Math.floor(\r\n\t\t\tcontainerTotalWidth / itemTotalWidth\r\n\t\t);\r\n\r\n\t\tconst numColumns = Math.max( MIN_COL_NUM, columnsFitToWidth );\r\n\r\n\t\tsetNumberOfColumns( numColumns );\r\n\t\tsetMaxWidth( containerTotalWidth / numColumns );\r\n\r\n\t\tif ( columnsFitToWidth < MIN_COL_NUM ) {\r\n\t\t\tconst updatedItemWidth =\r\n\t\t\t\t( bottomSheetWidth - 2 * sumLeftRightPadding ) / MIN_COL_NUM;\r\n\t\t\tsetItemWidth( updatedItemWidth );\r\n\t\t}\r\n\t}\r\n\r\n\tconst contentContainerStyle = StyleSheet.flatten(\r\n\t\tlistProps.contentContainerStyle\r\n\t);\r\n\r\n\tconst renderSection = ( { item } ) => {\r\n\t\treturn (\r\n\t\t\t<TouchableWithoutFeedback accessible={ false }>\r\n\t\t\t\t<FlatList\r\n\t\t\t\t\tdata={ item.list }\r\n\t\t\t\t\tkey={ `InserterUI-${ name }-${ numberOfColumns }` } // Re-render when numberOfColumns changes.\r\n\t\t\t\t\tnumColumns={ numberOfColumns }\r\n\t\t\t\t\tItemSeparatorComponent={ () => (\r\n\t\t\t\t\t\t<TouchableWithoutFeedback accessible={ false }>\r\n\t\t\t\t\t\t\t<View\r\n\t\t\t\t\t\t\t\tstyle={\r\n\t\t\t\t\t\t\t\t\tstyles[ 'block-types-list__row-separator' ]\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</TouchableWithoutFeedback>\r\n\t\t\t\t\t) }\r\n\t\t\t\t\tscrollEnabled={ false }\r\n\t\t\t\t\trenderItem={ renderListItem }\r\n\t\t\t\t/>\r\n\t\t\t</TouchableWithoutFeedback>\r\n\t\t);\r\n\t};\r\n\r\n\tconst renderListItem = ( { item } ) => {\r\n\t\treturn (\r\n\t\t\t<InserterButton\r\n\t\t\t\titem={ item }\r\n\t\t\t\titemWidth={ itemWidth }\r\n\t\t\t\tmaxWidth={ maxWidth }\r\n\t\t\t\tonSelect={ onSelect }\r\n\t\t\t/>\r\n\t\t);\r\n\t};\r\n\r\n\tconst colorScheme = usePreferredColorScheme();\r\n\tconst sectionHeaderGradientValue =\r\n\t\tcolorScheme === 'light'\r\n\t\t\t? 'linear-gradient(#fff 70%, rgba(255, 255, 255, 0))'\r\n\t\t\t: 'linear-gradient(#2e2e2e 70%, rgba(46, 46, 46, 0))';\r\n\tconst sectionHeaderTitleStyles = usePreferredColorSchemeStyle(\r\n\t\tstyles[ 'block-types-list__section-header-title' ],\r\n\t\tstyles[ 'block-types-list__section-header-title--dark' ]\r\n\t);\r\n\r\n\tconst renderSectionHeader = ( { section: { metadata } } ) => {\r\n\t\tif ( ! metadata?.icon || ! metadata?.title ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<TouchableWithoutFeedback accessible={ false }>\r\n\t\t\t\t<Gradient\r\n\t\t\t\t\tgradientValue={ sectionHeaderGradientValue }\r\n\t\t\t\t\tstyle={ styles[ 'block-types-list__section-header' ] }\r\n\t\t\t\t>\r\n\t\t\t\t\t{ metadata?.icon }\r\n\t\t\t\t\t<Text style={ sectionHeaderTitleStyles }>\r\n\t\t\t\t\t\t{ metadata?.title }\r\n\t\t\t\t\t</Text>\r\n\t\t\t\t</Gradient>\r\n\t\t\t</TouchableWithoutFeedback>\r\n\t\t);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<SectionList\r\n\t\t\tonLayout={ onLayout }\r\n\t\t\ttestID={ `InserterUI-${ name }` }\r\n\t\t\taccessibilityLabel={ label }\r\n\t\t\tkeyboardShouldPersistTaps=\"always\"\r\n\t\t\tsections={ sections }\r\n\t\t\tinitialNumToRender={ initialNumToRender }\r\n\t\t\trenderItem={ renderSection }\r\n\t\t\trenderSectionHeader={ renderSectionHeader }\r\n\t\t\t{ ...listProps }\r\n\t\t\tcontentContainerStyle={ {\r\n\t\t\t\t...contentContainerStyle,\r\n\t\t\t\tpaddingBottom: Math.max(\r\n\t\t\t\t\tlistProps.safeAreaBottomInset,\r\n\t\t\t\t\tcontentContainerStyle.paddingBottom\r\n\t\t\t\t),\r\n\t\t\t} }\r\n\t\t/>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}