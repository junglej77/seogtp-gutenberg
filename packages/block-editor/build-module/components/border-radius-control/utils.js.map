{"version":3,"names":["__experimentalParseQuantityAndUnitFromRawValue","parseQuantityAndUnitFromRawValue","mode","inputArray","arr","sort","a","b","filter","v","length","shift","getAllUnit","selectedUnits","flat","cornerUnits","Object","values","Boolean","getAllValue","parsedQuantitiesAndUnits","map","value","allValues","_value$","allUnits","every","unit","allValue","undefined","hasMixedValues","isMixed","isNaN","parseFloat","hasDefinedValues","filteredValues"],"sources":["@wordpress/block-editor/src/components/border-radius-control/utils.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { __experimentalParseQuantityAndUnitFromRawValue as parseQuantityAndUnitFromRawValue } from '@wordpress/components';\r\n\r\n/**\r\n * Gets the (non-undefined) item with the highest occurrence within an array\r\n * Based in part on: https://stackoverflow.com/a/20762713\r\n *\r\n * Undefined values are always sorted to the end by `sort`, so this function\r\n * returns the first element, to always prioritize real values over undefined\r\n * values.\r\n *\r\n * See: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort#description\r\n *\r\n * @param {Array<any>} inputArray Array of items to check.\r\n * @return {any}                  The item with the most occurrences.\r\n */\r\nexport function mode( inputArray ) {\r\n\tconst arr = [ ...inputArray ];\r\n\treturn arr\r\n\t\t.sort(\r\n\t\t\t( a, b ) =>\r\n\t\t\t\tinputArray.filter( ( v ) => v === b ).length -\r\n\t\t\t\tinputArray.filter( ( v ) => v === a ).length\r\n\t\t)\r\n\t\t.shift();\r\n}\r\n\r\n/**\r\n * Returns the most common CSS unit from the current CSS unit selections.\r\n *\r\n * - If a single flat border radius is set, its unit will be used\r\n * - If individual corner selections, the most common of those will be used\r\n * - Failing any unit selections a default of 'px' is returned.\r\n *\r\n * @param {Object} selectedUnits Unit selections for flat radius & each corner.\r\n * @return {string} Most common CSS unit from current selections. Default: `px`.\r\n */\r\nexport function getAllUnit( selectedUnits = {} ) {\r\n\tconst { flat, ...cornerUnits } = selectedUnits;\r\n\treturn (\r\n\t\tflat || mode( Object.values( cornerUnits ).filter( Boolean ) ) || 'px'\r\n\t);\r\n}\r\n\r\n/**\r\n * Gets the 'all' input value and unit from values data.\r\n *\r\n * @param {Object|string} values Radius values.\r\n * @return {string}              A value + unit for the 'all' input.\r\n */\r\nexport function getAllValue( values = {} ) {\r\n\t/**\r\n\t * Border radius support was originally a single pixel value.\r\n\t *\r\n\t * To maintain backwards compatibility treat this case as the all value.\r\n\t */\r\n\tif ( typeof values === 'string' ) {\r\n\t\treturn values;\r\n\t}\r\n\r\n\tconst parsedQuantitiesAndUnits = Object.values( values ).map( ( value ) =>\r\n\t\tparseQuantityAndUnitFromRawValue( value )\r\n\t);\r\n\r\n\tconst allValues = parsedQuantitiesAndUnits.map(\r\n\t\t( value ) => value[ 0 ] ?? ''\r\n\t);\r\n\tconst allUnits = parsedQuantitiesAndUnits.map( ( value ) => value[ 1 ] );\r\n\r\n\tconst value = allValues.every( ( v ) => v === allValues[ 0 ] )\r\n\t\t? allValues[ 0 ]\r\n\t\t: '';\r\n\tconst unit = mode( allUnits );\r\n\r\n\tconst allValue = value === 0 || value ? `${ value }${ unit }` : undefined;\r\n\r\n\treturn allValue;\r\n}\r\n\r\n/**\r\n * Checks to determine if values are mixed.\r\n *\r\n * @param {Object} values Radius values.\r\n * @return {boolean}      Whether values are mixed.\r\n */\r\nexport function hasMixedValues( values = {} ) {\r\n\tconst allValue = getAllValue( values );\r\n\tconst isMixed =\r\n\t\ttypeof values === 'string' ? false : isNaN( parseFloat( allValue ) );\r\n\r\n\treturn isMixed;\r\n}\r\n\r\n/**\r\n * Checks to determine if values are defined.\r\n *\r\n * @param {Object} values Radius values.\r\n * @return {boolean}      Whether values are mixed.\r\n */\r\nexport function hasDefinedValues( values ) {\r\n\tif ( ! values ) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// A string value represents a shorthand value.\r\n\tif ( typeof values === 'string' ) {\r\n\t\treturn true;\r\n\t}\r\n\r\n\t// An object represents longhand border radius values, if any are set\r\n\t// flag values as being defined.\r\n\tconst filteredValues = Object.values( values ).filter( ( value ) => {\r\n\t\treturn !! value || value === 0;\r\n\t} );\r\n\r\n\treturn !! filteredValues.length;\r\n}\r\n"],"mappings":"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","ignoreList":[]}