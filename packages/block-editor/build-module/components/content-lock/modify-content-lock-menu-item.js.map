{"version":3,"names":["MenuItem","useDispatch","useSelect","_x","store","blockEditorStore","unlock","jsx","_jsx","ModifyContentLockMenuItem","clientId","onClose","templateLock","isLockedByParent","isEditingAsBlocks","select","getContentLockingParent","getTemplateLock","getTemporarilyEditingAsBlocks","blockEditorActions","isContentLocked","modifyContentLockBlock","showStartEditingAsBlocks","onClick","children"],"sources":["@wordpress/block-editor/src/components/content-lock/modify-content-lock-menu-item.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { MenuItem } from '@wordpress/components';\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\nimport { _x } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\nimport { unlock } from '../../lock-unlock';\r\n\r\n// The implementation of content locking is mainly in this file, although the mechanism\r\n// to stop temporarily editing as blocks when an outside block is selected is on component StopEditingAsBlocksOnOutsideSelect\r\n// at block-editor/src/components/block-list/index.js.\r\n// Besides the components on this file and the file referenced above the implementation\r\n// also includes artifacts on the store (actions, reducers, and selector).\r\n\r\nexport function ModifyContentLockMenuItem( { clientId, onClose } ) {\r\n\tconst { templateLock, isLockedByParent, isEditingAsBlocks } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst {\r\n\t\t\t\tgetContentLockingParent,\r\n\t\t\t\tgetTemplateLock,\r\n\t\t\t\tgetTemporarilyEditingAsBlocks,\r\n\t\t\t} = unlock( select( blockEditorStore ) );\r\n\t\t\treturn {\r\n\t\t\t\ttemplateLock: getTemplateLock( clientId ),\r\n\t\t\t\tisLockedByParent: !! getContentLockingParent( clientId ),\r\n\t\t\t\tisEditingAsBlocks: getTemporarilyEditingAsBlocks() === clientId,\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ clientId ]\r\n\t);\r\n\tconst blockEditorActions = useDispatch( blockEditorStore );\r\n\tconst isContentLocked =\r\n\t\t! isLockedByParent && templateLock === 'contentOnly';\r\n\tif ( ! isContentLocked && ! isEditingAsBlocks ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst { modifyContentLockBlock } = unlock( blockEditorActions );\r\n\tconst showStartEditingAsBlocks = ! isEditingAsBlocks && isContentLocked;\r\n\r\n\treturn (\r\n\t\tshowStartEditingAsBlocks && (\r\n\t\t\t<MenuItem\r\n\t\t\t\tonClick={ () => {\r\n\t\t\t\t\tmodifyContentLockBlock( clientId );\r\n\t\t\t\t\tonClose();\r\n\t\t\t\t} }\r\n\t\t\t>\r\n\t\t\t\t{ _x( 'Modify', 'Unlock content locked blocks' ) }\r\n\t\t\t</MenuItem>\r\n\t\t)\r\n\t);\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,QAAQ,QAAQ,uBAAuB;AAChD,SAASC,WAAW,EAAEC,SAAS,QAAQ,iBAAiB;AACxD,SAASC,EAAE,QAAQ,iBAAiB;;AAEpC;AACA;AACA;AACA,SAASC,KAAK,IAAIC,gBAAgB,QAAQ,aAAa;AACvD,SAASC,MAAM,QAAQ,mBAAmB;;AAE1C;AACA;AACA;AACA;AACA;AAAA,SAAAC,GAAA,IAAAC,IAAA;AAEA,OAAO,SAASC,yBAAyBA,CAAE;EAAEC,QAAQ;EAAEC;AAAQ,CAAC,EAAG;EAClE,MAAM;IAAEC,YAAY;IAAEC,gBAAgB;IAAEC;EAAkB,CAAC,GAAGZ,SAAS,CACpEa,MAAM,IAAM;IACb,MAAM;MACLC,uBAAuB;MACvBC,eAAe;MACfC;IACD,CAAC,GAAGZ,MAAM,CAAES,MAAM,CAAEV,gBAAiB,CAAE,CAAC;IACxC,OAAO;MACNO,YAAY,EAAEK,eAAe,CAAEP,QAAS,CAAC;MACzCG,gBAAgB,EAAE,CAAC,CAAEG,uBAAuB,CAAEN,QAAS,CAAC;MACxDI,iBAAiB,EAAEI,6BAA6B,CAAC,CAAC,KAAKR;IACxD,CAAC;EACF,CAAC,EACD,CAAEA,QAAQ,CACX,CAAC;EACD,MAAMS,kBAAkB,GAAGlB,WAAW,CAAEI,gBAAiB,CAAC;EAC1D,MAAMe,eAAe,GACpB,CAAEP,gBAAgB,IAAID,YAAY,KAAK,aAAa;EACrD,IAAK,CAAEQ,eAAe,IAAI,CAAEN,iBAAiB,EAAG;IAC/C,OAAO,IAAI;EACZ;EAEA,MAAM;IAAEO;EAAuB,CAAC,GAAGf,MAAM,CAAEa,kBAAmB,CAAC;EAC/D,MAAMG,wBAAwB,GAAG,CAAER,iBAAiB,IAAIM,eAAe;EAEvE,OACCE,wBAAwB,iBACvBd,IAAA,CAACR,QAAQ;IACRuB,OAAO,EAAGA,CAAA,KAAM;MACfF,sBAAsB,CAAEX,QAAS,CAAC;MAClCC,OAAO,CAAC,CAAC;IACV,CAAG;IAAAa,QAAA,EAEDrB,EAAE,CAAE,QAAQ,EAAE,8BAA+B;EAAC,CACvC,CACV;AAEH","ignoreList":[]}