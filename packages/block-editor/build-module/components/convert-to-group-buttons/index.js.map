{"version":3,"names":["MenuItem","_x","switchToBlockType","useSelect","useDispatch","displayShortcut","store","blockEditorStore","useConvertToGroupButtonProps","BlockGroupToolbar","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","ConvertToGroupButton","clientIds","isGroupable","isUngroupable","onUngroup","blocksSelection","groupingBlockName","onClose","getSelectedBlockClientIds","replaceBlocks","onConvertToGroup","newBlocks","onConvertFromGroup","innerBlocks","length","attributes","selectedBlockClientIds","children","shortcut","primary","undefined","onClick"],"sources":["@wordpress/block-editor/src/components/convert-to-group-buttons/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { MenuItem } from '@wordpress/components';\r\nimport { _x } from '@wordpress/i18n';\r\nimport { switchToBlockType } from '@wordpress/blocks';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { displayShortcut } from '@wordpress/keycodes';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\nimport useConvertToGroupButtonProps from './use-convert-to-group-button-props';\r\nimport BlockGroupToolbar from './toolbar';\r\n\r\nfunction ConvertToGroupButton( {\r\n\tclientIds,\r\n\tisGroupable,\r\n\tisUngroupable,\r\n\tonUngroup,\r\n\tblocksSelection,\r\n\tgroupingBlockName,\r\n\tonClose = () => {},\r\n} ) {\r\n\tconst { getSelectedBlockClientIds } = useSelect( blockEditorStore );\r\n\tconst { replaceBlocks } = useDispatch( blockEditorStore );\r\n\tconst onConvertToGroup = () => {\r\n\t\t// Activate the `transform` on the Grouping Block which does the conversion.\r\n\t\tconst newBlocks = switchToBlockType(\r\n\t\t\tblocksSelection,\r\n\t\t\tgroupingBlockName\r\n\t\t);\r\n\t\tif ( newBlocks ) {\r\n\t\t\treplaceBlocks( clientIds, newBlocks );\r\n\t\t}\r\n\t};\r\n\r\n\tconst onConvertFromGroup = () => {\r\n\t\tlet innerBlocks = blocksSelection[ 0 ].innerBlocks;\r\n\t\tif ( ! innerBlocks.length ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif ( onUngroup ) {\r\n\t\t\tinnerBlocks = onUngroup(\r\n\t\t\t\tblocksSelection[ 0 ].attributes,\r\n\t\t\t\tblocksSelection[ 0 ].innerBlocks\r\n\t\t\t);\r\n\t\t}\r\n\t\treplaceBlocks( clientIds, innerBlocks );\r\n\t};\r\n\r\n\tif ( ! isGroupable && ! isUngroupable ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst selectedBlockClientIds = getSelectedBlockClientIds();\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ isGroupable && (\r\n\t\t\t\t<MenuItem\r\n\t\t\t\t\tshortcut={\r\n\t\t\t\t\t\tselectedBlockClientIds.length > 1\r\n\t\t\t\t\t\t\t? displayShortcut.primary( 'g' )\r\n\t\t\t\t\t\t\t: undefined\r\n\t\t\t\t\t}\r\n\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\tonConvertToGroup();\r\n\t\t\t\t\t\tonClose();\r\n\t\t\t\t\t} }\r\n\t\t\t\t>\r\n\t\t\t\t\t{ _x( 'Group', 'verb' ) }\r\n\t\t\t\t</MenuItem>\r\n\t\t\t) }\r\n\t\t\t{ isUngroupable && (\r\n\t\t\t\t<MenuItem\r\n\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\tonConvertFromGroup();\r\n\t\t\t\t\t\tonClose();\r\n\t\t\t\t\t} }\r\n\t\t\t\t>\r\n\t\t\t\t\t{ _x(\r\n\t\t\t\t\t\t'Ungroup',\r\n\t\t\t\t\t\t'Ungrouping blocks from within a grouping block back into individual blocks within the Editor'\r\n\t\t\t\t\t) }\r\n\t\t\t\t</MenuItem>\r\n\t\t\t) }\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport {\r\n\tBlockGroupToolbar,\r\n\tConvertToGroupButton,\r\n\tuseConvertToGroupButtonProps,\r\n};\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,QAAQ,QAAQ,uBAAuB;AAChD,SAASC,EAAE,QAAQ,iBAAiB;AACpC,SAASC,iBAAiB,QAAQ,mBAAmB;AACrD,SAASC,SAAS,EAAEC,WAAW,QAAQ,iBAAiB;AACxD,SAASC,eAAe,QAAQ,qBAAqB;;AAErD;AACA;AACA;AACA,SAASC,KAAK,IAAIC,gBAAgB,QAAQ,aAAa;AACvD,OAAOC,4BAA4B,MAAM,qCAAqC;AAC9E,OAAOC,iBAAiB,MAAM,WAAW;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAE1C,SAASC,oBAAoBA,CAAE;EAC9BC,SAAS;EACTC,WAAW;EACXC,aAAa;EACbC,SAAS;EACTC,eAAe;EACfC,iBAAiB;EACjBC,OAAO,GAAGA,CAAA,KAAM,CAAC;AAClB,CAAC,EAAG;EACH,MAAM;IAAEC;EAA0B,CAAC,GAAGrB,SAAS,CAAEI,gBAAiB,CAAC;EACnE,MAAM;IAAEkB;EAAc,CAAC,GAAGrB,WAAW,CAAEG,gBAAiB,CAAC;EACzD,MAAMmB,gBAAgB,GAAGA,CAAA,KAAM;IAC9B;IACA,MAAMC,SAAS,GAAGzB,iBAAiB,CAClCmB,eAAe,EACfC,iBACD,CAAC;IACD,IAAKK,SAAS,EAAG;MAChBF,aAAa,CAAER,SAAS,EAAEU,SAAU,CAAC;IACtC;EACD,CAAC;EAED,MAAMC,kBAAkB,GAAGA,CAAA,KAAM;IAChC,IAAIC,WAAW,GAAGR,eAAe,CAAE,CAAC,CAAE,CAACQ,WAAW;IAClD,IAAK,CAAEA,WAAW,CAACC,MAAM,EAAG;MAC3B;IACD;IACA,IAAKV,SAAS,EAAG;MAChBS,WAAW,GAAGT,SAAS,CACtBC,eAAe,CAAE,CAAC,CAAE,CAACU,UAAU,EAC/BV,eAAe,CAAE,CAAC,CAAE,CAACQ,WACtB,CAAC;IACF;IACAJ,aAAa,CAAER,SAAS,EAAEY,WAAY,CAAC;EACxC,CAAC;EAED,IAAK,CAAEX,WAAW,IAAI,CAAEC,aAAa,EAAG;IACvC,OAAO,IAAI;EACZ;EAEA,MAAMa,sBAAsB,GAAGR,yBAAyB,CAAC,CAAC;EAE1D,oBACCT,KAAA,CAAAF,SAAA;IAAAoB,QAAA,GACGf,WAAW,iBACZP,IAAA,CAACX,QAAQ;MACRkC,QAAQ,EACPF,sBAAsB,CAACF,MAAM,GAAG,CAAC,GAC9BzB,eAAe,CAAC8B,OAAO,CAAE,GAAI,CAAC,GAC9BC,SACH;MACDC,OAAO,EAAGA,CAAA,KAAM;QACfX,gBAAgB,CAAC,CAAC;QAClBH,OAAO,CAAC,CAAC;MACV,CAAG;MAAAU,QAAA,EAEDhC,EAAE,CAAE,OAAO,EAAE,MAAO;IAAC,CACd,CACV,EACCkB,aAAa,iBACdR,IAAA,CAACX,QAAQ;MACRqC,OAAO,EAAGA,CAAA,KAAM;QACfT,kBAAkB,CAAC,CAAC;QACpBL,OAAO,CAAC,CAAC;MACV,CAAG;MAAAU,QAAA,EAEDhC,EAAE,CACH,SAAS,EACT,8FACD;IAAC,CACQ,CACV;EAAA,CACA,CAAC;AAEL;AAEA,SACCQ,iBAAiB,EACjBO,oBAAoB,EACpBR,4BAA4B","ignoreList":[]}