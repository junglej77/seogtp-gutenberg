{"version":3,"names":["useDispatch","useSelect","switchToBlockType","store","blocksStore","ToolbarButton","ToolbarGroup","group","row","stack","grid","_x","useConvertToGroupButtonProps","blockEditorStore","jsx","_jsx","jsxs","_jsxs","layouts","type","flexWrap","orientation","BlockGroupToolbar","blocksSelection","clientIds","groupingBlockName","isGroupable","replaceBlocks","canRemove","variations","select","canRemoveBlocks","getBlockVariations","onConvertToGroup","layout","newBlocks","length","attributes","onConvertToRow","onConvertToStack","onConvertToGrid","canInsertRow","find","name","canInsertStack","canInsertGrid","children","icon","label","onClick"],"sources":["@wordpress/block-editor/src/components/convert-to-group-buttons/toolbar.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\nimport { switchToBlockType, store as blocksStore } from '@wordpress/blocks';\r\nimport { ToolbarButton, ToolbarGroup } from '@wordpress/components';\r\nimport { group, row, stack, grid } from '@wordpress/icons';\r\nimport { _x } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { useConvertToGroupButtonProps } from '../convert-to-group-buttons';\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nconst layouts = {\r\n\tgroup: { type: 'constrained' },\r\n\trow: { type: 'flex', flexWrap: 'nowrap' },\r\n\tstack: { type: 'flex', orientation: 'vertical' },\r\n\tgrid: { type: 'grid' },\r\n};\r\n\r\nfunction BlockGroupToolbar() {\r\n\tconst { blocksSelection, clientIds, groupingBlockName, isGroupable } =\r\n\t\tuseConvertToGroupButtonProps();\r\n\tconst { replaceBlocks } = useDispatch( blockEditorStore );\r\n\r\n\tconst { canRemove, variations } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst { canRemoveBlocks } = select( blockEditorStore );\r\n\t\t\tconst { getBlockVariations } = select( blocksStore );\r\n\r\n\t\t\treturn {\r\n\t\t\t\tcanRemove: canRemoveBlocks( clientIds ),\r\n\t\t\t\tvariations: getBlockVariations(\r\n\t\t\t\t\tgroupingBlockName,\r\n\t\t\t\t\t'transform'\r\n\t\t\t\t),\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ clientIds, groupingBlockName ]\r\n\t);\r\n\r\n\tconst onConvertToGroup = ( layout ) => {\r\n\t\tconst newBlocks = switchToBlockType(\r\n\t\t\tblocksSelection,\r\n\t\t\tgroupingBlockName\r\n\t\t);\r\n\r\n\t\tif ( typeof layout !== 'string' ) {\r\n\t\t\tlayout = 'group';\r\n\t\t}\r\n\r\n\t\tif ( newBlocks && newBlocks.length > 0 ) {\r\n\t\t\t// Because the block is not in the store yet we can't use\r\n\t\t\t// updateBlockAttributes so need to manually update attributes.\r\n\t\t\tnewBlocks[ 0 ].attributes.layout = layouts[ layout ];\r\n\t\t\treplaceBlocks( clientIds, newBlocks );\r\n\t\t}\r\n\t};\r\n\r\n\tconst onConvertToRow = () => onConvertToGroup( 'row' );\r\n\tconst onConvertToStack = () => onConvertToGroup( 'stack' );\r\n\tconst onConvertToGrid = () => onConvertToGroup( 'grid' );\r\n\r\n\t// Don't render the button if the current selection cannot be grouped.\r\n\t// A good example is selecting multiple button blocks within a Buttons block:\r\n\t// The group block is not a valid child of Buttons, so we should not show the button.\r\n\t// Any blocks that are locked against removal also cannot be grouped.\r\n\tif ( ! isGroupable || ! canRemove ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst canInsertRow = !! variations.find(\r\n\t\t( { name } ) => name === 'group-row'\r\n\t);\r\n\tconst canInsertStack = !! variations.find(\r\n\t\t( { name } ) => name === 'group-stack'\r\n\t);\r\n\tconst canInsertGrid = !! variations.find(\r\n\t\t( { name } ) => name === 'group-grid'\r\n\t);\r\n\r\n\treturn (\r\n\t\t<ToolbarGroup>\r\n\t\t\t<ToolbarButton\r\n\t\t\t\ticon={ group }\r\n\t\t\t\tlabel={ _x( 'Group', 'verb' ) }\r\n\t\t\t\tonClick={ onConvertToGroup }\r\n\t\t\t/>\r\n\t\t\t{ canInsertRow && (\r\n\t\t\t\t<ToolbarButton\r\n\t\t\t\t\ticon={ row }\r\n\t\t\t\t\tlabel={ _x( 'Row', 'single horizontal line' ) }\r\n\t\t\t\t\tonClick={ onConvertToRow }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t\t{ canInsertStack && (\r\n\t\t\t\t<ToolbarButton\r\n\t\t\t\t\ticon={ stack }\r\n\t\t\t\t\tlabel={ _x( 'Stack', 'verb' ) }\r\n\t\t\t\t\tonClick={ onConvertToStack }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t\t{ canInsertGrid && (\r\n\t\t\t\t<ToolbarButton\r\n\t\t\t\t\ticon={ grid }\r\n\t\t\t\t\tlabel={ _x( 'Grid', 'verb' ) }\r\n\t\t\t\t\tonClick={ onConvertToGrid }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t</ToolbarGroup>\r\n\t);\r\n}\r\n\r\nexport default BlockGroupToolbar;\r\n"],"mappings":"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","ignoreList":[]}