{"version":3,"names":["useState","AspectRatioTool","ScaleTool","WidthHeightTool","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","DimensionsTool","panelId","value","onChange","aspectRatioOptions","defaultAspectRatio","scaleOptions","defaultScale","unitsOptions","tools","width","undefined","height","aspectRatio","scale","lastScale","setLastScale","lastAspectRatio","setLastAspectRatio","aspectRatioValue","showScaleControl","children","includes","options","defaultValue","nextAspectRatio","nextValue","units","nextWidth","nextHeight","nextScale"],"sources":["@wordpress/block-editor/src/components/dimensions-tool/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useState } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport AspectRatioTool from './aspect-ratio-tool';\r\nimport ScaleTool from './scale-tool';\r\nimport WidthHeightTool from './width-height-tool';\r\n\r\n/**\r\n * @typedef {import('@wordpress/components/build-types/select-control/types').SelectControlProps} SelectControlProps\r\n */\r\n\r\n/**\r\n * @typedef {import('@wordpress/components/build-types/unit-control/types').WPUnitControlUnit} WPUnitControlUnit\r\n */\r\n\r\n/**\r\n * @typedef {Object} Dimensions\r\n * @property {string} [width]       CSS width property.\r\n * @property {string} [height]      CSS height property.\r\n * @property {string} [scale]       CSS object-fit property.\r\n * @property {string} [aspectRatio] CSS aspect-ratio property.\r\n */\r\n\r\n/**\r\n * @callback DimensionsControlsOnChange\r\n * @param {Dimensions} nextValue\r\n * @return {void}\r\n */\r\n\r\n/**\r\n * @typedef {Object} DimensionsControlsProps\r\n * @property {string}                     [panelId]            ID of the panel that contains the controls.\r\n * @property {Dimensions}                 [value]              Current dimensions values.\r\n * @property {DimensionsControlsOnChange} [onChange]           Callback to update the dimensions values.\r\n * @property {SelectControlProps[]}       [aspectRatioOptions] Aspect ratio options.\r\n * @property {SelectControlProps[]}       [scaleOptions]       Scale options.\r\n * @property {WPUnitControlUnit[]}        [unitsOptions]       Units options.\r\n */\r\n\r\n/**\r\n * Component that renders controls to edit the dimensions of an image or container.\r\n *\r\n * @param {DimensionsControlsProps} props The component props.\r\n *\r\n * @return {Element} The dimensions controls.\r\n */\r\nfunction DimensionsTool( {\r\n\tpanelId,\r\n\tvalue = {},\r\n\tonChange = () => {},\r\n\taspectRatioOptions, // Default options handled by AspectRatioTool.\r\n\tdefaultAspectRatio = 'auto', // Match CSS default value for aspect-ratio.\r\n\tscaleOptions, // Default options handled by ScaleTool.\r\n\tdefaultScale = 'fill', // Match CSS default value for object-fit.\r\n\tunitsOptions, // Default options handled by UnitControl.\r\n\ttools = [ 'aspectRatio', 'widthHeight', 'scale' ],\r\n} ) {\r\n\t// Coerce undefined and CSS default values to be null.\r\n\tconst width =\r\n\t\tvalue.width === undefined || value.width === 'auto'\r\n\t\t\t? null\r\n\t\t\t: value.width;\r\n\tconst height =\r\n\t\tvalue.height === undefined || value.height === 'auto'\r\n\t\t\t? null\r\n\t\t\t: value.height;\r\n\tconst aspectRatio =\r\n\t\tvalue.aspectRatio === undefined || value.aspectRatio === 'auto'\r\n\t\t\t? null\r\n\t\t\t: value.aspectRatio;\r\n\tconst scale =\r\n\t\tvalue.scale === undefined || value.scale === 'fill'\r\n\t\t\t? null\r\n\t\t\t: value.scale;\r\n\r\n\t// Keep track of state internally, so when the value is cleared by means\r\n\t// other than directly editing that field, it's easier to restore the\r\n\t// previous value.\r\n\tconst [ lastScale, setLastScale ] = useState( scale );\r\n\tconst [ lastAspectRatio, setLastAspectRatio ] = useState( aspectRatio );\r\n\r\n\t// 'custom' is not a valid value for CSS aspect-ratio, but it is used in the\r\n\t// dropdown to indicate that setting both the width and height is the same\r\n\t// as a custom aspect ratio.\r\n\tconst aspectRatioValue = width && height ? 'custom' : lastAspectRatio;\r\n\r\n\tconst showScaleControl = aspectRatio || ( width && height );\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ tools.includes( 'aspectRatio' ) && (\r\n\t\t\t\t<AspectRatioTool\r\n\t\t\t\t\tpanelId={ panelId }\r\n\t\t\t\t\toptions={ aspectRatioOptions }\r\n\t\t\t\t\tdefaultValue={ defaultAspectRatio }\r\n\t\t\t\t\tvalue={ aspectRatioValue }\r\n\t\t\t\t\tonChange={ ( nextAspectRatio ) => {\r\n\t\t\t\t\t\tconst nextValue = { ...value };\r\n\r\n\t\t\t\t\t\t// 'auto' is CSS default, so it gets treated as null.\r\n\t\t\t\t\t\tnextAspectRatio =\r\n\t\t\t\t\t\t\tnextAspectRatio === 'auto' ? null : nextAspectRatio;\r\n\r\n\t\t\t\t\t\tsetLastAspectRatio( nextAspectRatio );\r\n\r\n\t\t\t\t\t\t// Update aspectRatio.\r\n\t\t\t\t\t\tif ( ! nextAspectRatio ) {\r\n\t\t\t\t\t\t\tdelete nextValue.aspectRatio;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnextValue.aspectRatio = nextAspectRatio;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Auto-update scale.\r\n\t\t\t\t\t\tif ( ! nextAspectRatio ) {\r\n\t\t\t\t\t\t\tdelete nextValue.scale;\r\n\t\t\t\t\t\t} else if ( lastScale ) {\r\n\t\t\t\t\t\t\tnextValue.scale = lastScale;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnextValue.scale = defaultScale;\r\n\t\t\t\t\t\t\tsetLastScale( defaultScale );\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Auto-update width and height.\r\n\t\t\t\t\t\tif ( 'custom' !== nextAspectRatio && width && height ) {\r\n\t\t\t\t\t\t\tdelete nextValue.height;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tonChange( nextValue );\r\n\t\t\t\t\t} }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t\t{ tools.includes( 'widthHeight' ) && (\r\n\t\t\t\t<WidthHeightTool\r\n\t\t\t\t\tpanelId={ panelId }\r\n\t\t\t\t\tunits={ unitsOptions }\r\n\t\t\t\t\tvalue={ { width, height } }\r\n\t\t\t\t\tonChange={ ( { width: nextWidth, height: nextHeight } ) => {\r\n\t\t\t\t\t\tconst nextValue = { ...value };\r\n\r\n\t\t\t\t\t\t// 'auto' is CSS default, so it gets treated as null.\r\n\t\t\t\t\t\tnextWidth = nextWidth === 'auto' ? null : nextWidth;\r\n\t\t\t\t\t\tnextHeight = nextHeight === 'auto' ? null : nextHeight;\r\n\r\n\t\t\t\t\t\t// Update width.\r\n\t\t\t\t\t\tif ( ! nextWidth ) {\r\n\t\t\t\t\t\t\tdelete nextValue.width;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnextValue.width = nextWidth;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Update height.\r\n\t\t\t\t\t\tif ( ! nextHeight ) {\r\n\t\t\t\t\t\t\tdelete nextValue.height;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnextValue.height = nextHeight;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Auto-update aspectRatio.\r\n\t\t\t\t\t\tif ( nextWidth && nextHeight ) {\r\n\t\t\t\t\t\t\tdelete nextValue.aspectRatio;\r\n\t\t\t\t\t\t} else if ( lastAspectRatio ) {\r\n\t\t\t\t\t\t\tnextValue.aspectRatio = lastAspectRatio;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// No setting defaultAspectRatio here, because\r\n\t\t\t\t\t\t\t// aspectRatio is optional in this scenario,\r\n\t\t\t\t\t\t\t// unlike scale.\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Auto-update scale.\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t! lastAspectRatio &&\r\n\t\t\t\t\t\t\t!! nextWidth !== !! nextHeight\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tdelete nextValue.scale;\r\n\t\t\t\t\t\t} else if ( lastScale ) {\r\n\t\t\t\t\t\t\tnextValue.scale = lastScale;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnextValue.scale = defaultScale;\r\n\t\t\t\t\t\t\tsetLastScale( defaultScale );\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tonChange( nextValue );\r\n\t\t\t\t\t} }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t\t{ tools.includes( 'scale' ) && showScaleControl && (\r\n\t\t\t\t<ScaleTool\r\n\t\t\t\t\tpanelId={ panelId }\r\n\t\t\t\t\toptions={ scaleOptions }\r\n\t\t\t\t\tdefaultValue={ defaultScale }\r\n\t\t\t\t\tvalue={ lastScale }\r\n\t\t\t\t\tonChange={ ( nextScale ) => {\r\n\t\t\t\t\t\tconst nextValue = { ...value };\r\n\r\n\t\t\t\t\t\t// 'fill' is CSS default, so it gets treated as null.\r\n\t\t\t\t\t\tnextScale = nextScale === 'fill' ? null : nextScale;\r\n\r\n\t\t\t\t\t\tsetLastScale( nextScale );\r\n\r\n\t\t\t\t\t\t// Update scale.\r\n\t\t\t\t\t\tif ( ! nextScale ) {\r\n\t\t\t\t\t\t\tdelete nextValue.scale;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnextValue.scale = nextScale;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tonChange( nextValue );\r\n\t\t\t\t\t} }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default DimensionsTool;\r\n"],"mappings":"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","ignoreList":[]}