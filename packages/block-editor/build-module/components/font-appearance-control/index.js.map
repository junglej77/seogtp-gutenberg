{"version":3,"names":["CustomSelectControl","useMemo","__","sprintf","getFontStylesAndWeights","jsx","_jsx","getFontAppearanceLabel","hasFontStyles","hasFontWeights","FontAppearanceControl","props","__next40pxDefaultSize","onChange","fontFamilyFaces","value","fontStyle","fontWeight","otherProps","hasStylesOrWeights","label","defaultOption","key","name","style","undefined","fontStyles","fontWeights","combinedStyleAndWeightOptions","combineOptions","combinedOptions","push","styleOptions","forEach","weightOptions","selectOptions","options","currentSelection","find","option","getDescribedBy","className","describedBy","selectedItem"],"sources":["@wordpress/block-editor/src/components/font-appearance-control/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { CustomSelectControl } from '@wordpress/components';\r\nimport { useMemo } from '@wordpress/element';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { getFontStylesAndWeights } from '../../utils/get-font-styles-and-weights';\r\n\r\n/**\r\n * Adjusts font appearance field label in case either font styles or weights\r\n * are disabled.\r\n *\r\n * @param {boolean} hasFontStyles  Whether font styles are enabled and present.\r\n * @param {boolean} hasFontWeights Whether font weights are enabled and present.\r\n * @return {string} A label representing what font appearance is being edited.\r\n */\r\nconst getFontAppearanceLabel = ( hasFontStyles, hasFontWeights ) => {\r\n\tif ( ! hasFontStyles ) {\r\n\t\treturn __( 'Font weight' );\r\n\t}\r\n\r\n\tif ( ! hasFontWeights ) {\r\n\t\treturn __( 'Font style' );\r\n\t}\r\n\r\n\treturn __( 'Appearance' );\r\n};\r\n\r\n/**\r\n * Control to display font style and weight options of the active font.\r\n *\r\n * @param {Object} props Component props.\r\n *\r\n * @return {Element} Font appearance control.\r\n */\r\nexport default function FontAppearanceControl( props ) {\r\n\tconst {\r\n\t\t/** Start opting into the larger default height that will become the default size in a future version. */\r\n\t\t__next40pxDefaultSize = false,\r\n\t\tonChange,\r\n\t\thasFontStyles = true,\r\n\t\thasFontWeights = true,\r\n\t\tfontFamilyFaces,\r\n\t\tvalue: { fontStyle, fontWeight },\r\n\t\t...otherProps\r\n\t} = props;\r\n\tconst hasStylesOrWeights = hasFontStyles || hasFontWeights;\r\n\tconst label = getFontAppearanceLabel( hasFontStyles, hasFontWeights );\r\n\tconst defaultOption = {\r\n\t\tkey: 'default',\r\n\t\tname: __( 'Default' ),\r\n\t\tstyle: { fontStyle: undefined, fontWeight: undefined },\r\n\t};\r\n\tconst { fontStyles, fontWeights, combinedStyleAndWeightOptions } =\r\n\t\tgetFontStylesAndWeights( fontFamilyFaces );\r\n\r\n\t// Generates select options for combined font styles and weights.\r\n\tconst combineOptions = () => {\r\n\t\tconst combinedOptions = [ defaultOption ];\r\n\t\tif ( combinedStyleAndWeightOptions ) {\r\n\t\t\tcombinedOptions.push( ...combinedStyleAndWeightOptions );\r\n\t\t}\r\n\t\treturn combinedOptions;\r\n\t};\r\n\r\n\t// Generates select options for font styles only.\r\n\tconst styleOptions = () => {\r\n\t\tconst combinedOptions = [ defaultOption ];\r\n\t\tfontStyles.forEach( ( { name, value } ) => {\r\n\t\t\tcombinedOptions.push( {\r\n\t\t\t\tkey: value,\r\n\t\t\t\tname,\r\n\t\t\t\tstyle: { fontStyle: value, fontWeight: undefined },\r\n\t\t\t} );\r\n\t\t} );\r\n\t\treturn combinedOptions;\r\n\t};\r\n\r\n\t// Generates select options for font weights only.\r\n\tconst weightOptions = () => {\r\n\t\tconst combinedOptions = [ defaultOption ];\r\n\t\tfontWeights.forEach( ( { name, value } ) => {\r\n\t\t\tcombinedOptions.push( {\r\n\t\t\t\tkey: value,\r\n\t\t\t\tname,\r\n\t\t\t\tstyle: { fontStyle: undefined, fontWeight: value },\r\n\t\t\t} );\r\n\t\t} );\r\n\t\treturn combinedOptions;\r\n\t};\r\n\r\n\t// Map font styles and weights to select options.\r\n\tconst selectOptions = useMemo( () => {\r\n\t\t// Display combined available font style and weight options.\r\n\t\tif ( hasFontStyles && hasFontWeights ) {\r\n\t\t\treturn combineOptions();\r\n\t\t}\r\n\r\n\t\t// Display only font style options or font weight options.\r\n\t\treturn hasFontStyles ? styleOptions() : weightOptions();\r\n\t}, [\r\n\t\tprops.options,\r\n\t\tfontStyles,\r\n\t\tfontWeights,\r\n\t\tcombinedStyleAndWeightOptions,\r\n\t] );\r\n\r\n\t// Find current selection by comparing font style & weight against options,\r\n\t// and fall back to the Default option if there is no matching option.\r\n\tconst currentSelection =\r\n\t\tselectOptions.find(\r\n\t\t\t( option ) =>\r\n\t\t\t\toption.style.fontStyle === fontStyle &&\r\n\t\t\t\toption.style.fontWeight === fontWeight\r\n\t\t) || selectOptions[ 0 ];\r\n\r\n\t// Adjusts screen reader description based on styles or weights.\r\n\tconst getDescribedBy = () => {\r\n\t\tif ( ! currentSelection ) {\r\n\t\t\treturn __( 'No selected font appearance' );\r\n\t\t}\r\n\r\n\t\tif ( ! hasFontStyles ) {\r\n\t\t\treturn sprintf(\r\n\t\t\t\t// translators: %s: Currently selected font weight.\r\n\t\t\t\t__( 'Currently selected font weight: %s' ),\r\n\t\t\t\tcurrentSelection.name\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif ( ! hasFontWeights ) {\r\n\t\t\treturn sprintf(\r\n\t\t\t\t// translators: %s: Currently selected font style.\r\n\t\t\t\t__( 'Currently selected font style: %s' ),\r\n\t\t\t\tcurrentSelection.name\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn sprintf(\r\n\t\t\t// translators: %s: Currently selected font appearance.\r\n\t\t\t__( 'Currently selected font appearance: %s' ),\r\n\t\t\tcurrentSelection.name\r\n\t\t);\r\n\t};\r\n\r\n\treturn (\r\n\t\thasStylesOrWeights && (\r\n\t\t\t<CustomSelectControl\r\n\t\t\t\t{ ...otherProps }\r\n\t\t\t\tclassName=\"components-font-appearance-control\"\r\n\t\t\t\t__next40pxDefaultSize={ __next40pxDefaultSize }\r\n\t\t\t\tlabel={ label }\r\n\t\t\t\tdescribedBy={ getDescribedBy() }\r\n\t\t\t\toptions={ selectOptions }\r\n\t\t\t\tvalue={ currentSelection }\r\n\t\t\t\tonChange={ ( { selectedItem } ) =>\r\n\t\t\t\t\tonChange( selectedItem.style )\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\t\t)\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}