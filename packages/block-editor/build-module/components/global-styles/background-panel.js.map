{"version":3,"names":["clsx","__experimentalToolsPanel","ToolsPanel","__experimentalToolsPanelItem","ToolsPanelItem","ToggleControl","__experimentalToggleGroupControl","ToggleGroupControl","__experimentalToggleGroupControlOption","ToggleGroupControlOption","__experimentalUnitControl","UnitControl","__experimentalVStack","VStack","DropZone","FlexItem","FocalPointPicker","MenuItem","VisuallyHidden","__experimentalItemGroup","ItemGroup","__experimentalHStack","HStack","__experimentalTruncate","Truncate","Dropdown","Placeholder","Spinner","__experimentalDropdownContentWrapper","DropdownContentWrapper","__","_x","sprintf","store","noticesStore","getFilename","useCallback","Platform","useRef","useState","useEffect","useMemo","useDispatch","useSelect","focus","isBlobURL","useToolsPanelDropdownMenuProps","getResolvedValue","setImmutably","MediaReplaceFlow","blockEditorStore","globalStylesDataKey","globalStylesLinksDataKey","jsx","_jsx","jsxs","_jsxs","IMAGE_BACKGROUND_TYPE","DEFAULT_CONTROLS","backgroundImage","BACKGROUND_POPOVER_PROPS","placement","offset","shift","className","noop","useHasBackgroundPanel","settings","OS","background","hasBackgroundSizeValue","style","backgroundPosition","undefined","backgroundSize","hasBackgroundImageValue","id","url","backgroundSizeHelpText","value","coordsToBackgroundPosition","isNaN","x","y","backgroundPositionToCoords","split","map","v","parseFloat","InspectorImagePreviewItem","as","imgUrl","toggleProps","filename","label","onToggleCallback","isOpen","children","justify","flexGrow","numberOfLines","BackgroundControlsPanel","onToggle","hasImageValue","imgLabel","popoverProps","renderToggle","onClick","renderContent","paddingSize","LoadingSpinner","BackgroundImageControls","onChange","inheritedValue","onRemoveImage","onResetImage","displayInPanel","defaultValues","isUploading","setIsUploading","getSettings","title","replaceContainerRef","createErrorNotice","onUploadError","message","type","resetBackgroundImage","onSelectMedia","media","media_type","sizeValue","positionValue","source","onFilesDrop","filesList","length","mediaUpload","allowedTypes","onFileChange","image","onError","hasValue","closeAndFocus","toggleButton","tabbable","find","current","click","onRemove","canRemove","ref","mediaId","mediaURL","accept","onSelect","name","variant","onReset","BackgroundSizeControls","repeatValue","backgroundRepeat","imageValue","isUploadedImage","attachmentValue","backgroundAttachment","currentValueForToggle","includes","repeatCheckedValue","updateBackgroundSize","next","nextRepeat","nextPosition","updateBackgroundPosition","toggleIsRepeated","toggleScrollWithPage","backgroundPositionValue","spacing","__nextHasNoMarginBottom","checked","size","isBlock","help","__unstableInputWidth","min","placeholder","disabled","BackgroundToolsPanel","resetAllFilter","panelId","headerLabel","dropdownMenuProps","resetAll","updatedValue","BackgroundPanel","Wrapper","defaultControls","globalStyles","_links","select","_settings","resolvedInheritedValue","resolvedValues","Object","entries","forEach","key","backgroundValue","styles","previousValue","resetBackground","shouldShowBackgroundImageControls","isDropDownOpen","setIsDropDownOpen","onDeselect","isShownByDefault"],"sources":["@wordpress/block-editor/src/components/global-styles/background-panel.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\t__experimentalToolsPanel as ToolsPanel,\r\n\t__experimentalToolsPanelItem as ToolsPanelItem,\r\n\tToggleControl,\r\n\t__experimentalToggleGroupControl as ToggleGroupControl,\r\n\t__experimentalToggleGroupControlOption as ToggleGroupControlOption,\r\n\t__experimentalUnitControl as UnitControl,\r\n\t__experimentalVStack as VStack,\r\n\tDropZone,\r\n\tFlexItem,\r\n\tFocalPointPicker,\r\n\tMenuItem,\r\n\tVisuallyHidden,\r\n\t__experimentalItemGroup as ItemGroup,\r\n\t__experimentalHStack as HStack,\r\n\t__experimentalTruncate as Truncate,\r\n\tDropdown,\r\n\tPlaceholder,\r\n\tSpinner,\r\n\t__experimentalDropdownContentWrapper as DropdownContentWrapper,\r\n} from '@wordpress/components';\r\nimport { __, _x, sprintf } from '@wordpress/i18n';\r\nimport { store as noticesStore } from '@wordpress/notices';\r\nimport { getFilename } from '@wordpress/url';\r\nimport {\r\n\tuseCallback,\r\n\tPlatform,\r\n\tuseRef,\r\n\tuseState,\r\n\tuseEffect,\r\n\tuseMemo,\r\n} from '@wordpress/element';\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\nimport { focus } from '@wordpress/dom';\r\nimport { isBlobURL } from '@wordpress/blob';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { useToolsPanelDropdownMenuProps, getResolvedValue } from './utils';\r\nimport { setImmutably } from '../../utils/object';\r\nimport MediaReplaceFlow from '../media-replace-flow';\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nimport {\r\n\tglobalStylesDataKey,\r\n\tglobalStylesLinksDataKey,\r\n} from '../../store/private-keys';\r\n\r\nconst IMAGE_BACKGROUND_TYPE = 'image';\r\nconst DEFAULT_CONTROLS = {\r\n\tbackgroundImage: true,\r\n};\r\nconst BACKGROUND_POPOVER_PROPS = {\r\n\tplacement: 'left-start',\r\n\toffset: 36,\r\n\tshift: true,\r\n\tclassName: 'block-editor-global-styles-background-panel__popover',\r\n};\r\nconst noop = () => {};\r\n\r\n/**\r\n * Checks site settings to see if the background panel may be used.\r\n * `settings.background.backgroundSize` exists also,\r\n * but can only be used if settings?.background?.backgroundImage is `true`.\r\n *\r\n * @param {Object} settings Site settings\r\n * @return {boolean}        Whether site settings has activated background panel.\r\n */\r\nexport function useHasBackgroundPanel( settings ) {\r\n\treturn Platform.OS === 'web' && settings?.background?.backgroundImage;\r\n}\r\n\r\n/**\r\n * Checks if there is a current value in the background size block support\r\n * attributes. Background size values include background size as well\r\n * as background position.\r\n *\r\n * @param {Object} style Style attribute.\r\n * @return {boolean}     Whether the block has a background size value set.\r\n */\r\nexport function hasBackgroundSizeValue( style ) {\r\n\treturn (\r\n\t\tstyle?.background?.backgroundPosition !== undefined ||\r\n\t\tstyle?.background?.backgroundSize !== undefined\r\n\t);\r\n}\r\n\r\n/**\r\n * Checks if there is a current value in the background image block support\r\n * attributes.\r\n *\r\n * @param {Object} style Style attribute.\r\n * @return {boolean}     Whether the block has a background image value set.\r\n */\r\nexport function hasBackgroundImageValue( style ) {\r\n\treturn (\r\n\t\t!! style?.background?.backgroundImage?.id ||\r\n\t\t// Supports url() string values in theme.json.\r\n\t\t'string' === typeof style?.background?.backgroundImage ||\r\n\t\t!! style?.background?.backgroundImage?.url\r\n\t);\r\n}\r\n\r\n/**\r\n * Get the help text for the background size control.\r\n *\r\n * @param {string} value backgroundSize value.\r\n * @return {string}      Translated help text.\r\n */\r\nfunction backgroundSizeHelpText( value ) {\r\n\tif ( value === 'cover' || value === undefined ) {\r\n\t\treturn __( 'Image covers the space evenly.' );\r\n\t}\r\n\tif ( value === 'contain' ) {\r\n\t\treturn __( 'Image is contained without distortion.' );\r\n\t}\r\n\treturn __( 'Image has a fixed width.' );\r\n}\r\n\r\n/**\r\n * Converts decimal x and y coords from FocalPointPicker to percentage-based values\r\n * to use as backgroundPosition value.\r\n *\r\n * @param {{x?:number, y?:number}} value FocalPointPicker coords.\r\n * @return {string}      \t\t\t\t backgroundPosition value.\r\n */\r\nexport const coordsToBackgroundPosition = ( value ) => {\r\n\tif ( ! value || ( isNaN( value.x ) && isNaN( value.y ) ) ) {\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tconst x = isNaN( value.x ) ? 0.5 : value.x;\r\n\tconst y = isNaN( value.y ) ? 0.5 : value.y;\r\n\r\n\treturn `${ x * 100 }% ${ y * 100 }%`;\r\n};\r\n\r\n/**\r\n * Converts backgroundPosition value to x and y coords for FocalPointPicker.\r\n *\r\n * @param {string} value backgroundPosition value.\r\n * @return {{x?:number, y?:number}}       FocalPointPicker coords.\r\n */\r\nexport const backgroundPositionToCoords = ( value ) => {\r\n\tif ( ! value ) {\r\n\t\treturn { x: undefined, y: undefined };\r\n\t}\r\n\r\n\tlet [ x, y ] = value.split( ' ' ).map( ( v ) => parseFloat( v ) / 100 );\r\n\tx = isNaN( x ) ? undefined : x;\r\n\ty = isNaN( y ) ? x : y;\r\n\r\n\treturn { x, y };\r\n};\r\n\r\nfunction InspectorImagePreviewItem( {\r\n\tas = 'span',\r\n\timgUrl,\r\n\ttoggleProps = {},\r\n\tfilename,\r\n\tlabel,\r\n\tclassName,\r\n\tonToggleCallback = noop,\r\n} ) {\r\n\tuseEffect( () => {\r\n\t\tif ( typeof toggleProps?.isOpen !== 'undefined' ) {\r\n\t\t\tonToggleCallback( toggleProps?.isOpen );\r\n\t\t}\r\n\t}, [ toggleProps?.isOpen, onToggleCallback ] );\r\n\treturn (\r\n\t\t<ItemGroup as={ as } className={ className } { ...toggleProps }>\r\n\t\t\t<HStack\r\n\t\t\t\tjustify=\"flex-start\"\r\n\t\t\t\tas=\"span\"\r\n\t\t\t\tclassName=\"block-editor-global-styles-background-panel__inspector-preview-inner\"\r\n\t\t\t>\r\n\t\t\t\t{ imgUrl && (\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tclassName=\"block-editor-global-styles-background-panel__inspector-image-indicator-wrapper\"\r\n\t\t\t\t\t\taria-hidden\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\tclassName=\"block-editor-global-styles-background-panel__inspector-image-indicator\"\r\n\t\t\t\t\t\t\tstyle={ {\r\n\t\t\t\t\t\t\t\tbackgroundImage: `url(${ imgUrl })`,\r\n\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t) }\r\n\t\t\t\t<FlexItem as=\"span\" style={ imgUrl ? {} : { flexGrow: 1 } }>\r\n\t\t\t\t\t<Truncate\r\n\t\t\t\t\t\tnumberOfLines={ 1 }\r\n\t\t\t\t\t\tclassName=\"block-editor-global-styles-background-panel__inspector-media-replace-title\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ label }\r\n\t\t\t\t\t</Truncate>\r\n\t\t\t\t\t<VisuallyHidden as=\"span\">\r\n\t\t\t\t\t\t{ imgUrl\r\n\t\t\t\t\t\t\t? sprintf(\r\n\t\t\t\t\t\t\t\t\t/* translators: %s: file name */\r\n\t\t\t\t\t\t\t\t\t__( 'Background image: %s' ),\r\n\t\t\t\t\t\t\t\t\tfilename || label\r\n\t\t\t\t\t\t\t  )\r\n\t\t\t\t\t\t\t: __( 'No background image selected' ) }\r\n\t\t\t\t\t</VisuallyHidden>\r\n\t\t\t\t</FlexItem>\r\n\t\t\t</HStack>\r\n\t\t</ItemGroup>\r\n\t);\r\n}\r\n\r\nfunction BackgroundControlsPanel( {\r\n\tlabel,\r\n\tfilename,\r\n\turl: imgUrl,\r\n\tchildren,\r\n\tonToggle: onToggleCallback = noop,\r\n\thasImageValue,\r\n} ) {\r\n\tif ( ! hasImageValue ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst imgLabel =\r\n\t\tlabel || getFilename( imgUrl ) || __( 'Add background image' );\r\n\r\n\treturn (\r\n\t\t<Dropdown\r\n\t\t\tpopoverProps={ BACKGROUND_POPOVER_PROPS }\r\n\t\t\trenderToggle={ ( { onToggle, isOpen } ) => {\r\n\t\t\t\tconst toggleProps = {\r\n\t\t\t\t\tonClick: onToggle,\r\n\t\t\t\t\tclassName:\r\n\t\t\t\t\t\t'block-editor-global-styles-background-panel__dropdown-toggle',\r\n\t\t\t\t\t'aria-expanded': isOpen,\r\n\t\t\t\t\t'aria-label': __(\r\n\t\t\t\t\t\t'Background size, position and repeat options.'\r\n\t\t\t\t\t),\r\n\t\t\t\t\tisOpen,\r\n\t\t\t\t};\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<InspectorImagePreviewItem\r\n\t\t\t\t\t\timgUrl={ imgUrl }\r\n\t\t\t\t\t\tfilename={ filename }\r\n\t\t\t\t\t\tlabel={ imgLabel }\r\n\t\t\t\t\t\ttoggleProps={ toggleProps }\r\n\t\t\t\t\t\tas=\"button\"\r\n\t\t\t\t\t\tonToggleCallback={ onToggleCallback }\r\n\t\t\t\t\t/>\r\n\t\t\t\t);\r\n\t\t\t} }\r\n\t\t\trenderContent={ () => (\r\n\t\t\t\t<DropdownContentWrapper\r\n\t\t\t\t\tclassName=\"block-editor-global-styles-background-panel__dropdown-content-wrapper\"\r\n\t\t\t\t\tpaddingSize=\"medium\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{ children }\r\n\t\t\t\t</DropdownContentWrapper>\r\n\t\t\t) }\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nfunction LoadingSpinner() {\r\n\treturn (\r\n\t\t<Placeholder className=\"block-editor-global-styles-background-panel__loading\">\r\n\t\t\t<Spinner />\r\n\t\t</Placeholder>\r\n\t);\r\n}\r\n\r\nfunction BackgroundImageControls( {\r\n\tonChange,\r\n\tstyle,\r\n\tinheritedValue,\r\n\tonRemoveImage = noop,\r\n\tonResetImage = noop,\r\n\tdisplayInPanel,\r\n\tdefaultValues,\r\n} ) {\r\n\tconst [ isUploading, setIsUploading ] = useState( false );\r\n\tconst { getSettings } = useSelect( blockEditorStore );\r\n\r\n\tconst { id, title, url } = style?.background?.backgroundImage || {\r\n\t\t...inheritedValue?.background?.backgroundImage,\r\n\t};\r\n\tconst replaceContainerRef = useRef();\r\n\tconst { createErrorNotice } = useDispatch( noticesStore );\r\n\tconst onUploadError = ( message ) => {\r\n\t\tcreateErrorNotice( message, { type: 'snackbar' } );\r\n\t\tsetIsUploading( false );\r\n\t};\r\n\r\n\tconst resetBackgroundImage = () =>\r\n\t\tonChange(\r\n\t\t\tsetImmutably(\r\n\t\t\t\tstyle,\r\n\t\t\t\t[ 'background', 'backgroundImage' ],\r\n\t\t\t\tundefined\r\n\t\t\t)\r\n\t\t);\r\n\r\n\tconst onSelectMedia = ( media ) => {\r\n\t\tif ( ! media || ! media.url ) {\r\n\t\t\tresetBackgroundImage();\r\n\t\t\tsetIsUploading( false );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( isBlobURL( media.url ) ) {\r\n\t\t\tsetIsUploading( true );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// For media selections originated from a file upload.\r\n\t\tif (\r\n\t\t\t( media.media_type &&\r\n\t\t\t\tmedia.media_type !== IMAGE_BACKGROUND_TYPE ) ||\r\n\t\t\t( ! media.media_type &&\r\n\t\t\t\tmedia.type &&\r\n\t\t\t\tmedia.type !== IMAGE_BACKGROUND_TYPE )\r\n\t\t) {\r\n\t\t\tonUploadError(\r\n\t\t\t\t__( 'Only images can be used as a background image.' )\r\n\t\t\t);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst sizeValue =\r\n\t\t\tstyle?.background?.backgroundSize || defaultValues?.backgroundSize;\r\n\t\tconst positionValue = style?.background?.backgroundPosition;\r\n\t\tonChange(\r\n\t\t\tsetImmutably( style, [ 'background' ], {\r\n\t\t\t\t...style?.background,\r\n\t\t\t\tbackgroundImage: {\r\n\t\t\t\t\turl: media.url,\r\n\t\t\t\t\tid: media.id,\r\n\t\t\t\t\tsource: 'file',\r\n\t\t\t\t\ttitle: media.title || undefined,\r\n\t\t\t\t},\r\n\t\t\t\tbackgroundPosition:\r\n\t\t\t\t\t/*\r\n\t\t\t\t\t * A background image uploaded and set in the editor receives a default background position of '50% 0',\r\n\t\t\t\t\t * when the background image size is the equivalent of \"Tile\".\r\n\t\t\t\t\t * This is to increase the chance that the image's focus point is visible.\r\n\t\t\t\t\t * This is in-editor only to assist with the user experience.\r\n\t\t\t\t\t */\r\n\t\t\t\t\t! positionValue && ( 'auto' === sizeValue || ! sizeValue )\r\n\t\t\t\t\t\t? '50% 0'\r\n\t\t\t\t\t\t: positionValue,\r\n\t\t\t\tbackgroundSize: sizeValue,\r\n\t\t\t} )\r\n\t\t);\r\n\t\tsetIsUploading( false );\r\n\t};\r\n\r\n\t// Drag and drop callback, restricting image to one.\r\n\tconst onFilesDrop = ( filesList ) => {\r\n\t\tif ( filesList?.length > 1 ) {\r\n\t\t\tonUploadError(\r\n\t\t\t\t__( 'Only one image can be used as a background image.' )\r\n\t\t\t);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tgetSettings().mediaUpload( {\r\n\t\t\tallowedTypes: [ IMAGE_BACKGROUND_TYPE ],\r\n\t\t\tfilesList,\r\n\t\t\tonFileChange( [ image ] ) {\r\n\t\t\t\tonSelectMedia( image );\r\n\t\t\t},\r\n\t\t\tonError: onUploadError,\r\n\t\t} );\r\n\t};\r\n\r\n\tconst hasValue = hasBackgroundImageValue( style );\r\n\r\n\tconst closeAndFocus = () => {\r\n\t\tconst [ toggleButton ] = focus.tabbable.find(\r\n\t\t\treplaceContainerRef.current\r\n\t\t);\r\n\t\t// Focus the toggle button and close the dropdown menu.\r\n\t\t// This ensures similar behaviour as to selecting an image, where the dropdown is\r\n\t\t// closed and focus is redirected to the dropdown toggle button.\r\n\t\ttoggleButton?.focus();\r\n\t\ttoggleButton?.click();\r\n\t};\r\n\r\n\tconst onRemove = () =>\r\n\t\tonChange(\r\n\t\t\tsetImmutably( style, [ 'background' ], {\r\n\t\t\t\tbackgroundImage: 'none',\r\n\t\t\t} )\r\n\t\t);\r\n\tconst canRemove = ! hasValue && hasBackgroundImageValue( inheritedValue );\r\n\tconst imgLabel =\r\n\t\ttitle || getFilename( url ) || __( 'Add background image' );\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tref={ replaceContainerRef }\r\n\t\t\tclassName=\"block-editor-global-styles-background-panel__image-tools-panel-item\"\r\n\t\t>\r\n\t\t\t{ isUploading && <LoadingSpinner /> }\r\n\t\t\t<MediaReplaceFlow\r\n\t\t\t\tmediaId={ id }\r\n\t\t\t\tmediaURL={ url }\r\n\t\t\t\tallowedTypes={ [ IMAGE_BACKGROUND_TYPE ] }\r\n\t\t\t\taccept=\"image/*\"\r\n\t\t\t\tonSelect={ onSelectMedia }\r\n\t\t\t\tpopoverProps={ {\r\n\t\t\t\t\tclassName: clsx( {\r\n\t\t\t\t\t\t'block-editor-global-styles-background-panel__media-replace-popover':\r\n\t\t\t\t\t\t\tdisplayInPanel,\r\n\t\t\t\t\t} ),\r\n\t\t\t\t} }\r\n\t\t\t\tname={\r\n\t\t\t\t\t<InspectorImagePreviewItem\r\n\t\t\t\t\t\tclassName=\"block-editor-global-styles-background-panel__image-preview\"\r\n\t\t\t\t\t\timgUrl={ url }\r\n\t\t\t\t\t\tfilename={ title }\r\n\t\t\t\t\t\tlabel={ imgLabel }\r\n\t\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t\tvariant=\"secondary\"\r\n\t\t\t\tonError={ onUploadError }\r\n\t\t\t\tonReset={ () => {\r\n\t\t\t\t\tcloseAndFocus();\r\n\t\t\t\t\tonResetImage();\r\n\t\t\t\t} }\r\n\t\t\t>\r\n\t\t\t\t{ canRemove && (\r\n\t\t\t\t\t<MenuItem\r\n\t\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\t\tcloseAndFocus();\r\n\t\t\t\t\t\t\tonRemove();\r\n\t\t\t\t\t\t\tonRemoveImage();\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ __( 'Remove' ) }\r\n\t\t\t\t\t</MenuItem>\r\n\t\t\t\t) }\r\n\t\t\t</MediaReplaceFlow>\r\n\t\t\t<DropZone\r\n\t\t\t\tonFilesDrop={ onFilesDrop }\r\n\t\t\t\tlabel={ __( 'Drop to upload' ) }\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction BackgroundSizeControls( {\r\n\tonChange,\r\n\tstyle,\r\n\tinheritedValue,\r\n\tdefaultValues,\r\n} ) {\r\n\tconst sizeValue =\r\n\t\tstyle?.background?.backgroundSize ||\r\n\t\tinheritedValue?.background?.backgroundSize;\r\n\tconst repeatValue =\r\n\t\tstyle?.background?.backgroundRepeat ||\r\n\t\tinheritedValue?.background?.backgroundRepeat;\r\n\tconst imageValue =\r\n\t\tstyle?.background?.backgroundImage?.url ||\r\n\t\tinheritedValue?.background?.backgroundImage?.url;\r\n\tconst isUploadedImage = style?.background?.backgroundImage?.id;\r\n\tconst positionValue =\r\n\t\tstyle?.background?.backgroundPosition ||\r\n\t\tinheritedValue?.background?.backgroundPosition;\r\n\tconst attachmentValue =\r\n\t\tstyle?.background?.backgroundAttachment ||\r\n\t\tinheritedValue?.background?.backgroundAttachment;\r\n\r\n\t/*\r\n\t * Set default values for uploaded images.\r\n\t * The default values are passed by the consumer.\r\n\t * Block-level controls may have different defaults to root-level controls.\r\n\t * A falsy value is treated by default as `auto` (Tile).\r\n\t */\r\n\tlet currentValueForToggle =\r\n\t\t! sizeValue && isUploadedImage\r\n\t\t\t? defaultValues?.backgroundSize\r\n\t\t\t: sizeValue || 'auto';\r\n\t/*\r\n\t * The incoming value could be a value + unit, e.g. '20px'.\r\n\t * In this case set the value to 'tile'.\r\n\t */\r\n\tcurrentValueForToggle = ! [ 'cover', 'contain', 'auto' ].includes(\r\n\t\tcurrentValueForToggle\r\n\t)\r\n\t\t? 'auto'\r\n\t\t: currentValueForToggle;\r\n\t/*\r\n\t * If the current value is `cover` and the repeat value is `undefined`, then\r\n\t * the toggle should be unchecked as the default state. Otherwise, the toggle\r\n\t * should reflect the current repeat value.\r\n\t */\r\n\tconst repeatCheckedValue = ! (\r\n\t\trepeatValue === 'no-repeat' ||\r\n\t\t( currentValueForToggle === 'cover' && repeatValue === undefined )\r\n\t);\r\n\r\n\tconst updateBackgroundSize = ( next ) => {\r\n\t\t// When switching to 'contain' toggle the repeat off.\r\n\t\tlet nextRepeat = repeatValue;\r\n\t\tlet nextPosition = positionValue;\r\n\r\n\t\tif ( next === 'contain' ) {\r\n\t\t\tnextRepeat = 'no-repeat';\r\n\t\t\tnextPosition = undefined;\r\n\t\t}\r\n\r\n\t\tif ( next === 'cover' ) {\r\n\t\t\tnextRepeat = undefined;\r\n\t\t\tnextPosition = undefined;\r\n\t\t}\r\n\r\n\t\tif (\r\n\t\t\t( currentValueForToggle === 'cover' ||\r\n\t\t\t\tcurrentValueForToggle === 'contain' ) &&\r\n\t\t\tnext === 'auto'\r\n\t\t) {\r\n\t\t\tnextRepeat = undefined;\r\n\t\t\t/*\r\n\t\t\t * A background image uploaded and set in the editor (an image with a record id),\r\n\t\t\t * receives a default background position of '50% 0',\r\n\t\t\t * when the toggle switches to \"Tile\". This is to increase the chance that\r\n\t\t\t * the image's focus point is visible.\r\n\t\t\t * This is in-editor only to assist with the user experience.\r\n\t\t\t */\r\n\t\t\tif ( !! style?.background?.backgroundImage?.id ) {\r\n\t\t\t\tnextPosition = '50% 0';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Next will be null when the input is cleared,\r\n\t\t * in which case the value should be 'auto'.\r\n\t\t */\r\n\t\tif ( ! next && currentValueForToggle === 'auto' ) {\r\n\t\t\tnext = 'auto';\r\n\t\t}\r\n\r\n\t\tonChange(\r\n\t\t\tsetImmutably( style, [ 'background' ], {\r\n\t\t\t\t...style?.background,\r\n\t\t\t\tbackgroundPosition: nextPosition,\r\n\t\t\t\tbackgroundRepeat: nextRepeat,\r\n\t\t\t\tbackgroundSize: next,\r\n\t\t\t} )\r\n\t\t);\r\n\t};\r\n\r\n\tconst updateBackgroundPosition = ( next ) => {\r\n\t\tonChange(\r\n\t\t\tsetImmutably(\r\n\t\t\t\tstyle,\r\n\t\t\t\t[ 'background', 'backgroundPosition' ],\r\n\t\t\t\tcoordsToBackgroundPosition( next )\r\n\t\t\t)\r\n\t\t);\r\n\t};\r\n\r\n\tconst toggleIsRepeated = () =>\r\n\t\tonChange(\r\n\t\t\tsetImmutably(\r\n\t\t\t\tstyle,\r\n\t\t\t\t[ 'background', 'backgroundRepeat' ],\r\n\t\t\t\trepeatCheckedValue === true ? 'no-repeat' : 'repeat'\r\n\t\t\t)\r\n\t\t);\r\n\r\n\tconst toggleScrollWithPage = () =>\r\n\t\tonChange(\r\n\t\t\tsetImmutably(\r\n\t\t\t\tstyle,\r\n\t\t\t\t[ 'background', 'backgroundAttachment' ],\r\n\t\t\t\tattachmentValue === 'fixed' ? 'scroll' : 'fixed'\r\n\t\t\t)\r\n\t\t);\r\n\r\n\t// Set a default background position for non-site-wide, uploaded images with a size of 'contain'.\r\n\tconst backgroundPositionValue =\r\n\t\t! positionValue && isUploadedImage && 'contain' === sizeValue\r\n\t\t\t? defaultValues?.backgroundPosition\r\n\t\t\t: positionValue;\r\n\r\n\treturn (\r\n\t\t<VStack spacing={ 3 } className=\"single-column\">\r\n\t\t\t<FocalPointPicker\r\n\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\tlabel={ __( 'Focal point' ) }\r\n\t\t\t\turl={ imageValue }\r\n\t\t\t\tvalue={ backgroundPositionToCoords( backgroundPositionValue ) }\r\n\t\t\t\tonChange={ updateBackgroundPosition }\r\n\t\t\t/>\r\n\t\t\t<ToggleControl\r\n\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\tlabel={ __( 'Fixed background' ) }\r\n\t\t\t\tchecked={ attachmentValue === 'fixed' }\r\n\t\t\t\tonChange={ toggleScrollWithPage }\r\n\t\t\t/>\r\n\t\t\t<ToggleGroupControl\r\n\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\tsize=\"__unstable-large\"\r\n\t\t\t\tlabel={ __( 'Size' ) }\r\n\t\t\t\tvalue={ currentValueForToggle }\r\n\t\t\t\tonChange={ updateBackgroundSize }\r\n\t\t\t\tisBlock\r\n\t\t\t\thelp={ backgroundSizeHelpText(\r\n\t\t\t\t\tsizeValue || defaultValues?.backgroundSize\r\n\t\t\t\t) }\r\n\t\t\t>\r\n\t\t\t\t<ToggleGroupControlOption\r\n\t\t\t\t\tkey=\"cover\"\r\n\t\t\t\t\tvalue=\"cover\"\r\n\t\t\t\t\tlabel={ _x(\r\n\t\t\t\t\t\t'Cover',\r\n\t\t\t\t\t\t'Size option for background image control'\r\n\t\t\t\t\t) }\r\n\t\t\t\t/>\r\n\t\t\t\t<ToggleGroupControlOption\r\n\t\t\t\t\tkey=\"contain\"\r\n\t\t\t\t\tvalue=\"contain\"\r\n\t\t\t\t\tlabel={ _x(\r\n\t\t\t\t\t\t'Contain',\r\n\t\t\t\t\t\t'Size option for background image control'\r\n\t\t\t\t\t) }\r\n\t\t\t\t/>\r\n\t\t\t\t<ToggleGroupControlOption\r\n\t\t\t\t\tkey=\"tile\"\r\n\t\t\t\t\tvalue=\"auto\"\r\n\t\t\t\t\tlabel={ _x(\r\n\t\t\t\t\t\t'Tile',\r\n\t\t\t\t\t\t'Size option for background image control'\r\n\t\t\t\t\t) }\r\n\t\t\t\t/>\r\n\t\t\t</ToggleGroupControl>\r\n\t\t\t<HStack justify=\"flex-start\" spacing={ 2 } as=\"span\">\r\n\t\t\t\t<UnitControl\r\n\t\t\t\t\taria-label={ __( 'Background image width' ) }\r\n\t\t\t\t\tonChange={ updateBackgroundSize }\r\n\t\t\t\t\tvalue={ sizeValue }\r\n\t\t\t\t\tsize=\"__unstable-large\"\r\n\t\t\t\t\t__unstableInputWidth=\"100px\"\r\n\t\t\t\t\tmin={ 0 }\r\n\t\t\t\t\tplaceholder={ __( 'Auto' ) }\r\n\t\t\t\t\tdisabled={\r\n\t\t\t\t\t\tcurrentValueForToggle !== 'auto' ||\r\n\t\t\t\t\t\tcurrentValueForToggle === undefined\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t\t<ToggleControl\r\n\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\tlabel={ __( 'Repeat' ) }\r\n\t\t\t\t\tchecked={ repeatCheckedValue }\r\n\t\t\t\t\tonChange={ toggleIsRepeated }\r\n\t\t\t\t\tdisabled={ currentValueForToggle === 'cover' }\r\n\t\t\t\t/>\r\n\t\t\t</HStack>\r\n\t\t</VStack>\r\n\t);\r\n}\r\n\r\nfunction BackgroundToolsPanel( {\r\n\tresetAllFilter,\r\n\tonChange,\r\n\tvalue,\r\n\tpanelId,\r\n\tchildren,\r\n\theaderLabel,\r\n} ) {\r\n\tconst dropdownMenuProps = useToolsPanelDropdownMenuProps();\r\n\tconst resetAll = () => {\r\n\t\tconst updatedValue = resetAllFilter( value );\r\n\t\tonChange( updatedValue );\r\n\t};\r\n\r\n\treturn (\r\n\t\t<ToolsPanel\r\n\t\t\tlabel={ headerLabel }\r\n\t\t\tresetAll={ resetAll }\r\n\t\t\tpanelId={ panelId }\r\n\t\t\tdropdownMenuProps={ dropdownMenuProps }\r\n\t\t>\r\n\t\t\t{ children }\r\n\t\t</ToolsPanel>\r\n\t);\r\n}\r\n\r\nexport default function BackgroundPanel( {\r\n\tas: Wrapper = BackgroundToolsPanel,\r\n\tvalue,\r\n\tonChange,\r\n\tinheritedValue = value,\r\n\tsettings,\r\n\tpanelId,\r\n\tdefaultControls = DEFAULT_CONTROLS,\r\n\tdefaultValues = {},\r\n\theaderLabel = __( 'Background image' ),\r\n} ) {\r\n\t/*\r\n\t * Resolve any inherited \"ref\" pointers.\r\n\t * Should the block editor need resolved, inherited values\r\n\t * across all controls, this could be abstracted into a hook,\r\n\t * e.g., useResolveGlobalStyle\r\n\t */\r\n\tconst { globalStyles, _links } = useSelect( ( select ) => {\r\n\t\tconst { getSettings } = select( blockEditorStore );\r\n\t\tconst _settings = getSettings();\r\n\t\treturn {\r\n\t\t\tglobalStyles: _settings[ globalStylesDataKey ],\r\n\t\t\t_links: _settings[ globalStylesLinksDataKey ],\r\n\t\t};\r\n\t}, [] );\r\n\tconst resolvedInheritedValue = useMemo( () => {\r\n\t\tconst resolvedValues = {\r\n\t\t\tbackground: {},\r\n\t\t};\r\n\r\n\t\tif ( ! inheritedValue?.background ) {\r\n\t\t\treturn inheritedValue;\r\n\t\t}\r\n\r\n\t\tObject.entries( inheritedValue?.background ).forEach(\r\n\t\t\t( [ key, backgroundValue ] ) => {\r\n\t\t\t\tresolvedValues.background[ key ] = getResolvedValue(\r\n\t\t\t\t\tbackgroundValue,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstyles: globalStyles,\r\n\t\t\t\t\t\t_links,\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t);\r\n\t\treturn resolvedValues;\r\n\t}, [ globalStyles, _links, inheritedValue ] );\r\n\r\n\tconst resetAllFilter = useCallback( ( previousValue ) => {\r\n\t\treturn {\r\n\t\t\t...previousValue,\r\n\t\t\tbackground: {},\r\n\t\t};\r\n\t}, [] );\r\n\r\n\tconst resetBackground = () =>\r\n\t\tonChange( setImmutably( value, [ 'background' ], {} ) );\r\n\r\n\tconst { title, url } = value?.background?.backgroundImage || {\r\n\t\t...resolvedInheritedValue?.background?.backgroundImage,\r\n\t};\r\n\tconst hasImageValue =\r\n\t\thasBackgroundImageValue( value ) ||\r\n\t\thasBackgroundImageValue( resolvedInheritedValue );\r\n\r\n\tconst imageValue =\r\n\t\tvalue?.background?.backgroundImage ||\r\n\t\tinheritedValue?.background?.backgroundImage;\r\n\r\n\tconst shouldShowBackgroundImageControls =\r\n\t\thasImageValue &&\r\n\t\t'none' !== imageValue &&\r\n\t\t( settings?.background?.backgroundSize ||\r\n\t\t\tsettings?.background?.backgroundPosition ||\r\n\t\t\tsettings?.background?.backgroundRepeat );\r\n\r\n\tconst [ isDropDownOpen, setIsDropDownOpen ] = useState( false );\r\n\r\n\treturn (\r\n\t\t<Wrapper\r\n\t\t\tresetAllFilter={ resetAllFilter }\r\n\t\t\tvalue={ value }\r\n\t\t\tonChange={ onChange }\r\n\t\t\tpanelId={ panelId }\r\n\t\t\theaderLabel={ headerLabel }\r\n\t\t>\r\n\t\t\t<div\r\n\t\t\t\tclassName={ clsx(\r\n\t\t\t\t\t'block-editor-global-styles-background-panel__inspector-media-replace-container',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'is-open': isDropDownOpen,\r\n\t\t\t\t\t}\r\n\t\t\t\t) }\r\n\t\t\t>\r\n\t\t\t\t<ToolsPanelItem\r\n\t\t\t\t\thasValue={ () => !! value?.background }\r\n\t\t\t\t\tlabel={ __( 'Image' ) }\r\n\t\t\t\t\tonDeselect={ resetBackground }\r\n\t\t\t\t\tisShownByDefault={ defaultControls.backgroundImage }\r\n\t\t\t\t\tpanelId={ panelId }\r\n\t\t\t\t>\r\n\t\t\t\t\t{ shouldShowBackgroundImageControls ? (\r\n\t\t\t\t\t\t<BackgroundControlsPanel\r\n\t\t\t\t\t\t\tlabel={ title }\r\n\t\t\t\t\t\t\tfilename={ title }\r\n\t\t\t\t\t\t\turl={ url }\r\n\t\t\t\t\t\t\tonToggle={ setIsDropDownOpen }\r\n\t\t\t\t\t\t\thasImageValue={ hasImageValue }\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<VStack spacing={ 3 } className=\"single-column\">\r\n\t\t\t\t\t\t\t\t<BackgroundImageControls\r\n\t\t\t\t\t\t\t\t\tonChange={ onChange }\r\n\t\t\t\t\t\t\t\t\tstyle={ value }\r\n\t\t\t\t\t\t\t\t\tinheritedValue={ resolvedInheritedValue }\r\n\t\t\t\t\t\t\t\t\tdisplayInPanel\r\n\t\t\t\t\t\t\t\t\tonResetImage={ () => {\r\n\t\t\t\t\t\t\t\t\t\tsetIsDropDownOpen( false );\r\n\t\t\t\t\t\t\t\t\t\tresetBackground();\r\n\t\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t\t\tonRemoveImage={ () =>\r\n\t\t\t\t\t\t\t\t\t\tsetIsDropDownOpen( false )\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tdefaultValues={ defaultValues }\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<BackgroundSizeControls\r\n\t\t\t\t\t\t\t\t\tonChange={ onChange }\r\n\t\t\t\t\t\t\t\t\tpanelId={ panelId }\r\n\t\t\t\t\t\t\t\t\tstyle={ value }\r\n\t\t\t\t\t\t\t\t\tdefaultValues={ defaultValues }\r\n\t\t\t\t\t\t\t\t\tinheritedValue={ resolvedInheritedValue }\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</VStack>\r\n\t\t\t\t\t\t</BackgroundControlsPanel>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<BackgroundImageControls\r\n\t\t\t\t\t\t\tonChange={ onChange }\r\n\t\t\t\t\t\t\tstyle={ value }\r\n\t\t\t\t\t\t\tinheritedValue={ resolvedInheritedValue }\r\n\t\t\t\t\t\t\tdefaultValues={ defaultValues }\r\n\t\t\t\t\t\t\tonResetImage={ () => {\r\n\t\t\t\t\t\t\t\tsetIsDropDownOpen( false );\r\n\t\t\t\t\t\t\t\tresetBackground();\r\n\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\tonRemoveImage={ () => setIsDropDownOpen( false ) }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) }\r\n\t\t\t\t</ToolsPanelItem>\r\n\t\t\t</div>\r\n\t\t</Wrapper>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}