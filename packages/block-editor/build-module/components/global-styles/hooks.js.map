{"version":3,"names":["fastDeepEqual","useContext","useCallback","useMemo","useSelect","store","blocksStore","_x","getValueFromVariable","getPresetVariableFromValue","getValueFromObjectPath","setImmutably","GlobalStylesContext","unlock","EMPTY_CONFIG","settings","styles","VALID_SETTINGS","useGlobalStylesReset","user","setUserConfig","config","canReset","useGlobalSetting","propertyPath","blockName","source","configs","appendedBlockPath","appendedPropertyPath","contextualPath","globalPath","sourceKey","settingValue","configToUse","_getValueFromObjectPa","result","forEach","setting","_getValueFromObjectPa2","value","undefined","split","setSetting","newValue","currentConfig","useGlobalStyle","path","shouldDecodeEncode","merged","mergedConfig","base","baseConfig","userConfig","appendedPath","finalPath","setStyle","rawResult","useSettingsForBlockElement","parentSettings","element","supportedStyles","supports","select","getSupportedStyles","getBlockType","updatedSettings","includes","typography","fontSizes","customFontSize","defaultFontSizes","fontFamilies","color","text","background","button","heading","link","caption","gradients","customGradient","defaultDuotone","customDuotone","key","textColumns","layout","spacing","sides","Array","isArray","length","dimensions","charAt","toUpperCase","slice","border","shadow","textAlign","useColorsPerOrigin","customColors","palette","custom","themeColors","theme","defaultColors","default","shouldDisplayDefaultColors","defaultPalette","push","name","colors","useGradientsPerOrigin","customGradients","themeGradients","defaultGradients","shouldDisplayDefaultGradients"],"sources":["@wordpress/block-editor/src/components/global-styles/hooks.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport fastDeepEqual from 'fast-deep-equal/es6';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useContext, useCallback, useMemo } from '@wordpress/element';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { store as blocksStore } from '@wordpress/blocks';\r\nimport { _x } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { getValueFromVariable, getPresetVariableFromValue } from './utils';\r\nimport { getValueFromObjectPath, setImmutably } from '../../utils/object';\r\nimport { GlobalStylesContext } from './context';\r\nimport { unlock } from '../../lock-unlock';\r\n\r\nconst EMPTY_CONFIG = { settings: {}, styles: {} };\r\n\r\nconst VALID_SETTINGS = [\r\n\t'appearanceTools',\r\n\t'useRootPaddingAwareAlignments',\r\n\t'background.backgroundImage',\r\n\t'background.backgroundRepeat',\r\n\t'background.backgroundSize',\r\n\t'background.backgroundPosition',\r\n\t'border.color',\r\n\t'border.radius',\r\n\t'border.style',\r\n\t'border.width',\r\n\t'shadow.presets',\r\n\t'shadow.defaultPresets',\r\n\t'color.background',\r\n\t'color.button',\r\n\t'color.caption',\r\n\t'color.custom',\r\n\t'color.customDuotone',\r\n\t'color.customGradient',\r\n\t'color.defaultDuotone',\r\n\t'color.defaultGradients',\r\n\t'color.defaultPalette',\r\n\t'color.duotone',\r\n\t'color.gradients',\r\n\t'color.heading',\r\n\t'color.link',\r\n\t'color.palette',\r\n\t'color.text',\r\n\t'custom',\r\n\t'dimensions.aspectRatio',\r\n\t'dimensions.minHeight',\r\n\t'layout.contentSize',\r\n\t'layout.definitions',\r\n\t'layout.wideSize',\r\n\t'lightbox.enabled',\r\n\t'lightbox.allowEditing',\r\n\t'position.fixed',\r\n\t'position.sticky',\r\n\t'spacing.customSpacingSize',\r\n\t'spacing.defaultSpacingSizes',\r\n\t'spacing.spacingSizes',\r\n\t'spacing.spacingScale',\r\n\t'spacing.blockGap',\r\n\t'spacing.margin',\r\n\t'spacing.padding',\r\n\t'spacing.units',\r\n\t'typography.fluid',\r\n\t'typography.customFontSize',\r\n\t'typography.defaultFontSizes',\r\n\t'typography.dropCap',\r\n\t'typography.fontFamilies',\r\n\t'typography.fontSizes',\r\n\t'typography.fontStyle',\r\n\t'typography.fontWeight',\r\n\t'typography.letterSpacing',\r\n\t'typography.lineHeight',\r\n\t'typography.textAlign',\r\n\t'typography.textColumns',\r\n\t'typography.textDecoration',\r\n\t'typography.textTransform',\r\n\t'typography.writingMode',\r\n];\r\n\r\nexport const useGlobalStylesReset = () => {\r\n\tconst { user, setUserConfig } = useContext( GlobalStylesContext );\r\n\tconst config = {\r\n\t\tsettings: user.settings,\r\n\t\tstyles: user.styles,\r\n\t};\r\n\tconst canReset = !! config && ! fastDeepEqual( config, EMPTY_CONFIG );\r\n\treturn [\r\n\t\tcanReset,\r\n\t\tuseCallback( () => setUserConfig( EMPTY_CONFIG ), [ setUserConfig ] ),\r\n\t];\r\n};\r\n\r\nexport function useGlobalSetting( propertyPath, blockName, source = 'all' ) {\r\n\tconst { setUserConfig, ...configs } = useContext( GlobalStylesContext );\r\n\tconst appendedBlockPath = blockName ? '.blocks.' + blockName : '';\r\n\tconst appendedPropertyPath = propertyPath ? '.' + propertyPath : '';\r\n\tconst contextualPath = `settings${ appendedBlockPath }${ appendedPropertyPath }`;\r\n\tconst globalPath = `settings${ appendedPropertyPath }`;\r\n\tconst sourceKey = source === 'all' ? 'merged' : source;\r\n\r\n\tconst settingValue = useMemo( () => {\r\n\t\tconst configToUse = configs[ sourceKey ];\r\n\t\tif ( ! configToUse ) {\r\n\t\t\tthrow 'Unsupported source';\r\n\t\t}\r\n\r\n\t\tif ( propertyPath ) {\r\n\t\t\treturn (\r\n\t\t\t\tgetValueFromObjectPath( configToUse, contextualPath ) ??\r\n\t\t\t\tgetValueFromObjectPath( configToUse, globalPath )\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet result = {};\r\n\t\tVALID_SETTINGS.forEach( ( setting ) => {\r\n\t\t\tconst value =\r\n\t\t\t\tgetValueFromObjectPath(\r\n\t\t\t\t\tconfigToUse,\r\n\t\t\t\t\t`settings${ appendedBlockPath }.${ setting }`\r\n\t\t\t\t) ??\r\n\t\t\t\tgetValueFromObjectPath( configToUse, `settings.${ setting }` );\r\n\t\t\tif ( value !== undefined ) {\r\n\t\t\t\tresult = setImmutably( result, setting.split( '.' ), value );\r\n\t\t\t}\r\n\t\t} );\r\n\t\treturn result;\r\n\t}, [\r\n\t\tconfigs,\r\n\t\tsourceKey,\r\n\t\tpropertyPath,\r\n\t\tcontextualPath,\r\n\t\tglobalPath,\r\n\t\tappendedBlockPath,\r\n\t] );\r\n\r\n\tconst setSetting = ( newValue ) => {\r\n\t\tsetUserConfig( ( currentConfig ) =>\r\n\t\t\tsetImmutably( currentConfig, contextualPath.split( '.' ), newValue )\r\n\t\t);\r\n\t};\r\n\treturn [ settingValue, setSetting ];\r\n}\r\n\r\nexport function useGlobalStyle(\r\n\tpath,\r\n\tblockName,\r\n\tsource = 'all',\r\n\t{ shouldDecodeEncode = true } = {}\r\n) {\r\n\tconst {\r\n\t\tmerged: mergedConfig,\r\n\t\tbase: baseConfig,\r\n\t\tuser: userConfig,\r\n\t\tsetUserConfig,\r\n\t} = useContext( GlobalStylesContext );\r\n\tconst appendedPath = path ? '.' + path : '';\r\n\tconst finalPath = ! blockName\r\n\t\t? `styles${ appendedPath }`\r\n\t\t: `styles.blocks.${ blockName }${ appendedPath }`;\r\n\r\n\tconst setStyle = ( newValue ) => {\r\n\t\tsetUserConfig( ( currentConfig ) =>\r\n\t\t\tsetImmutably(\r\n\t\t\t\tcurrentConfig,\r\n\t\t\t\tfinalPath.split( '.' ),\r\n\t\t\t\tshouldDecodeEncode\r\n\t\t\t\t\t? getPresetVariableFromValue(\r\n\t\t\t\t\t\t\tmergedConfig.settings,\r\n\t\t\t\t\t\t\tblockName,\r\n\t\t\t\t\t\t\tpath,\r\n\t\t\t\t\t\t\tnewValue\r\n\t\t\t\t\t  )\r\n\t\t\t\t\t: newValue\r\n\t\t\t)\r\n\t\t);\r\n\t};\r\n\r\n\tlet rawResult, result;\r\n\tswitch ( source ) {\r\n\t\tcase 'all':\r\n\t\t\trawResult = getValueFromObjectPath( mergedConfig, finalPath );\r\n\t\t\tresult = shouldDecodeEncode\r\n\t\t\t\t? getValueFromVariable( mergedConfig, blockName, rawResult )\r\n\t\t\t\t: rawResult;\r\n\t\t\tbreak;\r\n\t\tcase 'user':\r\n\t\t\trawResult = getValueFromObjectPath( userConfig, finalPath );\r\n\t\t\tresult = shouldDecodeEncode\r\n\t\t\t\t? getValueFromVariable( mergedConfig, blockName, rawResult )\r\n\t\t\t\t: rawResult;\r\n\t\t\tbreak;\r\n\t\tcase 'base':\r\n\t\t\trawResult = getValueFromObjectPath( baseConfig, finalPath );\r\n\t\t\tresult = shouldDecodeEncode\r\n\t\t\t\t? getValueFromVariable( baseConfig, blockName, rawResult )\r\n\t\t\t\t: rawResult;\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tthrow 'Unsupported source';\r\n\t}\r\n\r\n\treturn [ result, setStyle ];\r\n}\r\n\r\n/**\r\n * React hook that overrides a global settings object with block and element specific settings.\r\n *\r\n * @param {Object}     parentSettings Settings object.\r\n * @param {blockName?} blockName      Block name.\r\n * @param {element?}   element        Element name.\r\n *\r\n * @return {Object} Merge of settings and supports.\r\n */\r\nexport function useSettingsForBlockElement(\r\n\tparentSettings,\r\n\tblockName,\r\n\telement\r\n) {\r\n\tconst { supportedStyles, supports } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\treturn {\r\n\t\t\t\tsupportedStyles: unlock(\r\n\t\t\t\t\tselect( blocksStore )\r\n\t\t\t\t).getSupportedStyles( blockName, element ),\r\n\t\t\t\tsupports:\r\n\t\t\t\t\tselect( blocksStore ).getBlockType( blockName )?.supports,\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ blockName, element ]\r\n\t);\r\n\r\n\treturn useMemo( () => {\r\n\t\tconst updatedSettings = { ...parentSettings };\r\n\r\n\t\tif ( ! supportedStyles.includes( 'fontSize' ) ) {\r\n\t\t\tupdatedSettings.typography = {\r\n\t\t\t\t...updatedSettings.typography,\r\n\t\t\t\tfontSizes: {},\r\n\t\t\t\tcustomFontSize: false,\r\n\t\t\t\tdefaultFontSizes: false,\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tif ( ! supportedStyles.includes( 'fontFamily' ) ) {\r\n\t\t\tupdatedSettings.typography = {\r\n\t\t\t\t...updatedSettings.typography,\r\n\t\t\t\tfontFamilies: {},\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tupdatedSettings.color = {\r\n\t\t\t...updatedSettings.color,\r\n\t\t\ttext:\r\n\t\t\t\tupdatedSettings.color?.text &&\r\n\t\t\t\tsupportedStyles.includes( 'color' ),\r\n\t\t\tbackground:\r\n\t\t\t\tupdatedSettings.color?.background &&\r\n\t\t\t\t( supportedStyles.includes( 'background' ) ||\r\n\t\t\t\t\tsupportedStyles.includes( 'backgroundColor' ) ),\r\n\t\t\tbutton:\r\n\t\t\t\tupdatedSettings.color?.button &&\r\n\t\t\t\tsupportedStyles.includes( 'buttonColor' ),\r\n\t\t\theading:\r\n\t\t\t\tupdatedSettings.color?.heading &&\r\n\t\t\t\tsupportedStyles.includes( 'headingColor' ),\r\n\t\t\tlink:\r\n\t\t\t\tupdatedSettings.color?.link &&\r\n\t\t\t\tsupportedStyles.includes( 'linkColor' ),\r\n\t\t\tcaption:\r\n\t\t\t\tupdatedSettings.color?.caption &&\r\n\t\t\t\tsupportedStyles.includes( 'captionColor' ),\r\n\t\t};\r\n\r\n\t\t// Some blocks can enable background colors but disable gradients.\r\n\t\tif ( ! supportedStyles.includes( 'background' ) ) {\r\n\t\t\tupdatedSettings.color.gradients = [];\r\n\t\t\tupdatedSettings.color.customGradient = false;\r\n\t\t}\r\n\r\n\t\t// If filters are not supported by the block/element, disable duotone.\r\n\t\tif ( ! supportedStyles.includes( 'filter' ) ) {\r\n\t\t\tupdatedSettings.color.defaultDuotone = false;\r\n\t\t\tupdatedSettings.color.customDuotone = false;\r\n\t\t}\r\n\r\n\t\t[\r\n\t\t\t'lineHeight',\r\n\t\t\t'fontStyle',\r\n\t\t\t'fontWeight',\r\n\t\t\t'letterSpacing',\r\n\t\t\t'textAlign',\r\n\t\t\t'textTransform',\r\n\t\t\t'textDecoration',\r\n\t\t\t'writingMode',\r\n\t\t].forEach( ( key ) => {\r\n\t\t\tif ( ! supportedStyles.includes( key ) ) {\r\n\t\t\t\tupdatedSettings.typography = {\r\n\t\t\t\t\t...updatedSettings.typography,\r\n\t\t\t\t\t[ key ]: false,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\t// The column-count style is named text column to reduce confusion with\r\n\t\t// the columns block and manage expectations from the support.\r\n\t\t// See: https://github.com/WordPress/gutenberg/pull/33587\r\n\t\tif ( ! supportedStyles.includes( 'columnCount' ) ) {\r\n\t\t\tupdatedSettings.typography = {\r\n\t\t\t\t...updatedSettings.typography,\r\n\t\t\t\ttextColumns: false,\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\t[ 'contentSize', 'wideSize' ].forEach( ( key ) => {\r\n\t\t\tif ( ! supportedStyles.includes( key ) ) {\r\n\t\t\t\tupdatedSettings.layout = {\r\n\t\t\t\t\t...updatedSettings.layout,\r\n\t\t\t\t\t[ key ]: false,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\t[ 'padding', 'margin', 'blockGap' ].forEach( ( key ) => {\r\n\t\t\tif ( ! supportedStyles.includes( key ) ) {\r\n\t\t\t\tupdatedSettings.spacing = {\r\n\t\t\t\t\t...updatedSettings.spacing,\r\n\t\t\t\t\t[ key ]: false,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tconst sides = Array.isArray( supports?.spacing?.[ key ] )\r\n\t\t\t\t? supports?.spacing?.[ key ]\r\n\t\t\t\t: supports?.spacing?.[ key ]?.sides;\r\n\t\t\t// Check if spacing type is supported before adding sides.\r\n\t\t\tif ( sides?.length && updatedSettings.spacing?.[ key ] ) {\r\n\t\t\t\tupdatedSettings.spacing = {\r\n\t\t\t\t\t...updatedSettings.spacing,\r\n\t\t\t\t\t[ key ]: {\r\n\t\t\t\t\t\t...updatedSettings.spacing?.[ key ],\r\n\t\t\t\t\t\tsides,\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\t[ 'aspectRatio', 'minHeight' ].forEach( ( key ) => {\r\n\t\t\tif ( ! supportedStyles.includes( key ) ) {\r\n\t\t\t\tupdatedSettings.dimensions = {\r\n\t\t\t\t\t...updatedSettings.dimensions,\r\n\t\t\t\t\t[ key ]: false,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\t[ 'radius', 'color', 'style', 'width' ].forEach( ( key ) => {\r\n\t\t\tif (\r\n\t\t\t\t! supportedStyles.includes(\r\n\t\t\t\t\t'border' + key.charAt( 0 ).toUpperCase() + key.slice( 1 )\r\n\t\t\t\t)\r\n\t\t\t) {\r\n\t\t\t\tupdatedSettings.border = {\r\n\t\t\t\t\t...updatedSettings.border,\r\n\t\t\t\t\t[ key ]: false,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\t[ 'backgroundImage', 'backgroundSize' ].forEach( ( key ) => {\r\n\t\t\tif ( ! supportedStyles.includes( key ) ) {\r\n\t\t\t\tupdatedSettings.background = {\r\n\t\t\t\t\t...updatedSettings.background,\r\n\t\t\t\t\t[ key ]: false,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\tupdatedSettings.shadow = supportedStyles.includes( 'shadow' )\r\n\t\t\t? updatedSettings.shadow\r\n\t\t\t: false;\r\n\r\n\t\t// Text alignment is only available for blocks.\r\n\t\tif ( element ) {\r\n\t\t\tupdatedSettings.typography.textAlign = false;\r\n\t\t}\r\n\r\n\t\treturn updatedSettings;\r\n\t}, [ parentSettings, supportedStyles, supports, element ] );\r\n}\r\n\r\nexport function useColorsPerOrigin( settings ) {\r\n\tconst customColors = settings?.color?.palette?.custom;\r\n\tconst themeColors = settings?.color?.palette?.theme;\r\n\tconst defaultColors = settings?.color?.palette?.default;\r\n\tconst shouldDisplayDefaultColors = settings?.color?.defaultPalette;\r\n\r\n\treturn useMemo( () => {\r\n\t\tconst result = [];\r\n\t\tif ( themeColors && themeColors.length ) {\r\n\t\t\tresult.push( {\r\n\t\t\t\tname: _x(\r\n\t\t\t\t\t'Theme',\r\n\t\t\t\t\t'Indicates this palette comes from the theme.'\r\n\t\t\t\t),\r\n\t\t\t\tcolors: themeColors,\r\n\t\t\t} );\r\n\t\t}\r\n\t\tif (\r\n\t\t\tshouldDisplayDefaultColors &&\r\n\t\t\tdefaultColors &&\r\n\t\t\tdefaultColors.length\r\n\t\t) {\r\n\t\t\tresult.push( {\r\n\t\t\t\tname: _x(\r\n\t\t\t\t\t'Default',\r\n\t\t\t\t\t'Indicates this palette comes from WordPress.'\r\n\t\t\t\t),\r\n\t\t\t\tcolors: defaultColors,\r\n\t\t\t} );\r\n\t\t}\r\n\t\tif ( customColors && customColors.length ) {\r\n\t\t\tresult.push( {\r\n\t\t\t\tname: _x(\r\n\t\t\t\t\t'Custom',\r\n\t\t\t\t\t'Indicates this palette is created by the user.'\r\n\t\t\t\t),\r\n\t\t\t\tcolors: customColors,\r\n\t\t\t} );\r\n\t\t}\r\n\t\treturn result;\r\n\t}, [\r\n\t\tcustomColors,\r\n\t\tthemeColors,\r\n\t\tdefaultColors,\r\n\t\tshouldDisplayDefaultColors,\r\n\t] );\r\n}\r\n\r\nexport function useGradientsPerOrigin( settings ) {\r\n\tconst customGradients = settings?.color?.gradients?.custom;\r\n\tconst themeGradients = settings?.color?.gradients?.theme;\r\n\tconst defaultGradients = settings?.color?.gradients?.default;\r\n\tconst shouldDisplayDefaultGradients = settings?.color?.defaultGradients;\r\n\r\n\treturn useMemo( () => {\r\n\t\tconst result = [];\r\n\t\tif ( themeGradients && themeGradients.length ) {\r\n\t\t\tresult.push( {\r\n\t\t\t\tname: _x(\r\n\t\t\t\t\t'Theme',\r\n\t\t\t\t\t'Indicates this palette comes from the theme.'\r\n\t\t\t\t),\r\n\t\t\t\tgradients: themeGradients,\r\n\t\t\t} );\r\n\t\t}\r\n\t\tif (\r\n\t\t\tshouldDisplayDefaultGradients &&\r\n\t\t\tdefaultGradients &&\r\n\t\t\tdefaultGradients.length\r\n\t\t) {\r\n\t\t\tresult.push( {\r\n\t\t\t\tname: _x(\r\n\t\t\t\t\t'Default',\r\n\t\t\t\t\t'Indicates this palette comes from WordPress.'\r\n\t\t\t\t),\r\n\t\t\t\tgradients: defaultGradients,\r\n\t\t\t} );\r\n\t\t}\r\n\t\tif ( customGradients && customGradients.length ) {\r\n\t\t\tresult.push( {\r\n\t\t\t\tname: _x(\r\n\t\t\t\t\t'Custom',\r\n\t\t\t\t\t'Indicates this palette is created by the user.'\r\n\t\t\t\t),\r\n\t\t\t\tgradients: customGradients,\r\n\t\t\t} );\r\n\t\t}\r\n\t\treturn result;\r\n\t}, [\r\n\t\tcustomGradients,\r\n\t\tthemeGradients,\r\n\t\tdefaultGradients,\r\n\t\tshouldDisplayDefaultGradients,\r\n\t] );\r\n}\r\n"],"mappings":"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","ignoreList":[]}