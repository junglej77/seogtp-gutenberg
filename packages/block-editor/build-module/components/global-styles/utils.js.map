{"version":3,"names":["fastDeepEqual","useViewportMatch","getCSSValueFromRawStyle","getTypographyFontSizeValue","getValueFromObjectPath","ROOT_BLOCK_SELECTOR","ROOT_CSS_PROPERTIES_SELECTOR","PRESET_METADATA","path","valueKey","cssVarInfix","classes","classSuffix","propertyName","valueFunc","slug","preset","settings","size","STYLE_PATH_TO_CSS_VAR_INFIX","shadow","STYLE_PATH_TO_PRESET_BLOCK_ATTRIBUTE","useToolsPanelDropdownMenuProps","isMobile","popoverProps","placement","offset","findInPresetsBy","features","blockName","presetPath","presetProperty","presetValueValue","orderedPresetsByOrigin","presetByOrigin","origins","origin","presets","presetObject","find","highestPresetObjectWithSameSlug","undefined","getPresetVariableFromValue","variableStylePath","presetPropertyValue","metadata","data","getValueFromPresetVariable","variable","presetType","result","getValueFromVariable","getValueFromCustomVariable","_getValueFromObjectPa","ref","USER_VALUE_PREFIX","THEME_VALUE_PREFIX","THEME_VALUE_SUFFIX","parsedVar","startsWith","slice","length","split","endsWith","type","scopeSelector","scope","selector","scopes","selectors","selectorsScoped","forEach","outer","inner","push","trim","join","scopeFeatureSelectors","featureSelectors","Object","entries","feature","subfeature","subfeatureSelector","appendToSelector","toAppend","includes","newSelectors","map","sel","areGlobalStyleConfigsEqual","original","variation","styles","getBlockStyleVariationSelector","blockSelector","variationClass","ancestorRegex","addVariationClass","_match","group1","group2","part","replace","getResolvedThemeFilePath","file","themeFileURIs","Array","isArray","uri","themeFileUri","name","href","getResolvedRefValue","ruleValue","tree","resolvedRuleValue","getResolvedValue","resolvedValue","url","_links"],"sources":["@wordpress/block-editor/src/components/global-styles/utils.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport fastDeepEqual from 'fast-deep-equal/es6';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useViewportMatch } from '@wordpress/compose';\r\nimport { getCSSValueFromRawStyle } from '@wordpress/style-engine';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { getTypographyFontSizeValue } from './typography-utils';\r\nimport { getValueFromObjectPath } from '../../utils/object';\r\n\r\n/* Supporting data. */\r\nexport const ROOT_BLOCK_SELECTOR = 'body';\r\nexport const ROOT_CSS_PROPERTIES_SELECTOR = ':root';\r\n\r\nexport const PRESET_METADATA = [\r\n\t{\r\n\t\tpath: [ 'color', 'palette' ],\r\n\t\tvalueKey: 'color',\r\n\t\tcssVarInfix: 'color',\r\n\t\tclasses: [\r\n\t\t\t{ classSuffix: 'color', propertyName: 'color' },\r\n\t\t\t{\r\n\t\t\t\tclassSuffix: 'background-color',\r\n\t\t\t\tpropertyName: 'background-color',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tclassSuffix: 'border-color',\r\n\t\t\t\tpropertyName: 'border-color',\r\n\t\t\t},\r\n\t\t],\r\n\t},\r\n\t{\r\n\t\tpath: [ 'color', 'gradients' ],\r\n\t\tvalueKey: 'gradient',\r\n\t\tcssVarInfix: 'gradient',\r\n\t\tclasses: [\r\n\t\t\t{\r\n\t\t\t\tclassSuffix: 'gradient-background',\r\n\t\t\t\tpropertyName: 'background',\r\n\t\t\t},\r\n\t\t],\r\n\t},\r\n\t{\r\n\t\tpath: [ 'color', 'duotone' ],\r\n\t\tvalueKey: 'colors',\r\n\t\tcssVarInfix: 'duotone',\r\n\t\tvalueFunc: ( { slug } ) => `url( '#wp-duotone-${ slug }' )`,\r\n\t\tclasses: [],\r\n\t},\r\n\t{\r\n\t\tpath: [ 'shadow', 'presets' ],\r\n\t\tvalueKey: 'shadow',\r\n\t\tcssVarInfix: 'shadow',\r\n\t\tclasses: [],\r\n\t},\r\n\t{\r\n\t\tpath: [ 'typography', 'fontSizes' ],\r\n\t\tvalueFunc: ( preset, settings ) =>\r\n\t\t\tgetTypographyFontSizeValue( preset, settings ),\r\n\t\tvalueKey: 'size',\r\n\t\tcssVarInfix: 'font-size',\r\n\t\tclasses: [ { classSuffix: 'font-size', propertyName: 'font-size' } ],\r\n\t},\r\n\t{\r\n\t\tpath: [ 'typography', 'fontFamilies' ],\r\n\t\tvalueKey: 'fontFamily',\r\n\t\tcssVarInfix: 'font-family',\r\n\t\tclasses: [\r\n\t\t\t{ classSuffix: 'font-family', propertyName: 'font-family' },\r\n\t\t],\r\n\t},\r\n\t{\r\n\t\tpath: [ 'spacing', 'spacingSizes' ],\r\n\t\tvalueKey: 'size',\r\n\t\tcssVarInfix: 'spacing',\r\n\t\tvalueFunc: ( { size } ) => size,\r\n\t\tclasses: [],\r\n\t},\r\n];\r\n\r\nexport const STYLE_PATH_TO_CSS_VAR_INFIX = {\r\n\t'color.background': 'color',\r\n\t'color.text': 'color',\r\n\t'filter.duotone': 'duotone',\r\n\t'elements.link.color.text': 'color',\r\n\t'elements.link.:hover.color.text': 'color',\r\n\t'elements.link.typography.fontFamily': 'font-family',\r\n\t'elements.link.typography.fontSize': 'font-size',\r\n\t'elements.button.color.text': 'color',\r\n\t'elements.button.color.background': 'color',\r\n\t'elements.caption.color.text': 'color',\r\n\t'elements.button.typography.fontFamily': 'font-family',\r\n\t'elements.button.typography.fontSize': 'font-size',\r\n\t'elements.heading.color': 'color',\r\n\t'elements.heading.color.background': 'color',\r\n\t'elements.heading.typography.fontFamily': 'font-family',\r\n\t'elements.heading.gradient': 'gradient',\r\n\t'elements.heading.color.gradient': 'gradient',\r\n\t'elements.h1.color': 'color',\r\n\t'elements.h1.color.background': 'color',\r\n\t'elements.h1.typography.fontFamily': 'font-family',\r\n\t'elements.h1.color.gradient': 'gradient',\r\n\t'elements.h2.color': 'color',\r\n\t'elements.h2.color.background': 'color',\r\n\t'elements.h2.typography.fontFamily': 'font-family',\r\n\t'elements.h2.color.gradient': 'gradient',\r\n\t'elements.h3.color': 'color',\r\n\t'elements.h3.color.background': 'color',\r\n\t'elements.h3.typography.fontFamily': 'font-family',\r\n\t'elements.h3.color.gradient': 'gradient',\r\n\t'elements.h4.color': 'color',\r\n\t'elements.h4.color.background': 'color',\r\n\t'elements.h4.typography.fontFamily': 'font-family',\r\n\t'elements.h4.color.gradient': 'gradient',\r\n\t'elements.h5.color': 'color',\r\n\t'elements.h5.color.background': 'color',\r\n\t'elements.h5.typography.fontFamily': 'font-family',\r\n\t'elements.h5.color.gradient': 'gradient',\r\n\t'elements.h6.color': 'color',\r\n\t'elements.h6.color.background': 'color',\r\n\t'elements.h6.typography.fontFamily': 'font-family',\r\n\t'elements.h6.color.gradient': 'gradient',\r\n\t'color.gradient': 'gradient',\r\n\tshadow: 'shadow',\r\n\t'typography.fontSize': 'font-size',\r\n\t'typography.fontFamily': 'font-family',\r\n};\r\n\r\n// A static list of block attributes that store global style preset slugs.\r\nexport const STYLE_PATH_TO_PRESET_BLOCK_ATTRIBUTE = {\r\n\t'color.background': 'backgroundColor',\r\n\t'color.text': 'textColor',\r\n\t'color.gradient': 'gradient',\r\n\t'typography.fontSize': 'fontSize',\r\n\t'typography.fontFamily': 'fontFamily',\r\n};\r\n\r\nexport function useToolsPanelDropdownMenuProps() {\r\n\tconst isMobile = useViewportMatch( 'medium', '<' );\r\n\treturn ! isMobile\r\n\t\t? {\r\n\t\t\t\tpopoverProps: {\r\n\t\t\t\t\tplacement: 'left-start',\r\n\t\t\t\t\t// For non-mobile, inner sidebar width (248px) - button width (24px) - border (1px) + padding (16px) + spacing (20px)\r\n\t\t\t\t\toffset: 259,\r\n\t\t\t\t},\r\n\t\t  }\r\n\t\t: {};\r\n}\r\n\r\nfunction findInPresetsBy(\r\n\tfeatures,\r\n\tblockName,\r\n\tpresetPath,\r\n\tpresetProperty,\r\n\tpresetValueValue\r\n) {\r\n\t// Block presets take priority above root level presets.\r\n\tconst orderedPresetsByOrigin = [\r\n\t\tgetValueFromObjectPath( features, [\r\n\t\t\t'blocks',\r\n\t\t\tblockName,\r\n\t\t\t...presetPath,\r\n\t\t] ),\r\n\t\tgetValueFromObjectPath( features, presetPath ),\r\n\t];\r\n\r\n\tfor ( const presetByOrigin of orderedPresetsByOrigin ) {\r\n\t\tif ( presetByOrigin ) {\r\n\t\t\t// Preset origins ordered by priority.\r\n\t\t\tconst origins = [ 'custom', 'theme', 'default' ];\r\n\t\t\tfor ( const origin of origins ) {\r\n\t\t\t\tconst presets = presetByOrigin[ origin ];\r\n\t\t\t\tif ( presets ) {\r\n\t\t\t\t\tconst presetObject = presets.find(\r\n\t\t\t\t\t\t( preset ) =>\r\n\t\t\t\t\t\t\tpreset[ presetProperty ] === presetValueValue\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif ( presetObject ) {\r\n\t\t\t\t\t\tif ( presetProperty === 'slug' ) {\r\n\t\t\t\t\t\t\treturn presetObject;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// If there is a highest priority preset with the same slug but different value the preset we found was overwritten and should be ignored.\r\n\t\t\t\t\t\tconst highestPresetObjectWithSameSlug = findInPresetsBy(\r\n\t\t\t\t\t\t\tfeatures,\r\n\t\t\t\t\t\t\tblockName,\r\n\t\t\t\t\t\t\tpresetPath,\r\n\t\t\t\t\t\t\t'slug',\r\n\t\t\t\t\t\t\tpresetObject.slug\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\thighestPresetObjectWithSameSlug[\r\n\t\t\t\t\t\t\t\tpresetProperty\r\n\t\t\t\t\t\t\t] === presetObject[ presetProperty ]\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\treturn presetObject;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn undefined;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function getPresetVariableFromValue(\r\n\tfeatures,\r\n\tblockName,\r\n\tvariableStylePath,\r\n\tpresetPropertyValue\r\n) {\r\n\tif ( ! presetPropertyValue ) {\r\n\t\treturn presetPropertyValue;\r\n\t}\r\n\r\n\tconst cssVarInfix = STYLE_PATH_TO_CSS_VAR_INFIX[ variableStylePath ];\r\n\r\n\tconst metadata = PRESET_METADATA.find(\r\n\t\t( data ) => data.cssVarInfix === cssVarInfix\r\n\t);\r\n\r\n\tif ( ! metadata ) {\r\n\t\t// The property doesn't have preset data\r\n\t\t// so the value should be returned as it is.\r\n\t\treturn presetPropertyValue;\r\n\t}\r\n\tconst { valueKey, path } = metadata;\r\n\r\n\tconst presetObject = findInPresetsBy(\r\n\t\tfeatures,\r\n\t\tblockName,\r\n\t\tpath,\r\n\t\tvalueKey,\r\n\t\tpresetPropertyValue\r\n\t);\r\n\r\n\tif ( ! presetObject ) {\r\n\t\t// Value wasn't found in the presets,\r\n\t\t// so it must be a custom value.\r\n\t\treturn presetPropertyValue;\r\n\t}\r\n\r\n\treturn `var:preset|${ cssVarInfix }|${ presetObject.slug }`;\r\n}\r\n\r\nfunction getValueFromPresetVariable(\r\n\tfeatures,\r\n\tblockName,\r\n\tvariable,\r\n\t[ presetType, slug ]\r\n) {\r\n\tconst metadata = PRESET_METADATA.find(\r\n\t\t( data ) => data.cssVarInfix === presetType\r\n\t);\r\n\tif ( ! metadata ) {\r\n\t\treturn variable;\r\n\t}\r\n\r\n\tconst presetObject = findInPresetsBy(\r\n\t\tfeatures.settings,\r\n\t\tblockName,\r\n\t\tmetadata.path,\r\n\t\t'slug',\r\n\t\tslug\r\n\t);\r\n\r\n\tif ( presetObject ) {\r\n\t\tconst { valueKey } = metadata;\r\n\t\tconst result = presetObject[ valueKey ];\r\n\t\treturn getValueFromVariable( features, blockName, result );\r\n\t}\r\n\r\n\treturn variable;\r\n}\r\n\r\nfunction getValueFromCustomVariable( features, blockName, variable, path ) {\r\n\tconst result =\r\n\t\tgetValueFromObjectPath( features.settings, [\r\n\t\t\t'blocks',\r\n\t\t\tblockName,\r\n\t\t\t'custom',\r\n\t\t\t...path,\r\n\t\t] ) ??\r\n\t\tgetValueFromObjectPath( features.settings, [ 'custom', ...path ] );\r\n\tif ( ! result ) {\r\n\t\treturn variable;\r\n\t}\r\n\t// A variable may reference another variable so we need recursion until we find the value.\r\n\treturn getValueFromVariable( features, blockName, result );\r\n}\r\n\r\n/**\r\n * Attempts to fetch the value of a theme.json CSS variable.\r\n *\r\n * @param {Object}   features  GlobalStylesContext config, e.g., user, base or merged. Represents the theme.json tree.\r\n * @param {string}   blockName The name of a block as represented in the styles property. E.g., 'root' for root-level, and 'core/${blockName}' for blocks.\r\n * @param {string|*} variable  An incoming style value. A CSS var value is expected, but it could be any value.\r\n * @return {string|*|{ref}} The value of the CSS var, if found. If not found, the passed variable argument.\r\n */\r\nexport function getValueFromVariable( features, blockName, variable ) {\r\n\tif ( ! variable || typeof variable !== 'string' ) {\r\n\t\tif ( typeof variable?.ref === 'string' ) {\r\n\t\t\tvariable = getValueFromObjectPath( features, variable.ref );\r\n\t\t\t// Presence of another ref indicates a reference to another dynamic value.\r\n\t\t\t// Pointing to another dynamic value is not supported.\r\n\t\t\tif ( ! variable || !! variable?.ref ) {\r\n\t\t\t\treturn variable;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn variable;\r\n\t\t}\r\n\t}\r\n\tconst USER_VALUE_PREFIX = 'var:';\r\n\tconst THEME_VALUE_PREFIX = 'var(--wp--';\r\n\tconst THEME_VALUE_SUFFIX = ')';\r\n\r\n\tlet parsedVar;\r\n\r\n\tif ( variable.startsWith( USER_VALUE_PREFIX ) ) {\r\n\t\tparsedVar = variable.slice( USER_VALUE_PREFIX.length ).split( '|' );\r\n\t} else if (\r\n\t\tvariable.startsWith( THEME_VALUE_PREFIX ) &&\r\n\t\tvariable.endsWith( THEME_VALUE_SUFFIX )\r\n\t) {\r\n\t\tparsedVar = variable\r\n\t\t\t.slice( THEME_VALUE_PREFIX.length, -THEME_VALUE_SUFFIX.length )\r\n\t\t\t.split( '--' );\r\n\t} else {\r\n\t\t// We don't know how to parse the value: either is raw of uses complex CSS such as `calc(1px * var(--wp--variable) )`\r\n\t\treturn variable;\r\n\t}\r\n\r\n\tconst [ type, ...path ] = parsedVar;\r\n\tif ( type === 'preset' ) {\r\n\t\treturn getValueFromPresetVariable(\r\n\t\t\tfeatures,\r\n\t\t\tblockName,\r\n\t\t\tvariable,\r\n\t\t\tpath\r\n\t\t);\r\n\t}\r\n\tif ( type === 'custom' ) {\r\n\t\treturn getValueFromCustomVariable(\r\n\t\t\tfeatures,\r\n\t\t\tblockName,\r\n\t\t\tvariable,\r\n\t\t\tpath\r\n\t\t);\r\n\t}\r\n\treturn variable;\r\n}\r\n\r\n/**\r\n * Function that scopes a selector with another one. This works a bit like\r\n * SCSS nesting except the `&` operator isn't supported.\r\n *\r\n * @example\r\n * ```js\r\n * const scope = '.a, .b .c';\r\n * const selector = '> .x, .y';\r\n * const merged = scopeSelector( scope, selector );\r\n * // merged is '.a > .x, .a .y, .b .c > .x, .b .c .y'\r\n * ```\r\n *\r\n * @param {string} scope    Selector to scope to.\r\n * @param {string} selector Original selector.\r\n *\r\n * @return {string} Scoped selector.\r\n */\r\nexport function scopeSelector( scope, selector ) {\r\n\tif ( ! scope || ! selector ) {\r\n\t\treturn selector;\r\n\t}\r\n\r\n\tconst scopes = scope.split( ',' );\r\n\tconst selectors = selector.split( ',' );\r\n\r\n\tconst selectorsScoped = [];\r\n\tscopes.forEach( ( outer ) => {\r\n\t\tselectors.forEach( ( inner ) => {\r\n\t\t\tselectorsScoped.push( `${ outer.trim() } ${ inner.trim() }` );\r\n\t\t} );\r\n\t} );\r\n\r\n\treturn selectorsScoped.join( ', ' );\r\n}\r\n\r\n/**\r\n * Scopes a collection of selectors for features and subfeatures.\r\n *\r\n * @example\r\n * ```js\r\n * const scope = '.custom-scope';\r\n * const selectors = {\r\n *     color: '.wp-my-block p',\r\n *     typography: { fontSize: '.wp-my-block caption' },\r\n * };\r\n * const result = scopeFeatureSelector( scope, selectors );\r\n * // result is {\r\n * //     color: '.custom-scope .wp-my-block p',\r\n * //     typography: { fonSize: '.custom-scope .wp-my-block caption' },\r\n * // }\r\n * ```\r\n *\r\n * @param {string} scope     Selector to scope collection of selectors with.\r\n * @param {Object} selectors Collection of feature selectors e.g.\r\n *\r\n * @return {Object|undefined} Scoped collection of feature selectors.\r\n */\r\nexport function scopeFeatureSelectors( scope, selectors ) {\r\n\tif ( ! scope || ! selectors ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst featureSelectors = {};\r\n\r\n\tObject.entries( selectors ).forEach( ( [ feature, selector ] ) => {\r\n\t\tif ( typeof selector === 'string' ) {\r\n\t\t\tfeatureSelectors[ feature ] = scopeSelector( scope, selector );\r\n\t\t}\r\n\r\n\t\tif ( typeof selector === 'object' ) {\r\n\t\t\tfeatureSelectors[ feature ] = {};\r\n\r\n\t\t\tObject.entries( selector ).forEach(\r\n\t\t\t\t( [ subfeature, subfeatureSelector ] ) => {\r\n\t\t\t\t\tfeatureSelectors[ feature ][ subfeature ] = scopeSelector(\r\n\t\t\t\t\t\tscope,\r\n\t\t\t\t\t\tsubfeatureSelector\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\t} );\r\n\r\n\treturn featureSelectors;\r\n}\r\n\r\n/**\r\n * Appends a sub-selector to an existing one.\r\n *\r\n * Given the compounded `selector` \"h1, h2, h3\"\r\n * and the `toAppend` selector \".some-class\" the result will be\r\n * \"h1.some-class, h2.some-class, h3.some-class\".\r\n *\r\n * @param {string} selector Original selector.\r\n * @param {string} toAppend Selector to append.\r\n *\r\n * @return {string} The new selector.\r\n */\r\nexport function appendToSelector( selector, toAppend ) {\r\n\tif ( ! selector.includes( ',' ) ) {\r\n\t\treturn selector + toAppend;\r\n\t}\r\n\tconst selectors = selector.split( ',' );\r\n\tconst newSelectors = selectors.map( ( sel ) => sel + toAppend );\r\n\treturn newSelectors.join( ',' );\r\n}\r\n\r\n/**\r\n * Compares global style variations according to their styles and settings properties.\r\n *\r\n * @example\r\n * ```js\r\n * const globalStyles = { styles: { typography: { fontSize: '10px' } }, settings: {} };\r\n * const variation = { styles: { typography: { fontSize: '10000px' } }, settings: {} };\r\n * const isEqual = areGlobalStyleConfigsEqual( globalStyles, variation );\r\n * // false\r\n * ```\r\n *\r\n * @param {Object} original  A global styles object.\r\n * @param {Object} variation A global styles object.\r\n *\r\n * @return {boolean} Whether `original` and `variation` match.\r\n */\r\nexport function areGlobalStyleConfigsEqual( original, variation ) {\r\n\tif ( typeof original !== 'object' || typeof variation !== 'object' ) {\r\n\t\treturn original === variation;\r\n\t}\r\n\treturn (\r\n\t\tfastDeepEqual( original?.styles, variation?.styles ) &&\r\n\t\tfastDeepEqual( original?.settings, variation?.settings )\r\n\t);\r\n}\r\n\r\n/**\r\n * Generates the selector for a block style variation by creating the\r\n * appropriate CSS class and adding it to the ancestor portion of the block's\r\n * selector.\r\n *\r\n * For example, take the Button block which has a compound selector:\r\n * `.wp-block-button .wp-block-button__link`. With a variation named 'custom',\r\n * the class `.is-style-custom` should be added to the `.wp-block-button`\r\n * ancestor only.\r\n *\r\n * This function will take into account comma separated and complex selectors.\r\n *\r\n * @param {string} variation     Name for the variation.\r\n * @param {string} blockSelector CSS selector for the block.\r\n *\r\n * @return {string} CSS selector for the block style variation.\r\n */\r\nexport function getBlockStyleVariationSelector( variation, blockSelector ) {\r\n\tconst variationClass = `.is-style-${ variation }`;\r\n\r\n\tif ( ! blockSelector ) {\r\n\t\treturn variationClass;\r\n\t}\r\n\r\n\tconst ancestorRegex = /((?::\\([^)]+\\))?\\s*)([^\\s:]+)/;\r\n\tconst addVariationClass = ( _match, group1, group2 ) => {\r\n\t\treturn group1 + group2 + variationClass;\r\n\t};\r\n\r\n\tconst result = blockSelector\r\n\t\t.split( ',' )\r\n\t\t.map( ( part ) => part.replace( ancestorRegex, addVariationClass ) );\r\n\r\n\treturn result.join( ',' );\r\n}\r\n\r\n/**\r\n * Looks up a theme file URI based on a relative path.\r\n *\r\n * @param {string}        file          A relative path.\r\n * @param {Array<Object>} themeFileURIs A collection of absolute theme file URIs and their corresponding file paths.\r\n * @return {string} A resolved theme file URI, if one is found in the themeFileURIs collection.\r\n */\r\nexport function getResolvedThemeFilePath( file, themeFileURIs ) {\r\n\tif ( ! file || ! themeFileURIs || ! Array.isArray( themeFileURIs ) ) {\r\n\t\treturn file;\r\n\t}\r\n\r\n\tconst uri = themeFileURIs.find(\r\n\t\t( themeFileUri ) => themeFileUri?.name === file\r\n\t);\r\n\r\n\tif ( ! uri?.href ) {\r\n\t\treturn file;\r\n\t}\r\n\r\n\treturn uri?.href;\r\n}\r\n\r\n/**\r\n * Resolves ref values in theme JSON.\r\n *\r\n * @param {Object|string} ruleValue A block style value that may contain a reference to a theme.json value.\r\n * @param {Object}        tree      A theme.json object.\r\n * @return {*} The resolved value or incoming ruleValue.\r\n */\r\nexport function getResolvedRefValue( ruleValue, tree ) {\r\n\tif ( ! ruleValue || ! tree ) {\r\n\t\treturn ruleValue;\r\n\t}\r\n\r\n\t/*\r\n\t * Where the rule value is an object with a 'ref' property pointing\r\n\t * to a path, this converts that path into the value at that path.\r\n\t * For example: { \"ref\": \"style.color.background\" } => \"#fff\".\r\n\t */\r\n\tif ( typeof ruleValue !== 'string' && ruleValue?.ref ) {\r\n\t\tconst resolvedRuleValue = getCSSValueFromRawStyle(\r\n\t\t\tgetValueFromObjectPath( tree, ruleValue.ref )\r\n\t\t);\r\n\r\n\t\t/*\r\n\t\t * Presence of another ref indicates a reference to another dynamic value.\r\n\t\t * Pointing to another dynamic value is not supported.\r\n\t\t */\r\n\t\tif ( resolvedRuleValue?.ref ) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\r\n\t\tif ( resolvedRuleValue === undefined ) {\r\n\t\t\treturn ruleValue;\r\n\t\t}\r\n\r\n\t\treturn resolvedRuleValue;\r\n\t}\r\n\treturn ruleValue;\r\n}\r\n\r\n/**\r\n * Resolves ref and relative path values in theme JSON.\r\n *\r\n * @param {Object|string} ruleValue A block style value that may contain a reference to a theme.json value.\r\n * @param {Object}        tree      A theme.json object.\r\n * @return {*} The resolved value or incoming ruleValue.\r\n */\r\nexport function getResolvedValue( ruleValue, tree ) {\r\n\tif ( ! ruleValue || ! tree ) {\r\n\t\treturn ruleValue;\r\n\t}\r\n\r\n\t// Resolve ref values.\r\n\tconst resolvedValue = getResolvedRefValue( ruleValue, tree );\r\n\r\n\t// Resolve relative paths.\r\n\tif ( resolvedValue?.url ) {\r\n\t\tresolvedValue.url = getResolvedThemeFilePath(\r\n\t\t\tresolvedValue.url,\r\n\t\t\ttree?._links?.[ 'wp:theme-file' ]\r\n\t\t);\r\n\t}\r\n\r\n\treturn resolvedValue;\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,OAAOA,aAAa,MAAM,qBAAqB;;AAE/C;AACA;AACA;AACA,SAASC,gBAAgB,QAAQ,oBAAoB;AACrD,SAASC,uBAAuB,QAAQ,yBAAyB;;AAEjE;AACA;AACA;AACA,SAASC,0BAA0B,QAAQ,oBAAoB;AAC/D,SAASC,sBAAsB,QAAQ,oBAAoB;;AAE3D;AACA,OAAO,MAAMC,mBAAmB,GAAG,MAAM;AACzC,OAAO,MAAMC,4BAA4B,GAAG,OAAO;AAEnD,OAAO,MAAMC,eAAe,GAAG,CAC9B;EACCC,IAAI,EAAE,CAAE,OAAO,EAAE,SAAS,CAAE;EAC5BC,QAAQ,EAAE,OAAO;EACjBC,WAAW,EAAE,OAAO;EACpBC,OAAO,EAAE,CACR;IAAEC,WAAW,EAAE,OAAO;IAAEC,YAAY,EAAE;EAAQ,CAAC,EAC/C;IACCD,WAAW,EAAE,kBAAkB;IAC/BC,YAAY,EAAE;EACf,CAAC,EACD;IACCD,WAAW,EAAE,cAAc;IAC3BC,YAAY,EAAE;EACf,CAAC;AAEH,CAAC,EACD;EACCL,IAAI,EAAE,CAAE,OAAO,EAAE,WAAW,CAAE;EAC9BC,QAAQ,EAAE,UAAU;EACpBC,WAAW,EAAE,UAAU;EACvBC,OAAO,EAAE,CACR;IACCC,WAAW,EAAE,qBAAqB;IAClCC,YAAY,EAAE;EACf,CAAC;AAEH,CAAC,EACD;EACCL,IAAI,EAAE,CAAE,OAAO,EAAE,SAAS,CAAE;EAC5BC,QAAQ,EAAE,QAAQ;EAClBC,WAAW,EAAE,SAAS;EACtBI,SAAS,EAAEA,CAAE;IAAEC;EAAK,CAAC,KAAO,qBAAqBA,IAAM,KAAI;EAC3DJ,OAAO,EAAE;AACV,CAAC,EACD;EACCH,IAAI,EAAE,CAAE,QAAQ,EAAE,SAAS,CAAE;EAC7BC,QAAQ,EAAE,QAAQ;EAClBC,WAAW,EAAE,QAAQ;EACrBC,OAAO,EAAE;AACV,CAAC,EACD;EACCH,IAAI,EAAE,CAAE,YAAY,EAAE,WAAW,CAAE;EACnCM,SAAS,EAAEA,CAAEE,MAAM,EAAEC,QAAQ,KAC5Bd,0BAA0B,CAAEa,MAAM,EAAEC,QAAS,CAAC;EAC/CR,QAAQ,EAAE,MAAM;EAChBC,WAAW,EAAE,WAAW;EACxBC,OAAO,EAAE,CAAE;IAAEC,WAAW,EAAE,WAAW;IAAEC,YAAY,EAAE;EAAY,CAAC;AACnE,CAAC,EACD;EACCL,IAAI,EAAE,CAAE,YAAY,EAAE,cAAc,CAAE;EACtCC,QAAQ,EAAE,YAAY;EACtBC,WAAW,EAAE,aAAa;EAC1BC,OAAO,EAAE,CACR;IAAEC,WAAW,EAAE,aAAa;IAAEC,YAAY,EAAE;EAAc,CAAC;AAE7D,CAAC,EACD;EACCL,IAAI,EAAE,CAAE,SAAS,EAAE,cAAc,CAAE;EACnCC,QAAQ,EAAE,MAAM;EAChBC,WAAW,EAAE,SAAS;EACtBI,SAAS,EAAEA,CAAE;IAAEI;EAAK,CAAC,KAAMA,IAAI;EAC/BP,OAAO,EAAE;AACV,CAAC,CACD;AAED,OAAO,MAAMQ,2BAA2B,GAAG;EAC1C,kBAAkB,EAAE,OAAO;EAC3B,YAAY,EAAE,OAAO;EACrB,gBAAgB,EAAE,SAAS;EAC3B,0BAA0B,EAAE,OAAO;EACnC,iCAAiC,EAAE,OAAO;EAC1C,qCAAqC,EAAE,aAAa;EACpD,mCAAmC,EAAE,WAAW;EAChD,4BAA4B,EAAE,OAAO;EACrC,kCAAkC,EAAE,OAAO;EAC3C,6BAA6B,EAAE,OAAO;EACtC,uCAAuC,EAAE,aAAa;EACtD,qCAAqC,EAAE,WAAW;EAClD,wBAAwB,EAAE,OAAO;EACjC,mCAAmC,EAAE,OAAO;EAC5C,wCAAwC,EAAE,aAAa;EACvD,2BAA2B,EAAE,UAAU;EACvC,iCAAiC,EAAE,UAAU;EAC7C,mBAAmB,EAAE,OAAO;EAC5B,8BAA8B,EAAE,OAAO;EACvC,mCAAmC,EAAE,aAAa;EAClD,4BAA4B,EAAE,UAAU;EACxC,mBAAmB,EAAE,OAAO;EAC5B,8BAA8B,EAAE,OAAO;EACvC,mCAAmC,EAAE,aAAa;EAClD,4BAA4B,EAAE,UAAU;EACxC,mBAAmB,EAAE,OAAO;EAC5B,8BAA8B,EAAE,OAAO;EACvC,mCAAmC,EAAE,aAAa;EAClD,4BAA4B,EAAE,UAAU;EACxC,mBAAmB,EAAE,OAAO;EAC5B,8BAA8B,EAAE,OAAO;EACvC,mCAAmC,EAAE,aAAa;EAClD,4BAA4B,EAAE,UAAU;EACxC,mBAAmB,EAAE,OAAO;EAC5B,8BAA8B,EAAE,OAAO;EACvC,mCAAmC,EAAE,aAAa;EAClD,4BAA4B,EAAE,UAAU;EACxC,mBAAmB,EAAE,OAAO;EAC5B,8BAA8B,EAAE,OAAO;EACvC,mCAAmC,EAAE,aAAa;EAClD,4BAA4B,EAAE,UAAU;EACxC,gBAAgB,EAAE,UAAU;EAC5BC,MAAM,EAAE,QAAQ;EAChB,qBAAqB,EAAE,WAAW;EAClC,uBAAuB,EAAE;AAC1B,CAAC;;AAED;AACA,OAAO,MAAMC,oCAAoC,GAAG;EACnD,kBAAkB,EAAE,iBAAiB;EACrC,YAAY,EAAE,WAAW;EACzB,gBAAgB,EAAE,UAAU;EAC5B,qBAAqB,EAAE,UAAU;EACjC,uBAAuB,EAAE;AAC1B,CAAC;AAED,OAAO,SAASC,8BAA8BA,CAAA,EAAG;EAChD,MAAMC,QAAQ,GAAGtB,gBAAgB,CAAE,QAAQ,EAAE,GAAI,CAAC;EAClD,OAAO,CAAEsB,QAAQ,GACd;IACAC,YAAY,EAAE;MACbC,SAAS,EAAE,YAAY;MACvB;MACAC,MAAM,EAAE;IACT;EACA,CAAC,GACD,CAAC,CAAC;AACN;AAEA,SAASC,eAAeA,CACvBC,QAAQ,EACRC,SAAS,EACTC,UAAU,EACVC,cAAc,EACdC,gBAAgB,EACf;EACD;EACA,MAAMC,sBAAsB,GAAG,CAC9B7B,sBAAsB,CAAEwB,QAAQ,EAAE,CACjC,QAAQ,EACRC,SAAS,EACT,GAAGC,UAAU,CACZ,CAAC,EACH1B,sBAAsB,CAAEwB,QAAQ,EAAEE,UAAW,CAAC,CAC9C;EAED,KAAM,MAAMI,cAAc,IAAID,sBAAsB,EAAG;IACtD,IAAKC,cAAc,EAAG;MACrB;MACA,MAAMC,OAAO,GAAG,CAAE,QAAQ,EAAE,OAAO,EAAE,SAAS,CAAE;MAChD,KAAM,MAAMC,MAAM,IAAID,OAAO,EAAG;QAC/B,MAAME,OAAO,GAAGH,cAAc,CAAEE,MAAM,CAAE;QACxC,IAAKC,OAAO,EAAG;UACd,MAAMC,YAAY,GAAGD,OAAO,CAACE,IAAI,CAC9BvB,MAAM,IACPA,MAAM,CAAEe,cAAc,CAAE,KAAKC,gBAC/B,CAAC;UACD,IAAKM,YAAY,EAAG;YACnB,IAAKP,cAAc,KAAK,MAAM,EAAG;cAChC,OAAOO,YAAY;YACpB;YACA;YACA,MAAME,+BAA+B,GAAGb,eAAe,CACtDC,QAAQ,EACRC,SAAS,EACTC,UAAU,EACV,MAAM,EACNQ,YAAY,CAACvB,IACd,CAAC;YACD,IACCyB,+BAA+B,CAC9BT,cAAc,CACd,KAAKO,YAAY,CAAEP,cAAc,CAAE,EACnC;cACD,OAAOO,YAAY;YACpB;YACA,OAAOG,SAAS;UACjB;QACD;MACD;IACD;EACD;AACD;AAEA,OAAO,SAASC,0BAA0BA,CACzCd,QAAQ,EACRC,SAAS,EACTc,iBAAiB,EACjBC,mBAAmB,EAClB;EACD,IAAK,CAAEA,mBAAmB,EAAG;IAC5B,OAAOA,mBAAmB;EAC3B;EAEA,MAAMlC,WAAW,GAAGS,2BAA2B,CAAEwB,iBAAiB,CAAE;EAEpE,MAAME,QAAQ,GAAGtC,eAAe,CAACgC,IAAI,CAClCO,IAAI,IAAMA,IAAI,CAACpC,WAAW,KAAKA,WAClC,CAAC;EAED,IAAK,CAAEmC,QAAQ,EAAG;IACjB;IACA;IACA,OAAOD,mBAAmB;EAC3B;EACA,MAAM;IAAEnC,QAAQ;IAAED;EAAK,CAAC,GAAGqC,QAAQ;EAEnC,MAAMP,YAAY,GAAGX,eAAe,CACnCC,QAAQ,EACRC,SAAS,EACTrB,IAAI,EACJC,QAAQ,EACRmC,mBACD,CAAC;EAED,IAAK,CAAEN,YAAY,EAAG;IACrB;IACA;IACA,OAAOM,mBAAmB;EAC3B;EAEA,OAAQ,cAAclC,WAAa,IAAI4B,YAAY,CAACvB,IAAM,EAAC;AAC5D;AAEA,SAASgC,0BAA0BA,CAClCnB,QAAQ,EACRC,SAAS,EACTmB,QAAQ,EACR,CAAEC,UAAU,EAAElC,IAAI,CAAE,EACnB;EACD,MAAM8B,QAAQ,GAAGtC,eAAe,CAACgC,IAAI,CAClCO,IAAI,IAAMA,IAAI,CAACpC,WAAW,KAAKuC,UAClC,CAAC;EACD,IAAK,CAAEJ,QAAQ,EAAG;IACjB,OAAOG,QAAQ;EAChB;EAEA,MAAMV,YAAY,GAAGX,eAAe,CACnCC,QAAQ,CAACX,QAAQ,EACjBY,SAAS,EACTgB,QAAQ,CAACrC,IAAI,EACb,MAAM,EACNO,IACD,CAAC;EAED,IAAKuB,YAAY,EAAG;IACnB,MAAM;MAAE7B;IAAS,CAAC,GAAGoC,QAAQ;IAC7B,MAAMK,MAAM,GAAGZ,YAAY,CAAE7B,QAAQ,CAAE;IACvC,OAAO0C,oBAAoB,CAAEvB,QAAQ,EAAEC,SAAS,EAAEqB,MAAO,CAAC;EAC3D;EAEA,OAAOF,QAAQ;AAChB;AAEA,SAASI,0BAA0BA,CAAExB,QAAQ,EAAEC,SAAS,EAAEmB,QAAQ,EAAExC,IAAI,EAAG;EAAA,IAAA6C,qBAAA;EAC1E,MAAMH,MAAM,IAAAG,qBAAA,GACXjD,sBAAsB,CAAEwB,QAAQ,CAACX,QAAQ,EAAE,CAC1C,QAAQ,EACRY,SAAS,EACT,QAAQ,EACR,GAAGrB,IAAI,CACN,CAAC,cAAA6C,qBAAA,cAAAA,qBAAA,GACHjD,sBAAsB,CAAEwB,QAAQ,CAACX,QAAQ,EAAE,CAAE,QAAQ,EAAE,GAAGT,IAAI,CAAG,CAAC;EACnE,IAAK,CAAE0C,MAAM,EAAG;IACf,OAAOF,QAAQ;EAChB;EACA;EACA,OAAOG,oBAAoB,CAAEvB,QAAQ,EAAEC,SAAS,EAAEqB,MAAO,CAAC;AAC3D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,oBAAoBA,CAAEvB,QAAQ,EAAEC,SAAS,EAAEmB,QAAQ,EAAG;EACrE,IAAK,CAAEA,QAAQ,IAAI,OAAOA,QAAQ,KAAK,QAAQ,EAAG;IACjD,IAAK,OAAOA,QAAQ,EAAEM,GAAG,KAAK,QAAQ,EAAG;MACxCN,QAAQ,GAAG5C,sBAAsB,CAAEwB,QAAQ,EAAEoB,QAAQ,CAACM,GAAI,CAAC;MAC3D;MACA;MACA,IAAK,CAAEN,QAAQ,IAAI,CAAC,CAAEA,QAAQ,EAAEM,GAAG,EAAG;QACrC,OAAON,QAAQ;MAChB;IACD,CAAC,MAAM;MACN,OAAOA,QAAQ;IAChB;EACD;EACA,MAAMO,iBAAiB,GAAG,MAAM;EAChC,MAAMC,kBAAkB,GAAG,YAAY;EACvC,MAAMC,kBAAkB,GAAG,GAAG;EAE9B,IAAIC,SAAS;EAEb,IAAKV,QAAQ,CAACW,UAAU,CAAEJ,iBAAkB,CAAC,EAAG;IAC/CG,SAAS,GAAGV,QAAQ,CAACY,KAAK,CAAEL,iBAAiB,CAACM,MAAO,CAAC,CAACC,KAAK,CAAE,GAAI,CAAC;EACpE,CAAC,MAAM,IACNd,QAAQ,CAACW,UAAU,CAAEH,kBAAmB,CAAC,IACzCR,QAAQ,CAACe,QAAQ,CAAEN,kBAAmB,CAAC,EACtC;IACDC,SAAS,GAAGV,QAAQ,CAClBY,KAAK,CAAEJ,kBAAkB,CAACK,MAAM,EAAE,CAACJ,kBAAkB,CAACI,MAAO,CAAC,CAC9DC,KAAK,CAAE,IAAK,CAAC;EAChB,CAAC,MAAM;IACN;IACA,OAAOd,QAAQ;EAChB;EAEA,MAAM,CAAEgB,IAAI,EAAE,GAAGxD,IAAI,CAAE,GAAGkD,SAAS;EACnC,IAAKM,IAAI,KAAK,QAAQ,EAAG;IACxB,OAAOjB,0BAA0B,CAChCnB,QAAQ,EACRC,SAAS,EACTmB,QAAQ,EACRxC,IACD,CAAC;EACF;EACA,IAAKwD,IAAI,KAAK,QAAQ,EAAG;IACxB,OAAOZ,0BAA0B,CAChCxB,QAAQ,EACRC,SAAS,EACTmB,QAAQ,EACRxC,IACD,CAAC;EACF;EACA,OAAOwC,QAAQ;AAChB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASiB,aAAaA,CAAEC,KAAK,EAAEC,QAAQ,EAAG;EAChD,IAAK,CAAED,KAAK,IAAI,CAAEC,QAAQ,EAAG;IAC5B,OAAOA,QAAQ;EAChB;EAEA,MAAMC,MAAM,GAAGF,KAAK,CAACJ,KAAK,CAAE,GAAI,CAAC;EACjC,MAAMO,SAAS,GAAGF,QAAQ,CAACL,KAAK,CAAE,GAAI,CAAC;EAEvC,MAAMQ,eAAe,GAAG,EAAE;EAC1BF,MAAM,CAACG,OAAO,CAAIC,KAAK,IAAM;IAC5BH,SAAS,CAACE,OAAO,CAAIE,KAAK,IAAM;MAC/BH,eAAe,CAACI,IAAI,CAAG,GAAGF,KAAK,CAACG,IAAI,CAAC,CAAG,IAAIF,KAAK,CAACE,IAAI,CAAC,CAAG,EAAE,CAAC;IAC9D,CAAE,CAAC;EACJ,CAAE,CAAC;EAEH,OAAOL,eAAe,CAACM,IAAI,CAAE,IAAK,CAAC;AACpC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,qBAAqBA,CAAEX,KAAK,EAAEG,SAAS,EAAG;EACzD,IAAK,CAAEH,KAAK,IAAI,CAAEG,SAAS,EAAG;IAC7B;EACD;EAEA,MAAMS,gBAAgB,GAAG,CAAC,CAAC;EAE3BC,MAAM,CAACC,OAAO,CAAEX,SAAU,CAAC,CAACE,OAAO,CAAE,CAAE,CAAEU,OAAO,EAAEd,QAAQ,CAAE,KAAM;IACjE,IAAK,OAAOA,QAAQ,KAAK,QAAQ,EAAG;MACnCW,gBAAgB,CAAEG,OAAO,CAAE,GAAGhB,aAAa,CAAEC,KAAK,EAAEC,QAAS,CAAC;IAC/D;IAEA,IAAK,OAAOA,QAAQ,KAAK,QAAQ,EAAG;MACnCW,gBAAgB,CAAEG,OAAO,CAAE,GAAG,CAAC,CAAC;MAEhCF,MAAM,CAACC,OAAO,CAAEb,QAAS,CAAC,CAACI,OAAO,CACjC,CAAE,CAAEW,UAAU,EAAEC,kBAAkB,CAAE,KAAM;QACzCL,gBAAgB,CAAEG,OAAO,CAAE,CAAEC,UAAU,CAAE,GAAGjB,aAAa,CACxDC,KAAK,EACLiB,kBACD,CAAC;MACF,CACD,CAAC;IACF;EACD,CAAE,CAAC;EAEH,OAAOL,gBAAgB;AACxB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASM,gBAAgBA,CAAEjB,QAAQ,EAAEkB,QAAQ,EAAG;EACtD,IAAK,CAAElB,QAAQ,CAACmB,QAAQ,CAAE,GAAI,CAAC,EAAG;IACjC,OAAOnB,QAAQ,GAAGkB,QAAQ;EAC3B;EACA,MAAMhB,SAAS,GAAGF,QAAQ,CAACL,KAAK,CAAE,GAAI,CAAC;EACvC,MAAMyB,YAAY,GAAGlB,SAAS,CAACmB,GAAG,CAAIC,GAAG,IAAMA,GAAG,GAAGJ,QAAS,CAAC;EAC/D,OAAOE,YAAY,CAACX,IAAI,CAAE,GAAI,CAAC;AAChC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASc,0BAA0BA,CAAEC,QAAQ,EAAEC,SAAS,EAAG;EACjE,IAAK,OAAOD,QAAQ,KAAK,QAAQ,IAAI,OAAOC,SAAS,KAAK,QAAQ,EAAG;IACpE,OAAOD,QAAQ,KAAKC,SAAS;EAC9B;EACA,OACC5F,aAAa,CAAE2F,QAAQ,EAAEE,MAAM,EAAED,SAAS,EAAEC,MAAO,CAAC,IACpD7F,aAAa,CAAE2F,QAAQ,EAAE1E,QAAQ,EAAE2E,SAAS,EAAE3E,QAAS,CAAC;AAE1D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAAS6E,8BAA8BA,CAAEF,SAAS,EAAEG,aAAa,EAAG;EAC1E,MAAMC,cAAc,GAAI,aAAaJ,SAAW,EAAC;EAEjD,IAAK,CAAEG,aAAa,EAAG;IACtB,OAAOC,cAAc;EACtB;EAEA,MAAMC,aAAa,GAAG,+BAA+B;EACrD,MAAMC,iBAAiB,GAAGA,CAAEC,MAAM,EAAEC,MAAM,EAAEC,MAAM,KAAM;IACvD,OAAOD,MAAM,GAAGC,MAAM,GAAGL,cAAc;EACxC,CAAC;EAED,MAAM9C,MAAM,GAAG6C,aAAa,CAC1BjC,KAAK,CAAE,GAAI,CAAC,CACZ0B,GAAG,CAAIc,IAAI,IAAMA,IAAI,CAACC,OAAO,CAAEN,aAAa,EAAEC,iBAAkB,CAAE,CAAC;EAErE,OAAOhD,MAAM,CAAC0B,IAAI,CAAE,GAAI,CAAC;AAC1B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAAS4B,wBAAwBA,CAAEC,IAAI,EAAEC,aAAa,EAAG;EAC/D,IAAK,CAAED,IAAI,IAAI,CAAEC,aAAa,IAAI,CAAEC,KAAK,CAACC,OAAO,CAAEF,aAAc,CAAC,EAAG;IACpE,OAAOD,IAAI;EACZ;EAEA,MAAMI,GAAG,GAAGH,aAAa,CAACnE,IAAI,CAC3BuE,YAAY,IAAMA,YAAY,EAAEC,IAAI,KAAKN,IAC5C,CAAC;EAED,IAAK,CAAEI,GAAG,EAAEG,IAAI,EAAG;IAClB,OAAOP,IAAI;EACZ;EAEA,OAAOI,GAAG,EAAEG,IAAI;AACjB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,mBAAmBA,CAAEC,SAAS,EAAEC,IAAI,EAAG;EACtD,IAAK,CAAED,SAAS,IAAI,CAAEC,IAAI,EAAG;IAC5B,OAAOD,SAAS;EACjB;;EAEA;AACD;AACA;AACA;AACA;EACC,IAAK,OAAOA,SAAS,KAAK,QAAQ,IAAIA,SAAS,EAAE5D,GAAG,EAAG;IACtD,MAAM8D,iBAAiB,GAAGlH,uBAAuB,CAChDE,sBAAsB,CAAE+G,IAAI,EAAED,SAAS,CAAC5D,GAAI,CAC7C,CAAC;;IAED;AACF;AACA;AACA;IACE,IAAK8D,iBAAiB,EAAE9D,GAAG,EAAG;MAC7B,OAAOb,SAAS;IACjB;IAEA,IAAK2E,iBAAiB,KAAK3E,SAAS,EAAG;MACtC,OAAOyE,SAAS;IACjB;IAEA,OAAOE,iBAAiB;EACzB;EACA,OAAOF,SAAS;AACjB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASG,gBAAgBA,CAAEH,SAAS,EAAEC,IAAI,EAAG;EACnD,IAAK,CAAED,SAAS,IAAI,CAAEC,IAAI,EAAG;IAC5B,OAAOD,SAAS;EACjB;;EAEA;EACA,MAAMI,aAAa,GAAGL,mBAAmB,CAAEC,SAAS,EAAEC,IAAK,CAAC;;EAE5D;EACA,IAAKG,aAAa,EAAEC,GAAG,EAAG;IACzBD,aAAa,CAACC,GAAG,GAAGf,wBAAwB,CAC3Cc,aAAa,CAACC,GAAG,EACjBJ,IAAI,EAAEK,MAAM,GAAI,eAAe,CAChC,CAAC;EACF;EAEA,OAAOF,aAAa;AACrB","ignoreList":[]}