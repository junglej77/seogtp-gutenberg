{"version":3,"names":["useCallback","useMemo","useSelect","useDispatch","useBlockEditContext","useSettings","store","blockEditorStore","__experimentalGetGradientClass","gradientSlug","undefined","getGradientValueBySlug","gradients","slug","gradient","find","g","__experimentalGetGradientObjectByGradientValue","value","getGradientSlugByValue","__experimentalUseGradient","gradientAttribute","customGradientAttribute","clientId","userGradientPalette","themeGradientPalette","defaultGradientPalette","allGradients","customGradient","select","getBlockAttributes","attributes","updateBlockAttributes","setGradient","newGradientValue","gradientClass","gradientValue"],"sources":["@wordpress/block-editor/src/components/gradients/use-gradient.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useCallback, useMemo } from '@wordpress/element';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { useBlockEditContext } from '../block-edit';\r\nimport { useSettings } from '../use-settings';\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nexport function __experimentalGetGradientClass( gradientSlug ) {\r\n\tif ( ! gradientSlug ) {\r\n\t\treturn undefined;\r\n\t}\r\n\treturn `has-${ gradientSlug }-gradient-background`;\r\n}\r\n\r\n/**\r\n * Retrieves the gradient value per slug.\r\n *\r\n * @param {Array}  gradients Gradient Palette\r\n * @param {string} slug      Gradient slug\r\n *\r\n * @return {string} Gradient value.\r\n */\r\nexport function getGradientValueBySlug( gradients, slug ) {\r\n\tconst gradient = gradients?.find( ( g ) => g.slug === slug );\r\n\treturn gradient && gradient.gradient;\r\n}\r\n\r\nexport function __experimentalGetGradientObjectByGradientValue(\r\n\tgradients,\r\n\tvalue\r\n) {\r\n\tconst gradient = gradients?.find( ( g ) => g.gradient === value );\r\n\treturn gradient;\r\n}\r\n\r\n/**\r\n * Retrieves the gradient slug per slug.\r\n *\r\n * @param {Array}  gradients Gradient Palette\r\n * @param {string} value     Gradient value\r\n * @return {string} Gradient slug.\r\n */\r\nexport function getGradientSlugByValue( gradients, value ) {\r\n\tconst gradient = __experimentalGetGradientObjectByGradientValue(\r\n\t\tgradients,\r\n\t\tvalue\r\n\t);\r\n\treturn gradient && gradient.slug;\r\n}\r\n\r\nexport function __experimentalUseGradient( {\r\n\tgradientAttribute = 'gradient',\r\n\tcustomGradientAttribute = 'customGradient',\r\n} = {} ) {\r\n\tconst { clientId } = useBlockEditContext();\r\n\r\n\tconst [\r\n\t\tuserGradientPalette,\r\n\t\tthemeGradientPalette,\r\n\t\tdefaultGradientPalette,\r\n\t] = useSettings(\r\n\t\t'color.gradients.custom',\r\n\t\t'color.gradients.theme',\r\n\t\t'color.gradients.default'\r\n\t);\r\n\tconst allGradients = useMemo(\r\n\t\t() => [\r\n\t\t\t...( userGradientPalette || [] ),\r\n\t\t\t...( themeGradientPalette || [] ),\r\n\t\t\t...( defaultGradientPalette || [] ),\r\n\t\t],\r\n\t\t[ userGradientPalette, themeGradientPalette, defaultGradientPalette ]\r\n\t);\r\n\tconst { gradient, customGradient } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst { getBlockAttributes } = select( blockEditorStore );\r\n\t\t\tconst attributes = getBlockAttributes( clientId ) || {};\r\n\t\t\treturn {\r\n\t\t\t\tcustomGradient: attributes[ customGradientAttribute ],\r\n\t\t\t\tgradient: attributes[ gradientAttribute ],\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ clientId, gradientAttribute, customGradientAttribute ]\r\n\t);\r\n\r\n\tconst { updateBlockAttributes } = useDispatch( blockEditorStore );\r\n\tconst setGradient = useCallback(\r\n\t\t( newGradientValue ) => {\r\n\t\t\tconst slug = getGradientSlugByValue(\r\n\t\t\t\tallGradients,\r\n\t\t\t\tnewGradientValue\r\n\t\t\t);\r\n\t\t\tif ( slug ) {\r\n\t\t\t\tupdateBlockAttributes( clientId, {\r\n\t\t\t\t\t[ gradientAttribute ]: slug,\r\n\t\t\t\t\t[ customGradientAttribute ]: undefined,\r\n\t\t\t\t} );\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tupdateBlockAttributes( clientId, {\r\n\t\t\t\t[ gradientAttribute ]: undefined,\r\n\t\t\t\t[ customGradientAttribute ]: newGradientValue,\r\n\t\t\t} );\r\n\t\t},\r\n\t\t[ allGradients, clientId, updateBlockAttributes ]\r\n\t);\r\n\r\n\tconst gradientClass = __experimentalGetGradientClass( gradient );\r\n\tlet gradientValue;\r\n\tif ( gradient ) {\r\n\t\tgradientValue = getGradientValueBySlug( allGradients, gradient );\r\n\t} else {\r\n\t\tgradientValue = customGradient;\r\n\t}\r\n\treturn { gradientClass, gradientValue, setGradient };\r\n}\r\n"],"mappings":"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","ignoreList":[]}