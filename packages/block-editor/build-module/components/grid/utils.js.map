{"version":3,"names":["range","start","length","Array","from","_","i","GridRect","constructor","columnStart","rowStart","columnEnd","rowEnd","columnSpan","rowSpan","undefined","contains","column","row","containsRect","rect","intersectsRect","getComputedCSS","element","property","ownerDocument","defaultView","getComputedStyle","getPropertyValue","getGridTracks","template","gap","tracks","size","split","previousTrack","end","parseFloat","push","getClosestTrack","position","edge","reduce","closest","track","index","Math","abs","getGridRect","gridElement","columnGap","rowGap","gridColumnTracks","gridRowTracks","left","top","right","bottom","getGridItemRect","gridItemElement","parentElement","window","DOMRect","offsetLeft","offsetTop","offsetWidth","offsetHeight","getGridInfo","gridTemplateColumns","gridTemplateRows","numColumns","numRows","numItems","currentColor","style","padding"],"sources":["@wordpress/block-editor/src/components/grid/utils.js"],"sourcesContent":["export function range( start, length ) {\r\n\treturn Array.from( { length }, ( _, i ) => start + i );\r\n}\r\n\r\nexport class GridRect {\r\n\tconstructor( {\r\n\t\tcolumnStart,\r\n\t\trowStart,\r\n\t\tcolumnEnd,\r\n\t\trowEnd,\r\n\t\tcolumnSpan,\r\n\t\trowSpan,\r\n\t} = {} ) {\r\n\t\tthis.columnStart = columnStart ?? 1;\r\n\t\tthis.rowStart = rowStart ?? 1;\r\n\t\tif ( columnSpan !== undefined ) {\r\n\t\t\tthis.columnEnd = this.columnStart + columnSpan - 1;\r\n\t\t} else {\r\n\t\t\tthis.columnEnd = columnEnd ?? this.columnStart;\r\n\t\t}\r\n\t\tif ( rowSpan !== undefined ) {\r\n\t\t\tthis.rowEnd = this.rowStart + rowSpan - 1;\r\n\t\t} else {\r\n\t\t\tthis.rowEnd = rowEnd ?? this.rowStart;\r\n\t\t}\r\n\t}\r\n\r\n\tget columnSpan() {\r\n\t\treturn this.columnEnd - this.columnStart + 1;\r\n\t}\r\n\r\n\tget rowSpan() {\r\n\t\treturn this.rowEnd - this.rowStart + 1;\r\n\t}\r\n\r\n\tcontains( column, row ) {\r\n\t\treturn (\r\n\t\t\tcolumn >= this.columnStart &&\r\n\t\t\tcolumn <= this.columnEnd &&\r\n\t\t\trow >= this.rowStart &&\r\n\t\t\trow <= this.rowEnd\r\n\t\t);\r\n\t}\r\n\r\n\tcontainsRect( rect ) {\r\n\t\treturn (\r\n\t\t\tthis.contains( rect.columnStart, rect.rowStart ) &&\r\n\t\t\tthis.contains( rect.columnEnd, rect.rowEnd )\r\n\t\t);\r\n\t}\r\n\r\n\tintersectsRect( rect ) {\r\n\t\treturn (\r\n\t\t\tthis.columnStart <= rect.columnEnd &&\r\n\t\t\tthis.columnEnd >= rect.columnStart &&\r\n\t\t\tthis.rowStart <= rect.rowEnd &&\r\n\t\t\tthis.rowEnd >= rect.rowStart\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport function getComputedCSS( element, property ) {\r\n\treturn element.ownerDocument.defaultView\r\n\t\t.getComputedStyle( element )\r\n\t\t.getPropertyValue( property );\r\n}\r\n\r\n/**\r\n * Given a grid-template-columns or grid-template-rows CSS property value, gets the start and end\r\n * position in pixels of each grid track.\r\n *\r\n * https://css-tricks.com/snippets/css/complete-guide-grid/#aa-grid-track\r\n *\r\n * @param {string} template The grid-template-columns or grid-template-rows CSS property value.\r\n *                          Only supports fixed sizes in pixels.\r\n * @param {number} gap      The gap between grid tracks in pixels.\r\n *\r\n * @return {Array<{start: number, end: number}>} An array of objects with the start and end\r\n *                                               position in pixels of each grid track.\r\n */\r\nexport function getGridTracks( template, gap ) {\r\n\tconst tracks = [];\r\n\tfor ( const size of template.split( ' ' ) ) {\r\n\t\tconst previousTrack = tracks[ tracks.length - 1 ];\r\n\t\tconst start = previousTrack ? previousTrack.end + gap : 0;\r\n\t\tconst end = start + parseFloat( size );\r\n\t\ttracks.push( { start, end } );\r\n\t}\r\n\treturn tracks;\r\n}\r\n\r\n/**\r\n * Given an array of grid tracks and a position in pixels, gets the index of the closest track to\r\n * that position.\r\n *\r\n * https://css-tricks.com/snippets/css/complete-guide-grid/#aa-grid-track\r\n *\r\n * @param {Array<{start: number, end: number}>} tracks   An array of objects with the start and end\r\n *                                                       position in pixels of each grid track.\r\n * @param {number}                              position The position in pixels.\r\n * @param {string}                              edge     The edge of the track to compare the\r\n *                                                       position to. Either 'start' or 'end'.\r\n *\r\n * @return {number} The index of the closest track to the position. 0-based, unlike CSS grid which\r\n *                  is 1-based.\r\n */\r\nexport function getClosestTrack( tracks, position, edge = 'start' ) {\r\n\treturn tracks.reduce(\r\n\t\t( closest, track, index ) =>\r\n\t\t\tMath.abs( track[ edge ] - position ) <\r\n\t\t\tMath.abs( tracks[ closest ][ edge ] - position )\r\n\t\t\t\t? index\r\n\t\t\t\t: closest,\r\n\t\t0\r\n\t);\r\n}\r\n\r\nexport function getGridRect( gridElement, rect ) {\r\n\tconst columnGap = parseFloat( getComputedCSS( gridElement, 'column-gap' ) );\r\n\tconst rowGap = parseFloat( getComputedCSS( gridElement, 'row-gap' ) );\r\n\tconst gridColumnTracks = getGridTracks(\r\n\t\tgetComputedCSS( gridElement, 'grid-template-columns' ),\r\n\t\tcolumnGap\r\n\t);\r\n\tconst gridRowTracks = getGridTracks(\r\n\t\tgetComputedCSS( gridElement, 'grid-template-rows' ),\r\n\t\trowGap\r\n\t);\r\n\tconst columnStart = getClosestTrack( gridColumnTracks, rect.left ) + 1;\r\n\tconst rowStart = getClosestTrack( gridRowTracks, rect.top ) + 1;\r\n\tconst columnEnd =\r\n\t\tgetClosestTrack( gridColumnTracks, rect.right, 'end' ) + 1;\r\n\tconst rowEnd = getClosestTrack( gridRowTracks, rect.bottom, 'end' ) + 1;\r\n\treturn new GridRect( {\r\n\t\tcolumnStart,\r\n\t\tcolumnEnd,\r\n\t\trowStart,\r\n\t\trowEnd,\r\n\t} );\r\n}\r\n\r\nexport function getGridItemRect( gridItemElement ) {\r\n\treturn getGridRect(\r\n\t\tgridItemElement.parentElement,\r\n\t\tnew window.DOMRect(\r\n\t\t\tgridItemElement.offsetLeft,\r\n\t\t\tgridItemElement.offsetTop,\r\n\t\t\tgridItemElement.offsetWidth,\r\n\t\t\tgridItemElement.offsetHeight\r\n\t\t)\r\n\t);\r\n}\r\n\r\nexport function getGridInfo( gridElement ) {\r\n\tconst gridTemplateColumns = getComputedCSS(\r\n\t\tgridElement,\r\n\t\t'grid-template-columns'\r\n\t);\r\n\tconst gridTemplateRows = getComputedCSS(\r\n\t\tgridElement,\r\n\t\t'grid-template-rows'\r\n\t);\r\n\tconst numColumns = gridTemplateColumns.split( ' ' ).length;\r\n\tconst numRows = gridTemplateRows.split( ' ' ).length;\r\n\tconst numItems = numColumns * numRows;\r\n\treturn {\r\n\t\tnumColumns,\r\n\t\tnumRows,\r\n\t\tnumItems,\r\n\t\tcurrentColor: getComputedCSS( gridElement, 'color' ),\r\n\t\tstyle: {\r\n\t\t\tgridTemplateColumns,\r\n\t\t\tgridTemplateRows,\r\n\t\t\tgap: getComputedCSS( gridElement, 'gap' ),\r\n\t\t\tpadding: getComputedCSS( gridElement, 'padding' ),\r\n\t\t},\r\n\t};\r\n}\r\n"],"mappings":"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","ignoreList":[]}