{"version":3,"names":["useMemo","BaseControl","RangeControl","Flex","FlexItem","__experimentalSpacer","Spacer","__experimentalUseCustomUnits","useCustomUnits","__experimentalUnitControl","UnitControl","__experimentalParseQuantityAndUnitFromRawValue","parseQuantityAndUnitFromRawValue","__","useSettings","jsx","_jsx","jsxs","_jsxs","RANGE_CONTROL_CUSTOM_SETTINGS","px","max","step","vw","vh","em","rem","svw","lvw","dvw","svh","lvh","dvh","vi","svi","lvi","dvi","vb","svb","lvb","dvb","vmin","svmin","lvmin","dvmin","vmax","svmax","lvmax","dvmax","HeightControl","label","onChange","value","_RANGE_CONTROL_CUSTOM","_RANGE_CONTROL_CUSTOM2","customRangeValue","parseFloat","availableUnits","units","selectedUnit","handleSliderChange","next","join","handleUnitChange","newUnit","currentValue","currentUnit","includes","toFixed","Math","round","className","children","VisualLabel","as","isBlock","onUnitChange","min","size","hideLabelFromVision","marginX","marginBottom","__next40pxDefaultSize","withInputField","__nextHasNoMarginBottom"],"sources":["@wordpress/block-editor/src/components/height-control/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useMemo } from '@wordpress/element';\r\nimport {\r\n\tBaseControl,\r\n\tRangeControl,\r\n\tFlex,\r\n\tFlexItem,\r\n\t__experimentalSpacer as Spacer,\r\n\t__experimentalUseCustomUnits as useCustomUnits,\r\n\t__experimentalUnitControl as UnitControl,\r\n\t__experimentalParseQuantityAndUnitFromRawValue as parseQuantityAndUnitFromRawValue,\r\n} from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { useSettings } from '../use-settings';\r\n\r\nconst RANGE_CONTROL_CUSTOM_SETTINGS = {\r\n\tpx: { max: 1000, step: 1 },\r\n\t'%': { max: 100, step: 1 },\r\n\tvw: { max: 100, step: 1 },\r\n\tvh: { max: 100, step: 1 },\r\n\tem: { max: 50, step: 0.1 },\r\n\trem: { max: 50, step: 0.1 },\r\n\tsvw: { max: 100, step: 1 },\r\n\tlvw: { max: 100, step: 1 },\r\n\tdvw: { max: 100, step: 1 },\r\n\tsvh: { max: 100, step: 1 },\r\n\tlvh: { max: 100, step: 1 },\r\n\tdvh: { max: 100, step: 1 },\r\n\tvi: { max: 100, step: 1 },\r\n\tsvi: { max: 100, step: 1 },\r\n\tlvi: { max: 100, step: 1 },\r\n\tdvi: { max: 100, step: 1 },\r\n\tvb: { max: 100, step: 1 },\r\n\tsvb: { max: 100, step: 1 },\r\n\tlvb: { max: 100, step: 1 },\r\n\tdvb: { max: 100, step: 1 },\r\n\tvmin: { max: 100, step: 1 },\r\n\tsvmin: { max: 100, step: 1 },\r\n\tlvmin: { max: 100, step: 1 },\r\n\tdvmin: { max: 100, step: 1 },\r\n\tvmax: { max: 100, step: 1 },\r\n\tsvmax: { max: 100, step: 1 },\r\n\tlvmax: { max: 100, step: 1 },\r\n\tdvmax: { max: 100, step: 1 },\r\n};\r\n\r\n/**\r\n * HeightControl renders a linked unit control and range control for adjusting the height of a block.\r\n *\r\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/height-control/README.md\r\n *\r\n * @param {Object}                     props\r\n * @param {?string}                    props.label    A label for the control.\r\n * @param {( value: string ) => void } props.onChange Called when the height changes.\r\n * @param {string}                     props.value    The current height value.\r\n *\r\n * @return {Component} The component to be rendered.\r\n */\r\nexport default function HeightControl( {\r\n\tlabel = __( 'Height' ),\r\n\tonChange,\r\n\tvalue,\r\n} ) {\r\n\tconst customRangeValue = parseFloat( value );\r\n\r\n\tconst [ availableUnits ] = useSettings( 'spacing.units' );\r\n\tconst units = useCustomUnits( {\r\n\t\tavailableUnits: availableUnits || [\r\n\t\t\t'%',\r\n\t\t\t'px',\r\n\t\t\t'em',\r\n\t\t\t'rem',\r\n\t\t\t'vh',\r\n\t\t\t'vw',\r\n\t\t],\r\n\t} );\r\n\r\n\tconst selectedUnit =\r\n\t\tuseMemo(\r\n\t\t\t() => parseQuantityAndUnitFromRawValue( value ),\r\n\t\t\t[ value ]\r\n\t\t)[ 1 ] ||\r\n\t\tunits[ 0 ]?.value ||\r\n\t\t'px';\r\n\r\n\tconst handleSliderChange = ( next ) => {\r\n\t\tonChange( [ next, selectedUnit ].join( '' ) );\r\n\t};\r\n\r\n\tconst handleUnitChange = ( newUnit ) => {\r\n\t\t// Attempt to smooth over differences between currentUnit and newUnit.\r\n\t\t// This should slightly improve the experience of switching between unit types.\r\n\t\tconst [ currentValue, currentUnit ] =\r\n\t\t\tparseQuantityAndUnitFromRawValue( value );\r\n\r\n\t\tif ( [ 'em', 'rem' ].includes( newUnit ) && currentUnit === 'px' ) {\r\n\t\t\t// Convert pixel value to an approximate of the new unit, assuming a root size of 16px.\r\n\t\t\tonChange( ( currentValue / 16 ).toFixed( 2 ) + newUnit );\r\n\t\t} else if (\r\n\t\t\t[ 'em', 'rem' ].includes( currentUnit ) &&\r\n\t\t\tnewUnit === 'px'\r\n\t\t) {\r\n\t\t\t// Convert to pixel value assuming a root size of 16px.\r\n\t\t\tonChange( Math.round( currentValue * 16 ) + newUnit );\r\n\t\t} else if (\r\n\t\t\t[\r\n\t\t\t\t'%',\r\n\t\t\t\t'vw',\r\n\t\t\t\t'svw',\r\n\t\t\t\t'lvw',\r\n\t\t\t\t'dvw',\r\n\t\t\t\t'vh',\r\n\t\t\t\t'svh',\r\n\t\t\t\t'lvh',\r\n\t\t\t\t'dvh',\r\n\t\t\t\t'vi',\r\n\t\t\t\t'svi',\r\n\t\t\t\t'lvi',\r\n\t\t\t\t'dvi',\r\n\t\t\t\t'vb',\r\n\t\t\t\t'svb',\r\n\t\t\t\t'lvb',\r\n\t\t\t\t'dvb',\r\n\t\t\t\t'vmin',\r\n\t\t\t\t'svmin',\r\n\t\t\t\t'lvmin',\r\n\t\t\t\t'dvmin',\r\n\t\t\t\t'vmax',\r\n\t\t\t\t'svmax',\r\n\t\t\t\t'lvmax',\r\n\t\t\t\t'dvmax',\r\n\t\t\t].includes( newUnit ) &&\r\n\t\t\tcurrentValue > 100\r\n\t\t) {\r\n\t\t\t// When converting to `%` or viewport-relative units, cap the new value at 100.\r\n\t\t\tonChange( 100 + newUnit );\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<fieldset className=\"block-editor-height-control\">\r\n\t\t\t<BaseControl.VisualLabel as=\"legend\">\r\n\t\t\t\t{ label }\r\n\t\t\t</BaseControl.VisualLabel>\r\n\t\t\t<Flex>\r\n\t\t\t\t<FlexItem isBlock>\r\n\t\t\t\t\t<UnitControl\r\n\t\t\t\t\t\tvalue={ value }\r\n\t\t\t\t\t\tunits={ units }\r\n\t\t\t\t\t\tonChange={ onChange }\r\n\t\t\t\t\t\tonUnitChange={ handleUnitChange }\r\n\t\t\t\t\t\tmin={ 0 }\r\n\t\t\t\t\t\tsize=\"__unstable-large\"\r\n\t\t\t\t\t\tlabel={ label }\r\n\t\t\t\t\t\thideLabelFromVision\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FlexItem>\r\n\t\t\t\t<FlexItem isBlock>\r\n\t\t\t\t\t<Spacer marginX={ 2 } marginBottom={ 0 }>\r\n\t\t\t\t\t\t<RangeControl\r\n\t\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\t\tvalue={ customRangeValue }\r\n\t\t\t\t\t\t\tmin={ 0 }\r\n\t\t\t\t\t\t\tmax={\r\n\t\t\t\t\t\t\t\tRANGE_CONTROL_CUSTOM_SETTINGS[ selectedUnit ]\r\n\t\t\t\t\t\t\t\t\t?.max ?? 100\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tstep={\r\n\t\t\t\t\t\t\t\tRANGE_CONTROL_CUSTOM_SETTINGS[ selectedUnit ]\r\n\t\t\t\t\t\t\t\t\t?.step ?? 0.1\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\twithInputField={ false }\r\n\t\t\t\t\t\t\tonChange={ handleSliderChange }\r\n\t\t\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\t\t\tlabel={ label }\r\n\t\t\t\t\t\t\thideLabelFromVision\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Spacer>\r\n\t\t\t\t</FlexItem>\r\n\t\t\t</Flex>\r\n\t\t</fieldset>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}