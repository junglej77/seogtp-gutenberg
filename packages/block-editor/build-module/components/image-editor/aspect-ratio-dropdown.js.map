{"version":3,"names":["check","aspectRatio","aspectRatioIcon","DropdownMenu","MenuGroup","MenuItem","__","useSettings","POPOVER_PROPS","useImageEditingContext","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","AspectRatioGroup","aspectRatios","isDisabled","label","onClick","value","children","map","name","slug","ratio","disabled","role","isSelected","icon","undefined","ratioToNumber","str","a","b","rest","split","Number","isNaN","length","NaN","presetRatioAsNumber","AspectRatioDropdown","toggleProps","isInProgress","aspect","setAspect","defaultAspect","defaultRatios","themeRatios","showDefaultRatios","popoverProps","onClose","newAspect","filter"],"sources":["@wordpress/block-editor/src/components/image-editor/aspect-ratio-dropdown.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { check, aspectRatio as aspectRatioIcon } from '@wordpress/icons';\r\nimport { DropdownMenu, MenuGroup, MenuItem } from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { useSettings } from '../use-settings';\r\nimport { POPOVER_PROPS } from './constants';\r\nimport { useImageEditingContext } from './context';\r\n\r\nfunction AspectRatioGroup( {\r\n\taspectRatios,\r\n\tisDisabled,\r\n\tlabel,\r\n\tonClick,\r\n\tvalue,\r\n} ) {\r\n\treturn (\r\n\t\t<MenuGroup label={ label }>\r\n\t\t\t{ aspectRatios.map( ( { name, slug, ratio } ) => (\r\n\t\t\t\t<MenuItem\r\n\t\t\t\t\tkey={ slug }\r\n\t\t\t\t\tdisabled={ isDisabled }\r\n\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\tonClick( ratio );\r\n\t\t\t\t\t} }\r\n\t\t\t\t\trole=\"menuitemradio\"\r\n\t\t\t\t\tisSelected={ ratio === value }\r\n\t\t\t\t\ticon={ ratio === value ? check : undefined }\r\n\t\t\t\t>\r\n\t\t\t\t\t{ name }\r\n\t\t\t\t</MenuItem>\r\n\t\t\t) ) }\r\n\t\t</MenuGroup>\r\n\t);\r\n}\r\n\r\nexport function ratioToNumber( str ) {\r\n\t// TODO: support two-value aspect ratio?\r\n\t// https://css-tricks.com/almanac/properties/a/aspect-ratio/#aa-it-can-take-two-values\r\n\tconst [ a, b, ...rest ] = str.split( '/' ).map( Number );\r\n\tif (\r\n\t\ta <= 0 ||\r\n\t\tb <= 0 ||\r\n\t\tNumber.isNaN( a ) ||\r\n\t\tNumber.isNaN( b ) ||\r\n\t\trest.length\r\n\t) {\r\n\t\treturn NaN;\r\n\t}\r\n\treturn b ? a / b : a;\r\n}\r\n\r\nfunction presetRatioAsNumber( { ratio, ...rest } ) {\r\n\treturn {\r\n\t\tratio: ratioToNumber( ratio ),\r\n\t\t...rest,\r\n\t};\r\n}\r\n\r\nexport default function AspectRatioDropdown( { toggleProps } ) {\r\n\tconst { isInProgress, aspect, setAspect, defaultAspect } =\r\n\t\tuseImageEditingContext();\r\n\r\n\tconst [ defaultRatios, themeRatios, showDefaultRatios ] = useSettings(\r\n\t\t'dimensions.aspectRatios.default',\r\n\t\t'dimensions.aspectRatios.theme',\r\n\t\t'dimensions.defaultAspectRatios'\r\n\t);\r\n\r\n\treturn (\r\n\t\t<DropdownMenu\r\n\t\t\ticon={ aspectRatioIcon }\r\n\t\t\tlabel={ __( 'Aspect Ratio' ) }\r\n\t\t\tpopoverProps={ POPOVER_PROPS }\r\n\t\t\ttoggleProps={ toggleProps }\r\n\t\t>\r\n\t\t\t{ ( { onClose } ) => (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<AspectRatioGroup\r\n\t\t\t\t\t\tisDisabled={ isInProgress }\r\n\t\t\t\t\t\tonClick={ ( newAspect ) => {\r\n\t\t\t\t\t\t\tsetAspect( newAspect );\r\n\t\t\t\t\t\t\tonClose();\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t\tvalue={ aspect }\r\n\t\t\t\t\t\taspectRatios={ [\r\n\t\t\t\t\t\t\t// All ratios should be mirrored in AspectRatioTool in @wordpress/block-editor.\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tslug: 'original',\r\n\t\t\t\t\t\t\t\tname: __( 'Original' ),\r\n\t\t\t\t\t\t\t\taspect: defaultAspect,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t...( showDefaultRatios\r\n\t\t\t\t\t\t\t\t? defaultRatios\r\n\t\t\t\t\t\t\t\t\t\t.map( presetRatioAsNumber )\r\n\t\t\t\t\t\t\t\t\t\t.filter( ( { ratio } ) => ratio === 1 )\r\n\t\t\t\t\t\t\t\t: [] ),\r\n\t\t\t\t\t\t] }\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{ themeRatios?.length > 0 && (\r\n\t\t\t\t\t\t<AspectRatioGroup\r\n\t\t\t\t\t\t\tlabel={ __( 'Theme' ) }\r\n\t\t\t\t\t\t\tisDisabled={ isInProgress }\r\n\t\t\t\t\t\t\tonClick={ ( newAspect ) => {\r\n\t\t\t\t\t\t\t\tsetAspect( newAspect );\r\n\t\t\t\t\t\t\t\tonClose();\r\n\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\tvalue={ aspect }\r\n\t\t\t\t\t\t\taspectRatios={ themeRatios }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) }\r\n\t\t\t\t\t{ showDefaultRatios && (\r\n\t\t\t\t\t\t<AspectRatioGroup\r\n\t\t\t\t\t\t\tlabel={ __( 'Landscape' ) }\r\n\t\t\t\t\t\t\tisDisabled={ isInProgress }\r\n\t\t\t\t\t\t\tonClick={ ( newAspect ) => {\r\n\t\t\t\t\t\t\t\tsetAspect( newAspect );\r\n\t\t\t\t\t\t\t\tonClose();\r\n\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\tvalue={ aspect }\r\n\t\t\t\t\t\t\taspectRatios={ defaultRatios\r\n\t\t\t\t\t\t\t\t.map( presetRatioAsNumber )\r\n\t\t\t\t\t\t\t\t.filter( ( { ratio } ) => ratio > 1 ) }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) }\r\n\t\t\t\t\t{ showDefaultRatios && (\r\n\t\t\t\t\t\t<AspectRatioGroup\r\n\t\t\t\t\t\t\tlabel={ __( 'Portrait' ) }\r\n\t\t\t\t\t\t\tisDisabled={ isInProgress }\r\n\t\t\t\t\t\t\tonClick={ ( newAspect ) => {\r\n\t\t\t\t\t\t\t\tsetAspect( newAspect );\r\n\t\t\t\t\t\t\t\tonClose();\r\n\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\tvalue={ aspect }\r\n\t\t\t\t\t\t\taspectRatios={ defaultRatios\r\n\t\t\t\t\t\t\t\t.map( presetRatioAsNumber )\r\n\t\t\t\t\t\t\t\t.filter( ( { ratio } ) => ratio < 1 ) }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) }\r\n\t\t\t\t</>\r\n\t\t\t) }\r\n\t\t</DropdownMenu>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}