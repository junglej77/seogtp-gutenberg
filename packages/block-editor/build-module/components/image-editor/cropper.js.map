{"version":3,"names":["Cropper","clsx","Spinner","useResizeObserver","MIN_ZOOM","MAX_ZOOM","useImageEditingContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ImageCropper","url","width","height","naturalHeight","naturalWidth","borderProps","isInProgress","editedUrl","position","zoom","aspect","setPosition","setCrop","setZoom","rotation","contentResizeListener","clientWidth","editedHeight","area","className","style","children","image","disabled","minZoom","maxZoom","crop","onCropChange","pos","onCropComplete","newCropPercent","onZoomChange","newZoom"],"sources":["@wordpress/block-editor/src/components/image-editor/cropper.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport Cropper from 'react-easy-crop';\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { Spinner } from '@wordpress/components';\r\nimport { useResizeObserver } from '@wordpress/compose';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { MIN_ZOOM, MAX_ZOOM } from './constants';\r\n\r\nimport { useImageEditingContext } from './context';\r\n\r\nexport default function ImageCropper( {\r\n\turl,\r\n\twidth,\r\n\theight,\r\n\tnaturalHeight,\r\n\tnaturalWidth,\r\n\tborderProps,\r\n} ) {\r\n\tconst {\r\n\t\tisInProgress,\r\n\t\teditedUrl,\r\n\t\tposition,\r\n\t\tzoom,\r\n\t\taspect,\r\n\t\tsetPosition,\r\n\t\tsetCrop,\r\n\t\tsetZoom,\r\n\t\trotation,\r\n\t} = useImageEditingContext();\r\n\tconst [ contentResizeListener, { width: clientWidth } ] =\r\n\t\tuseResizeObserver();\r\n\r\n\tlet editedHeight = height || ( clientWidth * naturalHeight ) / naturalWidth;\r\n\r\n\tif ( rotation % 180 === 90 ) {\r\n\t\teditedHeight = ( clientWidth * naturalWidth ) / naturalHeight;\r\n\t}\r\n\r\n\tconst area = (\r\n\t\t<div\r\n\t\t\tclassName={ clsx(\r\n\t\t\t\t'wp-block-image__crop-area',\r\n\t\t\t\tborderProps?.className,\r\n\t\t\t\t{\r\n\t\t\t\t\t'is-applying': isInProgress,\r\n\t\t\t\t}\r\n\t\t\t) }\r\n\t\t\tstyle={ {\r\n\t\t\t\t...borderProps?.style,\r\n\t\t\t\twidth: width || clientWidth,\r\n\t\t\t\theight: editedHeight,\r\n\t\t\t} }\r\n\t\t>\r\n\t\t\t<Cropper\r\n\t\t\t\timage={ editedUrl || url }\r\n\t\t\t\tdisabled={ isInProgress }\r\n\t\t\t\tminZoom={ MIN_ZOOM / 100 }\r\n\t\t\t\tmaxZoom={ MAX_ZOOM / 100 }\r\n\t\t\t\tcrop={ position }\r\n\t\t\t\tzoom={ zoom / 100 }\r\n\t\t\t\taspect={ aspect }\r\n\t\t\t\tonCropChange={ ( pos ) => {\r\n\t\t\t\t\tsetPosition( pos );\r\n\t\t\t\t} }\r\n\t\t\t\tonCropComplete={ ( newCropPercent ) => {\r\n\t\t\t\t\tsetCrop( newCropPercent );\r\n\t\t\t\t} }\r\n\t\t\t\tonZoomChange={ ( newZoom ) => {\r\n\t\t\t\t\tsetZoom( newZoom * 100 );\r\n\t\t\t\t} }\r\n\t\t\t/>\r\n\t\t\t{ isInProgress && <Spinner /> }\r\n\t\t</div>\r\n\t);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ contentResizeListener }\r\n\t\t\t{ area }\r\n\t\t</>\r\n\t);\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,OAAOA,OAAO,MAAM,iBAAiB;AACrC,OAAOC,IAAI,MAAM,MAAM;;AAEvB;AACA;AACA;AACA,SAASC,OAAO,QAAQ,uBAAuB;AAC/C,SAASC,iBAAiB,QAAQ,oBAAoB;;AAEtD;AACA;AACA;AACA,SAASC,QAAQ,EAAEC,QAAQ,QAAQ,aAAa;AAEhD,SAASC,sBAAsB,QAAQ,WAAW;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAEnD,eAAe,SAASC,YAAYA,CAAE;EACrCC,GAAG;EACHC,KAAK;EACLC,MAAM;EACNC,aAAa;EACbC,YAAY;EACZC;AACD,CAAC,EAAG;EACH,MAAM;IACLC,YAAY;IACZC,SAAS;IACTC,QAAQ;IACRC,IAAI;IACJC,MAAM;IACNC,WAAW;IACXC,OAAO;IACPC,OAAO;IACPC;EACD,CAAC,GAAGtB,sBAAsB,CAAC,CAAC;EAC5B,MAAM,CAAEuB,qBAAqB,EAAE;IAAEd,KAAK,EAAEe;EAAY,CAAC,CAAE,GACtD3B,iBAAiB,CAAC,CAAC;EAEpB,IAAI4B,YAAY,GAAGf,MAAM,IAAMc,WAAW,GAAGb,aAAa,GAAKC,YAAY;EAE3E,IAAKU,QAAQ,GAAG,GAAG,KAAK,EAAE,EAAG;IAC5BG,YAAY,GAAKD,WAAW,GAAGZ,YAAY,GAAKD,aAAa;EAC9D;EAEA,MAAMe,IAAI,gBACTtB,KAAA;IACCuB,SAAS,EAAGhC,IAAI,CACf,2BAA2B,EAC3BkB,WAAW,EAAEc,SAAS,EACtB;MACC,aAAa,EAAEb;IAChB,CACD,CAAG;IACHc,KAAK,EAAG;MACP,GAAGf,WAAW,EAAEe,KAAK;MACrBnB,KAAK,EAAEA,KAAK,IAAIe,WAAW;MAC3Bd,MAAM,EAAEe;IACT,CAAG;IAAAI,QAAA,gBAEH3B,IAAA,CAACR,OAAO;MACPoC,KAAK,EAAGf,SAAS,IAAIP,GAAK;MAC1BuB,QAAQ,EAAGjB,YAAc;MACzBkB,OAAO,EAAGlC,QAAQ,GAAG,GAAK;MAC1BmC,OAAO,EAAGlC,QAAQ,GAAG,GAAK;MAC1BmC,IAAI,EAAGlB,QAAU;MACjBC,IAAI,EAAGA,IAAI,GAAG,GAAK;MACnBC,MAAM,EAAGA,MAAQ;MACjBiB,YAAY,EAAKC,GAAG,IAAM;QACzBjB,WAAW,CAAEiB,GAAI,CAAC;MACnB,CAAG;MACHC,cAAc,EAAKC,cAAc,IAAM;QACtClB,OAAO,CAAEkB,cAAe,CAAC;MAC1B,CAAG;MACHC,YAAY,EAAKC,OAAO,IAAM;QAC7BnB,OAAO,CAAEmB,OAAO,GAAG,GAAI,CAAC;MACzB;IAAG,CACH,CAAC,EACA1B,YAAY,iBAAIZ,IAAA,CAACN,OAAO,IAAE,CAAC;EAAA,CACzB,CACL;EAED,oBACCQ,KAAA,CAAAE,SAAA;IAAAuB,QAAA,GACGN,qBAAqB,EACrBG,IAAI;EAAA,CACL,CAAC;AAEL","ignoreList":[]}