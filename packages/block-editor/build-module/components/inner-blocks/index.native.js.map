{"version":3,"names":["__unstableGetInnerBlocksProps","getInnerBlocksProps","useRef","useSelect","ButtonBlockAppender","DefaultBlockAppender","useNestedSettingsUpdate","useInnerBlockTemplateSync","useBlockContext","BlockList","useBlockEditContext","useBlockSync","BlockContextProvider","defaultLayout","LayoutProvider","store","blockEditorStore","WarningMaxDepthExceeded","MAX_NESTING_DEPTH","jsx","_jsx","useInnerBlocksProps","props","options","fallbackRef","clientId","ref","InnerBlocks","value","onChange","ControlledInnerBlocks","UncontrolledInnerBlocks","children","wrapperRef","allowedBlocks","prioritizedInserterBlocks","defaultBlock","directInsert","__experimentalDefaultBlock","__experimentalDirectInsert","template","templateLock","templateInsertUpdatesSelection","__experimentalCaptureToolbars","captureToolbars","orientation","renderAppender","renderFooterAppender","parentWidth","horizontal","contentResizeMode","contentStyle","onAddBlock","onDeleteBlock","marginVertical","marginHorizontal","horizontalAlignment","filterInnerBlocks","blockWidth","layout","gridProperties","context","nestingLevel","parentLock","select","getBlockParents","getTemplateLock","getBlockRootClientId","length","rootClientId","withFooter","allProps","save","Content"],"sources":["@wordpress/block-editor/src/components/inner-blocks/index.native.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { __unstableGetInnerBlocksProps as getInnerBlocksProps } from '@wordpress/blocks';\r\nimport { useRef } from '@wordpress/element';\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport ButtonBlockAppender from './button-block-appender';\r\nimport DefaultBlockAppender from './default-block-appender';\r\nimport useNestedSettingsUpdate from './use-nested-settings-update';\r\nimport useInnerBlockTemplateSync from './use-inner-block-template-sync';\r\nimport useBlockContext from './use-block-context';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockList from '../block-list';\r\nimport { useBlockEditContext } from '../block-edit/context';\r\nimport useBlockSync from '../provider/use-block-sync';\r\nimport { BlockContextProvider } from '../block-context';\r\nimport { defaultLayout, LayoutProvider } from '../block-list/layout';\r\nimport { store as blockEditorStore } from '../../store';\r\nimport WarningMaxDepthExceeded from './warning-max-depth-exceeded';\r\nimport { MAX_NESTING_DEPTH } from './constants';\r\n\r\n/**\r\n * This hook is used to lightly mark an element as an inner blocks wrapper\r\n * element. Call this hook and pass the returned props to the element to mark as\r\n * an inner blocks wrapper, automatically rendering inner blocks as children. If\r\n * you define a ref for the element, it is important to pass the ref to this\r\n * hook, which the hook in turn will pass to the component through the props it\r\n * returns. Optionally, you can also pass any other props through this hook, and\r\n * they will be merged and returned.\r\n *\r\n * @param {Object} props   Optional. Props to pass to the element. Must contain\r\n *                         the ref if one is defined.\r\n * @param {Object} options Optional. Inner blocks options.\r\n *\r\n * @see https://github.com/WordPress/gutenberg/blob/master/packages/block-editor/src/components/inner-blocks/README.md\r\n */\r\nexport function useInnerBlocksProps( props = {}, options = {} ) {\r\n\tconst fallbackRef = useRef();\r\n\tconst { clientId } = useBlockEditContext();\r\n\r\n\tconst ref = props.ref || fallbackRef;\r\n\tconst InnerBlocks =\r\n\t\toptions.value && options.onChange\r\n\t\t\t? ControlledInnerBlocks\r\n\t\t\t: UncontrolledInnerBlocks;\r\n\r\n\treturn {\r\n\t\t...props,\r\n\t\tref,\r\n\t\tchildren: (\r\n\t\t\t<InnerBlocks\r\n\t\t\t\t{ ...options }\r\n\t\t\t\tclientId={ clientId }\r\n\t\t\t\twrapperRef={ ref }\r\n\t\t\t/>\r\n\t\t),\r\n\t};\r\n}\r\n\r\n/**\r\n * InnerBlocks is a component which allows a single block to have multiple blocks\r\n * as children. The UncontrolledInnerBlocks component is used whenever the inner\r\n * blocks are not controlled by another entity. In other words, it is normally\r\n * used for inner blocks in the post editor\r\n *\r\n * @param {Object} props The component props.\r\n */\r\nfunction UncontrolledInnerBlocks( props ) {\r\n\tconst {\r\n\t\tclientId,\r\n\t\tallowedBlocks,\r\n\t\tprioritizedInserterBlocks,\r\n\t\tdefaultBlock,\r\n\t\tdirectInsert,\r\n\t\t__experimentalDefaultBlock,\r\n\t\t__experimentalDirectInsert,\r\n\t\ttemplate,\r\n\t\ttemplateLock,\r\n\t\ttemplateInsertUpdatesSelection,\r\n\t\t__experimentalCaptureToolbars: captureToolbars,\r\n\t\torientation,\r\n\t\trenderAppender,\r\n\t\trenderFooterAppender,\r\n\t\tparentWidth,\r\n\t\thorizontal,\r\n\t\tcontentResizeMode,\r\n\t\tcontentStyle,\r\n\t\tonAddBlock,\r\n\t\tonDeleteBlock,\r\n\t\tmarginVertical,\r\n\t\tmarginHorizontal,\r\n\t\thorizontalAlignment,\r\n\t\tfilterInnerBlocks,\r\n\t\tblockWidth,\r\n\t\tlayout = defaultLayout,\r\n\t\tgridProperties,\r\n\t} = props;\r\n\r\n\tconst context = useBlockContext( clientId );\r\n\r\n\tconst { nestingLevel, parentLock } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst { getBlockParents, getTemplateLock, getBlockRootClientId } =\r\n\t\t\t\tselect( blockEditorStore );\r\n\t\t\treturn {\r\n\t\t\t\tnestingLevel: getBlockParents( clientId )?.length,\r\n\t\t\t\tparentLock: getTemplateLock( getBlockRootClientId( clientId ) ),\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ clientId ]\r\n\t);\r\n\r\n\tuseNestedSettingsUpdate(\r\n\t\tclientId,\r\n\t\tparentLock,\r\n\t\tallowedBlocks,\r\n\t\tprioritizedInserterBlocks,\r\n\t\tdefaultBlock,\r\n\t\tdirectInsert,\r\n\t\t__experimentalDefaultBlock,\r\n\t\t__experimentalDirectInsert,\r\n\t\ttemplateLock,\r\n\t\tcaptureToolbars,\r\n\t\torientation,\r\n\t\tlayout\r\n\t);\r\n\r\n\tuseInnerBlockTemplateSync(\r\n\t\tclientId,\r\n\t\ttemplate,\r\n\t\ttemplateLock,\r\n\t\ttemplateInsertUpdatesSelection\r\n\t);\r\n\r\n\tif ( nestingLevel >= MAX_NESTING_DEPTH ) {\r\n\t\treturn <WarningMaxDepthExceeded clientId={ clientId } />;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<LayoutProvider value={ layout }>\r\n\t\t\t<BlockContextProvider value={ context }>\r\n\t\t\t\t<BlockList\r\n\t\t\t\t\tmarginVertical={ marginVertical }\r\n\t\t\t\t\tmarginHorizontal={ marginHorizontal }\r\n\t\t\t\t\trootClientId={ clientId }\r\n\t\t\t\t\trenderAppender={ renderAppender }\r\n\t\t\t\t\trenderFooterAppender={ renderFooterAppender }\r\n\t\t\t\t\twithFooter={ false }\r\n\t\t\t\t\torientation={ orientation }\r\n\t\t\t\t\tparentWidth={ parentWidth }\r\n\t\t\t\t\thorizontalAlignment={ horizontalAlignment }\r\n\t\t\t\t\thorizontal={ horizontal }\r\n\t\t\t\t\tcontentResizeMode={ contentResizeMode }\r\n\t\t\t\t\tcontentStyle={ contentStyle }\r\n\t\t\t\t\tonAddBlock={ onAddBlock }\r\n\t\t\t\t\tonDeleteBlock={ onDeleteBlock }\r\n\t\t\t\t\tfilterInnerBlocks={ filterInnerBlocks }\r\n\t\t\t\t\tgridProperties={ gridProperties }\r\n\t\t\t\t\tblockWidth={ blockWidth }\r\n\t\t\t\t/>\r\n\t\t\t</BlockContextProvider>\r\n\t\t</LayoutProvider>\r\n\t);\r\n}\r\n\r\n/**\r\n * The controlled inner blocks component wraps the uncontrolled inner blocks\r\n * component with the blockSync hook. This keeps the innerBlocks of the block in\r\n * the block-editor store in sync with the blocks of the controlling entity. An\r\n * example of an inner block controller is a template part block, which provides\r\n * its own blocks from the template part entity data source.\r\n *\r\n * @param {Object} props The component props.\r\n */\r\nfunction ControlledInnerBlocks( props ) {\r\n\tuseBlockSync( props );\r\n\treturn <UncontrolledInnerBlocks { ...props } />;\r\n}\r\n\r\n/**\r\n * Wrapped InnerBlocks component which detects whether to use the controlled or\r\n * uncontrolled variations of the InnerBlocks component. This is the component\r\n * which should be used throughout the application.\r\n *\r\n * @param {Object} props The component props.\r\n */\r\nconst InnerBlocks = ( props ) => {\r\n\tconst { clientId } = useBlockEditContext();\r\n\r\n\tconst allProps = {\r\n\t\tclientId,\r\n\t\t...props,\r\n\t};\r\n\r\n\t// Detects if the InnerBlocks should be controlled by an incoming value.\r\n\treturn props.value && props.onChange ? (\r\n\t\t<ControlledInnerBlocks { ...allProps } />\r\n\t) : (\r\n\t\t<UncontrolledInnerBlocks { ...allProps } />\r\n\t);\r\n};\r\n\r\n// Expose default appender placeholders as components.\r\nInnerBlocks.DefaultBlockAppender = DefaultBlockAppender;\r\nInnerBlocks.ButtonBlockAppender = ButtonBlockAppender;\r\n\r\nuseInnerBlocksProps.save = getInnerBlocksProps;\r\n\r\nInnerBlocks.Content = () => useInnerBlocksProps.save().children;\r\n\r\n/**\r\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/inner-blocks/README.md\r\n */\r\nexport default InnerBlocks;\r\n"],"mappings":"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","ignoreList":[]}