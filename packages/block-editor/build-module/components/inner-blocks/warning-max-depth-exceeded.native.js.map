{"version":3,"names":["TouchableWithoutFeedback","View","__","sprintf","useState","useSelect","Warning","UnsupportedBlockDetails","store","blockEditorStore","MAX_NESTING_DEPTH","useUnsupportedBlockEditor","useConvertToGroupButtons","useConvertToGroupButtonProps","jsx","_jsx","jsxs","_jsxs","EMPTY_ARRAY","WarningMaxDepthExceeded","clientId","showDetails","setShowDetails","isSelected","select","isBlockSelected","convertToGroupButtonProps","isUngroupable","convertToGroupButtons","onUngroup","ungroup","onSelect","isUnsupportedBlockEditorSupported","canEnableUnsupportedBlockEditor","descriptionFormat","description","disabled","accessibilityLabel","accessibilityRole","accessibilityHint","onPress","children","message","showSheet","onCloseSheet","title","customActions","label"],"sources":["@wordpress/block-editor/src/components/inner-blocks/warning-max-depth-exceeded.native.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport { TouchableWithoutFeedback, View } from 'react-native';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { useState } from '@wordpress/element';\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport Warning from '../warning';\r\nimport UnsupportedBlockDetails from '../unsupported-block-details';\r\nimport { store as blockEditorStore } from '../../store';\r\nimport { MAX_NESTING_DEPTH } from './constants';\r\nimport useUnsupportedBlockEditor from '../use-unsupported-block-editor';\r\nimport {\r\n\tuseConvertToGroupButtons,\r\n\tuseConvertToGroupButtonProps,\r\n} from '../convert-to-group-buttons';\r\n\r\nconst EMPTY_ARRAY = [];\r\n\r\nconst WarningMaxDepthExceeded = ( { clientId } ) => {\r\n\tconst [ showDetails, setShowDetails ] = useState( false );\r\n\r\n\tconst isSelected = useSelect(\r\n\t\t( select ) => select( blockEditorStore ).isBlockSelected( clientId ),\r\n\t\t[ clientId ]\r\n\t);\r\n\r\n\t// We rely on the logic related to the Group/Ungroup buttons used in the block options to\r\n\t// determine whether to use the Ungroup action.\r\n\tconst convertToGroupButtonProps = useConvertToGroupButtonProps( [\r\n\t\tclientId,\r\n\t] );\r\n\tconst { isUngroupable } = convertToGroupButtonProps;\r\n\tconst convertToGroupButtons = useConvertToGroupButtons( {\r\n\t\t...convertToGroupButtonProps,\r\n\t} );\r\n\tconst onUngroup = convertToGroupButtons.ungroup.onSelect;\r\n\r\n\tconst {\r\n\t\tisUnsupportedBlockEditorSupported,\r\n\t\tcanEnableUnsupportedBlockEditor,\r\n\t} = useUnsupportedBlockEditor( clientId );\r\n\r\n\t/* translators: Warning related to having blocks deeply nested. %d: The deepest nesting level. */\r\n\tconst descriptionFormat = __(\r\n\t\t'Blocks nested deeper than %d levels may not render properly in the mobile editor.'\r\n\t);\r\n\tlet description = sprintf( descriptionFormat, MAX_NESTING_DEPTH );\r\n\tif (\r\n\t\t! isUnsupportedBlockEditorSupported &&\r\n\t\t! canEnableUnsupportedBlockEditor\r\n\t) {\r\n\t\t// When UBE can't be used, the description mentions using the web browser to edit the block.\r\n\t\tdescription +=\r\n\t\t\t' ' +\r\n\t\t\t/* translators: Recommendation included in a warning related to having blocks deeply nested. */\r\n\t\t\t__(\r\n\t\t\t\t'For this reason, we recommend editing the block using your web browser.'\r\n\t\t\t);\r\n\t}\r\n\t// Otherwise, the description mentions using the web editor (i.e. UBE).\r\n\telse {\r\n\t\tdescription +=\r\n\t\t\t' ' +\r\n\t\t\t/* translators: Recommendation included in a warning related to having blocks deeply nested. */\r\n\t\t\t__(\r\n\t\t\t\t'For this reason, we recommend editing the block using the web editor.'\r\n\t\t\t);\r\n\t}\r\n\t// If the block can be flattened, we also suggest to ungroup the block.\r\n\tif ( isUngroupable ) {\r\n\t\tdescription +=\r\n\t\t\t' ' +\r\n\t\t\t/* translators: Alternative option included in a warning related to having blocks deeply nested. */\r\n\t\t\t__(\r\n\t\t\t\t'Alternatively, you can flatten the content by ungrouping the block.'\r\n\t\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<TouchableWithoutFeedback\r\n\t\t\tdisabled={ ! isSelected }\r\n\t\t\taccessibilityLabel={ __( 'Warning message' ) }\r\n\t\t\taccessibilityRole=\"button\"\r\n\t\t\taccessibilityHint={ __( 'Tap here to show more details.' ) }\r\n\t\t\tonPress={ () => setShowDetails( true ) }\r\n\t\t>\r\n\t\t\t<View>\r\n\t\t\t\t<Warning\r\n\t\t\t\t\tmessage={ __(\r\n\t\t\t\t\t\t'Block cannot be rendered because it is deeply nested. Tap here for more details.'\r\n\t\t\t\t\t) }\r\n\t\t\t\t/>\r\n\t\t\t\t<UnsupportedBlockDetails\r\n\t\t\t\t\tclientId={ clientId }\r\n\t\t\t\t\tshowSheet={ showDetails }\r\n\t\t\t\t\tonCloseSheet={ () => setShowDetails( false ) }\r\n\t\t\t\t\ttitle={ __( 'Deeply nested block' ) }\r\n\t\t\t\t\tdescription={ description }\r\n\t\t\t\t\tcustomActions={\r\n\t\t\t\t\t\tisUngroupable\r\n\t\t\t\t\t\t\t? [\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tlabel: __( 'Ungroup block' ),\r\n\t\t\t\t\t\t\t\t\t\tonPress: onUngroup,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t  ]\r\n\t\t\t\t\t\t\t: EMPTY_ARRAY\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t</View>\r\n\t\t</TouchableWithoutFeedback>\r\n\t);\r\n};\r\n\r\nexport default WarningMaxDepthExceeded;\r\n"],"mappings":"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","ignoreList":[]}