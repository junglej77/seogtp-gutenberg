{"version":3,"names":["Draggable","createBlock","serialize","store","blocksStore","useDispatch","useSelect","BlockDraggableChip","INSERTER_PATTERN_TYPES","blockEditorStore","unlock","jsx","_jsx","InserterDraggableBlocks","isEnabled","blocks","icon","children","pattern","transferData","type","blockTypeIcon","select","getBlockType","length","name","startDragging","stopDragging","draggable","onDragStart","undefined","onDragEnd","__experimentalTransferDataType","event","parsedBlocks","user","syncStatus","ref","id","dataTransfer","setData","__experimentalDragComponent","count","isPattern","onDraggableStart","onDraggableEnd"],"sources":["@wordpress/block-editor/src/components/inserter-draggable-blocks/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { Draggable } from '@wordpress/components';\r\nimport {\r\n\tcreateBlock,\r\n\tserialize,\r\n\tstore as blocksStore,\r\n} from '@wordpress/blocks';\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockDraggableChip from '../block-draggable/draggable-chip';\r\nimport { INSERTER_PATTERN_TYPES } from '../inserter/block-patterns-tab/utils';\r\nimport { store as blockEditorStore } from '../../store';\r\nimport { unlock } from '../../lock-unlock';\r\n\r\nconst InserterDraggableBlocks = ( {\r\n\tisEnabled,\r\n\tblocks,\r\n\ticon,\r\n\tchildren,\r\n\tpattern,\r\n} ) => {\r\n\tconst transferData = {\r\n\t\ttype: 'inserter',\r\n\t\tblocks,\r\n\t};\r\n\r\n\tconst blockTypeIcon = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst { getBlockType } = select( blocksStore );\r\n\t\t\treturn (\r\n\t\t\t\tblocks.length === 1 && getBlockType( blocks[ 0 ].name )?.icon\r\n\t\t\t);\r\n\t\t},\r\n\t\t[ blocks ]\r\n\t);\r\n\r\n\tconst { startDragging, stopDragging } = unlock(\r\n\t\tuseDispatch( blockEditorStore )\r\n\t);\r\n\r\n\tif ( ! isEnabled ) {\r\n\t\treturn children( {\r\n\t\t\tdraggable: false,\r\n\t\t\tonDragStart: undefined,\r\n\t\t\tonDragEnd: undefined,\r\n\t\t} );\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Draggable\r\n\t\t\t__experimentalTransferDataType=\"wp-blocks\"\r\n\t\t\ttransferData={ transferData }\r\n\t\t\tonDragStart={ ( event ) => {\r\n\t\t\t\tstartDragging();\r\n\t\t\t\tconst parsedBlocks =\r\n\t\t\t\t\tpattern?.type === INSERTER_PATTERN_TYPES.user &&\r\n\t\t\t\t\tpattern?.syncStatus !== 'unsynced'\r\n\t\t\t\t\t\t? [ createBlock( 'core/block', { ref: pattern.id } ) ]\r\n\t\t\t\t\t\t: blocks;\r\n\t\t\t\tevent.dataTransfer.setData(\r\n\t\t\t\t\t'text/html',\r\n\t\t\t\t\tserialize( parsedBlocks )\r\n\t\t\t\t);\r\n\t\t\t} }\r\n\t\t\tonDragEnd={ () => {\r\n\t\t\t\tstopDragging();\r\n\t\t\t} }\r\n\t\t\t__experimentalDragComponent={\r\n\t\t\t\t<BlockDraggableChip\r\n\t\t\t\t\tcount={ blocks.length }\r\n\t\t\t\t\ticon={ icon || ( ! pattern && blockTypeIcon ) }\r\n\t\t\t\t\tisPattern={ !! pattern }\r\n\t\t\t\t/>\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t{ ( { onDraggableStart, onDraggableEnd } ) => {\r\n\t\t\t\treturn children( {\r\n\t\t\t\t\tdraggable: true,\r\n\t\t\t\t\tonDragStart: onDraggableStart,\r\n\t\t\t\t\tonDragEnd: onDraggableEnd,\r\n\t\t\t\t} );\r\n\t\t\t} }\r\n\t\t</Draggable>\r\n\t);\r\n};\r\n\r\nexport default InserterDraggableBlocks;\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,SAAS,QAAQ,uBAAuB;AACjD,SACCC,WAAW,EACXC,SAAS,EACTC,KAAK,IAAIC,WAAW,QACd,mBAAmB;AAC1B,SAASC,WAAW,EAAEC,SAAS,QAAQ,iBAAiB;;AAExD;AACA;AACA;AACA,OAAOC,kBAAkB,MAAM,mCAAmC;AAClE,SAASC,sBAAsB,QAAQ,sCAAsC;AAC7E,SAASL,KAAK,IAAIM,gBAAgB,QAAQ,aAAa;AACvD,SAASC,MAAM,QAAQ,mBAAmB;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAE3C,MAAMC,uBAAuB,GAAGA,CAAE;EACjCC,SAAS;EACTC,MAAM;EACNC,IAAI;EACJC,QAAQ;EACRC;AACD,CAAC,KAAM;EACN,MAAMC,YAAY,GAAG;IACpBC,IAAI,EAAE,UAAU;IAChBL;EACD,CAAC;EAED,MAAMM,aAAa,GAAGf,SAAS,CAC5BgB,MAAM,IAAM;IACb,MAAM;MAAEC;IAAa,CAAC,GAAGD,MAAM,CAAElB,WAAY,CAAC;IAC9C,OACCW,MAAM,CAACS,MAAM,KAAK,CAAC,IAAID,YAAY,CAAER,MAAM,CAAE,CAAC,CAAE,CAACU,IAAK,CAAC,EAAET,IAAI;EAE/D,CAAC,EACD,CAAED,MAAM,CACT,CAAC;EAED,MAAM;IAAEW,aAAa;IAAEC;EAAa,CAAC,GAAGjB,MAAM,CAC7CL,WAAW,CAAEI,gBAAiB,CAC/B,CAAC;EAED,IAAK,CAAEK,SAAS,EAAG;IAClB,OAAOG,QAAQ,CAAE;MAChBW,SAAS,EAAE,KAAK;MAChBC,WAAW,EAAEC,SAAS;MACtBC,SAAS,EAAED;IACZ,CAAE,CAAC;EACJ;EAEA,oBACClB,IAAA,CAACZ,SAAS;IACTgC,8BAA8B,EAAC,WAAW;IAC1Cb,YAAY,EAAGA,YAAc;IAC7BU,WAAW,EAAKI,KAAK,IAAM;MAC1BP,aAAa,CAAC,CAAC;MACf,MAAMQ,YAAY,GACjBhB,OAAO,EAAEE,IAAI,KAAKZ,sBAAsB,CAAC2B,IAAI,IAC7CjB,OAAO,EAAEkB,UAAU,KAAK,UAAU,GAC/B,CAAEnC,WAAW,CAAE,YAAY,EAAE;QAAEoC,GAAG,EAAEnB,OAAO,CAACoB;MAAG,CAAE,CAAC,CAAE,GACpDvB,MAAM;MACVkB,KAAK,CAACM,YAAY,CAACC,OAAO,CACzB,WAAW,EACXtC,SAAS,CAAEgC,YAAa,CACzB,CAAC;IACF,CAAG;IACHH,SAAS,EAAGA,CAAA,KAAM;MACjBJ,YAAY,CAAC,CAAC;IACf,CAAG;IACHc,2BAA2B,eAC1B7B,IAAA,CAACL,kBAAkB;MAClBmC,KAAK,EAAG3B,MAAM,CAACS,MAAQ;MACvBR,IAAI,EAAGA,IAAI,IAAM,CAAEE,OAAO,IAAIG,aAAiB;MAC/CsB,SAAS,EAAG,CAAC,CAAEzB;IAAS,CACxB,CACD;IAAAD,QAAA,EAECA,CAAE;MAAE2B,gBAAgB;MAAEC;IAAe,CAAC,KAAM;MAC7C,OAAO5B,QAAQ,CAAE;QAChBW,SAAS,EAAE,IAAI;QACfC,WAAW,EAAEe,gBAAgB;QAC7Bb,SAAS,EAAEc;MACZ,CAAE,CAAC;IACJ;EAAC,CACS,CAAC;AAEd,CAAC;AAED,eAAehC,uBAAuB","ignoreList":[]}