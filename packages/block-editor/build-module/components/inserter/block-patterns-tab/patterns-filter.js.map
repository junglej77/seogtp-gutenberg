{"version":3,"names":["SVG","Path","DropdownMenu","MenuGroup","MenuItemsChoice","ExternalLink","__","_x","Icon","useMemo","createInterpolateElement","myPatternsCategory","INSERTER_SYNC_TYPES","INSERTER_PATTERN_TYPES","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","getShouldDisableSyncFilter","sourceFilter","getShouldHideSourcesFilter","category","name","PATTERN_SOURCE_MENU_OPTIONS","value","label","directory","theme","user","PatternsFilter","setPatternSyncFilter","setPatternSourceFilter","patternSyncFilter","patternSourceFilter","scrollContainerRef","currentPatternSourceFilter","shouldDisableSyncFilter","shouldHideSourcesFilter","patternSyncMenuOptions","full","disabled","unsynced","handleSetSourceFilterChange","newSourceFilter","children","popoverProps","placement","toggleProps","size","icon","width","height","viewBox","fill","xmlns","d","choices","onSelect","current","scrollTo","className","Link","href"],"sources":["@wordpress/block-editor/src/components/inserter/block-patterns-tab/patterns-filter.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tSVG,\r\n\tPath,\r\n\tDropdownMenu,\r\n\tMenuGroup,\r\n\tMenuItemsChoice,\r\n\tExternalLink,\r\n} from '@wordpress/components';\r\nimport { __, _x } from '@wordpress/i18n';\r\nimport { Icon } from '@wordpress/icons';\r\nimport { useMemo, createInterpolateElement } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport {\r\n\tmyPatternsCategory,\r\n\tINSERTER_SYNC_TYPES,\r\n\tINSERTER_PATTERN_TYPES,\r\n} from './utils';\r\n\r\nconst getShouldDisableSyncFilter = ( sourceFilter ) =>\r\n\tsourceFilter !== 'all' && sourceFilter !== 'user';\r\nconst getShouldHideSourcesFilter = ( category ) => {\r\n\treturn category.name === myPatternsCategory.name;\r\n};\r\n\r\nconst PATTERN_SOURCE_MENU_OPTIONS = [\r\n\t{\r\n\t\tvalue: 'all',\r\n\t\tlabel: _x( 'All', 'patterns' ),\r\n\t},\r\n\t{\r\n\t\tvalue: INSERTER_PATTERN_TYPES.directory,\r\n\t\tlabel: __( 'Pattern Directory' ),\r\n\t},\r\n\t{\r\n\t\tvalue: INSERTER_PATTERN_TYPES.theme,\r\n\t\tlabel: __( 'Theme & Plugins' ),\r\n\t},\r\n\t{\r\n\t\tvalue: INSERTER_PATTERN_TYPES.user,\r\n\t\tlabel: __( 'User' ),\r\n\t},\r\n];\r\n\r\nexport function PatternsFilter( {\r\n\tsetPatternSyncFilter,\r\n\tsetPatternSourceFilter,\r\n\tpatternSyncFilter,\r\n\tpatternSourceFilter,\r\n\tscrollContainerRef,\r\n\tcategory,\r\n} ) {\r\n\t// If the category is `myPatterns` then we need to set the source filter to `user`, but\r\n\t// we do this by deriving from props rather than calling setPatternSourceFilter otherwise\r\n\t// the user may be confused when switching to another category if the haven't explicity set\r\n\t// this filter themselves.\r\n\tconst currentPatternSourceFilter =\r\n\t\tcategory.name === myPatternsCategory.name\r\n\t\t\t? INSERTER_PATTERN_TYPES.user\r\n\t\t\t: patternSourceFilter;\r\n\r\n\t// We need to disable the sync filter option if the source filter is not 'all' or 'user'\r\n\t// otherwise applying them will just result in no patterns being shown.\r\n\tconst shouldDisableSyncFilter = getShouldDisableSyncFilter(\r\n\t\tcurrentPatternSourceFilter\r\n\t);\r\n\r\n\t// We also hide the directory and theme source filter if the category is `myPatterns`\r\n\t// otherwise there will only be one option available.\r\n\tconst shouldHideSourcesFilter = getShouldHideSourcesFilter( category );\r\n\r\n\tconst patternSyncMenuOptions = useMemo(\r\n\t\t() => [\r\n\t\t\t{\r\n\t\t\t\tvalue: 'all',\r\n\t\t\t\tlabel: _x( 'All', 'patterns' ),\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tvalue: INSERTER_SYNC_TYPES.full,\r\n\t\t\t\tlabel: _x( 'Synced', 'patterns' ),\r\n\t\t\t\tdisabled: shouldDisableSyncFilter,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tvalue: INSERTER_SYNC_TYPES.unsynced,\r\n\t\t\t\tlabel: _x( 'Not synced', 'patterns' ),\r\n\t\t\t\tdisabled: shouldDisableSyncFilter,\r\n\t\t\t},\r\n\t\t],\r\n\t\t[ shouldDisableSyncFilter ]\r\n\t);\r\n\r\n\tfunction handleSetSourceFilterChange( newSourceFilter ) {\r\n\t\tsetPatternSourceFilter( newSourceFilter );\r\n\t\tif ( getShouldDisableSyncFilter( newSourceFilter ) ) {\r\n\t\t\tsetPatternSyncFilter( 'all' );\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<DropdownMenu\r\n\t\t\t\tpopoverProps={ {\r\n\t\t\t\t\tplacement: 'right-end',\r\n\t\t\t\t} }\r\n\t\t\t\tlabel={ __( 'Filter patterns' ) }\r\n\t\t\t\ttoggleProps={ { size: 'compact' } }\r\n\t\t\t\ticon={\r\n\t\t\t\t\t<Icon\r\n\t\t\t\t\t\ticon={\r\n\t\t\t\t\t\t\t<SVG\r\n\t\t\t\t\t\t\t\twidth=\"24\"\r\n\t\t\t\t\t\t\t\theight=\"24\"\r\n\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Path\r\n\t\t\t\t\t\t\t\t\td=\"M10 17.5H14V16H10V17.5ZM6 6V7.5H18V6H6ZM8 12.5H16V11H8V12.5Z\"\r\n\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</SVG>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t{ () => (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t{ ! shouldHideSourcesFilter && (\r\n\t\t\t\t\t\t\t<MenuGroup label={ __( 'Source' ) }>\r\n\t\t\t\t\t\t\t\t<MenuItemsChoice\r\n\t\t\t\t\t\t\t\t\tchoices={ PATTERN_SOURCE_MENU_OPTIONS }\r\n\t\t\t\t\t\t\t\t\tonSelect={ ( value ) => {\r\n\t\t\t\t\t\t\t\t\t\thandleSetSourceFilterChange( value );\r\n\t\t\t\t\t\t\t\t\t\tscrollContainerRef.current?.scrollTo(\r\n\t\t\t\t\t\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t\t\t\t\t\t0\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t\t\tvalue={ currentPatternSourceFilter }\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</MenuGroup>\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t<MenuGroup label={ __( 'Type' ) }>\r\n\t\t\t\t\t\t\t<MenuItemsChoice\r\n\t\t\t\t\t\t\t\tchoices={ patternSyncMenuOptions }\r\n\t\t\t\t\t\t\t\tonSelect={ ( value ) => {\r\n\t\t\t\t\t\t\t\t\tsetPatternSyncFilter( value );\r\n\t\t\t\t\t\t\t\t\tscrollContainerRef.current?.scrollTo(\r\n\t\t\t\t\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t\t\t\t\t0\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t\tvalue={ patternSyncFilter }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</MenuGroup>\r\n\t\t\t\t\t\t<div className=\"block-editor-tool-selector__help\">\r\n\t\t\t\t\t\t\t{ createInterpolateElement(\r\n\t\t\t\t\t\t\t\t__(\r\n\t\t\t\t\t\t\t\t\t'Patterns are available from the <Link>WordPress.org Pattern Directory</Link>, bundled in the active theme, or created by users on this site. Only patterns created on this site can be synced.'\r\n\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tLink: (\r\n\t\t\t\t\t\t\t\t\t\t<ExternalLink\r\n\t\t\t\t\t\t\t\t\t\t\thref={ __(\r\n\t\t\t\t\t\t\t\t\t\t\t\t'https://wordpress.org/patterns/'\r\n\t\t\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</>\r\n\t\t\t\t) }\r\n\t\t\t</DropdownMenu>\r\n\t\t</>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}