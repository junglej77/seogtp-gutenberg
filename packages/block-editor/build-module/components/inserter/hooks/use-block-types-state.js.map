{"version":3,"names":["createBlock","createBlocksFromInnerBlocksTemplate","store","blocksStore","parse","useSelect","useCallback","useMemo","blockEditorStore","withRootClientIdOptionKey","useBlockTypesState","rootClientId","onInsert","isQuick","options","items","select","getInserterItems","categories","collections","getCategories","getCollections","onSelectItem","name","initialAttributes","innerBlocks","syncStatus","content","_rootClientId","shouldFocusBlock","insertedBlock","__unstableSkipMigrationLogs","undefined"],"sources":["@wordpress/block-editor/src/components/inserter/hooks/use-block-types-state.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tcreateBlock,\r\n\tcreateBlocksFromInnerBlocksTemplate,\r\n\tstore as blocksStore,\r\n\tparse,\r\n} from '@wordpress/blocks';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { useCallback, useMemo } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../../store';\r\nimport { withRootClientIdOptionKey } from '../../../store/utils';\r\n\r\n/**\r\n * Retrieves the block types inserter state.\r\n *\r\n * @param {string=}  rootClientId Insertion's root client ID.\r\n * @param {Function} onInsert     function called when inserter a list of blocks.\r\n * @param {boolean}  isQuick\r\n * @return {Array} Returns the block types state. (block types, categories, collections, onSelect handler)\r\n */\r\nconst useBlockTypesState = ( rootClientId, onInsert, isQuick ) => {\r\n\tconst options = useMemo(\r\n\t\t() => ( { [ withRootClientIdOptionKey ]: ! isQuick } ),\r\n\t\t[ isQuick ]\r\n\t);\r\n\tconst [ items ] = useSelect(\r\n\t\t( select ) => [\r\n\t\t\tselect( blockEditorStore ).getInserterItems(\r\n\t\t\t\trootClientId,\r\n\t\t\t\toptions\r\n\t\t\t),\r\n\t\t],\r\n\t\t[ rootClientId, options ]\r\n\t);\r\n\r\n\tconst [ categories, collections ] = useSelect( ( select ) => {\r\n\t\tconst { getCategories, getCollections } = select( blocksStore );\r\n\t\treturn [ getCategories(), getCollections() ];\r\n\t}, [] );\r\n\r\n\tconst onSelectItem = useCallback(\r\n\t\t(\r\n\t\t\t{\r\n\t\t\t\tname,\r\n\t\t\t\tinitialAttributes,\r\n\t\t\t\tinnerBlocks,\r\n\t\t\t\tsyncStatus,\r\n\t\t\t\tcontent,\r\n\t\t\t\trootClientId: _rootClientId,\r\n\t\t\t},\r\n\t\t\tshouldFocusBlock\r\n\t\t) => {\r\n\t\t\tconst insertedBlock =\r\n\t\t\t\tsyncStatus === 'unsynced'\r\n\t\t\t\t\t? parse( content, {\r\n\t\t\t\t\t\t\t__unstableSkipMigrationLogs: true,\r\n\t\t\t\t\t  } )\r\n\t\t\t\t\t: createBlock(\r\n\t\t\t\t\t\t\tname,\r\n\t\t\t\t\t\t\tinitialAttributes,\r\n\t\t\t\t\t\t\tcreateBlocksFromInnerBlocksTemplate( innerBlocks )\r\n\t\t\t\t\t  );\r\n\r\n\t\t\tonInsert(\r\n\t\t\t\tinsertedBlock,\r\n\t\t\t\tundefined,\r\n\t\t\t\tshouldFocusBlock,\r\n\t\t\t\t_rootClientId\r\n\t\t\t);\r\n\t\t},\r\n\t\t[ onInsert ]\r\n\t);\r\n\r\n\treturn [ items, categories, collections, onSelectItem ];\r\n};\r\n\r\nexport default useBlockTypesState;\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SACCA,WAAW,EACXC,mCAAmC,EACnCC,KAAK,IAAIC,WAAW,EACpBC,KAAK,QACC,mBAAmB;AAC1B,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,WAAW,EAAEC,OAAO,QAAQ,oBAAoB;;AAEzD;AACA;AACA;AACA,SAASL,KAAK,IAAIM,gBAAgB,QAAQ,gBAAgB;AAC1D,SAASC,yBAAyB,QAAQ,sBAAsB;;AAEhE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,kBAAkB,GAAGA,CAAEC,YAAY,EAAEC,QAAQ,EAAEC,OAAO,KAAM;EACjE,MAAMC,OAAO,GAAGP,OAAO,CACtB,OAAQ;IAAE,CAAEE,yBAAyB,GAAI,CAAEI;EAAQ,CAAC,CAAE,EACtD,CAAEA,OAAO,CACV,CAAC;EACD,MAAM,CAAEE,KAAK,CAAE,GAAGV,SAAS,CACxBW,MAAM,IAAM,CACbA,MAAM,CAAER,gBAAiB,CAAC,CAACS,gBAAgB,CAC1CN,YAAY,EACZG,OACD,CAAC,CACD,EACD,CAAEH,YAAY,EAAEG,OAAO,CACxB,CAAC;EAED,MAAM,CAAEI,UAAU,EAAEC,WAAW,CAAE,GAAGd,SAAS,CAAIW,MAAM,IAAM;IAC5D,MAAM;MAAEI,aAAa;MAAEC;IAAe,CAAC,GAAGL,MAAM,CAAEb,WAAY,CAAC;IAC/D,OAAO,CAAEiB,aAAa,CAAC,CAAC,EAAEC,cAAc,CAAC,CAAC,CAAE;EAC7C,CAAC,EAAE,EAAG,CAAC;EAEP,MAAMC,YAAY,GAAGhB,WAAW,CAC/B,CACC;IACCiB,IAAI;IACJC,iBAAiB;IACjBC,WAAW;IACXC,UAAU;IACVC,OAAO;IACPhB,YAAY,EAAEiB;EACf,CAAC,EACDC,gBAAgB,KACZ;IACJ,MAAMC,aAAa,GAClBJ,UAAU,KAAK,UAAU,GACtBtB,KAAK,CAAEuB,OAAO,EAAE;MAChBI,2BAA2B,EAAE;IAC7B,CAAE,CAAC,GACH/B,WAAW,CACXuB,IAAI,EACJC,iBAAiB,EACjBvB,mCAAmC,CAAEwB,WAAY,CACjD,CAAC;IAELb,QAAQ,CACPkB,aAAa,EACbE,SAAS,EACTH,gBAAgB,EAChBD,aACD,CAAC;EACF,CAAC,EACD,CAAEhB,QAAQ,CACX,CAAC;EAED,OAAO,CAAEG,KAAK,EAAEG,UAAU,EAAEC,WAAW,EAAEG,YAAY,CAAE;AACxD,CAAC;AAED,eAAeZ,kBAAkB","ignoreList":[]}