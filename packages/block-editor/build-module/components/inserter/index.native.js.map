{"version":3,"names":["AccessibilityInfo","Platform","__","_x","Dropdown","ToolbarButton","Picker","Component","withDispatch","withSelect","compose","withPreferredColorScheme","isUnmodifiedDefaultBlock","Icon","plus","plusCircle","plusCircleFilled","insertAfter","insertBefore","setBlockTypeImpressions","styles","InserterMenu","BlockInsertionPoint","store","blockEditorStore","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","VOICE_OVER_ANNOUNCEMENT_DELAY","defaultRenderToggle","onToggle","disabled","iconStyle","buttonStyle","onLongPress","title","icon","style","onClick","extraProps","hint","testID","hitSlop","top","bottom","left","right","isDisabled","customContainerStyles","fixedRatio","Inserter","announcementTimeout","constructor","arguments","bind","renderInserterToggle","renderContent","componentWillUnmount","clearTimeout","getInsertionOptions","addBeforeOption","value","label","replaceCurrentOption","addAfterOption","addToBeginningOption","addToEndOption","isAnyBlockSelected","isSelectedBlockReplaceable","props","getInsertionIndex","insertionType","insertionIndexDefault","insertionIndexStart","insertionIndexBefore","insertionIndexAfter","insertionIndexEnd","shouldReplaceBlock","isOpen","blockTypeImpressions","updateSettings","impressionsRemain","Object","values","some","count","decrementedImpressions","entries","reduce","acc","blockName","Math","max","impressions","onInserterToggledAnnouncement","isScreenReaderEnabled","then","isEnabled","isIOS","OS","announcement","setTimeout","announceForAccessibility","renderToggle","getStylesFromColorScheme","showSeparator","onPress","setState","destinationRootClientId","insertionIndex","picker","presentPicker","onPickerSelect","children","ref","instance","options","onChange","hideCancelButton","onClose","clientId","isAppender","state","onSelect","onDismiss","rootClientId","render","headerTitle","dispatch","select","getBlockRootClientId","getBlockSelectionEnd","getBlockOrder","getBlockIndex","getBlock","getSettings","getBlockEditorSettings","end","selectedBlockIndex","endOfRootIndex","length","isSelectedUnmodifiedDefaultBlock","undefined","getDefaultInsertionIndex","__experimentalShouldInsertAtTheTop","shouldInsertAtTheTop"],"sources":["@wordpress/block-editor/src/components/inserter/index.native.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport { AccessibilityInfo, Platform } from 'react-native';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { __, _x } from '@wordpress/i18n';\r\nimport { Dropdown, ToolbarButton, Picker } from '@wordpress/components';\r\nimport { Component } from '@wordpress/element';\r\nimport { withDispatch, withSelect } from '@wordpress/data';\r\nimport { compose, withPreferredColorScheme } from '@wordpress/compose';\r\nimport { isUnmodifiedDefaultBlock } from '@wordpress/blocks';\r\nimport {\r\n\tIcon,\r\n\tplus,\r\n\tplusCircle,\r\n\tplusCircleFilled,\r\n\tinsertAfter,\r\n\tinsertBefore,\r\n} from '@wordpress/icons';\r\nimport { setBlockTypeImpressions } from '@wordpress/react-native-bridge';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport styles from './style.scss';\r\nimport InserterMenu from './menu';\r\nimport BlockInsertionPoint from '../block-list/insertion-point';\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nconst VOICE_OVER_ANNOUNCEMENT_DELAY = 1000;\r\n\r\nconst defaultRenderToggle = ( {\r\n\tonToggle,\r\n\tdisabled,\r\n\ticonStyle,\r\n\tbuttonStyle,\r\n\tonLongPress,\r\n} ) => {\r\n\treturn (\r\n\t\t<ToolbarButton\r\n\t\t\ttitle={ _x(\r\n\t\t\t\t'Add block',\r\n\t\t\t\t'Generic label for block inserter button'\r\n\t\t\t) }\r\n\t\t\ticon={ <Icon icon={ plus } style={ iconStyle } /> }\r\n\t\t\tonClick={ onToggle }\r\n\t\t\textraProps={ {\r\n\t\t\t\thint: __( 'Double tap to add a block' ),\r\n\t\t\t\t// testID is present to disambiguate this element for native UI tests. It's not\r\n\t\t\t\t// usually required for components. See: https://github.com/WordPress/gutenberg/pull/18832#issuecomment-561411389.\r\n\t\t\t\ttestID: 'add-block-button',\r\n\t\t\t\tonLongPress,\r\n\t\t\t\thitSlop: { top: 10, bottom: 10, left: 10, right: 10 },\r\n\t\t\t} }\r\n\t\t\tisDisabled={ disabled }\r\n\t\t\tcustomContainerStyles={ buttonStyle }\r\n\t\t\tfixedRatio={ false }\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport class Inserter extends Component {\r\n\tannouncementTimeout;\r\n\r\n\tconstructor() {\r\n\t\tsuper( ...arguments );\r\n\r\n\t\tthis.onToggle = this.onToggle.bind( this );\r\n\t\tthis.renderInserterToggle = this.renderInserterToggle.bind( this );\r\n\t\tthis.renderContent = this.renderContent.bind( this );\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tclearTimeout( this.announcementTimeout );\r\n\t}\r\n\r\n\tgetInsertionOptions() {\r\n\t\tconst addBeforeOption = {\r\n\t\t\tvalue: 'before',\r\n\t\t\tlabel: __( 'Add Block Before' ),\r\n\t\t\ticon: plusCircle,\r\n\t\t};\r\n\r\n\t\tconst replaceCurrentOption = {\r\n\t\t\tvalue: 'replace',\r\n\t\t\tlabel: __( 'Replace Current Block' ),\r\n\t\t\ticon: plusCircleFilled,\r\n\t\t};\r\n\r\n\t\tconst addAfterOption = {\r\n\t\t\tvalue: 'after',\r\n\t\t\tlabel: __( 'Add Block After' ),\r\n\t\t\ticon: plusCircle,\r\n\t\t};\r\n\r\n\t\tconst addToBeginningOption = {\r\n\t\t\tvalue: 'start',\r\n\t\t\tlabel: __( 'Add To Beginning' ),\r\n\t\t\ticon: insertBefore,\r\n\t\t};\r\n\r\n\t\tconst addToEndOption = {\r\n\t\t\tvalue: 'end',\r\n\t\t\tlabel: __( 'Add To End' ),\r\n\t\t\ticon: insertAfter,\r\n\t\t};\r\n\r\n\t\tconst { isAnyBlockSelected, isSelectedBlockReplaceable } = this.props;\r\n\t\tif ( isAnyBlockSelected ) {\r\n\t\t\tif ( isSelectedBlockReplaceable ) {\r\n\t\t\t\treturn [\r\n\t\t\t\t\taddToBeginningOption,\r\n\t\t\t\t\taddBeforeOption,\r\n\t\t\t\t\treplaceCurrentOption,\r\n\t\t\t\t\taddAfterOption,\r\n\t\t\t\t\taddToEndOption,\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t\treturn [\r\n\t\t\t\taddToBeginningOption,\r\n\t\t\t\taddBeforeOption,\r\n\t\t\t\taddAfterOption,\r\n\t\t\t\taddToEndOption,\r\n\t\t\t];\r\n\t\t}\r\n\t\treturn [ addToBeginningOption, addToEndOption ];\r\n\t}\r\n\r\n\tgetInsertionIndex( insertionType ) {\r\n\t\tconst {\r\n\t\t\tinsertionIndexDefault,\r\n\t\t\tinsertionIndexStart,\r\n\t\t\tinsertionIndexBefore,\r\n\t\t\tinsertionIndexAfter,\r\n\t\t\tinsertionIndexEnd,\r\n\t\t} = this.props;\r\n\t\tif ( insertionType === 'start' ) {\r\n\t\t\treturn insertionIndexStart;\r\n\t\t}\r\n\t\tif ( insertionType === 'before' || insertionType === 'replace' ) {\r\n\t\t\treturn insertionIndexBefore;\r\n\t\t}\r\n\t\tif ( insertionType === 'after' ) {\r\n\t\t\treturn insertionIndexAfter;\r\n\t\t}\r\n\t\tif ( insertionType === 'end' ) {\r\n\t\t\treturn insertionIndexEnd;\r\n\t\t}\r\n\t\treturn insertionIndexDefault;\r\n\t}\r\n\r\n\tshouldReplaceBlock( insertionType ) {\r\n\t\tconst { isSelectedBlockReplaceable } = this.props;\r\n\t\tif ( insertionType === 'replace' ) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif ( insertionType === 'default' && isSelectedBlockReplaceable ) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tonToggle( isOpen ) {\r\n\t\tconst { blockTypeImpressions, onToggle, updateSettings } = this.props;\r\n\r\n\t\tif ( ! isOpen ) {\r\n\t\t\tconst impressionsRemain = Object.values(\r\n\t\t\t\tblockTypeImpressions\r\n\t\t\t).some( ( count ) => count > 0 );\r\n\r\n\t\t\tif ( impressionsRemain ) {\r\n\t\t\t\tconst decrementedImpressions = Object.entries(\r\n\t\t\t\t\tblockTypeImpressions\r\n\t\t\t\t).reduce(\r\n\t\t\t\t\t( acc, [ blockName, count ] ) => ( {\r\n\t\t\t\t\t\t...acc,\r\n\t\t\t\t\t\t[ blockName ]: Math.max( count - 1, 0 ),\r\n\t\t\t\t\t} ),\r\n\t\t\t\t\t{}\r\n\t\t\t\t);\r\n\r\n\t\t\t\t// Persist block type impression to JavaScript store.\r\n\t\t\t\tupdateSettings( {\r\n\t\t\t\t\timpressions: decrementedImpressions,\r\n\t\t\t\t} );\r\n\r\n\t\t\t\t// Persist block type impression count to native app store.\r\n\t\t\t\tsetBlockTypeImpressions( decrementedImpressions );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Surface toggle callback to parent component.\r\n\t\tif ( onToggle ) {\r\n\t\t\tonToggle( isOpen );\r\n\t\t}\r\n\t\tthis.onInserterToggledAnnouncement( isOpen );\r\n\t}\r\n\r\n\tonInserterToggledAnnouncement( isOpen ) {\r\n\t\tAccessibilityInfo.isScreenReaderEnabled().then( ( isEnabled ) => {\r\n\t\t\tif ( isEnabled ) {\r\n\t\t\t\tconst isIOS = Platform.OS === 'ios';\r\n\t\t\t\tconst announcement = isOpen\r\n\t\t\t\t\t? __( 'Scrollable block menu opened. Select a block.' )\r\n\t\t\t\t\t: __( 'Scrollable block menu closed.' );\r\n\t\t\t\tthis.announcementTimeout = setTimeout(\r\n\t\t\t\t\t() =>\r\n\t\t\t\t\t\tAccessibilityInfo.announceForAccessibility(\r\n\t\t\t\t\t\t\tannouncement\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\tisIOS ? VOICE_OVER_ANNOUNCEMENT_DELAY : 0\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t} );\r\n\t}\r\n\r\n\t/**\r\n\t * Render callback to display Dropdown toggle element.\r\n\t *\r\n\t * @param {Object}   options\r\n\t * @param {Function} options.onToggle Callback to invoke when toggle is\r\n\t *                                    pressed.\r\n\t * @param {boolean}  options.isOpen   Whether dropdown is currently open.\r\n\t *\r\n\t * @return {Element} Dropdown toggle element.\r\n\t */\r\n\trenderInserterToggle( { onToggle, isOpen } ) {\r\n\t\tconst {\r\n\t\t\tdisabled,\r\n\t\t\trenderToggle = defaultRenderToggle,\r\n\t\t\tgetStylesFromColorScheme,\r\n\t\t\tshowSeparator,\r\n\t\t} = this.props;\r\n\t\tif ( showSeparator && isOpen ) {\r\n\t\t\treturn <BlockInsertionPoint />;\r\n\t\t}\r\n\r\n\t\tconst buttonStyle = getStylesFromColorScheme(\r\n\t\t\tstyles[ 'inserter-menu__add-block-button' ],\r\n\t\t\tstyles[ 'inserter-menu__add-block-button--dark' ]\r\n\t\t);\r\n\r\n\t\tconst iconStyle = getStylesFromColorScheme(\r\n\t\t\tstyles[ 'inserter-menu__add-block-button-icon' ],\r\n\t\t\tstyles[ 'inserter-menu__add-block-button-icon--dark' ]\r\n\t\t);\r\n\r\n\t\tconst onPress = () => {\r\n\t\t\tthis.setState(\r\n\t\t\t\t{\r\n\t\t\t\t\tdestinationRootClientId: this.props.destinationRootClientId,\r\n\t\t\t\t\tshouldReplaceBlock: this.shouldReplaceBlock( 'default' ),\r\n\t\t\t\t\tinsertionIndex: this.getInsertionIndex( 'default' ),\r\n\t\t\t\t},\r\n\t\t\t\tonToggle\r\n\t\t\t);\r\n\t\t};\r\n\r\n\t\tconst onLongPress = () => {\r\n\t\t\tif ( this.picker ) {\r\n\t\t\t\tthis.picker.presentPicker();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tconst onPickerSelect = ( insertionType ) => {\r\n\t\t\tthis.setState(\r\n\t\t\t\t{\r\n\t\t\t\t\tdestinationRootClientId: this.props.destinationRootClientId,\r\n\t\t\t\t\tshouldReplaceBlock:\r\n\t\t\t\t\t\tthis.shouldReplaceBlock( insertionType ),\r\n\t\t\t\t\tinsertionIndex: this.getInsertionIndex( insertionType ),\r\n\t\t\t\t},\r\n\t\t\t\tonToggle\r\n\t\t\t);\r\n\t\t};\r\n\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{ renderToggle( {\r\n\t\t\t\t\tonToggle: onPress,\r\n\t\t\t\t\tisOpen,\r\n\t\t\t\t\tdisabled,\r\n\t\t\t\t\ticonStyle,\r\n\t\t\t\t\tbuttonStyle,\r\n\t\t\t\t\tonLongPress,\r\n\t\t\t\t} ) }\r\n\t\t\t\t<Picker\r\n\t\t\t\t\tref={ ( instance ) => ( this.picker = instance ) }\r\n\t\t\t\t\toptions={ this.getInsertionOptions() }\r\n\t\t\t\t\tonChange={ onPickerSelect }\r\n\t\t\t\t\thideCancelButton\r\n\t\t\t\t/>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * Render callback to display Dropdown content element.\r\n\t *\r\n\t * @param {Object}   options\r\n\t * @param {Function} options.onClose Callback to invoke when dropdown is\r\n\t *                                   closed.\r\n\t * @param {boolean}  options.isOpen  Whether dropdown is currently open.\r\n\t *\r\n\t * @return {Element} Dropdown content element.\r\n\t */\r\n\trenderContent( { onClose, isOpen } ) {\r\n\t\tconst { clientId, isAppender } = this.props;\r\n\t\tconst { destinationRootClientId, shouldReplaceBlock, insertionIndex } =\r\n\t\t\tthis.state;\r\n\t\treturn (\r\n\t\t\t<InserterMenu\r\n\t\t\t\tisOpen={ isOpen }\r\n\t\t\t\tonSelect={ onClose }\r\n\t\t\t\tonDismiss={ onClose }\r\n\t\t\t\trootClientId={ destinationRootClientId }\r\n\t\t\t\tclientId={ clientId }\r\n\t\t\t\tisAppender={ isAppender }\r\n\t\t\t\tshouldReplaceBlock={ shouldReplaceBlock }\r\n\t\t\t\tinsertionIndex={ insertionIndex }\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Dropdown\r\n\t\t\t\tonToggle={ this.onToggle }\r\n\t\t\t\theaderTitle={ __( 'Add a block' ) }\r\n\t\t\t\trenderToggle={ this.renderInserterToggle }\r\n\t\t\t\trenderContent={ this.renderContent }\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default compose( [\r\n\twithDispatch( ( dispatch ) => {\r\n\t\tconst { updateSettings } = dispatch( blockEditorStore );\r\n\t\treturn { updateSettings };\r\n\t} ),\r\n\twithSelect( ( select, { clientId, isAppender, rootClientId } ) => {\r\n\t\tconst {\r\n\t\t\tgetBlockRootClientId,\r\n\t\t\tgetBlockSelectionEnd,\r\n\t\t\tgetBlockOrder,\r\n\t\t\tgetBlockIndex,\r\n\t\t\tgetBlock,\r\n\t\t\tgetSettings: getBlockEditorSettings,\r\n\t\t} = select( blockEditorStore );\r\n\r\n\t\tconst end = getBlockSelectionEnd();\r\n\t\t// `end` argument (id) can refer to the component which is removed\r\n\t\t// due to pressing `undo` button, that's why we need to check\r\n\t\t// if `getBlock( end) is valid, otherwise `null` is passed\r\n\t\tconst isAnyBlockSelected = ! isAppender && end && getBlock( end );\r\n\t\tconst destinationRootClientId = isAnyBlockSelected\r\n\t\t\t? getBlockRootClientId( end )\r\n\t\t\t: rootClientId;\r\n\t\tconst selectedBlockIndex = getBlockIndex( end );\r\n\t\tconst endOfRootIndex = getBlockOrder( rootClientId ).length;\r\n\t\tconst isSelectedUnmodifiedDefaultBlock = isAnyBlockSelected\r\n\t\t\t? isUnmodifiedDefaultBlock( getBlock( end ) )\r\n\t\t\t: undefined;\r\n\r\n\t\tfunction getDefaultInsertionIndex() {\r\n\t\t\tconst { __experimentalShouldInsertAtTheTop: shouldInsertAtTheTop } =\r\n\t\t\t\tgetBlockEditorSettings();\r\n\r\n\t\t\t// If post title is selected insert as first block.\r\n\t\t\tif ( shouldInsertAtTheTop ) {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\r\n\t\t\t// If the clientId is defined, we insert at the position of the block.\r\n\t\t\tif ( clientId ) {\r\n\t\t\t\treturn getBlockIndex( clientId );\r\n\t\t\t}\r\n\r\n\t\t\t// If there is a selected block,\r\n\t\t\tif ( isAnyBlockSelected ) {\r\n\t\t\t\t// And the last selected block is unmodified (empty), it will be replaced.\r\n\t\t\t\tif ( isSelectedUnmodifiedDefaultBlock ) {\r\n\t\t\t\t\treturn selectedBlockIndex;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// We insert after the selected block.\r\n\t\t\t\treturn selectedBlockIndex + 1;\r\n\t\t\t}\r\n\r\n\t\t\t// Otherwise, we insert at the end of the current rootClientId.\r\n\t\t\treturn endOfRootIndex;\r\n\t\t}\r\n\r\n\t\tconst insertionIndexStart = 0;\r\n\r\n\t\tconst insertionIndexBefore = isAnyBlockSelected\r\n\t\t\t? selectedBlockIndex\r\n\t\t\t: insertionIndexStart;\r\n\r\n\t\tconst insertionIndexAfter = isAnyBlockSelected\r\n\t\t\t? selectedBlockIndex + 1\r\n\t\t\t: endOfRootIndex;\r\n\r\n\t\tconst insertionIndexEnd = endOfRootIndex;\r\n\r\n\t\treturn {\r\n\t\t\tblockTypeImpressions: getBlockEditorSettings().impressions,\r\n\t\t\tdestinationRootClientId,\r\n\t\t\tinsertionIndexDefault: getDefaultInsertionIndex(),\r\n\t\t\tinsertionIndexBefore,\r\n\t\t\tinsertionIndexAfter,\r\n\t\t\tinsertionIndexStart,\r\n\t\t\tinsertionIndexEnd,\r\n\t\t\tisAnyBlockSelected: !! isAnyBlockSelected,\r\n\t\t\tisSelectedBlockReplaceable: isSelectedUnmodifiedDefaultBlock,\r\n\t\t};\r\n\t} ),\r\n\r\n\twithPreferredColorScheme,\r\n] )( Inserter );\r\n"],"mappings":"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","ignoreList":[]}