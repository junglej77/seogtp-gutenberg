{"version":3,"names":["clsx","Tooltip","DropdownMenu","MenuGroup","MenuItem","Spinner","Modal","Flex","FlexItem","Button","Composite","__experimentalVStack","VStack","__","sprintf","useMemo","useCallback","useState","cloneBlock","moreVertical","external","useSelect","useDispatch","store","noticesStore","isBlobURL","InserterDraggableBlocks","getBlockAndPreviewFromMedia","blockEditorStore","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ALLOWED_MEDIA_TYPES","MAXIMUM_TITLE_LENGTH","MEDIA_OPTIONS_POPOVER_PROPS","position","className","MediaPreviewOptions","category","media","getReportUrl","reportUrl","label","popoverProps","icon","children","onClick","window","open","focus","mediaType","InsertExternalImageModal","onClose","onSubmit","title","onRequestClose","spacing","justify","expanded","__next40pxDefaultSize","variant","MediaPreview","showExternalUploadModal","setShowExternalUploadModal","isHovered","setIsHovered","isInserting","setIsInserting","block","preview","createErrorNotice","createSuccessNotice","getSettings","onMediaInsert","previewBlock","settings","clonedBlock","id","url","caption","attributes","mediaUpload","fetch","then","response","blob","filesList","additionalData","onFileChange","img","type","allowedTypes","onError","message","catch","rendered","truncatedTitle","length","omission","slice","onMouseEnter","onMouseLeave","isEnabled","blocks","draggable","onDragStart","onDragEnd","text","Item","render","role"],"sources":["@wordpress/block-editor/src/components/inserter/media-tab/media-preview.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tTooltip,\r\n\tDropdownMenu,\r\n\tMenuGroup,\r\n\tMenuItem,\r\n\tSpinner,\r\n\tModal,\r\n\tFlex,\r\n\tFlexItem,\r\n\tButton,\r\n\tComposite,\r\n\t__experimentalVStack as VStack,\r\n} from '@wordpress/components';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { useMemo, useCallback, useState } from '@wordpress/element';\r\nimport { cloneBlock } from '@wordpress/blocks';\r\nimport { moreVertical, external } from '@wordpress/icons';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { store as noticesStore } from '@wordpress/notices';\r\nimport { isBlobURL } from '@wordpress/blob';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport InserterDraggableBlocks from '../../inserter-draggable-blocks';\r\nimport { getBlockAndPreviewFromMedia } from './utils';\r\nimport { store as blockEditorStore } from '../../../store';\r\n\r\nconst ALLOWED_MEDIA_TYPES = [ 'image' ];\r\nconst MAXIMUM_TITLE_LENGTH = 25;\r\nconst MEDIA_OPTIONS_POPOVER_PROPS = {\r\n\tposition: 'bottom left',\r\n\tclassName:\r\n\t\t'block-editor-inserter__media-list__item-preview-options__popover',\r\n};\r\n\r\nfunction MediaPreviewOptions( { category, media } ) {\r\n\tif ( ! category.getReportUrl ) {\r\n\t\treturn null;\r\n\t}\r\n\tconst reportUrl = category.getReportUrl( media );\r\n\treturn (\r\n\t\t<DropdownMenu\r\n\t\t\tclassName=\"block-editor-inserter__media-list__item-preview-options\"\r\n\t\t\tlabel={ __( 'Options' ) }\r\n\t\t\tpopoverProps={ MEDIA_OPTIONS_POPOVER_PROPS }\r\n\t\t\ticon={ moreVertical }\r\n\t\t>\r\n\t\t\t{ () => (\r\n\t\t\t\t<MenuGroup>\r\n\t\t\t\t\t<MenuItem\r\n\t\t\t\t\t\tonClick={ () =>\r\n\t\t\t\t\t\t\twindow.open( reportUrl, '_blank' ).focus()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ticon={ external }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ sprintf(\r\n\t\t\t\t\t\t\t/* translators: %s: The media type to report e.g: \"image\", \"video\", \"audio\" */\r\n\t\t\t\t\t\t\t__( 'Report %s' ),\r\n\t\t\t\t\t\t\tcategory.mediaType\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t</MenuItem>\r\n\t\t\t\t</MenuGroup>\r\n\t\t\t) }\r\n\t\t</DropdownMenu>\r\n\t);\r\n}\r\n\r\nfunction InsertExternalImageModal( { onClose, onSubmit } ) {\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\ttitle={ __( 'Insert external image' ) }\r\n\t\t\tonRequestClose={ onClose }\r\n\t\t\tclassName=\"block-editor-inserter-media-tab-media-preview-inserter-external-image-modal\"\r\n\t\t>\r\n\t\t\t<VStack spacing={ 3 }>\r\n\t\t\t\t<p>\r\n\t\t\t\t\t{ __(\r\n\t\t\t\t\t\t'This image cannot be uploaded to your Media Library, but it can still be inserted as an external image.'\r\n\t\t\t\t\t) }\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\t{ __(\r\n\t\t\t\t\t\t'External images can be removed by the external provider without warning and could even have legal compliance issues related to privacy legislation.'\r\n\t\t\t\t\t) }\r\n\t\t\t\t</p>\r\n\t\t\t</VStack>\r\n\t\t\t<Flex\r\n\t\t\t\tclassName=\"block-editor-block-lock-modal__actions\"\r\n\t\t\t\tjustify=\"flex-end\"\r\n\t\t\t\texpanded={ false }\r\n\t\t\t>\r\n\t\t\t\t<FlexItem>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\t// TODO: Switch to `true` (40px size) if possible\r\n\t\t\t\t\t\t__next40pxDefaultSize={ false }\r\n\t\t\t\t\t\tvariant=\"tertiary\"\r\n\t\t\t\t\t\tonClick={ onClose }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ __( 'Cancel' ) }\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</FlexItem>\r\n\t\t\t\t<FlexItem>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\t// TODO: Switch to `true` (40px size) if possible\r\n\t\t\t\t\t\t__next40pxDefaultSize={ false }\r\n\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\tonClick={ onSubmit }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ __( 'Insert' ) }\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</FlexItem>\r\n\t\t\t</Flex>\r\n\t\t</Modal>\r\n\t);\r\n}\r\n\r\nexport function MediaPreview( { media, onClick, category } ) {\r\n\tconst [ showExternalUploadModal, setShowExternalUploadModal ] =\r\n\t\tuseState( false );\r\n\tconst [ isHovered, setIsHovered ] = useState( false );\r\n\tconst [ isInserting, setIsInserting ] = useState( false );\r\n\tconst [ block, preview ] = useMemo(\r\n\t\t() => getBlockAndPreviewFromMedia( media, category.mediaType ),\r\n\t\t[ media, category.mediaType ]\r\n\t);\r\n\tconst { createErrorNotice, createSuccessNotice } =\r\n\t\tuseDispatch( noticesStore );\r\n\tconst { getSettings } = useSelect( blockEditorStore );\r\n\r\n\tconst onMediaInsert = useCallback(\r\n\t\t( previewBlock ) => {\r\n\t\t\t// Prevent multiple uploads when we're in the process of inserting.\r\n\t\t\tif ( isInserting ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst settings = getSettings();\r\n\t\t\tconst clonedBlock = cloneBlock( previewBlock );\r\n\t\t\tconst { id, url, caption } = clonedBlock.attributes;\r\n\r\n\t\t\t// User has no permission to upload media.\r\n\t\t\tif ( ! id && ! settings.mediaUpload ) {\r\n\t\t\t\tsetShowExternalUploadModal( true );\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Media item already exists in library, so just insert it.\r\n\t\t\tif ( !! id ) {\r\n\t\t\t\tonClick( clonedBlock );\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tsetIsInserting( true );\r\n\t\t\t// Media item does not exist in library, so try to upload it.\r\n\t\t\t// Fist fetch the image data. This may fail if the image host\r\n\t\t\t// doesn't allow CORS with the domain.\r\n\t\t\t// If this happens, we insert the image block using the external\r\n\t\t\t// URL and let the user know about the possible implications.\r\n\t\t\twindow\r\n\t\t\t\t.fetch( url )\r\n\t\t\t\t.then( ( response ) => response.blob() )\r\n\t\t\t\t.then( ( blob ) => {\r\n\t\t\t\t\tsettings.mediaUpload( {\r\n\t\t\t\t\t\tfilesList: [ blob ],\r\n\t\t\t\t\t\tadditionalData: { caption },\r\n\t\t\t\t\t\tonFileChange( [ img ] ) {\r\n\t\t\t\t\t\t\tif ( isBlobURL( img.url ) ) {\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonClick( {\r\n\t\t\t\t\t\t\t\t...clonedBlock,\r\n\t\t\t\t\t\t\t\tattributes: {\r\n\t\t\t\t\t\t\t\t\t...clonedBlock.attributes,\r\n\t\t\t\t\t\t\t\t\tid: img.id,\r\n\t\t\t\t\t\t\t\t\turl: img.url,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t} );\r\n\t\t\t\t\t\t\tcreateSuccessNotice(\r\n\t\t\t\t\t\t\t\t__( 'Image uploaded and inserted.' ),\r\n\t\t\t\t\t\t\t\t{ type: 'snackbar' }\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tsetIsInserting( false );\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tallowedTypes: ALLOWED_MEDIA_TYPES,\r\n\t\t\t\t\t\tonError( message ) {\r\n\t\t\t\t\t\t\tcreateErrorNotice( message, { type: 'snackbar' } );\r\n\t\t\t\t\t\t\tsetIsInserting( false );\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t} );\r\n\t\t\t\t} )\r\n\t\t\t\t.catch( () => {\r\n\t\t\t\t\tsetShowExternalUploadModal( true );\r\n\t\t\t\t\tsetIsInserting( false );\r\n\t\t\t\t} );\r\n\t\t},\r\n\t\t[\r\n\t\t\tisInserting,\r\n\t\t\tgetSettings,\r\n\t\t\tonClick,\r\n\t\t\tcreateSuccessNotice,\r\n\t\t\tcreateErrorNotice,\r\n\t\t]\r\n\t);\r\n\r\n\tconst title =\r\n\t\ttypeof media.title === 'string'\r\n\t\t\t? media.title\r\n\t\t\t: media.title?.rendered || __( 'no title' );\r\n\r\n\tlet truncatedTitle;\r\n\tif ( title.length > MAXIMUM_TITLE_LENGTH ) {\r\n\t\tconst omission = '...';\r\n\t\ttruncatedTitle =\r\n\t\t\ttitle.slice( 0, MAXIMUM_TITLE_LENGTH - omission.length ) + omission;\r\n\t}\r\n\tconst onMouseEnter = useCallback( () => setIsHovered( true ), [] );\r\n\tconst onMouseLeave = useCallback( () => setIsHovered( false ), [] );\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<InserterDraggableBlocks isEnabled blocks={ [ block ] }>\r\n\t\t\t\t{ ( { draggable, onDragStart, onDragEnd } ) => (\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName={ clsx(\r\n\t\t\t\t\t\t\t'block-editor-inserter__media-list__list-item',\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t'is-hovered': isHovered,\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t\tdraggable={ draggable }\r\n\t\t\t\t\t\tonDragStart={ onDragStart }\r\n\t\t\t\t\t\tonDragEnd={ onDragEnd }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ /* Adding `is-hovered` class to the wrapper element is needed\r\n\t\t\t\t\t\tbecause the options Popover is rendered outside of this node. */ }\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tonMouseEnter={ onMouseEnter }\r\n\t\t\t\t\t\t\tonMouseLeave={ onMouseLeave }\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Tooltip text={ truncatedTitle || title }>\r\n\t\t\t\t\t\t\t\t<Composite.Item\r\n\t\t\t\t\t\t\t\t\trender={\r\n\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\taria-label={ title }\r\n\t\t\t\t\t\t\t\t\t\t\trole=\"option\"\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"block-editor-inserter__media-list__item\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tonClick={ () => onMediaInsert( block ) }\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<div className=\"block-editor-inserter__media-list__item-preview\">\r\n\t\t\t\t\t\t\t\t\t\t{ preview }\r\n\t\t\t\t\t\t\t\t\t\t{ isInserting && (\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"block-editor-inserter__media-list__item-preview-spinner\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Spinner />\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</Composite.Item>\r\n\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t{ ! isInserting && (\r\n\t\t\t\t\t\t\t\t<MediaPreviewOptions\r\n\t\t\t\t\t\t\t\t\tcategory={ category }\r\n\t\t\t\t\t\t\t\t\tmedia={ media }\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) }\r\n\t\t\t</InserterDraggableBlocks>\r\n\t\t\t{ showExternalUploadModal && (\r\n\t\t\t\t<InsertExternalImageModal\r\n\t\t\t\t\tonClose={ () => setShowExternalUploadModal( false ) }\r\n\t\t\t\t\tonSubmit={ () => {\r\n\t\t\t\t\t\tonClick( cloneBlock( block ) );\r\n\t\t\t\t\t\tcreateSuccessNotice( __( 'Image inserted.' ), {\r\n\t\t\t\t\t\t\ttype: 'snackbar',\r\n\t\t\t\t\t\t} );\r\n\t\t\t\t\t\tsetShowExternalUploadModal( false );\r\n\t\t\t\t\t} }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t</>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}