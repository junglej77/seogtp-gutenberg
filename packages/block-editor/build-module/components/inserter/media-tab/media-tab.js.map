{"version":3,"names":["__","useViewportMatch","Button","useCallback","useMemo","MediaCategoryPanel","MediaUploadCheck","MediaUpload","useMediaCategories","getBlockAndPreviewFromMedia","MobileTabNavigation","CategoryTabs","InserterNoResults","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ALLOWED_MEDIA_TYPES","MediaTab","rootClientId","selectedCategory","onSelectCategory","onInsert","children","mediaCategories","isMobile","baseCssClass","onSelectMedia","media","url","block","type","categories","map","mediaCategory","label","labels","name","length","className","multiple","onSelect","allowedTypes","render","open","__next40pxDefaultSize","onClick","event","target","focus","variant","category"],"sources":["@wordpress/block-editor/src/components/inserter/media-tab/media-tab.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useViewportMatch } from '@wordpress/compose';\r\nimport { Button } from '@wordpress/components';\r\nimport { useCallback, useMemo } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { MediaCategoryPanel } from './media-panel';\r\nimport MediaUploadCheck from '../../media-upload/check';\r\nimport MediaUpload from '../../media-upload';\r\nimport { useMediaCategories } from './hooks';\r\nimport { getBlockAndPreviewFromMedia } from './utils';\r\nimport MobileTabNavigation from '../mobile-tab-navigation';\r\nimport CategoryTabs from '../category-tabs';\r\nimport InserterNoResults from '../no-results';\r\n\r\nconst ALLOWED_MEDIA_TYPES = [ 'image', 'video', 'audio' ];\r\n\r\nfunction MediaTab( {\r\n\trootClientId,\r\n\tselectedCategory,\r\n\tonSelectCategory,\r\n\tonInsert,\r\n\tchildren,\r\n} ) {\r\n\tconst mediaCategories = useMediaCategories( rootClientId );\r\n\tconst isMobile = useViewportMatch( 'medium', '<' );\r\n\tconst baseCssClass = 'block-editor-inserter__media-tabs';\r\n\tconst onSelectMedia = useCallback(\r\n\t\t( media ) => {\r\n\t\t\tif ( ! media?.url ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst [ block ] = getBlockAndPreviewFromMedia( media, media.type );\r\n\t\t\tonInsert( block );\r\n\t\t},\r\n\t\t[ onInsert ]\r\n\t);\r\n\tconst categories = useMemo(\r\n\t\t() =>\r\n\t\t\tmediaCategories.map( ( mediaCategory ) => ( {\r\n\t\t\t\t...mediaCategory,\r\n\t\t\t\tlabel: mediaCategory.labels.name,\r\n\t\t\t} ) ),\r\n\t\t[ mediaCategories ]\r\n\t);\r\n\r\n\tif ( ! categories.length ) {\r\n\t\treturn <InserterNoResults />;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ ! isMobile && (\r\n\t\t\t\t<div className={ `${ baseCssClass }-container` }>\r\n\t\t\t\t\t<CategoryTabs\r\n\t\t\t\t\t\tcategories={ categories }\r\n\t\t\t\t\t\tselectedCategory={ selectedCategory }\r\n\t\t\t\t\t\tonSelectCategory={ onSelectCategory }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ children }\r\n\t\t\t\t\t</CategoryTabs>\r\n\t\t\t\t\t<MediaUploadCheck>\r\n\t\t\t\t\t\t<MediaUpload\r\n\t\t\t\t\t\t\tmultiple={ false }\r\n\t\t\t\t\t\t\tonSelect={ onSelectMedia }\r\n\t\t\t\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\r\n\t\t\t\t\t\t\trender={ ( { open } ) => (\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t// TODO: Switch to `true` (40px size) if possible\r\n\t\t\t\t\t\t\t\t\t__next40pxDefaultSize={ false }\r\n\t\t\t\t\t\t\t\t\tonClick={ ( event ) => {\r\n\t\t\t\t\t\t\t\t\t\t// Safari doesn't emit a focus event on button elements when\r\n\t\t\t\t\t\t\t\t\t\t// clicked and we need to manually focus the button here.\r\n\t\t\t\t\t\t\t\t\t\t// The reason is that core's Media Library modal explicitly triggers a\r\n\t\t\t\t\t\t\t\t\t\t// focus event and therefore a `blur` event is triggered on a different\r\n\t\t\t\t\t\t\t\t\t\t// element, which doesn't contain the `data-unstable-ignore-focus-outside-for-relatedtarget`\r\n\t\t\t\t\t\t\t\t\t\t// attribute making the Inserter dialog to close.\r\n\t\t\t\t\t\t\t\t\t\tevent.target.focus();\r\n\t\t\t\t\t\t\t\t\t\topen();\r\n\t\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t\t\tclassName=\"block-editor-inserter__media-library-button\"\r\n\t\t\t\t\t\t\t\t\tvariant=\"secondary\"\r\n\t\t\t\t\t\t\t\t\tdata-unstable-ignore-focus-outside-for-relatedtarget=\".media-modal\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{ __( 'Open Media Library' ) }\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</MediaUploadCheck>\r\n\t\t\t\t</div>\r\n\t\t\t) }\r\n\t\t\t{ isMobile && (\r\n\t\t\t\t<MobileTabNavigation categories={ categories }>\r\n\t\t\t\t\t{ ( category ) => (\r\n\t\t\t\t\t\t<MediaCategoryPanel\r\n\t\t\t\t\t\t\tonInsert={ onInsert }\r\n\t\t\t\t\t\t\trootClientId={ rootClientId }\r\n\t\t\t\t\t\t\tcategory={ category }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) }\r\n\t\t\t\t</MobileTabNavigation>\r\n\t\t\t) }\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default MediaTab;\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,EAAE,QAAQ,iBAAiB;AACpC,SAASC,gBAAgB,QAAQ,oBAAoB;AACrD,SAASC,MAAM,QAAQ,uBAAuB;AAC9C,SAASC,WAAW,EAAEC,OAAO,QAAQ,oBAAoB;;AAEzD;AACA;AACA;AACA,SAASC,kBAAkB,QAAQ,eAAe;AAClD,OAAOC,gBAAgB,MAAM,0BAA0B;AACvD,OAAOC,WAAW,MAAM,oBAAoB;AAC5C,SAASC,kBAAkB,QAAQ,SAAS;AAC5C,SAASC,2BAA2B,QAAQ,SAAS;AACrD,OAAOC,mBAAmB,MAAM,0BAA0B;AAC1D,OAAOC,YAAY,MAAM,kBAAkB;AAC3C,OAAOC,iBAAiB,MAAM,eAAe;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAE9C,MAAMC,mBAAmB,GAAG,CAAE,OAAO,EAAE,OAAO,EAAE,OAAO,CAAE;AAEzD,SAASC,QAAQA,CAAE;EAClBC,YAAY;EACZC,gBAAgB;EAChBC,gBAAgB;EAChBC,QAAQ;EACRC;AACD,CAAC,EAAG;EACH,MAAMC,eAAe,GAAGlB,kBAAkB,CAAEa,YAAa,CAAC;EAC1D,MAAMM,QAAQ,GAAG1B,gBAAgB,CAAE,QAAQ,EAAE,GAAI,CAAC;EAClD,MAAM2B,YAAY,GAAG,mCAAmC;EACxD,MAAMC,aAAa,GAAG1B,WAAW,CAC9B2B,KAAK,IAAM;IACZ,IAAK,CAAEA,KAAK,EAAEC,GAAG,EAAG;MACnB;IACD;IACA,MAAM,CAAEC,KAAK,CAAE,GAAGvB,2BAA2B,CAAEqB,KAAK,EAAEA,KAAK,CAACG,IAAK,CAAC;IAClET,QAAQ,CAAEQ,KAAM,CAAC;EAClB,CAAC,EACD,CAAER,QAAQ,CACX,CAAC;EACD,MAAMU,UAAU,GAAG9B,OAAO,CACzB,MACCsB,eAAe,CAACS,GAAG,CAAIC,aAAa,KAAQ;IAC3C,GAAGA,aAAa;IAChBC,KAAK,EAAED,aAAa,CAACE,MAAM,CAACC;EAC7B,CAAC,CAAG,CAAC,EACN,CAAEb,eAAe,CAClB,CAAC;EAED,IAAK,CAAEQ,UAAU,CAACM,MAAM,EAAG;IAC1B,oBAAO1B,IAAA,CAACF,iBAAiB,IAAE,CAAC;EAC7B;EAEA,oBACCI,KAAA,CAAAE,SAAA;IAAAO,QAAA,GACG,CAAEE,QAAQ,iBACXX,KAAA;MAAKyB,SAAS,EAAI,GAAGb,YAAc,YAAa;MAAAH,QAAA,gBAC/CX,IAAA,CAACH,YAAY;QACZuB,UAAU,EAAGA,UAAY;QACzBZ,gBAAgB,EAAGA,gBAAkB;QACrCC,gBAAgB,EAAGA,gBAAkB;QAAAE,QAAA,EAEnCA;MAAQ,CACG,CAAC,eACfX,IAAA,CAACR,gBAAgB;QAAAmB,QAAA,eAChBX,IAAA,CAACP,WAAW;UACXmC,QAAQ,EAAG,KAAO;UAClBC,QAAQ,EAAGd,aAAe;UAC1Be,YAAY,EAAGzB,mBAAqB;UACpC0B,MAAM,EAAGA,CAAE;YAAEC;UAAK,CAAC,kBAClBhC,IAAA,CAACZ;UACA;UAAA;YACA6C,qBAAqB,EAAG,KAAO;YAC/BC,OAAO,EAAKC,KAAK,IAAM;cACtB;cACA;cACA;cACA;cACA;cACA;cACAA,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC;cACpBL,IAAI,CAAC,CAAC;YACP,CAAG;YACHL,SAAS,EAAC,6CAA6C;YACvDW,OAAO,EAAC,WAAW;YACnB,wDAAqD,cAAc;YAAA3B,QAAA,EAEjEzB,EAAE,CAAE,oBAAqB;UAAC,CACrB;QACN,CACH;MAAC,CACe,CAAC;IAAA,CACf,CACL,EACC2B,QAAQ,iBACTb,IAAA,CAACJ,mBAAmB;MAACwB,UAAU,EAAGA,UAAY;MAAAT,QAAA,EACzC4B,QAAQ,iBACXvC,IAAA,CAACT,kBAAkB;QAClBmB,QAAQ,EAAGA,QAAU;QACrBH,YAAY,EAAGA,YAAc;QAC7BgC,QAAQ,EAAGA;MAAU,CACrB;IACD,CACmB,CACrB;EAAA,CACA,CAAC;AAEL;AAEA,eAAejC,QAAQ","ignoreList":[]}