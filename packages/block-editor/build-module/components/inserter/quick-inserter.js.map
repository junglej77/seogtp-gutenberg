{"version":3,"names":["clsx","useState","useEffect","__","Button","SearchControl","useDispatch","useSelect","InserterSearchResults","useInsertionPoint","usePatternsState","useBlockTypesState","store","blockEditorStore","jsx","_jsx","jsxs","_jsxs","SEARCH_THRESHOLD","SHOWN_BLOCK_TYPES","SHOWN_BLOCK_PATTERNS","SHOWN_BLOCK_PATTERNS_WITH_PRIORITIZATION","QuickInserter","onSelect","rootClientId","clientId","isAppender","prioritizePatterns","selectBlockOnInsert","hasSearch","filterValue","setFilterValue","destinationRootClientId","onInsertBlocks","blockTypes","patterns","setInserterIsOpened","insertionIndex","select","getSettings","getBlockIndex","getBlockCount","settings","index","blockCount","__experimentalSetIsInserterOpened","showPatterns","length","showSearch","showInsertionPoint","onBrowseAll","maxBlockPatterns","className","children","__nextHasNoMarginBottom","value","onChange","label","placeholder","maxBlockTypes","isDraggable","isQuick","__next40pxDefaultSize","onClick"],"sources":["@wordpress/block-editor/src/components/inserter/quick-inserter.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useState, useEffect } from '@wordpress/element';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { Button, SearchControl } from '@wordpress/components';\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport InserterSearchResults from './search-results';\r\nimport useInsertionPoint from './hooks/use-insertion-point';\r\nimport usePatternsState from './hooks/use-patterns-state';\r\nimport useBlockTypesState from './hooks/use-block-types-state';\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nconst SEARCH_THRESHOLD = 6;\r\nconst SHOWN_BLOCK_TYPES = 6;\r\nconst SHOWN_BLOCK_PATTERNS = 2;\r\nconst SHOWN_BLOCK_PATTERNS_WITH_PRIORITIZATION = 4;\r\n\r\nexport default function QuickInserter( {\r\n\tonSelect,\r\n\trootClientId,\r\n\tclientId,\r\n\tisAppender,\r\n\tprioritizePatterns,\r\n\tselectBlockOnInsert,\r\n\thasSearch = true,\r\n} ) {\r\n\tconst [ filterValue, setFilterValue ] = useState( '' );\r\n\tconst [ destinationRootClientId, onInsertBlocks ] = useInsertionPoint( {\r\n\t\tonSelect,\r\n\t\trootClientId,\r\n\t\tclientId,\r\n\t\tisAppender,\r\n\t\tselectBlockOnInsert,\r\n\t} );\r\n\tconst [ blockTypes ] = useBlockTypesState(\r\n\t\tdestinationRootClientId,\r\n\t\tonInsertBlocks,\r\n\t\ttrue\r\n\t);\r\n\r\n\tconst [ patterns ] = usePatternsState(\r\n\t\tonInsertBlocks,\r\n\t\tdestinationRootClientId\r\n\t);\r\n\r\n\tconst { setInserterIsOpened, insertionIndex } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst { getSettings, getBlockIndex, getBlockCount } =\r\n\t\t\t\tselect( blockEditorStore );\r\n\t\t\tconst settings = getSettings();\r\n\t\t\tconst index = getBlockIndex( clientId );\r\n\t\t\tconst blockCount = getBlockCount();\r\n\r\n\t\t\treturn {\r\n\t\t\t\tsetInserterIsOpened: settings.__experimentalSetIsInserterOpened,\r\n\t\t\t\tinsertionIndex: index === -1 ? blockCount : index,\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ clientId ]\r\n\t);\r\n\r\n\tconst showPatterns =\r\n\t\tpatterns.length && ( !! filterValue || prioritizePatterns );\r\n\tconst showSearch =\r\n\t\thasSearch &&\r\n\t\t( ( showPatterns && patterns.length > SEARCH_THRESHOLD ) ||\r\n\t\t\tblockTypes.length > SEARCH_THRESHOLD );\r\n\r\n\tuseEffect( () => {\r\n\t\tif ( setInserterIsOpened ) {\r\n\t\t\tsetInserterIsOpened( false );\r\n\t\t}\r\n\t}, [ setInserterIsOpened ] );\r\n\r\n\tconst { showInsertionPoint } = useDispatch( blockEditorStore );\r\n\r\n\t// When clicking Browse All select the appropriate block so as\r\n\t// the insertion point can work as expected.\r\n\tconst onBrowseAll = () => {\r\n\t\tsetInserterIsOpened( {\r\n\t\t\trootClientId,\r\n\t\t\tinsertionIndex,\r\n\t\t\tfilterValue,\r\n\t\t\tonSelect,\r\n\t\t} );\r\n\t\tshowInsertionPoint( rootClientId, insertionIndex );\r\n\t};\r\n\r\n\tlet maxBlockPatterns = 0;\r\n\tif ( showPatterns ) {\r\n\t\tmaxBlockPatterns = prioritizePatterns\r\n\t\t\t? SHOWN_BLOCK_PATTERNS_WITH_PRIORITIZATION\r\n\t\t\t: SHOWN_BLOCK_PATTERNS;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={ clsx( 'block-editor-inserter__quick-inserter', {\r\n\t\t\t\t'has-search': showSearch,\r\n\t\t\t\t'has-expand': setInserterIsOpened,\r\n\t\t\t} ) }\r\n\t\t>\r\n\t\t\t{ showSearch && (\r\n\t\t\t\t<SearchControl\r\n\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\tclassName=\"block-editor-inserter__search\"\r\n\t\t\t\t\tvalue={ filterValue }\r\n\t\t\t\t\tonChange={ ( value ) => {\r\n\t\t\t\t\t\tsetFilterValue( value );\r\n\t\t\t\t\t} }\r\n\t\t\t\t\tlabel={ __( 'Search for blocks and patterns' ) }\r\n\t\t\t\t\tplaceholder={ __( 'Search' ) }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\r\n\t\t\t<div className=\"block-editor-inserter__quick-inserter-results\">\r\n\t\t\t\t<InserterSearchResults\r\n\t\t\t\t\tfilterValue={ filterValue }\r\n\t\t\t\t\tonSelect={ onSelect }\r\n\t\t\t\t\trootClientId={ rootClientId }\r\n\t\t\t\t\tclientId={ clientId }\r\n\t\t\t\t\tisAppender={ isAppender }\r\n\t\t\t\t\tmaxBlockPatterns={ maxBlockPatterns }\r\n\t\t\t\t\tmaxBlockTypes={ SHOWN_BLOCK_TYPES }\r\n\t\t\t\t\tisDraggable={ false }\r\n\t\t\t\t\tprioritizePatterns={ prioritizePatterns }\r\n\t\t\t\t\tselectBlockOnInsert={ selectBlockOnInsert }\r\n\t\t\t\t\tisQuick\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\r\n\t\t\t{ setInserterIsOpened && (\r\n\t\t\t\t<Button\r\n\t\t\t\t\t// TODO: Switch to `true` (40px size) if possible\r\n\t\t\t\t\t__next40pxDefaultSize={ false }\r\n\t\t\t\t\tclassName=\"block-editor-inserter__quick-inserter-expand\"\r\n\t\t\t\t\tonClick={ onBrowseAll }\r\n\t\t\t\t\taria-label={ __(\r\n\t\t\t\t\t\t'Browse all. This will open the main inserter panel in the editor toolbar.'\r\n\t\t\t\t\t) }\r\n\t\t\t\t>\r\n\t\t\t\t\t{ __( 'Browse all' ) }\r\n\t\t\t\t</Button>\r\n\t\t\t) }\r\n\t\t</div>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}