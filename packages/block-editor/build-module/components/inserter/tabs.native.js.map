{"version":3,"names":["Animated","View","useCallback","useEffect","useMemo","useRef","useState","__","SegmentedControl","BlockTypesTab","ReusableBlocksTab","styles","jsx","_jsx","TAB_ANIMATION_DURATION","InserterTabs","listProps","onSelect","rootClientId","showReusableBlocks","tabIndex","tabAnimation","Value","current","lastScrollEvents","wrapperWidth","setWrapperWidth","onScroll","event","nativeEvent","onWrapperLayout","layout","width","timing","duration","toValue","useNativeDriver","start","lastScrollEvent","tabs","tabKeys","filteredTabs","getTabs","filter","name","keys","translateX","length","interpolate","inputRange","outputRange","map","key","containerStyle","transform","style","onLayout","children","component","TabComponent","index","TabsControl","onChangeTab","segments","title","segmentHandler","selectedTab","tabTitles","indexOf","Control"],"sources":["@wordpress/block-editor/src/components/inserter/tabs.native.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport { Animated, View } from 'react-native';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tuseCallback,\r\n\tuseEffect,\r\n\tuseMemo,\r\n\tuseRef,\r\n\tuseState,\r\n} from '@wordpress/element';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { SegmentedControl } from '@wordpress/components';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockTypesTab from './block-types-tab';\r\nimport ReusableBlocksTab from './reusable-blocks-tab';\r\nimport styles from './style.scss';\r\n\r\nconst TAB_ANIMATION_DURATION = 250;\r\n\r\nfunction InserterTabs( {\r\n\tlistProps,\r\n\tonSelect,\r\n\trootClientId,\r\n\tshowReusableBlocks,\r\n\ttabIndex,\r\n} ) {\r\n\tconst tabAnimation = useRef( new Animated.Value( 0 ) ).current;\r\n\tconst lastScrollEvents = useRef( [] ).current;\r\n\tconst [ wrapperWidth, setWrapperWidth ] = useState( 0 );\r\n\r\n\tfunction onScroll( event ) {\r\n\t\tlastScrollEvents[ tabIndex ] = event.nativeEvent;\r\n\t\tlistProps.onScroll( event );\r\n\t}\r\n\r\n\tconst onWrapperLayout = useCallback(\r\n\t\t( { nativeEvent } ) => {\r\n\t\t\tsetWrapperWidth( nativeEvent.layout.width );\r\n\t\t},\r\n\t\t[ setWrapperWidth ]\r\n\t);\r\n\r\n\tuseEffect( () => {\r\n\t\tAnimated.timing( tabAnimation, {\r\n\t\t\tduration: TAB_ANIMATION_DURATION,\r\n\t\t\ttoValue: tabIndex,\r\n\t\t\tuseNativeDriver: true,\r\n\t\t} ).start();\r\n\r\n\t\t// Notify upstream with the last scroll event of the current tab.\r\n\t\tconst lastScrollEvent = lastScrollEvents[ tabIndex ];\r\n\t\tif ( lastScrollEvent ) {\r\n\t\t\tlistProps.onScroll( { nativeEvent: lastScrollEvent } );\r\n\t\t}\r\n\t}, [ tabIndex ] );\r\n\r\n\tconst { tabs, tabKeys } = useMemo( () => {\r\n\t\tconst filteredTabs = InserterTabs.getTabs().filter(\r\n\t\t\t( { name } ) => showReusableBlocks || name !== 'reusable'\r\n\t\t);\r\n\t\treturn {\r\n\t\t\ttabs: filteredTabs,\r\n\t\t\ttabKeys: [ ...filteredTabs.keys() ],\r\n\t\t};\r\n\t}, [ showReusableBlocks ] );\r\n\r\n\tconst translateX = useMemo(\r\n\t\t() =>\r\n\t\t\ttabKeys.length > 1\r\n\t\t\t\t? tabAnimation.interpolate( {\r\n\t\t\t\t\t\tinputRange: tabKeys,\r\n\t\t\t\t\t\toutputRange: tabKeys.map(\r\n\t\t\t\t\t\t\t( key ) => key * -wrapperWidth\r\n\t\t\t\t\t\t),\r\n\t\t\t\t  } )\r\n\t\t\t\t: tabAnimation,\r\n\t\t[ tabAnimation, tabKeys, wrapperWidth ]\r\n\t);\r\n\r\n\tconst containerStyle = [\r\n\t\tstyles[ 'inserter-tabs__container' ],\r\n\t\t{\r\n\t\t\twidth: wrapperWidth * tabKeys.length,\r\n\t\t\ttransform: [ { translateX } ],\r\n\t\t},\r\n\t];\r\n\r\n\treturn (\r\n\t\t<View\r\n\t\t\tstyle={ styles[ 'inserter-tabs__wrapper' ] }\r\n\t\t\tonLayout={ onWrapperLayout }\r\n\t\t>\r\n\t\t\t<Animated.View style={ containerStyle }>\r\n\t\t\t\t{ tabs.map( ( { component: TabComponent }, index ) => (\r\n\t\t\t\t\t<View key={ `tab-${ index }` }>\r\n\t\t\t\t\t\t<TabComponent\r\n\t\t\t\t\t\t\trootClientId={ rootClientId }\r\n\t\t\t\t\t\t\tonSelect={ onSelect }\r\n\t\t\t\t\t\t\tlistProps={ { ...listProps, onScroll } }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</View>\r\n\t\t\t\t) ) }\r\n\t\t\t</Animated.View>\r\n\t\t</View>\r\n\t);\r\n}\r\n\r\nfunction TabsControl( { onChangeTab, showReusableBlocks } ) {\r\n\tconst tabs = InserterTabs.getTabs();\r\n\tconst segments = useMemo( () => {\r\n\t\tconst filteredTabs = tabs.filter(\r\n\t\t\t( { name } ) => showReusableBlocks || name !== 'reusable'\r\n\t\t);\r\n\t\treturn filteredTabs.map( ( { title } ) => title );\r\n\t}, [ showReusableBlocks ] );\r\n\r\n\tconst segmentHandler = useCallback(\r\n\t\t( selectedTab ) => {\r\n\t\t\tconst tabTitles = tabs.map( ( { title } ) => title );\r\n\t\t\tonChangeTab( tabTitles.indexOf( selectedTab ) );\r\n\t\t},\r\n\t\t[ onChangeTab ]\r\n\t);\r\n\r\n\treturn segments.length > 1 ? (\r\n\t\t<SegmentedControl\r\n\t\t\tsegments={ segments }\r\n\t\t\tsegmentHandler={ segmentHandler }\r\n\t\t/>\r\n\t) : null;\r\n}\r\n\r\nInserterTabs.Control = TabsControl;\r\n\r\nInserterTabs.getTabs = () => [\r\n\t{ name: 'blocks', title: __( 'Blocks' ), component: BlockTypesTab },\r\n\t{\r\n\t\tname: 'reusable',\r\n\t\ttitle: __( 'Synced patterns' ),\r\n\t\tcomponent: ReusableBlocksTab,\r\n\t},\r\n];\r\n\r\nexport default InserterTabs;\r\n"],"mappings":"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","ignoreList":[]}