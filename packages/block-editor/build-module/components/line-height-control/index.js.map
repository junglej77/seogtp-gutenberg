{"version":3,"names":["__","__experimentalNumberControl","NumberControl","BASE_DEFAULT_VALUE","RESET_VALUE","STEP","SPIN_FACTOR","isLineHeightDefined","jsx","_jsx","LineHeightControl","__next40pxDefaultSize","value","lineHeight","onChange","__unstableInputWidth","otherProps","isDefined","adjustNextValue","nextValue","wasTypedOrPasted","spin","stateReducer","state","action","includes","payload","event","nativeEvent","inputType","handleOnChange","type","className","children","__unstableStateReducer","label","placeholder","step","spinFactor","min","spinControls"],"sources":["@wordpress/block-editor/src/components/line-height-control/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { __experimentalNumberControl as NumberControl } from '@wordpress/components';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport {\r\n\tBASE_DEFAULT_VALUE,\r\n\tRESET_VALUE,\r\n\tSTEP,\r\n\tSPIN_FACTOR,\r\n\tisLineHeightDefined,\r\n} from './utils';\r\n\r\nconst LineHeightControl = ( {\r\n\t/** Start opting into the larger default height that will become the default size in a future version. */\r\n\t__next40pxDefaultSize = false,\r\n\tvalue: lineHeight,\r\n\tonChange,\r\n\t__unstableInputWidth = '60px',\r\n\t...otherProps\r\n} ) => {\r\n\tconst isDefined = isLineHeightDefined( lineHeight );\r\n\r\n\tconst adjustNextValue = ( nextValue, wasTypedOrPasted ) => {\r\n\t\t// Set the next value without modification if lineHeight has been defined.\r\n\t\tif ( isDefined ) {\r\n\t\t\treturn nextValue;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * The following logic handles the initial spin up/down action\r\n\t\t * (from an undefined value state) so that the next values are better suited for\r\n\t\t * line-height rendering. For example, the first spin up should immediately\r\n\t\t * go to 1.6, rather than the normally expected 0.1.\r\n\t\t *\r\n\t\t * Spin up/down actions can be triggered by keydowns of the up/down arrow keys,\r\n\t\t * dragging the input or by clicking the spin buttons.\r\n\t\t */\r\n\t\tconst spin = STEP * SPIN_FACTOR;\r\n\t\tswitch ( `${ nextValue }` ) {\r\n\t\t\tcase `${ spin }`:\r\n\t\t\t\t// Increment by spin value.\r\n\t\t\t\treturn BASE_DEFAULT_VALUE + spin;\r\n\t\t\tcase '0': {\r\n\t\t\t\t// This means the user explicitly input '0', rather than using the\r\n\t\t\t\t// spin down action from an undefined value state.\r\n\t\t\t\tif ( wasTypedOrPasted ) {\r\n\t\t\t\t\treturn nextValue;\r\n\t\t\t\t}\r\n\t\t\t\t// Decrement by spin value.\r\n\t\t\t\treturn BASE_DEFAULT_VALUE - spin;\r\n\t\t\t}\r\n\t\t\tcase '':\r\n\t\t\t\treturn BASE_DEFAULT_VALUE;\r\n\t\t\tdefault:\r\n\t\t\t\treturn nextValue;\r\n\t\t}\r\n\t};\r\n\r\n\tconst stateReducer = ( state, action ) => {\r\n\t\t// Be careful when changing this â€” cross-browser behavior of the\r\n\t\t// `inputType` field in `input` events are inconsistent.\r\n\t\t// For example, Firefox emits an input event with inputType=\"insertReplacementText\"\r\n\t\t// on spin button clicks, while other browsers do not even emit an input event.\r\n\t\tconst wasTypedOrPasted = [ 'insertText', 'insertFromPaste' ].includes(\r\n\t\t\taction.payload.event.nativeEvent?.inputType\r\n\t\t);\r\n\t\tconst value = adjustNextValue( state.value, wasTypedOrPasted );\r\n\t\treturn { ...state, value };\r\n\t};\r\n\r\n\tconst value = isDefined ? lineHeight : RESET_VALUE;\r\n\r\n\tconst handleOnChange = ( nextValue, { event } ) => {\r\n\t\tif ( nextValue === '' ) {\r\n\t\t\tonChange();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( event.type === 'click' ) {\r\n\t\t\tonChange( adjustNextValue( `${ nextValue }`, false ) );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tonChange( `${ nextValue }` );\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"block-editor-line-height-control\">\r\n\t\t\t<NumberControl\r\n\t\t\t\t{ ...otherProps }\r\n\t\t\t\t__next40pxDefaultSize={ __next40pxDefaultSize }\r\n\t\t\t\t__unstableInputWidth={ __unstableInputWidth }\r\n\t\t\t\t__unstableStateReducer={ stateReducer }\r\n\t\t\t\tonChange={ handleOnChange }\r\n\t\t\t\tlabel={ __( 'Line height' ) }\r\n\t\t\t\tplaceholder={ BASE_DEFAULT_VALUE }\r\n\t\t\t\tstep={ STEP }\r\n\t\t\t\tspinFactor={ SPIN_FACTOR }\r\n\t\t\t\tvalue={ value }\r\n\t\t\t\tmin={ 0 }\r\n\t\t\t\tspinControls=\"custom\"\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\n/**\r\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/line-height-control/README.md\r\n */\r\nexport default LineHeightControl;\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,EAAE,QAAQ,iBAAiB;AACpC,SAASC,2BAA2B,IAAIC,aAAa,QAAQ,uBAAuB;;AAEpF;AACA;AACA;AACA,SACCC,kBAAkB,EAClBC,WAAW,EACXC,IAAI,EACJC,WAAW,EACXC,mBAAmB,QACb,SAAS;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAEjB,MAAMC,iBAAiB,GAAGA,CAAE;EAC3B;EACAC,qBAAqB,GAAG,KAAK;EAC7BC,KAAK,EAAEC,UAAU;EACjBC,QAAQ;EACRC,oBAAoB,GAAG,MAAM;EAC7B,GAAGC;AACJ,CAAC,KAAM;EACN,MAAMC,SAAS,GAAGV,mBAAmB,CAAEM,UAAW,CAAC;EAEnD,MAAMK,eAAe,GAAGA,CAAEC,SAAS,EAAEC,gBAAgB,KAAM;IAC1D;IACA,IAAKH,SAAS,EAAG;MAChB,OAAOE,SAAS;IACjB;;IAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,MAAME,IAAI,GAAGhB,IAAI,GAAGC,WAAW;IAC/B,QAAU,GAAGa,SAAW,EAAC;MACxB,KAAM,GAAGE,IAAM,EAAC;QACf;QACA,OAAOlB,kBAAkB,GAAGkB,IAAI;MACjC,KAAK,GAAG;QAAE;UACT;UACA;UACA,IAAKD,gBAAgB,EAAG;YACvB,OAAOD,SAAS;UACjB;UACA;UACA,OAAOhB,kBAAkB,GAAGkB,IAAI;QACjC;MACA,KAAK,EAAE;QACN,OAAOlB,kBAAkB;MAC1B;QACC,OAAOgB,SAAS;IAClB;EACD,CAAC;EAED,MAAMG,YAAY,GAAGA,CAAEC,KAAK,EAAEC,MAAM,KAAM;IACzC;IACA;IACA;IACA;IACA,MAAMJ,gBAAgB,GAAG,CAAE,YAAY,EAAE,iBAAiB,CAAE,CAACK,QAAQ,CACpED,MAAM,CAACE,OAAO,CAACC,KAAK,CAACC,WAAW,EAAEC,SACnC,CAAC;IACD,MAAMjB,KAAK,GAAGM,eAAe,CAAEK,KAAK,CAACX,KAAK,EAAEQ,gBAAiB,CAAC;IAC9D,OAAO;MAAE,GAAGG,KAAK;MAAEX;IAAM,CAAC;EAC3B,CAAC;EAED,MAAMA,KAAK,GAAGK,SAAS,GAAGJ,UAAU,GAAGT,WAAW;EAElD,MAAM0B,cAAc,GAAGA,CAAEX,SAAS,EAAE;IAAEQ;EAAM,CAAC,KAAM;IAClD,IAAKR,SAAS,KAAK,EAAE,EAAG;MACvBL,QAAQ,CAAC,CAAC;MACV;IACD;IAEA,IAAKa,KAAK,CAACI,IAAI,KAAK,OAAO,EAAG;MAC7BjB,QAAQ,CAAEI,eAAe,CAAG,GAAGC,SAAW,EAAC,EAAE,KAAM,CAAE,CAAC;MACtD;IACD;IAEAL,QAAQ,CAAG,GAAGK,SAAW,EAAE,CAAC;EAC7B,CAAC;EAED,oBACCV,IAAA;IAAKuB,SAAS,EAAC,kCAAkC;IAAAC,QAAA,eAChDxB,IAAA,CAACP,aAAa;MAAA,GACRc,UAAU;MACfL,qBAAqB,EAAGA,qBAAuB;MAC/CI,oBAAoB,EAAGA,oBAAsB;MAC7CmB,sBAAsB,EAAGZ,YAAc;MACvCR,QAAQ,EAAGgB,cAAgB;MAC3BK,KAAK,EAAGnC,EAAE,CAAE,aAAc,CAAG;MAC7BoC,WAAW,EAAGjC,kBAAoB;MAClCkC,IAAI,EAAGhC,IAAM;MACbiC,UAAU,EAAGhC,WAAa;MAC1BM,KAAK,EAAGA,KAAO;MACf2B,GAAG,EAAG,CAAG;MACTC,YAAY,EAAC;IAAQ,CACrB;EAAC,CACE,CAAC;AAER,CAAC;;AAED;AACA;AACA;AACA,eAAe9B,iBAAiB","ignoreList":[]}