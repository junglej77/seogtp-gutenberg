{"version":3,"names":["__","MenuItem","TextHighlight","Icon","globe","page","tag","postList","category","file","home","verse","__unstableStripHTML","stripHTML","safeDecodeURI","filterURLForDisplay","getPath","pipe","jsx","_jsx","ICONS_MAP","post","post_tag","attachment","SearchItemIcon","isURL","suggestion","icon","type","isFrontPage","isBlogHome","className","addLeadingSlash","url","trimmedURL","trim","length","replace","removeTrailingSlash","partialRight","fn","partialArgs","args","defaultTo","d","v","undefined","getURLForDisplay","LinkControlSearchItem","itemProps","searchTerm","onClick","shouldShowType","info","iconPosition","shortcut","getVisualTypeName","children","text","title","highlight"],"sources":["@wordpress/block-editor/src/components/link-control/search-item.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { MenuItem, TextHighlight } from '@wordpress/components';\r\nimport {\r\n\tIcon,\r\n\tglobe,\r\n\tpage,\r\n\ttag,\r\n\tpostList,\r\n\tcategory,\r\n\tfile,\r\n\thome,\r\n\tverse,\r\n} from '@wordpress/icons';\r\nimport { __unstableStripHTML as stripHTML } from '@wordpress/dom';\r\nimport { safeDecodeURI, filterURLForDisplay, getPath } from '@wordpress/url';\r\nimport { pipe } from '@wordpress/compose';\r\n\r\nconst ICONS_MAP = {\r\n\tpost: postList,\r\n\tpage,\r\n\tpost_tag: tag,\r\n\tcategory,\r\n\tattachment: file,\r\n};\r\n\r\nfunction SearchItemIcon( { isURL, suggestion } ) {\r\n\tlet icon = null;\r\n\r\n\tif ( isURL ) {\r\n\t\ticon = globe;\r\n\t} else if ( suggestion.type in ICONS_MAP ) {\r\n\t\ticon = ICONS_MAP[ suggestion.type ];\r\n\t\tif ( suggestion.type === 'page' ) {\r\n\t\t\tif ( suggestion.isFrontPage ) {\r\n\t\t\t\ticon = home;\r\n\t\t\t}\r\n\t\t\tif ( suggestion.isBlogHome ) {\r\n\t\t\t\ticon = verse;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tif ( icon ) {\r\n\t\treturn (\r\n\t\t\t<Icon\r\n\t\t\t\tclassName=\"block-editor-link-control__search-item-icon\"\r\n\t\t\t\ticon={ icon }\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\treturn null;\r\n}\r\n\r\n/**\r\n * Adds a leading slash to a url if it doesn't already have one.\r\n * @param {string} url the url to add a leading slash to.\r\n * @return {string} the url with a leading slash.\r\n */\r\nfunction addLeadingSlash( url ) {\r\n\tconst trimmedURL = url?.trim();\r\n\r\n\tif ( ! trimmedURL?.length ) {\r\n\t\treturn url;\r\n\t}\r\n\r\n\treturn url?.replace( /^\\/?/, '/' );\r\n}\r\n\r\nfunction removeTrailingSlash( url ) {\r\n\tconst trimmedURL = url?.trim();\r\n\r\n\tif ( ! trimmedURL?.length ) {\r\n\t\treturn url;\r\n\t}\r\n\r\n\treturn url?.replace( /\\/$/, '' );\r\n}\r\n\r\nconst partialRight =\r\n\t( fn, ...partialArgs ) =>\r\n\t( ...args ) =>\r\n\t\tfn( ...args, ...partialArgs );\r\n\r\nconst defaultTo = ( d ) => ( v ) => {\r\n\treturn v === null || v === undefined || v !== v ? d : v;\r\n};\r\n\r\n/**\r\n * Prepares a URL for display in the UI.\r\n * - decodes the URL.\r\n * - filters it (removes protocol, www, etc.).\r\n * - truncates it if necessary.\r\n * - adds a leading slash.\r\n * @param {string} url the url.\r\n * @return {string} the processed url to display.\r\n */\r\nfunction getURLForDisplay( url ) {\r\n\tif ( ! url ) {\r\n\t\treturn url;\r\n\t}\r\n\r\n\treturn pipe(\r\n\t\tsafeDecodeURI,\r\n\t\tgetPath,\r\n\t\tdefaultTo( '' ),\r\n\t\tpartialRight( filterURLForDisplay, 24 ),\r\n\t\tremoveTrailingSlash,\r\n\t\taddLeadingSlash\r\n\t)( url );\r\n}\r\n\r\nexport const LinkControlSearchItem = ( {\r\n\titemProps,\r\n\tsuggestion,\r\n\tsearchTerm,\r\n\tonClick,\r\n\tisURL = false,\r\n\tshouldShowType = false,\r\n} ) => {\r\n\tconst info = isURL\r\n\t\t? __( 'Press ENTER to add this link' )\r\n\t\t: getURLForDisplay( suggestion.url );\r\n\r\n\treturn (\r\n\t\t<MenuItem\r\n\t\t\t{ ...itemProps }\r\n\t\t\tinfo={ info }\r\n\t\t\ticonPosition=\"left\"\r\n\t\t\ticon={\r\n\t\t\t\t<SearchItemIcon suggestion={ suggestion } isURL={ isURL } />\r\n\t\t\t}\r\n\t\t\tonClick={ onClick }\r\n\t\t\tshortcut={ shouldShowType && getVisualTypeName( suggestion ) }\r\n\t\t\tclassName=\"block-editor-link-control__search-item\"\r\n\t\t>\r\n\t\t\t<TextHighlight\r\n\t\t\t\t// The component expects a plain text string.\r\n\t\t\t\ttext={ stripHTML( suggestion.title ) }\r\n\t\t\t\thighlight={ searchTerm }\r\n\t\t\t/>\r\n\t\t</MenuItem>\r\n\t);\r\n};\r\n\r\nfunction getVisualTypeName( suggestion ) {\r\n\tif ( suggestion.isFrontPage ) {\r\n\t\treturn 'front page';\r\n\t}\r\n\r\n\tif ( suggestion.isBlogHome ) {\r\n\t\treturn 'blog home';\r\n\t}\r\n\r\n\t// Rename 'post_tag' to 'tag'. Ideally, the API would return the localised CPT or taxonomy label.\r\n\treturn suggestion.type === 'post_tag' ? 'tag' : suggestion.type;\r\n}\r\n\r\nexport default LinkControlSearchItem;\r\n"],"mappings":"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","ignoreList":[]}