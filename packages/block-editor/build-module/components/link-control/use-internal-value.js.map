{"version":3,"names":["useState","fastDeepEqual","useInternalValue","value","internalValue","setInternalValue","previousValue","setPreviousValue","setInternalURLInputValue","nextValue","url","setInternalTextInputValue","title","createSetInternalSettingValueHandler","settingsKeys","settingsUpdates","Object","keys","reduce","acc","key","includes"],"sources":["@wordpress/block-editor/src/components/link-control/use-internal-value.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useState } from '@wordpress/element';\r\n\r\n/**\r\n * External dependencies\r\n */\r\nimport fastDeepEqual from 'fast-deep-equal';\r\n\r\nexport default function useInternalValue( value ) {\r\n\tconst [ internalValue, setInternalValue ] = useState( value || {} );\r\n\tconst [ previousValue, setPreviousValue ] = useState( value );\r\n\r\n\t// If the value prop changes, update the internal state.\r\n\t// See:\r\n\t// - https://github.com/WordPress/gutenberg/pull/51387#issuecomment-1722927384.\r\n\t// - https://react.dev/reference/react/useState#storing-information-from-previous-renders.\r\n\tif ( ! fastDeepEqual( value, previousValue ) ) {\r\n\t\tsetPreviousValue( value );\r\n\t\tsetInternalValue( value );\r\n\t}\r\n\r\n\tconst setInternalURLInputValue = ( nextValue ) => {\r\n\t\tsetInternalValue( {\r\n\t\t\t...internalValue,\r\n\t\t\turl: nextValue,\r\n\t\t} );\r\n\t};\r\n\r\n\tconst setInternalTextInputValue = ( nextValue ) => {\r\n\t\tsetInternalValue( {\r\n\t\t\t...internalValue,\r\n\t\t\ttitle: nextValue,\r\n\t\t} );\r\n\t};\r\n\r\n\tconst createSetInternalSettingValueHandler =\r\n\t\t( settingsKeys ) => ( nextValue ) => {\r\n\t\t\t// Only apply settings values which are defined in the settings prop.\r\n\t\t\tconst settingsUpdates = Object.keys( nextValue ).reduce(\r\n\t\t\t\t( acc, key ) => {\r\n\t\t\t\t\tif ( settingsKeys.includes( key ) ) {\r\n\t\t\t\t\t\tacc[ key ] = nextValue[ key ];\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn acc;\r\n\t\t\t\t},\r\n\t\t\t\t{}\r\n\t\t\t);\r\n\r\n\t\t\tsetInternalValue( {\r\n\t\t\t\t...internalValue,\r\n\t\t\t\t...settingsUpdates,\r\n\t\t\t} );\r\n\t\t};\r\n\r\n\treturn [\r\n\t\tinternalValue,\r\n\t\tsetInternalValue,\r\n\t\tsetInternalURLInputValue,\r\n\t\tsetInternalTextInputValue,\r\n\t\tcreateSetInternalSettingValueHandler,\r\n\t];\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,QAAQ,QAAQ,oBAAoB;;AAE7C;AACA;AACA;AACA,OAAOC,aAAa,MAAM,iBAAiB;AAE3C,eAAe,SAASC,gBAAgBA,CAAEC,KAAK,EAAG;EACjD,MAAM,CAAEC,aAAa,EAAEC,gBAAgB,CAAE,GAAGL,QAAQ,CAAEG,KAAK,IAAI,CAAC,CAAE,CAAC;EACnE,MAAM,CAAEG,aAAa,EAAEC,gBAAgB,CAAE,GAAGP,QAAQ,CAAEG,KAAM,CAAC;;EAE7D;EACA;EACA;EACA;EACA,IAAK,CAAEF,aAAa,CAAEE,KAAK,EAAEG,aAAc,CAAC,EAAG;IAC9CC,gBAAgB,CAAEJ,KAAM,CAAC;IACzBE,gBAAgB,CAAEF,KAAM,CAAC;EAC1B;EAEA,MAAMK,wBAAwB,GAAKC,SAAS,IAAM;IACjDJ,gBAAgB,CAAE;MACjB,GAAGD,aAAa;MAChBM,GAAG,EAAED;IACN,CAAE,CAAC;EACJ,CAAC;EAED,MAAME,yBAAyB,GAAKF,SAAS,IAAM;IAClDJ,gBAAgB,CAAE;MACjB,GAAGD,aAAa;MAChBQ,KAAK,EAAEH;IACR,CAAE,CAAC;EACJ,CAAC;EAED,MAAMI,oCAAoC,GACvCC,YAAY,IAAQL,SAAS,IAAM;IACpC;IACA,MAAMM,eAAe,GAAGC,MAAM,CAACC,IAAI,CAAER,SAAU,CAAC,CAACS,MAAM,CACtD,CAAEC,GAAG,EAAEC,GAAG,KAAM;MACf,IAAKN,YAAY,CAACO,QAAQ,CAAED,GAAI,CAAC,EAAG;QACnCD,GAAG,CAAEC,GAAG,CAAE,GAAGX,SAAS,CAAEW,GAAG,CAAE;MAC9B;MACA,OAAOD,GAAG;IACX,CAAC,EACD,CAAC,CACF,CAAC;IAEDd,gBAAgB,CAAE;MACjB,GAAGD,aAAa;MAChB,GAAGW;IACJ,CAAE,CAAC;EACJ,CAAC;EAEF,OAAO,CACNX,aAAa,EACbC,gBAAgB,EAChBG,wBAAwB,EACxBG,yBAAyB,EACzBE,oCAAoC,CACpC;AACF","ignoreList":[]}