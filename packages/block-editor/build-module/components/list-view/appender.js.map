{"version":3,"names":["useInstanceId","speak","useSelect","forwardRef","useEffect","__","sprintf","store","blockEditorStore","useBlockDisplayTitle","useListViewContext","Inserter","AriaReferencedText","jsx","_jsx","jsxs","_jsxs","Appender","nestingLevel","blockCount","clientId","props","ref","insertedBlock","setInsertedBlock","instanceId","hideInserter","select","getTemplateLock","__unstableGetEditorMode","blockTitle","context","insertedBlockTitle","length","descriptionId","description","className","children","rootClientId","position","isAppender","selectBlockOnInsert","shouldDirectInsert","__experimentalIsQuick","toggleProps","onSelectOrClose","maybeInsertedBlock","id"],"sources":["@wordpress/block-editor/src/components/list-view/appender.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useInstanceId } from '@wordpress/compose';\r\nimport { speak } from '@wordpress/a11y';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { forwardRef, useEffect } from '@wordpress/element';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\nimport useBlockDisplayTitle from '../block-title/use-block-display-title';\r\nimport { useListViewContext } from './context';\r\nimport Inserter from '../inserter';\r\nimport AriaReferencedText from './aria-referenced-text';\r\n\r\nexport const Appender = forwardRef(\r\n\t( { nestingLevel, blockCount, clientId, ...props }, ref ) => {\r\n\t\tconst { insertedBlock, setInsertedBlock } = useListViewContext();\r\n\r\n\t\tconst instanceId = useInstanceId( Appender );\r\n\t\tconst hideInserter = useSelect(\r\n\t\t\t( select ) => {\r\n\t\t\t\tconst { getTemplateLock, __unstableGetEditorMode } =\r\n\t\t\t\t\tselect( blockEditorStore );\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t!! getTemplateLock( clientId ) ||\r\n\t\t\t\t\t__unstableGetEditorMode() === 'zoom-out'\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\t[ clientId ]\r\n\t\t);\r\n\r\n\t\tconst blockTitle = useBlockDisplayTitle( {\r\n\t\t\tclientId,\r\n\t\t\tcontext: 'list-view',\r\n\t\t} );\r\n\r\n\t\tconst insertedBlockTitle = useBlockDisplayTitle( {\r\n\t\t\tclientId: insertedBlock?.clientId,\r\n\t\t\tcontext: 'list-view',\r\n\t\t} );\r\n\r\n\t\tuseEffect( () => {\r\n\t\t\tif ( ! insertedBlockTitle?.length ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tspeak(\r\n\t\t\t\tsprintf(\r\n\t\t\t\t\t// translators: %s: name of block being inserted (i.e. Paragraph, Image, Group etc)\r\n\t\t\t\t\t__( '%s block inserted' ),\r\n\t\t\t\t\tinsertedBlockTitle\r\n\t\t\t\t),\r\n\t\t\t\t'assertive'\r\n\t\t\t);\r\n\t\t}, [ insertedBlockTitle ] );\r\n\r\n\t\tif ( hideInserter ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tconst descriptionId = `list-view-appender__${ instanceId }`;\r\n\t\tconst description = sprintf(\r\n\t\t\t/* translators: 1: The name of the block. 2: The numerical position of the block. 3: The level of nesting for the block. */\r\n\t\t\t__( 'Append to %1$s block at position %2$d, Level %3$d' ),\r\n\t\t\tblockTitle,\r\n\t\t\tblockCount + 1,\r\n\t\t\tnestingLevel\r\n\t\t);\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"list-view-appender\">\r\n\t\t\t\t<Inserter\r\n\t\t\t\t\tref={ ref }\r\n\t\t\t\t\trootClientId={ clientId }\r\n\t\t\t\t\tposition=\"bottom right\"\r\n\t\t\t\t\tisAppender\r\n\t\t\t\t\tselectBlockOnInsert={ false }\r\n\t\t\t\t\tshouldDirectInsert={ false }\r\n\t\t\t\t\t__experimentalIsQuick\r\n\t\t\t\t\t{ ...props }\r\n\t\t\t\t\ttoggleProps={ { 'aria-describedby': descriptionId } }\r\n\t\t\t\t\tonSelectOrClose={ ( maybeInsertedBlock ) => {\r\n\t\t\t\t\t\tif ( maybeInsertedBlock?.clientId ) {\r\n\t\t\t\t\t\t\tsetInsertedBlock( maybeInsertedBlock );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} }\r\n\t\t\t\t/>\r\n\t\t\t\t<AriaReferencedText id={ descriptionId }>\r\n\t\t\t\t\t{ description }\r\n\t\t\t\t</AriaReferencedText>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n);\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,aAAa,QAAQ,oBAAoB;AAClD,SAASC,KAAK,QAAQ,iBAAiB;AACvC,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,UAAU,EAAEC,SAAS,QAAQ,oBAAoB;AAC1D,SAASC,EAAE,EAAEC,OAAO,QAAQ,iBAAiB;;AAE7C;AACA;AACA;AACA,SAASC,KAAK,IAAIC,gBAAgB,QAAQ,aAAa;AACvD,OAAOC,oBAAoB,MAAM,wCAAwC;AACzE,SAASC,kBAAkB,QAAQ,WAAW;AAC9C,OAAOC,QAAQ,MAAM,aAAa;AAClC,OAAOC,kBAAkB,MAAM,wBAAwB;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAExD,OAAO,MAAMC,QAAQ,GAAGd,UAAU,CACjC,CAAE;EAAEe,YAAY;EAAEC,UAAU;EAAEC,QAAQ;EAAE,GAAGC;AAAM,CAAC,EAAEC,GAAG,KAAM;EAC5D,MAAM;IAAEC,aAAa;IAAEC;EAAiB,CAAC,GAAGd,kBAAkB,CAAC,CAAC;EAEhE,MAAMe,UAAU,GAAGzB,aAAa,CAAEiB,QAAS,CAAC;EAC5C,MAAMS,YAAY,GAAGxB,SAAS,CAC3ByB,MAAM,IAAM;IACb,MAAM;MAAEC,eAAe;MAAEC;IAAwB,CAAC,GACjDF,MAAM,CAAEnB,gBAAiB,CAAC;IAE3B,OACC,CAAC,CAAEoB,eAAe,CAAER,QAAS,CAAC,IAC9BS,uBAAuB,CAAC,CAAC,KAAK,UAAU;EAE1C,CAAC,EACD,CAAET,QAAQ,CACX,CAAC;EAED,MAAMU,UAAU,GAAGrB,oBAAoB,CAAE;IACxCW,QAAQ;IACRW,OAAO,EAAE;EACV,CAAE,CAAC;EAEH,MAAMC,kBAAkB,GAAGvB,oBAAoB,CAAE;IAChDW,QAAQ,EAAEG,aAAa,EAAEH,QAAQ;IACjCW,OAAO,EAAE;EACV,CAAE,CAAC;EAEH3B,SAAS,CAAE,MAAM;IAChB,IAAK,CAAE4B,kBAAkB,EAAEC,MAAM,EAAG;MACnC;IACD;IAEAhC,KAAK,CACJK,OAAO;IACN;IACAD,EAAE,CAAE,mBAAoB,CAAC,EACzB2B,kBACD,CAAC,EACD,WACD,CAAC;EACF,CAAC,EAAE,CAAEA,kBAAkB,CAAG,CAAC;EAE3B,IAAKN,YAAY,EAAG;IACnB,OAAO,IAAI;EACZ;EAEA,MAAMQ,aAAa,GAAI,uBAAuBT,UAAY,EAAC;EAC3D,MAAMU,WAAW,GAAG7B,OAAO,EAC1B;EACAD,EAAE,CAAE,mDAAoD,CAAC,EACzDyB,UAAU,EACVX,UAAU,GAAG,CAAC,EACdD,YACD,CAAC;EAED,oBACCF,KAAA;IAAKoB,SAAS,EAAC,oBAAoB;IAAAC,QAAA,gBAClCvB,IAAA,CAACH,QAAQ;MACRW,GAAG,EAAGA,GAAK;MACXgB,YAAY,EAAGlB,QAAU;MACzBmB,QAAQ,EAAC,cAAc;MACvBC,UAAU;MACVC,mBAAmB,EAAG,KAAO;MAC7BC,kBAAkB,EAAG,KAAO;MAC5BC,qBAAqB;MAAA,GAChBtB,KAAK;MACVuB,WAAW,EAAG;QAAE,kBAAkB,EAAEV;MAAc,CAAG;MACrDW,eAAe,EAAKC,kBAAkB,IAAM;QAC3C,IAAKA,kBAAkB,EAAE1B,QAAQ,EAAG;UACnCI,gBAAgB,CAAEsB,kBAAmB,CAAC;QACvC;MACD;IAAG,CACH,CAAC,eACFhC,IAAA,CAACF,kBAAkB;MAACmC,EAAE,EAAGb,aAAe;MAAAG,QAAA,EACrCF;IAAW,CACM,CAAC;EAAA,CACjB,CAAC;AAER,CACD,CAAC","ignoreList":[]}