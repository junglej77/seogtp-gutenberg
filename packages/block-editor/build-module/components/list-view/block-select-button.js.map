{"version":3,"names":["clsx","Button","__experimentalHStack","HStack","__experimentalTruncate","Truncate","forwardRef","Icon","lockSmall","lock","pinSmall","SPACE","ENTER","useSelect","BlockIcon","useBlockDisplayInformation","useBlockDisplayTitle","ListViewExpander","useBlockLock","useListViewImages","store","blockEditorStore","jsx","_jsx","jsxs","_jsxs","ListViewBlockSelectButton","className","block","clientId","onClick","onContextMenu","onMouseDown","onToggleExpanded","tabIndex","onFocus","onDragStart","onDragEnd","draggable","isExpanded","ariaDescribedBy","ref","blockInformation","blockTitle","context","isLocked","isContentOnly","select","getBlockEditingMode","shouldShowLockIcon","isSticky","positionType","images","onDragStartHandler","event","dataTransfer","clearData","onKeyDown","keyCode","__next40pxDefaultSize","href","children","icon","showColors","alignment","justify","spacing","ellipsizeMode","anchor","length","map","image","index","style","backgroundImage","url","zIndex"],"sources":["@wordpress/block-editor/src/components/list-view/block-select-button.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tButton,\r\n\t__experimentalHStack as HStack,\r\n\t__experimentalTruncate as Truncate,\r\n} from '@wordpress/components';\r\nimport { forwardRef } from '@wordpress/element';\r\nimport { Icon, lockSmall as lock, pinSmall } from '@wordpress/icons';\r\nimport { SPACE, ENTER } from '@wordpress/keycodes';\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockIcon from '../block-icon';\r\nimport useBlockDisplayInformation from '../use-block-display-information';\r\nimport useBlockDisplayTitle from '../block-title/use-block-display-title';\r\nimport ListViewExpander from './expander';\r\nimport { useBlockLock } from '../block-lock';\r\nimport useListViewImages from './use-list-view-images';\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nfunction ListViewBlockSelectButton(\r\n\t{\r\n\t\tclassName,\r\n\t\tblock: { clientId },\r\n\t\tonClick,\r\n\t\tonContextMenu,\r\n\t\tonMouseDown,\r\n\t\tonToggleExpanded,\r\n\t\ttabIndex,\r\n\t\tonFocus,\r\n\t\tonDragStart,\r\n\t\tonDragEnd,\r\n\t\tdraggable,\r\n\t\tisExpanded,\r\n\t\tariaDescribedBy,\r\n\t},\r\n\tref\r\n) {\r\n\tconst blockInformation = useBlockDisplayInformation( clientId );\r\n\tconst blockTitle = useBlockDisplayTitle( {\r\n\t\tclientId,\r\n\t\tcontext: 'list-view',\r\n\t} );\r\n\tconst { isLocked } = useBlockLock( clientId );\r\n\tconst { isContentOnly } = useSelect(\r\n\t\t( select ) => ( {\r\n\t\t\tisContentOnly:\r\n\t\t\t\tselect( blockEditorStore ).getBlockEditingMode( clientId ) ===\r\n\t\t\t\t'contentOnly',\r\n\t\t} ),\r\n\t\t[ clientId ]\r\n\t);\r\n\tconst shouldShowLockIcon = isLocked && ! isContentOnly;\r\n\tconst isSticky = blockInformation?.positionType === 'sticky';\r\n\tconst images = useListViewImages( { clientId, isExpanded } );\r\n\r\n\t// The `href` attribute triggers the browser's native HTML drag operations.\r\n\t// When the link is dragged, the element's outerHTML is set in DataTransfer object as text/html.\r\n\t// We need to clear any HTML drag data to prevent `pasteHandler` from firing\r\n\t// inside the `useOnBlockDrop` hook.\r\n\tconst onDragStartHandler = ( event ) => {\r\n\t\tevent.dataTransfer.clearData();\r\n\t\tonDragStart?.( event );\r\n\t};\r\n\r\n\t/**\r\n\t * @param {KeyboardEvent} event\r\n\t */\r\n\tfunction onKeyDown( event ) {\r\n\t\tif ( event.keyCode === ENTER || event.keyCode === SPACE ) {\r\n\t\t\tonClick( event );\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Button\r\n\t\t\t// TODO: Switch to `true` (40px size) if possible\r\n\t\t\t__next40pxDefaultSize={ false }\r\n\t\t\tclassName={ clsx(\r\n\t\t\t\t'block-editor-list-view-block-select-button',\r\n\t\t\t\tclassName\r\n\t\t\t) }\r\n\t\t\tonClick={ onClick }\r\n\t\t\tonContextMenu={ onContextMenu }\r\n\t\t\tonKeyDown={ onKeyDown }\r\n\t\t\tonMouseDown={ onMouseDown }\r\n\t\t\tref={ ref }\r\n\t\t\ttabIndex={ tabIndex }\r\n\t\t\tonFocus={ onFocus }\r\n\t\t\tonDragStart={ onDragStartHandler }\r\n\t\t\tonDragEnd={ onDragEnd }\r\n\t\t\tdraggable={ draggable }\r\n\t\t\thref={ `#block-${ clientId }` }\r\n\t\t\taria-describedby={ ariaDescribedBy }\r\n\t\t\taria-expanded={ isExpanded }\r\n\t\t>\r\n\t\t\t<ListViewExpander onClick={ onToggleExpanded } />\r\n\t\t\t<BlockIcon\r\n\t\t\t\ticon={ blockInformation?.icon }\r\n\t\t\t\tshowColors\r\n\t\t\t\tcontext=\"list-view\"\r\n\t\t\t/>\r\n\t\t\t<HStack\r\n\t\t\t\talignment=\"center\"\r\n\t\t\t\tclassName=\"block-editor-list-view-block-select-button__label-wrapper\"\r\n\t\t\t\tjustify=\"flex-start\"\r\n\t\t\t\tspacing={ 1 }\r\n\t\t\t>\r\n\t\t\t\t<span className=\"block-editor-list-view-block-select-button__title\">\r\n\t\t\t\t\t<Truncate ellipsizeMode=\"auto\">{ blockTitle }</Truncate>\r\n\t\t\t\t</span>\r\n\t\t\t\t{ blockInformation?.anchor && (\r\n\t\t\t\t\t<span className=\"block-editor-list-view-block-select-button__anchor-wrapper\">\r\n\t\t\t\t\t\t<Truncate\r\n\t\t\t\t\t\t\tclassName=\"block-editor-list-view-block-select-button__anchor\"\r\n\t\t\t\t\t\t\tellipsizeMode=\"auto\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{ blockInformation.anchor }\r\n\t\t\t\t\t\t</Truncate>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t) }\r\n\t\t\t\t{ isSticky && (\r\n\t\t\t\t\t<span className=\"block-editor-list-view-block-select-button__sticky\">\r\n\t\t\t\t\t\t<Icon icon={ pinSmall } />\r\n\t\t\t\t\t</span>\r\n\t\t\t\t) }\r\n\t\t\t\t{ images.length ? (\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tclassName=\"block-editor-list-view-block-select-button__images\"\r\n\t\t\t\t\t\taria-hidden\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ images.map( ( image, index ) => (\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName=\"block-editor-list-view-block-select-button__image\"\r\n\t\t\t\t\t\t\t\tkey={ image.clientId }\r\n\t\t\t\t\t\t\t\tstyle={ {\r\n\t\t\t\t\t\t\t\t\tbackgroundImage: `url(${ image.url })`,\r\n\t\t\t\t\t\t\t\t\tzIndex: images.length - index, // Ensure the first image is on top, and subsequent images are behind.\r\n\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) ) }\r\n\t\t\t\t\t</span>\r\n\t\t\t\t) : null }\r\n\t\t\t\t{ shouldShowLockIcon && (\r\n\t\t\t\t\t<span className=\"block-editor-list-view-block-select-button__lock\">\r\n\t\t\t\t\t\t<Icon icon={ lock } />\r\n\t\t\t\t\t</span>\r\n\t\t\t\t) }\r\n\t\t\t</HStack>\r\n\t\t</Button>\r\n\t);\r\n}\r\n\r\nexport default forwardRef( ListViewBlockSelectButton );\r\n"],"mappings":"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","ignoreList":[]}