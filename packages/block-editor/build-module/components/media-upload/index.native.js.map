{"version":3,"names":["Platform","Component","React","__","BottomSheet","PanelBody","Picker","TextControl","getOtherMediaOptions","requestMediaPicker","mediaSources","capturePhoto","captureVideo","image","wordpress","mobile","globe","store","blockEditorStore","compose","withSelect","MEDIA_TYPE_IMAGE","MEDIA_TYPE_VIDEO","MEDIA_TYPE_AUDIO","MEDIA_TYPE_ANY","OPTION_TAKE_VIDEO","OPTION_TAKE_PHOTO","OPTION_INSERT_FROM_URL","OPTION_WORDPRESS_MEDIA_LIBRARY","styles","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","URL_MEDIA_SOURCE","PICKER_OPENING_DELAY","MediaUpload","pickerTimeout","constructor","props","onPickerPresent","bind","onPickerSelect","getAllSources","state","url","showURLInput","otherMediaOptions","componentDidMount","allowedTypes","autoOpen","otherMediaOptionsWithIcons","map","option","requiresModal","types","id","value","setState","componentWillUnmount","clearTimeout","onSelectURL","cameraImageSource","deviceCamera","label","icon","cameraVideoSource","deviceLibrarySource","deviceLibrary","siteLibrarySource","siteMediaLibrary","mediaLibrary","urlSource","internalSources","concat","getMediaOptionsItems","__experimentalOnlyMediaLibrary","isAudioBlockMediaUploadEnabled","filter","source","every","allowedType","includes","some","getChooseFromDeviceIcon","isIOS","OS","picker","setTimeout","presentPicker","onSelect","multiple","mediaSource","shift","type","media","render","isReplacingMedia","isOneType","length","isImage","isVideo","isAudio","isAnyType","isImageOrVideo","pickerTitle","getMediaOptions","title","hideCancelButton","ref","instance","options","onChange","testID","children","URLInput","isVisible","onClose","open","hideHeader","style","__next40pxDefaultSize","autoFocus","autoCapitalize","autoCorrect","autoComplete","keyboardType","placeholder","select","capabilities","getSettings"],"sources":["@wordpress/block-editor/src/components/media-upload/index.native.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport { Platform } from 'react-native';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { Component, React } from '@wordpress/element';\r\nimport { __ } from '@wordpress/i18n';\r\nimport {\r\n\tBottomSheet,\r\n\tPanelBody,\r\n\tPicker,\r\n\tTextControl,\r\n} from '@wordpress/components';\r\nimport {\r\n\tgetOtherMediaOptions,\r\n\trequestMediaPicker,\r\n\tmediaSources,\r\n} from '@wordpress/react-native-bridge';\r\nimport {\r\n\tcapturePhoto,\r\n\tcaptureVideo,\r\n\timage,\r\n\twordpress,\r\n\tmobile,\r\n\tglobe,\r\n} from '@wordpress/icons';\r\nimport { store as blockEditorStore } from '@wordpress/block-editor';\r\nimport { compose } from '@wordpress/compose';\r\nimport { withSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport {\r\n\tMEDIA_TYPE_IMAGE,\r\n\tMEDIA_TYPE_VIDEO,\r\n\tMEDIA_TYPE_AUDIO,\r\n\tMEDIA_TYPE_ANY,\r\n\tOPTION_TAKE_VIDEO,\r\n\tOPTION_TAKE_PHOTO,\r\n\tOPTION_INSERT_FROM_URL,\r\n\tOPTION_WORDPRESS_MEDIA_LIBRARY,\r\n} from './constants';\r\nimport styles from './style.scss';\r\n\r\nconst URL_MEDIA_SOURCE = 'URL';\r\n\r\nconst PICKER_OPENING_DELAY = 200;\r\n\r\nexport class MediaUpload extends Component {\r\n\tpickerTimeout;\r\n\r\n\tconstructor( props ) {\r\n\t\tsuper( props );\r\n\t\tthis.onPickerPresent = this.onPickerPresent.bind( this );\r\n\t\tthis.onPickerSelect = this.onPickerSelect.bind( this );\r\n\t\tthis.getAllSources = this.getAllSources.bind( this );\r\n\t\tthis.state = {\r\n\t\t\turl: '',\r\n\t\t\tshowURLInput: false,\r\n\t\t\totherMediaOptions: [],\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst { allowedTypes = [], autoOpen } = this.props;\r\n\t\tgetOtherMediaOptions( allowedTypes, ( otherMediaOptions ) => {\r\n\t\t\tconst otherMediaOptionsWithIcons = otherMediaOptions.map(\r\n\t\t\t\t( option ) => {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t...option,\r\n\t\t\t\t\t\trequiresModal: true,\r\n\t\t\t\t\t\ttypes: allowedTypes,\r\n\t\t\t\t\t\tid: option.value,\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tthis.setState( { otherMediaOptions: otherMediaOptionsWithIcons } );\r\n\t\t} );\r\n\r\n\t\tif ( autoOpen ) {\r\n\t\t\tthis.onPickerPresent();\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tclearTimeout( this.pickerTimeout );\r\n\t}\r\n\r\n\tgetAllSources() {\r\n\t\tconst { onSelectURL } = this.props;\r\n\r\n\t\tconst cameraImageSource = {\r\n\t\t\tid: mediaSources.deviceCamera, // ID is the value sent to native.\r\n\t\t\tvalue: mediaSources.deviceCamera + '-IMAGE', // This is needed to diferenciate image-camera from video-camera sources.\r\n\t\t\tlabel: OPTION_TAKE_PHOTO,\r\n\t\t\trequiresModal: true,\r\n\t\t\ttypes: [ MEDIA_TYPE_IMAGE ],\r\n\t\t\ticon: capturePhoto,\r\n\t\t};\r\n\r\n\t\tconst cameraVideoSource = {\r\n\t\t\tid: mediaSources.deviceCamera,\r\n\t\t\tvalue: mediaSources.deviceCamera,\r\n\t\t\tlabel: OPTION_TAKE_VIDEO,\r\n\t\t\trequiresModal: true,\r\n\t\t\ttypes: [ MEDIA_TYPE_VIDEO ],\r\n\t\t\ticon: captureVideo,\r\n\t\t};\r\n\r\n\t\tconst deviceLibrarySource = {\r\n\t\t\tid: mediaSources.deviceLibrary,\r\n\t\t\tvalue: mediaSources.deviceLibrary,\r\n\t\t\tlabel: __( 'Choose from device' ),\r\n\t\t\trequiresModal: true,\r\n\t\t\ttypes: [ MEDIA_TYPE_IMAGE, MEDIA_TYPE_VIDEO ],\r\n\t\t\ticon: image,\r\n\t\t};\r\n\r\n\t\tconst siteLibrarySource = {\r\n\t\t\tid: mediaSources.siteMediaLibrary,\r\n\t\t\tvalue: mediaSources.siteMediaLibrary,\r\n\t\t\tlabel: OPTION_WORDPRESS_MEDIA_LIBRARY,\r\n\t\t\trequiresModal: true,\r\n\t\t\ttypes: [\r\n\t\t\t\tMEDIA_TYPE_IMAGE,\r\n\t\t\t\tMEDIA_TYPE_VIDEO,\r\n\t\t\t\tMEDIA_TYPE_AUDIO,\r\n\t\t\t\tMEDIA_TYPE_ANY,\r\n\t\t\t],\r\n\t\t\ticon: wordpress,\r\n\t\t\tmediaLibrary: true,\r\n\t\t};\r\n\r\n\t\tconst urlSource = {\r\n\t\t\tid: URL_MEDIA_SOURCE,\r\n\t\t\tvalue: URL_MEDIA_SOURCE,\r\n\t\t\tlabel: OPTION_INSERT_FROM_URL,\r\n\t\t\ttypes: [ MEDIA_TYPE_AUDIO, MEDIA_TYPE_IMAGE, MEDIA_TYPE_VIDEO ],\r\n\t\t\ticon: globe,\r\n\t\t};\r\n\r\n\t\t// Only include `urlSource` option if `onSelectURL` prop is present, in order to match the web behavior.\r\n\t\tconst internalSources = [\r\n\t\t\tdeviceLibrarySource,\r\n\t\t\tcameraImageSource,\r\n\t\t\tcameraVideoSource,\r\n\t\t\tsiteLibrarySource,\r\n\t\t\t...( onSelectURL ? [ urlSource ] : [] ),\r\n\t\t];\r\n\r\n\t\treturn internalSources.concat( this.state.otherMediaOptions );\r\n\t}\r\n\r\n\tgetMediaOptionsItems() {\r\n\t\tconst {\r\n\t\t\tallowedTypes = [],\r\n\t\t\t__experimentalOnlyMediaLibrary,\r\n\t\t\tisAudioBlockMediaUploadEnabled,\r\n\t\t} = this.props;\r\n\r\n\t\treturn this.getAllSources()\r\n\t\t\t.filter( ( source ) => {\r\n\t\t\t\tif ( __experimentalOnlyMediaLibrary ) {\r\n\t\t\t\t\treturn source.mediaLibrary;\r\n\t\t\t\t} else if (\r\n\t\t\t\t\tallowedTypes.every(\r\n\t\t\t\t\t\t( allowedType ) =>\r\n\t\t\t\t\t\t\tallowedType === MEDIA_TYPE_AUDIO &&\r\n\t\t\t\t\t\t\tsource.types.includes( allowedType )\r\n\t\t\t\t\t) &&\r\n\t\t\t\t\tsource.id !== URL_MEDIA_SOURCE\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn isAudioBlockMediaUploadEnabled === true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn allowedTypes.some( ( allowedType ) =>\r\n\t\t\t\t\tsource.types.includes( allowedType )\r\n\t\t\t\t);\r\n\t\t\t} )\r\n\t\t\t.map( ( source ) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...source,\r\n\t\t\t\t\ticon: source.icon || this.getChooseFromDeviceIcon(),\r\n\t\t\t\t};\r\n\t\t\t} );\r\n\t}\r\n\r\n\tgetChooseFromDeviceIcon() {\r\n\t\treturn mobile;\r\n\t}\r\n\r\n\tonPickerPresent() {\r\n\t\tconst { autoOpen } = this.props;\r\n\t\tconst isIOS = Platform.OS === 'ios';\r\n\r\n\t\tif ( this.picker ) {\r\n\t\t\t// the delay below is required because on iOS this action sheet gets dismissed by the close event of the Inserter\r\n\t\t\t// so this delay allows the Inserter to be closed fully before presenting action sheet.\r\n\t\t\tif ( autoOpen && isIOS ) {\r\n\t\t\t\tthis.pickerTimeout = setTimeout(\r\n\t\t\t\t\t() => this.picker.presentPicker(),\r\n\t\t\t\t\tPICKER_OPENING_DELAY\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tthis.picker.presentPicker();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonPickerSelect( value ) {\r\n\t\tconst { allowedTypes = [], onSelect, multiple = false } = this.props;\r\n\r\n\t\tif ( value === URL_MEDIA_SOURCE ) {\r\n\t\t\tthis.setState( { showURLInput: true } );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst mediaSource = this.getAllSources()\r\n\t\t\t.filter( ( source ) => source.value === value )\r\n\t\t\t.shift();\r\n\t\tconst types = allowedTypes.filter( ( type ) =>\r\n\t\t\tmediaSource.types.includes( type )\r\n\t\t);\r\n\r\n\t\trequestMediaPicker( mediaSource.id, types, multiple, ( media ) => {\r\n\t\t\tif ( ( multiple && media ) || ( media && media.id ) ) {\r\n\t\t\t\tonSelect( media );\r\n\t\t\t}\r\n\t\t} );\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { allowedTypes = [], isReplacingMedia, multiple } = this.props;\r\n\t\tconst isOneType = allowedTypes.length === 1;\r\n\t\tconst isImage = isOneType && allowedTypes.includes( MEDIA_TYPE_IMAGE );\r\n\t\tconst isVideo = isOneType && allowedTypes.includes( MEDIA_TYPE_VIDEO );\r\n\t\tconst isAudio = isOneType && allowedTypes.includes( MEDIA_TYPE_AUDIO );\r\n\t\tconst isAnyType = isOneType && allowedTypes.includes( MEDIA_TYPE_ANY );\r\n\r\n\t\tconst isImageOrVideo =\r\n\t\t\tallowedTypes.length === 2 &&\r\n\t\t\tallowedTypes.includes( MEDIA_TYPE_IMAGE ) &&\r\n\t\t\tallowedTypes.includes( MEDIA_TYPE_VIDEO );\r\n\r\n\t\tlet pickerTitle;\r\n\t\tif ( isImage ) {\r\n\t\t\tif ( isReplacingMedia ) {\r\n\t\t\t\tpickerTitle = __( 'Replace image' );\r\n\t\t\t} else {\r\n\t\t\t\tpickerTitle = multiple\r\n\t\t\t\t\t? __( 'Choose images' )\r\n\t\t\t\t\t: __( 'Choose image' );\r\n\t\t\t}\r\n\t\t} else if ( isVideo ) {\r\n\t\t\tif ( isReplacingMedia ) {\r\n\t\t\t\tpickerTitle = __( 'Replace video' );\r\n\t\t\t} else {\r\n\t\t\t\tpickerTitle = __( 'Choose video' );\r\n\t\t\t}\r\n\t\t} else if ( isImageOrVideo ) {\r\n\t\t\tif ( isReplacingMedia ) {\r\n\t\t\t\tpickerTitle = __( 'Replace image or video' );\r\n\t\t\t} else {\r\n\t\t\t\tpickerTitle = __( 'Choose image or video' );\r\n\t\t\t}\r\n\t\t} else if ( isAudio ) {\r\n\t\t\tif ( isReplacingMedia ) {\r\n\t\t\t\tpickerTitle = __( 'Replace audio' );\r\n\t\t\t} else {\r\n\t\t\t\tpickerTitle = __( 'Choose audio' );\r\n\t\t\t}\r\n\t\t} else if ( isAnyType ) {\r\n\t\t\tpickerTitle = __( 'Choose file' );\r\n\t\t\tif ( isReplacingMedia ) {\r\n\t\t\t\tpickerTitle = __( 'Replace file' );\r\n\t\t\t} else {\r\n\t\t\t\tpickerTitle = __( 'Choose file' );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst getMediaOptions = () => (\r\n\t\t\t<Picker\r\n\t\t\t\ttitle={ pickerTitle }\r\n\t\t\t\thideCancelButton\r\n\t\t\t\tref={ ( instance ) => ( this.picker = instance ) }\r\n\t\t\t\toptions={ this.getMediaOptionsItems() }\r\n\t\t\t\tonChange={ this.onPickerSelect }\r\n\t\t\t\ttestID=\"media-options-picker\"\r\n\t\t\t/>\r\n\t\t);\r\n\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<URLInput\r\n\t\t\t\t\tisVisible={ this.state.showURLInput }\r\n\t\t\t\t\tonClose={ () => {\r\n\t\t\t\t\t\tif ( this.state.url !== '' ) {\r\n\t\t\t\t\t\t\tthis.props.onSelectURL( this.state.url );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.setState( { showURLInput: false, url: '' } );\r\n\t\t\t\t\t} }\r\n\t\t\t\t\tonChange={ ( url ) => {\r\n\t\t\t\t\t\tthis.setState( { url } );\r\n\t\t\t\t\t} }\r\n\t\t\t\t\tvalue={ this.state.url }\r\n\t\t\t\t/>\r\n\t\t\t\t{ this.props.render( {\r\n\t\t\t\t\topen: this.onPickerPresent,\r\n\t\t\t\t\tgetMediaOptions,\r\n\t\t\t\t} ) }\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction URLInput( props ) {\r\n\treturn (\r\n\t\t<BottomSheet\r\n\t\t\thideHeader\r\n\t\t\tisVisible={ props.isVisible }\r\n\t\t\tonClose={ props.onClose }\r\n\t\t>\r\n\t\t\t<PanelBody style={ styles[ 'media-upload__link-input' ] }>\r\n\t\t\t\t<TextControl\r\n\t\t\t\t\t// TODO: Switch to `true` (40px size) if possible\r\n\t\t\t\t\t__next40pxDefaultSize={ false }\r\n\t\t\t\t\t// eslint-disable-next-line jsx-a11y/no-autofocus\r\n\t\t\t\t\tautoFocus\r\n\t\t\t\t\tautoCapitalize=\"none\"\r\n\t\t\t\t\tautoCorrect={ false }\r\n\t\t\t\t\tautoComplete={ Platform.isIOS ? 'url' : 'off' }\r\n\t\t\t\t\tkeyboardType=\"url\"\r\n\t\t\t\t\tlabel={ OPTION_INSERT_FROM_URL }\r\n\t\t\t\t\tonChange={ props.onChange }\r\n\t\t\t\t\tplaceholder={ __( 'Type a URL' ) }\r\n\t\t\t\t\tvalue={ props.value }\r\n\t\t\t\t/>\r\n\t\t\t</PanelBody>\r\n\t\t</BottomSheet>\r\n\t);\r\n}\r\n\r\nexport default compose( [\r\n\twithSelect( ( select ) => {\r\n\t\tconst { capabilities } = select( blockEditorStore ).getSettings();\r\n\t\treturn {\r\n\t\t\tisAudioBlockMediaUploadEnabled:\r\n\t\t\t\tcapabilities?.isAudioBlockMediaUploadEnabled === true,\r\n\t\t};\r\n\t} ),\r\n] )( MediaUpload );\r\n"],"mappings":"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","ignoreList":[]}