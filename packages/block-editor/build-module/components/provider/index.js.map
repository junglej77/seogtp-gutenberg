{"version":3,"names":["useDispatch","useEffect","SlotFillProvider","withRegistryProvider","useBlockSync","store","blockEditorStore","BlockRefsProvider","unlock","KeyboardShortcuts","jsx","_jsx","jsxs","_jsxs","ExperimentalBlockEditorProvider","props","children","settings","stripExperimentalSettings","__experimentalUpdateSettings","__internalIsInitialized","reset","passthrough","__unstableIsPreviewMode","Register","BlockEditorProvider"],"sources":["@wordpress/block-editor/src/components/provider/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useDispatch } from '@wordpress/data';\r\nimport { useEffect } from '@wordpress/element';\r\nimport { SlotFillProvider } from '@wordpress/components';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport withRegistryProvider from './with-registry-provider';\r\nimport useBlockSync from './use-block-sync';\r\nimport { store as blockEditorStore } from '../../store';\r\nimport { BlockRefsProvider } from './block-refs-provider';\r\nimport { unlock } from '../../lock-unlock';\r\nimport KeyboardShortcuts from '../keyboard-shortcuts';\r\n\r\n/** @typedef {import('@wordpress/data').WPDataRegistry} WPDataRegistry */\r\n\r\nexport const ExperimentalBlockEditorProvider = withRegistryProvider(\r\n\t( props ) => {\r\n\t\tconst { children, settings, stripExperimentalSettings = false } = props;\r\n\r\n\t\tconst { __experimentalUpdateSettings } = unlock(\r\n\t\t\tuseDispatch( blockEditorStore )\r\n\t\t);\r\n\t\tuseEffect( () => {\r\n\t\t\t__experimentalUpdateSettings(\r\n\t\t\t\t{\r\n\t\t\t\t\t...settings,\r\n\t\t\t\t\t__internalIsInitialized: true,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tstripExperimentalSettings,\r\n\t\t\t\t\treset: true,\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}, [\r\n\t\t\tsettings,\r\n\t\t\tstripExperimentalSettings,\r\n\t\t\t__experimentalUpdateSettings,\r\n\t\t] );\r\n\r\n\t\t// Syncs the entity provider with changes in the block-editor store.\r\n\t\tuseBlockSync( props );\r\n\r\n\t\treturn (\r\n\t\t\t<SlotFillProvider passthrough>\r\n\t\t\t\t{ ! settings?.__unstableIsPreviewMode && (\r\n\t\t\t\t\t<KeyboardShortcuts.Register />\r\n\t\t\t\t) }\r\n\t\t\t\t<BlockRefsProvider>{ children }</BlockRefsProvider>\r\n\t\t\t</SlotFillProvider>\r\n\t\t);\r\n\t}\r\n);\r\n\r\nexport const BlockEditorProvider = ( props ) => {\r\n\treturn (\r\n\t\t<ExperimentalBlockEditorProvider { ...props } stripExperimentalSettings>\r\n\t\t\t{ props.children }\r\n\t\t</ExperimentalBlockEditorProvider>\r\n\t);\r\n};\r\n\r\nexport default BlockEditorProvider;\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,WAAW,QAAQ,iBAAiB;AAC7C,SAASC,SAAS,QAAQ,oBAAoB;AAC9C,SAASC,gBAAgB,QAAQ,uBAAuB;;AAExD;AACA;AACA;AACA,OAAOC,oBAAoB,MAAM,0BAA0B;AAC3D,OAAOC,YAAY,MAAM,kBAAkB;AAC3C,SAASC,KAAK,IAAIC,gBAAgB,QAAQ,aAAa;AACvD,SAASC,iBAAiB,QAAQ,uBAAuB;AACzD,SAASC,MAAM,QAAQ,mBAAmB;AAC1C,OAAOC,iBAAiB,MAAM,uBAAuB;;AAErD;AAAA,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAEA,OAAO,MAAMC,+BAA+B,GAAGX,oBAAoB,CAChEY,KAAK,IAAM;EACZ,MAAM;IAAEC,QAAQ;IAAEC,QAAQ;IAAEC,yBAAyB,GAAG;EAAM,CAAC,GAAGH,KAAK;EAEvE,MAAM;IAAEI;EAA6B,CAAC,GAAGX,MAAM,CAC9CR,WAAW,CAAEM,gBAAiB,CAC/B,CAAC;EACDL,SAAS,CAAE,MAAM;IAChBkB,4BAA4B,CAC3B;MACC,GAAGF,QAAQ;MACXG,uBAAuB,EAAE;IAC1B,CAAC,EACD;MACCF,yBAAyB;MACzBG,KAAK,EAAE;IACR,CACD,CAAC;EACF,CAAC,EAAE,CACFJ,QAAQ,EACRC,yBAAyB,EACzBC,4BAA4B,CAC3B,CAAC;;EAEH;EACAf,YAAY,CAAEW,KAAM,CAAC;EAErB,oBACCF,KAAA,CAACX,gBAAgB;IAACoB,WAAW;IAAAN,QAAA,GAC1B,CAAEC,QAAQ,EAAEM,uBAAuB,iBACpCZ,IAAA,CAACF,iBAAiB,CAACe,QAAQ,IAAE,CAC7B,eACDb,IAAA,CAACJ,iBAAiB;MAAAS,QAAA,EAAGA;IAAQ,CAAqB,CAAC;EAAA,CAClC,CAAC;AAErB,CACD,CAAC;AAED,OAAO,MAAMS,mBAAmB,GAAKV,KAAK,IAAM;EAC/C,oBACCJ,IAAA,CAACG,+BAA+B;IAAA,GAAMC,KAAK;IAAGG,yBAAyB;IAAAF,QAAA,EACpED,KAAK,CAACC;EAAQ,CACgB,CAAC;AAEpC,CAAC;AAED,eAAeS,mBAAmB","ignoreList":[]}