{"version":3,"names":["RawHTML","StrictMode","Fragment","getSaveElement","__unstableGetBlockProps","getBlockProps","RichTextData","InnerBlocks","Content","jsx","_jsx","addValuesForElement","element","values","innerBlocks","undefined","Array","isArray","addValuesForElements","type","props","children","addValuesForBlocks","push","value","el","prototype","render","args","i","length","blocks","name","attributes","saveElement","getRichTextValues","skipFilters","map","fromHTMLString"],"sources":["@wordpress/block-editor/src/components/rich-text/get-rich-text-values.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { RawHTML, StrictMode, Fragment } from '@wordpress/element';\r\nimport {\r\n\tgetSaveElement,\r\n\t__unstableGetBlockProps as getBlockProps,\r\n} from '@wordpress/blocks';\r\nimport { RichTextData } from '@wordpress/rich-text';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport InnerBlocks from '../inner-blocks';\r\nimport { Content } from './content';\r\n\r\n/*\r\n * This function is similar to `@wordpress/element`'s `renderToString` function,\r\n * except that it does not render the elements to a string, but instead collects\r\n * the values of all rich text `Content` elements.\r\n */\r\nfunction addValuesForElement( element, values, innerBlocks ) {\r\n\tif ( null === element || undefined === element || false === element ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tif ( Array.isArray( element ) ) {\r\n\t\treturn addValuesForElements( element, values, innerBlocks );\r\n\t}\r\n\r\n\tswitch ( typeof element ) {\r\n\t\tcase 'string':\r\n\t\tcase 'number':\r\n\t\t\treturn;\r\n\t}\r\n\r\n\tconst { type, props } = element;\r\n\r\n\tswitch ( type ) {\r\n\t\tcase StrictMode:\r\n\t\tcase Fragment:\r\n\t\t\treturn addValuesForElements( props.children, values, innerBlocks );\r\n\t\tcase RawHTML:\r\n\t\t\treturn;\r\n\t\tcase InnerBlocks.Content:\r\n\t\t\treturn addValuesForBlocks( values, innerBlocks );\r\n\t\tcase Content:\r\n\t\t\tvalues.push( props.value );\r\n\t\t\treturn;\r\n\t}\r\n\r\n\tswitch ( typeof type ) {\r\n\t\tcase 'string':\r\n\t\t\tif ( typeof props.children !== 'undefined' ) {\r\n\t\t\t\treturn addValuesForElements(\r\n\t\t\t\t\tprops.children,\r\n\t\t\t\t\tvalues,\r\n\t\t\t\t\tinnerBlocks\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\tcase 'function':\r\n\t\t\tconst el =\r\n\t\t\t\ttype.prototype && typeof type.prototype.render === 'function'\r\n\t\t\t\t\t? new type( props ).render()\r\n\t\t\t\t\t: type( props );\r\n\t\t\treturn addValuesForElement( el, values, innerBlocks );\r\n\t}\r\n}\r\n\r\nfunction addValuesForElements( children, ...args ) {\r\n\tchildren = Array.isArray( children ) ? children : [ children ];\r\n\r\n\tfor ( let i = 0; i < children.length; i++ ) {\r\n\t\taddValuesForElement( children[ i ], ...args );\r\n\t}\r\n}\r\n\r\nfunction addValuesForBlocks( values, blocks ) {\r\n\tfor ( let i = 0; i < blocks.length; i++ ) {\r\n\t\tconst { name, attributes, innerBlocks } = blocks[ i ];\r\n\t\tconst saveElement = getSaveElement(\r\n\t\t\tname,\r\n\t\t\tattributes,\r\n\t\t\t// Instead of letting save elements use `useInnerBlocksProps.save`,\r\n\t\t\t// force them to use InnerBlocks.Content instead so we can intercept\r\n\t\t\t// a single component.\r\n\t\t\t<InnerBlocks.Content />\r\n\t\t);\r\n\t\taddValuesForElement( saveElement, values, innerBlocks );\r\n\t}\r\n}\r\n\r\nexport function getRichTextValues( blocks = [] ) {\r\n\tgetBlockProps.skipFilters = true;\r\n\tconst values = [];\r\n\taddValuesForBlocks( values, blocks );\r\n\tgetBlockProps.skipFilters = false;\r\n\treturn values.map( ( value ) =>\r\n\t\tvalue instanceof RichTextData\r\n\t\t\t? value\r\n\t\t\t: RichTextData.fromHTMLString( value )\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}