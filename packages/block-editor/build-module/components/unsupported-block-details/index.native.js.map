{"version":3,"names":["View","Text","BottomSheet","Icon","TextControl","requestUnsupportedBlockFallback","sendActionButtonPressedAction","actionButtons","help","__","usePreferredColorSchemeStyle","getBlockType","useCallback","useState","applyFilters","styles","useUnsupportedBlockEditor","jsx","_jsx","jsxs","_jsxs","EMPTY_ARRAY","UnsupportedBlockDetails","clientId","showSheet","onCloseSheet","customBlockTitle","icon","title","description","actionButtonLabel","customActions","sendFallbackMessage","setSendFallbackMessage","sendButtonPressMessage","setSendButtonPressMessage","blockName","blockContent","isUnsupportedBlockEditorSupported","canEnableUnsupportedBlockEditor","isEditableInUnsupportedBlockEditor","textStyle","titleStyle","descriptionStyle","iconStyle","actionButtonStyle","blockTitle","requestFallback","descriptionWithNotes","webEditorDefaultLabel","canUseWebEditor","actions","label","onPress","filter","Boolean","isVisible","hideHeader","onClose","onModalHide","timeout","setTimeout","missingBlockAlertActionButton","children","style","color","size","map","index","separatorType","labelStyle"],"sources":["@wordpress/block-editor/src/components/unsupported-block-details/index.native.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport { View, Text } from 'react-native';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { BottomSheet, Icon, TextControl } from '@wordpress/components';\r\nimport {\r\n\trequestUnsupportedBlockFallback,\r\n\tsendActionButtonPressedAction,\r\n\tactionButtons,\r\n} from '@wordpress/react-native-bridge';\r\nimport { help } from '@wordpress/icons';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { usePreferredColorSchemeStyle } from '@wordpress/compose';\r\nimport { getBlockType } from '@wordpress/blocks';\r\nimport { useCallback, useState } from '@wordpress/element';\r\nimport { applyFilters } from '@wordpress/hooks';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport styles from './style.scss';\r\nimport useUnsupportedBlockEditor from '../use-unsupported-block-editor';\r\n\r\nconst EMPTY_ARRAY = [];\r\n\r\nconst UnsupportedBlockDetails = ( {\r\n\tclientId,\r\n\tshowSheet,\r\n\tonCloseSheet,\r\n\tcustomBlockTitle = '',\r\n\ticon,\r\n\ttitle,\r\n\tdescription,\r\n\tactionButtonLabel,\r\n\tcustomActions = EMPTY_ARRAY,\r\n} ) => {\r\n\tconst [ sendFallbackMessage, setSendFallbackMessage ] = useState( false );\r\n\tconst [ sendButtonPressMessage, setSendButtonPressMessage ] =\r\n\t\tuseState( false );\r\n\r\n\tconst {\r\n\t\tblockName,\r\n\t\tblockContent,\r\n\t\tisUnsupportedBlockEditorSupported,\r\n\t\tcanEnableUnsupportedBlockEditor,\r\n\t\tisEditableInUnsupportedBlockEditor,\r\n\t} = useUnsupportedBlockEditor( clientId );\r\n\r\n\t// Styles\r\n\tconst textStyle = usePreferredColorSchemeStyle(\r\n\t\tstyles[ 'unsupported-block-details__text' ],\r\n\t\tstyles[ 'unsupported-block-details__text--dark' ]\r\n\t);\r\n\tconst titleStyle = usePreferredColorSchemeStyle(\r\n\t\tstyles[ 'unsupported-block-details__title' ],\r\n\t\tstyles[ 'unsupported-block-details__title--dark' ]\r\n\t);\r\n\tconst descriptionStyle = usePreferredColorSchemeStyle(\r\n\t\tstyles[ 'unsupported-block-details__description' ],\r\n\t\tstyles[ 'unsupported-block-details__description--dark' ]\r\n\t);\r\n\tconst iconStyle = usePreferredColorSchemeStyle(\r\n\t\tstyles[ 'unsupported-block-details__icon' ],\r\n\t\tstyles[ 'unsupported-block-details__icon--dark' ]\r\n\t);\r\n\tconst actionButtonStyle = usePreferredColorSchemeStyle(\r\n\t\tstyles[ 'unsupported-block-details__action-button' ],\r\n\t\tstyles[ 'unsupported-block-details__action-button--dark' ]\r\n\t);\r\n\r\n\tconst blockTitle =\r\n\t\tcustomBlockTitle || getBlockType( blockName )?.title || blockName;\r\n\r\n\tconst requestFallback = useCallback( () => {\r\n\t\tif (\r\n\t\t\tcanEnableUnsupportedBlockEditor &&\r\n\t\t\tisUnsupportedBlockEditorSupported === false\r\n\t\t) {\r\n\t\t\tonCloseSheet();\r\n\t\t\tsetSendButtonPressMessage( true );\r\n\t\t} else {\r\n\t\t\tonCloseSheet();\r\n\t\t\tsetSendFallbackMessage( true );\r\n\t\t}\r\n\t}, [\r\n\t\tcanEnableUnsupportedBlockEditor,\r\n\t\tisUnsupportedBlockEditorSupported,\r\n\t\tonCloseSheet,\r\n\t] );\r\n\r\n\t// The description can include extra notes via WP hooks.\r\n\tconst descriptionWithNotes = applyFilters(\r\n\t\t'native.unsupported_block_details_extra_note',\r\n\t\tdescription,\r\n\t\tblockName\r\n\t);\r\n\r\n\tconst webEditorDefaultLabel = applyFilters(\r\n\t\t'native.unsupported_block_details_web_editor_action',\r\n\t\t__( 'Edit using web editor' )\r\n\t);\r\n\r\n\tconst canUseWebEditor =\r\n\t\t( isUnsupportedBlockEditorSupported ||\r\n\t\t\tcanEnableUnsupportedBlockEditor ) &&\r\n\t\tisEditableInUnsupportedBlockEditor;\r\n\tconst actions = [\r\n\t\t...[\r\n\t\t\tcanUseWebEditor && {\r\n\t\t\t\tlabel: actionButtonLabel || webEditorDefaultLabel,\r\n\t\t\t\tonPress: requestFallback,\r\n\t\t\t},\r\n\t\t],\r\n\t\t...customActions,\r\n\t].filter( Boolean );\r\n\r\n\treturn (\r\n\t\t<BottomSheet\r\n\t\t\tisVisible={ showSheet }\r\n\t\t\thideHeader\r\n\t\t\tonClose={ onCloseSheet }\r\n\t\t\tonModalHide={ () => {\r\n\t\t\t\tif ( sendFallbackMessage ) {\r\n\t\t\t\t\t// On iOS, onModalHide is called when the controller is still part of the hierarchy.\r\n\t\t\t\t\t// A small delay will ensure that the controller has already been removed.\r\n\t\t\t\t\tthis.timeout = setTimeout( () => {\r\n\t\t\t\t\t\t// For the Classic block, the content is kept in the `content` attribute.\r\n\t\t\t\t\t\trequestUnsupportedBlockFallback(\r\n\t\t\t\t\t\t\tblockContent,\r\n\t\t\t\t\t\t\tclientId,\r\n\t\t\t\t\t\t\tblockName,\r\n\t\t\t\t\t\t\tblockTitle\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}, 100 );\r\n\t\t\t\t\tsetSendFallbackMessage( false );\r\n\t\t\t\t} else if ( sendButtonPressMessage ) {\r\n\t\t\t\t\tthis.timeout = setTimeout( () => {\r\n\t\t\t\t\t\tsendActionButtonPressedAction(\r\n\t\t\t\t\t\t\tactionButtons.missingBlockAlertActionButton\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}, 100 );\r\n\t\t\t\t\tsetSendButtonPressMessage( false );\r\n\t\t\t\t}\r\n\t\t\t} }\r\n\t\t>\r\n\t\t\t<View style={ styles[ 'unsupported-block-details__container' ] }>\r\n\t\t\t\t<Icon\r\n\t\t\t\t\ticon={ icon || help }\r\n\t\t\t\t\tcolor={ iconStyle.color }\r\n\t\t\t\t\tsize={ iconStyle.size }\r\n\t\t\t\t/>\r\n\t\t\t\t<Text style={ [ textStyle, titleStyle ] }>{ title }</Text>\r\n\t\t\t\t{ isEditableInUnsupportedBlockEditor &&\r\n\t\t\t\t\tdescriptionWithNotes && (\r\n\t\t\t\t\t\t<Text style={ [ textStyle, descriptionStyle ] }>\r\n\t\t\t\t\t\t\t{ descriptionWithNotes }\r\n\t\t\t\t\t\t</Text>\r\n\t\t\t\t\t) }\r\n\t\t\t</View>\r\n\t\t\t{ actions.map( ( { label, onPress }, index ) => (\r\n\t\t\t\t<TextControl\r\n\t\t\t\t\tkey={ `${ label } - ${ index }` }\r\n\t\t\t\t\tlabel={ label }\r\n\t\t\t\t\tseparatorType=\"topFullWidth\"\r\n\t\t\t\t\tonPress={ onPress }\r\n\t\t\t\t\tlabelStyle={ actionButtonStyle }\r\n\t\t\t\t/>\r\n\t\t\t) ) }\r\n\t\t\t<TextControl\r\n\t\t\t\tlabel={ __( 'Dismiss' ) }\r\n\t\t\t\tseparatorType=\"topFullWidth\"\r\n\t\t\t\tonPress={ onCloseSheet }\r\n\t\t\t\tlabelStyle={ actionButtonStyle }\r\n\t\t\t/>\r\n\t\t</BottomSheet>\r\n\t);\r\n};\r\n\r\nexport default UnsupportedBlockDetails;\r\n"],"mappings":"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","ignoreList":[]}