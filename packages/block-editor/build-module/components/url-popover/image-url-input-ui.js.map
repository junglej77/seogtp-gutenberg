{"version":3,"names":["__","useRef","useEffect","useState","focus","ToolbarButton","NavigableMenu","Button","MenuItem","ToggleControl","TextControl","__experimentalVStack","VStack","Icon","link","linkIcon","image","page","fullscreen","linkOff","URLPopover","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LINK_DESTINATION_NONE","LINK_DESTINATION_CUSTOM","LINK_DESTINATION_MEDIA","LINK_DESTINATION_ATTACHMENT","NEW_TAB_REL","ImageURLInputUI","linkDestination","onChangeUrl","url","mediaType","mediaUrl","mediaLink","linkTarget","linkClass","rel","showLightboxSetting","lightboxEnabled","onSetLightbox","resetLightbox","isOpen","setIsOpen","popoverAnchor","setPopoverAnchor","openLinkUI","isEditingLink","setIsEditingLink","urlInput","setUrlInput","autocompleteRef","wrapperRef","current","nextFocusTarget","focusable","find","startEditLink","stopEditLink","closeLinkUI","getUpdatedLinkTargetSettings","value","newLinkTarget","undefined","updatedRel","rels","split","forEach","relVal","includes","push","join","filter","length","onFocusOutside","event","autocompleteElement","contains","target","onSubmitLinkChange","selectedDestination","getLinkDestinations","destination","href","lightbox","enabled","preventDefault","onLinkRemove","linkDestinations","title","icon","onSetHref","linkDestinationInput","onSetNewTab","updatedLinkTarget","onSetLinkRel","onSetLinkClass","advancedOptions","spacing","children","__nextHasNoMarginBottom","label","onChange","checked","__next40pxDefaultSize","linkEditorValue","hideLightboxPanel","showLinkEditor","urlLabel","PopoverChildren","className","onClick","size","LinkEditor","onChangeInputValue","onSubmit","LinkViewer","onEditLinkClick","ref","isActive","anchor","onClose","renderSettings","additionalControls","map","iconPosition","info","offset","__experimentalImageURLInputUI"],"sources":["@wordpress/block-editor/src/components/url-popover/image-url-input-ui.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useRef, useEffect, useState } from '@wordpress/element';\r\nimport { focus } from '@wordpress/dom';\r\nimport {\r\n\tToolbarButton,\r\n\tNavigableMenu,\r\n\tButton,\r\n\tMenuItem,\r\n\tToggleControl,\r\n\tTextControl,\r\n\t__experimentalVStack as VStack,\r\n} from '@wordpress/components';\r\nimport {\r\n\tIcon,\r\n\tlink as linkIcon,\r\n\timage,\r\n\tpage,\r\n\tfullscreen,\r\n\tlinkOff,\r\n} from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport URLPopover from './index';\r\n\r\nconst LINK_DESTINATION_NONE = 'none';\r\nconst LINK_DESTINATION_CUSTOM = 'custom';\r\nconst LINK_DESTINATION_MEDIA = 'media';\r\nconst LINK_DESTINATION_ATTACHMENT = 'attachment';\r\nconst NEW_TAB_REL = [ 'noreferrer', 'noopener' ];\r\n\r\nconst ImageURLInputUI = ( {\r\n\tlinkDestination,\r\n\tonChangeUrl,\r\n\turl,\r\n\tmediaType = 'image',\r\n\tmediaUrl,\r\n\tmediaLink,\r\n\tlinkTarget,\r\n\tlinkClass,\r\n\trel,\r\n\tshowLightboxSetting,\r\n\tlightboxEnabled,\r\n\tonSetLightbox,\r\n\tresetLightbox,\r\n} ) => {\r\n\tconst [ isOpen, setIsOpen ] = useState( false );\r\n\t// Use internal state instead of a ref to make sure that the component\r\n\t// re-renders when the popover's anchor updates.\r\n\tconst [ popoverAnchor, setPopoverAnchor ] = useState( null );\r\n\tconst openLinkUI = () => {\r\n\t\tsetIsOpen( true );\r\n\t};\r\n\r\n\tconst [ isEditingLink, setIsEditingLink ] = useState( false );\r\n\tconst [ urlInput, setUrlInput ] = useState( null );\r\n\r\n\tconst autocompleteRef = useRef( null );\r\n\tconst wrapperRef = useRef();\r\n\r\n\tuseEffect( () => {\r\n\t\tif ( ! wrapperRef.current ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst nextFocusTarget =\r\n\t\t\tfocus.focusable.find( wrapperRef.current )[ 0 ] ||\r\n\t\t\twrapperRef.current;\r\n\t\tnextFocusTarget.focus();\r\n\t}, [ isEditingLink, url, lightboxEnabled ] );\r\n\r\n\tconst startEditLink = () => {\r\n\t\tif (\r\n\t\t\tlinkDestination === LINK_DESTINATION_MEDIA ||\r\n\t\t\tlinkDestination === LINK_DESTINATION_ATTACHMENT\r\n\t\t) {\r\n\t\t\tsetUrlInput( '' );\r\n\t\t}\r\n\t\tsetIsEditingLink( true );\r\n\t};\r\n\r\n\tconst stopEditLink = () => {\r\n\t\tsetIsEditingLink( false );\r\n\t};\r\n\r\n\tconst closeLinkUI = () => {\r\n\t\tsetUrlInput( null );\r\n\t\tstopEditLink();\r\n\t\tsetIsOpen( false );\r\n\t};\r\n\r\n\tconst getUpdatedLinkTargetSettings = ( value ) => {\r\n\t\tconst newLinkTarget = value ? '_blank' : undefined;\r\n\r\n\t\tlet updatedRel;\r\n\t\tif ( newLinkTarget ) {\r\n\t\t\tconst rels = ( rel ?? '' ).split( ' ' );\r\n\t\t\tNEW_TAB_REL.forEach( ( relVal ) => {\r\n\t\t\t\tif ( ! rels.includes( relVal ) ) {\r\n\t\t\t\t\trels.push( relVal );\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t\tupdatedRel = rels.join( ' ' );\r\n\t\t} else {\r\n\t\t\tconst rels = ( rel ?? '' )\r\n\t\t\t\t.split( ' ' )\r\n\t\t\t\t.filter(\r\n\t\t\t\t\t( relVal ) => NEW_TAB_REL.includes( relVal ) === false\r\n\t\t\t\t);\r\n\t\t\tupdatedRel = rels.length ? rels.join( ' ' ) : undefined;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tlinkTarget: newLinkTarget,\r\n\t\t\trel: updatedRel,\r\n\t\t};\r\n\t};\r\n\r\n\tconst onFocusOutside = () => {\r\n\t\treturn ( event ) => {\r\n\t\t\t// The autocomplete suggestions list renders in a separate popover (in a portal),\r\n\t\t\t// so onFocusOutside fails to detect that a click on a suggestion occurred in the\r\n\t\t\t// LinkContainer. Detect clicks on autocomplete suggestions using a ref here, and\r\n\t\t\t// return to avoid the popover being closed.\r\n\t\t\tconst autocompleteElement = autocompleteRef.current;\r\n\t\t\tif (\r\n\t\t\t\tautocompleteElement &&\r\n\t\t\t\tautocompleteElement.contains( event.target )\r\n\t\t\t) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tsetIsOpen( false );\r\n\t\t\tsetUrlInput( null );\r\n\t\t\tstopEditLink();\r\n\t\t};\r\n\t};\r\n\r\n\tconst onSubmitLinkChange = () => {\r\n\t\treturn ( event ) => {\r\n\t\t\tif ( urlInput ) {\r\n\t\t\t\t// It is possible the entered URL actually matches a named link destination.\r\n\t\t\t\t// This check will ensure our link destination is correct.\r\n\t\t\t\tconst selectedDestination =\r\n\t\t\t\t\tgetLinkDestinations().find(\r\n\t\t\t\t\t\t( destination ) => destination.url === urlInput\r\n\t\t\t\t\t)?.linkDestination || LINK_DESTINATION_CUSTOM;\r\n\r\n\t\t\t\tonChangeUrl( {\r\n\t\t\t\t\thref: urlInput,\r\n\t\t\t\t\tlinkDestination: selectedDestination,\r\n\t\t\t\t\tlightbox: { enabled: false },\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\t\t\tstopEditLink();\r\n\t\t\tsetUrlInput( null );\r\n\t\t\tevent.preventDefault();\r\n\t\t};\r\n\t};\r\n\r\n\tconst onLinkRemove = () => {\r\n\t\tonChangeUrl( {\r\n\t\t\tlinkDestination: LINK_DESTINATION_NONE,\r\n\t\t\thref: '',\r\n\t\t} );\r\n\t};\r\n\r\n\tconst getLinkDestinations = () => {\r\n\t\tconst linkDestinations = [\r\n\t\t\t{\r\n\t\t\t\tlinkDestination: LINK_DESTINATION_MEDIA,\r\n\t\t\t\ttitle: __( 'Link to image file' ),\r\n\t\t\t\turl: mediaType === 'image' ? mediaUrl : undefined,\r\n\t\t\t\ticon: image,\r\n\t\t\t},\r\n\t\t];\r\n\t\tif ( mediaType === 'image' && mediaLink ) {\r\n\t\t\tlinkDestinations.push( {\r\n\t\t\t\tlinkDestination: LINK_DESTINATION_ATTACHMENT,\r\n\t\t\t\ttitle: __( 'Link to attachment page' ),\r\n\t\t\t\turl: mediaType === 'image' ? mediaLink : undefined,\r\n\t\t\t\ticon: page,\r\n\t\t\t} );\r\n\t\t}\r\n\t\treturn linkDestinations;\r\n\t};\r\n\r\n\tconst onSetHref = ( value ) => {\r\n\t\tconst linkDestinations = getLinkDestinations();\r\n\t\tlet linkDestinationInput;\r\n\t\tif ( ! value ) {\r\n\t\t\tlinkDestinationInput = LINK_DESTINATION_NONE;\r\n\t\t} else {\r\n\t\t\tlinkDestinationInput = (\r\n\t\t\t\tlinkDestinations.find( ( destination ) => {\r\n\t\t\t\t\treturn destination.url === value;\r\n\t\t\t\t} ) || { linkDestination: LINK_DESTINATION_CUSTOM }\r\n\t\t\t).linkDestination;\r\n\t\t}\r\n\t\tonChangeUrl( {\r\n\t\t\tlinkDestination: linkDestinationInput,\r\n\t\t\thref: value,\r\n\t\t} );\r\n\t};\r\n\r\n\tconst onSetNewTab = ( value ) => {\r\n\t\tconst updatedLinkTarget = getUpdatedLinkTargetSettings( value );\r\n\t\tonChangeUrl( updatedLinkTarget );\r\n\t};\r\n\r\n\tconst onSetLinkRel = ( value ) => {\r\n\t\tonChangeUrl( { rel: value } );\r\n\t};\r\n\r\n\tconst onSetLinkClass = ( value ) => {\r\n\t\tonChangeUrl( { linkClass: value } );\r\n\t};\r\n\r\n\tconst advancedOptions = (\r\n\t\t<VStack spacing=\"3\">\r\n\t\t\t<ToggleControl\r\n\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\tlabel={ __( 'Open in new tab' ) }\r\n\t\t\t\tonChange={ onSetNewTab }\r\n\t\t\t\tchecked={ linkTarget === '_blank' }\r\n\t\t\t/>\r\n\t\t\t<TextControl\r\n\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\tlabel={ __( 'Link rel' ) }\r\n\t\t\t\tvalue={ rel ?? '' }\r\n\t\t\t\tonChange={ onSetLinkRel }\r\n\t\t\t/>\r\n\t\t\t<TextControl\r\n\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\tlabel={ __( 'Link CSS class' ) }\r\n\t\t\t\tvalue={ linkClass || '' }\r\n\t\t\t\tonChange={ onSetLinkClass }\r\n\t\t\t/>\r\n\t\t</VStack>\r\n\t);\r\n\r\n\tconst linkEditorValue = urlInput !== null ? urlInput : url;\r\n\tconst hideLightboxPanel =\r\n\t\t! lightboxEnabled || ( lightboxEnabled && ! showLightboxSetting );\r\n\tconst showLinkEditor = ! linkEditorValue && hideLightboxPanel;\r\n\r\n\tconst urlLabel = (\r\n\t\tgetLinkDestinations().find(\r\n\t\t\t( destination ) => destination.linkDestination === linkDestination\r\n\t\t) || {}\r\n\t).title;\r\n\r\n\tconst PopoverChildren = () => {\r\n\t\tif (\r\n\t\t\tlightboxEnabled &&\r\n\t\t\tshowLightboxSetting &&\r\n\t\t\t! url &&\r\n\t\t\t! isEditingLink\r\n\t\t) {\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"block-editor-url-popover__expand-on-click\">\r\n\t\t\t\t\t<Icon icon={ fullscreen } />\r\n\t\t\t\t\t<div className=\"text\">\r\n\t\t\t\t\t\t<p>{ __( 'Expand on click' ) }</p>\r\n\t\t\t\t\t\t<p className=\"description\">\r\n\t\t\t\t\t\t\t{ __( 'Scales the image with a lightbox effect' ) }\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\ticon={ linkOff }\r\n\t\t\t\t\t\tlabel={ __( 'Disable expand on click' ) }\r\n\t\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\t\tonSetLightbox?.( false );\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t\tsize=\"compact\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if ( ! url || isEditingLink ) {\r\n\t\t\treturn (\r\n\t\t\t\t<URLPopover.LinkEditor\r\n\t\t\t\t\tclassName=\"block-editor-format-toolbar__link-container-content\"\r\n\t\t\t\t\tvalue={ linkEditorValue }\r\n\t\t\t\t\tonChangeInputValue={ setUrlInput }\r\n\t\t\t\t\tonSubmit={ onSubmitLinkChange() }\r\n\t\t\t\t\tautocompleteRef={ autocompleteRef }\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t} else if ( url && ! isEditingLink ) {\r\n\t\t\treturn (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<URLPopover.LinkViewer\r\n\t\t\t\t\t\tclassName=\"block-editor-format-toolbar__link-container-content\"\r\n\t\t\t\t\t\turl={ url }\r\n\t\t\t\t\t\tonEditLinkClick={ startEditLink }\r\n\t\t\t\t\t\turlLabel={ urlLabel }\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\ticon={ linkOff }\r\n\t\t\t\t\t\tlabel={ __( 'Remove link' ) }\r\n\t\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\t\tonLinkRemove();\r\n\t\t\t\t\t\t\tresetLightbox?.();\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t\tsize=\"compact\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</>\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<ToolbarButton\r\n\t\t\t\ticon={ linkIcon }\r\n\t\t\t\tclassName=\"components-toolbar__control\"\r\n\t\t\t\tlabel={ __( 'Link' ) }\r\n\t\t\t\taria-expanded={ isOpen }\r\n\t\t\t\tonClick={ openLinkUI }\r\n\t\t\t\tref={ setPopoverAnchor }\r\n\t\t\t\tisActive={\r\n\t\t\t\t\t!! url || ( lightboxEnabled && showLightboxSetting )\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\t\t\t{ isOpen && (\r\n\t\t\t\t<URLPopover\r\n\t\t\t\t\tref={ wrapperRef }\r\n\t\t\t\t\tanchor={ popoverAnchor }\r\n\t\t\t\t\tonFocusOutside={ onFocusOutside() }\r\n\t\t\t\t\tonClose={ closeLinkUI }\r\n\t\t\t\t\trenderSettings={\r\n\t\t\t\t\t\thideLightboxPanel ? () => advancedOptions : null\r\n\t\t\t\t\t}\r\n\t\t\t\t\tadditionalControls={\r\n\t\t\t\t\t\tshowLinkEditor && (\r\n\t\t\t\t\t\t\t<NavigableMenu>\r\n\t\t\t\t\t\t\t\t{ getLinkDestinations().map( ( link ) => (\r\n\t\t\t\t\t\t\t\t\t<MenuItem\r\n\t\t\t\t\t\t\t\t\t\tkey={ link.linkDestination }\r\n\t\t\t\t\t\t\t\t\t\ticon={ link.icon }\r\n\t\t\t\t\t\t\t\t\t\ticonPosition=\"left\"\r\n\t\t\t\t\t\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetUrlInput( null );\r\n\t\t\t\t\t\t\t\t\t\t\tonSetHref( link.url );\r\n\t\t\t\t\t\t\t\t\t\t\tstopEditLink();\r\n\t\t\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{ link.title }\r\n\t\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t) ) }\r\n\t\t\t\t\t\t\t\t{ showLightboxSetting && (\r\n\t\t\t\t\t\t\t\t\t<MenuItem\r\n\t\t\t\t\t\t\t\t\t\tkey=\"expand-on-click\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"block-editor-url-popover__expand-on-click\"\r\n\t\t\t\t\t\t\t\t\t\ticon={ fullscreen }\r\n\t\t\t\t\t\t\t\t\t\tinfo={ __(\r\n\t\t\t\t\t\t\t\t\t\t\t'Scale the image with a lightbox effect.'\r\n\t\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t\t\ticonPosition=\"left\"\r\n\t\t\t\t\t\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetUrlInput( null );\r\n\t\t\t\t\t\t\t\t\t\t\tonChangeUrl( {\r\n\t\t\t\t\t\t\t\t\t\t\t\tlinkDestination:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tLINK_DESTINATION_NONE,\r\n\t\t\t\t\t\t\t\t\t\t\t\thref: '',\r\n\t\t\t\t\t\t\t\t\t\t\t} );\r\n\t\t\t\t\t\t\t\t\t\t\tonSetLightbox?.( true );\r\n\t\t\t\t\t\t\t\t\t\t\tstopEditLink();\r\n\t\t\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{ __( 'Expand on click' ) }\r\n\t\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t</NavigableMenu>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t\toffset={ 13 }\r\n\t\t\t\t>\r\n\t\t\t\t\t{ PopoverChildren() }\r\n\t\t\t\t</URLPopover>\r\n\t\t\t) }\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport { ImageURLInputUI as __experimentalImageURLInputUI };\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,EAAE,QAAQ,iBAAiB;AACpC,SAASC,MAAM,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,oBAAoB;AAChE,SAASC,KAAK,QAAQ,gBAAgB;AACtC,SACCC,aAAa,EACbC,aAAa,EACbC,MAAM,EACNC,QAAQ,EACRC,aAAa,EACbC,WAAW,EACXC,oBAAoB,IAAIC,MAAM,QACxB,uBAAuB;AAC9B,SACCC,IAAI,EACJC,IAAI,IAAIC,QAAQ,EAChBC,KAAK,EACLC,IAAI,EACJC,UAAU,EACVC,OAAO,QACD,kBAAkB;;AAEzB;AACA;AACA;AACA,OAAOC,UAAU,MAAM,SAAS;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAEjC,MAAMC,qBAAqB,GAAG,MAAM;AACpC,MAAMC,uBAAuB,GAAG,QAAQ;AACxC,MAAMC,sBAAsB,GAAG,OAAO;AACtC,MAAMC,2BAA2B,GAAG,YAAY;AAChD,MAAMC,WAAW,GAAG,CAAE,YAAY,EAAE,UAAU,CAAE;AAEhD,MAAMC,eAAe,GAAGA,CAAE;EACzBC,eAAe;EACfC,WAAW;EACXC,GAAG;EACHC,SAAS,GAAG,OAAO;EACnBC,QAAQ;EACRC,SAAS;EACTC,UAAU;EACVC,SAAS;EACTC,GAAG;EACHC,mBAAmB;EACnBC,eAAe;EACfC,aAAa;EACbC;AACD,CAAC,KAAM;EACN,MAAM,CAAEC,MAAM,EAAEC,SAAS,CAAE,GAAG5C,QAAQ,CAAE,KAAM,CAAC;EAC/C;EACA;EACA,MAAM,CAAE6C,aAAa,EAAEC,gBAAgB,CAAE,GAAG9C,QAAQ,CAAE,IAAK,CAAC;EAC5D,MAAM+C,UAAU,GAAGA,CAAA,KAAM;IACxBH,SAAS,CAAE,IAAK,CAAC;EAClB,CAAC;EAED,MAAM,CAAEI,aAAa,EAAEC,gBAAgB,CAAE,GAAGjD,QAAQ,CAAE,KAAM,CAAC;EAC7D,MAAM,CAAEkD,QAAQ,EAAEC,WAAW,CAAE,GAAGnD,QAAQ,CAAE,IAAK,CAAC;EAElD,MAAMoD,eAAe,GAAGtD,MAAM,CAAE,IAAK,CAAC;EACtC,MAAMuD,UAAU,GAAGvD,MAAM,CAAC,CAAC;EAE3BC,SAAS,CAAE,MAAM;IAChB,IAAK,CAAEsD,UAAU,CAACC,OAAO,EAAG;MAC3B;IACD;IACA,MAAMC,eAAe,GACpBtD,KAAK,CAACuD,SAAS,CAACC,IAAI,CAAEJ,UAAU,CAACC,OAAQ,CAAC,CAAE,CAAC,CAAE,IAC/CD,UAAU,CAACC,OAAO;IACnBC,eAAe,CAACtD,KAAK,CAAC,CAAC;EACxB,CAAC,EAAE,CAAE+C,aAAa,EAAEhB,GAAG,EAAEQ,eAAe,CAAG,CAAC;EAE5C,MAAMkB,aAAa,GAAGA,CAAA,KAAM;IAC3B,IACC5B,eAAe,KAAKJ,sBAAsB,IAC1CI,eAAe,KAAKH,2BAA2B,EAC9C;MACDwB,WAAW,CAAE,EAAG,CAAC;IAClB;IACAF,gBAAgB,CAAE,IAAK,CAAC;EACzB,CAAC;EAED,MAAMU,YAAY,GAAGA,CAAA,KAAM;IAC1BV,gBAAgB,CAAE,KAAM,CAAC;EAC1B,CAAC;EAED,MAAMW,WAAW,GAAGA,CAAA,KAAM;IACzBT,WAAW,CAAE,IAAK,CAAC;IACnBQ,YAAY,CAAC,CAAC;IACdf,SAAS,CAAE,KAAM,CAAC;EACnB,CAAC;EAED,MAAMiB,4BAA4B,GAAKC,KAAK,IAAM;IACjD,MAAMC,aAAa,GAAGD,KAAK,GAAG,QAAQ,GAAGE,SAAS;IAElD,IAAIC,UAAU;IACd,IAAKF,aAAa,EAAG;MACpB,MAAMG,IAAI,GAAG,CAAE5B,GAAG,aAAHA,GAAG,cAAHA,GAAG,GAAI,EAAE,EAAG6B,KAAK,CAAE,GAAI,CAAC;MACvCvC,WAAW,CAACwC,OAAO,CAAIC,MAAM,IAAM;QAClC,IAAK,CAAEH,IAAI,CAACI,QAAQ,CAAED,MAAO,CAAC,EAAG;UAChCH,IAAI,CAACK,IAAI,CAAEF,MAAO,CAAC;QACpB;MACD,CAAE,CAAC;MACHJ,UAAU,GAAGC,IAAI,CAACM,IAAI,CAAE,GAAI,CAAC;IAC9B,CAAC,MAAM;MACN,MAAMN,IAAI,GAAG,CAAE5B,GAAG,aAAHA,GAAG,cAAHA,GAAG,GAAI,EAAE,EACtB6B,KAAK,CAAE,GAAI,CAAC,CACZM,MAAM,CACJJ,MAAM,IAAMzC,WAAW,CAAC0C,QAAQ,CAAED,MAAO,CAAC,KAAK,KAClD,CAAC;MACFJ,UAAU,GAAGC,IAAI,CAACQ,MAAM,GAAGR,IAAI,CAACM,IAAI,CAAE,GAAI,CAAC,GAAGR,SAAS;IACxD;IAEA,OAAO;MACN5B,UAAU,EAAE2B,aAAa;MACzBzB,GAAG,EAAE2B;IACN,CAAC;EACF,CAAC;EAED,MAAMU,cAAc,GAAGA,CAAA,KAAM;IAC5B,OAASC,KAAK,IAAM;MACnB;MACA;MACA;MACA;MACA,MAAMC,mBAAmB,GAAGzB,eAAe,CAACE,OAAO;MACnD,IACCuB,mBAAmB,IACnBA,mBAAmB,CAACC,QAAQ,CAAEF,KAAK,CAACG,MAAO,CAAC,EAC3C;QACD;MACD;MACAnC,SAAS,CAAE,KAAM,CAAC;MAClBO,WAAW,CAAE,IAAK,CAAC;MACnBQ,YAAY,CAAC,CAAC;IACf,CAAC;EACF,CAAC;EAED,MAAMqB,kBAAkB,GAAGA,CAAA,KAAM;IAChC,OAASJ,KAAK,IAAM;MACnB,IAAK1B,QAAQ,EAAG;QACf;QACA;QACA,MAAM+B,mBAAmB,GACxBC,mBAAmB,CAAC,CAAC,CAACzB,IAAI,CACvB0B,WAAW,IAAMA,WAAW,CAACnD,GAAG,KAAKkB,QACxC,CAAC,EAAEpB,eAAe,IAAIL,uBAAuB;QAE9CM,WAAW,CAAE;UACZqD,IAAI,EAAElC,QAAQ;UACdpB,eAAe,EAAEmD,mBAAmB;UACpCI,QAAQ,EAAE;YAAEC,OAAO,EAAE;UAAM;QAC5B,CAAE,CAAC;MACJ;MACA3B,YAAY,CAAC,CAAC;MACdR,WAAW,CAAE,IAAK,CAAC;MACnByB,KAAK,CAACW,cAAc,CAAC,CAAC;IACvB,CAAC;EACF,CAAC;EAED,MAAMC,YAAY,GAAGA,CAAA,KAAM;IAC1BzD,WAAW,CAAE;MACZD,eAAe,EAAEN,qBAAqB;MACtC4D,IAAI,EAAE;IACP,CAAE,CAAC;EACJ,CAAC;EAED,MAAMF,mBAAmB,GAAGA,CAAA,KAAM;IACjC,MAAMO,gBAAgB,GAAG,CACxB;MACC3D,eAAe,EAAEJ,sBAAsB;MACvCgE,KAAK,EAAE7F,EAAE,CAAE,oBAAqB,CAAC;MACjCmC,GAAG,EAAEC,SAAS,KAAK,OAAO,GAAGC,QAAQ,GAAG8B,SAAS;MACjD2B,IAAI,EAAE9E;IACP,CAAC,CACD;IACD,IAAKoB,SAAS,KAAK,OAAO,IAAIE,SAAS,EAAG;MACzCsD,gBAAgB,CAAClB,IAAI,CAAE;QACtBzC,eAAe,EAAEH,2BAA2B;QAC5C+D,KAAK,EAAE7F,EAAE,CAAE,yBAA0B,CAAC;QACtCmC,GAAG,EAAEC,SAAS,KAAK,OAAO,GAAGE,SAAS,GAAG6B,SAAS;QAClD2B,IAAI,EAAE7E;MACP,CAAE,CAAC;IACJ;IACA,OAAO2E,gBAAgB;EACxB,CAAC;EAED,MAAMG,SAAS,GAAK9B,KAAK,IAAM;IAC9B,MAAM2B,gBAAgB,GAAGP,mBAAmB,CAAC,CAAC;IAC9C,IAAIW,oBAAoB;IACxB,IAAK,CAAE/B,KAAK,EAAG;MACd+B,oBAAoB,GAAGrE,qBAAqB;IAC7C,CAAC,MAAM;MACNqE,oBAAoB,GAAG,CACtBJ,gBAAgB,CAAChC,IAAI,CAAI0B,WAAW,IAAM;QACzC,OAAOA,WAAW,CAACnD,GAAG,KAAK8B,KAAK;MACjC,CAAE,CAAC,IAAI;QAAEhC,eAAe,EAAEL;MAAwB,CAAC,EAClDK,eAAe;IAClB;IACAC,WAAW,CAAE;MACZD,eAAe,EAAE+D,oBAAoB;MACrCT,IAAI,EAAEtB;IACP,CAAE,CAAC;EACJ,CAAC;EAED,MAAMgC,WAAW,GAAKhC,KAAK,IAAM;IAChC,MAAMiC,iBAAiB,GAAGlC,4BAA4B,CAAEC,KAAM,CAAC;IAC/D/B,WAAW,CAAEgE,iBAAkB,CAAC;EACjC,CAAC;EAED,MAAMC,YAAY,GAAKlC,KAAK,IAAM;IACjC/B,WAAW,CAAE;MAAEO,GAAG,EAAEwB;IAAM,CAAE,CAAC;EAC9B,CAAC;EAED,MAAMmC,cAAc,GAAKnC,KAAK,IAAM;IACnC/B,WAAW,CAAE;MAAEM,SAAS,EAAEyB;IAAM,CAAE,CAAC;EACpC,CAAC;EAED,MAAMoC,eAAe,gBACpB7E,KAAA,CAACZ,MAAM;IAAC0F,OAAO,EAAC,GAAG;IAAAC,QAAA,gBAClBjF,IAAA,CAACb,aAAa;MACb+F,uBAAuB;MACvBC,KAAK,EAAGzG,EAAE,CAAE,iBAAkB,CAAG;MACjC0G,QAAQ,EAAGT,WAAa;MACxBU,OAAO,EAAGpE,UAAU,KAAK;IAAU,CACnC,CAAC,eACFjB,IAAA,CAACZ,WAAW;MACXkG,qBAAqB;MACrBJ,uBAAuB;MACvBC,KAAK,EAAGzG,EAAE,CAAE,UAAW,CAAG;MAC1BiE,KAAK,EAAGxB,GAAG,aAAHA,GAAG,cAAHA,GAAG,GAAI,EAAI;MACnBiE,QAAQ,EAAGP;IAAc,CACzB,CAAC,eACF7E,IAAA,CAACZ,WAAW;MACXkG,qBAAqB;MACrBJ,uBAAuB;MACvBC,KAAK,EAAGzG,EAAE,CAAE,gBAAiB,CAAG;MAChCiE,KAAK,EAAGzB,SAAS,IAAI,EAAI;MACzBkE,QAAQ,EAAGN;IAAgB,CAC3B,CAAC;EAAA,CACK,CACR;EAED,MAAMS,eAAe,GAAGxD,QAAQ,KAAK,IAAI,GAAGA,QAAQ,GAAGlB,GAAG;EAC1D,MAAM2E,iBAAiB,GACtB,CAAEnE,eAAe,IAAMA,eAAe,IAAI,CAAED,mBAAqB;EAClE,MAAMqE,cAAc,GAAG,CAAEF,eAAe,IAAIC,iBAAiB;EAE7D,MAAME,QAAQ,GAAG,CAChB3B,mBAAmB,CAAC,CAAC,CAACzB,IAAI,CACvB0B,WAAW,IAAMA,WAAW,CAACrD,eAAe,KAAKA,eACpD,CAAC,IAAI,CAAC,CAAC,EACN4D,KAAK;EAEP,MAAMoB,eAAe,GAAGA,CAAA,KAAM;IAC7B,IACCtE,eAAe,IACfD,mBAAmB,IACnB,CAAEP,GAAG,IACL,CAAEgB,aAAa,EACd;MACD,oBACC3B,KAAA;QAAK0F,SAAS,EAAC,2CAA2C;QAAAX,QAAA,gBACzDjF,IAAA,CAACT,IAAI;UAACiF,IAAI,EAAG5E;QAAY,CAAE,CAAC,eAC5BM,KAAA;UAAK0F,SAAS,EAAC,MAAM;UAAAX,QAAA,gBACpBjF,IAAA;YAAAiF,QAAA,EAAKvG,EAAE,CAAE,iBAAkB;UAAC,CAAK,CAAC,eAClCsB,IAAA;YAAG4F,SAAS,EAAC,aAAa;YAAAX,QAAA,EACvBvG,EAAE,CAAE,yCAA0C;UAAC,CAC/C,CAAC;QAAA,CACA,CAAC,eACNsB,IAAA,CAACf,MAAM;UACNuF,IAAI,EAAG3E,OAAS;UAChBsF,KAAK,EAAGzG,EAAE,CAAE,yBAA0B,CAAG;UACzCmH,OAAO,EAAGA,CAAA,KAAM;YACfvE,aAAa,GAAI,KAAM,CAAC;UACzB,CAAG;UACHwE,IAAI,EAAC;QAAS,CACd,CAAC;MAAA,CACE,CAAC;IAER,CAAC,MAAM,IAAK,CAAEjF,GAAG,IAAIgB,aAAa,EAAG;MACpC,oBACC7B,IAAA,CAACF,UAAU,CAACiG,UAAU;QACrBH,SAAS,EAAC,qDAAqD;QAC/DjD,KAAK,EAAG4C,eAAiB;QACzBS,kBAAkB,EAAGhE,WAAa;QAClCiE,QAAQ,EAAGpC,kBAAkB,CAAC,CAAG;QACjC5B,eAAe,EAAGA;MAAiB,CACnC,CAAC;IAEJ,CAAC,MAAM,IAAKpB,GAAG,IAAI,CAAEgB,aAAa,EAAG;MACpC,oBACC3B,KAAA,CAAAE,SAAA;QAAA6E,QAAA,gBACCjF,IAAA,CAACF,UAAU,CAACoG,UAAU;UACrBN,SAAS,EAAC,qDAAqD;UAC/D/E,GAAG,EAAGA,GAAK;UACXsF,eAAe,EAAG5D,aAAe;UACjCmD,QAAQ,EAAGA;QAAU,CACrB,CAAC,eACF1F,IAAA,CAACf,MAAM;UACNuF,IAAI,EAAG3E,OAAS;UAChBsF,KAAK,EAAGzG,EAAE,CAAE,aAAc,CAAG;UAC7BmH,OAAO,EAAGA,CAAA,KAAM;YACfxB,YAAY,CAAC,CAAC;YACd9C,aAAa,GAAG,CAAC;UAClB,CAAG;UACHuE,IAAI,EAAC;QAAS,CACd,CAAC;MAAA,CACD,CAAC;IAEL;EACD,CAAC;EAED,oBACC5F,KAAA,CAAAE,SAAA;IAAA6E,QAAA,gBACCjF,IAAA,CAACjB,aAAa;MACbyF,IAAI,EAAG/E,QAAU;MACjBmG,SAAS,EAAC,6BAA6B;MACvCT,KAAK,EAAGzG,EAAE,CAAE,MAAO,CAAG;MACtB,iBAAgB8C,MAAQ;MACxBqE,OAAO,EAAGjE,UAAY;MACtBwE,GAAG,EAAGzE,gBAAkB;MACxB0E,QAAQ,EACP,CAAC,CAAExF,GAAG,IAAMQ,eAAe,IAAID;IAC/B,CACD,CAAC,EACAI,MAAM,iBACPxB,IAAA,CAACF,UAAU;MACVsG,GAAG,EAAGlE,UAAY;MAClBoE,MAAM,EAAG5E,aAAe;MACxB8B,cAAc,EAAGA,cAAc,CAAC,CAAG;MACnC+C,OAAO,EAAG9D,WAAa;MACvB+D,cAAc,EACbhB,iBAAiB,GAAG,MAAMT,eAAe,GAAG,IAC5C;MACD0B,kBAAkB,EACjBhB,cAAc,iBACbvF,KAAA,CAAClB,aAAa;QAAAiG,QAAA,GACXlB,mBAAmB,CAAC,CAAC,CAAC2C,GAAG,CAAIlH,IAAI,iBAClCQ,IAAA,CAACd,QAAQ;UAERsF,IAAI,EAAGhF,IAAI,CAACgF,IAAM;UAClBmC,YAAY,EAAC,MAAM;UACnBd,OAAO,EAAGA,CAAA,KAAM;YACf7D,WAAW,CAAE,IAAK,CAAC;YACnByC,SAAS,CAAEjF,IAAI,CAACqB,GAAI,CAAC;YACrB2B,YAAY,CAAC,CAAC;UACf,CAAG;UAAAyC,QAAA,EAEDzF,IAAI,CAAC+E;QAAK,GATN/E,IAAI,CAACmB,eAUF,CACT,CAAC,EACDS,mBAAmB,iBACpBpB,IAAA,CAACd,QAAQ;UAER0G,SAAS,EAAC,2CAA2C;UACrDpB,IAAI,EAAG5E,UAAY;UACnBgH,IAAI,EAAGlI,EAAE,CACR,yCACD,CAAG;UACHiI,YAAY,EAAC,MAAM;UACnBd,OAAO,EAAGA,CAAA,KAAM;YACf7D,WAAW,CAAE,IAAK,CAAC;YACnBpB,WAAW,CAAE;cACZD,eAAe,EACdN,qBAAqB;cACtB4D,IAAI,EAAE;YACP,CAAE,CAAC;YACH3C,aAAa,GAAI,IAAK,CAAC;YACvBkB,YAAY,CAAC,CAAC;UACf,CAAG;UAAAyC,QAAA,EAEDvG,EAAE,CAAE,iBAAkB;QAAC,GAlBrB,iBAmBK,CACV;MAAA,CACa,CAEhB;MACDmI,MAAM,EAAG,EAAI;MAAA5B,QAAA,EAEXU,eAAe,CAAC;IAAC,CACR,CACZ;EAAA,CACA,CAAC;AAEL,CAAC;AAED,SAASjF,eAAe,IAAIoG,6BAA6B","ignoreList":[]}