{"version":3,"names":["__","sprintf","hasBlockSupport","store","blocksStore","switchToBlockType","isTemplatePart","useSelect","useDispatch","useCommandLoader","copy","trash","remove","plus","add","group","ungroup","moveTo","move","BlockIcon","blockEditorStore","jsx","_jsx","useTransformCommands","replaceBlocks","multiSelect","blocks","clientIds","canRemove","possibleBlockTransformations","invalidSelection","select","getBlockRootClientId","getBlockTransformItems","getSelectedBlockClientIds","getBlocksByClientId","canRemoveBlocks","selectedBlockClientIds","selectedBlocks","filter","block","length","rootClientId","isLoading","commands","isTemplate","selectForMultipleBlocks","insertedBlocks","clientId","onBlockTransform","name","newBlocks","hasPossibleBlockTransformations","map","transformation","title","icon","replace","label","callback","close","useActionsCommands","canMoveBlocks","getBlockCount","setBlockMovingClientId","setNavigationMode","selectBlock","canMove","push","command","useQuickActionsCommands","isUngroupable","isGroupable","_isUngroupable","_isGroupable","canInsertBlockType","getDefaultBlockName","getGroupingBlockName","removeBlocks","duplicateBlocks","insertAfterBlock","insertBeforeBlock","onGroup","groupingBlockName","onUngroup","innerBlocks","canInsertDefaultBlock","canDuplicate","every","Array","isArray","useBlockCommands","hook","context"],"sources":["@wordpress/block-editor/src/components/use-block-commands/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport {\r\n\thasBlockSupport,\r\n\tstore as blocksStore,\r\n\tswitchToBlockType,\r\n\tisTemplatePart,\r\n} from '@wordpress/blocks';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { useCommandLoader } from '@wordpress/commands';\r\nimport {\r\n\tcopy,\r\n\ttrash as remove,\r\n\tplus as add,\r\n\tgroup,\r\n\tungroup,\r\n\tmoveTo as move,\r\n} from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockIcon from '../block-icon';\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nexport const useTransformCommands = () => {\r\n\tconst { replaceBlocks, multiSelect } = useDispatch( blockEditorStore );\r\n\tconst {\r\n\t\tblocks,\r\n\t\tclientIds,\r\n\t\tcanRemove,\r\n\t\tpossibleBlockTransformations,\r\n\t\tinvalidSelection,\r\n\t} = useSelect( ( select ) => {\r\n\t\tconst {\r\n\t\t\tgetBlockRootClientId,\r\n\t\t\tgetBlockTransformItems,\r\n\t\t\tgetSelectedBlockClientIds,\r\n\t\t\tgetBlocksByClientId,\r\n\t\t\tcanRemoveBlocks,\r\n\t\t} = select( blockEditorStore );\r\n\r\n\t\tconst selectedBlockClientIds = getSelectedBlockClientIds();\r\n\t\tconst selectedBlocks = getBlocksByClientId( selectedBlockClientIds );\r\n\r\n\t\t// selectedBlocks can have `null`s when something tries to call `selectBlock` with an inexistent clientId.\r\n\t\t// These nulls will cause fatal errors down the line.\r\n\t\t// In order to prevent discrepancies between selectedBlockClientIds and selectedBlocks, we effectively treat the entire selection as invalid.\r\n\t\t// @see https://github.com/WordPress/gutenberg/pull/59410#issuecomment-2006304536\r\n\t\tif ( selectedBlocks.filter( ( block ) => ! block ).length > 0 ) {\r\n\t\t\treturn {\r\n\t\t\t\tinvalidSelection: true,\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tconst rootClientId = getBlockRootClientId(\r\n\t\t\tselectedBlockClientIds[ 0 ]\r\n\t\t);\r\n\t\treturn {\r\n\t\t\tblocks: selectedBlocks,\r\n\t\t\tclientIds: selectedBlockClientIds,\r\n\t\t\tpossibleBlockTransformations: getBlockTransformItems(\r\n\t\t\t\tselectedBlocks,\r\n\t\t\t\trootClientId\r\n\t\t\t),\r\n\t\t\tcanRemove: canRemoveBlocks( selectedBlockClientIds ),\r\n\t\t\tinvalidSelection: false,\r\n\t\t};\r\n\t}, [] );\r\n\r\n\tif ( invalidSelection ) {\r\n\t\treturn {\r\n\t\t\tisLoading: false,\r\n\t\t\tcommands: [],\r\n\t\t};\r\n\t}\r\n\tconst isTemplate = blocks.length === 1 && isTemplatePart( blocks[ 0 ] );\r\n\r\n\tfunction selectForMultipleBlocks( insertedBlocks ) {\r\n\t\tif ( insertedBlocks.length > 1 ) {\r\n\t\t\tmultiSelect(\r\n\t\t\t\tinsertedBlocks[ 0 ].clientId,\r\n\t\t\t\tinsertedBlocks[ insertedBlocks.length - 1 ].clientId\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\t// Simple block tranformation based on the `Block Transforms` API.\r\n\tfunction onBlockTransform( name ) {\r\n\t\tconst newBlocks = switchToBlockType( blocks, name );\r\n\t\treplaceBlocks( clientIds, newBlocks );\r\n\t\tselectForMultipleBlocks( newBlocks );\r\n\t}\r\n\r\n\t/**\r\n\t * The `isTemplate` check is a stopgap solution here.\r\n\t * Ideally, the Transforms API should handle this\r\n\t * by allowing to exclude blocks from wildcard transformations.\r\n\t */\r\n\tconst hasPossibleBlockTransformations =\r\n\t\t!! possibleBlockTransformations.length && canRemove && ! isTemplate;\r\n\r\n\tif (\r\n\t\t! clientIds ||\r\n\t\tclientIds.length < 1 ||\r\n\t\t! hasPossibleBlockTransformations\r\n\t) {\r\n\t\treturn { isLoading: false, commands: [] };\r\n\t}\r\n\r\n\tconst commands = possibleBlockTransformations.map( ( transformation ) => {\r\n\t\tconst { name, title, icon } = transformation;\r\n\t\treturn {\r\n\t\t\tname: 'core/block-editor/transform-to-' + name.replace( '/', '-' ),\r\n\t\t\t// translators: %s: block title/name.\r\n\t\t\tlabel: sprintf( __( 'Transform to %s' ), title ),\r\n\t\t\ticon: <BlockIcon icon={ icon } />,\r\n\t\t\tcallback: ( { close } ) => {\r\n\t\t\t\tonBlockTransform( name );\r\n\t\t\t\tclose();\r\n\t\t\t},\r\n\t\t};\r\n\t} );\r\n\r\n\treturn { isLoading: false, commands };\r\n};\r\n\r\nconst useActionsCommands = () => {\r\n\tconst { clientIds } = useSelect( ( select ) => {\r\n\t\tconst { getSelectedBlockClientIds } = select( blockEditorStore );\r\n\t\tconst selectedBlockClientIds = getSelectedBlockClientIds();\r\n\r\n\t\treturn {\r\n\t\t\tclientIds: selectedBlockClientIds,\r\n\t\t};\r\n\t}, [] );\r\n\r\n\tconst { getBlockRootClientId, canMoveBlocks, getBlockCount } =\r\n\t\tuseSelect( blockEditorStore );\r\n\r\n\tconst { setBlockMovingClientId, setNavigationMode, selectBlock } =\r\n\t\tuseDispatch( blockEditorStore );\r\n\r\n\tif ( ! clientIds || clientIds.length < 1 ) {\r\n\t\treturn { isLoading: false, commands: [] };\r\n\t}\r\n\r\n\tconst rootClientId = getBlockRootClientId( clientIds[ 0 ] );\r\n\r\n\tconst canMove =\r\n\t\tcanMoveBlocks( clientIds ) && getBlockCount( rootClientId ) !== 1;\r\n\r\n\tconst commands = [];\r\n\r\n\tif ( canMove ) {\r\n\t\tcommands.push( {\r\n\t\t\tname: 'move-to',\r\n\t\t\tlabel: __( 'Move to' ),\r\n\t\t\tcallback: () => {\r\n\t\t\t\tsetNavigationMode( true );\r\n\t\t\t\tselectBlock( clientIds[ 0 ] );\r\n\t\t\t\tsetBlockMovingClientId( clientIds[ 0 ] );\r\n\t\t\t},\r\n\t\t\ticon: move,\r\n\t\t} );\r\n\t}\r\n\r\n\treturn {\r\n\t\tisLoading: false,\r\n\t\tcommands: commands.map( ( command ) => ( {\r\n\t\t\t...command,\r\n\t\t\tname: 'core/block-editor/action-' + command.name,\r\n\t\t\tcallback: ( { close } ) => {\r\n\t\t\t\tcommand.callback();\r\n\t\t\t\tclose();\r\n\t\t\t},\r\n\t\t} ) ),\r\n\t};\r\n};\r\n\r\nconst useQuickActionsCommands = () => {\r\n\tconst { clientIds, isUngroupable, isGroupable } = useSelect( ( select ) => {\r\n\t\tconst {\r\n\t\t\tgetSelectedBlockClientIds,\r\n\t\t\tisUngroupable: _isUngroupable,\r\n\t\t\tisGroupable: _isGroupable,\r\n\t\t} = select( blockEditorStore );\r\n\t\tconst selectedBlockClientIds = getSelectedBlockClientIds();\r\n\r\n\t\treturn {\r\n\t\t\tclientIds: selectedBlockClientIds,\r\n\t\t\tisUngroupable: _isUngroupable(),\r\n\t\t\tisGroupable: _isGroupable(),\r\n\t\t};\r\n\t}, [] );\r\n\tconst {\r\n\t\tcanInsertBlockType,\r\n\t\tgetBlockRootClientId,\r\n\t\tgetBlocksByClientId,\r\n\t\tcanRemoveBlocks,\r\n\t} = useSelect( blockEditorStore );\r\n\tconst { getDefaultBlockName, getGroupingBlockName } =\r\n\t\tuseSelect( blocksStore );\r\n\r\n\tconst blocks = getBlocksByClientId( clientIds );\r\n\r\n\tconst {\r\n\t\tremoveBlocks,\r\n\t\treplaceBlocks,\r\n\t\tduplicateBlocks,\r\n\t\tinsertAfterBlock,\r\n\t\tinsertBeforeBlock,\r\n\t} = useDispatch( blockEditorStore );\r\n\r\n\tconst onGroup = () => {\r\n\t\tif ( ! blocks.length ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst groupingBlockName = getGroupingBlockName();\r\n\r\n\t\t// Activate the `transform` on `core/group` which does the conversion.\r\n\t\tconst newBlocks = switchToBlockType( blocks, groupingBlockName );\r\n\r\n\t\tif ( ! newBlocks ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\treplaceBlocks( clientIds, newBlocks );\r\n\t};\r\n\tconst onUngroup = () => {\r\n\t\tif ( ! blocks.length ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst innerBlocks = blocks[ 0 ].innerBlocks;\r\n\r\n\t\tif ( ! innerBlocks.length ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\treplaceBlocks( clientIds, innerBlocks );\r\n\t};\r\n\r\n\tif ( ! clientIds || clientIds.length < 1 ) {\r\n\t\treturn { isLoading: false, commands: [] };\r\n\t}\r\n\r\n\tconst rootClientId = getBlockRootClientId( clientIds[ 0 ] );\r\n\tconst canInsertDefaultBlock = canInsertBlockType(\r\n\t\tgetDefaultBlockName(),\r\n\t\trootClientId\r\n\t);\r\n\tconst canDuplicate = blocks.every( ( block ) => {\r\n\t\treturn (\r\n\t\t\t!! block &&\r\n\t\t\thasBlockSupport( block.name, 'multiple', true ) &&\r\n\t\t\tcanInsertBlockType( block.name, rootClientId )\r\n\t\t);\r\n\t} );\r\n\tconst canRemove = canRemoveBlocks( clientIds );\r\n\r\n\tconst commands = [];\r\n\r\n\tif ( canDuplicate ) {\r\n\t\tcommands.push( {\r\n\t\t\tname: 'duplicate',\r\n\t\t\tlabel: __( 'Duplicate' ),\r\n\t\t\tcallback: () => duplicateBlocks( clientIds, true ),\r\n\t\t\ticon: copy,\r\n\t\t} );\r\n\t}\r\n\r\n\tif ( canInsertDefaultBlock ) {\r\n\t\tcommands.push(\r\n\t\t\t{\r\n\t\t\t\tname: 'add-before',\r\n\t\t\t\tlabel: __( 'Add before' ),\r\n\t\t\t\tcallback: () => {\r\n\t\t\t\t\tconst clientId = Array.isArray( clientIds )\r\n\t\t\t\t\t\t? clientIds[ 0 ]\r\n\t\t\t\t\t\t: clientId;\r\n\t\t\t\t\tinsertBeforeBlock( clientId );\r\n\t\t\t\t},\r\n\t\t\t\ticon: add,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: 'add-after',\r\n\t\t\t\tlabel: __( 'Add after' ),\r\n\t\t\t\tcallback: () => {\r\n\t\t\t\t\tconst clientId = Array.isArray( clientIds )\r\n\t\t\t\t\t\t? clientIds[ clientIds.length - 1 ]\r\n\t\t\t\t\t\t: clientId;\r\n\t\t\t\t\tinsertAfterBlock( clientId );\r\n\t\t\t\t},\r\n\t\t\t\ticon: add,\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tif ( isGroupable ) {\r\n\t\tcommands.push( {\r\n\t\t\tname: 'Group',\r\n\t\t\tlabel: __( 'Group' ),\r\n\t\t\tcallback: onGroup,\r\n\t\t\ticon: group,\r\n\t\t} );\r\n\t}\r\n\r\n\tif ( isUngroupable ) {\r\n\t\tcommands.push( {\r\n\t\t\tname: 'ungroup',\r\n\t\t\tlabel: __( 'Ungroup' ),\r\n\t\t\tcallback: onUngroup,\r\n\t\t\ticon: ungroup,\r\n\t\t} );\r\n\t}\r\n\r\n\tif ( canRemove ) {\r\n\t\tcommands.push( {\r\n\t\t\tname: 'remove',\r\n\t\t\tlabel: __( 'Delete' ),\r\n\t\t\tcallback: () => removeBlocks( clientIds, true ),\r\n\t\t\ticon: remove,\r\n\t\t} );\r\n\t}\r\n\r\n\treturn {\r\n\t\tisLoading: false,\r\n\t\tcommands: commands.map( ( command ) => ( {\r\n\t\t\t...command,\r\n\t\t\tname: 'core/block-editor/action-' + command.name,\r\n\t\t\tcallback: ( { close } ) => {\r\n\t\t\t\tcommand.callback();\r\n\t\t\t\tclose();\r\n\t\t\t},\r\n\t\t} ) ),\r\n\t};\r\n};\r\n\r\nexport const useBlockCommands = () => {\r\n\tuseCommandLoader( {\r\n\t\tname: 'core/block-editor/blockTransforms',\r\n\t\thook: useTransformCommands,\r\n\t} );\r\n\tuseCommandLoader( {\r\n\t\tname: 'core/block-editor/blockActions',\r\n\t\thook: useActionsCommands,\r\n\t} );\r\n\tuseCommandLoader( {\r\n\t\tname: 'core/block-editor/blockQuickActions',\r\n\t\thook: useQuickActionsCommands,\r\n\t\tcontext: 'block-selection-edit',\r\n\t} );\r\n};\r\n"],"mappings":"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","ignoreList":[]}