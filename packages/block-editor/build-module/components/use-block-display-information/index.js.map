{"version":3,"names":["useSelect","store","blocksStore","isReusableBlock","isTemplatePart","__experimentalGetBlockLabel","getBlockLabel","__","blockEditorStore","getPositionTypeLabel","attributes","positionType","style","position","type","useBlockDisplayInformation","clientId","select","getBlockName","getBlockAttributes","getBlockType","getActiveBlockVariation","blockName","blockType","match","isSynced","syncedTitle","undefined","title","positionLabel","blockTypeInfo","icon","description","anchor","name","metadata"],"sources":["D:/jungle/gutenberg/packages/block-editor/src/components/use-block-display-information/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect } from '@wordpress/data';\r\nimport {\r\n\tstore as blocksStore,\r\n\tisReusableBlock,\r\n\tisTemplatePart,\r\n\t__experimentalGetBlockLabel as getBlockLabel,\r\n} from '@wordpress/blocks';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\n/** @typedef {import('@wordpress/blocks').WPIcon} WPIcon */\r\n\r\n/**\r\n * Contains basic block's information for display reasons.\r\n *\r\n * @typedef {Object} WPBlockDisplayInformation\r\n *\r\n * @property {boolean} isSynced    True if is a reusable block or template part\r\n * @property {string}  title       Human-readable block type label.\r\n * @property {WPIcon}  icon        Block type icon.\r\n * @property {string}  description A detailed block type description.\r\n * @property {string}  anchor      HTML anchor.\r\n * @property {name}    name        A custom, human readable name for the block.\r\n */\r\n\r\n/**\r\n * Get the display label for a block's position type.\r\n *\r\n * @param {Object} attributes Block attributes.\r\n * @return {string} The position type label.\r\n */\r\nfunction getPositionTypeLabel( attributes ) {\r\n\tconst positionType = attributes?.style?.position?.type;\r\n\r\n\tif ( positionType === 'sticky' ) {\r\n\t\treturn __( 'Sticky' );\r\n\t}\r\n\r\n\tif ( positionType === 'fixed' ) {\r\n\t\treturn __( 'Fixed' );\r\n\t}\r\n\r\n\treturn null;\r\n}\r\n\r\n/**\r\n * Hook used to try to find a matching block variation and return\r\n * the appropriate information for display reasons. In order to\r\n * to try to find a match we need to things:\r\n * 1. Block's client id to extract it's current attributes.\r\n * 2. A block variation should have set `isActive` prop to a proper function.\r\n *\r\n * If for any reason a block variation match cannot be found,\r\n * the returned information come from the Block Type.\r\n * If no blockType is found with the provided clientId, returns null.\r\n *\r\n * @param {string} clientId Block's client id.\r\n * @return {?WPBlockDisplayInformation} Block's display information, or `null` when the block or its type not found.\r\n */\r\n\r\nexport default function useBlockDisplayInformation( clientId ) {\r\n\treturn useSelect(\r\n\t\t( select ) => {\r\n\t\t\tif ( ! clientId ) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tconst { getBlockName, getBlockAttributes } =\r\n\t\t\t\tselect( blockEditorStore );\r\n\t\t\tconst { getBlockType, getActiveBlockVariation } =\r\n\t\t\t\tselect( blocksStore );\r\n\t\t\tconst blockName = getBlockName( clientId );\r\n\t\t\tconst blockType = getBlockType( blockName );\r\n\t\t\tif ( ! blockType ) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tconst attributes = getBlockAttributes( clientId );\r\n\t\t\tconst match = getActiveBlockVariation( blockName, attributes );\r\n\t\t\tconst isSynced =\r\n\t\t\t\tisReusableBlock( blockType ) || isTemplatePart( blockType );\r\n\t\t\tconst syncedTitle = isSynced\r\n\t\t\t\t? getBlockLabel( blockType, attributes )\r\n\t\t\t\t: undefined;\r\n\t\t\tconst title = syncedTitle || blockType.title;\r\n\t\t\tconst positionLabel = getPositionTypeLabel( attributes );\r\n\t\t\tconst blockTypeInfo = {\r\n\t\t\t\tisSynced,\r\n\t\t\t\ttitle,\r\n\t\t\t\ticon: blockType.icon,\r\n\t\t\t\tdescription: blockType.description,\r\n\t\t\t\tanchor: attributes?.anchor,\r\n\t\t\t\tpositionLabel,\r\n\t\t\t\tpositionType: attributes?.style?.position?.type,\r\n\t\t\t\tname: attributes?.metadata?.name,\r\n\t\t\t};\r\n\t\t\tif ( ! match ) {\r\n\t\t\t\treturn blockTypeInfo;\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tisSynced,\r\n\t\t\t\ttitle: match.title || blockType.title,\r\n\t\t\t\ticon: match.icon || blockType.icon,\r\n\t\t\t\tdescription: match.description || blockType.description,\r\n\t\t\t\tanchor: attributes?.anchor,\r\n\t\t\t\tpositionLabel,\r\n\t\t\t\tpositionType: attributes?.style?.position?.type,\r\n\t\t\t\tname: attributes?.metadata?.name,\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ clientId ]\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}