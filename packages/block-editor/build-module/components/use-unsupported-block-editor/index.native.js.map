{"version":3,"names":["useSelect","serialize","store","blockEditorStore","UBE_INCOMPATIBLE_BLOCKS","useUnsupportedBlockEditor","clientId","select","getBlock","getSettings","capabilities","block","blockAttributes","attributes","blockDetails","blockName","name","blockContent","originalName","content","originalContent","isUnsupportedBlockEditorSupported","unsupportedBlockEditor","canEnableUnsupportedBlockEditor","isEditableInUnsupportedBlockEditor","includes"],"sources":["@wordpress/block-editor/src/components/use-unsupported-block-editor/index.native.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect } from '@wordpress/data';\r\nimport { serialize } from '@wordpress/blocks';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\n// Blocks that can't be edited through the Unsupported block editor identified by their name.\r\nconst UBE_INCOMPATIBLE_BLOCKS = [ 'core/block' ];\r\n\r\n/**\r\n * Hook that retrieves the settings to determine if the\r\n * Unsupported Block Editor can be used in a specific block.\r\n *\r\n * @param {string} clientId Client ID of block.\r\n * @return {Object} Unsupported block editor settings.\r\n */\r\nexport default function useUnsupportedBlockEditor( clientId ) {\r\n\treturn useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst { getBlock, getSettings } = select( blockEditorStore );\r\n\t\t\tconst { capabilities } = getSettings();\r\n\r\n\t\t\tconst block = getBlock( clientId );\r\n\t\t\tconst blockAttributes = block?.attributes || {};\r\n\r\n\t\t\tconst blockDetails = {\r\n\t\t\t\tblockName: block?.name,\r\n\t\t\t\tblockContent: serialize( block ? [ block ] : [] ),\r\n\t\t\t};\r\n\r\n\t\t\t// If the block is unsupported, use the `original` attributes to identify the block's name.\r\n\t\t\tif ( blockDetails.blockName === 'core/missing' ) {\r\n\t\t\t\tblockDetails.blockName = blockAttributes.originalName;\r\n\t\t\t\tblockDetails.blockContent =\r\n\t\t\t\t\tblockDetails.blockName === 'core/freeform'\r\n\t\t\t\t\t\t? blockAttributes.content\r\n\t\t\t\t\t\t: block?.originalContent;\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tisUnsupportedBlockEditorSupported:\r\n\t\t\t\t\tcapabilities?.unsupportedBlockEditor === true,\r\n\t\t\t\tcanEnableUnsupportedBlockEditor:\r\n\t\t\t\t\tcapabilities?.canEnableUnsupportedBlockEditor === true,\r\n\t\t\t\tisEditableInUnsupportedBlockEditor:\r\n\t\t\t\t\t! UBE_INCOMPATIBLE_BLOCKS.includes(\r\n\t\t\t\t\t\tblockDetails.blockName\r\n\t\t\t\t\t),\r\n\t\t\t\t...blockDetails,\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ clientId ]\r\n\t);\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,SAAS,QAAQ,mBAAmB;;AAE7C;AACA;AACA;AACA,SAASC,KAAK,IAAIC,gBAAgB,QAAQ,aAAa;;AAEvD;AACA,MAAMC,uBAAuB,GAAG,CAAE,YAAY,CAAE;;AAEhD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAASC,yBAAyBA,CAAEC,QAAQ,EAAG;EAC7D,OAAON,SAAS,CACbO,MAAM,IAAM;IACb,MAAM;MAAEC,QAAQ;MAAEC;IAAY,CAAC,GAAGF,MAAM,CAAEJ,gBAAiB,CAAC;IAC5D,MAAM;MAAEO;IAAa,CAAC,GAAGD,WAAW,CAAC,CAAC;IAEtC,MAAME,KAAK,GAAGH,QAAQ,CAAEF,QAAS,CAAC;IAClC,MAAMM,eAAe,GAAGD,KAAK,EAAEE,UAAU,IAAI,CAAC,CAAC;IAE/C,MAAMC,YAAY,GAAG;MACpBC,SAAS,EAAEJ,KAAK,EAAEK,IAAI;MACtBC,YAAY,EAAEhB,SAAS,CAAEU,KAAK,GAAG,CAAEA,KAAK,CAAE,GAAG,EAAG;IACjD,CAAC;;IAED;IACA,IAAKG,YAAY,CAACC,SAAS,KAAK,cAAc,EAAG;MAChDD,YAAY,CAACC,SAAS,GAAGH,eAAe,CAACM,YAAY;MACrDJ,YAAY,CAACG,YAAY,GACxBH,YAAY,CAACC,SAAS,KAAK,eAAe,GACvCH,eAAe,CAACO,OAAO,GACvBR,KAAK,EAAES,eAAe;IAC3B;IAEA,OAAO;MACNC,iCAAiC,EAChCX,YAAY,EAAEY,sBAAsB,KAAK,IAAI;MAC9CC,+BAA+B,EAC9Bb,YAAY,EAAEa,+BAA+B,KAAK,IAAI;MACvDC,kCAAkC,EACjC,CAAEpB,uBAAuB,CAACqB,QAAQ,CACjCX,YAAY,CAACC,SACd,CAAC;MACF,GAAGD;IACJ,CAAC;EACF,CAAC,EACD,CAAER,QAAQ,CACX,CAAC;AACF","ignoreList":[]}