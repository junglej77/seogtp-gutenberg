{"version":3,"names":["clsx","useSelect","__","useMergeRefs","useRefEffect","forwardRef","useMultiSelection","useTabNav","useArrowNav","useSelectAll","useDragSelection","useSelectionObserver","useClickSelection","useInput","useClipboardHandler","useEventRedirect","store","blockEditorStore","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","useWritingFlow","before","ref","after","hasMultiSelection","select","node","tabIndex","classList","add","setAttribute","remove","removeAttribute","WritingFlow","children","props","forwardedRef","className"],"sources":["@wordpress/block-editor/src/components/writing-flow/index.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect } from '@wordpress/data';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useMergeRefs, useRefEffect } from '@wordpress/compose';\r\nimport { forwardRef } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport useMultiSelection from './use-multi-selection';\r\nimport useTabNav from './use-tab-nav';\r\nimport useArrowNav from './use-arrow-nav';\r\nimport useSelectAll from './use-select-all';\r\nimport useDragSelection from './use-drag-selection';\r\nimport useSelectionObserver from './use-selection-observer';\r\nimport useClickSelection from './use-click-selection';\r\nimport useInput from './use-input';\r\nimport useClipboardHandler from './use-clipboard-handler';\r\nimport useEventRedirect from './use-event-redirect';\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nexport function useWritingFlow() {\r\n\tconst [ before, ref, after ] = useTabNav();\r\n\tconst hasMultiSelection = useSelect(\r\n\t\t( select ) => select( blockEditorStore ).hasMultiSelection(),\r\n\t\t[]\r\n\t);\r\n\r\n\treturn [\r\n\t\tbefore,\r\n\t\tuseMergeRefs( [\r\n\t\t\tref,\r\n\t\t\tuseClipboardHandler(),\r\n\t\t\tuseInput(),\r\n\t\t\tuseDragSelection(),\r\n\t\t\tuseSelectionObserver(),\r\n\t\t\tuseClickSelection(),\r\n\t\t\tuseMultiSelection(),\r\n\t\t\tuseSelectAll(),\r\n\t\t\tuseArrowNav(),\r\n\t\t\tuseRefEffect(\r\n\t\t\t\t( node ) => {\r\n\t\t\t\t\tnode.tabIndex = 0;\r\n\r\n\t\t\t\t\tif ( ! hasMultiSelection ) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tnode.classList.add( 'has-multi-selection' );\r\n\t\t\t\t\tnode.setAttribute(\r\n\t\t\t\t\t\t'aria-label',\r\n\t\t\t\t\t\t__( 'Multiple selected blocks' )\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\treturn () => {\r\n\t\t\t\t\t\tnode.classList.remove( 'has-multi-selection' );\r\n\t\t\t\t\t\tnode.removeAttribute( 'aria-label' );\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\t[ hasMultiSelection ]\r\n\t\t\t),\r\n\t\t\tuseEventRedirect(),\r\n\t\t] ),\r\n\t\tafter,\r\n\t];\r\n}\r\n\r\nfunction WritingFlow( { children, ...props }, forwardedRef ) {\r\n\tconst [ before, ref, after ] = useWritingFlow();\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ before }\r\n\t\t\t<div\r\n\t\t\t\t{ ...props }\r\n\t\t\t\tref={ useMergeRefs( [ ref, forwardedRef ] ) }\r\n\t\t\t\tclassName={ clsx(\r\n\t\t\t\t\tprops.className,\r\n\t\t\t\t\t'block-editor-writing-flow'\r\n\t\t\t\t) }\r\n\t\t\t>\r\n\t\t\t\t{ children }\r\n\t\t\t</div>\r\n\t\t\t{ after }\r\n\t\t</>\r\n\t);\r\n}\r\n\r\n/**\r\n * Handles selection and navigation across blocks. This component should be\r\n * wrapped around BlockList.\r\n *\r\n * @param {Object}  props          Component properties.\r\n * @param {Element} props.children Children to be rendered.\r\n */\r\nexport default forwardRef( WritingFlow );\r\n"],"mappings":"AAAA;AACA;AACA;AACA,OAAOA,IAAI,MAAM,MAAM;;AAEvB;AACA;AACA;AACA,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,EAAE,QAAQ,iBAAiB;AACpC,SAASC,YAAY,EAAEC,YAAY,QAAQ,oBAAoB;AAC/D,SAASC,UAAU,QAAQ,oBAAoB;;AAE/C;AACA;AACA;AACA,OAAOC,iBAAiB,MAAM,uBAAuB;AACrD,OAAOC,SAAS,MAAM,eAAe;AACrC,OAAOC,WAAW,MAAM,iBAAiB;AACzC,OAAOC,YAAY,MAAM,kBAAkB;AAC3C,OAAOC,gBAAgB,MAAM,sBAAsB;AACnD,OAAOC,oBAAoB,MAAM,0BAA0B;AAC3D,OAAOC,iBAAiB,MAAM,uBAAuB;AACrD,OAAOC,QAAQ,MAAM,aAAa;AAClC,OAAOC,mBAAmB,MAAM,yBAAyB;AACzD,OAAOC,gBAAgB,MAAM,sBAAsB;AACnD,SAASC,KAAK,IAAIC,gBAAgB,QAAQ,aAAa;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAExD,OAAO,SAASC,cAAcA,CAAA,EAAG;EAChC,MAAM,CAAEC,MAAM,EAAEC,GAAG,EAAEC,KAAK,CAAE,GAAGpB,SAAS,CAAC,CAAC;EAC1C,MAAMqB,iBAAiB,GAAG3B,SAAS,CAChC4B,MAAM,IAAMA,MAAM,CAAEZ,gBAAiB,CAAC,CAACW,iBAAiB,CAAC,CAAC,EAC5D,EACD,CAAC;EAED,OAAO,CACNH,MAAM,EACNtB,YAAY,CAAE,CACbuB,GAAG,EACHZ,mBAAmB,CAAC,CAAC,EACrBD,QAAQ,CAAC,CAAC,EACVH,gBAAgB,CAAC,CAAC,EAClBC,oBAAoB,CAAC,CAAC,EACtBC,iBAAiB,CAAC,CAAC,EACnBN,iBAAiB,CAAC,CAAC,EACnBG,YAAY,CAAC,CAAC,EACdD,WAAW,CAAC,CAAC,EACbJ,YAAY,CACT0B,IAAI,IAAM;IACXA,IAAI,CAACC,QAAQ,GAAG,CAAC;IAEjB,IAAK,CAAEH,iBAAiB,EAAG;MAC1B;IACD;IAEAE,IAAI,CAACE,SAAS,CAACC,GAAG,CAAE,qBAAsB,CAAC;IAC3CH,IAAI,CAACI,YAAY,CAChB,YAAY,EACZhC,EAAE,CAAE,0BAA2B,CAChC,CAAC;IAED,OAAO,MAAM;MACZ4B,IAAI,CAACE,SAAS,CAACG,MAAM,CAAE,qBAAsB,CAAC;MAC9CL,IAAI,CAACM,eAAe,CAAE,YAAa,CAAC;IACrC,CAAC;EACF,CAAC,EACD,CAAER,iBAAiB,CACpB,CAAC,EACDb,gBAAgB,CAAC,CAAC,CACjB,CAAC,EACHY,KAAK,CACL;AACF;AAEA,SAASU,WAAWA,CAAE;EAAEC,QAAQ;EAAE,GAAGC;AAAM,CAAC,EAAEC,YAAY,EAAG;EAC5D,MAAM,CAAEf,MAAM,EAAEC,GAAG,EAAEC,KAAK,CAAE,GAAGH,cAAc,CAAC,CAAC;EAC/C,oBACCD,KAAA,CAAAF,SAAA;IAAAiB,QAAA,GACGb,MAAM,eACRN,IAAA;MAAA,GACMoB,KAAK;MACVb,GAAG,EAAGvB,YAAY,CAAE,CAAEuB,GAAG,EAAEc,YAAY,CAAG,CAAG;MAC7CC,SAAS,EAAGzC,IAAI,CACfuC,KAAK,CAACE,SAAS,EACf,2BACD,CAAG;MAAAH,QAAA,EAEDA;IAAQ,CACN,CAAC,EACJX,KAAK;EAAA,CACN,CAAC;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAetB,UAAU,CAAEgC,WAAY,CAAC","ignoreList":[]}