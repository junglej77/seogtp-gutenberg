{"version":3,"names":["pasteHandler","findTransform","getBlockTransforms","hasBlockSupport","switchToBlockType","documentHasSelection","documentHasUncollapsedSelection","useDispatch","useRegistry","useSelect","useRefEffect","store","blockEditorStore","useNotifyCopy","setClipboardBlocks","getPasteEventData","useClipboardHandler","registry","getBlocksByClientId","getSelectedBlockClientIds","hasMultiSelection","getSettings","getBlockName","__unstableIsFullySelected","__unstableIsSelectionCollapsed","__unstableIsSelectionMergeable","__unstableGetSelectedBlocksWithPartialSelection","canInsertBlockType","getBlockRootClientId","flashBlock","removeBlocks","replaceBlocks","__unstableDeleteSelection","__unstableExpandSelection","__unstableSplitSelection","notifyCopy","node","handler","event","defaultPrevented","selectedBlockClientIds","length","target","ownerDocument","hasSelection","type","activeElement","isContentEditable","contains","isSelectionMergeable","shouldHandleWholeBlocks","expandSelectionIsNeeded","preventDefault","blocks","head","tail","inBetweenBlocks","slice","contentEditable","__experimentalCanUserUseUnfilteredHTML","canUserUseUnfilteredHTML","isInternal","clipboardData","getData","plainText","html","files","isFullySelected","fromTransforms","reduce","accumulator","file","transformation","transform","isMatch","push","flat","HTML","mode","__deprecatedOnSplit","firstSelectedClientId","rootClientId","newBlocks","block","name","rootBlockName","switchedBlocks","switchedBlock","innerBlock","innerBlocks","addEventListener","removeEventListener"],"sources":["@wordpress/block-editor/src/components/writing-flow/use-clipboard-handler.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tpasteHandler,\r\n\tfindTransform,\r\n\tgetBlockTransforms,\r\n\thasBlockSupport,\r\n\tswitchToBlockType,\r\n} from '@wordpress/blocks';\r\nimport {\r\n\tdocumentHasSelection,\r\n\tdocumentHasUncollapsedSelection,\r\n} from '@wordpress/dom';\r\nimport { useDispatch, useRegistry, useSelect } from '@wordpress/data';\r\nimport { useRefEffect } from '@wordpress/compose';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\nimport { useNotifyCopy } from '../../utils/use-notify-copy';\r\nimport { setClipboardBlocks } from './utils';\r\nimport { getPasteEventData } from '../../utils/pasting';\r\n\r\nexport default function useClipboardHandler() {\r\n\tconst registry = useRegistry();\r\n\tconst {\r\n\t\tgetBlocksByClientId,\r\n\t\tgetSelectedBlockClientIds,\r\n\t\thasMultiSelection,\r\n\t\tgetSettings,\r\n\t\tgetBlockName,\r\n\t\t__unstableIsFullySelected,\r\n\t\t__unstableIsSelectionCollapsed,\r\n\t\t__unstableIsSelectionMergeable,\r\n\t\t__unstableGetSelectedBlocksWithPartialSelection,\r\n\t\tcanInsertBlockType,\r\n\t\tgetBlockRootClientId,\r\n\t} = useSelect( blockEditorStore );\r\n\tconst {\r\n\t\tflashBlock,\r\n\t\tremoveBlocks,\r\n\t\treplaceBlocks,\r\n\t\t__unstableDeleteSelection,\r\n\t\t__unstableExpandSelection,\r\n\t\t__unstableSplitSelection,\r\n\t} = useDispatch( blockEditorStore );\r\n\tconst notifyCopy = useNotifyCopy();\r\n\r\n\treturn useRefEffect( ( node ) => {\r\n\t\tfunction handler( event ) {\r\n\t\t\tif ( event.defaultPrevented ) {\r\n\t\t\t\t// This was likely already handled in rich-text/use-paste-handler.js.\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst selectedBlockClientIds = getSelectedBlockClientIds();\r\n\r\n\t\t\tif ( selectedBlockClientIds.length === 0 ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Let native copy/paste behaviour take over in input fields.\r\n\t\t\t// But always handle multiple selected blocks.\r\n\t\t\tif ( ! hasMultiSelection() ) {\r\n\t\t\t\tconst { target } = event;\r\n\t\t\t\tconst { ownerDocument } = target;\r\n\t\t\t\t// If copying, only consider actual text selection as selection.\r\n\t\t\t\t// Otherwise, any focus on an input field is considered.\r\n\t\t\t\tconst hasSelection =\r\n\t\t\t\t\tevent.type === 'copy' || event.type === 'cut'\r\n\t\t\t\t\t\t? documentHasUncollapsedSelection( ownerDocument )\r\n\t\t\t\t\t\t: documentHasSelection( ownerDocument ) &&\r\n\t\t\t\t\t\t  ! ownerDocument.activeElement.isContentEditable;\r\n\r\n\t\t\t\t// Let native copy behaviour take over in input fields.\r\n\t\t\t\tif ( hasSelection ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst { activeElement } = event.target.ownerDocument;\r\n\r\n\t\t\tif ( ! node.contains( activeElement ) ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst isSelectionMergeable = __unstableIsSelectionMergeable();\r\n\t\t\tconst shouldHandleWholeBlocks =\r\n\t\t\t\t__unstableIsSelectionCollapsed() || __unstableIsFullySelected();\r\n\t\t\tconst expandSelectionIsNeeded =\r\n\t\t\t\t! shouldHandleWholeBlocks && ! isSelectionMergeable;\r\n\t\t\tif ( event.type === 'copy' || event.type === 'cut' ) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tif ( selectedBlockClientIds.length === 1 ) {\r\n\t\t\t\t\tflashBlock( selectedBlockClientIds[ 0 ] );\r\n\t\t\t\t}\r\n\t\t\t\t// If we have a partial selection that is not mergeable, just\r\n\t\t\t\t// expand the selection to the whole blocks.\r\n\t\t\t\tif ( expandSelectionIsNeeded ) {\r\n\t\t\t\t\t__unstableExpandSelection();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnotifyCopy( event.type, selectedBlockClientIds );\r\n\t\t\t\t\tlet blocks;\r\n\t\t\t\t\t// Check if we have partial selection.\r\n\t\t\t\t\tif ( shouldHandleWholeBlocks ) {\r\n\t\t\t\t\t\tblocks = getBlocksByClientId( selectedBlockClientIds );\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconst [ head, tail ] =\r\n\t\t\t\t\t\t\t__unstableGetSelectedBlocksWithPartialSelection();\r\n\t\t\t\t\t\tconst inBetweenBlocks = getBlocksByClientId(\r\n\t\t\t\t\t\t\tselectedBlockClientIds.slice(\r\n\t\t\t\t\t\t\t\t1,\r\n\t\t\t\t\t\t\t\tselectedBlockClientIds.length - 1\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tblocks = [ head, ...inBetweenBlocks, tail ];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tsetClipboardBlocks( event, blocks, registry );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif ( event.type === 'cut' ) {\r\n\t\t\t\t// We need to also check if at the start we needed to\r\n\t\t\t\t// expand the selection, as in this point we might have\r\n\t\t\t\t// programmatically fully selected the blocks above.\r\n\t\t\t\tif ( shouldHandleWholeBlocks && ! expandSelectionIsNeeded ) {\r\n\t\t\t\t\tremoveBlocks( selectedBlockClientIds );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tevent.target.ownerDocument.activeElement.contentEditable = false;\r\n\t\t\t\t\t__unstableDeleteSelection();\r\n\t\t\t\t}\r\n\t\t\t} else if ( event.type === 'paste' ) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\t__experimentalCanUserUseUnfilteredHTML:\r\n\t\t\t\t\t\tcanUserUseUnfilteredHTML,\r\n\t\t\t\t} = getSettings();\r\n\t\t\t\tconst isInternal =\r\n\t\t\t\t\tevent.clipboardData.getData( 'rich-text' ) === 'true';\r\n\t\t\t\tif ( isInternal ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst { plainText, html, files } = getPasteEventData( event );\r\n\t\t\t\tconst isFullySelected = __unstableIsFullySelected();\r\n\t\t\t\tlet blocks = [];\r\n\r\n\t\t\t\tif ( files.length ) {\r\n\t\t\t\t\tconst fromTransforms = getBlockTransforms( 'from' );\r\n\t\t\t\t\tblocks = files\r\n\t\t\t\t\t\t.reduce( ( accumulator, file ) => {\r\n\t\t\t\t\t\t\tconst transformation = findTransform(\r\n\t\t\t\t\t\t\t\tfromTransforms,\r\n\t\t\t\t\t\t\t\t( transform ) =>\r\n\t\t\t\t\t\t\t\t\ttransform.type === 'files' &&\r\n\t\t\t\t\t\t\t\t\ttransform.isMatch( [ file ] )\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tif ( transformation ) {\r\n\t\t\t\t\t\t\t\taccumulator.push(\r\n\t\t\t\t\t\t\t\t\ttransformation.transform( [ file ] )\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn accumulator;\r\n\t\t\t\t\t\t}, [] )\r\n\t\t\t\t\t\t.flat();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tblocks = pasteHandler( {\r\n\t\t\t\t\t\tHTML: html,\r\n\t\t\t\t\t\tplainText,\r\n\t\t\t\t\t\tmode: isFullySelected ? 'BLOCKS' : 'AUTO',\r\n\t\t\t\t\t\tcanUserUseUnfilteredHTML,\r\n\t\t\t\t\t} );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Inline paste: let rich text handle it.\r\n\t\t\t\tif ( typeof blocks === 'string' ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( isFullySelected ) {\r\n\t\t\t\t\treplaceBlocks(\r\n\t\t\t\t\t\tselectedBlockClientIds,\r\n\t\t\t\t\t\tblocks,\r\n\t\t\t\t\t\tblocks.length - 1,\r\n\t\t\t\t\t\t-1\r\n\t\t\t\t\t);\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// If a block doesn't support splitting, let rich text paste\r\n\t\t\t\t// inline.\r\n\t\t\t\tif (\r\n\t\t\t\t\t! hasMultiSelection() &&\r\n\t\t\t\t\t! hasBlockSupport(\r\n\t\t\t\t\t\tgetBlockName( selectedBlockClientIds[ 0 ] ),\r\n\t\t\t\t\t\t'splitting',\r\n\t\t\t\t\t\tfalse\r\n\t\t\t\t\t) &&\r\n\t\t\t\t\t! event.__deprecatedOnSplit\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst [ firstSelectedClientId ] = selectedBlockClientIds;\r\n\t\t\t\tconst rootClientId = getBlockRootClientId(\r\n\t\t\t\t\tfirstSelectedClientId\r\n\t\t\t\t);\r\n\r\n\t\t\t\tconst newBlocks = [];\r\n\r\n\t\t\t\tfor ( const block of blocks ) {\r\n\t\t\t\t\tif ( canInsertBlockType( block.name, rootClientId ) ) {\r\n\t\t\t\t\t\tnewBlocks.push( block );\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// If a block cannot be inserted in a root block, try\r\n\t\t\t\t\t\t// converting it to that root block type and insert the\r\n\t\t\t\t\t\t// inner blocks.\r\n\t\t\t\t\t\t// Example: paragraphs cannot be inserted into a list,\r\n\t\t\t\t\t\t// so convert the paragraphs to a list for list items.\r\n\t\t\t\t\t\tconst rootBlockName = getBlockName( rootClientId );\r\n\t\t\t\t\t\tconst switchedBlocks =\r\n\t\t\t\t\t\t\tblock.name !== rootBlockName\r\n\t\t\t\t\t\t\t\t? switchToBlockType( block, rootBlockName )\r\n\t\t\t\t\t\t\t\t: [ block ];\r\n\r\n\t\t\t\t\t\tif ( ! switchedBlocks ) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfor ( const switchedBlock of switchedBlocks ) {\r\n\t\t\t\t\t\t\tfor ( const innerBlock of switchedBlock.innerBlocks ) {\r\n\t\t\t\t\t\t\t\tnewBlocks.push( innerBlock );\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t__unstableSplitSelection( newBlocks );\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tnode.ownerDocument.addEventListener( 'copy', handler );\r\n\t\tnode.ownerDocument.addEventListener( 'cut', handler );\r\n\t\tnode.ownerDocument.addEventListener( 'paste', handler );\r\n\r\n\t\treturn () => {\r\n\t\t\tnode.ownerDocument.removeEventListener( 'copy', handler );\r\n\t\t\tnode.ownerDocument.removeEventListener( 'cut', handler );\r\n\t\t\tnode.ownerDocument.removeEventListener( 'paste', handler );\r\n\t\t};\r\n\t}, [] );\r\n}\r\n"],"mappings":"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","ignoreList":[]}