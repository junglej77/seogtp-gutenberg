{"version":3,"names":["__","privateApis","blocksPrivateApis","__experimentalItemGroup","ItemGroup","__experimentalItem","Item","__experimentalText","Text","__experimentalToolsPanel","ToolsPanel","__experimentalToolsPanelItem","ToolsPanelItem","__experimentalVStack","VStack","componentsPrivateApis","useRegistry","useSelect","useContext","Fragment","useViewportMatch","canBindAttribute","getBindableAttributes","unlock","InspectorControls","BlockContext","useBlockBindingsUtils","store","blockEditorStore","jsx","_jsx","jsxs","_jsxs","_Fragment","DropdownMenuV2","useToolsPanelDropdownMenuProps","isMobile","popoverProps","placement","offset","BlockBindingsPanelDropdown","fieldsList","attribute","binding","getBlockBindingsSources","registeredSources","updateBlockBindings","currentKey","args","key","children","Object","entries","map","name","fields","i","Group","keys","length","GroupLabel","label","value","RadioItem","onChange","source","checked","ItemLabel","ItemHelpText","Separator","BlockBindingsAttribute","sourceName","sourceProps","getBlockBindingsSource","isSourceInvalid","className","truncate","variant","isDestructive","ReadOnlyBlockBindingsPanelItems","bindings","EditableBlockBindingsPanelItems","attributes","hasValue","onDeselect","undefined","gutter","trigger","BlockBindingsPanel","blockName","metadata","registry","blockContext","removeAllBlockBindings","bindableAttributes","dropdownMenuProps","filteredBindings","forEach","canUpdateBlockBindings","select","getSettings","getFieldsList","usesContext","context","sourceList","readOnly","group","resetAll","isBordered","isSeparated","edit","attributeKeys","hasSupport"],"sources":["@wordpress/block-editor/src/hooks/block-bindings.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { privateApis as blocksPrivateApis } from '@wordpress/blocks';\r\nimport {\r\n\t__experimentalItemGroup as ItemGroup,\r\n\t__experimentalItem as Item,\r\n\t__experimentalText as Text,\r\n\t__experimentalToolsPanel as ToolsPanel,\r\n\t__experimentalToolsPanelItem as ToolsPanelItem,\r\n\t__experimentalVStack as VStack,\r\n\tprivateApis as componentsPrivateApis,\r\n} from '@wordpress/components';\r\nimport { useRegistry, useSelect } from '@wordpress/data';\r\nimport { useContext, Fragment } from '@wordpress/element';\r\nimport { useViewportMatch } from '@wordpress/compose';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport {\r\n\tcanBindAttribute,\r\n\tgetBindableAttributes,\r\n} from '../hooks/use-bindings-attributes';\r\nimport { unlock } from '../lock-unlock';\r\nimport InspectorControls from '../components/inspector-controls';\r\nimport BlockContext from '../components/block-context';\r\nimport { useBlockBindingsUtils } from '../utils/block-bindings';\r\nimport { store as blockEditorStore } from '../store';\r\n\r\nconst { DropdownMenuV2 } = unlock( componentsPrivateApis );\r\n\r\nconst useToolsPanelDropdownMenuProps = () => {\r\n\tconst isMobile = useViewportMatch( 'medium', '<' );\r\n\treturn ! isMobile\r\n\t\t? {\r\n\t\t\t\tpopoverProps: {\r\n\t\t\t\t\tplacement: 'left-start',\r\n\t\t\t\t\t// For non-mobile, inner sidebar width (248px) - button width (24px) - border (1px) + padding (16px) + spacing (20px)\r\n\t\t\t\t\toffset: 259,\r\n\t\t\t\t},\r\n\t\t  }\r\n\t\t: {};\r\n};\r\n\r\nfunction BlockBindingsPanelDropdown( { fieldsList, attribute, binding } ) {\r\n\tconst { getBlockBindingsSources } = unlock( blocksPrivateApis );\r\n\tconst registeredSources = getBlockBindingsSources();\r\n\tconst { updateBlockBindings } = useBlockBindingsUtils();\r\n\tconst currentKey = binding?.args?.key;\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ Object.entries( fieldsList ).map( ( [ name, fields ], i ) => (\r\n\t\t\t\t<Fragment key={ name }>\r\n\t\t\t\t\t<DropdownMenuV2.Group>\r\n\t\t\t\t\t\t{ Object.keys( fieldsList ).length > 1 && (\r\n\t\t\t\t\t\t\t<DropdownMenuV2.GroupLabel>\r\n\t\t\t\t\t\t\t\t{ registeredSources[ name ].label }\r\n\t\t\t\t\t\t\t</DropdownMenuV2.GroupLabel>\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t{ Object.entries( fields ).map( ( [ key, value ] ) => (\r\n\t\t\t\t\t\t\t<DropdownMenuV2.RadioItem\r\n\t\t\t\t\t\t\t\tkey={ key }\r\n\t\t\t\t\t\t\t\tonChange={ () =>\r\n\t\t\t\t\t\t\t\t\tupdateBlockBindings( {\r\n\t\t\t\t\t\t\t\t\t\t[ attribute ]: {\r\n\t\t\t\t\t\t\t\t\t\t\tsource: name,\r\n\t\t\t\t\t\t\t\t\t\t\targs: { key },\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t} )\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tname={ attribute + '-binding' }\r\n\t\t\t\t\t\t\t\tvalue={ key }\r\n\t\t\t\t\t\t\t\tchecked={ key === currentKey }\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<DropdownMenuV2.ItemLabel>\r\n\t\t\t\t\t\t\t\t\t{ key }\r\n\t\t\t\t\t\t\t\t</DropdownMenuV2.ItemLabel>\r\n\t\t\t\t\t\t\t\t<DropdownMenuV2.ItemHelpText>\r\n\t\t\t\t\t\t\t\t\t{ value }\r\n\t\t\t\t\t\t\t\t</DropdownMenuV2.ItemHelpText>\r\n\t\t\t\t\t\t\t</DropdownMenuV2.RadioItem>\r\n\t\t\t\t\t\t) ) }\r\n\t\t\t\t\t</DropdownMenuV2.Group>\r\n\t\t\t\t\t{ i !== Object.keys( fieldsList ).length - 1 && (\r\n\t\t\t\t\t\t<DropdownMenuV2.Separator />\r\n\t\t\t\t\t) }\r\n\t\t\t\t</Fragment>\r\n\t\t\t) ) }\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nfunction BlockBindingsAttribute( { attribute, binding } ) {\r\n\tconst { source: sourceName, args } = binding || {};\r\n\tconst sourceProps =\r\n\t\tunlock( blocksPrivateApis ).getBlockBindingsSource( sourceName );\r\n\tconst isSourceInvalid = ! sourceProps;\r\n\treturn (\r\n\t\t<VStack className=\"block-editor-bindings__item\">\r\n\t\t\t<Text truncate>{ attribute }</Text>\r\n\t\t\t{ !! binding && (\r\n\t\t\t\t<Text\r\n\t\t\t\t\ttruncate\r\n\t\t\t\t\tvariant={ ! isSourceInvalid && 'muted' }\r\n\t\t\t\t\tisDestructive={ isSourceInvalid }\r\n\t\t\t\t>\r\n\t\t\t\t\t{ isSourceInvalid\r\n\t\t\t\t\t\t? __( 'Invalid source' )\r\n\t\t\t\t\t\t: args?.key || sourceProps?.label || sourceName }\r\n\t\t\t\t</Text>\r\n\t\t\t) }\r\n\t\t</VStack>\r\n\t);\r\n}\r\n\r\nfunction ReadOnlyBlockBindingsPanelItems( { bindings } ) {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ Object.entries( bindings ).map( ( [ attribute, binding ] ) => (\r\n\t\t\t\t<Item key={ attribute }>\r\n\t\t\t\t\t<BlockBindingsAttribute\r\n\t\t\t\t\t\tattribute={ attribute }\r\n\t\t\t\t\t\tbinding={ binding }\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Item>\r\n\t\t\t) ) }\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nfunction EditableBlockBindingsPanelItems( {\r\n\tattributes,\r\n\tbindings,\r\n\tfieldsList,\r\n} ) {\r\n\tconst { updateBlockBindings } = useBlockBindingsUtils();\r\n\tconst isMobile = useViewportMatch( 'medium', '<' );\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ attributes.map( ( attribute ) => {\r\n\t\t\t\tconst binding = bindings[ attribute ];\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<ToolsPanelItem\r\n\t\t\t\t\t\tkey={ attribute }\r\n\t\t\t\t\t\thasValue={ () => !! binding }\r\n\t\t\t\t\t\tlabel={ attribute }\r\n\t\t\t\t\t\tonDeselect={ () => {\r\n\t\t\t\t\t\t\tupdateBlockBindings( {\r\n\t\t\t\t\t\t\t\t[ attribute ]: undefined,\r\n\t\t\t\t\t\t\t} );\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<DropdownMenuV2\r\n\t\t\t\t\t\t\tplacement={\r\n\t\t\t\t\t\t\t\tisMobile ? 'bottom-start' : 'left-start'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tgutter={ isMobile ? 8 : 36 }\r\n\t\t\t\t\t\t\ttrigger={\r\n\t\t\t\t\t\t\t\t<Item>\r\n\t\t\t\t\t\t\t\t\t<BlockBindingsAttribute\r\n\t\t\t\t\t\t\t\t\t\tattribute={ attribute }\r\n\t\t\t\t\t\t\t\t\t\tbinding={ binding }\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Item>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<BlockBindingsPanelDropdown\r\n\t\t\t\t\t\t\t\tfieldsList={ fieldsList }\r\n\t\t\t\t\t\t\t\tattribute={ attribute }\r\n\t\t\t\t\t\t\t\tbinding={ binding }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</DropdownMenuV2>\r\n\t\t\t\t\t</ToolsPanelItem>\r\n\t\t\t\t);\r\n\t\t\t} ) }\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport const BlockBindingsPanel = ( { name: blockName, metadata } ) => {\r\n\tconst registry = useRegistry();\r\n\tconst blockContext = useContext( BlockContext );\r\n\tconst { bindings } = metadata || {};\r\n\tconst { removeAllBlockBindings } = useBlockBindingsUtils();\r\n\tconst bindableAttributes = getBindableAttributes( blockName );\r\n\tconst dropdownMenuProps = useToolsPanelDropdownMenuProps();\r\n\r\n\tconst filteredBindings = { ...bindings };\r\n\tObject.keys( filteredBindings ).forEach( ( key ) => {\r\n\t\tif (\r\n\t\t\t! canBindAttribute( blockName, key ) ||\r\n\t\t\tfilteredBindings[ key ].source === 'core/pattern-overrides'\r\n\t\t) {\r\n\t\t\tdelete filteredBindings[ key ];\r\n\t\t}\r\n\t} );\r\n\r\n\tconst { canUpdateBlockBindings } = useSelect( ( select ) => {\r\n\t\treturn {\r\n\t\t\tcanUpdateBlockBindings:\r\n\t\t\t\tselect( blockEditorStore ).getSettings().canUpdateBlockBindings,\r\n\t\t};\r\n\t}, [] );\r\n\r\n\tif ( ! bindableAttributes || bindableAttributes.length === 0 ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst fieldsList = {};\r\n\tconst { getBlockBindingsSources } = unlock( blocksPrivateApis );\r\n\tconst registeredSources = getBlockBindingsSources();\r\n\tObject.entries( registeredSources ).forEach(\r\n\t\t( [ sourceName, { getFieldsList, usesContext } ] ) => {\r\n\t\t\tif ( getFieldsList ) {\r\n\t\t\t\t// Populate context.\r\n\t\t\t\tconst context = {};\r\n\t\t\t\tif ( usesContext?.length ) {\r\n\t\t\t\t\tfor ( const key of usesContext ) {\r\n\t\t\t\t\t\tcontext[ key ] = blockContext[ key ];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tconst sourceList = getFieldsList( {\r\n\t\t\t\t\tregistry,\r\n\t\t\t\t\tcontext,\r\n\t\t\t\t} );\r\n\t\t\t\t// Only add source if the list is not empty.\r\n\t\t\t\tif ( sourceList ) {\r\n\t\t\t\t\tfieldsList[ sourceName ] = { ...sourceList };\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n\t// Remove empty sources.\r\n\tObject.entries( fieldsList ).forEach( ( [ key, value ] ) => {\r\n\t\tif ( ! Object.keys( value ).length ) {\r\n\t\t\tdelete fieldsList[ key ];\r\n\t\t}\r\n\t} );\r\n\r\n\t// Lock the UI when the user can't update bindings or there are no fields to connect to.\r\n\tconst readOnly =\r\n\t\t! canUpdateBlockBindings || ! Object.keys( fieldsList ).length;\r\n\r\n\tif ( readOnly && Object.keys( filteredBindings ).length === 0 ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<InspectorControls group=\"bindings\">\r\n\t\t\t<ToolsPanel\r\n\t\t\t\tlabel={ __( 'Attributes' ) }\r\n\t\t\t\tresetAll={ () => {\r\n\t\t\t\t\tremoveAllBlockBindings();\r\n\t\t\t\t} }\r\n\t\t\t\tdropdownMenuProps={ dropdownMenuProps }\r\n\t\t\t\tclassName=\"block-editor-bindings__panel\"\r\n\t\t\t>\r\n\t\t\t\t<ItemGroup isBordered isSeparated>\r\n\t\t\t\t\t{ readOnly ? (\r\n\t\t\t\t\t\t<ReadOnlyBlockBindingsPanelItems\r\n\t\t\t\t\t\t\tbindings={ filteredBindings }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<EditableBlockBindingsPanelItems\r\n\t\t\t\t\t\t\tattributes={ bindableAttributes }\r\n\t\t\t\t\t\t\tbindings={ filteredBindings }\r\n\t\t\t\t\t\t\tfieldsList={ fieldsList }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) }\r\n\t\t\t\t</ItemGroup>\r\n\t\t\t\t<ItemGroup>\r\n\t\t\t\t\t<Text variant=\"muted\">\r\n\t\t\t\t\t\t{ __(\r\n\t\t\t\t\t\t\t'Attributes connected to custom fields or other dynamic data.'\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t</Text>\r\n\t\t\t\t</ItemGroup>\r\n\t\t\t</ToolsPanel>\r\n\t\t</InspectorControls>\r\n\t);\r\n};\r\n\r\nexport default {\r\n\tedit: BlockBindingsPanel,\r\n\tattributeKeys: [ 'metadata' ],\r\n\thasSupport() {\r\n\t\treturn true;\r\n\t},\r\n};\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,EAAE,QAAQ,iBAAiB;AACpC,SAASC,WAAW,IAAIC,iBAAiB,QAAQ,mBAAmB;AACpE,SACCC,uBAAuB,IAAIC,SAAS,EACpCC,kBAAkB,IAAIC,IAAI,EAC1BC,kBAAkB,IAAIC,IAAI,EAC1BC,wBAAwB,IAAIC,UAAU,EACtCC,4BAA4B,IAAIC,cAAc,EAC9CC,oBAAoB,IAAIC,MAAM,EAC9Bb,WAAW,IAAIc,qBAAqB,QAC9B,uBAAuB;AAC9B,SAASC,WAAW,EAAEC,SAAS,QAAQ,iBAAiB;AACxD,SAASC,UAAU,EAAEC,QAAQ,QAAQ,oBAAoB;AACzD,SAASC,gBAAgB,QAAQ,oBAAoB;;AAErD;AACA;AACA;AACA,SACCC,gBAAgB,EAChBC,qBAAqB,QACf,kCAAkC;AACzC,SAASC,MAAM,QAAQ,gBAAgB;AACvC,OAAOC,iBAAiB,MAAM,kCAAkC;AAChE,OAAOC,YAAY,MAAM,6BAA6B;AACtD,SAASC,qBAAqB,QAAQ,yBAAyB;AAC/D,SAASC,KAAK,IAAIC,gBAAgB,QAAQ,UAAU;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAAA,SAAAb,QAAA,IAAAc,SAAA;AAErD,MAAM;EAAEC;AAAe,CAAC,GAAGX,MAAM,CAAER,qBAAsB,CAAC;AAE1D,MAAMoB,8BAA8B,GAAGA,CAAA,KAAM;EAC5C,MAAMC,QAAQ,GAAGhB,gBAAgB,CAAE,QAAQ,EAAE,GAAI,CAAC;EAClD,OAAO,CAAEgB,QAAQ,GACd;IACAC,YAAY,EAAE;MACbC,SAAS,EAAE,YAAY;MACvB;MACAC,MAAM,EAAE;IACT;EACA,CAAC,GACD,CAAC,CAAC;AACN,CAAC;AAED,SAASC,0BAA0BA,CAAE;EAAEC,UAAU;EAAEC,SAAS;EAAEC;AAAQ,CAAC,EAAG;EACzE,MAAM;IAAEC;EAAwB,CAAC,GAAGrB,MAAM,CAAErB,iBAAkB,CAAC;EAC/D,MAAM2C,iBAAiB,GAAGD,uBAAuB,CAAC,CAAC;EACnD,MAAM;IAAEE;EAAoB,CAAC,GAAGpB,qBAAqB,CAAC,CAAC;EACvD,MAAMqB,UAAU,GAAGJ,OAAO,EAAEK,IAAI,EAAEC,GAAG;EACrC,oBACCnB,IAAA,CAAAG,SAAA;IAAAiB,QAAA,EACGC,MAAM,CAACC,OAAO,CAAEX,UAAW,CAAC,CAACY,GAAG,CAAE,CAAE,CAAEC,IAAI,EAAEC,MAAM,CAAE,EAAEC,CAAC,kBACxDxB,KAAA,CAACb,QAAQ;MAAA+B,QAAA,gBACRlB,KAAA,CAACE,cAAc,CAACuB,KAAK;QAAAP,QAAA,GAClBC,MAAM,CAACO,IAAI,CAAEjB,UAAW,CAAC,CAACkB,MAAM,GAAG,CAAC,iBACrC7B,IAAA,CAACI,cAAc,CAAC0B,UAAU;UAAAV,QAAA,EACvBL,iBAAiB,CAAES,IAAI,CAAE,CAACO;QAAK,CACP,CAC3B,EACCV,MAAM,CAACC,OAAO,CAAEG,MAAO,CAAC,CAACF,GAAG,CAAE,CAAE,CAAEJ,GAAG,EAAEa,KAAK,CAAE,kBAC/C9B,KAAA,CAACE,cAAc,CAAC6B,SAAS;UAExBC,QAAQ,EAAGA,CAAA,KACVlB,mBAAmB,CAAE;YACpB,CAAEJ,SAAS,GAAI;cACduB,MAAM,EAAEX,IAAI;cACZN,IAAI,EAAE;gBAAEC;cAAI;YACb;UACD,CAAE,CACF;UACDK,IAAI,EAAGZ,SAAS,GAAG,UAAY;UAC/BoB,KAAK,EAAGb,GAAK;UACbiB,OAAO,EAAGjB,GAAG,KAAKF,UAAY;UAAAG,QAAA,gBAE9BpB,IAAA,CAACI,cAAc,CAACiC,SAAS;YAAAjB,QAAA,EACtBD;UAAG,CACoB,CAAC,eAC3BnB,IAAA,CAACI,cAAc,CAACkC,YAAY;YAAAlB,QAAA,EACzBY;UAAK,CACqB,CAAC;QAAA,GAlBxBb,GAmBmB,CACzB,CAAC;MAAA,CACkB,CAAC,EACrBO,CAAC,KAAKL,MAAM,CAACO,IAAI,CAAEjB,UAAW,CAAC,CAACkB,MAAM,GAAG,CAAC,iBAC3C7B,IAAA,CAACI,cAAc,CAACmC,SAAS,IAAE,CAC3B;IAAA,GAjCcf,IAkCN,CACT;EAAC,CACF,CAAC;AAEL;AAEA,SAASgB,sBAAsBA,CAAE;EAAE5B,SAAS;EAAEC;AAAQ,CAAC,EAAG;EACzD,MAAM;IAAEsB,MAAM,EAAEM,UAAU;IAAEvB;EAAK,CAAC,GAAGL,OAAO,IAAI,CAAC,CAAC;EAClD,MAAM6B,WAAW,GAChBjD,MAAM,CAAErB,iBAAkB,CAAC,CAACuE,sBAAsB,CAAEF,UAAW,CAAC;EACjE,MAAMG,eAAe,GAAG,CAAEF,WAAW;EACrC,oBACCxC,KAAA,CAAClB,MAAM;IAAC6D,SAAS,EAAC,6BAA6B;IAAAzB,QAAA,gBAC9CpB,IAAA,CAACtB,IAAI;MAACoE,QAAQ;MAAA1B,QAAA,EAAGR;IAAS,CAAQ,CAAC,EACjC,CAAC,CAAEC,OAAO,iBACXb,IAAA,CAACtB,IAAI;MACJoE,QAAQ;MACRC,OAAO,EAAG,CAAEH,eAAe,IAAI,OAAS;MACxCI,aAAa,EAAGJ,eAAiB;MAAAxB,QAAA,EAE/BwB,eAAe,GACd1E,EAAE,CAAE,gBAAiB,CAAC,GACtBgD,IAAI,EAAEC,GAAG,IAAIuB,WAAW,EAAEX,KAAK,IAAIU;IAAU,CAC3C,CACN;EAAA,CACM,CAAC;AAEX;AAEA,SAASQ,+BAA+BA,CAAE;EAAEC;AAAS,CAAC,EAAG;EACxD,oBACClD,IAAA,CAAAG,SAAA;IAAAiB,QAAA,EACGC,MAAM,CAACC,OAAO,CAAE4B,QAAS,CAAC,CAAC3B,GAAG,CAAE,CAAE,CAAEX,SAAS,EAAEC,OAAO,CAAE,kBACzDb,IAAA,CAACxB,IAAI;MAAA4C,QAAA,eACJpB,IAAA,CAACwC,sBAAsB;QACtB5B,SAAS,EAAGA,SAAW;QACvBC,OAAO,EAAGA;MAAS,CACnB;IAAC,GAJSD,SAKN,CACL;EAAC,CACF,CAAC;AAEL;AAEA,SAASuC,+BAA+BA,CAAE;EACzCC,UAAU;EACVF,QAAQ;EACRvC;AACD,CAAC,EAAG;EACH,MAAM;IAAEK;EAAoB,CAAC,GAAGpB,qBAAqB,CAAC,CAAC;EACvD,MAAMU,QAAQ,GAAGhB,gBAAgB,CAAE,QAAQ,EAAE,GAAI,CAAC;EAClD,oBACCU,IAAA,CAAAG,SAAA;IAAAiB,QAAA,EACGgC,UAAU,CAAC7B,GAAG,CAAIX,SAAS,IAAM;MAClC,MAAMC,OAAO,GAAGqC,QAAQ,CAAEtC,SAAS,CAAE;MACrC,oBACCZ,IAAA,CAAClB,cAAc;QAEduE,QAAQ,EAAGA,CAAA,KAAM,CAAC,CAAExC,OAAS;QAC7BkB,KAAK,EAAGnB,SAAW;QACnB0C,UAAU,EAAGA,CAAA,KAAM;UAClBtC,mBAAmB,CAAE;YACpB,CAAEJ,SAAS,GAAI2C;UAChB,CAAE,CAAC;QACJ,CAAG;QAAAnC,QAAA,eAEHpB,IAAA,CAACI,cAAc;UACdI,SAAS,EACRF,QAAQ,GAAG,cAAc,GAAG,YAC5B;UACDkD,MAAM,EAAGlD,QAAQ,GAAG,CAAC,GAAG,EAAI;UAC5BmD,OAAO,eACNzD,IAAA,CAACxB,IAAI;YAAA4C,QAAA,eACJpB,IAAA,CAACwC,sBAAsB;cACtB5B,SAAS,EAAGA,SAAW;cACvBC,OAAO,EAAGA;YAAS,CACnB;UAAC,CACG,CACN;UAAAO,QAAA,eAEDpB,IAAA,CAACU,0BAA0B;YAC1BC,UAAU,EAAGA,UAAY;YACzBC,SAAS,EAAGA,SAAW;YACvBC,OAAO,EAAGA;UAAS,CACnB;QAAC,CACa;MAAC,GA5BXD,SA6BS,CAAC;IAEnB,CAAE;EAAC,CACF,CAAC;AAEL;AAEA,OAAO,MAAM8C,kBAAkB,GAAGA,CAAE;EAAElC,IAAI,EAAEmC,SAAS;EAAEC;AAAS,CAAC,KAAM;EACtE,MAAMC,QAAQ,GAAG3E,WAAW,CAAC,CAAC;EAC9B,MAAM4E,YAAY,GAAG1E,UAAU,CAAEO,YAAa,CAAC;EAC/C,MAAM;IAAEuD;EAAS,CAAC,GAAGU,QAAQ,IAAI,CAAC,CAAC;EACnC,MAAM;IAAEG;EAAuB,CAAC,GAAGnE,qBAAqB,CAAC,CAAC;EAC1D,MAAMoE,kBAAkB,GAAGxE,qBAAqB,CAAEmE,SAAU,CAAC;EAC7D,MAAMM,iBAAiB,GAAG5D,8BAA8B,CAAC,CAAC;EAE1D,MAAM6D,gBAAgB,GAAG;IAAE,GAAGhB;EAAS,CAAC;EACxC7B,MAAM,CAACO,IAAI,CAAEsC,gBAAiB,CAAC,CAACC,OAAO,CAAIhD,GAAG,IAAM;IACnD,IACC,CAAE5B,gBAAgB,CAAEoE,SAAS,EAAExC,GAAI,CAAC,IACpC+C,gBAAgB,CAAE/C,GAAG,CAAE,CAACgB,MAAM,KAAK,wBAAwB,EAC1D;MACD,OAAO+B,gBAAgB,CAAE/C,GAAG,CAAE;IAC/B;EACD,CAAE,CAAC;EAEH,MAAM;IAAEiD;EAAuB,CAAC,GAAGjF,SAAS,CAAIkF,MAAM,IAAM;IAC3D,OAAO;MACND,sBAAsB,EACrBC,MAAM,CAAEvE,gBAAiB,CAAC,CAACwE,WAAW,CAAC,CAAC,CAACF;IAC3C,CAAC;EACF,CAAC,EAAE,EAAG,CAAC;EAEP,IAAK,CAAEJ,kBAAkB,IAAIA,kBAAkB,CAACnC,MAAM,KAAK,CAAC,EAAG;IAC9D,OAAO,IAAI;EACZ;EAEA,MAAMlB,UAAU,GAAG,CAAC,CAAC;EACrB,MAAM;IAAEG;EAAwB,CAAC,GAAGrB,MAAM,CAAErB,iBAAkB,CAAC;EAC/D,MAAM2C,iBAAiB,GAAGD,uBAAuB,CAAC,CAAC;EACnDO,MAAM,CAACC,OAAO,CAAEP,iBAAkB,CAAC,CAACoD,OAAO,CAC1C,CAAE,CAAE1B,UAAU,EAAE;IAAE8B,aAAa;IAAEC;EAAY,CAAC,CAAE,KAAM;IACrD,IAAKD,aAAa,EAAG;MACpB;MACA,MAAME,OAAO,GAAG,CAAC,CAAC;MAClB,IAAKD,WAAW,EAAE3C,MAAM,EAAG;QAC1B,KAAM,MAAMV,GAAG,IAAIqD,WAAW,EAAG;UAChCC,OAAO,CAAEtD,GAAG,CAAE,GAAG2C,YAAY,CAAE3C,GAAG,CAAE;QACrC;MACD;MACA,MAAMuD,UAAU,GAAGH,aAAa,CAAE;QACjCV,QAAQ;QACRY;MACD,CAAE,CAAC;MACH;MACA,IAAKC,UAAU,EAAG;QACjB/D,UAAU,CAAE8B,UAAU,CAAE,GAAG;UAAE,GAAGiC;QAAW,CAAC;MAC7C;IACD;EACD,CACD,CAAC;EACD;EACArD,MAAM,CAACC,OAAO,CAAEX,UAAW,CAAC,CAACwD,OAAO,CAAE,CAAE,CAAEhD,GAAG,EAAEa,KAAK,CAAE,KAAM;IAC3D,IAAK,CAAEX,MAAM,CAACO,IAAI,CAAEI,KAAM,CAAC,CAACH,MAAM,EAAG;MACpC,OAAOlB,UAAU,CAAEQ,GAAG,CAAE;IACzB;EACD,CAAE,CAAC;;EAEH;EACA,MAAMwD,QAAQ,GACb,CAAEP,sBAAsB,IAAI,CAAE/C,MAAM,CAACO,IAAI,CAAEjB,UAAW,CAAC,CAACkB,MAAM;EAE/D,IAAK8C,QAAQ,IAAItD,MAAM,CAACO,IAAI,CAAEsC,gBAAiB,CAAC,CAACrC,MAAM,KAAK,CAAC,EAAG;IAC/D,OAAO,IAAI;EACZ;EAEA,oBACC7B,IAAA,CAACN,iBAAiB;IAACkF,KAAK,EAAC,UAAU;IAAAxD,QAAA,eAClClB,KAAA,CAACtB,UAAU;MACVmD,KAAK,EAAG7D,EAAE,CAAE,YAAa,CAAG;MAC5B2G,QAAQ,EAAGA,CAAA,KAAM;QAChBd,sBAAsB,CAAC,CAAC;MACzB,CAAG;MACHE,iBAAiB,EAAGA,iBAAmB;MACvCpB,SAAS,EAAC,8BAA8B;MAAAzB,QAAA,gBAExCpB,IAAA,CAAC1B,SAAS;QAACwG,UAAU;QAACC,WAAW;QAAA3D,QAAA,EAC9BuD,QAAQ,gBACT3E,IAAA,CAACiD,+BAA+B;UAC/BC,QAAQ,EAAGgB;QAAkB,CAC7B,CAAC,gBAEFlE,IAAA,CAACmD,+BAA+B;UAC/BC,UAAU,EAAGY,kBAAoB;UACjCd,QAAQ,EAAGgB,gBAAkB;UAC7BvD,UAAU,EAAGA;QAAY,CACzB;MACD,CACS,CAAC,eACZX,IAAA,CAAC1B,SAAS;QAAA8C,QAAA,eACTpB,IAAA,CAACtB,IAAI;UAACqE,OAAO,EAAC,OAAO;UAAA3B,QAAA,EAClBlD,EAAE,CACH,8DACD;QAAC,CACI;MAAC,CACG,CAAC;IAAA,CACD;EAAC,CACK,CAAC;AAEtB,CAAC;AAED,eAAe;EACd8G,IAAI,EAAEtB,kBAAkB;EACxBuB,aAAa,EAAE,CAAE,UAAU,CAAE;EAC7BC,UAAUA,CAAA,EAAG;IACZ,OAAO,IAAI;EACZ;AACD,CAAC","ignoreList":[]}