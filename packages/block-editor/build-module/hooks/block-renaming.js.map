{"version":3,"names":["addFilter","hasBlockSupport","addLabelCallback","settings","__experimentalLabel","supportsBlockNaming","attributes","context","metadata","name"],"sources":["@wordpress/block-editor/src/hooks/block-renaming.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { addFilter } from '@wordpress/hooks';\r\nimport { hasBlockSupport } from '@wordpress/blocks';\r\n\r\n/**\r\n * Filters registered block settings, adding an `__experimentalLabel` callback if one does not already exist.\r\n *\r\n * @param {Object} settings Original block settings.\r\n *\r\n * @return {Object} Filtered block settings.\r\n */\r\nexport function addLabelCallback( settings ) {\r\n\t// If blocks provide their own label callback, do not override it.\r\n\tif ( settings.__experimentalLabel ) {\r\n\t\treturn settings;\r\n\t}\r\n\r\n\tconst supportsBlockNaming = hasBlockSupport(\r\n\t\tsettings,\r\n\t\t'renaming',\r\n\t\ttrue // default value\r\n\t);\r\n\r\n\t// Check whether block metadata is supported before using it.\r\n\tif ( supportsBlockNaming ) {\r\n\t\tsettings.__experimentalLabel = ( attributes, { context } ) => {\r\n\t\t\tconst { metadata } = attributes;\r\n\r\n\t\t\t// In the list view, use the block's name attribute as the label.\r\n\t\t\tif ( context === 'list-view' && metadata?.name ) {\r\n\t\t\t\treturn metadata.name;\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\treturn settings;\r\n}\r\n\r\naddFilter(\r\n\t'blocks.registerBlockType',\r\n\t'core/metadata/addLabelCallback',\r\n\taddLabelCallback\r\n);\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,SAAS,QAAQ,kBAAkB;AAC5C,SAASC,eAAe,QAAQ,mBAAmB;;AAEnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,gBAAgBA,CAAEC,QAAQ,EAAG;EAC5C;EACA,IAAKA,QAAQ,CAACC,mBAAmB,EAAG;IACnC,OAAOD,QAAQ;EAChB;EAEA,MAAME,mBAAmB,GAAGJ,eAAe,CAC1CE,QAAQ,EACR,UAAU,EACV,IAAI,CAAC;EACN,CAAC;;EAED;EACA,IAAKE,mBAAmB,EAAG;IAC1BF,QAAQ,CAACC,mBAAmB,GAAG,CAAEE,UAAU,EAAE;MAAEC;IAAQ,CAAC,KAAM;MAC7D,MAAM;QAAEC;MAAS,CAAC,GAAGF,UAAU;;MAE/B;MACA,IAAKC,OAAO,KAAK,WAAW,IAAIC,QAAQ,EAAEC,IAAI,EAAG;QAChD,OAAOD,QAAQ,CAACC,IAAI;MACrB;IACD,CAAC;EACF;EAEA,OAAON,QAAQ;AAChB;AAEAH,SAAS,CACR,0BAA0B,EAC1B,gCAAgC,EAChCE,gBACD,CAAC","ignoreList":[]}