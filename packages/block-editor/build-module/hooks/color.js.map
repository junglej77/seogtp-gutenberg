{"version":3,"names":["clsx","addFilter","getBlockSupport","useMemo","Platform","useCallback","useSelect","getColorClassName","getColorObjectByAttributeValues","__experimentalGetGradientClass","cleanEmptyObject","transformStyles","shouldSkipSerialization","getBackgroundImageClasses","useSettings","InspectorControls","useHasColorPanel","default","StylesColorPanel","BlockColorContrastChecker","store","blockEditorStore","jsx","_jsx","COLOR_SUPPORT_KEY","hasColorSupport","blockNameOrType","colorSupport","link","gradient","background","text","hasLinkColorSupport","blockType","OS","hasGradientSupport","gradients","hasBackgroundColorSupport","hasTextColorSupport","addAttributes","settings","attributes","backgroundColor","Object","assign","type","textColor","addSaveProps","props","hasGradient","style","shouldSerialize","feature","textClass","undefined","gradientClass","backgroundClass","serializeHasBackground","hasBackground","color","newClassName","className","elements","styleToAttributes","textColorValue","textColorSlug","startsWith","substring","length","backgroundColorValue","backgroundColorSlug","gradientValue","gradientSlug","updatedStyle","attributesToStyle","ColorInspectorControl","children","resetAllFilter","attributesResetAllFilter","existingStyle","group","ColorEdit","clientId","name","setAttributes","isEnabled","selector","select","getBlockAttributes","value","onChange","newStyle","defaultControls","enableContrastChecking","as","panelId","enableContrastChecker","useBlockProps","userPalette","themePalette","defaultPalette","colors","extraStyles","saveProps","hasBackgroundValue","attributeKeys","hasSupport","MIGRATION_PATHS","linkColor","addTransforms","result","source","index","results","destinationBlockType","activeSupports"],"sources":["@wordpress/block-editor/src/hooks/color.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { addFilter } from '@wordpress/hooks';\r\nimport { getBlockSupport } from '@wordpress/blocks';\r\nimport { useMemo, Platform, useCallback } from '@wordpress/element';\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport {\r\n\tgetColorClassName,\r\n\tgetColorObjectByAttributeValues,\r\n} from '../components/colors';\r\nimport { __experimentalGetGradientClass } from '../components/gradients';\r\nimport {\r\n\tcleanEmptyObject,\r\n\ttransformStyles,\r\n\tshouldSkipSerialization,\r\n} from './utils';\r\nimport { getBackgroundImageClasses } from './background';\r\nimport { useSettings } from '../components/use-settings';\r\nimport InspectorControls from '../components/inspector-controls';\r\nimport {\r\n\tuseHasColorPanel,\r\n\tdefault as StylesColorPanel,\r\n} from '../components/global-styles/color-panel';\r\nimport BlockColorContrastChecker from './contrast-checker';\r\nimport { store as blockEditorStore } from '../store';\r\n\r\nexport const COLOR_SUPPORT_KEY = 'color';\r\n\r\nconst hasColorSupport = ( blockNameOrType ) => {\r\n\tconst colorSupport = getBlockSupport( blockNameOrType, COLOR_SUPPORT_KEY );\r\n\treturn (\r\n\t\tcolorSupport &&\r\n\t\t( colorSupport.link === true ||\r\n\t\t\tcolorSupport.gradient === true ||\r\n\t\t\tcolorSupport.background !== false ||\r\n\t\t\tcolorSupport.text !== false )\r\n\t);\r\n};\r\n\r\nconst hasLinkColorSupport = ( blockType ) => {\r\n\tif ( Platform.OS !== 'web' ) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tconst colorSupport = getBlockSupport( blockType, COLOR_SUPPORT_KEY );\r\n\r\n\treturn (\r\n\t\tcolorSupport !== null &&\r\n\t\ttypeof colorSupport === 'object' &&\r\n\t\t!! colorSupport.link\r\n\t);\r\n};\r\n\r\nconst hasGradientSupport = ( blockNameOrType ) => {\r\n\tconst colorSupport = getBlockSupport( blockNameOrType, COLOR_SUPPORT_KEY );\r\n\r\n\treturn (\r\n\t\tcolorSupport !== null &&\r\n\t\ttypeof colorSupport === 'object' &&\r\n\t\t!! colorSupport.gradients\r\n\t);\r\n};\r\n\r\nconst hasBackgroundColorSupport = ( blockType ) => {\r\n\tconst colorSupport = getBlockSupport( blockType, COLOR_SUPPORT_KEY );\r\n\r\n\treturn colorSupport && colorSupport.background !== false;\r\n};\r\n\r\nconst hasTextColorSupport = ( blockType ) => {\r\n\tconst colorSupport = getBlockSupport( blockType, COLOR_SUPPORT_KEY );\r\n\r\n\treturn colorSupport && colorSupport.text !== false;\r\n};\r\n\r\n/**\r\n * Filters registered block settings, extending attributes to include\r\n * `backgroundColor` and `textColor` attribute.\r\n *\r\n * @param {Object} settings Original block settings.\r\n *\r\n * @return {Object} Filtered block settings.\r\n */\r\nfunction addAttributes( settings ) {\r\n\tif ( ! hasColorSupport( settings ) ) {\r\n\t\treturn settings;\r\n\t}\r\n\r\n\t// Allow blocks to specify their own attribute definition with default values if needed.\r\n\tif ( ! settings.attributes.backgroundColor ) {\r\n\t\tObject.assign( settings.attributes, {\r\n\t\t\tbackgroundColor: {\r\n\t\t\t\ttype: 'string',\r\n\t\t\t},\r\n\t\t} );\r\n\t}\r\n\tif ( ! settings.attributes.textColor ) {\r\n\t\tObject.assign( settings.attributes, {\r\n\t\t\ttextColor: {\r\n\t\t\t\ttype: 'string',\r\n\t\t\t},\r\n\t\t} );\r\n\t}\r\n\r\n\tif ( hasGradientSupport( settings ) && ! settings.attributes.gradient ) {\r\n\t\tObject.assign( settings.attributes, {\r\n\t\t\tgradient: {\r\n\t\t\t\ttype: 'string',\r\n\t\t\t},\r\n\t\t} );\r\n\t}\r\n\r\n\treturn settings;\r\n}\r\n\r\n/**\r\n * Override props assigned to save component to inject colors classnames.\r\n *\r\n * @param {Object}        props           Additional props applied to save element.\r\n * @param {Object|string} blockNameOrType Block type.\r\n * @param {Object}        attributes      Block attributes.\r\n *\r\n * @return {Object} Filtered props applied to save element.\r\n */\r\nexport function addSaveProps( props, blockNameOrType, attributes ) {\r\n\tif (\r\n\t\t! hasColorSupport( blockNameOrType ) ||\r\n\t\tshouldSkipSerialization( blockNameOrType, COLOR_SUPPORT_KEY )\r\n\t) {\r\n\t\treturn props;\r\n\t}\r\n\r\n\tconst hasGradient = hasGradientSupport( blockNameOrType );\r\n\r\n\t// I'd have preferred to avoid the \"style\" attribute usage here\r\n\tconst { backgroundColor, textColor, gradient, style } = attributes;\r\n\r\n\tconst shouldSerialize = ( feature ) =>\r\n\t\t! shouldSkipSerialization(\r\n\t\t\tblockNameOrType,\r\n\t\t\tCOLOR_SUPPORT_KEY,\r\n\t\t\tfeature\r\n\t\t);\r\n\r\n\t// Primary color classes must come before the `has-text-color`,\r\n\t// `has-background` and `has-link-color` classes to maintain backwards\r\n\t// compatibility and avoid block invalidations.\r\n\tconst textClass = shouldSerialize( 'text' )\r\n\t\t? getColorClassName( 'color', textColor )\r\n\t\t: undefined;\r\n\r\n\tconst gradientClass = shouldSerialize( 'gradients' )\r\n\t\t? __experimentalGetGradientClass( gradient )\r\n\t\t: undefined;\r\n\r\n\tconst backgroundClass = shouldSerialize( 'background' )\r\n\t\t? getColorClassName( 'background-color', backgroundColor )\r\n\t\t: undefined;\r\n\r\n\tconst serializeHasBackground =\r\n\t\tshouldSerialize( 'background' ) || shouldSerialize( 'gradients' );\r\n\tconst hasBackground =\r\n\t\tbackgroundColor ||\r\n\t\tstyle?.color?.background ||\r\n\t\t( hasGradient && ( gradient || style?.color?.gradient ) );\r\n\r\n\tconst newClassName = clsx( props.className, textClass, gradientClass, {\r\n\t\t// Don't apply the background class if there's a custom gradient.\r\n\t\t[ backgroundClass ]:\r\n\t\t\t( ! hasGradient || ! style?.color?.gradient ) && !! backgroundClass,\r\n\t\t'has-text-color':\r\n\t\t\tshouldSerialize( 'text' ) && ( textColor || style?.color?.text ),\r\n\t\t'has-background': serializeHasBackground && hasBackground,\r\n\t\t'has-link-color':\r\n\t\t\tshouldSerialize( 'link' ) && style?.elements?.link?.color,\r\n\t} );\r\n\tprops.className = newClassName ? newClassName : undefined;\r\n\r\n\treturn props;\r\n}\r\n\r\nfunction styleToAttributes( style ) {\r\n\tconst textColorValue = style?.color?.text;\r\n\tconst textColorSlug = textColorValue?.startsWith( 'var:preset|color|' )\r\n\t\t? textColorValue.substring( 'var:preset|color|'.length )\r\n\t\t: undefined;\r\n\tconst backgroundColorValue = style?.color?.background;\r\n\tconst backgroundColorSlug = backgroundColorValue?.startsWith(\r\n\t\t'var:preset|color|'\r\n\t)\r\n\t\t? backgroundColorValue.substring( 'var:preset|color|'.length )\r\n\t\t: undefined;\r\n\tconst gradientValue = style?.color?.gradient;\r\n\tconst gradientSlug = gradientValue?.startsWith( 'var:preset|gradient|' )\r\n\t\t? gradientValue.substring( 'var:preset|gradient|'.length )\r\n\t\t: undefined;\r\n\tconst updatedStyle = { ...style };\r\n\tupdatedStyle.color = {\r\n\t\t...updatedStyle.color,\r\n\t\ttext: textColorSlug ? undefined : textColorValue,\r\n\t\tbackground: backgroundColorSlug ? undefined : backgroundColorValue,\r\n\t\tgradient: gradientSlug ? undefined : gradientValue,\r\n\t};\r\n\treturn {\r\n\t\tstyle: cleanEmptyObject( updatedStyle ),\r\n\t\ttextColor: textColorSlug,\r\n\t\tbackgroundColor: backgroundColorSlug,\r\n\t\tgradient: gradientSlug,\r\n\t};\r\n}\r\n\r\nfunction attributesToStyle( attributes ) {\r\n\treturn {\r\n\t\t...attributes.style,\r\n\t\tcolor: {\r\n\t\t\t...attributes.style?.color,\r\n\t\t\ttext: attributes.textColor\r\n\t\t\t\t? 'var:preset|color|' + attributes.textColor\r\n\t\t\t\t: attributes.style?.color?.text,\r\n\t\t\tbackground: attributes.backgroundColor\r\n\t\t\t\t? 'var:preset|color|' + attributes.backgroundColor\r\n\t\t\t\t: attributes.style?.color?.background,\r\n\t\t\tgradient: attributes.gradient\r\n\t\t\t\t? 'var:preset|gradient|' + attributes.gradient\r\n\t\t\t\t: attributes.style?.color?.gradient,\r\n\t\t},\r\n\t};\r\n}\r\n\r\nfunction ColorInspectorControl( { children, resetAllFilter } ) {\r\n\tconst attributesResetAllFilter = useCallback(\r\n\t\t( attributes ) => {\r\n\t\t\tconst existingStyle = attributesToStyle( attributes );\r\n\t\t\tconst updatedStyle = resetAllFilter( existingStyle );\r\n\t\t\treturn {\r\n\t\t\t\t...attributes,\r\n\t\t\t\t...styleToAttributes( updatedStyle ),\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ resetAllFilter ]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<InspectorControls\r\n\t\t\tgroup=\"color\"\r\n\t\t\tresetAllFilter={ attributesResetAllFilter }\r\n\t\t>\r\n\t\t\t{ children }\r\n\t\t</InspectorControls>\r\n\t);\r\n}\r\n\r\nexport function ColorEdit( { clientId, name, setAttributes, settings } ) {\r\n\tconst isEnabled = useHasColorPanel( settings );\r\n\tfunction selector( select ) {\r\n\t\tconst { style, textColor, backgroundColor, gradient } =\r\n\t\t\tselect( blockEditorStore ).getBlockAttributes( clientId ) || {};\r\n\t\treturn { style, textColor, backgroundColor, gradient };\r\n\t}\r\n\tconst { style, textColor, backgroundColor, gradient } = useSelect(\r\n\t\tselector,\r\n\t\t[ clientId ]\r\n\t);\r\n\tconst value = useMemo( () => {\r\n\t\treturn attributesToStyle( {\r\n\t\t\tstyle,\r\n\t\t\ttextColor,\r\n\t\t\tbackgroundColor,\r\n\t\t\tgradient,\r\n\t\t} );\r\n\t}, [ style, textColor, backgroundColor, gradient ] );\r\n\r\n\tconst onChange = ( newStyle ) => {\r\n\t\tsetAttributes( styleToAttributes( newStyle ) );\r\n\t};\r\n\r\n\tif ( ! isEnabled ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst defaultControls = getBlockSupport( name, [\r\n\t\tCOLOR_SUPPORT_KEY,\r\n\t\t'__experimentalDefaultControls',\r\n\t] );\r\n\r\n\tconst enableContrastChecking =\r\n\t\tPlatform.OS === 'web' &&\r\n\t\t! value?.color?.gradient &&\r\n\t\t( settings?.color?.text || settings?.color?.link ) &&\r\n\t\t// Contrast checking is enabled by default.\r\n\t\t// Deactivating it requires `enableContrastChecker` to have\r\n\t\t// an explicit value of `false`.\r\n\t\tfalse !==\r\n\t\t\tgetBlockSupport( name, [\r\n\t\t\t\tCOLOR_SUPPORT_KEY,\r\n\t\t\t\t'enableContrastChecker',\r\n\t\t\t] );\r\n\r\n\treturn (\r\n\t\t<StylesColorPanel\r\n\t\t\tas={ ColorInspectorControl }\r\n\t\t\tpanelId={ clientId }\r\n\t\t\tsettings={ settings }\r\n\t\t\tvalue={ value }\r\n\t\t\tonChange={ onChange }\r\n\t\t\tdefaultControls={ defaultControls }\r\n\t\t\tenableContrastChecker={\r\n\t\t\t\tfalse !==\r\n\t\t\t\tgetBlockSupport( name, [\r\n\t\t\t\t\tCOLOR_SUPPORT_KEY,\r\n\t\t\t\t\t'enableContrastChecker',\r\n\t\t\t\t] )\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t{ enableContrastChecking && (\r\n\t\t\t\t<BlockColorContrastChecker clientId={ clientId } />\r\n\t\t\t) }\r\n\t\t</StylesColorPanel>\r\n\t);\r\n}\r\n\r\nfunction useBlockProps( {\r\n\tname,\r\n\tbackgroundColor,\r\n\ttextColor,\r\n\tgradient,\r\n\tstyle,\r\n} ) {\r\n\tconst [ userPalette, themePalette, defaultPalette ] = useSettings(\r\n\t\t'color.palette.custom',\r\n\t\t'color.palette.theme',\r\n\t\t'color.palette.default'\r\n\t);\r\n\r\n\tconst colors = useMemo(\r\n\t\t() => [\r\n\t\t\t...( userPalette || [] ),\r\n\t\t\t...( themePalette || [] ),\r\n\t\t\t...( defaultPalette || [] ),\r\n\t\t],\r\n\t\t[ userPalette, themePalette, defaultPalette ]\r\n\t);\r\n\tif (\r\n\t\t! hasColorSupport( name ) ||\r\n\t\tshouldSkipSerialization( name, COLOR_SUPPORT_KEY )\r\n\t) {\r\n\t\treturn {};\r\n\t}\r\n\tconst extraStyles = {};\r\n\r\n\tif (\r\n\t\ttextColor &&\r\n\t\t! shouldSkipSerialization( name, COLOR_SUPPORT_KEY, 'text' )\r\n\t) {\r\n\t\textraStyles.color = getColorObjectByAttributeValues(\r\n\t\t\tcolors,\r\n\t\t\ttextColor\r\n\t\t)?.color;\r\n\t}\r\n\tif (\r\n\t\tbackgroundColor &&\r\n\t\t! shouldSkipSerialization( name, COLOR_SUPPORT_KEY, 'background' )\r\n\t) {\r\n\t\textraStyles.backgroundColor = getColorObjectByAttributeValues(\r\n\t\t\tcolors,\r\n\t\t\tbackgroundColor\r\n\t\t)?.color;\r\n\t}\r\n\r\n\tconst saveProps = addSaveProps( { style: extraStyles }, name, {\r\n\t\ttextColor,\r\n\t\tbackgroundColor,\r\n\t\tgradient,\r\n\t\tstyle,\r\n\t} );\r\n\r\n\tconst hasBackgroundValue =\r\n\t\tbackgroundColor ||\r\n\t\tstyle?.color?.background ||\r\n\t\tgradient ||\r\n\t\tstyle?.color?.gradient;\r\n\r\n\treturn {\r\n\t\t...saveProps,\r\n\t\tclassName: clsx(\r\n\t\t\tsaveProps.className,\r\n\t\t\t// Add background image classes in the editor, if not already handled by background color values.\r\n\t\t\t! hasBackgroundValue && getBackgroundImageClasses( style )\r\n\t\t),\r\n\t};\r\n}\r\n\r\nexport default {\r\n\tuseBlockProps,\r\n\taddSaveProps,\r\n\tattributeKeys: [ 'backgroundColor', 'textColor', 'gradient', 'style' ],\r\n\thasSupport: hasColorSupport,\r\n};\r\n\r\nconst MIGRATION_PATHS = {\r\n\tlinkColor: [ [ 'style', 'elements', 'link', 'color', 'text' ] ],\r\n\ttextColor: [ [ 'textColor' ], [ 'style', 'color', 'text' ] ],\r\n\tbackgroundColor: [\r\n\t\t[ 'backgroundColor' ],\r\n\t\t[ 'style', 'color', 'background' ],\r\n\t],\r\n\tgradient: [ [ 'gradient' ], [ 'style', 'color', 'gradient' ] ],\r\n};\r\n\r\nexport function addTransforms( result, source, index, results ) {\r\n\tconst destinationBlockType = result.name;\r\n\tconst activeSupports = {\r\n\t\tlinkColor: hasLinkColorSupport( destinationBlockType ),\r\n\t\ttextColor: hasTextColorSupport( destinationBlockType ),\r\n\t\tbackgroundColor: hasBackgroundColorSupport( destinationBlockType ),\r\n\t\tgradient: hasGradientSupport( destinationBlockType ),\r\n\t};\r\n\treturn transformStyles(\r\n\t\tactiveSupports,\r\n\t\tMIGRATION_PATHS,\r\n\t\tresult,\r\n\t\tsource,\r\n\t\tindex,\r\n\t\tresults\r\n\t);\r\n}\r\n\r\naddFilter(\r\n\t'blocks.registerBlockType',\r\n\t'core/color/addAttribute',\r\n\taddAttributes\r\n);\r\n\r\naddFilter(\r\n\t'blocks.switchToBlockType.transformedBlock',\r\n\t'core/color/addTransforms',\r\n\taddTransforms\r\n);\r\n"],"mappings":"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","ignoreList":[]}