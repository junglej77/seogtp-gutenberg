{"version":3,"names":["clsx","__","_x","sprintf","getBlockSupport","hasBlockSupport","BaseControl","CustomSelectControl","useInstanceId","useSelect","useMemo","Platform","useSettings","InspectorControls","useBlockDisplayInformation","cleanEmptyObject","useStyleOverride","store","blockEditorStore","jsx","_jsx","POSITION_SUPPORT_KEY","DEFAULT_OPTION","key","value","name","STICKY_OPTION","hint","FIXED_OPTION","POSITION_SIDES","VALID_POSITION_TYPES","getPositionCSS","selector","style","output","type","positionType","position","includes","forEach","side","undefined","hasStickyPositionSupport","blockType","support","sticky","hasFixedPositionSupport","fixed","hasPositionSupport","hasPositionValue","props","attributes","hasStickyOrFixedPositionValue","resetPosition","setAttributes","top","right","bottom","left","useIsPositionDisabled","blockName","allowFixed","allowSticky","isDisabled","PositionPanelPure","clientId","firstParentClientId","select","getBlockParents","parents","length","blockInformation","stickyHelpText","title","options","availableOptions","push","onChangeType","next","placementValue","newStyle","selectedOption","find","option","web","group","children","__nextHasNoMarginBottom","help","__next40pxDefaultSize","label","hideLabelFromVision","describedBy","onChange","selectedItem","size","native","edit","Edit","isPositionDisabled","useBlockProps","attributeKeys","hasSupport","hasPositionBlockSupport","allowPositionStyles","id","positionSelector","css","className"],"sources":["@wordpress/block-editor/src/hooks/position.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { __, _x, sprintf } from '@wordpress/i18n';\r\nimport { getBlockSupport, hasBlockSupport } from '@wordpress/blocks';\r\nimport { BaseControl, CustomSelectControl } from '@wordpress/components';\r\nimport { useInstanceId } from '@wordpress/compose';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { useMemo, Platform } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { useSettings } from '../components/use-settings';\r\nimport InspectorControls from '../components/inspector-controls';\r\nimport useBlockDisplayInformation from '../components/use-block-display-information';\r\nimport { cleanEmptyObject, useStyleOverride } from './utils';\r\nimport { store as blockEditorStore } from '../store';\r\n\r\nconst POSITION_SUPPORT_KEY = 'position';\r\n\r\nconst DEFAULT_OPTION = {\r\n\tkey: 'default',\r\n\tvalue: '',\r\n\tname: __( 'Default' ),\r\n};\r\n\r\nconst STICKY_OPTION = {\r\n\tkey: 'sticky',\r\n\tvalue: 'sticky',\r\n\tname: _x( 'Sticky', 'Name for the value of the CSS position property' ),\r\n\thint: __(\r\n\t\t'The block will stick to the top of the window instead of scrolling.'\r\n\t),\r\n};\r\n\r\nconst FIXED_OPTION = {\r\n\tkey: 'fixed',\r\n\tvalue: 'fixed',\r\n\tname: _x( 'Fixed', 'Name for the value of the CSS position property' ),\r\n\thint: __( 'The block will not move when the page is scrolled.' ),\r\n};\r\n\r\nconst POSITION_SIDES = [ 'top', 'right', 'bottom', 'left' ];\r\nconst VALID_POSITION_TYPES = [ 'sticky', 'fixed' ];\r\n\r\n/**\r\n * Get calculated position CSS.\r\n *\r\n * @param {Object} props          Component props.\r\n * @param {string} props.selector Selector to use.\r\n * @param {Object} props.style    Style object.\r\n * @return {string} The generated CSS rules.\r\n */\r\nexport function getPositionCSS( { selector, style } ) {\r\n\tlet output = '';\r\n\r\n\tconst { type: positionType } = style?.position || {};\r\n\r\n\tif ( ! VALID_POSITION_TYPES.includes( positionType ) ) {\r\n\t\treturn output;\r\n\t}\r\n\r\n\toutput += `${ selector } {`;\r\n\toutput += `position: ${ positionType };`;\r\n\r\n\tPOSITION_SIDES.forEach( ( side ) => {\r\n\t\tif ( style?.position?.[ side ] !== undefined ) {\r\n\t\t\toutput += `${ side }: ${ style.position[ side ] };`;\r\n\t\t}\r\n\t} );\r\n\r\n\tif ( positionType === 'sticky' || positionType === 'fixed' ) {\r\n\t\t// TODO: Replace hard-coded z-index value with a z-index preset approach in theme.json.\r\n\t\toutput += `z-index: 10`;\r\n\t}\r\n\toutput += `}`;\r\n\r\n\treturn output;\r\n}\r\n\r\n/**\r\n * Determines if there is sticky position support.\r\n *\r\n * @param {string|Object} blockType Block name or Block Type object.\r\n *\r\n * @return {boolean} Whether there is support.\r\n */\r\nexport function hasStickyPositionSupport( blockType ) {\r\n\tconst support = getBlockSupport( blockType, POSITION_SUPPORT_KEY );\r\n\treturn !! ( true === support || support?.sticky );\r\n}\r\n\r\n/**\r\n * Determines if there is fixed position support.\r\n *\r\n * @param {string|Object} blockType Block name or Block Type object.\r\n *\r\n * @return {boolean} Whether there is support.\r\n */\r\nexport function hasFixedPositionSupport( blockType ) {\r\n\tconst support = getBlockSupport( blockType, POSITION_SUPPORT_KEY );\r\n\treturn !! ( true === support || support?.fixed );\r\n}\r\n\r\n/**\r\n * Determines if there is position support.\r\n *\r\n * @param {string|Object} blockType Block name or Block Type object.\r\n *\r\n * @return {boolean} Whether there is support.\r\n */\r\nexport function hasPositionSupport( blockType ) {\r\n\tconst support = getBlockSupport( blockType, POSITION_SUPPORT_KEY );\r\n\treturn !! support;\r\n}\r\n\r\n/**\r\n * Checks if there is a current value in the position block support attributes.\r\n *\r\n * @param {Object} props Block props.\r\n * @return {boolean} Whether or not the block has a position value set.\r\n */\r\nexport function hasPositionValue( props ) {\r\n\treturn props.attributes.style?.position?.type !== undefined;\r\n}\r\n\r\n/**\r\n * Checks if the block is currently set to a sticky or fixed position.\r\n * This check is helpful for determining how to position block toolbars or other elements.\r\n *\r\n * @param {Object} attributes Block attributes.\r\n * @return {boolean} Whether or not the block is set to a sticky or fixed position.\r\n */\r\nexport function hasStickyOrFixedPositionValue( attributes ) {\r\n\tconst positionType = attributes?.style?.position?.type;\r\n\treturn positionType === 'sticky' || positionType === 'fixed';\r\n}\r\n\r\n/**\r\n * Resets the position block support attributes. This can be used when disabling\r\n * the position support controls for a block via a `ToolsPanel`.\r\n *\r\n * @param {Object} props               Block props.\r\n * @param {Object} props.attributes    Block's attributes.\r\n * @param {Object} props.setAttributes Function to set block's attributes.\r\n */\r\nexport function resetPosition( { attributes = {}, setAttributes } ) {\r\n\tconst { style = {} } = attributes;\r\n\r\n\tsetAttributes( {\r\n\t\tstyle: cleanEmptyObject( {\r\n\t\t\t...style,\r\n\t\t\tposition: {\r\n\t\t\t\t...style?.position,\r\n\t\t\t\ttype: undefined,\r\n\t\t\t\ttop: undefined,\r\n\t\t\t\tright: undefined,\r\n\t\t\t\tbottom: undefined,\r\n\t\t\t\tleft: undefined,\r\n\t\t\t},\r\n\t\t} ),\r\n\t} );\r\n}\r\n\r\n/**\r\n * Custom hook that checks if position settings have been disabled.\r\n *\r\n * @param {string} name The name of the block.\r\n *\r\n * @return {boolean} Whether padding setting is disabled.\r\n */\r\nexport function useIsPositionDisabled( { name: blockName } = {} ) {\r\n\tconst [ allowFixed, allowSticky ] = useSettings(\r\n\t\t'position.fixed',\r\n\t\t'position.sticky'\r\n\t);\r\n\tconst isDisabled = ! allowFixed && ! allowSticky;\r\n\r\n\treturn ! hasPositionSupport( blockName ) || isDisabled;\r\n}\r\n\r\n/*\r\n * Position controls rendered in an inspector control panel.\r\n *\r\n * @param {Object} props\r\n *\r\n * @return {Element} Position panel.\r\n */\r\nexport function PositionPanelPure( {\r\n\tstyle = {},\r\n\tclientId,\r\n\tname: blockName,\r\n\tsetAttributes,\r\n} ) {\r\n\tconst allowFixed = hasFixedPositionSupport( blockName );\r\n\tconst allowSticky = hasStickyPositionSupport( blockName );\r\n\tconst value = style?.position?.type;\r\n\r\n\tconst { firstParentClientId } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst { getBlockParents } = select( blockEditorStore );\r\n\t\t\tconst parents = getBlockParents( clientId );\r\n\t\t\treturn { firstParentClientId: parents[ parents.length - 1 ] };\r\n\t\t},\r\n\t\t[ clientId ]\r\n\t);\r\n\r\n\tconst blockInformation = useBlockDisplayInformation( firstParentClientId );\r\n\tconst stickyHelpText =\r\n\t\tallowSticky && value === STICKY_OPTION.value && blockInformation\r\n\t\t\t? sprintf(\r\n\t\t\t\t\t/* translators: %s: the name of the parent block. */\r\n\t\t\t\t\t__(\r\n\t\t\t\t\t\t'The block will stick to the scrollable area of the parent %s block.'\r\n\t\t\t\t\t),\r\n\t\t\t\t\tblockInformation.title\r\n\t\t\t  )\r\n\t\t\t: null;\r\n\r\n\tconst options = useMemo( () => {\r\n\t\tconst availableOptions = [ DEFAULT_OPTION ];\r\n\t\t// Display options if they are allowed, or if a block already has a valid value set.\r\n\t\t// This allows for a block to be switched off from a position type that is not allowed.\r\n\t\tif ( allowSticky || value === STICKY_OPTION.value ) {\r\n\t\t\tavailableOptions.push( STICKY_OPTION );\r\n\t\t}\r\n\t\tif ( allowFixed || value === FIXED_OPTION.value ) {\r\n\t\t\tavailableOptions.push( FIXED_OPTION );\r\n\t\t}\r\n\t\treturn availableOptions;\r\n\t}, [ allowFixed, allowSticky, value ] );\r\n\r\n\tconst onChangeType = ( next ) => {\r\n\t\t// For now, use a hard-coded `0px` value for the position.\r\n\t\t// `0px` is preferred over `0` as it can be used in `calc()` functions.\r\n\t\t// In the future, it could be useful to allow for an offset value.\r\n\t\tconst placementValue = '0px';\r\n\r\n\t\tconst newStyle = {\r\n\t\t\t...style,\r\n\t\t\tposition: {\r\n\t\t\t\t...style?.position,\r\n\t\t\t\ttype: next,\r\n\t\t\t\ttop:\r\n\t\t\t\t\tnext === 'sticky' || next === 'fixed'\r\n\t\t\t\t\t\t? placementValue\r\n\t\t\t\t\t\t: undefined,\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\tsetAttributes( {\r\n\t\t\tstyle: cleanEmptyObject( newStyle ),\r\n\t\t} );\r\n\t};\r\n\r\n\tconst selectedOption = value\r\n\t\t? options.find( ( option ) => option.value === value ) || DEFAULT_OPTION\r\n\t\t: DEFAULT_OPTION;\r\n\r\n\t// Only display position controls if there is at least one option to choose from.\r\n\treturn Platform.select( {\r\n\t\tweb:\r\n\t\t\toptions.length > 1 ? (\r\n\t\t\t\t<InspectorControls group=\"position\">\r\n\t\t\t\t\t<BaseControl\r\n\t\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\t\thelp={ stickyHelpText }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<CustomSelectControl\r\n\t\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\t\tlabel={ __( 'Position' ) }\r\n\t\t\t\t\t\t\thideLabelFromVision\r\n\t\t\t\t\t\t\tdescribedBy={ sprintf(\r\n\t\t\t\t\t\t\t\t// translators: %s: Currently selected position.\r\n\t\t\t\t\t\t\t\t__( 'Currently selected position: %s' ),\r\n\t\t\t\t\t\t\t\tselectedOption.name\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\toptions={ options }\r\n\t\t\t\t\t\t\tvalue={ selectedOption }\r\n\t\t\t\t\t\t\tonChange={ ( { selectedItem } ) => {\r\n\t\t\t\t\t\t\t\tonChangeType( selectedItem.value );\r\n\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\tsize=\"__unstable-large\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</BaseControl>\r\n\t\t\t\t</InspectorControls>\r\n\t\t\t) : null,\r\n\t\tnative: null,\r\n\t} );\r\n}\r\n\r\nexport default {\r\n\tedit: function Edit( props ) {\r\n\t\tconst isPositionDisabled = useIsPositionDisabled( props );\r\n\t\tif ( isPositionDisabled ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn <PositionPanelPure { ...props } />;\r\n\t},\r\n\tuseBlockProps,\r\n\tattributeKeys: [ 'style' ],\r\n\thasSupport( name ) {\r\n\t\treturn hasBlockSupport( name, POSITION_SUPPORT_KEY );\r\n\t},\r\n};\r\n\r\nfunction useBlockProps( { name, style } ) {\r\n\tconst hasPositionBlockSupport = hasBlockSupport(\r\n\t\tname,\r\n\t\tPOSITION_SUPPORT_KEY\r\n\t);\r\n\tconst isPositionDisabled = useIsPositionDisabled( { name } );\r\n\tconst allowPositionStyles = hasPositionBlockSupport && ! isPositionDisabled;\r\n\r\n\tconst id = useInstanceId( useBlockProps );\r\n\r\n\t// Higher specificity to override defaults in editor UI.\r\n\tconst positionSelector = `.wp-container-${ id }.wp-container-${ id }`;\r\n\r\n\t// Get CSS string for the current position values.\r\n\tlet css;\r\n\tif ( allowPositionStyles ) {\r\n\t\tcss =\r\n\t\t\tgetPositionCSS( {\r\n\t\t\t\tselector: positionSelector,\r\n\t\t\t\tstyle,\r\n\t\t\t} ) || '';\r\n\t}\r\n\r\n\t// Attach a `wp-container-` id-based class name.\r\n\tconst className = clsx( {\r\n\t\t[ `wp-container-${ id }` ]: allowPositionStyles && !! css, // Only attach a container class if there is generated CSS to be attached.\r\n\t\t[ `is-position-${ style?.position?.type }` ]:\r\n\t\t\tallowPositionStyles && !! css && !! style?.position?.type,\r\n\t} );\r\n\r\n\tuseStyleOverride( { css } );\r\n\r\n\treturn { className };\r\n}\r\n"],"mappings":"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","ignoreList":[]}