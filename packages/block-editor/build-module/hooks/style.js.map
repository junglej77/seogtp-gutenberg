{"version":3,"names":["useMemo","addFilter","getBlockSupport","hasBlockSupport","__EXPERIMENTAL_ELEMENTS","ELEMENTS","useInstanceId","getCSSRules","compileCSS","BACKGROUND_SUPPORT_KEY","BackgroundImagePanel","BORDER_SUPPORT_KEY","BorderPanel","SHADOW_SUPPORT_KEY","COLOR_SUPPORT_KEY","ColorEdit","TypographyPanel","TYPOGRAPHY_SUPPORT_KEY","TYPOGRAPHY_SUPPORT_KEYS","DIMENSIONS_SUPPORT_KEY","SPACING_SUPPORT_KEY","DimensionsPanel","shouldSkipSerialization","useStyleOverride","useBlockSettings","scopeSelector","useBlockEditingMode","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","styleSupportKeys","hasStyleSupport","nameOrType","some","key","getInlineStyles","styles","output","forEach","rule","value","addAttribute","settings","attributes","style","Object","assign","type","skipSerializationPathsEdit","skipSerializationPathsSave","skipSerializationPathsSaveChecks","renamedFeatures","gradients","omitStyle","paths","preserveReference","newStyle","JSON","parse","stringify","Array","isArray","path","split","length","firstSubpath","restPath","addSaveProps","props","blockNameOrType","skipPaths","entries","indicator","skipSerialization","featureName","feature","BlockStyleControls","clientId","name","setAttributes","__unstableParentLayout","blockEditingMode","passedProps","typography","textAlign","children","edit","hasSupport","attributeKeys","useBlockProps","elementTypes","elementType","pseudo","elements","blockElementsContainerIdentifier","baseElementSelector","blockElementStyles","elementCSSRules","elementStyles","selector","push","pseudoSelector","element","join","undefined","css","className"],"sources":["@wordpress/block-editor/src/hooks/style.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useMemo } from '@wordpress/element';\r\nimport { addFilter } from '@wordpress/hooks';\r\nimport {\r\n\tgetBlockSupport,\r\n\thasBlockSupport,\r\n\t__EXPERIMENTAL_ELEMENTS as ELEMENTS,\r\n} from '@wordpress/blocks';\r\nimport { useInstanceId } from '@wordpress/compose';\r\nimport { getCSSRules, compileCSS } from '@wordpress/style-engine';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { BACKGROUND_SUPPORT_KEY, BackgroundImagePanel } from './background';\r\nimport { BORDER_SUPPORT_KEY, BorderPanel, SHADOW_SUPPORT_KEY } from './border';\r\nimport { COLOR_SUPPORT_KEY, ColorEdit } from './color';\r\nimport {\r\n\tTypographyPanel,\r\n\tTYPOGRAPHY_SUPPORT_KEY,\r\n\tTYPOGRAPHY_SUPPORT_KEYS,\r\n} from './typography';\r\nimport {\r\n\tDIMENSIONS_SUPPORT_KEY,\r\n\tSPACING_SUPPORT_KEY,\r\n\tDimensionsPanel,\r\n} from './dimensions';\r\nimport {\r\n\tshouldSkipSerialization,\r\n\tuseStyleOverride,\r\n\tuseBlockSettings,\r\n} from './utils';\r\nimport { scopeSelector } from '../components/global-styles/utils';\r\nimport { useBlockEditingMode } from '../components/block-editing-mode';\r\n\r\nconst styleSupportKeys = [\r\n\t...TYPOGRAPHY_SUPPORT_KEYS,\r\n\tBORDER_SUPPORT_KEY,\r\n\tCOLOR_SUPPORT_KEY,\r\n\tDIMENSIONS_SUPPORT_KEY,\r\n\tBACKGROUND_SUPPORT_KEY,\r\n\tSPACING_SUPPORT_KEY,\r\n\tSHADOW_SUPPORT_KEY,\r\n];\r\n\r\nconst hasStyleSupport = ( nameOrType ) =>\r\n\tstyleSupportKeys.some( ( key ) => hasBlockSupport( nameOrType, key ) );\r\n\r\n/**\r\n * Returns the inline styles to add depending on the style object\r\n *\r\n * @param {Object} styles Styles configuration.\r\n *\r\n * @return {Object} Flattened CSS variables declaration.\r\n */\r\nexport function getInlineStyles( styles = {} ) {\r\n\tconst output = {};\r\n\t// The goal is to move everything to server side generated engine styles\r\n\t// This is temporary as we absorb more and more styles into the engine.\r\n\tgetCSSRules( styles ).forEach( ( rule ) => {\r\n\t\toutput[ rule.key ] = rule.value;\r\n\t} );\r\n\r\n\treturn output;\r\n}\r\n\r\n/**\r\n * Filters registered block settings, extending attributes to include `style` attribute.\r\n *\r\n * @param {Object} settings Original block settings.\r\n *\r\n * @return {Object} Filtered block settings.\r\n */\r\nfunction addAttribute( settings ) {\r\n\tif ( ! hasStyleSupport( settings ) ) {\r\n\t\treturn settings;\r\n\t}\r\n\r\n\t// Allow blocks to specify their own attribute definition with default values if needed.\r\n\tif ( ! settings.attributes.style ) {\r\n\t\tObject.assign( settings.attributes, {\r\n\t\t\tstyle: {\r\n\t\t\t\ttype: 'object',\r\n\t\t\t},\r\n\t\t} );\r\n\t}\r\n\r\n\treturn settings;\r\n}\r\n\r\n/**\r\n * A dictionary of paths to flag skipping block support serialization as the key,\r\n * with values providing the style paths to be omitted from serialization.\r\n *\r\n * @constant\r\n * @type {Record<string, string[]>}\r\n */\r\nconst skipSerializationPathsEdit = {\r\n\t[ `${ BORDER_SUPPORT_KEY }.__experimentalSkipSerialization` ]: [ 'border' ],\r\n\t[ `${ COLOR_SUPPORT_KEY }.__experimentalSkipSerialization` ]: [\r\n\t\tCOLOR_SUPPORT_KEY,\r\n\t],\r\n\t[ `${ TYPOGRAPHY_SUPPORT_KEY }.__experimentalSkipSerialization` ]: [\r\n\t\tTYPOGRAPHY_SUPPORT_KEY,\r\n\t],\r\n\t[ `${ DIMENSIONS_SUPPORT_KEY }.__experimentalSkipSerialization` ]: [\r\n\t\tDIMENSIONS_SUPPORT_KEY,\r\n\t],\r\n\t[ `${ SPACING_SUPPORT_KEY }.__experimentalSkipSerialization` ]: [\r\n\t\tSPACING_SUPPORT_KEY,\r\n\t],\r\n\t[ `${ SHADOW_SUPPORT_KEY }.__experimentalSkipSerialization` ]: [\r\n\t\tSHADOW_SUPPORT_KEY,\r\n\t],\r\n};\r\n\r\n/**\r\n * A dictionary of paths to flag skipping block support serialization as the key,\r\n * with values providing the style paths to be omitted from serialization.\r\n *\r\n * Extends the Edit skip paths to enable skipping additional paths in just\r\n * the Save component. This allows a block support to be serialized within the\r\n * editor, while using an alternate approach, such as server-side rendering, when\r\n * the support is saved.\r\n *\r\n * @constant\r\n * @type {Record<string, string[]>}\r\n */\r\nconst skipSerializationPathsSave = {\r\n\t...skipSerializationPathsEdit,\r\n\t[ `${ DIMENSIONS_SUPPORT_KEY }.aspectRatio` ]: [\r\n\t\t`${ DIMENSIONS_SUPPORT_KEY }.aspectRatio`,\r\n\t], // Skip serialization of aspect ratio in save mode.\r\n\t[ `${ BACKGROUND_SUPPORT_KEY }` ]: [ BACKGROUND_SUPPORT_KEY ], // Skip serialization of background support in save mode.\r\n};\r\n\r\nconst skipSerializationPathsSaveChecks = {\r\n\t[ `${ DIMENSIONS_SUPPORT_KEY }.aspectRatio` ]: true,\r\n\t[ `${ BACKGROUND_SUPPORT_KEY }` ]: true,\r\n};\r\n\r\n/**\r\n * A dictionary used to normalize feature names between support flags, style\r\n * object properties and __experimentSkipSerialization configuration arrays.\r\n *\r\n * This allows not having to provide a migration for a support flag and possible\r\n * backwards compatibility bridges, while still achieving consistency between\r\n * the support flag and the skip serialization array.\r\n *\r\n * @constant\r\n * @type {Record<string, string>}\r\n */\r\nconst renamedFeatures = { gradients: 'gradient' };\r\n\r\n/**\r\n * A utility function used to remove one or more paths from a style object.\r\n * Works in a way similar to Lodash's `omit()`. See unit tests and examples below.\r\n *\r\n * It supports a single string path:\r\n *\r\n * ```\r\n * omitStyle( { color: 'red' }, 'color' ); // {}\r\n * ```\r\n *\r\n * or an array of paths:\r\n *\r\n * ```\r\n * omitStyle( { color: 'red', background: '#fff' }, [ 'color', 'background' ] ); // {}\r\n * ```\r\n *\r\n * It also allows you to specify paths at multiple levels in a string.\r\n *\r\n * ```\r\n * omitStyle( { typography: { textDecoration: 'underline' } }, 'typography.textDecoration' ); // {}\r\n * ```\r\n *\r\n * You can remove multiple paths at the same time:\r\n *\r\n * ```\r\n * omitStyle(\r\n * \t\t{\r\n * \t\t\ttypography: {\r\n * \t\t\t\ttextDecoration: 'underline',\r\n * \t\t\t\ttextTransform: 'uppercase',\r\n * \t\t\t}\r\n *\t\t},\r\n *\t\t[\r\n * \t\t\t'typography.textDecoration',\r\n * \t\t\t'typography.textTransform',\r\n *\t\t]\r\n * );\r\n * // {}\r\n * ```\r\n *\r\n * You can also specify nested paths as arrays:\r\n *\r\n * ```\r\n * omitStyle(\r\n * \t\t{\r\n * \t\t\ttypography: {\r\n * \t\t\t\ttextDecoration: 'underline',\r\n * \t\t\t\ttextTransform: 'uppercase',\r\n * \t\t\t}\r\n *\t\t},\r\n *\t\t[\r\n * \t\t\t[ 'typography', 'textDecoration' ],\r\n * \t\t\t[ 'typography', 'textTransform' ],\r\n *\t\t]\r\n * );\r\n * // {}\r\n * ```\r\n *\r\n * With regards to nesting of styles, infinite depth is supported:\r\n *\r\n * ```\r\n * omitStyle(\r\n * \t\t{\r\n * \t\t\tborder: {\r\n * \t\t\t\tradius: {\r\n * \t\t\t\t\ttopLeft: '10px',\r\n * \t\t\t\t\ttopRight: '0.5rem',\r\n * \t\t\t\t}\r\n * \t\t\t}\r\n *\t\t},\r\n *\t\t[\r\n * \t\t\t[ 'border', 'radius', 'topRight' ],\r\n *\t\t]\r\n * );\r\n * // { border: { radius: { topLeft: '10px' } } }\r\n * ```\r\n *\r\n * The third argument, `preserveReference`, defines how to treat the input style object.\r\n * It is mostly necessary to properly handle mutation when recursively handling the style object.\r\n * Defaulting to `false`, this will always create a new object, avoiding to mutate `style`.\r\n * However, when recursing, we change that value to `true` in order to work with a single copy\r\n * of the original style object.\r\n *\r\n * @see https://lodash.com/docs/4.17.15#omit\r\n *\r\n * @param {Object}       style             Styles object.\r\n * @param {Array|string} paths             Paths to remove.\r\n * @param {boolean}      preserveReference True to mutate the `style` object, false otherwise.\r\n * @return {Object}      Styles object with the specified paths removed.\r\n */\r\nexport function omitStyle( style, paths, preserveReference = false ) {\r\n\tif ( ! style ) {\r\n\t\treturn style;\r\n\t}\r\n\r\n\tlet newStyle = style;\r\n\tif ( ! preserveReference ) {\r\n\t\tnewStyle = JSON.parse( JSON.stringify( style ) );\r\n\t}\r\n\r\n\tif ( ! Array.isArray( paths ) ) {\r\n\t\tpaths = [ paths ];\r\n\t}\r\n\r\n\tpaths.forEach( ( path ) => {\r\n\t\tif ( ! Array.isArray( path ) ) {\r\n\t\t\tpath = path.split( '.' );\r\n\t\t}\r\n\r\n\t\tif ( path.length > 1 ) {\r\n\t\t\tconst [ firstSubpath, ...restPath ] = path;\r\n\t\t\tomitStyle( newStyle[ firstSubpath ], [ restPath ], true );\r\n\t\t} else if ( path.length === 1 ) {\r\n\t\t\tdelete newStyle[ path[ 0 ] ];\r\n\t\t}\r\n\t} );\r\n\r\n\treturn newStyle;\r\n}\r\n\r\n/**\r\n * Override props assigned to save component to inject the CSS variables definition.\r\n *\r\n * @param {Object}                    props           Additional props applied to save element.\r\n * @param {Object|string}             blockNameOrType Block type.\r\n * @param {Object}                    attributes      Block attributes.\r\n * @param {?Record<string, string[]>} skipPaths       An object of keys and paths to skip serialization.\r\n *\r\n * @return {Object} Filtered props applied to save element.\r\n */\r\nexport function addSaveProps(\r\n\tprops,\r\n\tblockNameOrType,\r\n\tattributes,\r\n\tskipPaths = skipSerializationPathsSave\r\n) {\r\n\tif ( ! hasStyleSupport( blockNameOrType ) ) {\r\n\t\treturn props;\r\n\t}\r\n\r\n\tlet { style } = attributes;\r\n\tObject.entries( skipPaths ).forEach( ( [ indicator, path ] ) => {\r\n\t\tconst skipSerialization =\r\n\t\t\tskipSerializationPathsSaveChecks[ indicator ] ||\r\n\t\t\tgetBlockSupport( blockNameOrType, indicator );\r\n\r\n\t\tif ( skipSerialization === true ) {\r\n\t\t\tstyle = omitStyle( style, path );\r\n\t\t}\r\n\r\n\t\tif ( Array.isArray( skipSerialization ) ) {\r\n\t\t\tskipSerialization.forEach( ( featureName ) => {\r\n\t\t\t\tconst feature = renamedFeatures[ featureName ] || featureName;\r\n\t\t\t\tstyle = omitStyle( style, [ [ ...path, feature ] ] );\r\n\t\t\t} );\r\n\t\t}\r\n\t} );\r\n\r\n\tprops.style = {\r\n\t\t...getInlineStyles( style ),\r\n\t\t...props.style,\r\n\t};\r\n\r\n\treturn props;\r\n}\r\n\r\nfunction BlockStyleControls( {\r\n\tclientId,\r\n\tname,\r\n\tsetAttributes,\r\n\t__unstableParentLayout,\r\n} ) {\r\n\tconst settings = useBlockSettings( name, __unstableParentLayout );\r\n\tconst blockEditingMode = useBlockEditingMode();\r\n\tconst passedProps = {\r\n\t\tclientId,\r\n\t\tname,\r\n\t\tsetAttributes,\r\n\t\tsettings: {\r\n\t\t\t...settings,\r\n\t\t\ttypography: {\r\n\t\t\t\t...settings.typography,\r\n\t\t\t\t// The text alignment UI for individual blocks is rendered in\r\n\t\t\t\t// the block toolbar, so disable it here.\r\n\t\t\t\ttextAlign: false,\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n\tif ( blockEditingMode !== 'default' ) {\r\n\t\treturn null;\r\n\t}\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<ColorEdit { ...passedProps } />\r\n\t\t\t<BackgroundImagePanel { ...passedProps } />\r\n\t\t\t<TypographyPanel { ...passedProps } />\r\n\t\t\t<BorderPanel { ...passedProps } />\r\n\t\t\t<DimensionsPanel { ...passedProps } />\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default {\r\n\tedit: BlockStyleControls,\r\n\thasSupport: hasStyleSupport,\r\n\taddSaveProps,\r\n\tattributeKeys: [ 'style' ],\r\n\tuseBlockProps,\r\n};\r\n\r\n// Defines which element types are supported, including their hover styles or\r\n// any other elements that have been included under a single element type\r\n// e.g. heading and h1-h6.\r\nconst elementTypes = [\r\n\t{ elementType: 'button' },\r\n\t{ elementType: 'link', pseudo: [ ':hover' ] },\r\n\t{\r\n\t\telementType: 'heading',\r\n\t\telements: [ 'h1', 'h2', 'h3', 'h4', 'h5', 'h6' ],\r\n\t},\r\n];\r\n\r\nfunction useBlockProps( { name, style } ) {\r\n\tconst blockElementsContainerIdentifier = `wp-elements-${ useInstanceId(\r\n\t\tuseBlockProps\r\n\t) }`;\r\n\r\n\tconst baseElementSelector = `.${ blockElementsContainerIdentifier }`;\r\n\tconst blockElementStyles = style?.elements;\r\n\r\n\tconst styles = useMemo( () => {\r\n\t\tif ( ! blockElementStyles ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst elementCSSRules = [];\r\n\r\n\t\telementTypes.forEach( ( { elementType, pseudo, elements } ) => {\r\n\t\t\tconst skipSerialization = shouldSkipSerialization(\r\n\t\t\t\tname,\r\n\t\t\t\tCOLOR_SUPPORT_KEY,\r\n\t\t\t\telementType\r\n\t\t\t);\r\n\r\n\t\t\tif ( skipSerialization ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst elementStyles = blockElementStyles?.[ elementType ];\r\n\r\n\t\t\t// Process primary element type styles.\r\n\t\t\tif ( elementStyles ) {\r\n\t\t\t\tconst selector = scopeSelector(\r\n\t\t\t\t\tbaseElementSelector,\r\n\t\t\t\t\tELEMENTS[ elementType ]\r\n\t\t\t\t);\r\n\r\n\t\t\t\telementCSSRules.push(\r\n\t\t\t\t\tcompileCSS( elementStyles, { selector } )\r\n\t\t\t\t);\r\n\r\n\t\t\t\t// Process any interactive states for the element type.\r\n\t\t\t\tif ( pseudo ) {\r\n\t\t\t\t\tpseudo.forEach( ( pseudoSelector ) => {\r\n\t\t\t\t\t\tif ( elementStyles[ pseudoSelector ] ) {\r\n\t\t\t\t\t\t\telementCSSRules.push(\r\n\t\t\t\t\t\t\t\tcompileCSS( elementStyles[ pseudoSelector ], {\r\n\t\t\t\t\t\t\t\t\tselector: scopeSelector(\r\n\t\t\t\t\t\t\t\t\t\tbaseElementSelector,\r\n\t\t\t\t\t\t\t\t\t\t`${ ELEMENTS[ elementType ] }${ pseudoSelector }`\r\n\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t} )\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Process related elements e.g. h1-h6 for headings\r\n\t\t\tif ( elements ) {\r\n\t\t\t\telements.forEach( ( element ) => {\r\n\t\t\t\t\tif ( blockElementStyles[ element ] ) {\r\n\t\t\t\t\t\telementCSSRules.push(\r\n\t\t\t\t\t\t\tcompileCSS( blockElementStyles[ element ], {\r\n\t\t\t\t\t\t\t\tselector: scopeSelector(\r\n\t\t\t\t\t\t\t\t\tbaseElementSelector,\r\n\t\t\t\t\t\t\t\t\tELEMENTS[ element ]\r\n\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t} )\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\treturn elementCSSRules.length > 0\r\n\t\t\t? elementCSSRules.join( '' )\r\n\t\t\t: undefined;\r\n\t}, [ baseElementSelector, blockElementStyles, name ] );\r\n\r\n\tuseStyleOverride( { css: styles } );\r\n\r\n\treturn addSaveProps(\r\n\t\t{ className: blockElementsContainerIdentifier },\r\n\t\tname,\r\n\t\t{ style },\r\n\t\tskipSerializationPathsEdit\r\n\t);\r\n}\r\n\r\naddFilter(\r\n\t'blocks.registerBlockType',\r\n\t'core/style/addAttribute',\r\n\taddAttribute\r\n);\r\n"],"mappings":"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","ignoreList":[]}