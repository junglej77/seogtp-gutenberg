{"version":3,"names":["clsx","__","getBlockSupport","hasBlockSupport","alignLeft","alignRight","alignCenter","AlignmentControl","BlockControls","useBlockEditingMode","cleanEmptyObject","shouldSkipSerialization","useBlockSettings","TYPOGRAPHY_SUPPORT_KEY","jsx","_jsx","TEXT_ALIGN_SUPPORT_KEY","TEXT_ALIGNMENT_OPTIONS","icon","title","align","VALID_TEXT_ALIGNMENTS","NO_TEXT_ALIGNMENTS","getValidTextAlignments","blockTextAlign","Array","isArray","filter","textAlign","includes","BlockEditTextAlignmentToolbarControlsPure","style","name","blockName","setAttributes","settings","hasTextAlignControl","typography","blockEditingMode","validTextAlignments","length","textAlignmentControls","control","onChange","newTextAlignValue","newStyle","group","children","value","alignmentControls","edit","useBlockProps","addSaveProps","addAssignedTextAlign","attributeKeys","hasSupport","className","props","blockType","attributes","isTextAlignValid"],"sources":["@wordpress/block-editor/src/hooks/text-align.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { getBlockSupport, hasBlockSupport } from '@wordpress/blocks';\r\nimport { alignLeft, alignRight, alignCenter } from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { AlignmentControl, BlockControls } from '../components';\r\nimport { useBlockEditingMode } from '../components/block-editing-mode';\r\nimport {\r\n\tcleanEmptyObject,\r\n\tshouldSkipSerialization,\r\n\tuseBlockSettings,\r\n} from './utils';\r\nimport { TYPOGRAPHY_SUPPORT_KEY } from './typography';\r\n\r\nexport const TEXT_ALIGN_SUPPORT_KEY = 'typography.textAlign';\r\n\r\nconst TEXT_ALIGNMENT_OPTIONS = [\r\n\t{\r\n\t\ticon: alignLeft,\r\n\t\ttitle: __( 'Align text left' ),\r\n\t\talign: 'left',\r\n\t},\r\n\t{\r\n\t\ticon: alignCenter,\r\n\t\ttitle: __( 'Align text center' ),\r\n\t\talign: 'center',\r\n\t},\r\n\t{\r\n\t\ticon: alignRight,\r\n\t\ttitle: __( 'Align text right' ),\r\n\t\talign: 'right',\r\n\t},\r\n];\r\n\r\nconst VALID_TEXT_ALIGNMENTS = [ 'left', 'center', 'right' ];\r\nconst NO_TEXT_ALIGNMENTS = [];\r\n\r\n/**\r\n * Returns the valid text alignments.\r\n * Takes into consideration the text aligns supported by a block.\r\n * Exported just for testing purposes, not exported outside the module.\r\n *\r\n * @param {?boolean|string[]} blockTextAlign Text aligns supported by the block.\r\n *\r\n * @return {string[]} Valid text alignments.\r\n */\r\nexport function getValidTextAlignments( blockTextAlign ) {\r\n\tif ( Array.isArray( blockTextAlign ) ) {\r\n\t\treturn VALID_TEXT_ALIGNMENTS.filter( ( textAlign ) =>\r\n\t\t\tblockTextAlign.includes( textAlign )\r\n\t\t);\r\n\t}\r\n\r\n\treturn blockTextAlign === true ? VALID_TEXT_ALIGNMENTS : NO_TEXT_ALIGNMENTS;\r\n}\r\n\r\nfunction BlockEditTextAlignmentToolbarControlsPure( {\r\n\tstyle,\r\n\tname: blockName,\r\n\tsetAttributes,\r\n} ) {\r\n\tconst settings = useBlockSettings( blockName );\r\n\tconst hasTextAlignControl = settings?.typography?.textAlign;\r\n\tconst blockEditingMode = useBlockEditingMode();\r\n\r\n\tif ( ! hasTextAlignControl || blockEditingMode !== 'default' ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst validTextAlignments = getValidTextAlignments(\r\n\t\tgetBlockSupport( blockName, TEXT_ALIGN_SUPPORT_KEY )\r\n\t);\r\n\tif ( ! validTextAlignments.length ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst textAlignmentControls = TEXT_ALIGNMENT_OPTIONS.filter( ( control ) =>\r\n\t\tvalidTextAlignments.includes( control.align )\r\n\t);\r\n\r\n\tconst onChange = ( newTextAlignValue ) => {\r\n\t\tconst newStyle = {\r\n\t\t\t...style,\r\n\t\t\ttypography: {\r\n\t\t\t\t...style?.typography,\r\n\t\t\t\ttextAlign: newTextAlignValue,\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\tsetAttributes( { style: cleanEmptyObject( newStyle ) } );\r\n\t};\r\n\r\n\treturn (\r\n\t\t<BlockControls group=\"block\">\r\n\t\t\t<AlignmentControl\r\n\t\t\t\tvalue={ style?.typography?.textAlign }\r\n\t\t\t\tonChange={ onChange }\r\n\t\t\t\talignmentControls={ textAlignmentControls }\r\n\t\t\t/>\r\n\t\t</BlockControls>\r\n\t);\r\n}\r\n\r\nexport default {\r\n\tedit: BlockEditTextAlignmentToolbarControlsPure,\r\n\tuseBlockProps,\r\n\taddSaveProps: addAssignedTextAlign,\r\n\tattributeKeys: [ 'style' ],\r\n\thasSupport( name ) {\r\n\t\treturn hasBlockSupport( name, TEXT_ALIGN_SUPPORT_KEY, false );\r\n\t},\r\n};\r\n\r\nfunction useBlockProps( { name, style } ) {\r\n\tif ( ! style?.typography?.textAlign ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst validTextAlignments = getValidTextAlignments(\r\n\t\tgetBlockSupport( name, TEXT_ALIGN_SUPPORT_KEY )\r\n\t);\r\n\r\n\tif ( ! validTextAlignments.length ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tif (\r\n\t\tshouldSkipSerialization( name, TYPOGRAPHY_SUPPORT_KEY, 'textAlign' )\r\n\t) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst textAlign = style.typography.textAlign;\r\n\r\n\tconst className = clsx( {\r\n\t\t[ `has-text-align-${ textAlign }` ]: textAlign,\r\n\t} );\r\n\treturn { className };\r\n}\r\n\r\n/**\r\n * Override props assigned to save component to inject text alignment class\r\n * name if block supports it.\r\n *\r\n * @param {Object} props      Additional props applied to save element.\r\n * @param {Object} blockType  Block type.\r\n * @param {Object} attributes Block attributes.\r\n *\r\n * @return {Object} Filtered props applied to save element.\r\n */\r\nexport function addAssignedTextAlign( props, blockType, attributes ) {\r\n\tif ( ! attributes?.style?.typography?.textAlign ) {\r\n\t\treturn props;\r\n\t}\r\n\r\n\tconst { textAlign } = attributes.style.typography;\r\n\tconst blockTextAlign = getBlockSupport( blockType, TEXT_ALIGN_SUPPORT_KEY );\r\n\tconst isTextAlignValid =\r\n\t\tgetValidTextAlignments( blockTextAlign ).includes( textAlign );\r\n\tif (\r\n\t\tisTextAlignValid &&\r\n\t\t! shouldSkipSerialization(\r\n\t\t\tblockType,\r\n\t\t\tTYPOGRAPHY_SUPPORT_KEY,\r\n\t\t\t'textAlign'\r\n\t\t)\r\n\t) {\r\n\t\tprops.className = clsx(\r\n\t\t\t`has-text-align-${ textAlign }`,\r\n\t\t\tprops.className\r\n\t\t);\r\n\t}\r\n\treturn props;\r\n}\r\n"],"mappings":"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","ignoreList":[]}