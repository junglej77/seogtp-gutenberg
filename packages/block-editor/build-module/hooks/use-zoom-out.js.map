{"version":3,"names":["useSelect","useDispatch","useEffect","useRef","store","blockEditorStore","useZoomOut","zoomOut","__unstableSetEditorMode","__unstableGetEditorMode","originalEditingModeRef","mode","current"],"sources":["@wordpress/block-editor/src/hooks/use-zoom-out.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { useEffect, useRef } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../store';\r\n\r\n/**\r\n * A hook used to set the editor mode to zoomed out mode, invoking the hook sets the mode.\r\n *\r\n * @param {boolean} zoomOut If we should enter into zoomOut mode or not\r\n */\r\nexport function useZoomOut( zoomOut = true ) {\r\n\tconst { __unstableSetEditorMode } = useDispatch( blockEditorStore );\r\n\tconst { __unstableGetEditorMode } = useSelect( blockEditorStore );\r\n\r\n\tconst originalEditingModeRef = useRef( null );\r\n\tconst mode = __unstableGetEditorMode();\r\n\r\n\tuseEffect( () => {\r\n\t\t// Only set this on mount so we know what to return to when we unmount.\r\n\t\tif ( ! originalEditingModeRef.current ) {\r\n\t\t\toriginalEditingModeRef.current = mode;\r\n\t\t}\r\n\r\n\t\treturn () => {\r\n\t\t\t// We need to use  __unstableGetEditorMode() here and not `mode`, as mode may not update on unmount\r\n\t\t\tif (\r\n\t\t\t\t__unstableGetEditorMode() === 'zoom-out' &&\r\n\t\t\t\t__unstableGetEditorMode() !== originalEditingModeRef.current\r\n\t\t\t) {\r\n\t\t\t\t__unstableSetEditorMode( originalEditingModeRef.current );\r\n\t\t\t}\r\n\t\t};\r\n\t}, [] );\r\n\r\n\t// The effect opens the zoom-out view if we want it open and it's not currently in zoom-out mode.\r\n\tuseEffect( () => {\r\n\t\tif ( zoomOut && mode !== 'zoom-out' ) {\r\n\t\t\t__unstableSetEditorMode( 'zoom-out' );\r\n\t\t} else if (\r\n\t\t\t! zoomOut &&\r\n\t\t\t__unstableGetEditorMode() === 'zoom-out' &&\r\n\t\t\toriginalEditingModeRef.current !== mode\r\n\t\t) {\r\n\t\t\t__unstableSetEditorMode( originalEditingModeRef.current );\r\n\t\t}\r\n\t}, [ __unstableGetEditorMode, __unstableSetEditorMode, zoomOut ] ); // Mode is deliberately excluded from the dependencies so that the effect does not run when mode changes.\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,SAAS,EAAEC,WAAW,QAAQ,iBAAiB;AACxD,SAASC,SAAS,EAAEC,MAAM,QAAQ,oBAAoB;;AAEtD;AACA;AACA;AACA,SAASC,KAAK,IAAIC,gBAAgB,QAAQ,UAAU;;AAEpD;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,UAAUA,CAAEC,OAAO,GAAG,IAAI,EAAG;EAC5C,MAAM;IAAEC;EAAwB,CAAC,GAAGP,WAAW,CAAEI,gBAAiB,CAAC;EACnE,MAAM;IAAEI;EAAwB,CAAC,GAAGT,SAAS,CAAEK,gBAAiB,CAAC;EAEjE,MAAMK,sBAAsB,GAAGP,MAAM,CAAE,IAAK,CAAC;EAC7C,MAAMQ,IAAI,GAAGF,uBAAuB,CAAC,CAAC;EAEtCP,SAAS,CAAE,MAAM;IAChB;IACA,IAAK,CAAEQ,sBAAsB,CAACE,OAAO,EAAG;MACvCF,sBAAsB,CAACE,OAAO,GAAGD,IAAI;IACtC;IAEA,OAAO,MAAM;MACZ;MACA,IACCF,uBAAuB,CAAC,CAAC,KAAK,UAAU,IACxCA,uBAAuB,CAAC,CAAC,KAAKC,sBAAsB,CAACE,OAAO,EAC3D;QACDJ,uBAAuB,CAAEE,sBAAsB,CAACE,OAAQ,CAAC;MAC1D;IACD,CAAC;EACF,CAAC,EAAE,EAAG,CAAC;;EAEP;EACAV,SAAS,CAAE,MAAM;IAChB,IAAKK,OAAO,IAAII,IAAI,KAAK,UAAU,EAAG;MACrCH,uBAAuB,CAAE,UAAW,CAAC;IACtC,CAAC,MAAM,IACN,CAAED,OAAO,IACTE,uBAAuB,CAAC,CAAC,KAAK,UAAU,IACxCC,sBAAsB,CAACE,OAAO,KAAKD,IAAI,EACtC;MACDH,uBAAuB,CAAEE,sBAAsB,CAACE,OAAQ,CAAC;IAC1D;EACD,CAAC,EAAE,CAAEH,uBAAuB,EAAED,uBAAuB,EAAED,OAAO,CAAG,CAAC,CAAC,CAAC;AACrE","ignoreList":[]}