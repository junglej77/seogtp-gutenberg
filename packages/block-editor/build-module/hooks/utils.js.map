{"version":3,"names":["getBlockSupport","memo","useMemo","useEffect","useId","useState","useDispatch","useRegistry","createHigherOrderComponent","addFilter","useBlockEditContext","mayDisplayControlsKey","mayDisplayParentControlsKey","useSettings","useSettingsForBlockElement","getValueFromObjectPath","setImmutably","store","blockEditorStore","unlock","clsx","jsx","_jsx","cleanEmptyObject","object","Array","isArray","cleanedNestedObjects","Object","entries","map","key","value","filter","undefined","length","fromEntries","transformStyles","activeSupports","migrationPaths","result","source","index","results","values","every","isActive","innerBlocks","referenceBlockAttributes","attributes","returnBlock","forEach","support","path","styleValue","shouldSkipSerialization","blockNameOrType","featureSet","feature","skipSerialization","__experimentalSkipSerialization","includes","pendingStyleOverrides","WeakMap","useStyleOverride","id","css","usePrivateStyleOverride","assets","__unstableType","variation","clientId","setStyleOverride","deleteStyleOverride","registry","fallbackId","_id","override","get","set","push","window","queueMicrotask","batch","args","isPending","find","currentId","useBlockSettings","name","parentLayout","backgroundImage","backgroundSize","customFontFamilies","defaultFontFamilies","themeFontFamilies","defaultFontSizesEnabled","customFontSizes","defaultFontSizes","themeFontSizes","customFontSize","fontStyle","fontWeight","lineHeight","textAlign","textColumns","textDecoration","writingMode","textTransform","letterSpacing","padding","margin","blockGap","defaultSpacingSizesEnabled","customSpacingSize","userSpacingSizes","defaultSpacingSizes","themeSpacingSizes","units","aspectRatio","minHeight","layout","borderColor","borderRadius","borderStyle","borderWidth","customColorsEnabled","customColors","customDuotone","themeColors","defaultColors","defaultPalette","defaultDuotone","userDuotonePalette","themeDuotonePalette","defaultDuotonePalette","userGradientPalette","themeGradientPalette","defaultGradientPalette","defaultGradients","areCustomGradientsEnabled","isBackgroundEnabled","isLinkEnabled","isTextEnabled","isHeadingEnabled","isButtonEnabled","shadow","rawSettings","background","color","palette","custom","theme","default","gradients","duotone","customGradient","link","heading","button","text","typography","fontFamilies","fontSizes","spacing","spacingSizes","border","radius","style","width","dimensions","createBlockEditFilter","features","settings","Edit","edit","withBlockEditHooks","OriginalBlockEdit","props","context","i","hasSupport","attributeKeys","shareWithChildBlocks","shouldDisplayControls","neededProps","isSelected","setAttributes","__unstableParentLayout","BlockProps","useBlockProps","setAllWrapperProps","wrapperProps","setWrapperProps","next","prev","nextAll","BlockPropsPure","createBlockListBlockFilter","withBlockListBlockHooks","BlockListBlock","allWrapperProps","fill","isMatch","keys","Boolean","reduce","acc","className","createBlockSaveFilter","extraPropsFromHooks","accu","addSaveProps","neededAttributes","hasOwnProperty"],"sources":["@wordpress/block-editor/src/hooks/utils.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { getBlockSupport } from '@wordpress/blocks';\r\nimport { memo, useMemo, useEffect, useId, useState } from '@wordpress/element';\r\nimport { useDispatch, useRegistry } from '@wordpress/data';\r\nimport { createHigherOrderComponent } from '@wordpress/compose';\r\nimport { addFilter } from '@wordpress/hooks';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport {\r\n\tuseBlockEditContext,\r\n\tmayDisplayControlsKey,\r\n\tmayDisplayParentControlsKey,\r\n} from '../components/block-edit/context';\r\nimport { useSettings } from '../components';\r\nimport { useSettingsForBlockElement } from '../components/global-styles/hooks';\r\nimport { getValueFromObjectPath, setImmutably } from '../utils/object';\r\nimport { store as blockEditorStore } from '../store';\r\nimport { unlock } from '../lock-unlock';\r\n/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * Removed falsy values from nested object.\r\n *\r\n * @param {*} object\r\n * @return {*} Object cleaned from falsy values\r\n */\r\nexport const cleanEmptyObject = ( object ) => {\r\n\tif (\r\n\t\tobject === null ||\r\n\t\ttypeof object !== 'object' ||\r\n\t\tArray.isArray( object )\r\n\t) {\r\n\t\treturn object;\r\n\t}\r\n\r\n\tconst cleanedNestedObjects = Object.entries( object )\r\n\t\t.map( ( [ key, value ] ) => [ key, cleanEmptyObject( value ) ] )\r\n\t\t.filter( ( [ , value ] ) => value !== undefined );\r\n\treturn ! cleanedNestedObjects.length\r\n\t\t? undefined\r\n\t\t: Object.fromEntries( cleanedNestedObjects );\r\n};\r\n\r\nexport function transformStyles(\r\n\tactiveSupports,\r\n\tmigrationPaths,\r\n\tresult,\r\n\tsource,\r\n\tindex,\r\n\tresults\r\n) {\r\n\t// If there are no active supports return early.\r\n\tif (\r\n\t\tObject.values( activeSupports ?? {} ).every(\r\n\t\t\t( isActive ) => ! isActive\r\n\t\t)\r\n\t) {\r\n\t\treturn result;\r\n\t}\r\n\t// If the condition verifies we are probably in the presence of a wrapping transform\r\n\t// e.g: nesting paragraphs in a group or columns and in that case the styles should not be transformed.\r\n\tif ( results.length === 1 && result.innerBlocks.length === source.length ) {\r\n\t\treturn result;\r\n\t}\r\n\t// For cases where we have a transform from one block to multiple blocks\r\n\t// or multiple blocks to one block we apply the styles of the first source block\r\n\t// to the result(s).\r\n\tlet referenceBlockAttributes = source[ 0 ]?.attributes;\r\n\t// If we are in presence of transform between more than one block in the source\r\n\t// that has more than one block in the result\r\n\t// we apply the styles on source N to the result N,\r\n\t// if source N does not exists we do nothing.\r\n\tif ( results.length > 1 && source.length > 1 ) {\r\n\t\tif ( source[ index ] ) {\r\n\t\t\treferenceBlockAttributes = source[ index ]?.attributes;\r\n\t\t} else {\r\n\t\t\treturn result;\r\n\t\t}\r\n\t}\r\n\tlet returnBlock = result;\r\n\tObject.entries( activeSupports ).forEach( ( [ support, isActive ] ) => {\r\n\t\tif ( isActive ) {\r\n\t\t\tmigrationPaths[ support ].forEach( ( path ) => {\r\n\t\t\t\tconst styleValue = getValueFromObjectPath(\r\n\t\t\t\t\treferenceBlockAttributes,\r\n\t\t\t\t\tpath\r\n\t\t\t\t);\r\n\t\t\t\tif ( styleValue ) {\r\n\t\t\t\t\treturnBlock = {\r\n\t\t\t\t\t\t...returnBlock,\r\n\t\t\t\t\t\tattributes: setImmutably(\r\n\t\t\t\t\t\t\treturnBlock.attributes,\r\n\t\t\t\t\t\t\tpath,\r\n\t\t\t\t\t\t\tstyleValue\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t}\r\n\t} );\r\n\treturn returnBlock;\r\n}\r\n\r\n/**\r\n * Check whether serialization of specific block support feature or set should\r\n * be skipped.\r\n *\r\n * @param {string|Object} blockNameOrType Block name or block type object.\r\n * @param {string}        featureSet      Name of block support feature set.\r\n * @param {string}        feature         Name of the individual feature to check.\r\n *\r\n * @return {boolean} Whether serialization should occur.\r\n */\r\nexport function shouldSkipSerialization(\r\n\tblockNameOrType,\r\n\tfeatureSet,\r\n\tfeature\r\n) {\r\n\tconst support = getBlockSupport( blockNameOrType, featureSet );\r\n\tconst skipSerialization = support?.__experimentalSkipSerialization;\r\n\r\n\tif ( Array.isArray( skipSerialization ) ) {\r\n\t\treturn skipSerialization.includes( feature );\r\n\t}\r\n\r\n\treturn skipSerialization;\r\n}\r\n\r\nconst pendingStyleOverrides = new WeakMap();\r\n\r\n/**\r\n * Override a block editor settings style. Leave the ID blank to create a new\r\n * style.\r\n *\r\n * @param {Object}  override     Override object.\r\n * @param {?string} override.id  Id of the style override, leave blank to create\r\n *                               a new style.\r\n * @param {string}  override.css CSS to apply.\r\n */\r\nexport function useStyleOverride( { id, css } ) {\r\n\treturn usePrivateStyleOverride( { id, css } );\r\n}\r\n\r\nexport function usePrivateStyleOverride( {\r\n\tid,\r\n\tcss,\r\n\tassets,\r\n\t__unstableType,\r\n\tvariation,\r\n\tclientId,\r\n} = {} ) {\r\n\tconst { setStyleOverride, deleteStyleOverride } = unlock(\r\n\t\tuseDispatch( blockEditorStore )\r\n\t);\r\n\tconst registry = useRegistry();\r\n\tconst fallbackId = useId();\r\n\tuseEffect( () => {\r\n\t\t// Unmount if there is CSS and assets are empty.\r\n\t\tif ( ! css && ! assets ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst _id = id || fallbackId;\r\n\t\tconst override = {\r\n\t\t\tid,\r\n\t\t\tcss,\r\n\t\t\tassets,\r\n\t\t\t__unstableType,\r\n\t\t\tvariation,\r\n\t\t\tclientId,\r\n\t\t};\r\n\t\t// Batch updates to style overrides to avoid triggering cascading renders\r\n\t\t// for each style override block included in a tree and optimize initial render.\r\n\t\tif ( ! pendingStyleOverrides.get( registry ) ) {\r\n\t\t\tpendingStyleOverrides.set( registry, [] );\r\n\t\t}\r\n\t\tpendingStyleOverrides.get( registry ).push( [ _id, override ] );\r\n\t\twindow.queueMicrotask( () => {\r\n\t\t\tif ( pendingStyleOverrides.get( registry )?.length ) {\r\n\t\t\t\tregistry.batch( () => {\r\n\t\t\t\t\tpendingStyleOverrides.get( registry ).forEach( ( args ) => {\r\n\t\t\t\t\t\tsetStyleOverride( ...args );\r\n\t\t\t\t\t} );\r\n\t\t\t\t\tpendingStyleOverrides.set( registry, [] );\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\treturn () => {\r\n\t\t\tconst isPending = pendingStyleOverrides\r\n\t\t\t\t.get( registry )\r\n\t\t\t\t?.find( ( [ currentId ] ) => currentId === _id );\r\n\t\t\tif ( isPending ) {\r\n\t\t\t\tpendingStyleOverrides.set(\r\n\t\t\t\t\tregistry,\r\n\t\t\t\t\tpendingStyleOverrides\r\n\t\t\t\t\t\t.get( registry )\r\n\t\t\t\t\t\t.filter( ( [ currentId ] ) => currentId !== _id )\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tdeleteStyleOverride( _id );\r\n\t\t\t}\r\n\t\t};\r\n\t}, [\r\n\t\tid,\r\n\t\tcss,\r\n\t\tclientId,\r\n\t\tassets,\r\n\t\t__unstableType,\r\n\t\tfallbackId,\r\n\t\tsetStyleOverride,\r\n\t\tdeleteStyleOverride,\r\n\t\tregistry,\r\n\t] );\r\n}\r\n\r\n/**\r\n * Based on the block and its context, returns an object of all the block settings.\r\n * This object can be passed as a prop to all the Styles UI components\r\n * (TypographyPanel, DimensionsPanel...).\r\n *\r\n * @param {string} name         Block name.\r\n * @param {*}      parentLayout Parent layout.\r\n *\r\n * @return {Object} Settings object.\r\n */\r\nexport function useBlockSettings( name, parentLayout ) {\r\n\tconst [\r\n\t\tbackgroundImage,\r\n\t\tbackgroundSize,\r\n\t\tcustomFontFamilies,\r\n\t\tdefaultFontFamilies,\r\n\t\tthemeFontFamilies,\r\n\t\tdefaultFontSizesEnabled,\r\n\t\tcustomFontSizes,\r\n\t\tdefaultFontSizes,\r\n\t\tthemeFontSizes,\r\n\t\tcustomFontSize,\r\n\t\tfontStyle,\r\n\t\tfontWeight,\r\n\t\tlineHeight,\r\n\t\ttextAlign,\r\n\t\ttextColumns,\r\n\t\ttextDecoration,\r\n\t\twritingMode,\r\n\t\ttextTransform,\r\n\t\tletterSpacing,\r\n\t\tpadding,\r\n\t\tmargin,\r\n\t\tblockGap,\r\n\t\tdefaultSpacingSizesEnabled,\r\n\t\tcustomSpacingSize,\r\n\t\tuserSpacingSizes,\r\n\t\tdefaultSpacingSizes,\r\n\t\tthemeSpacingSizes,\r\n\t\tunits,\r\n\t\taspectRatio,\r\n\t\tminHeight,\r\n\t\tlayout,\r\n\t\tborderColor,\r\n\t\tborderRadius,\r\n\t\tborderStyle,\r\n\t\tborderWidth,\r\n\t\tcustomColorsEnabled,\r\n\t\tcustomColors,\r\n\t\tcustomDuotone,\r\n\t\tthemeColors,\r\n\t\tdefaultColors,\r\n\t\tdefaultPalette,\r\n\t\tdefaultDuotone,\r\n\t\tuserDuotonePalette,\r\n\t\tthemeDuotonePalette,\r\n\t\tdefaultDuotonePalette,\r\n\t\tuserGradientPalette,\r\n\t\tthemeGradientPalette,\r\n\t\tdefaultGradientPalette,\r\n\t\tdefaultGradients,\r\n\t\tareCustomGradientsEnabled,\r\n\t\tisBackgroundEnabled,\r\n\t\tisLinkEnabled,\r\n\t\tisTextEnabled,\r\n\t\tisHeadingEnabled,\r\n\t\tisButtonEnabled,\r\n\t\tshadow,\r\n\t] = useSettings(\r\n\t\t'background.backgroundImage',\r\n\t\t'background.backgroundSize',\r\n\t\t'typography.fontFamilies.custom',\r\n\t\t'typography.fontFamilies.default',\r\n\t\t'typography.fontFamilies.theme',\r\n\t\t'typography.defaultFontSizes',\r\n\t\t'typography.fontSizes.custom',\r\n\t\t'typography.fontSizes.default',\r\n\t\t'typography.fontSizes.theme',\r\n\t\t'typography.customFontSize',\r\n\t\t'typography.fontStyle',\r\n\t\t'typography.fontWeight',\r\n\t\t'typography.lineHeight',\r\n\t\t'typography.textAlign',\r\n\t\t'typography.textColumns',\r\n\t\t'typography.textDecoration',\r\n\t\t'typography.writingMode',\r\n\t\t'typography.textTransform',\r\n\t\t'typography.letterSpacing',\r\n\t\t'spacing.padding',\r\n\t\t'spacing.margin',\r\n\t\t'spacing.blockGap',\r\n\t\t'spacing.defaultSpacingSizes',\r\n\t\t'spacing.customSpacingSize',\r\n\t\t'spacing.spacingSizes.custom',\r\n\t\t'spacing.spacingSizes.default',\r\n\t\t'spacing.spacingSizes.theme',\r\n\t\t'spacing.units',\r\n\t\t'dimensions.aspectRatio',\r\n\t\t'dimensions.minHeight',\r\n\t\t'layout',\r\n\t\t'border.color',\r\n\t\t'border.radius',\r\n\t\t'border.style',\r\n\t\t'border.width',\r\n\t\t'color.custom',\r\n\t\t'color.palette.custom',\r\n\t\t'color.customDuotone',\r\n\t\t'color.palette.theme',\r\n\t\t'color.palette.default',\r\n\t\t'color.defaultPalette',\r\n\t\t'color.defaultDuotone',\r\n\t\t'color.duotone.custom',\r\n\t\t'color.duotone.theme',\r\n\t\t'color.duotone.default',\r\n\t\t'color.gradients.custom',\r\n\t\t'color.gradients.theme',\r\n\t\t'color.gradients.default',\r\n\t\t'color.defaultGradients',\r\n\t\t'color.customGradient',\r\n\t\t'color.background',\r\n\t\t'color.link',\r\n\t\t'color.text',\r\n\t\t'color.heading',\r\n\t\t'color.button',\r\n\t\t'shadow'\r\n\t);\r\n\r\n\tconst rawSettings = useMemo( () => {\r\n\t\treturn {\r\n\t\t\tbackground: {\r\n\t\t\t\tbackgroundImage,\r\n\t\t\t\tbackgroundSize,\r\n\t\t\t},\r\n\t\t\tcolor: {\r\n\t\t\t\tpalette: {\r\n\t\t\t\t\tcustom: customColors,\r\n\t\t\t\t\ttheme: themeColors,\r\n\t\t\t\t\tdefault: defaultColors,\r\n\t\t\t\t},\r\n\t\t\t\tgradients: {\r\n\t\t\t\t\tcustom: userGradientPalette,\r\n\t\t\t\t\ttheme: themeGradientPalette,\r\n\t\t\t\t\tdefault: defaultGradientPalette,\r\n\t\t\t\t},\r\n\t\t\t\tduotone: {\r\n\t\t\t\t\tcustom: userDuotonePalette,\r\n\t\t\t\t\ttheme: themeDuotonePalette,\r\n\t\t\t\t\tdefault: defaultDuotonePalette,\r\n\t\t\t\t},\r\n\t\t\t\tdefaultGradients,\r\n\t\t\t\tdefaultPalette,\r\n\t\t\t\tdefaultDuotone,\r\n\t\t\t\tcustom: customColorsEnabled,\r\n\t\t\t\tcustomGradient: areCustomGradientsEnabled,\r\n\t\t\t\tcustomDuotone,\r\n\t\t\t\tbackground: isBackgroundEnabled,\r\n\t\t\t\tlink: isLinkEnabled,\r\n\t\t\t\theading: isHeadingEnabled,\r\n\t\t\t\tbutton: isButtonEnabled,\r\n\t\t\t\ttext: isTextEnabled,\r\n\t\t\t},\r\n\t\t\ttypography: {\r\n\t\t\t\tfontFamilies: {\r\n\t\t\t\t\tcustom: customFontFamilies,\r\n\t\t\t\t\tdefault: defaultFontFamilies,\r\n\t\t\t\t\ttheme: themeFontFamilies,\r\n\t\t\t\t},\r\n\t\t\t\tfontSizes: {\r\n\t\t\t\t\tcustom: customFontSizes,\r\n\t\t\t\t\tdefault: defaultFontSizes,\r\n\t\t\t\t\ttheme: themeFontSizes,\r\n\t\t\t\t},\r\n\t\t\t\tcustomFontSize,\r\n\t\t\t\tdefaultFontSizes: defaultFontSizesEnabled,\r\n\t\t\t\tfontStyle,\r\n\t\t\t\tfontWeight,\r\n\t\t\t\tlineHeight,\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextColumns,\r\n\t\t\t\ttextDecoration,\r\n\t\t\t\ttextTransform,\r\n\t\t\t\tletterSpacing,\r\n\t\t\t\twritingMode,\r\n\t\t\t},\r\n\t\t\tspacing: {\r\n\t\t\t\tspacingSizes: {\r\n\t\t\t\t\tcustom: userSpacingSizes,\r\n\t\t\t\t\tdefault: defaultSpacingSizes,\r\n\t\t\t\t\ttheme: themeSpacingSizes,\r\n\t\t\t\t},\r\n\t\t\t\tcustomSpacingSize,\r\n\t\t\t\tdefaultSpacingSizes: defaultSpacingSizesEnabled,\r\n\t\t\t\tpadding,\r\n\t\t\t\tmargin,\r\n\t\t\t\tblockGap,\r\n\t\t\t\tunits,\r\n\t\t\t},\r\n\t\t\tborder: {\r\n\t\t\t\tcolor: borderColor,\r\n\t\t\t\tradius: borderRadius,\r\n\t\t\t\tstyle: borderStyle,\r\n\t\t\t\twidth: borderWidth,\r\n\t\t\t},\r\n\t\t\tdimensions: {\r\n\t\t\t\taspectRatio,\r\n\t\t\t\tminHeight,\r\n\t\t\t},\r\n\t\t\tlayout,\r\n\t\t\tparentLayout,\r\n\t\t\tshadow,\r\n\t\t};\r\n\t}, [\r\n\t\tbackgroundImage,\r\n\t\tbackgroundSize,\r\n\t\tcustomFontFamilies,\r\n\t\tdefaultFontFamilies,\r\n\t\tthemeFontFamilies,\r\n\t\tdefaultFontSizesEnabled,\r\n\t\tcustomFontSizes,\r\n\t\tdefaultFontSizes,\r\n\t\tthemeFontSizes,\r\n\t\tcustomFontSize,\r\n\t\tfontStyle,\r\n\t\tfontWeight,\r\n\t\tlineHeight,\r\n\t\ttextAlign,\r\n\t\ttextColumns,\r\n\t\ttextDecoration,\r\n\t\ttextTransform,\r\n\t\tletterSpacing,\r\n\t\twritingMode,\r\n\t\tpadding,\r\n\t\tmargin,\r\n\t\tblockGap,\r\n\t\tdefaultSpacingSizesEnabled,\r\n\t\tcustomSpacingSize,\r\n\t\tuserSpacingSizes,\r\n\t\tdefaultSpacingSizes,\r\n\t\tthemeSpacingSizes,\r\n\t\tunits,\r\n\t\taspectRatio,\r\n\t\tminHeight,\r\n\t\tlayout,\r\n\t\tparentLayout,\r\n\t\tborderColor,\r\n\t\tborderRadius,\r\n\t\tborderStyle,\r\n\t\tborderWidth,\r\n\t\tcustomColorsEnabled,\r\n\t\tcustomColors,\r\n\t\tcustomDuotone,\r\n\t\tthemeColors,\r\n\t\tdefaultColors,\r\n\t\tdefaultPalette,\r\n\t\tdefaultDuotone,\r\n\t\tuserDuotonePalette,\r\n\t\tthemeDuotonePalette,\r\n\t\tdefaultDuotonePalette,\r\n\t\tuserGradientPalette,\r\n\t\tthemeGradientPalette,\r\n\t\tdefaultGradientPalette,\r\n\t\tdefaultGradients,\r\n\t\tareCustomGradientsEnabled,\r\n\t\tisBackgroundEnabled,\r\n\t\tisLinkEnabled,\r\n\t\tisTextEnabled,\r\n\t\tisHeadingEnabled,\r\n\t\tisButtonEnabled,\r\n\t\tshadow,\r\n\t] );\r\n\r\n\treturn useSettingsForBlockElement( rawSettings, name );\r\n}\r\n\r\nexport function createBlockEditFilter( features ) {\r\n\t// We don't want block controls to re-render when typing inside a block.\r\n\t// `memo` will prevent re-renders unless props change, so only pass the\r\n\t// needed props and not the whole attributes object.\r\n\tfeatures = features.map( ( settings ) => {\r\n\t\treturn { ...settings, Edit: memo( settings.edit ) };\r\n\t} );\r\n\tconst withBlockEditHooks = createHigherOrderComponent(\r\n\t\t( OriginalBlockEdit ) => ( props ) => {\r\n\t\t\tconst context = useBlockEditContext();\r\n\t\t\t// CAUTION: code added before this line will be executed for all\r\n\t\t\t// blocks, not just those that support the feature! Code added\r\n\t\t\t// above this line should be carefully evaluated for its impact on\r\n\t\t\t// performance.\r\n\t\t\treturn [\r\n\t\t\t\t...features.map( ( feature, i ) => {\r\n\t\t\t\t\tconst {\r\n\t\t\t\t\t\tEdit,\r\n\t\t\t\t\t\thasSupport,\r\n\t\t\t\t\t\tattributeKeys = [],\r\n\t\t\t\t\t\tshareWithChildBlocks,\r\n\t\t\t\t\t} = feature;\r\n\t\t\t\t\tconst shouldDisplayControls =\r\n\t\t\t\t\t\tcontext[ mayDisplayControlsKey ] ||\r\n\t\t\t\t\t\t( context[ mayDisplayParentControlsKey ] &&\r\n\t\t\t\t\t\t\tshareWithChildBlocks );\r\n\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t! shouldDisplayControls ||\r\n\t\t\t\t\t\t! hasSupport( props.name )\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst neededProps = {};\r\n\t\t\t\t\tfor ( const key of attributeKeys ) {\r\n\t\t\t\t\t\tif ( props.attributes[ key ] ) {\r\n\t\t\t\t\t\t\tneededProps[ key ] = props.attributes[ key ];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Edit\r\n\t\t\t\t\t\t\t// We can use the index because the array length\r\n\t\t\t\t\t\t\t// is fixed per page load right now.\r\n\t\t\t\t\t\t\tkey={ i }\r\n\t\t\t\t\t\t\tname={ props.name }\r\n\t\t\t\t\t\t\tisSelected={ props.isSelected }\r\n\t\t\t\t\t\t\tclientId={ props.clientId }\r\n\t\t\t\t\t\t\tsetAttributes={ props.setAttributes }\r\n\t\t\t\t\t\t\t__unstableParentLayout={\r\n\t\t\t\t\t\t\t\tprops.__unstableParentLayout\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// This component is pure, so only pass needed\r\n\t\t\t\t\t\t\t// props!!!\r\n\t\t\t\t\t\t\t{ ...neededProps }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t} ),\r\n\t\t\t\t<OriginalBlockEdit key=\"edit\" { ...props } />,\r\n\t\t\t];\r\n\t\t},\r\n\t\t'withBlockEditHooks'\r\n\t);\r\n\taddFilter( 'editor.BlockEdit', 'core/editor/hooks', withBlockEditHooks );\r\n}\r\n\r\nfunction BlockProps( { index, useBlockProps, setAllWrapperProps, ...props } ) {\r\n\tconst wrapperProps = useBlockProps( props );\r\n\tconst setWrapperProps = ( next ) =>\r\n\t\tsetAllWrapperProps( ( prev ) => {\r\n\t\t\tconst nextAll = [ ...prev ];\r\n\t\t\tnextAll[ index ] = next;\r\n\t\t\treturn nextAll;\r\n\t\t} );\r\n\t// Setting state after every render is fine because this component is\r\n\t// pure and will only re-render when needed props change.\r\n\tuseEffect( () => {\r\n\t\t// We could shallow compare the props, but since this component only\r\n\t\t// changes when needed attributes change, the benefit is probably small.\r\n\t\tsetWrapperProps( wrapperProps );\r\n\t\treturn () => {\r\n\t\t\tsetWrapperProps( undefined );\r\n\t\t};\r\n\t} );\r\n\treturn null;\r\n}\r\n\r\nconst BlockPropsPure = memo( BlockProps );\r\n\r\nexport function createBlockListBlockFilter( features ) {\r\n\tconst withBlockListBlockHooks = createHigherOrderComponent(\r\n\t\t( BlockListBlock ) => ( props ) => {\r\n\t\t\tconst [ allWrapperProps, setAllWrapperProps ] = useState(\r\n\t\t\t\tArray( features.length ).fill( undefined )\r\n\t\t\t);\r\n\t\t\treturn [\r\n\t\t\t\t...features.map( ( feature, i ) => {\r\n\t\t\t\t\tconst {\r\n\t\t\t\t\t\thasSupport,\r\n\t\t\t\t\t\tattributeKeys = [],\r\n\t\t\t\t\t\tuseBlockProps,\r\n\t\t\t\t\t\tisMatch,\r\n\t\t\t\t\t} = feature;\r\n\r\n\t\t\t\t\tconst neededProps = {};\r\n\t\t\t\t\tfor ( const key of attributeKeys ) {\r\n\t\t\t\t\t\tif ( props.attributes[ key ] ) {\r\n\t\t\t\t\t\t\tneededProps[ key ] = props.attributes[ key ];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t// Skip rendering if none of the needed attributes are\r\n\t\t\t\t\t\t// set.\r\n\t\t\t\t\t\t! Object.keys( neededProps ).length ||\r\n\t\t\t\t\t\t! hasSupport( props.name ) ||\r\n\t\t\t\t\t\t( isMatch && ! isMatch( neededProps ) )\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<BlockPropsPure\r\n\t\t\t\t\t\t\t// We can use the index because the array length\r\n\t\t\t\t\t\t\t// is fixed per page load right now.\r\n\t\t\t\t\t\t\tkey={ i }\r\n\t\t\t\t\t\t\tindex={ i }\r\n\t\t\t\t\t\t\tuseBlockProps={ useBlockProps }\r\n\t\t\t\t\t\t\t// This component is pure, so we must pass a stable\r\n\t\t\t\t\t\t\t// function reference.\r\n\t\t\t\t\t\t\tsetAllWrapperProps={ setAllWrapperProps }\r\n\t\t\t\t\t\t\tname={ props.name }\r\n\t\t\t\t\t\t\tclientId={ props.clientId }\r\n\t\t\t\t\t\t\t// This component is pure, so only pass needed\r\n\t\t\t\t\t\t\t// props!!!\r\n\t\t\t\t\t\t\t{ ...neededProps }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t} ),\r\n\t\t\t\t<BlockListBlock\r\n\t\t\t\t\tkey=\"edit\"\r\n\t\t\t\t\t{ ...props }\r\n\t\t\t\t\twrapperProps={ allWrapperProps\r\n\t\t\t\t\t\t.filter( Boolean )\r\n\t\t\t\t\t\t.reduce( ( acc, wrapperProps ) => {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t...acc,\r\n\t\t\t\t\t\t\t\t...wrapperProps,\r\n\t\t\t\t\t\t\t\tclassName: clsx(\r\n\t\t\t\t\t\t\t\t\tacc.className,\r\n\t\t\t\t\t\t\t\t\twrapperProps.className\r\n\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\t\t\t\t...acc.style,\r\n\t\t\t\t\t\t\t\t\t...wrapperProps.style,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}, props.wrapperProps || {} ) }\r\n\t\t\t\t/>,\r\n\t\t\t];\r\n\t\t},\r\n\t\t'withBlockListBlockHooks'\r\n\t);\r\n\taddFilter(\r\n\t\t'editor.BlockListBlock',\r\n\t\t'core/editor/hooks',\r\n\t\twithBlockListBlockHooks\r\n\t);\r\n}\r\n\r\nexport function createBlockSaveFilter( features ) {\r\n\tfunction extraPropsFromHooks( props, name, attributes ) {\r\n\t\treturn features.reduce( ( accu, feature ) => {\r\n\t\t\tconst { hasSupport, attributeKeys = [], addSaveProps } = feature;\r\n\r\n\t\t\tconst neededAttributes = {};\r\n\t\t\tfor ( const key of attributeKeys ) {\r\n\t\t\t\tif ( attributes[ key ] ) {\r\n\t\t\t\t\tneededAttributes[ key ] = attributes[ key ];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (\r\n\t\t\t\t// Skip rendering if none of the needed attributes are\r\n\t\t\t\t// set.\r\n\t\t\t\t! Object.keys( neededAttributes ).length ||\r\n\t\t\t\t! hasSupport( name )\r\n\t\t\t) {\r\n\t\t\t\treturn accu;\r\n\t\t\t}\r\n\r\n\t\t\treturn addSaveProps( accu, name, neededAttributes );\r\n\t\t}, props );\r\n\t}\r\n\taddFilter(\r\n\t\t'blocks.getSaveContent.extraProps',\r\n\t\t'core/editor/hooks',\r\n\t\textraPropsFromHooks,\r\n\t\t0\r\n\t);\r\n\taddFilter(\r\n\t\t'blocks.getSaveContent.extraProps',\r\n\t\t'core/editor/hooks',\r\n\t\t( props ) => {\r\n\t\t\t// Previously we had a filter deleting the className if it was an empty\r\n\t\t\t// string. That filter is no longer running, so now we need to delete it\r\n\t\t\t// here.\r\n\t\t\tif ( props.hasOwnProperty( 'className' ) && ! props.className ) {\r\n\t\t\t\tdelete props.className;\r\n\t\t\t}\r\n\r\n\t\t\treturn props;\r\n\t\t}\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}