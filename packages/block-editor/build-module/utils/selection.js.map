{"version":3,"names":["RichTextData","START_OF_SELECTED_AREA","retrieveSelectedAttribute","blockAttributes","Object","keys","find","name","value","toString","indexOf","findRichTextAttributeKey","blockType","key","entries","attributes","source"],"sources":["@wordpress/block-editor/src/utils/selection.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { RichTextData } from '@wordpress/rich-text';\r\n\r\n/**\r\n * A robust way to retain selection position through various\r\n * transforms is to insert a special character at the position and\r\n * then recover it.\r\n */\r\nexport const START_OF_SELECTED_AREA = '\\u0086';\r\n\r\n/**\r\n * Retrieve the block attribute that contains the selection position.\r\n *\r\n * @param {Object} blockAttributes Block attributes.\r\n * @return {string|void} The name of the block attribute that was previously selected.\r\n */\r\nexport function retrieveSelectedAttribute( blockAttributes ) {\r\n\tif ( ! blockAttributes ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\treturn Object.keys( blockAttributes ).find( ( name ) => {\r\n\t\tconst value = blockAttributes[ name ];\r\n\t\treturn (\r\n\t\t\t( typeof value === 'string' || value instanceof RichTextData ) &&\r\n\t\t\t// To do: refactor this to use rich text's selection instead, so we\r\n\t\t\t// no longer have to use on this hack inserting a special character.\r\n\t\t\tvalue.toString().indexOf( START_OF_SELECTED_AREA ) !== -1\r\n\t\t);\r\n\t} );\r\n}\r\n\r\nexport function findRichTextAttributeKey( blockType ) {\r\n\tfor ( const [ key, value ] of Object.entries( blockType.attributes ) ) {\r\n\t\tif ( value.source === 'rich-text' || value.source === 'html' ) {\r\n\t\t\treturn key;\r\n\t\t}\r\n\t}\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,YAAY,QAAQ,sBAAsB;;AAEnD;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,sBAAsB,GAAG,QAAQ;;AAE9C;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,yBAAyBA,CAAEC,eAAe,EAAG;EAC5D,IAAK,CAAEA,eAAe,EAAG;IACxB;EACD;EAEA,OAAOC,MAAM,CAACC,IAAI,CAAEF,eAAgB,CAAC,CAACG,IAAI,CAAIC,IAAI,IAAM;IACvD,MAAMC,KAAK,GAAGL,eAAe,CAAEI,IAAI,CAAE;IACrC,OACC,CAAE,OAAOC,KAAK,KAAK,QAAQ,IAAIA,KAAK,YAAYR,YAAY;IAC5D;IACA;IACAQ,KAAK,CAACC,QAAQ,CAAC,CAAC,CAACC,OAAO,CAAET,sBAAuB,CAAC,KAAK,CAAC,CAAC;EAE3D,CAAE,CAAC;AACJ;AAEA,OAAO,SAASU,wBAAwBA,CAAEC,SAAS,EAAG;EACrD,KAAM,MAAM,CAAEC,GAAG,EAAEL,KAAK,CAAE,IAAIJ,MAAM,CAACU,OAAO,CAAEF,SAAS,CAACG,UAAW,CAAC,EAAG;IACtE,IAAKP,KAAK,CAACQ,MAAM,KAAK,WAAW,IAAIR,KAAK,CAACQ,MAAM,KAAK,MAAM,EAAG;MAC9D,OAAOH,GAAG;IACX;EACD;AACD","ignoreList":[]}