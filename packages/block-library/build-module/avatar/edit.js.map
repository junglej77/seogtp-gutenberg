{"version":3,"names":["clsx","InspectorControls","useBlockProps","__experimentalUseBorderProps","useBorderProps","PanelBody","RangeControl","ResizableBox","ToggleControl","__","isRTL","addQueryArgs","removeQueryArgs","useUserAvatar","useCommentAvatar","UserControl","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AvatarInspectorControls","setAttributes","avatar","attributes","selectUser","children","title","__nextHasNoMarginBottom","__next40pxDefaultSize","label","onChange","newSize","size","min","minSize","max","maxSize","initialPosition","value","isLink","checked","linkTarget","userId","ResizableAvatar","blockProps","isSelected","borderProps","doubledSizedSrc","src","s","width","height","showHandle","onResizeStop","event","direction","elt","delta","parseInt","lockAspectRatio","enable","top","right","bottom","left","minWidth","maxWidth","alt","className","style","CommentEdit","context","commentId","href","onClick","preventDefault","UserEdit","postId","postType","Edit","props"],"sources":["@wordpress/block-library/src/avatar/edit.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tInspectorControls,\r\n\tuseBlockProps,\r\n\t__experimentalUseBorderProps as useBorderProps,\r\n} from '@wordpress/block-editor';\r\nimport {\r\n\tPanelBody,\r\n\tRangeControl,\r\n\tResizableBox,\r\n\tToggleControl,\r\n} from '@wordpress/components';\r\nimport { __, isRTL } from '@wordpress/i18n';\r\nimport { addQueryArgs, removeQueryArgs } from '@wordpress/url';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { useUserAvatar, useCommentAvatar } from './hooks';\r\nimport UserControl from './user-control';\r\n\r\nconst AvatarInspectorControls = ( {\r\n\tsetAttributes,\r\n\tavatar,\r\n\tattributes,\r\n\tselectUser,\r\n} ) => (\r\n\t<InspectorControls>\r\n\t\t<PanelBody title={ __( 'Settings' ) }>\r\n\t\t\t<RangeControl\r\n\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\tlabel={ __( 'Image size' ) }\r\n\t\t\t\tonChange={ ( newSize ) =>\r\n\t\t\t\t\tsetAttributes( {\r\n\t\t\t\t\t\tsize: newSize,\r\n\t\t\t\t\t} )\r\n\t\t\t\t}\r\n\t\t\t\tmin={ avatar.minSize }\r\n\t\t\t\tmax={ avatar.maxSize }\r\n\t\t\t\tinitialPosition={ attributes?.size }\r\n\t\t\t\tvalue={ attributes?.size }\r\n\t\t\t/>\r\n\t\t\t<ToggleControl\r\n\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\tlabel={ __( 'Link to user profile' ) }\r\n\t\t\t\tonChange={ () =>\r\n\t\t\t\t\tsetAttributes( { isLink: ! attributes.isLink } )\r\n\t\t\t\t}\r\n\t\t\t\tchecked={ attributes.isLink }\r\n\t\t\t/>\r\n\t\t\t{ attributes.isLink && (\r\n\t\t\t\t<ToggleControl\r\n\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\tlabel={ __( 'Open in new tab' ) }\r\n\t\t\t\t\tonChange={ ( value ) =>\r\n\t\t\t\t\t\tsetAttributes( {\r\n\t\t\t\t\t\t\tlinkTarget: value ? '_blank' : '_self',\r\n\t\t\t\t\t\t} )\r\n\t\t\t\t\t}\r\n\t\t\t\t\tchecked={ attributes.linkTarget === '_blank' }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t\t{ selectUser && (\r\n\t\t\t\t<UserControl\r\n\t\t\t\t\tvalue={ attributes?.userId }\r\n\t\t\t\t\tonChange={ ( value ) => {\r\n\t\t\t\t\t\tsetAttributes( {\r\n\t\t\t\t\t\t\tuserId: value,\r\n\t\t\t\t\t\t} );\r\n\t\t\t\t\t} }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t</PanelBody>\r\n\t</InspectorControls>\r\n);\r\n\r\nconst ResizableAvatar = ( {\r\n\tsetAttributes,\r\n\tattributes,\r\n\tavatar,\r\n\tblockProps,\r\n\tisSelected,\r\n} ) => {\r\n\tconst borderProps = useBorderProps( attributes );\r\n\tconst doubledSizedSrc = addQueryArgs(\r\n\t\tremoveQueryArgs( avatar?.src, [ 's' ] ),\r\n\t\t{\r\n\t\t\ts: attributes?.size * 2,\r\n\t\t}\r\n\t);\r\n\treturn (\r\n\t\t<div { ...blockProps }>\r\n\t\t\t<ResizableBox\r\n\t\t\t\tsize={ {\r\n\t\t\t\t\twidth: attributes.size,\r\n\t\t\t\t\theight: attributes.size,\r\n\t\t\t\t} }\r\n\t\t\t\tshowHandle={ isSelected }\r\n\t\t\t\tonResizeStop={ ( event, direction, elt, delta ) => {\r\n\t\t\t\t\tsetAttributes( {\r\n\t\t\t\t\t\tsize: parseInt(\r\n\t\t\t\t\t\t\tattributes.size + ( delta.height || delta.width ),\r\n\t\t\t\t\t\t\t10\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t} );\r\n\t\t\t\t} }\r\n\t\t\t\tlockAspectRatio\r\n\t\t\t\tenable={ {\r\n\t\t\t\t\ttop: false,\r\n\t\t\t\t\tright: ! isRTL(),\r\n\t\t\t\t\tbottom: true,\r\n\t\t\t\t\tleft: isRTL(),\r\n\t\t\t\t} }\r\n\t\t\t\tminWidth={ avatar.minSize }\r\n\t\t\t\tmaxWidth={ avatar.maxSize }\r\n\t\t\t>\r\n\t\t\t\t<img\r\n\t\t\t\t\tsrc={ doubledSizedSrc }\r\n\t\t\t\t\talt={ avatar.alt }\r\n\t\t\t\t\tclassName={ clsx(\r\n\t\t\t\t\t\t'avatar',\r\n\t\t\t\t\t\t'avatar-' + attributes.size,\r\n\t\t\t\t\t\t'photo',\r\n\t\t\t\t\t\t'wp-block-avatar__image',\r\n\t\t\t\t\t\tborderProps.className\r\n\t\t\t\t\t) }\r\n\t\t\t\t\tstyle={ borderProps.style }\r\n\t\t\t\t/>\r\n\t\t\t</ResizableBox>\r\n\t\t</div>\r\n\t);\r\n};\r\nconst CommentEdit = ( { attributes, context, setAttributes, isSelected } ) => {\r\n\tconst { commentId } = context;\r\n\tconst blockProps = useBlockProps();\r\n\tconst avatar = useCommentAvatar( { commentId } );\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<AvatarInspectorControls\r\n\t\t\t\tavatar={ avatar }\r\n\t\t\t\tsetAttributes={ setAttributes }\r\n\t\t\t\tattributes={ attributes }\r\n\t\t\t\tselectUser={ false }\r\n\t\t\t/>\r\n\t\t\t{ attributes.isLink ? (\r\n\t\t\t\t<a\r\n\t\t\t\t\thref=\"#avatar-pseudo-link\"\r\n\t\t\t\t\tclassName=\"wp-block-avatar__link\"\r\n\t\t\t\t\tonClick={ ( event ) => event.preventDefault() }\r\n\t\t\t\t>\r\n\t\t\t\t\t<ResizableAvatar\r\n\t\t\t\t\t\tattributes={ attributes }\r\n\t\t\t\t\t\tavatar={ avatar }\r\n\t\t\t\t\t\tblockProps={ blockProps }\r\n\t\t\t\t\t\tisSelected={ isSelected }\r\n\t\t\t\t\t\tsetAttributes={ setAttributes }\r\n\t\t\t\t\t/>\r\n\t\t\t\t</a>\r\n\t\t\t) : (\r\n\t\t\t\t<ResizableAvatar\r\n\t\t\t\t\tattributes={ attributes }\r\n\t\t\t\t\tavatar={ avatar }\r\n\t\t\t\t\tblockProps={ blockProps }\r\n\t\t\t\t\tisSelected={ isSelected }\r\n\t\t\t\t\tsetAttributes={ setAttributes }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nconst UserEdit = ( { attributes, context, setAttributes, isSelected } ) => {\r\n\tconst { postId, postType } = context;\r\n\tconst avatar = useUserAvatar( {\r\n\t\tuserId: attributes?.userId,\r\n\t\tpostId,\r\n\t\tpostType,\r\n\t} );\r\n\tconst blockProps = useBlockProps();\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<AvatarInspectorControls\r\n\t\t\t\tselectUser\r\n\t\t\t\tattributes={ attributes }\r\n\t\t\t\tavatar={ avatar }\r\n\t\t\t\tsetAttributes={ setAttributes }\r\n\t\t\t/>\r\n\t\t\t{ attributes.isLink ? (\r\n\t\t\t\t<a\r\n\t\t\t\t\thref=\"#avatar-pseudo-link\"\r\n\t\t\t\t\tclassName=\"wp-block-avatar__link\"\r\n\t\t\t\t\tonClick={ ( event ) => event.preventDefault() }\r\n\t\t\t\t>\r\n\t\t\t\t\t<ResizableAvatar\r\n\t\t\t\t\t\tattributes={ attributes }\r\n\t\t\t\t\t\tavatar={ avatar }\r\n\t\t\t\t\t\tblockProps={ blockProps }\r\n\t\t\t\t\t\tisSelected={ isSelected }\r\n\t\t\t\t\t\tsetAttributes={ setAttributes }\r\n\t\t\t\t\t/>\r\n\t\t\t\t</a>\r\n\t\t\t) : (\r\n\t\t\t\t<ResizableAvatar\r\n\t\t\t\t\tattributes={ attributes }\r\n\t\t\t\t\tavatar={ avatar }\r\n\t\t\t\t\tblockProps={ blockProps }\r\n\t\t\t\t\tisSelected={ isSelected }\r\n\t\t\t\t\tsetAttributes={ setAttributes }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default function Edit( props ) {\r\n\t// Don't show the Comment Edit controls if we have a comment ID set, or if we're in the Site Editor (where it is `null`).\r\n\tif ( props?.context?.commentId || props?.context?.commentId === null ) {\r\n\t\treturn <CommentEdit { ...props } />;\r\n\t}\r\n\treturn <UserEdit { ...props } />;\r\n}\r\n"],"mappings":"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","ignoreList":[]}