{"version":3,"names":["useEffect","useSelect","useDispatch","useShortcut","store","keyboardShortcutsStore","__","createBlock","blockEditorStore","BlockKeyboardShortcuts","registerShortcut","replaceBlocks","getBlockName","getSelectedBlockClientId","getBlockAttributes","handleTransformHeadingAndParagraph","event","level","preventDefault","currentClientId","blockName","isParagraph","isHeading","destinationBlockName","attributes","textAlign","destinationTextAlign","content","name","category","description","keyCombination","modifier","character","aliases","forEach"],"sources":["@wordpress/block-library/src/block-keyboard-shortcuts/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useEffect } from '@wordpress/element';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport {\r\n\tuseShortcut,\r\n\tstore as keyboardShortcutsStore,\r\n} from '@wordpress/keyboard-shortcuts';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { createBlock } from '@wordpress/blocks';\r\nimport { store as blockEditorStore } from '@wordpress/block-editor';\r\n\r\nfunction BlockKeyboardShortcuts() {\r\n\tconst { registerShortcut } = useDispatch( keyboardShortcutsStore );\r\n\tconst { replaceBlocks } = useDispatch( blockEditorStore );\r\n\tconst { getBlockName, getSelectedBlockClientId, getBlockAttributes } =\r\n\t\tuseSelect( blockEditorStore );\r\n\r\n\tconst handleTransformHeadingAndParagraph = ( event, level ) => {\r\n\t\tevent.preventDefault();\r\n\r\n\t\tconst currentClientId = getSelectedBlockClientId();\r\n\t\tif ( currentClientId === null ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst blockName = getBlockName( currentClientId );\r\n\t\tconst isParagraph = blockName === 'core/paragraph';\r\n\t\tconst isHeading = blockName === 'core/heading';\r\n\r\n\t\tif ( ! isParagraph && ! isHeading ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst destinationBlockName =\r\n\t\t\tlevel === 0 ? 'core/paragraph' : 'core/heading';\r\n\r\n\t\tconst attributes = getBlockAttributes( currentClientId );\r\n\r\n\t\t// Avoid unnecessary block transform when attempting to transform to\r\n\t\t// the same block type and/or same level.\r\n\t\tif (\r\n\t\t\t( isParagraph && level === 0 ) ||\r\n\t\t\t( isHeading && attributes.level === level )\r\n\t\t) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst textAlign =\r\n\t\t\tblockName === 'core/paragraph' ? 'align' : 'textAlign';\r\n\t\tconst destinationTextAlign =\r\n\t\t\tdestinationBlockName === 'core/paragraph' ? 'align' : 'textAlign';\r\n\r\n\t\treplaceBlocks(\r\n\t\t\tcurrentClientId,\r\n\t\t\tcreateBlock( destinationBlockName, {\r\n\t\t\t\tlevel,\r\n\t\t\t\tcontent: attributes.content,\r\n\t\t\t\t...{ [ destinationTextAlign ]: attributes[ textAlign ] },\r\n\t\t\t} )\r\n\t\t);\r\n\t};\r\n\r\n\tuseEffect( () => {\r\n\t\tregisterShortcut( {\r\n\t\t\tname: 'core/block-editor/transform-heading-to-paragraph',\r\n\t\t\tcategory: 'block-library',\r\n\t\t\tdescription: __( 'Transform heading to paragraph.' ),\r\n\t\t\tkeyCombination: {\r\n\t\t\t\tmodifier: 'access',\r\n\t\t\t\tcharacter: '0',\r\n\t\t\t},\r\n\t\t\taliases: [\r\n\t\t\t\t{\r\n\t\t\t\t\tmodifier: 'access',\r\n\t\t\t\t\tcharacter: '7',\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t} );\r\n\r\n\t\t[ 1, 2, 3, 4, 5, 6 ].forEach( ( level ) => {\r\n\t\t\tregisterShortcut( {\r\n\t\t\t\tname: `core/block-editor/transform-paragraph-to-heading-${ level }`,\r\n\t\t\t\tcategory: 'block-library',\r\n\t\t\t\tdescription: __( 'Transform paragraph to heading.' ),\r\n\t\t\t\tkeyCombination: {\r\n\t\t\t\t\tmodifier: 'access',\r\n\t\t\t\t\tcharacter: `${ level }`,\r\n\t\t\t\t},\r\n\t\t\t} );\r\n\t\t} );\r\n\t}, [] );\r\n\r\n\tuseShortcut(\r\n\t\t'core/block-editor/transform-heading-to-paragraph',\r\n\t\t( event ) => handleTransformHeadingAndParagraph( event, 0 )\r\n\t);\r\n\r\n\t[ 1, 2, 3, 4, 5, 6 ].forEach( ( level ) => {\r\n\t\t//the loop is based off on a constant therefore\r\n\t\t//the hook will execute the same way every time\r\n\t\t//eslint-disable-next-line react-hooks/rules-of-hooks\r\n\t\tuseShortcut(\r\n\t\t\t`core/block-editor/transform-paragraph-to-heading-${ level }`,\r\n\t\t\t( event ) => handleTransformHeadingAndParagraph( event, level )\r\n\t\t);\r\n\t} );\r\n\r\n\treturn null;\r\n}\r\n\r\nexport default BlockKeyboardShortcuts;\r\n"],"mappings":"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","ignoreList":[]}