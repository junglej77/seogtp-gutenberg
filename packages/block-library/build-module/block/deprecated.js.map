{"version":3,"names":["isObject","obj","Array","isArray","v2","attributes","ref","type","content","supports","customClassName","html","inserter","renaming","isEligible","Object","keys","every","contentKey","values","migrate","retainedAttributes","length","updatedContent","v1","overrides","forEach","id"],"sources":["@wordpress/block-library/src/block/deprecated.js"],"sourcesContent":["const isObject = ( obj ) =>\r\n\ttypeof obj === 'object' && ! Array.isArray( obj ) && obj !== null;\r\n\r\n// v2: Migrate to a more condensed version of the 'content' attribute attribute.\r\nconst v2 = {\r\n\tattributes: {\r\n\t\tref: {\r\n\t\t\ttype: 'number',\r\n\t\t},\r\n\t\tcontent: {\r\n\t\t\ttype: 'object',\r\n\t\t},\r\n\t},\r\n\tsupports: {\r\n\t\tcustomClassName: false,\r\n\t\thtml: false,\r\n\t\tinserter: false,\r\n\t\trenaming: false,\r\n\t},\r\n\t// Force this deprecation to run whenever there's a values sub-property that's an object.\r\n\t//\r\n\t// This could fail in the future if a block ever has binding to a `values` attribute.\r\n\t// Some extra protection is added to ensure `values` is an object, but this only reduces\r\n\t// the likelihood, it doesn't solve it completely.\r\n\tisEligible( { content } ) {\r\n\t\treturn (\r\n\t\t\t!! content &&\r\n\t\t\tObject.keys( content ).every(\r\n\t\t\t\t( contentKey ) =>\r\n\t\t\t\t\tcontent[ contentKey ].values &&\r\n\t\t\t\t\tisObject( content[ contentKey ].values )\r\n\t\t\t)\r\n\t\t);\r\n\t},\r\n\t/*\r\n\t * Old attribute format:\r\n\t * content: {\r\n\t *     \"V98q_x\": {\r\n\t * \t   \t\t// The attribute values are now stored as a 'values' sub-property.\r\n\t *         values: { content: 'My content value' },\r\n\t * \t       // ... additional metadata, like the block name can be stored here.\r\n\t *     }\r\n\t * }\r\n\t *\r\n\t * New attribute format:\r\n\t * content: {\r\n\t *     \"V98q_x\": {\r\n\t *         content: 'My content value',\r\n\t *     }\r\n\t * }\r\n\t */\r\n\tmigrate( attributes ) {\r\n\t\tconst { content, ...retainedAttributes } = attributes;\r\n\r\n\t\tif ( content && Object.keys( content ).length ) {\r\n\t\t\tconst updatedContent = { ...content };\r\n\r\n\t\t\tfor ( const contentKey in content ) {\r\n\t\t\t\tupdatedContent[ contentKey ] = content[ contentKey ].values;\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...retainedAttributes,\r\n\t\t\t\tcontent: updatedContent,\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn attributes;\r\n\t},\r\n};\r\n\r\n// v1: Rename the `overrides` attribute to the `content` attribute.\r\nconst v1 = {\r\n\tattributes: {\r\n\t\tref: {\r\n\t\t\ttype: 'number',\r\n\t\t},\r\n\t\toverrides: {\r\n\t\t\ttype: 'object',\r\n\t\t},\r\n\t},\r\n\tsupports: {\r\n\t\tcustomClassName: false,\r\n\t\thtml: false,\r\n\t\tinserter: false,\r\n\t\trenaming: false,\r\n\t},\r\n\t// Force this deprecation to run whenever there's an `overrides` object.\r\n\tisEligible( { overrides } ) {\r\n\t\treturn !! overrides;\r\n\t},\r\n\t/*\r\n\t * Old attribute format:\r\n\t * overrides: {\r\n\t *     // An key is an id that represents a block.\r\n\t *     // The values are the attribute values of the block.\r\n\t *     \"V98q_x\": { content: 'My content value' }\r\n\t * }\r\n\t *\r\n\t * New attribute format:\r\n\t * content: {\r\n\t *     \"V98q_x\": { content: 'My content value' }\r\n\t * }\r\n\t *\r\n\t */\r\n\tmigrate( attributes ) {\r\n\t\tconst { overrides, ...retainedAttributes } = attributes;\r\n\r\n\t\tconst content = {};\r\n\r\n\t\tObject.keys( overrides ).forEach( ( id ) => {\r\n\t\t\tcontent[ id ] = overrides[ id ];\r\n\t\t} );\r\n\r\n\t\treturn {\r\n\t\t\t...retainedAttributes,\r\n\t\t\tcontent,\r\n\t\t};\r\n\t},\r\n};\r\n\r\nexport default [ v2, v1 ];\r\n"],"mappings":"AAAA,MAAMA,QAAQ,GAAKC,GAAG,IACrB,OAAOA,GAAG,KAAK,QAAQ,IAAI,CAAEC,KAAK,CAACC,OAAO,CAAEF,GAAI,CAAC,IAAIA,GAAG,KAAK,IAAI;;AAElE;AACA,MAAMG,EAAE,GAAG;EACVC,UAAU,EAAE;IACXC,GAAG,EAAE;MACJC,IAAI,EAAE;IACP,CAAC;IACDC,OAAO,EAAE;MACRD,IAAI,EAAE;IACP;EACD,CAAC;EACDE,QAAQ,EAAE;IACTC,eAAe,EAAE,KAAK;IACtBC,IAAI,EAAE,KAAK;IACXC,QAAQ,EAAE,KAAK;IACfC,QAAQ,EAAE;EACX,CAAC;EACD;EACA;EACA;EACA;EACA;EACAC,UAAUA,CAAE;IAAEN;EAAQ,CAAC,EAAG;IACzB,OACC,CAAC,CAAEA,OAAO,IACVO,MAAM,CAACC,IAAI,CAAER,OAAQ,CAAC,CAACS,KAAK,CACzBC,UAAU,IACXV,OAAO,CAAEU,UAAU,CAAE,CAACC,MAAM,IAC5BnB,QAAQ,CAAEQ,OAAO,CAAEU,UAAU,CAAE,CAACC,MAAO,CACzC,CAAC;EAEH,CAAC;EACD;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCC,OAAOA,CAAEf,UAAU,EAAG;IACrB,MAAM;MAAEG,OAAO;MAAE,GAAGa;IAAmB,CAAC,GAAGhB,UAAU;IAErD,IAAKG,OAAO,IAAIO,MAAM,CAACC,IAAI,CAAER,OAAQ,CAAC,CAACc,MAAM,EAAG;MAC/C,MAAMC,cAAc,GAAG;QAAE,GAAGf;MAAQ,CAAC;MAErC,KAAM,MAAMU,UAAU,IAAIV,OAAO,EAAG;QACnCe,cAAc,CAAEL,UAAU,CAAE,GAAGV,OAAO,CAAEU,UAAU,CAAE,CAACC,MAAM;MAC5D;MAEA,OAAO;QACN,GAAGE,kBAAkB;QACrBb,OAAO,EAAEe;MACV,CAAC;IACF;IAEA,OAAOlB,UAAU;EAClB;AACD,CAAC;;AAED;AACA,MAAMmB,EAAE,GAAG;EACVnB,UAAU,EAAE;IACXC,GAAG,EAAE;MACJC,IAAI,EAAE;IACP,CAAC;IACDkB,SAAS,EAAE;MACVlB,IAAI,EAAE;IACP;EACD,CAAC;EACDE,QAAQ,EAAE;IACTC,eAAe,EAAE,KAAK;IACtBC,IAAI,EAAE,KAAK;IACXC,QAAQ,EAAE,KAAK;IACfC,QAAQ,EAAE;EACX,CAAC;EACD;EACAC,UAAUA,CAAE;IAAEW;EAAU,CAAC,EAAG;IAC3B,OAAO,CAAC,CAAEA,SAAS;EACpB,CAAC;EACD;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCL,OAAOA,CAAEf,UAAU,EAAG;IACrB,MAAM;MAAEoB,SAAS;MAAE,GAAGJ;IAAmB,CAAC,GAAGhB,UAAU;IAEvD,MAAMG,OAAO,GAAG,CAAC,CAAC;IAElBO,MAAM,CAACC,IAAI,CAAES,SAAU,CAAC,CAACC,OAAO,CAAIC,EAAE,IAAM;MAC3CnB,OAAO,CAAEmB,EAAE,CAAE,GAAGF,SAAS,CAAEE,EAAE,CAAE;IAChC,CAAE,CAAC;IAEH,OAAO;MACN,GAAGN,kBAAkB;MACrBb;IACD,CAAC;EACF;AACD,CAAC;AAED,eAAe,CAAEJ,EAAE,EAAEoB,EAAE,CAAE","ignoreList":[]}