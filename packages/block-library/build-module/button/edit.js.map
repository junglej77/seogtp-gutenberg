{"version":3,"names":["clsx","NEW_TAB_TARGET","NOFOLLOW_REL","getUpdatedLinkAttributes","removeAnchorTag","unlock","__","useEffect","useState","useRef","useMemo","Button","ButtonGroup","PanelBody","TextControl","ToolbarButton","Popover","AlignmentControl","BlockControls","InspectorControls","RichText","useBlockProps","__experimentalUseBorderProps","useBorderProps","__experimentalUseColorProps","useColorProps","__experimentalGetSpacingClassesAndStyles","useSpacingProps","__experimentalGetShadowClassesAndStyles","useShadowProps","__experimentalLinkControl","LinkControl","__experimentalGetElementClassName","store","blockEditorStore","useBlockEditingMode","displayShortcut","isKeyboardEvent","ENTER","link","linkOff","createBlock","cloneBlock","getDefaultBlockName","blocksStore","useMergeRefs","useRefEffect","useSelect","useDispatch","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","LINK_SETTINGS","DEFAULT_LINK_SETTINGS","id","title","useEnter","props","replaceBlocks","selectionChange","getBlock","getBlockRootClientId","getBlockIndex","propsRef","current","element","onKeyDown","event","defaultPrevented","keyCode","content","clientId","length","preventDefault","topParentListBlock","blockIndex","head","innerBlocks","slice","middle","after","tail","addEventListener","removeEventListener","WidthPanel","selectedWidth","setAttributes","handleChange","newWidth","width","undefined","children","map","widthValue","size","variant","onClick","ButtonEdit","attributes","className","isSelected","onReplace","mergeBlocks","context","tagName","textAlign","linkTarget","placeholder","rel","style","text","url","metadata","TagName","primary","startEditing","primaryShift","unlink","richTextRef","focus","popoverAnchor","setPopoverAnchor","borderProps","colorProps","spacingProps","shadowProps","ref","blockProps","blockEditingMode","isEditingURL","setIsEditingURL","isURLSet","opensInNewTab","nofollow","includes","isLinkTag","linkValue","useEnterRef","mergedRef","lockUrlControls","select","blockBindingsSource","getBlockBindingsSource","bindings","source","canUserEditValue","args","fontSize","value","onChange","withoutInteractiveFormatting","border","radius","onMerge","identifier","group","nextAlign","name","icon","shortcut","isActive","placement","onClose","anchor","focusOnMount","__unstableSlotName","shift","newURL","newOpensInNewTab","newNofollow","onRemove","forceIsEditingLink","settings"],"sources":["D:/jungle/gutenberg/packages/block-library/src/button/edit.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx'; // 用于条件性地组合 className 的第三方库\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { NEW_TAB_TARGET, NOFOLLOW_REL } from './constants'; // 从内部的常量文件引入 \"新窗口打开\" 和 \"nofollow\" 的常量\r\nimport { getUpdatedLinkAttributes } from './get-updated-link-attributes'; // 用于更新链接属性的函数\r\nimport removeAnchorTag from '../utils/remove-anchor-tag'; // 移除富文本内容中的锚点标签\r\nimport { unlock } from '../lock-unlock'; // 从内部文件中引入 unlock 函数\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n'; // 用于国际化字符串翻译\r\nimport { useEffect, useState, useRef, useMemo } from '@wordpress/element'; // WordPress 的 React Hook\r\nimport {\r\n\tButton,\r\n\tButtonGroup,\r\n\tPanelBody,\r\n\tTextControl,\r\n\tToolbarButton,\r\n\tPopover,\r\n} from '@wordpress/components'; // WordPress 的组件库\r\nimport {\r\n\tAlignmentControl,\r\n\tBlockControls,\r\n\tInspectorControls,\r\n\tRichText,\r\n\tuseBlockProps,\r\n\t__experimentalUseBorderProps as useBorderProps,\r\n\t__experimentalUseColorProps as useColorProps,\r\n\t__experimentalGetSpacingClassesAndStyles as useSpacingProps,\r\n\t__experimentalGetShadowClassesAndStyles as useShadowProps,\r\n\t__experimentalLinkControl as LinkControl,\r\n\t__experimentalGetElementClassName,\r\n\tstore as blockEditorStore,\r\n\tuseBlockEditingMode,\r\n} from '@wordpress/block-editor'; // 引入 Gutenberg 编辑器中使用的各种组件和钩子\r\nimport { displayShortcut, isKeyboardEvent, ENTER } from '@wordpress/keycodes'; // 提供键盘快捷键处理的工具\r\nimport { link, linkOff } from '@wordpress/icons'; // 链接图标和取消链接图标\r\nimport {\r\n\tcreateBlock,\r\n\tcloneBlock,\r\n\tgetDefaultBlockName,\r\n\tstore as blocksStore,\r\n} from '@wordpress/blocks'; // 块相关的工具函数\r\nimport { useMergeRefs, useRefEffect } from '@wordpress/compose'; // 用于合并 ref 和处理 ref 的工具函数\r\nimport { useSelect, useDispatch } from '@wordpress/data'; // 用于与 WordPress 数据仓库交互的工具\r\n\r\nconst LINK_SETTINGS = [\r\n\t...LinkControl.DEFAULT_LINK_SETTINGS,\r\n\t{\r\n\t\tid: 'nofollow',\r\n\t\ttitle: __( 'Mark as nofollow' ),\r\n\t},\r\n];\r\n\r\nfunction useEnter( props ) {\r\n\tconst { replaceBlocks, selectionChange } = useDispatch( blockEditorStore );\r\n\tconst { getBlock, getBlockRootClientId, getBlockIndex } =\r\n\t\tuseSelect( blockEditorStore );\r\n\tconst propsRef = useRef( props );\r\n\tpropsRef.current = props;\r\n\treturn useRefEffect( ( element ) => {\r\n\t\tfunction onKeyDown( event ) {\r\n\t\t\tif ( event.defaultPrevented || event.keyCode !== ENTER ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst { content, clientId } = propsRef.current;\r\n\t\t\tif ( content.length ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tevent.preventDefault();\r\n\t\t\tconst topParentListBlock = getBlock(\r\n\t\t\t\tgetBlockRootClientId( clientId )\r\n\t\t\t);\r\n\t\t\tconst blockIndex = getBlockIndex( clientId );\r\n\t\t\tconst head = cloneBlock( {\r\n\t\t\t\t...topParentListBlock,\r\n\t\t\t\tinnerBlocks: topParentListBlock.innerBlocks.slice(\r\n\t\t\t\t\t0,\r\n\t\t\t\t\tblockIndex\r\n\t\t\t\t),\r\n\t\t\t} );\r\n\t\t\tconst middle = createBlock( getDefaultBlockName() );\r\n\t\t\tconst after = topParentListBlock.innerBlocks.slice(\r\n\t\t\t\tblockIndex + 1\r\n\t\t\t);\r\n\t\t\tconst tail = after.length\r\n\t\t\t\t? [\r\n\t\t\t\t\t\tcloneBlock( {\r\n\t\t\t\t\t\t\t...topParentListBlock,\r\n\t\t\t\t\t\t\tinnerBlocks: after,\r\n\t\t\t\t\t\t} ),\r\n\t\t\t\t  ]\r\n\t\t\t\t: [];\r\n\t\t\treplaceBlocks(\r\n\t\t\t\ttopParentListBlock.clientId,\r\n\t\t\t\t[ head, middle, ...tail ],\r\n\t\t\t\t1\r\n\t\t\t);\r\n\t\t\t// We manually change the selection here because we are replacing\r\n\t\t\t// a different block than the selected one.\r\n\t\t\tselectionChange( middle.clientId );\r\n\t\t}\r\n\r\n\t\telement.addEventListener( 'keydown', onKeyDown );\r\n\t\treturn () => {\r\n\t\t\telement.removeEventListener( 'keydown', onKeyDown );\r\n\t\t};\r\n\t}, [] );\r\n}\r\n\r\nfunction WidthPanel( { selectedWidth, setAttributes } ) {\r\n\tfunction handleChange( newWidth ) {\r\n\t\t// Check if we are toggling the width off\r\n\t\tconst width = selectedWidth === newWidth ? undefined : newWidth;\r\n\r\n\t\t// Update attributes.\r\n\t\tsetAttributes( { width } );\r\n\t}\r\n\r\n\treturn (\r\n\t\t<PanelBody title={ __( 'Settings' ) }>\r\n\t\t\t<ButtonGroup aria-label={ __( 'Button width' ) }>\r\n\t\t\t\t{ [ 25, 50, 75, 100 ].map( ( widthValue ) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tkey={ widthValue }\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tvariant={\r\n\t\t\t\t\t\t\t\twidthValue === selectedWidth\r\n\t\t\t\t\t\t\t\t\t? 'primary'\r\n\t\t\t\t\t\t\t\t\t: undefined\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonClick={ () => handleChange( widthValue ) }\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{ widthValue }%\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t);\r\n\t\t\t\t} ) }\r\n\t\t\t</ButtonGroup>\r\n\t\t</PanelBody>\r\n\t);\r\n}\r\n\r\nfunction ButtonEdit( props ) {\r\n\tconst {\r\n\t\tattributes,\r\n\t\tsetAttributes,\r\n\t\tclassName,\r\n\t\tisSelected,\r\n\t\tonReplace,\r\n\t\tmergeBlocks,\r\n\t\tclientId,\r\n\t\tcontext,\r\n\t} = props;\r\n\tconst {\r\n\t\ttagName,\r\n\t\ttextAlign,\r\n\t\tlinkTarget,\r\n\t\tplaceholder,\r\n\t\trel,\r\n\t\tstyle,\r\n\t\ttext,\r\n\t\turl,\r\n\t\twidth,\r\n\t\tmetadata,\r\n\t} = attributes;\r\n\r\n\tconst TagName = tagName || 'a';\r\n\r\n\tfunction onKeyDown( event ) {\r\n\t\tif ( isKeyboardEvent.primary( event, 'k' ) ) {\r\n\t\t\tstartEditing( event );\r\n\t\t} else if ( isKeyboardEvent.primaryShift( event, 'k' ) ) {\r\n\t\t\tunlink();\r\n\t\t\trichTextRef.current?.focus();\r\n\t\t}\r\n\t}\r\n\r\n\t// Use internal state instead of a ref to make sure that the component\r\n\t// re-renders when the popover's anchor updates.\r\n\tconst [ popoverAnchor, setPopoverAnchor ] = useState( null );\r\n\r\n\tconst borderProps = useBorderProps( attributes );\r\n\tconst colorProps = useColorProps( attributes );\r\n\tconst spacingProps = useSpacingProps( attributes );\r\n\tconst shadowProps = useShadowProps( attributes );\r\n\tconst ref = useRef();\r\n\tconst richTextRef = useRef();\r\n\tconst blockProps = useBlockProps( {\r\n\t\tref: useMergeRefs( [ setPopoverAnchor, ref ] ),\r\n\t\tonKeyDown,\r\n\t} );\r\n\tconst blockEditingMode = useBlockEditingMode();\r\n\r\n\tconst [ isEditingURL, setIsEditingURL ] = useState( false );\r\n\tconst isURLSet = !! url;\r\n\tconst opensInNewTab = linkTarget === NEW_TAB_TARGET;\r\n\tconst nofollow = !! rel?.includes( NOFOLLOW_REL );\r\n\tconst isLinkTag = 'a' === TagName;\r\n\r\n\tfunction startEditing( event ) {\r\n\t\tevent.preventDefault();\r\n\t\tsetIsEditingURL( true );\r\n\t}\r\n\r\n\tfunction unlink() {\r\n\t\tsetAttributes( {\r\n\t\t\turl: undefined,\r\n\t\t\tlinkTarget: undefined,\r\n\t\t\trel: undefined,\r\n\t\t} );\r\n\t\tsetIsEditingURL( false );\r\n\t}\r\n\r\n\tuseEffect( () => {\r\n\t\tif ( ! isSelected ) {\r\n\t\t\tsetIsEditingURL( false );\r\n\t\t}\r\n\t}, [ isSelected ] );\r\n\r\n\t// Memoize link value to avoid overriding the LinkControl's internal state.\r\n\t// This is a temporary fix. See https://github.com/WordPress/gutenberg/issues/51256.\r\n\tconst linkValue = useMemo(\r\n\t\t() => ( { url, opensInNewTab, nofollow } ),\r\n\t\t[ url, opensInNewTab, nofollow ]\r\n\t);\r\n\r\n\tconst useEnterRef = useEnter( { content: text, clientId } );\r\n\tconst mergedRef = useMergeRefs( [ useEnterRef, richTextRef ] );\r\n\r\n\tconst { lockUrlControls = false } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tif ( ! isSelected ) {\r\n\t\t\t\treturn {};\r\n\t\t\t}\r\n\r\n\t\t\tconst blockBindingsSource = unlock(\r\n\t\t\t\tselect( blocksStore )\r\n\t\t\t).getBlockBindingsSource( metadata?.bindings?.url?.source );\r\n\r\n\t\t\treturn {\r\n\t\t\t\tlockUrlControls:\r\n\t\t\t\t\t!! metadata?.bindings?.url &&\r\n\t\t\t\t\t! blockBindingsSource?.canUserEditValue?.( {\r\n\t\t\t\t\t\tselect,\r\n\t\t\t\t\t\tcontext,\r\n\t\t\t\t\t\targs: metadata?.bindings?.url?.args,\r\n\t\t\t\t\t} ),\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ context, isSelected, metadata?.bindings?.url ]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div\r\n\t\t\t\t{ ...blockProps }\r\n\t\t\t\tclassName={ clsx( blockProps.className, {\r\n\t\t\t\t\t[ `has-custom-width wp-block-button__width-${ width }` ]:\r\n\t\t\t\t\t\twidth,\r\n\t\t\t\t\t[ `has-custom-font-size` ]: blockProps.style.fontSize,\r\n\t\t\t\t} ) }\r\n\t\t\t>\r\n\t\t\t\t<RichText\r\n\t\t\t\t\tref={ mergedRef }\r\n\t\t\t\t\taria-label={ __( 'Button text' ) }\r\n\t\t\t\t\tplaceholder={ placeholder || __( 'Add text…' ) }\r\n\t\t\t\t\tvalue={ text }\r\n\t\t\t\t\tonChange={ ( value ) =>\r\n\t\t\t\t\t\tsetAttributes( {\r\n\t\t\t\t\t\t\ttext: removeAnchorTag( value ),\r\n\t\t\t\t\t\t} )\r\n\t\t\t\t\t}\r\n\t\t\t\t\twithoutInteractiveFormatting\r\n\t\t\t\t\tclassName={ clsx(\r\n\t\t\t\t\t\tclassName,\r\n\t\t\t\t\t\t'wp-block-button__link',\r\n\t\t\t\t\t\tcolorProps.className,\r\n\t\t\t\t\t\tborderProps.className,\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t[ `has-text-align-${ textAlign }` ]: textAlign,\r\n\t\t\t\t\t\t\t// For backwards compatibility add style that isn't\r\n\t\t\t\t\t\t\t// provided via block support.\r\n\t\t\t\t\t\t\t'no-border-radius': style?.border?.radius === 0,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t__experimentalGetElementClassName( 'button' )\r\n\t\t\t\t\t) }\r\n\t\t\t\t\tstyle={ {\r\n\t\t\t\t\t\t...borderProps.style,\r\n\t\t\t\t\t\t...colorProps.style,\r\n\t\t\t\t\t\t...spacingProps.style,\r\n\t\t\t\t\t\t...shadowProps.style,\r\n\t\t\t\t\t} }\r\n\t\t\t\t\tonReplace={ onReplace }\r\n\t\t\t\t\tonMerge={ mergeBlocks }\r\n\t\t\t\t\tidentifier=\"text\"\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<BlockControls group=\"block\">\r\n\t\t\t\t{ blockEditingMode === 'default' && (\r\n\t\t\t\t\t<AlignmentControl\r\n\t\t\t\t\t\tvalue={ textAlign }\r\n\t\t\t\t\t\tonChange={ ( nextAlign ) => {\r\n\t\t\t\t\t\t\tsetAttributes( { textAlign: nextAlign } );\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t/>\r\n\t\t\t\t) }\r\n\t\t\t\t{ ! isURLSet && isLinkTag && ! lockUrlControls && (\r\n\t\t\t\t\t<ToolbarButton\r\n\t\t\t\t\t\tname=\"link\"\r\n\t\t\t\t\t\ticon={ link }\r\n\t\t\t\t\t\ttitle={ __( 'Link' ) }\r\n\t\t\t\t\t\tshortcut={ displayShortcut.primary( 'k' ) }\r\n\t\t\t\t\t\tonClick={ startEditing }\r\n\t\t\t\t\t/>\r\n\t\t\t\t) }\r\n\t\t\t\t{ isURLSet && isLinkTag && ! lockUrlControls && (\r\n\t\t\t\t\t<ToolbarButton\r\n\t\t\t\t\t\tname=\"link\"\r\n\t\t\t\t\t\ticon={ linkOff }\r\n\t\t\t\t\t\ttitle={ __( 'Unlink' ) }\r\n\t\t\t\t\t\tshortcut={ displayShortcut.primaryShift( 'k' ) }\r\n\t\t\t\t\t\tonClick={ unlink }\r\n\t\t\t\t\t\tisActive\r\n\t\t\t\t\t/>\r\n\t\t\t\t) }\r\n\t\t\t</BlockControls>\r\n\t\t\t{ isLinkTag &&\r\n\t\t\t\tisSelected &&\r\n\t\t\t\t( isEditingURL || isURLSet ) &&\r\n\t\t\t\t! lockUrlControls && (\r\n\t\t\t\t\t<Popover\r\n\t\t\t\t\t\tplacement=\"bottom\"\r\n\t\t\t\t\t\tonClose={ () => {\r\n\t\t\t\t\t\t\tsetIsEditingURL( false );\r\n\t\t\t\t\t\t\trichTextRef.current?.focus();\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t\tanchor={ popoverAnchor }\r\n\t\t\t\t\t\tfocusOnMount={ isEditingURL ? 'firstElement' : false }\r\n\t\t\t\t\t\t__unstableSlotName=\"__unstable-block-tools-after\"\r\n\t\t\t\t\t\tshift\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<LinkControl\r\n\t\t\t\t\t\t\tvalue={ linkValue }\r\n\t\t\t\t\t\t\tonChange={ ( {\r\n\t\t\t\t\t\t\t\turl: newURL,\r\n\t\t\t\t\t\t\t\topensInNewTab: newOpensInNewTab,\r\n\t\t\t\t\t\t\t\tnofollow: newNofollow,\r\n\t\t\t\t\t\t\t} ) =>\r\n\t\t\t\t\t\t\t\tsetAttributes(\r\n\t\t\t\t\t\t\t\t\tgetUpdatedLinkAttributes( {\r\n\t\t\t\t\t\t\t\t\t\trel,\r\n\t\t\t\t\t\t\t\t\t\turl: newURL,\r\n\t\t\t\t\t\t\t\t\t\topensInNewTab: newOpensInNewTab,\r\n\t\t\t\t\t\t\t\t\t\tnofollow: newNofollow,\r\n\t\t\t\t\t\t\t\t\t} )\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonRemove={ () => {\r\n\t\t\t\t\t\t\t\tunlink();\r\n\t\t\t\t\t\t\t\trichTextRef.current?.focus();\r\n\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\tforceIsEditingLink={ isEditingURL }\r\n\t\t\t\t\t\t\tsettings={ LINK_SETTINGS }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Popover>\r\n\t\t\t\t) }\r\n\t\t\t<InspectorControls>\r\n\t\t\t\t<WidthPanel\r\n\t\t\t\t\tselectedWidth={ width }\r\n\t\t\t\t\tsetAttributes={ setAttributes }\r\n\t\t\t\t/>\r\n\t\t\t</InspectorControls>\r\n\t\t\t<InspectorControls group=\"border\">\r\n\t\t\t\thaha\r\n\t\t\t</InspectorControls>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default ButtonEdit;\r\n"],"mappings":"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","ignoreList":[]}