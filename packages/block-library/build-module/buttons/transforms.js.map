{"version":3,"names":["createBlock","__unstableCreateElement","createElement","getTransformedMetadata","transforms","from","type","isMultiBlock","blocks","transform","buttons","map","attributes","content","metadata","element","document","text","innerText","link","querySelector","url","getAttribute","contentBinding","isMatch","paragraphs","every","links","querySelectorAll","length"],"sources":["@wordpress/block-library/src/buttons/transforms.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { createBlock } from '@wordpress/blocks';\r\nimport { __unstableCreateElement as createElement } from '@wordpress/rich-text';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { getTransformedMetadata } from '../utils/get-transformed-metadata';\r\n\r\nconst transforms = {\r\n\tfrom: [\r\n\t\t{\r\n\t\t\ttype: 'block',\r\n\t\t\tisMultiBlock: true,\r\n\t\t\tblocks: [ 'core/button' ],\r\n\t\t\ttransform: ( buttons ) =>\r\n\t\t\t\t// Creates the buttons block.\r\n\t\t\t\tcreateBlock(\r\n\t\t\t\t\t'core/buttons',\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t// Loop the selected buttons.\r\n\t\t\t\t\tbuttons.map( ( attributes ) =>\r\n\t\t\t\t\t\t// Create singular button in the buttons block.\r\n\t\t\t\t\t\tcreateBlock( 'core/button', attributes )\r\n\t\t\t\t\t)\r\n\t\t\t\t),\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: 'block',\r\n\t\t\tisMultiBlock: true,\r\n\t\t\tblocks: [ 'core/paragraph' ],\r\n\t\t\ttransform: ( buttons ) =>\r\n\t\t\t\t// Creates the buttons block.\r\n\t\t\t\tcreateBlock(\r\n\t\t\t\t\t'core/buttons',\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t// Loop the selected buttons.\r\n\t\t\t\t\tbuttons.map( ( attributes ) => {\r\n\t\t\t\t\t\tconst { content, metadata } = attributes;\r\n\t\t\t\t\t\tconst element = createElement( document, content );\r\n\t\t\t\t\t\t// Remove any HTML tags.\r\n\t\t\t\t\t\tconst text = element.innerText || '';\r\n\t\t\t\t\t\t// Get first url.\r\n\t\t\t\t\t\tconst link = element.querySelector( 'a' );\r\n\t\t\t\t\t\tconst url = link?.getAttribute( 'href' );\r\n\t\t\t\t\t\t// Create singular button in the buttons block.\r\n\t\t\t\t\t\treturn createBlock( 'core/button', {\r\n\t\t\t\t\t\t\ttext,\r\n\t\t\t\t\t\t\turl,\r\n\t\t\t\t\t\t\tmetadata: getTransformedMetadata(\r\n\t\t\t\t\t\t\t\tmetadata,\r\n\t\t\t\t\t\t\t\t'core/button',\r\n\t\t\t\t\t\t\t\t( { content: contentBinding } ) => ( {\r\n\t\t\t\t\t\t\t\t\ttext: contentBinding,\r\n\t\t\t\t\t\t\t\t} )\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t} );\r\n\t\t\t\t\t} )\r\n\t\t\t\t),\r\n\t\t\tisMatch: ( paragraphs ) => {\r\n\t\t\t\treturn paragraphs.every( ( attributes ) => {\r\n\t\t\t\t\tconst element = createElement(\r\n\t\t\t\t\t\tdocument,\r\n\t\t\t\t\t\tattributes.content\r\n\t\t\t\t\t);\r\n\t\t\t\t\tconst text = element.innerText || '';\r\n\t\t\t\t\tconst links = element.querySelectorAll( 'a' );\r\n\t\t\t\t\treturn text.length <= 30 && links.length <= 1;\r\n\t\t\t\t} );\r\n\t\t\t},\r\n\t\t},\r\n\t],\r\n};\r\n\r\nexport default transforms;\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,WAAW,QAAQ,mBAAmB;AAC/C,SAASC,uBAAuB,IAAIC,aAAa,QAAQ,sBAAsB;;AAE/E;AACA;AACA;AACA,SAASC,sBAAsB,QAAQ,mCAAmC;AAE1E,MAAMC,UAAU,GAAG;EAClBC,IAAI,EAAE,CACL;IACCC,IAAI,EAAE,OAAO;IACbC,YAAY,EAAE,IAAI;IAClBC,MAAM,EAAE,CAAE,aAAa,CAAE;IACzBC,SAAS,EAAIC,OAAO;IACnB;IACAV,WAAW,CACV,cAAc,EACd,CAAC,CAAC;IACF;IACAU,OAAO,CAACC,GAAG,CAAIC,UAAU;IACxB;IACAZ,WAAW,CAAE,aAAa,EAAEY,UAAW,CACxC,CACD;EACF,CAAC,EACD;IACCN,IAAI,EAAE,OAAO;IACbC,YAAY,EAAE,IAAI;IAClBC,MAAM,EAAE,CAAE,gBAAgB,CAAE;IAC5BC,SAAS,EAAIC,OAAO;IACnB;IACAV,WAAW,CACV,cAAc,EACd,CAAC,CAAC;IACF;IACAU,OAAO,CAACC,GAAG,CAAIC,UAAU,IAAM;MAC9B,MAAM;QAAEC,OAAO;QAAEC;MAAS,CAAC,GAAGF,UAAU;MACxC,MAAMG,OAAO,GAAGb,aAAa,CAAEc,QAAQ,EAAEH,OAAQ,CAAC;MAClD;MACA,MAAMI,IAAI,GAAGF,OAAO,CAACG,SAAS,IAAI,EAAE;MACpC;MACA,MAAMC,IAAI,GAAGJ,OAAO,CAACK,aAAa,CAAE,GAAI,CAAC;MACzC,MAAMC,GAAG,GAAGF,IAAI,EAAEG,YAAY,CAAE,MAAO,CAAC;MACxC;MACA,OAAOtB,WAAW,CAAE,aAAa,EAAE;QAClCiB,IAAI;QACJI,GAAG;QACHP,QAAQ,EAAEX,sBAAsB,CAC/BW,QAAQ,EACR,aAAa,EACb,CAAE;UAAED,OAAO,EAAEU;QAAe,CAAC,MAAQ;UACpCN,IAAI,EAAEM;QACP,CAAC,CACF;MACD,CAAE,CAAC;IACJ,CAAE,CACH,CAAC;IACFC,OAAO,EAAIC,UAAU,IAAM;MAC1B,OAAOA,UAAU,CAACC,KAAK,CAAId,UAAU,IAAM;QAC1C,MAAMG,OAAO,GAAGb,aAAa,CAC5Bc,QAAQ,EACRJ,UAAU,CAACC,OACZ,CAAC;QACD,MAAMI,IAAI,GAAGF,OAAO,CAACG,SAAS,IAAI,EAAE;QACpC,MAAMS,KAAK,GAAGZ,OAAO,CAACa,gBAAgB,CAAE,GAAI,CAAC;QAC7C,OAAOX,IAAI,CAACY,MAAM,IAAI,EAAE,IAAIF,KAAK,CAACE,MAAM,IAAI,CAAC;MAC9C,CAAE,CAAC;IACJ;EACD,CAAC;AAEH,CAAC;AAED,eAAezB,UAAU","ignoreList":[]}