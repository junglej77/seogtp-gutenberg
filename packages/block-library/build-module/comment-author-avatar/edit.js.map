{"version":3,"names":["InspectorControls","useBlockProps","__experimentalGetSpacingClassesAndStyles","useSpacingProps","store","blockEditorStore","PanelBody","ResizableBox","RangeControl","useEntityProp","useSelect","__","isRTL","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Edit","attributes","context","commentId","setAttributes","isSelected","height","width","avatars","authorName","avatarUrls","Object","values","sizes","keys","minSize","maxSize","length","blockProps","spacingProps","maxSizeBuffer","Math","floor","avatarURL","select","getSettings","__experimentalDiscussionSettings","inspectorControls","children","title","__nextHasNoMarginBottom","__next40pxDefaultSize","label","onChange","newWidth","min","max","initialPosition","value","resizableAvatar","size","showHandle","onResizeStop","event","direction","elt","delta","parseInt","lockAspectRatio","enable","top","right","bottom","left","minWidth","maxWidth","src","alt"],"sources":["@wordpress/block-library/src/comment-author-avatar/edit.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tInspectorControls,\r\n\tuseBlockProps,\r\n\t__experimentalGetSpacingClassesAndStyles as useSpacingProps,\r\n\tstore as blockEditorStore,\r\n} from '@wordpress/block-editor';\r\nimport { PanelBody, ResizableBox, RangeControl } from '@wordpress/components';\r\nimport { useEntityProp } from '@wordpress/core-data';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { __, isRTL } from '@wordpress/i18n';\r\n\r\nexport default function Edit( {\r\n\tattributes,\r\n\tcontext: { commentId },\r\n\tsetAttributes,\r\n\tisSelected,\r\n} ) {\r\n\tconst { height, width } = attributes;\r\n\r\n\tconst [ avatars ] = useEntityProp(\r\n\t\t'root',\r\n\t\t'comment',\r\n\t\t'author_avatar_urls',\r\n\t\tcommentId\r\n\t);\r\n\r\n\tconst [ authorName ] = useEntityProp(\r\n\t\t'root',\r\n\t\t'comment',\r\n\t\t'author_name',\r\n\t\tcommentId\r\n\t);\r\n\tconst avatarUrls = avatars ? Object.values( avatars ) : null;\r\n\tconst sizes = avatars ? Object.keys( avatars ) : null;\r\n\tconst minSize = sizes ? sizes[ 0 ] : 24;\r\n\tconst maxSize = sizes ? sizes[ sizes.length - 1 ] : 96;\r\n\tconst blockProps = useBlockProps();\r\n\tconst spacingProps = useSpacingProps( attributes );\r\n\tconst maxSizeBuffer = Math.floor( maxSize * 2.5 );\r\n\tconst { avatarURL } = useSelect( ( select ) => {\r\n\t\tconst { getSettings } = select( blockEditorStore );\r\n\t\tconst { __experimentalDiscussionSettings } = getSettings();\r\n\t\treturn __experimentalDiscussionSettings;\r\n\t} );\r\n\r\n\tconst inspectorControls = (\r\n\t\t<InspectorControls>\r\n\t\t\t<PanelBody title={ __( 'Settings' ) }>\r\n\t\t\t\t<RangeControl\r\n\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\tlabel={ __( 'Image size' ) }\r\n\t\t\t\t\tonChange={ ( newWidth ) =>\r\n\t\t\t\t\t\tsetAttributes( {\r\n\t\t\t\t\t\t\twidth: newWidth,\r\n\t\t\t\t\t\t\theight: newWidth,\r\n\t\t\t\t\t\t} )\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmin={ minSize }\r\n\t\t\t\t\tmax={ maxSizeBuffer }\r\n\t\t\t\t\tinitialPosition={ width }\r\n\t\t\t\t\tvalue={ width }\r\n\t\t\t\t/>\r\n\t\t\t</PanelBody>\r\n\t\t</InspectorControls>\r\n\t);\r\n\r\n\tconst resizableAvatar = (\r\n\t\t<ResizableBox\r\n\t\t\tsize={ {\r\n\t\t\t\twidth,\r\n\t\t\t\theight,\r\n\t\t\t} }\r\n\t\t\tshowHandle={ isSelected }\r\n\t\t\tonResizeStop={ ( event, direction, elt, delta ) => {\r\n\t\t\t\tsetAttributes( {\r\n\t\t\t\t\theight: parseInt( height + delta.height, 10 ),\r\n\t\t\t\t\twidth: parseInt( width + delta.width, 10 ),\r\n\t\t\t\t} );\r\n\t\t\t} }\r\n\t\t\tlockAspectRatio\r\n\t\t\tenable={ {\r\n\t\t\t\ttop: false,\r\n\t\t\t\tright: ! isRTL(),\r\n\t\t\t\tbottom: true,\r\n\t\t\t\tleft: isRTL(),\r\n\t\t\t} }\r\n\t\t\tminWidth={ minSize }\r\n\t\t\tmaxWidth={ maxSizeBuffer }\r\n\t\t>\r\n\t\t\t<img\r\n\t\t\t\tsrc={\r\n\t\t\t\t\tavatarUrls ? avatarUrls[ avatarUrls.length - 1 ] : avatarURL\r\n\t\t\t\t}\r\n\t\t\t\talt={ `${ authorName } ${ __( 'Avatar' ) }` }\r\n\t\t\t\t{ ...blockProps }\r\n\t\t\t/>\r\n\t\t</ResizableBox>\r\n\t);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ inspectorControls }\r\n\t\t\t<div { ...spacingProps }>{ resizableAvatar }</div>\r\n\t\t</>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}