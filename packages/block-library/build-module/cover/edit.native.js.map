{"version":3,"names":["View","TouchableWithoutFeedback","InteractionManager","AccessibilityInfo","Text","Platform","Video","clsx","requestImageFailedRetryDialog","requestImageUploadCancelDialog","requestImageFullscreenPreview","mediaUploadSync","__","Icon","Image","ImageEditingButton","IMAGE_DEFAULT_FOCAL_POINT","ToolbarButton","Gradient","ColorPalette","ColorPicker","BottomSheetConsumer","useConvertUnitToMobile","BlockControls","InnerBlocks","InspectorControls","MEDIA_TYPE_IMAGE","MediaPlaceholder","MediaUpload","MediaUploadProgress","getColorObjectByColorValue","getColorObjectByAttributeValues","getGradientValueBySlug","store","blockEditorStore","useGlobalStyles","useMobileGlobalStylesColors","compose","withPreferredColorScheme","useDispatch","withSelect","withDispatch","useEffect","useState","useRef","useCallback","useMemo","cover","icon","replace","image","warning","getProtocol","editPostStore","styles","attributesFromMedia","ALLOWED_MEDIA_TYPES","IMAGE_BACKGROUND_TYPE","VIDEO_BACKGROUND_TYPE","COVER_DEFAULT_HEIGHT","Controls","useCoverIsDark","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","INNER_BLOCKS_TEMPLATE","align","placeholder","useIsScreenReaderEnabled","isScreenReaderEnabled","setIsScreenReaderEnabled","mounted","changeListener","addEventListener","enabled","then","screenReaderEnabled","remove","Cover","attributes","getStylesFromColorScheme","isParentSelected","onFocus","setAttributes","openGeneralSidebar","closeSettingsBottomSheet","isSelected","selectBlock","blockWidth","hasInnerBlocks","backgroundType","dimRatio","focalPoint","minHeight","url","id","style","customOverlayColor","minHeightUnit","allowedBlocks","templateLock","customGradient","gradient","overlayColor","isDark","globalStyles","convertedMinHeight","isImage","THEME_COLORS_COUNT","colorsDefault","coverDefaultPalette","colors","slice","gradients","gradientValue","overlayColorValue","hasBackground","color","background","hasOnlyColorBackground","isCustomColorPickerShowing","setCustomColorPickerShowing","openMediaOptionsRef","isUploadInProgress","setIsUploadInProgress","didUploadFail","setDidUploadFail","shouldShowFailure","onSelectMedia","media","mediaAttributes","undefined","useFeaturedImage","onUpdateMediaProgress","payload","mediaUrl","state","onMediaPressed","isVideoLoading","setIsVideoLoading","onVideoLoadStart","onVideoLoad","onClearMedia","hasParallax","onAddMediaButtonPress","current","setColor","_colorValue$slug","_ref","colorValue","slug","openColorPicker","__unstableMarkNextChangeAsNotPersistent","isCoverDark","childrenStyles","defaultColor","defaultColorLightMode","className","includes","backgroundColor","backgroundSolid","backgroundSolidDark","overlayStyles","overlay","opacity","overlaySelected","placeholderIconStyle","iconDark","placeholderIcon","toolbarControls","open","group","children","title","onClick","accessibilityHint","OS","addMediaButton","accessibilityLabel","accessibilityRole","onPress","selectImageContainer","selectImage","size","selectImageIcon","onBottomSheetClosed","runAfterInteractions","selectedColorText","selectedColorTextDark","bottomLabelText","toUpperCase","colorPickerControls","shouldEnableBottomSheetScroll","shouldEnableBottomSheetMaxHeight","onHandleClosingBottomSheet","onHandleHardwareButtonPress","isBottomSheetContentScrolling","onNavigationBack","renderContent","getMediaOptions","renderBackground","accessible","disabled","mediaId","onFinishMediaUploadWithSuccess","mediaServerId","onFinishMediaUploadWithFailure","onMediaUploadStateReset","imageContainer","editButton","isUploadFailed","onSelectMediaUploadOption","openMediaOptions","width","muted","disableFocus","repeat","resizeMode","source","uri","onLoad","onLoadStart","height","mediaPlaceholderEmptyStateContainer","hideContent","labels","onSelect","allowedTypes","colorPaletteWrapper","pointerEvents","enableCustomColor","customColorIndicatorStyles","paletteColorIndicator","customIndicatorWrapperStyles","paletteCustomIndicatorWrapper","onCustomPress","defaultSettings","shouldShowCustomLabel","shouldShowCustomVerticalSeparator","backgroundContainer","content","template","templateInsertUpdatesSelection","overlayContainer","isReplacingMedia","render","imageEditButton","pickerOptions","destructiveButton","label","separated","value","uploadFailedContainer","uploadFailed","uploadFailedIcon","select","clientId","getSelectedBlockClientId","getBlock","selectedBlockClientId","innerBlocks","length","dispatch","closeGeneralSidebar"],"sources":["@wordpress/block-library/src/cover/edit.native.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport {\r\n\tView,\r\n\tTouchableWithoutFeedback,\r\n\tInteractionManager,\r\n\tAccessibilityInfo,\r\n\tText,\r\n\tPlatform,\r\n} from 'react-native';\r\nimport Video from 'react-native-video';\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\trequestImageFailedRetryDialog,\r\n\trequestImageUploadCancelDialog,\r\n\trequestImageFullscreenPreview,\r\n\tmediaUploadSync,\r\n} from '@wordpress/react-native-bridge';\r\nimport { __ } from '@wordpress/i18n';\r\nimport {\r\n\tIcon,\r\n\tImage,\r\n\tImageEditingButton,\r\n\tIMAGE_DEFAULT_FOCAL_POINT,\r\n\tToolbarButton,\r\n\tGradient,\r\n\tColorPalette,\r\n\tColorPicker,\r\n\tBottomSheetConsumer,\r\n\tuseConvertUnitToMobile,\r\n} from '@wordpress/components';\r\nimport {\r\n\tBlockControls,\r\n\tInnerBlocks,\r\n\tInspectorControls,\r\n\tMEDIA_TYPE_IMAGE,\r\n\tMediaPlaceholder,\r\n\tMediaUpload,\r\n\tMediaUploadProgress,\r\n\tgetColorObjectByColorValue,\r\n\tgetColorObjectByAttributeValues,\r\n\tgetGradientValueBySlug,\r\n\tstore as blockEditorStore,\r\n\tuseGlobalStyles,\r\n\tuseMobileGlobalStylesColors,\r\n} from '@wordpress/block-editor';\r\nimport { compose, withPreferredColorScheme } from '@wordpress/compose';\r\nimport { useDispatch, withSelect, withDispatch } from '@wordpress/data';\r\nimport {\r\n\tuseEffect,\r\n\tuseState,\r\n\tuseRef,\r\n\tuseCallback,\r\n\tuseMemo,\r\n} from '@wordpress/element';\r\nimport { cover as icon, replace, image, warning } from '@wordpress/icons';\r\nimport { getProtocol } from '@wordpress/url';\r\n// eslint-disable-next-line no-restricted-imports\r\nimport { store as editPostStore } from '@wordpress/edit-post';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport styles from './style.scss';\r\nimport {\r\n\tattributesFromMedia,\r\n\tALLOWED_MEDIA_TYPES,\r\n\tIMAGE_BACKGROUND_TYPE,\r\n\tVIDEO_BACKGROUND_TYPE,\r\n\tCOVER_DEFAULT_HEIGHT,\r\n} from './shared';\r\nimport Controls from './controls';\r\nimport useCoverIsDark from './use-cover-is-dark';\r\n\r\n/**\r\n * Constants\r\n */\r\nconst INNER_BLOCKS_TEMPLATE = [\r\n\t[\r\n\t\t'core/paragraph',\r\n\t\t{\r\n\t\t\talign: 'center',\r\n\t\t\tplaceholder: __( 'Write titleâ€¦' ),\r\n\t\t},\r\n\t],\r\n];\r\n\r\nfunction useIsScreenReaderEnabled() {\r\n\tconst [ isScreenReaderEnabled, setIsScreenReaderEnabled ] =\r\n\t\tuseState( false );\r\n\r\n\tuseEffect( () => {\r\n\t\tlet mounted = true;\r\n\r\n\t\tconst changeListener = AccessibilityInfo.addEventListener(\r\n\t\t\t'screenReaderChanged',\r\n\t\t\t( enabled ) => setIsScreenReaderEnabled( enabled )\r\n\t\t);\r\n\r\n\t\tAccessibilityInfo.isScreenReaderEnabled().then(\r\n\t\t\t( screenReaderEnabled ) => {\r\n\t\t\t\tif ( mounted && screenReaderEnabled ) {\r\n\t\t\t\t\tsetIsScreenReaderEnabled( screenReaderEnabled );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t\treturn () => {\r\n\t\t\tmounted = false;\r\n\r\n\t\t\tchangeListener.remove();\r\n\t\t};\r\n\t}, [] );\r\n\r\n\treturn isScreenReaderEnabled;\r\n}\r\n\r\nconst Cover = ( {\r\n\tattributes,\r\n\tgetStylesFromColorScheme,\r\n\tisParentSelected,\r\n\tonFocus,\r\n\tsetAttributes,\r\n\topenGeneralSidebar,\r\n\tcloseSettingsBottomSheet,\r\n\tisSelected,\r\n\tselectBlock,\r\n\tblockWidth,\r\n\thasInnerBlocks,\r\n} ) => {\r\n\tconst {\r\n\t\tbackgroundType,\r\n\t\tdimRatio,\r\n\t\tfocalPoint,\r\n\t\tminHeight,\r\n\t\turl,\r\n\t\tid,\r\n\t\tstyle,\r\n\t\tcustomOverlayColor,\r\n\t\tminHeightUnit = 'px',\r\n\t\tallowedBlocks,\r\n\t\ttemplateLock,\r\n\t\tcustomGradient,\r\n\t\tgradient,\r\n\t\toverlayColor,\r\n\t\tisDark,\r\n\t} = attributes;\r\n\tconst isScreenReaderEnabled = useIsScreenReaderEnabled();\r\n\r\n\tuseEffect( () => {\r\n\t\t// Sync with local media store.\r\n\t\tmediaUploadSync();\r\n\t}, [] );\r\n\r\n\tconst globalStyles = useGlobalStyles();\r\n\tconst convertedMinHeight = useConvertUnitToMobile(\r\n\t\tminHeight || COVER_DEFAULT_HEIGHT,\r\n\t\tminHeightUnit,\r\n\t\tglobalStyles\r\n\t);\r\n\r\n\tconst isImage = backgroundType === MEDIA_TYPE_IMAGE;\r\n\r\n\tconst THEME_COLORS_COUNT = 4;\r\n\tconst colorsDefault = useMobileGlobalStylesColors();\r\n\tconst coverDefaultPalette = useMemo( () => {\r\n\t\treturn {\r\n\t\t\tcolors: colorsDefault.slice( 0, THEME_COLORS_COUNT ),\r\n\t\t};\r\n\t}, [ colorsDefault ] );\r\n\tconst gradients = useMobileGlobalStylesColors( 'gradients' );\r\n\tconst gradientValue =\r\n\t\tcustomGradient || getGradientValueBySlug( gradients, gradient );\r\n\tconst overlayColorValue = getColorObjectByAttributeValues(\r\n\t\tcolorsDefault,\r\n\t\toverlayColor\r\n\t);\r\n\r\n\tconst hasBackground = !! (\r\n\t\turl ||\r\n\t\t( style && style.color && style.color.background ) ||\r\n\t\tattributes.overlayColor ||\r\n\t\toverlayColorValue.color ||\r\n\t\tcustomOverlayColor ||\r\n\t\tgradientValue\r\n\t);\r\n\r\n\tconst hasOnlyColorBackground = ! url && ( hasBackground || hasInnerBlocks );\r\n\r\n\tconst [ isCustomColorPickerShowing, setCustomColorPickerShowing ] =\r\n\t\tuseState( false );\r\n\r\n\tconst openMediaOptionsRef = useRef();\r\n\r\n\t// Initialize uploading flag to false, awaiting sync.\r\n\tconst [ isUploadInProgress, setIsUploadInProgress ] = useState( false );\r\n\r\n\t// Initialize upload failure flag to true if url is local.\r\n\tconst [ didUploadFail, setDidUploadFail ] = useState(\r\n\t\tid && getProtocol( url ) === 'file:'\r\n\t);\r\n\r\n\t// Don't show failure if upload is in progress.\r\n\tconst shouldShowFailure = didUploadFail && ! isUploadInProgress;\r\n\r\n\tconst onSelectMedia = ( media ) => {\r\n\t\tsetDidUploadFail( false );\r\n\r\n\t\tconst mediaAttributes = attributesFromMedia( media );\r\n\t\tsetAttributes( {\r\n\t\t\t...mediaAttributes,\r\n\t\t\tfocalPoint: undefined,\r\n\t\t\tuseFeaturedImage: undefined,\r\n\t\t\tdimRatio: dimRatio === 100 ? 50 : dimRatio,\r\n\t\t\tisDark: undefined,\r\n\t\t} );\r\n\t};\r\n\r\n\tconst onUpdateMediaProgress = useCallback(\r\n\t\t( payload ) => {\r\n\t\t\tconst { mediaUrl, state } = payload;\r\n\r\n\t\t\tsetIsUploadInProgress( true );\r\n\r\n\t\t\tif ( isUploadInProgress && isImage && mediaUrl && ! state ) {\r\n\t\t\t\tsetAttributes( {\r\n\t\t\t\t\turl: mediaUrl,\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\t\t},\r\n\t\t[ isImage, isUploadInProgress, setAttributes ]\r\n\t);\r\n\r\n\tconst onMediaPressed = () => {\r\n\t\tif ( isUploadInProgress ) {\r\n\t\t\trequestImageUploadCancelDialog( id );\r\n\t\t} else if ( shouldShowFailure ) {\r\n\t\t\trequestImageFailedRetryDialog( id );\r\n\t\t} else if ( isImage && url ) {\r\n\t\t\trequestImageFullscreenPreview( url );\r\n\t\t}\r\n\t};\r\n\r\n\tconst [ isVideoLoading, setIsVideoLoading ] = useState( true );\r\n\r\n\tconst onVideoLoadStart = () => {\r\n\t\tsetIsVideoLoading( true );\r\n\t};\r\n\r\n\tconst onVideoLoad = () => {\r\n\t\tsetIsVideoLoading( false );\r\n\t};\r\n\r\n\tconst onClearMedia = useCallback( () => {\r\n\t\tsetAttributes( {\r\n\t\t\tfocalPoint: undefined,\r\n\t\t\thasParallax: undefined,\r\n\t\t\tid: undefined,\r\n\t\t\turl: undefined,\r\n\t\t} );\r\n\t\tcloseSettingsBottomSheet();\r\n\t}, [ closeSettingsBottomSheet ] );\r\n\r\n\tconst onAddMediaButtonPress = useCallback( () => {\r\n\t\tif ( openMediaOptionsRef?.current ) {\r\n\t\t\topenMediaOptionsRef.current();\r\n\t\t}\r\n\t}, [] );\r\n\r\n\tfunction setColor( color ) {\r\n\t\tconst colorValue = getColorObjectByColorValue( colorsDefault, color );\r\n\r\n\t\tsetAttributes( {\r\n\t\t\t// Clear all related attributes (only one should be set).\r\n\t\t\toverlayColor: colorValue?.slug ?? undefined,\r\n\t\t\tcustomOverlayColor: ( ! colorValue?.slug && color ) ?? undefined,\r\n\t\t\tgradient: undefined,\r\n\t\t\tcustomGradient: undefined,\r\n\t\t} );\r\n\t}\r\n\r\n\tfunction openColorPicker() {\r\n\t\tselectBlock();\r\n\t\tsetCustomColorPickerShowing( true );\r\n\t\topenGeneralSidebar();\r\n\t}\r\n\r\n\tconst { __unstableMarkNextChangeAsNotPersistent } =\r\n\t\tuseDispatch( blockEditorStore );\r\n\tconst isCoverDark = useCoverIsDark(\r\n\t\tisDark,\r\n\t\turl,\r\n\t\tdimRatio,\r\n\t\toverlayColorValue?.color\r\n\t);\r\n\r\n\tuseEffect( () => {\r\n\t\t// This side-effect should not create an undo level.\r\n\t\t__unstableMarkNextChangeAsNotPersistent();\r\n\t\t// Used to set a default color for its InnerBlocks\r\n\t\t// since there's no system to inherit styles yet\r\n\t\t// the RichText component will check if there are\r\n\t\t// parent styles for the current block. If there are,\r\n\t\t// it will use that color instead.\r\n\t\tsetAttributes( {\r\n\t\t\tisDark: isCoverDark,\r\n\t\t\tchildrenStyles: isCoverDark\r\n\t\t\t\t? styles.defaultColor\r\n\t\t\t\t: styles.defaultColorLightMode,\r\n\t\t} );\r\n\r\n\t\t// Ensure that \"is-light\" is removed from \"className\" attribute if cover background is dark.\r\n\t\tif ( isCoverDark && attributes.className?.includes( 'is-light' ) ) {\r\n\t\t\tconst className = clsx( attributes.className, {\r\n\t\t\t\t'is-light': false,\r\n\t\t\t} );\r\n\t\t\tsetAttributes( {\r\n\t\t\t\tclassName: className !== '' ? className : undefined,\r\n\t\t\t} );\r\n\t\t}\r\n\t}, [ isCoverDark ] );\r\n\r\n\tconst backgroundColor = getStylesFromColorScheme(\r\n\t\tstyles.backgroundSolid,\r\n\t\tstyles.backgroundSolidDark\r\n\t);\r\n\r\n\tconst overlayStyles = [\r\n\t\tstyles.overlay,\r\n\t\turl && { opacity: dimRatio / 100 },\r\n\t\t! gradientValue && {\r\n\t\t\tbackgroundColor:\r\n\t\t\t\tcustomOverlayColor ||\r\n\t\t\t\toverlayColorValue?.color ||\r\n\t\t\t\tstyle?.color?.background ||\r\n\t\t\t\tstyles.overlay?.color,\r\n\t\t},\r\n\t\t// While we don't support theme colors we add a default bg color.\r\n\t\t! overlayColorValue.color && ! url ? backgroundColor : {},\r\n\t\tisImage &&\r\n\t\t\tisParentSelected &&\r\n\t\t\t! isUploadInProgress &&\r\n\t\t\t! didUploadFail &&\r\n\t\t\tstyles.overlaySelected,\r\n\t];\r\n\r\n\tconst placeholderIconStyle = getStylesFromColorScheme(\r\n\t\tstyles.icon,\r\n\t\tstyles.iconDark\r\n\t);\r\n\r\n\tconst placeholderIcon = <Icon icon={ icon } { ...placeholderIconStyle } />;\r\n\r\n\tconst toolbarControls = ( open ) => (\r\n\t\t<BlockControls group=\"other\">\r\n\t\t\t<ToolbarButton\r\n\t\t\t\ttitle={ __( 'Edit cover media' ) }\r\n\t\t\t\ticon={ replace }\r\n\t\t\t\tonClick={ open }\r\n\t\t\t/>\r\n\t\t</BlockControls>\r\n\t);\r\n\r\n\tconst accessibilityHint =\r\n\t\tPlatform.OS === 'ios'\r\n\t\t\t? __( 'Double tap to open Action Sheet to add image or video' )\r\n\t\t\t: __( 'Double tap to open Bottom Sheet to add image or video' );\r\n\r\n\tconst addMediaButton = () => (\r\n\t\t<TouchableWithoutFeedback\r\n\t\t\taccessibilityHint={ accessibilityHint }\r\n\t\t\taccessibilityLabel={ __( 'Add image or video' ) }\r\n\t\t\taccessibilityRole=\"button\"\r\n\t\t\tonPress={ onAddMediaButtonPress }\r\n\t\t>\r\n\t\t\t<View style={ styles.selectImageContainer }>\r\n\t\t\t\t<View style={ styles.selectImage }>\r\n\t\t\t\t\t<Icon\r\n\t\t\t\t\t\tsize={ 16 }\r\n\t\t\t\t\t\ticon={ image }\r\n\t\t\t\t\t\t{ ...styles.selectImageIcon }\r\n\t\t\t\t\t/>\r\n\t\t\t\t</View>\r\n\t\t\t</View>\r\n\t\t</TouchableWithoutFeedback>\r\n\t);\r\n\r\n\tconst onBottomSheetClosed = useCallback( () => {\r\n\t\tInteractionManager.runAfterInteractions( () => {\r\n\t\t\tsetCustomColorPickerShowing( false );\r\n\t\t} );\r\n\t}, [] );\r\n\r\n\tconst selectedColorText = getStylesFromColorScheme(\r\n\t\tstyles.selectedColorText,\r\n\t\tstyles.selectedColorTextDark\r\n\t);\r\n\r\n\tconst bottomLabelText = customOverlayColor ? (\r\n\t\t<Text style={ selectedColorText }>\r\n\t\t\t{ customOverlayColor.toUpperCase() }\r\n\t\t</Text>\r\n\t) : (\r\n\t\t__( 'Select a color' )\r\n\t);\r\n\r\n\tconst colorPickerControls = (\r\n\t\t<InspectorControls>\r\n\t\t\t<BottomSheetConsumer>\r\n\t\t\t\t{ ( {\r\n\t\t\t\t\tshouldEnableBottomSheetScroll,\r\n\t\t\t\t\tshouldEnableBottomSheetMaxHeight,\r\n\t\t\t\t\tonHandleClosingBottomSheet,\r\n\t\t\t\t\tonHandleHardwareButtonPress,\r\n\t\t\t\t\tisBottomSheetContentScrolling,\r\n\t\t\t\t} ) => (\r\n\t\t\t\t\t<ColorPicker\r\n\t\t\t\t\t\tshouldEnableBottomSheetScroll={\r\n\t\t\t\t\t\t\tshouldEnableBottomSheetScroll\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tshouldEnableBottomSheetMaxHeight={\r\n\t\t\t\t\t\t\tshouldEnableBottomSheetMaxHeight\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsetColor={ setColor }\r\n\t\t\t\t\t\tonNavigationBack={ closeSettingsBottomSheet }\r\n\t\t\t\t\t\tonHandleClosingBottomSheet={\r\n\t\t\t\t\t\t\tonHandleClosingBottomSheet\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonHandleHardwareButtonPress={\r\n\t\t\t\t\t\t\tonHandleHardwareButtonPress\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonBottomSheetClosed={ onBottomSheetClosed }\r\n\t\t\t\t\t\tisBottomSheetContentScrolling={\r\n\t\t\t\t\t\t\tisBottomSheetContentScrolling\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbottomLabelText={ bottomLabelText }\r\n\t\t\t\t\t/>\r\n\t\t\t\t) }\r\n\t\t\t</BottomSheetConsumer>\r\n\t\t</InspectorControls>\r\n\t);\r\n\r\n\tconst renderContent = ( getMediaOptions ) => (\r\n\t\t<>\r\n\t\t\t{ renderBackground( getMediaOptions ) }\r\n\t\t\t{ isParentSelected && hasOnlyColorBackground && addMediaButton() }\r\n\t\t</>\r\n\t);\r\n\r\n\tconst renderBackground = ( getMediaOptions ) => (\r\n\t\t<TouchableWithoutFeedback\r\n\t\t\taccessible={ ! isParentSelected }\r\n\t\t\tonPress={ onMediaPressed }\r\n\t\t\tdisabled={ ! isParentSelected }\r\n\t\t>\r\n\t\t\t<View style={ [ styles.background, backgroundColor ] }>\r\n\t\t\t\t{ getMediaOptions() }\r\n\t\t\t\t{ isParentSelected &&\r\n\t\t\t\t\tbackgroundType === VIDEO_BACKGROUND_TYPE &&\r\n\t\t\t\t\ttoolbarControls( openMediaOptionsRef.current ) }\r\n\t\t\t\t<MediaUploadProgress\r\n\t\t\t\t\tmediaId={ id }\r\n\t\t\t\t\tonUpdateMediaProgress={ onUpdateMediaProgress }\r\n\t\t\t\t\tonFinishMediaUploadWithSuccess={ ( {\r\n\t\t\t\t\t\tmediaServerId,\r\n\t\t\t\t\t\tmediaUrl,\r\n\t\t\t\t\t} ) => {\r\n\t\t\t\t\t\tsetIsUploadInProgress( false );\r\n\t\t\t\t\t\tsetDidUploadFail( false );\r\n\t\t\t\t\t\tsetAttributes( {\r\n\t\t\t\t\t\t\tid: mediaServerId,\r\n\t\t\t\t\t\t\turl: mediaUrl,\r\n\t\t\t\t\t\t\tbackgroundType,\r\n\t\t\t\t\t\t} );\r\n\t\t\t\t\t} }\r\n\t\t\t\t\tonFinishMediaUploadWithFailure={ () => {\r\n\t\t\t\t\t\tsetIsUploadInProgress( false );\r\n\t\t\t\t\t\tsetDidUploadFail( true );\r\n\t\t\t\t\t} }\r\n\t\t\t\t\tonMediaUploadStateReset={ () => {\r\n\t\t\t\t\t\tsetIsUploadInProgress( false );\r\n\t\t\t\t\t\tsetDidUploadFail( false );\r\n\t\t\t\t\t\tsetAttributes( { id: undefined, url: undefined } );\r\n\t\t\t\t\t} }\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t{ IMAGE_BACKGROUND_TYPE === backgroundType && (\r\n\t\t\t\t\t<View style={ styles.imageContainer }>\r\n\t\t\t\t\t\t<Image\r\n\t\t\t\t\t\t\teditButton={ false }\r\n\t\t\t\t\t\t\tfocalPoint={\r\n\t\t\t\t\t\t\t\tfocalPoint || IMAGE_DEFAULT_FOCAL_POINT\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tisSelected={ isParentSelected }\r\n\t\t\t\t\t\t\tisUploadFailed={ didUploadFail }\r\n\t\t\t\t\t\t\tisUploadInProgress={ isUploadInProgress }\r\n\t\t\t\t\t\t\tonSelectMediaUploadOption={ onSelectMedia }\r\n\t\t\t\t\t\t\topenMediaOptions={ openMediaOptionsRef.current }\r\n\t\t\t\t\t\t\turl={ url }\r\n\t\t\t\t\t\t\twidth={ styles.image?.width }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</View>\r\n\t\t\t\t) }\r\n\r\n\t\t\t\t{ VIDEO_BACKGROUND_TYPE === backgroundType && (\r\n\t\t\t\t\t<Video\r\n\t\t\t\t\t\tmuted\r\n\t\t\t\t\t\tdisableFocus\r\n\t\t\t\t\t\trepeat\r\n\t\t\t\t\t\tresizeMode=\"cover\"\r\n\t\t\t\t\t\tsource={ { uri: url } }\r\n\t\t\t\t\t\tonLoad={ onVideoLoad }\r\n\t\t\t\t\t\tonLoadStart={ onVideoLoadStart }\r\n\t\t\t\t\t\tstyle={ [\r\n\t\t\t\t\t\t\tstyles.background,\r\n\t\t\t\t\t\t\t// Hide Video component since it has black background while loading the source.\r\n\t\t\t\t\t\t\t{ opacity: isVideoLoading ? 0 : 1 },\r\n\t\t\t\t\t\t] }\r\n\t\t\t\t\t/>\r\n\t\t\t\t) }\r\n\t\t\t</View>\r\n\t\t</TouchableWithoutFeedback>\r\n\t);\r\n\r\n\tif (\r\n\t\t( ! hasBackground && ! hasInnerBlocks ) ||\r\n\t\tisCustomColorPickerShowing\r\n\t) {\r\n\t\treturn (\r\n\t\t\t<View>\r\n\t\t\t\t{ isCustomColorPickerShowing && colorPickerControls }\r\n\t\t\t\t<MediaPlaceholder\r\n\t\t\t\t\theight={\r\n\t\t\t\t\t\tstyles.mediaPlaceholderEmptyStateContainer?.height\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbackgroundColor={ customOverlayColor }\r\n\t\t\t\t\thideContent={\r\n\t\t\t\t\t\tcustomOverlayColor !== '' &&\r\n\t\t\t\t\t\tcustomOverlayColor !== undefined\r\n\t\t\t\t\t}\r\n\t\t\t\t\ticon={ placeholderIcon }\r\n\t\t\t\t\tlabels={ {\r\n\t\t\t\t\t\ttitle: __( 'Cover' ),\r\n\t\t\t\t\t} }\r\n\t\t\t\t\tonSelect={ onSelectMedia }\r\n\t\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\r\n\t\t\t\t\tonFocus={ onFocus }\r\n\t\t\t\t>\r\n\t\t\t\t\t<View\r\n\t\t\t\t\t\tstyle={ styles.colorPaletteWrapper }\r\n\t\t\t\t\t\tpointerEvents={\r\n\t\t\t\t\t\t\tisScreenReaderEnabled ? 'none' : 'auto'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<BottomSheetConsumer>\r\n\t\t\t\t\t\t\t{ ( { shouldEnableBottomSheetScroll } ) => (\r\n\t\t\t\t\t\t\t\t<ColorPalette\r\n\t\t\t\t\t\t\t\t\tenableCustomColor\r\n\t\t\t\t\t\t\t\t\tcustomColorIndicatorStyles={\r\n\t\t\t\t\t\t\t\t\t\tstyles.paletteColorIndicator\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tcustomIndicatorWrapperStyles={\r\n\t\t\t\t\t\t\t\t\t\tstyles.paletteCustomIndicatorWrapper\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tsetColor={ setColor }\r\n\t\t\t\t\t\t\t\t\tonCustomPress={ openColorPicker }\r\n\t\t\t\t\t\t\t\t\tdefaultSettings={ coverDefaultPalette }\r\n\t\t\t\t\t\t\t\t\tshouldShowCustomLabel={ false }\r\n\t\t\t\t\t\t\t\t\tshouldShowCustomVerticalSeparator={ false }\r\n\t\t\t\t\t\t\t\t\tshouldEnableBottomSheetScroll={\r\n\t\t\t\t\t\t\t\t\t\tshouldEnableBottomSheetScroll\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t</BottomSheetConsumer>\r\n\t\t\t\t\t</View>\r\n\t\t\t\t</MediaPlaceholder>\r\n\t\t\t</View>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<View style={ styles.backgroundContainer }>\r\n\t\t\t{ isSelected && (\r\n\t\t\t\t<InspectorControls>\r\n\t\t\t\t\t<Controls\r\n\t\t\t\t\t\tattributes={ attributes }\r\n\t\t\t\t\t\tdidUploadFail={ didUploadFail }\r\n\t\t\t\t\t\thasOnlyColorBackground={ hasOnlyColorBackground }\r\n\t\t\t\t\t\tisUploadInProgress={ isUploadInProgress }\r\n\t\t\t\t\t\tonClearMedia={ onClearMedia }\r\n\t\t\t\t\t\tonSelectMedia={ onSelectMedia }\r\n\t\t\t\t\t\tsetAttributes={ setAttributes }\r\n\t\t\t\t\t/>\r\n\t\t\t\t</InspectorControls>\r\n\t\t\t) }\r\n\r\n\t\t\t<View\r\n\t\t\t\tpointerEvents=\"box-none\"\r\n\t\t\t\tstyle={ [ styles.content, { minHeight: convertedMinHeight } ] }\r\n\t\t\t>\r\n\t\t\t\t<InnerBlocks\r\n\t\t\t\t\tallowedBlocks={ allowedBlocks }\r\n\t\t\t\t\ttemplate={ INNER_BLOCKS_TEMPLATE }\r\n\t\t\t\t\ttemplateLock={ templateLock }\r\n\t\t\t\t\ttemplateInsertUpdatesSelection\r\n\t\t\t\t\tblockWidth={ blockWidth }\r\n\t\t\t\t/>\r\n\t\t\t</View>\r\n\r\n\t\t\t<View pointerEvents=\"none\" style={ styles.overlayContainer }>\r\n\t\t\t\t<View style={ overlayStyles }>\r\n\t\t\t\t\t{ gradientValue && (\r\n\t\t\t\t\t\t<Gradient\r\n\t\t\t\t\t\t\tgradientValue={ gradientValue }\r\n\t\t\t\t\t\t\tstyle={ styles.background }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) }\r\n\t\t\t\t</View>\r\n\t\t\t</View>\r\n\r\n\t\t\t<MediaUpload\r\n\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\r\n\t\t\t\tisReplacingMedia={ ! hasOnlyColorBackground }\r\n\t\t\t\tonSelect={ onSelectMedia }\r\n\t\t\t\trender={ ( { open, getMediaOptions } ) => {\r\n\t\t\t\t\topenMediaOptionsRef.current = open;\r\n\t\t\t\t\treturn renderContent( getMediaOptions );\r\n\t\t\t\t} }\r\n\t\t\t/>\r\n\r\n\t\t\t{ isImage &&\r\n\t\t\t\turl &&\r\n\t\t\t\topenMediaOptionsRef.current &&\r\n\t\t\t\tisParentSelected &&\r\n\t\t\t\t! isUploadInProgress &&\r\n\t\t\t\t! didUploadFail && (\r\n\t\t\t\t\t<View style={ styles.imageEditButton }>\r\n\t\t\t\t\t\t<ImageEditingButton\r\n\t\t\t\t\t\t\tonSelectMediaUploadOption={ onSelectMedia }\r\n\t\t\t\t\t\t\topenMediaOptions={ openMediaOptionsRef.current }\r\n\t\t\t\t\t\t\tpickerOptions={ [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tdestructiveButton: true,\r\n\t\t\t\t\t\t\t\t\tid: 'clearMedia',\r\n\t\t\t\t\t\t\t\t\tlabel: __( 'Clear Media' ),\r\n\t\t\t\t\t\t\t\t\tonPress: onClearMedia,\r\n\t\t\t\t\t\t\t\t\tseparated: true,\r\n\t\t\t\t\t\t\t\t\tvalue: 'clearMedia',\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t] }\r\n\t\t\t\t\t\t\turl={ url }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</View>\r\n\t\t\t\t) }\r\n\r\n\t\t\t{ shouldShowFailure && (\r\n\t\t\t\t<View\r\n\t\t\t\t\tpointerEvents=\"none\"\r\n\t\t\t\t\tstyle={ styles.uploadFailedContainer }\r\n\t\t\t\t>\r\n\t\t\t\t\t<View style={ styles.uploadFailed }>\r\n\t\t\t\t\t\t<Icon icon={ warning } { ...styles.uploadFailedIcon } />\r\n\t\t\t\t\t</View>\r\n\t\t\t\t</View>\r\n\t\t\t) }\r\n\t\t</View>\r\n\t);\r\n};\r\n\r\nexport default compose( [\r\n\twithSelect( ( select, { clientId } ) => {\r\n\t\tconst { getSelectedBlockClientId, getBlock } =\r\n\t\t\tselect( blockEditorStore );\r\n\r\n\t\tconst selectedBlockClientId = getSelectedBlockClientId();\r\n\r\n\t\tconst hasInnerBlocks = getBlock( clientId )?.innerBlocks.length > 0;\r\n\r\n\t\treturn {\r\n\t\t\tisParentSelected: selectedBlockClientId === clientId,\r\n\t\t\thasInnerBlocks,\r\n\t\t};\r\n\t} ),\r\n\twithDispatch( ( dispatch, { clientId } ) => {\r\n\t\tconst { openGeneralSidebar } = dispatch( editPostStore );\r\n\t\tconst { selectBlock } = dispatch( blockEditorStore );\r\n\r\n\t\treturn {\r\n\t\t\topenGeneralSidebar: () => openGeneralSidebar( 'edit-post/block' ),\r\n\t\t\tcloseSettingsBottomSheet() {\r\n\t\t\t\tdispatch( editPostStore ).closeGeneralSidebar();\r\n\t\t\t},\r\n\t\t\tselectBlock: () => selectBlock( clientId ),\r\n\t\t};\r\n\t} ),\r\n\twithPreferredColorScheme,\r\n] )( Cover );\r\n"],"mappings":"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","ignoreList":[]}