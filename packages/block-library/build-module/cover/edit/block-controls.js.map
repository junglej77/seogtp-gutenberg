{"version":3,"names":["useState","BlockControls","MediaReplaceFlow","__experimentalBlockAlignmentMatrixControl","BlockAlignmentMatrixControl","__experimentalBlockFullHeightAligmentControl","FullHeightAlignmentControl","privateApis","blockEditorPrivateApis","__","ALLOWED_MEDIA_TYPES","unlock","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","cleanEmptyObject","CoverBlockControls","attributes","setAttributes","onSelectMedia","currentSettings","toggleUseFeaturedImage","onClearMedia","contentPosition","id","useFeaturedImage","minHeight","minHeightUnit","hasInnerBlocks","url","prevMinHeightValue","setPrevMinHeightValue","prevMinHeightUnit","setPrevMinHeightUnit","isMinFullHeight","style","dimensions","aspectRatio","toggleMinFullHeight","undefined","children","group","label","value","onChange","nextPosition","isDisabled","isActive","onToggle","mediaId","mediaURL","allowedTypes","accept","onSelect","onToggleFeaturedImage","name","onReset"],"sources":["D:/jungle/gutenberg/packages/block-library/src/cover/edit/block-controls.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useState } from '@wordpress/element';\r\n\r\nimport {\r\n\tBlockControls,\r\n\tMediaReplaceFlow,\r\n\t__experimentalBlockAlignmentMatrixControl as BlockAlignmentMatrixControl,\r\n\t__experimentalBlockFullHeightAligmentControl as FullHeightAlignmentControl,\r\n\tprivateApis as blockEditorPrivateApis,\r\n} from '@wordpress/block-editor';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { ALLOWED_MEDIA_TYPES } from '../shared';\r\nimport { unlock } from '../../lock-unlock';\r\n\r\nconst { cleanEmptyObject } = unlock( blockEditorPrivateApis );\r\n\r\nexport default function CoverBlockControls( {\r\n\tattributes,\r\n\tsetAttributes,\r\n\tonSelectMedia,\r\n\tcurrentSettings,\r\n\ttoggleUseFeaturedImage,\r\n\tonClearMedia,\r\n} ) {\r\n\tconst { contentPosition, id, useFeaturedImage, minHeight, minHeightUnit } =\r\n\t\tattributes;\r\n\tconst { hasInnerBlocks, url } = currentSettings;\r\n\r\n\tconst [ prevMinHeightValue, setPrevMinHeightValue ] = useState( minHeight );\r\n\tconst [ prevMinHeightUnit, setPrevMinHeightUnit ] =\r\n\t\tuseState( minHeightUnit );\r\n\tconst isMinFullHeight =\r\n\t\tminHeightUnit === 'vh' &&\r\n\t\tminHeight === 100 &&\r\n\t\t! attributes?.style?.dimensions?.aspectRatio;\r\n\tconst toggleMinFullHeight = () => {\r\n\t\tif ( isMinFullHeight ) {\r\n\t\t\t// If there aren't previous values, take the default ones.\r\n\t\t\tif ( prevMinHeightUnit === 'vh' && prevMinHeightValue === 100 ) {\r\n\t\t\t\treturn setAttributes( {\r\n\t\t\t\t\tminHeight: undefined,\r\n\t\t\t\t\tminHeightUnit: undefined,\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\r\n\t\t\t// Set the previous values of height.\r\n\t\t\treturn setAttributes( {\r\n\t\t\t\tminHeight: prevMinHeightValue,\r\n\t\t\t\tminHeightUnit: prevMinHeightUnit,\r\n\t\t\t} );\r\n\t\t}\r\n\r\n\t\tsetPrevMinHeightValue( minHeight );\r\n\t\tsetPrevMinHeightUnit( minHeightUnit );\r\n\r\n\t\t// Set full height, and clear any aspect ratio value.\r\n\t\treturn setAttributes( {\r\n\t\t\tminHeight: 100,\r\n\t\t\tminHeightUnit: 'vh',\r\n\t\t\tstyle: cleanEmptyObject( {\r\n\t\t\t\t...attributes?.style,\r\n\t\t\t\tdimensions: {\r\n\t\t\t\t\t...attributes?.style?.dimensions,\r\n\t\t\t\t\taspectRatio: undefined, // Reset aspect ratio when minHeight is set.\r\n\t\t\t\t},\r\n\t\t\t} ),\r\n\t\t} );\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<BlockControls group=\"block\">\r\n\t\t\t\t<BlockAlignmentMatrixControl\r\n\t\t\t\t\tlabel={ __( 'Change content position' ) }\r\n\t\t\t\t\tvalue={ contentPosition }\r\n\t\t\t\t\tonChange={ ( nextPosition ) =>\r\n\t\t\t\t\t\tsetAttributes( {\r\n\t\t\t\t\t\t\tcontentPosition: nextPosition,\r\n\t\t\t\t\t\t} )\r\n\t\t\t\t\t}\r\n\t\t\t\t\tisDisabled={ ! hasInnerBlocks }\r\n\t\t\t\t/>\r\n\t\t\t\t<FullHeightAlignmentControl\r\n\t\t\t\t\tisActive={ isMinFullHeight }\r\n\t\t\t\t\tonToggle={ toggleMinFullHeight }\r\n\t\t\t\t\tisDisabled={ ! hasInnerBlocks }\r\n\t\t\t\t/>\r\n\t\t\t</BlockControls>\r\n\t\t\t<BlockControls group=\"other\">\r\n\t\t\t\t<MediaReplaceFlow\r\n\t\t\t\t\tmediaId={ id }\r\n\t\t\t\t\tmediaURL={ url }\r\n\t\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\r\n\t\t\t\t\taccept=\"image/*,video/*\"\r\n\t\t\t\t\tonSelect={ onSelectMedia }\r\n\t\t\t\t\tonToggleFeaturedImage={ toggleUseFeaturedImage }\r\n\t\t\t\t\tuseFeaturedImage={ useFeaturedImage }\r\n\t\t\t\t\tname={ ! url ? __( 'Add Media' ) : __( 'Replace' ) }\r\n\t\t\t\t\tonReset={ onClearMedia }\r\n\t\t\t\t/>\r\n\t\t\t</BlockControls>\r\n\t\t</>\r\n\t);\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,QAAQ,QAAQ,oBAAoB;AAE7C,SACCC,aAAa,EACbC,gBAAgB,EAChBC,yCAAyC,IAAIC,2BAA2B,EACxEC,4CAA4C,IAAIC,0BAA0B,EAC1EC,WAAW,IAAIC,sBAAsB,QAC/B,yBAAyB;AAChC,SAASC,EAAE,QAAQ,iBAAiB;;AAEpC;AACA;AACA;AACA,SAASC,mBAAmB,QAAQ,WAAW;AAC/C,SAASC,MAAM,QAAQ,mBAAmB;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAE3C,MAAM;EAAEC;AAAiB,CAAC,GAAGP,MAAM,CAAEH,sBAAuB,CAAC;AAE7D,eAAe,SAASW,kBAAkBA,CAAE;EAC3CC,UAAU;EACVC,aAAa;EACbC,aAAa;EACbC,eAAe;EACfC,sBAAsB;EACtBC;AACD,CAAC,EAAG;EACH,MAAM;IAAEC,eAAe;IAAEC,EAAE;IAAEC,gBAAgB;IAAEC,SAAS;IAAEC;EAAc,CAAC,GACxEV,UAAU;EACX,MAAM;IAAEW,cAAc;IAAEC;EAAI,CAAC,GAAGT,eAAe;EAE/C,MAAM,CAAEU,kBAAkB,EAAEC,qBAAqB,CAAE,GAAGlC,QAAQ,CAAE6B,SAAU,CAAC;EAC3E,MAAM,CAAEM,iBAAiB,EAAEC,oBAAoB,CAAE,GAChDpC,QAAQ,CAAE8B,aAAc,CAAC;EAC1B,MAAMO,eAAe,GACpBP,aAAa,KAAK,IAAI,IACtBD,SAAS,KAAK,GAAG,IACjB,CAAET,UAAU,EAAEkB,KAAK,EAAEC,UAAU,EAAEC,WAAW;EAC7C,MAAMC,mBAAmB,GAAGA,CAAA,KAAM;IACjC,IAAKJ,eAAe,EAAG;MACtB;MACA,IAAKF,iBAAiB,KAAK,IAAI,IAAIF,kBAAkB,KAAK,GAAG,EAAG;QAC/D,OAAOZ,aAAa,CAAE;UACrBQ,SAAS,EAAEa,SAAS;UACpBZ,aAAa,EAAEY;QAChB,CAAE,CAAC;MACJ;;MAEA;MACA,OAAOrB,aAAa,CAAE;QACrBQ,SAAS,EAAEI,kBAAkB;QAC7BH,aAAa,EAAEK;MAChB,CAAE,CAAC;IACJ;IAEAD,qBAAqB,CAAEL,SAAU,CAAC;IAClCO,oBAAoB,CAAEN,aAAc,CAAC;;IAErC;IACA,OAAOT,aAAa,CAAE;MACrBQ,SAAS,EAAE,GAAG;MACdC,aAAa,EAAE,IAAI;MACnBQ,KAAK,EAAEpB,gBAAgB,CAAE;QACxB,GAAGE,UAAU,EAAEkB,KAAK;QACpBC,UAAU,EAAE;UACX,GAAGnB,UAAU,EAAEkB,KAAK,EAAEC,UAAU;UAChCC,WAAW,EAAEE,SAAS,CAAE;QACzB;MACD,CAAE;IACH,CAAE,CAAC;EACJ,CAAC;EAED,oBACC3B,KAAA,CAAAE,SAAA;IAAA0B,QAAA,gBACC5B,KAAA,CAACd,aAAa;MAAC2C,KAAK,EAAC,OAAO;MAAAD,QAAA,gBAC3B9B,IAAA,CAACT,2BAA2B;QAC3ByC,KAAK,EAAGpC,EAAE,CAAE,yBAA0B,CAAG;QACzCqC,KAAK,EAAGpB,eAAiB;QACzBqB,QAAQ,EAAKC,YAAY,IACxB3B,aAAa,CAAE;UACdK,eAAe,EAAEsB;QAClB,CAAE,CACF;QACDC,UAAU,EAAG,CAAElB;MAAgB,CAC/B,CAAC,eACFlB,IAAA,CAACP,0BAA0B;QAC1B4C,QAAQ,EAAGb,eAAiB;QAC5Bc,QAAQ,EAAGV,mBAAqB;QAChCQ,UAAU,EAAG,CAAElB;MAAgB,CAC/B,CAAC;IAAA,CACY,CAAC,eAChBlB,IAAA,CAACZ,aAAa;MAAC2C,KAAK,EAAC,OAAO;MAAAD,QAAA,eAC3B9B,IAAA,CAACX,gBAAgB;QAChBkD,OAAO,EAAGzB,EAAI;QACd0B,QAAQ,EAAGrB,GAAK;QAChBsB,YAAY,EAAG5C,mBAAqB;QACpC6C,MAAM,EAAC,iBAAiB;QACxBC,QAAQ,EAAGlC,aAAe;QAC1BmC,qBAAqB,EAAGjC,sBAAwB;QAChDI,gBAAgB,EAAGA,gBAAkB;QACrC8B,IAAI,EAAG,CAAE1B,GAAG,GAAGvB,EAAE,CAAE,WAAY,CAAC,GAAGA,EAAE,CAAE,SAAU,CAAG;QACpDkD,OAAO,EAAGlC;MAAc,CACxB;IAAC,CACY,CAAC;EAAA,CACf,CAAC;AAEL","ignoreList":[]}