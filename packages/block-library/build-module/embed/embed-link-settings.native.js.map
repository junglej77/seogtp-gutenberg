{"version":3,"names":["__","sprintf","LinkSettingsNavigation","FooterMessageLink","isURL","useDispatch","store","noticesStore","useCallback","useEffect","useRef","useState","jsx","_jsx","EmbedLinkSettings","autoFocus","value","label","isVisible","onClose","onSubmit","withBottomSheet","url","inputURL","setInputURL","createErrorNotice","linkSettingsOptions","placeholder","autoFill","footer","href","separatorType","onDismiss","current","performOnCloseOperations","onSetAttributes","attributes","setAttributes","options","showIcon"],"sources":["@wordpress/block-library/src/embed/embed-link-settings.native.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport {\r\n\tLinkSettingsNavigation,\r\n\tFooterMessageLink,\r\n} from '@wordpress/components';\r\nimport { isURL } from '@wordpress/url';\r\nimport { useDispatch } from '@wordpress/data';\r\nimport { store as noticesStore } from '@wordpress/notices';\r\nimport { useCallback, useEffect, useRef, useState } from '@wordpress/element';\r\n\r\nconst EmbedLinkSettings = ( {\r\n\tautoFocus,\r\n\tvalue,\r\n\tlabel,\r\n\tisVisible,\r\n\tonClose,\r\n\tonSubmit,\r\n\twithBottomSheet,\r\n} ) => {\r\n\tconst url = useRef( value );\r\n\tconst [ inputURL, setInputURL ] = useState( value );\r\n\tconst { createErrorNotice } = useDispatch( noticesStore );\r\n\r\n\tconst linkSettingsOptions = {\r\n\t\turl: {\r\n\t\t\tlabel: sprintf(\r\n\t\t\t\t// translators: %s: embed block variant's label e.g: \"Twitter\".\r\n\t\t\t\t__( '%s link' ),\r\n\t\t\t\tlabel\r\n\t\t\t),\r\n\t\t\tplaceholder: __( 'Add link' ),\r\n\t\t\tautoFocus,\r\n\t\t\tautoFill: true,\r\n\t\t},\r\n\t\tfooter: {\r\n\t\t\tlabel: (\r\n\t\t\t\t<FooterMessageLink\r\n\t\t\t\t\thref={ __(\r\n\t\t\t\t\t\t'https://wordpress.org/documentation/article/embeds/'\r\n\t\t\t\t\t) }\r\n\t\t\t\t\tvalue={ __( 'Learn more about embeds' ) }\r\n\t\t\t\t/>\r\n\t\t\t),\r\n\t\t\tseparatorType: 'topFullWidth',\r\n\t\t},\r\n\t};\r\n\r\n\tconst onDismiss = useCallback( () => {\r\n\t\tif ( ! isURL( url.current ) && url.current !== '' ) {\r\n\t\t\tcreateErrorNotice( __( 'Invalid URL. Please enter a valid URL.' ) );\r\n\t\t\t// If the URL was already defined, we submit it to stop showing the embed placeholder.\r\n\t\t\tonSubmit( value );\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tonSubmit( url.current );\r\n\t}, [ onSubmit, value ] );\r\n\r\n\tuseEffect( () => {\r\n\t\turl.current = value;\r\n\t\tsetInputURL( value );\r\n\t}, [ value ] );\r\n\r\n\t/**\r\n\t * If the Embed Bottom Sheet component does not utilize a bottom sheet then the onDismiss action is not\r\n\t * called. Here we are wiring the onDismiss to the onClose callback that gets triggered when input is submitted.\r\n\t */\r\n\tconst performOnCloseOperations = useCallback( () => {\r\n\t\tif ( onClose ) {\r\n\t\t\tonClose();\r\n\t\t}\r\n\r\n\t\tif ( ! withBottomSheet ) {\r\n\t\t\tonDismiss();\r\n\t\t}\r\n\t}, [ onClose ] );\r\n\r\n\tconst onSetAttributes = useCallback( ( attributes ) => {\r\n\t\turl.current = attributes.url;\r\n\t\tsetInputURL( attributes.url );\r\n\t}, [] );\r\n\r\n\treturn (\r\n\t\t<LinkSettingsNavigation\r\n\t\t\tisVisible={ isVisible }\r\n\t\t\turl={ inputURL }\r\n\t\t\tonClose={ performOnCloseOperations }\r\n\t\t\tonDismiss={ onDismiss }\r\n\t\t\tsetAttributes={ onSetAttributes }\r\n\t\t\toptions={ linkSettingsOptions }\r\n\t\t\twithBottomSheet={ withBottomSheet }\r\n\t\t\tshowIcon\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default EmbedLinkSettings;\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,EAAE,EAAEC,OAAO,QAAQ,iBAAiB;AAC7C,SACCC,sBAAsB,EACtBC,iBAAiB,QACX,uBAAuB;AAC9B,SAASC,KAAK,QAAQ,gBAAgB;AACtC,SAASC,WAAW,QAAQ,iBAAiB;AAC7C,SAASC,KAAK,IAAIC,YAAY,QAAQ,oBAAoB;AAC1D,SAASC,WAAW,EAAEC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,oBAAoB;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAE9E,MAAMC,iBAAiB,GAAGA,CAAE;EAC3BC,SAAS;EACTC,KAAK;EACLC,KAAK;EACLC,SAAS;EACTC,OAAO;EACPC,QAAQ;EACRC;AACD,CAAC,KAAM;EACN,MAAMC,GAAG,GAAGZ,MAAM,CAAEM,KAAM,CAAC;EAC3B,MAAM,CAAEO,QAAQ,EAAEC,WAAW,CAAE,GAAGb,QAAQ,CAAEK,KAAM,CAAC;EACnD,MAAM;IAAES;EAAkB,CAAC,GAAGpB,WAAW,CAAEE,YAAa,CAAC;EAEzD,MAAMmB,mBAAmB,GAAG;IAC3BJ,GAAG,EAAE;MACJL,KAAK,EAAEhB,OAAO;MACb;MACAD,EAAE,CAAE,SAAU,CAAC,EACfiB,KACD,CAAC;MACDU,WAAW,EAAE3B,EAAE,CAAE,UAAW,CAAC;MAC7Be,SAAS;MACTa,QAAQ,EAAE;IACX,CAAC;IACDC,MAAM,EAAE;MACPZ,KAAK,eACJJ,IAAA,CAACV,iBAAiB;QACjB2B,IAAI,EAAG9B,EAAE,CACR,qDACD,CAAG;QACHgB,KAAK,EAAGhB,EAAE,CAAE,yBAA0B;MAAG,CACzC,CACD;MACD+B,aAAa,EAAE;IAChB;EACD,CAAC;EAED,MAAMC,SAAS,GAAGxB,WAAW,CAAE,MAAM;IACpC,IAAK,CAAEJ,KAAK,CAAEkB,GAAG,CAACW,OAAQ,CAAC,IAAIX,GAAG,CAACW,OAAO,KAAK,EAAE,EAAG;MACnDR,iBAAiB,CAAEzB,EAAE,CAAE,wCAAyC,CAAE,CAAC;MACnE;MACAoB,QAAQ,CAAEJ,KAAM,CAAC;MACjB;IACD;IACAI,QAAQ,CAAEE,GAAG,CAACW,OAAQ,CAAC;EACxB,CAAC,EAAE,CAAEb,QAAQ,EAAEJ,KAAK,CAAG,CAAC;EAExBP,SAAS,CAAE,MAAM;IAChBa,GAAG,CAACW,OAAO,GAAGjB,KAAK;IACnBQ,WAAW,CAAER,KAAM,CAAC;EACrB,CAAC,EAAE,CAAEA,KAAK,CAAG,CAAC;;EAEd;AACD;AACA;AACA;EACC,MAAMkB,wBAAwB,GAAG1B,WAAW,CAAE,MAAM;IACnD,IAAKW,OAAO,EAAG;MACdA,OAAO,CAAC,CAAC;IACV;IAEA,IAAK,CAAEE,eAAe,EAAG;MACxBW,SAAS,CAAC,CAAC;IACZ;EACD,CAAC,EAAE,CAAEb,OAAO,CAAG,CAAC;EAEhB,MAAMgB,eAAe,GAAG3B,WAAW,CAAI4B,UAAU,IAAM;IACtDd,GAAG,CAACW,OAAO,GAAGG,UAAU,CAACd,GAAG;IAC5BE,WAAW,CAAEY,UAAU,CAACd,GAAI,CAAC;EAC9B,CAAC,EAAE,EAAG,CAAC;EAEP,oBACCT,IAAA,CAACX,sBAAsB;IACtBgB,SAAS,EAAGA,SAAW;IACvBI,GAAG,EAAGC,QAAU;IAChBJ,OAAO,EAAGe,wBAA0B;IACpCF,SAAS,EAAGA,SAAW;IACvBK,aAAa,EAAGF,eAAiB;IACjCG,OAAO,EAAGZ,mBAAqB;IAC/BL,eAAe,EAAGA,eAAiB;IACnCkB,QAAQ;EAAA,CACR,CAAC;AAEJ,CAAC;AAED,eAAezB,iBAAiB","ignoreList":[]}