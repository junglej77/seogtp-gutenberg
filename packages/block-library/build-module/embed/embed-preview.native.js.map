{"version":3,"names":["TouchableWithoutFeedback","clsx","View","BlockCaption","RichText","store","blockEditorStore","__","sprintf","memo","useState","SandBox","useSelect","getPhotoHtml","EmbedNoPreview","WpEmbedPreview","styles","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","EmbedPreview","align","className","clientId","icon","insertBlocksAfter","isSelected","label","onFocus","preview","previewable","isProviderPreviewable","type","url","isDefaultEmbedInfo","isCaptionSelected","setIsCaptionSelected","locale","getSettings","wrapperStyle","wrapperAlignStyle","sandboxAlignStyle","accessibilityLabelCreator","caption","isEmpty","onEmbedPreviewPress","onFocusCaption","provider_url","providerUrl","html","parsedHost","URL","host","split","parsedHostBaseUrl","splice","length","join","iframeTitle","sandboxClassnames","PreviewContent","embedWrapper","children","onPress","pointerEvents","style","lang","title","containerStyle","accessible","disabled"],"sources":["@wordpress/block-library/src/embed/embed-preview.native.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport { TouchableWithoutFeedback } from 'react-native';\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { View } from '@wordpress/primitives';\r\nimport {\r\n\tBlockCaption,\r\n\tRichText,\r\n\tstore as blockEditorStore,\r\n} from '@wordpress/block-editor';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { memo, useState } from '@wordpress/element';\r\nimport { SandBox } from '@wordpress/components';\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { getPhotoHtml } from './util';\r\nimport EmbedNoPreview from './embed-no-preview';\r\nimport WpEmbedPreview from './wp-embed-preview';\r\nimport styles from './styles.scss';\r\n\r\nconst EmbedPreview = ( {\r\n\talign,\r\n\tclassName,\r\n\tclientId,\r\n\ticon,\r\n\tinsertBlocksAfter,\r\n\tisSelected,\r\n\tlabel,\r\n\tonFocus,\r\n\tpreview,\r\n\tpreviewable,\r\n\tisProviderPreviewable,\r\n\ttype,\r\n\turl,\r\n\tisDefaultEmbedInfo,\r\n} ) => {\r\n\tconst [ isCaptionSelected, setIsCaptionSelected ] = useState( false );\r\n\tconst { locale } = useSelect( blockEditorStore ).getSettings();\r\n\r\n\tconst wrapperStyle = styles[ 'embed-preview__wrapper' ];\r\n\tconst wrapperAlignStyle =\r\n\t\tstyles[ `embed-preview__wrapper--align-${ align }` ];\r\n\tconst sandboxAlignStyle =\r\n\t\tstyles[ `embed-preview__sandbox--align-${ align }` ];\r\n\r\n\tfunction accessibilityLabelCreator( caption ) {\r\n\t\treturn RichText.isEmpty( caption )\r\n\t\t\t? /* translators: accessibility text. Empty Embed caption. */\r\n\t\t\t  __( 'Embed caption. Empty' )\r\n\t\t\t: sprintf(\r\n\t\t\t\t\t/* translators: accessibility text. %s: Embed caption. */\r\n\t\t\t\t\t__( 'Embed caption. %s' ),\r\n\t\t\t\t\tcaption\r\n\t\t\t  );\r\n\t}\r\n\r\n\tfunction onEmbedPreviewPress() {\r\n\t\tsetIsCaptionSelected( false );\r\n\t}\r\n\r\n\tfunction onFocusCaption() {\r\n\t\tif ( onFocus ) {\r\n\t\t\tonFocus();\r\n\t\t}\r\n\t\tif ( ! isCaptionSelected ) {\r\n\t\t\tsetIsCaptionSelected( true );\r\n\t\t}\r\n\t}\r\n\r\n\tconst { provider_url: providerUrl } = preview;\r\n\tconst html = 'photo' === type ? getPhotoHtml( preview ) : preview.html;\r\n\tconst parsedHost = new URL( url ).host.split( '.' );\r\n\tconst parsedHostBaseUrl = parsedHost\r\n\t\t.splice( parsedHost.length - 2, parsedHost.length - 1 )\r\n\t\t.join( '.' );\r\n\tconst iframeTitle = sprintf(\r\n\t\t// translators: %s: host providing embed content e.g: www.youtube.com\r\n\t\t__( 'Embedded content from %s' ),\r\n\t\tparsedHostBaseUrl\r\n\t);\r\n\tconst sandboxClassnames = clsx(\r\n\t\ttype,\r\n\t\tclassName,\r\n\t\t'wp-block-embed__wrapper'\r\n\t);\r\n\r\n\tconst PreviewContent = 'wp-embed' === type ? WpEmbedPreview : SandBox;\r\n\tconst embedWrapper = (\r\n\t\t<>\r\n\t\t\t<TouchableWithoutFeedback\r\n\t\t\t\tonPress={ () => {\r\n\t\t\t\t\tif ( onFocus ) {\r\n\t\t\t\t\t\tonFocus();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( isCaptionSelected ) {\r\n\t\t\t\t\t\tsetIsCaptionSelected( false );\r\n\t\t\t\t\t}\r\n\t\t\t\t} }\r\n\t\t\t>\r\n\t\t\t\t<View\r\n\t\t\t\t\tpointerEvents=\"box-only\"\r\n\t\t\t\t\tstyle={ [ wrapperStyle, wrapperAlignStyle ] }\r\n\t\t\t\t>\r\n\t\t\t\t\t<PreviewContent\r\n\t\t\t\t\t\thtml={ html }\r\n\t\t\t\t\t\tlang={ locale }\r\n\t\t\t\t\t\ttitle={ iframeTitle }\r\n\t\t\t\t\t\ttype={ sandboxClassnames }\r\n\t\t\t\t\t\tproviderUrl={ providerUrl }\r\n\t\t\t\t\t\turl={ url }\r\n\t\t\t\t\t\tcontainerStyle={ sandboxAlignStyle }\r\n\t\t\t\t\t/>\r\n\t\t\t\t</View>\r\n\t\t\t</TouchableWithoutFeedback>\r\n\t\t</>\r\n\t);\r\n\treturn (\r\n\t\t<TouchableWithoutFeedback\r\n\t\t\taccessible={ ! isSelected }\r\n\t\t\tonPress={ onEmbedPreviewPress }\r\n\t\t\tdisabled={ ! isSelected }\r\n\t\t>\r\n\t\t\t<View>\r\n\t\t\t\t{ isProviderPreviewable && previewable ? (\r\n\t\t\t\t\tembedWrapper\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<EmbedNoPreview\r\n\t\t\t\t\t\tlabel={ label }\r\n\t\t\t\t\t\ticon={ icon }\r\n\t\t\t\t\t\tisSelected={ isSelected }\r\n\t\t\t\t\t\tonPress={ () => setIsCaptionSelected( false ) }\r\n\t\t\t\t\t\tpreviewable={ previewable }\r\n\t\t\t\t\t\tisDefaultEmbedInfo={ isDefaultEmbedInfo }\r\n\t\t\t\t\t/>\r\n\t\t\t\t) }\r\n\t\t\t\t<BlockCaption\r\n\t\t\t\t\taccessibilityLabelCreator={ accessibilityLabelCreator }\r\n\t\t\t\t\taccessible\r\n\t\t\t\t\tclientId={ clientId }\r\n\t\t\t\t\tinsertBlocksAfter={ insertBlocksAfter }\r\n\t\t\t\t\tisSelected={ isCaptionSelected }\r\n\t\t\t\t\tonFocus={ onFocusCaption }\r\n\t\t\t\t/>\r\n\t\t\t</View>\r\n\t\t</TouchableWithoutFeedback>\r\n\t);\r\n};\r\n\r\nexport default memo( EmbedPreview );\r\n"],"mappings":"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","ignoreList":[]}