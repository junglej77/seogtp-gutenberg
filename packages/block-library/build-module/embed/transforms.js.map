{"version":3,"names":["createBlock","metadata","$schema","apiVersion","name","title","category","description","textdomain","attributes","url","type","__experimentalRole","caption","source","selector","providerNameSlug","allowResponsive","responsive","previewable","supports","align","spacing","margin","interactivity","clientNavigation","editorStyle","style","EMBED_BLOCK","transforms","from","isMatch","node","nodeName","test","textContent","match","length","transform","trim","to","blocks","value","content"],"sources":["@wordpress/block-library/src/embed/transforms.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { createBlock } from '@wordpress/blocks';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport metadata from './block.json';\r\n\r\nconst { name: EMBED_BLOCK } = metadata;\r\n\r\n/**\r\n * Default transforms for generic embeds.\r\n */\r\nconst transforms = {\r\n\tfrom: [\r\n\t\t{\r\n\t\t\ttype: 'raw',\r\n\t\t\tisMatch: ( node ) =>\r\n\t\t\t\tnode.nodeName === 'P' &&\r\n\t\t\t\t/^\\s*(https?:\\/\\/\\S+)\\s*$/i.test( node.textContent ) &&\r\n\t\t\t\tnode.textContent?.match( /https/gi )?.length === 1,\r\n\t\t\ttransform: ( node ) => {\r\n\t\t\t\treturn createBlock( EMBED_BLOCK, {\r\n\t\t\t\t\turl: node.textContent.trim(),\r\n\t\t\t\t} );\r\n\t\t\t},\r\n\t\t},\r\n\t],\r\n\tto: [\r\n\t\t{\r\n\t\t\ttype: 'block',\r\n\t\t\tblocks: [ 'core/paragraph' ],\r\n\t\t\tisMatch: ( { url } ) => !! url,\r\n\t\t\ttransform: ( { url, caption } ) => {\r\n\t\t\t\tlet value = `<a href=\"${ url }\">${ url }</a>`;\r\n\t\t\t\tif ( caption?.trim() ) {\r\n\t\t\t\t\tvalue += `<br />${ caption }`;\r\n\t\t\t\t}\r\n\t\t\t\treturn createBlock( 'core/paragraph', {\r\n\t\t\t\t\tcontent: value,\r\n\t\t\t\t} );\r\n\t\t\t},\r\n\t\t},\r\n\t],\r\n};\r\n\r\nexport default transforms;\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,WAAW,QAAQ,mBAAmB;;AAE/C;AACA;AACA;AAFA,MAAAC,QAAA;EAAAC,OAAA;EAAAC,UAAA;EAAAC,IAAA;EAAAC,KAAA;EAAAC,QAAA;EAAAC,WAAA;EAAAC,UAAA;EAAAC,UAAA;IAAAC,GAAA;MAAAC,IAAA;MAAAC,kBAAA;IAAA;IAAAC,OAAA;MAAAF,IAAA;MAAAG,MAAA;MAAAC,QAAA;MAAAH,kBAAA;IAAA;IAAAD,IAAA;MAAAA,IAAA;MAAAC,kBAAA;IAAA;IAAAI,gBAAA;MAAAL,IAAA;MAAAC,kBAAA;IAAA;IAAAK,eAAA;MAAAN,IAAA;MAAA;IAAA;IAAAO,UAAA;MAAAP,IAAA;MAAA;MAAAC,kBAAA;IAAA;IAAAO,WAAA;MAAAR,IAAA;MAAA;MAAAC,kBAAA;IAAA;EAAA;EAAAQ,QAAA;IAAAC,KAAA;IAAAC,OAAA;MAAAC,MAAA;IAAA;IAAAC,aAAA;MAAAC,gBAAA;IAAA;EAAA;EAAAC,WAAA;EAAAC,KAAA;AAAA;AAKA,MAAM;EAAEvB,IAAI,EAAEwB;AAAY,CAAC,GAAG3B,QAAQ;;AAEtC;AACA;AACA;AACA,MAAM4B,UAAU,GAAG;EAClBC,IAAI,EAAE,CACL;IACCnB,IAAI,EAAE,KAAK;IACXoB,OAAO,EAAIC,IAAI,IACdA,IAAI,CAACC,QAAQ,KAAK,GAAG,IACrB,2BAA2B,CAACC,IAAI,CAAEF,IAAI,CAACG,WAAY,CAAC,IACpDH,IAAI,CAACG,WAAW,EAAEC,KAAK,CAAE,SAAU,CAAC,EAAEC,MAAM,KAAK,CAAC;IACnDC,SAAS,EAAIN,IAAI,IAAM;MACtB,OAAOhC,WAAW,CAAE4B,WAAW,EAAE;QAChClB,GAAG,EAAEsB,IAAI,CAACG,WAAW,CAACI,IAAI,CAAC;MAC5B,CAAE,CAAC;IACJ;EACD,CAAC,CACD;EACDC,EAAE,EAAE,CACH;IACC7B,IAAI,EAAE,OAAO;IACb8B,MAAM,EAAE,CAAE,gBAAgB,CAAE;IAC5BV,OAAO,EAAEA,CAAE;MAAErB;IAAI,CAAC,KAAM,CAAC,CAAEA,GAAG;IAC9B4B,SAAS,EAAEA,CAAE;MAAE5B,GAAG;MAAEG;IAAQ,CAAC,KAAM;MAClC,IAAI6B,KAAK,GAAI,YAAYhC,GAAK,KAAKA,GAAK,MAAK;MAC7C,IAAKG,OAAO,EAAE0B,IAAI,CAAC,CAAC,EAAG;QACtBG,KAAK,IAAK,SAAS7B,OAAS,EAAC;MAC9B;MACA,OAAOb,WAAW,CAAE,gBAAgB,EAAE;QACrC2C,OAAO,EAAED;MACV,CAAE,CAAC;IACJ;EACD,CAAC;AAEH,CAAC;AAED,eAAeb,UAAU","ignoreList":[]}