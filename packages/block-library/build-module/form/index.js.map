{"version":3,"names":["initBlock","edit","metadata","$schema","apiVersion","__experimental","name","title","category","allowedBlocks","description","keywords","textdomain","icon","attributes","submissionMethod","type","method","action","email","supports","anchor","className","color","gradients","link","__experimentalDefaultControls","background","text","spacing","margin","padding","typography","fontSize","lineHeight","__experimentalFontFamily","__experimentalTextDecoration","__experimentalFontStyle","__experimentalFontWeight","__experimentalLetterSpacing","__experimentalTextTransform","__experimentalSelector","viewScript","save","variations","addFilter","settings","init","DISALLOWED_PARENTS","canInsert","blockType","rootClientId","getBlock","getBlockParentsByBlockName","disallowedParentType","hasDisallowedParent","length"],"sources":["D:/jungle/gutenberg/packages/block-library/src/form/index.js"],"sourcesContent":["/**\r\n * Internal dependencies\r\n */\r\nimport initBlock from '../utils/init-block';\r\nimport edit from './edit';\r\nimport metadata from './block.json';\r\nimport save from './save';\r\nimport variations from './variations';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { addFilter } from '@wordpress/hooks';\r\n\r\nconst { name } = metadata;\r\n\r\nexport { metadata, name };\r\n\r\nexport const settings = {\r\n\tedit,\r\n\tsave,\r\n\tvariations,\r\n};\r\n\r\nexport const init = () => {\r\n\t// Prevent adding forms inside forms.\r\n\tconst DISALLOWED_PARENTS = [ 'core/form' ];\r\n\taddFilter(\r\n\t\t'blockEditor.__unstableCanInsertBlockType',\r\n\t\t'core/block-library/preventInsertingFormIntoAnotherForm',\r\n\t\t(\r\n\t\t\tcanInsert,\r\n\t\t\tblockType,\r\n\t\t\trootClientId,\r\n\t\t\t{ getBlock, getBlockParentsByBlockName }\r\n\t\t) => {\r\n\t\t\tif ( blockType.name !== 'core/form' ) {\r\n\t\t\t\treturn canInsert;\r\n\t\t\t}\r\n\r\n\t\t\tfor ( const disallowedParentType of DISALLOWED_PARENTS ) {\r\n\t\t\t\tconst hasDisallowedParent =\r\n\t\t\t\t\tgetBlock( rootClientId )?.name === disallowedParentType ||\r\n\t\t\t\t\tgetBlockParentsByBlockName(\r\n\t\t\t\t\t\trootClientId,\r\n\t\t\t\t\t\tdisallowedParentType\r\n\t\t\t\t\t).length;\r\n\t\t\t\tif ( hasDisallowedParent ) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t);\r\n\r\n\treturn initBlock( { name, metadata, settings } );\r\n};\r\n"],"mappings":"AAAA;AACA;AACA;AACA,OAAOA,SAAS,MAAM,qBAAqB;AAC3C,OAAOC,IAAI,MAAM,QAAQ;AAAC,MAAAC,QAAA;EAAAC,OAAA;EAAAC,UAAA;EAAAC,cAAA;EAAAC,IAAA;EAAAC,KAAA;EAAAC,QAAA;EAAAC,aAAA;EAAAC,WAAA;EAAAC,QAAA;EAAAC,UAAA;EAAAC,IAAA;EAAAC,UAAA;IAAAC,gBAAA;MAAAC,IAAA;MAAA;IAAA;IAAAC,MAAA;MAAAD,IAAA;MAAA;IAAA;IAAAE,MAAA;MAAAF,IAAA;IAAA;IAAAG,KAAA;MAAAH,IAAA;IAAA;EAAA;EAAAI,QAAA;IAAAC,MAAA;IAAAC,SAAA;IAAAC,KAAA;MAAAC,SAAA;MAAAC,IAAA;MAAAC,6BAAA;QAAAC,UAAA;QAAAC,IAAA;QAAAH,IAAA;MAAA;IAAA;IAAAI,OAAA;MAAAC,MAAA;MAAAC,OAAA;IAAA;IAAAC,UAAA;MAAAC,QAAA;MAAAC,UAAA;MAAAC,wBAAA;MAAAC,4BAAA;MAAAC,uBAAA;MAAAC,wBAAA;MAAAC,2BAAA;MAAAC,2BAAA;MAAAd,6BAAA;QAAAO,QAAA;MAAA;IAAA;IAAAQ,sBAAA;EAAA;EAAAC,UAAA;AAAA;AAE1B,OAAOC,IAAI,MAAM,QAAQ;AACzB,OAAOC,UAAU,MAAM,cAAc;;AAErC;AACA;AACA;AACA,SAASC,SAAS,QAAQ,kBAAkB;AAE5C,MAAM;EAAEvC;AAAK,CAAC,GAAGJ,QAAQ;AAEzB,SAASA,QAAQ,EAAEI,IAAI;AAEvB,OAAO,MAAMwC,QAAQ,GAAG;EACvB7C,IAAI;EACJ0C,IAAI;EACJC;AACD,CAAC;AAED,OAAO,MAAMG,IAAI,GAAGA,CAAA,KAAM;EACzB;EACA,MAAMC,kBAAkB,GAAG,CAAE,WAAW,CAAE;EAC1CH,SAAS,CACR,0CAA0C,EAC1C,wDAAwD,EACxD,CACCI,SAAS,EACTC,SAAS,EACTC,YAAY,EACZ;IAAEC,QAAQ;IAAEC;EAA2B,CAAC,KACpC;IACJ,IAAKH,SAAS,CAAC5C,IAAI,KAAK,WAAW,EAAG;MACrC,OAAO2C,SAAS;IACjB;IAEA,KAAM,MAAMK,oBAAoB,IAAIN,kBAAkB,EAAG;MACxD,MAAMO,mBAAmB,GACxBH,QAAQ,CAAED,YAAa,CAAC,EAAE7C,IAAI,KAAKgD,oBAAoB,IACvDD,0BAA0B,CACzBF,YAAY,EACZG,oBACD,CAAC,CAACE,MAAM;MACT,IAAKD,mBAAmB,EAAG;QAC1B,OAAO,KAAK;MACb;IACD;IACA,OAAO,IAAI;EACZ,CACD,CAAC;EAED,OAAOvD,SAAS,CAAE;IAAEM,IAAI;IAAEJ,QAAQ;IAAE4C;EAAS,CAAE,CAAC;AACjD,CAAC","ignoreList":[]}