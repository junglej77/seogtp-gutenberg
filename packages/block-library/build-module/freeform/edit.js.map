{"version":3,"names":["BlockControls","useBlockProps","store","blockEditorStore","debounce","useRefEffect","useSelect","ToolbarGroup","useEffect","useRef","useState","__","BACKSPACE","DELETE","F10","isKeyboardEvent","ConvertToBlocksButton","ModalEdit","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","wp","window","isTmceEmpty","editor","body","getBody","childNodes","length","test","innerText","textContent","FreeformEdit","props","clientId","canRemove","select","canRemoveBlock","isIframed","setIsIframed","ref","element","ownerDocument","document","children","ClassicEdit","attributes","content","setAttributes","onReplace","getMultiSelectedBlockClientIds","didMountRef","current","tinymce","get","currentContent","getContent","setContent","baseURL","suffix","wpEditorL10n","EditorManager","overrideDefaults","base_url","onSetup","bookmark","on","selection","getBookmark","scrollContainer","querySelector","scrollPosition","scrollTop","once","moveToBookmark","debouncedOnChange","value","_lastChange","cancel","event","primary","stopPropagation","keyCode","preventDefault","stopImmediatePropagation","altKey","rootNode","activeElement","blur","focus","initialize","settings","oldEditor","inline","content_css","fixed_toolbar_container","setup","onReadyStateChange","readyState","addEventListener","removeEventListener","remove","onToolbarKeyDown","nativeEvent","id","className","onClick","onKeyDown"],"sources":["@wordpress/block-library/src/freeform/edit.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tBlockControls,\r\n\tuseBlockProps,\r\n\tstore as blockEditorStore,\r\n} from '@wordpress/block-editor';\r\nimport { debounce, useRefEffect } from '@wordpress/compose';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { ToolbarGroup } from '@wordpress/components';\r\nimport { useEffect, useRef, useState } from '@wordpress/element';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { BACKSPACE, DELETE, F10, isKeyboardEvent } from '@wordpress/keycodes';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport ConvertToBlocksButton from './convert-to-blocks-button';\r\nimport ModalEdit from './modal';\r\n\r\nconst { wp } = window;\r\n\r\nfunction isTmceEmpty( editor ) {\r\n\t// When tinyMce is empty the content seems to be:\r\n\t// <p><br data-mce-bogus=\"1\"></p>\r\n\t// avoid expensive checks for large documents\r\n\tconst body = editor.getBody();\r\n\tif ( body.childNodes.length > 1 ) {\r\n\t\treturn false;\r\n\t} else if ( body.childNodes.length === 0 ) {\r\n\t\treturn true;\r\n\t}\r\n\tif ( body.childNodes[ 0 ].childNodes.length > 1 ) {\r\n\t\treturn false;\r\n\t}\r\n\treturn /^\\n?$/.test( body.innerText || body.textContent );\r\n}\r\n\r\nexport default function FreeformEdit( props ) {\r\n\tconst { clientId } = props;\r\n\tconst canRemove = useSelect(\r\n\t\t( select ) => select( blockEditorStore ).canRemoveBlock( clientId ),\r\n\t\t[ clientId ]\r\n\t);\r\n\tconst [ isIframed, setIsIframed ] = useState( false );\r\n\tconst ref = useRefEffect( ( element ) => {\r\n\t\tsetIsIframed( element.ownerDocument !== document );\r\n\t}, [] );\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ canRemove && (\r\n\t\t\t\t<BlockControls>\r\n\t\t\t\t\t<ToolbarGroup>\r\n\t\t\t\t\t\t<ConvertToBlocksButton clientId={ clientId } />\r\n\t\t\t\t\t</ToolbarGroup>\r\n\t\t\t\t</BlockControls>\r\n\t\t\t) }\r\n\t\t\t<div { ...useBlockProps( { ref } ) }>\r\n\t\t\t\t{ isIframed ? (\r\n\t\t\t\t\t<ModalEdit { ...props } />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<ClassicEdit { ...props } />\r\n\t\t\t\t) }\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nfunction ClassicEdit( {\r\n\tclientId,\r\n\tattributes: { content },\r\n\tsetAttributes,\r\n\tonReplace,\r\n} ) {\r\n\tconst { getMultiSelectedBlockClientIds } = useSelect( blockEditorStore );\r\n\tconst didMountRef = useRef( false );\r\n\r\n\tuseEffect( () => {\r\n\t\tif ( ! didMountRef.current ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst editor = window.tinymce.get( `editor-${ clientId }` );\r\n\t\tif ( ! editor ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst currentContent = editor.getContent();\r\n\t\tif ( currentContent !== content ) {\r\n\t\t\teditor.setContent( content || '' );\r\n\t\t}\r\n\t}, [ clientId, content ] );\r\n\r\n\tuseEffect( () => {\r\n\t\tconst { baseURL, suffix } = window.wpEditorL10n.tinymce;\r\n\r\n\t\tdidMountRef.current = true;\r\n\r\n\t\twindow.tinymce.EditorManager.overrideDefaults( {\r\n\t\t\tbase_url: baseURL,\r\n\t\t\tsuffix,\r\n\t\t} );\r\n\r\n\t\tfunction onSetup( editor ) {\r\n\t\t\tlet bookmark;\r\n\r\n\t\t\tif ( content ) {\r\n\t\t\t\teditor.on( 'loadContent', () => editor.setContent( content ) );\r\n\t\t\t}\r\n\r\n\t\t\teditor.on( 'blur', () => {\r\n\t\t\t\tbookmark = editor.selection.getBookmark( 2, true );\r\n\t\t\t\t// There is an issue with Chrome and the editor.focus call in core at https://core.trac.wordpress.org/browser/trunk/src/js/_enqueues/lib/link.js#L451.\r\n\t\t\t\t// This causes a scroll to the top of editor content on return from some content updating dialogs so tracking\r\n\t\t\t\t// scroll position until this is fixed in core.\r\n\t\t\t\tconst scrollContainer = document.querySelector(\r\n\t\t\t\t\t'.interface-interface-skeleton__content'\r\n\t\t\t\t);\r\n\t\t\t\tconst scrollPosition = scrollContainer.scrollTop;\r\n\r\n\t\t\t\t// Only update attributes if we aren't multi-selecting blocks.\r\n\t\t\t\t// Updating during multi-selection can overwrite attributes of other blocks.\r\n\t\t\t\tif ( ! getMultiSelectedBlockClientIds()?.length ) {\r\n\t\t\t\t\tsetAttributes( {\r\n\t\t\t\t\t\tcontent: editor.getContent(),\r\n\t\t\t\t\t} );\r\n\t\t\t\t}\r\n\r\n\t\t\t\teditor.once( 'focus', () => {\r\n\t\t\t\t\tif ( bookmark ) {\r\n\t\t\t\t\t\teditor.selection.moveToBookmark( bookmark );\r\n\t\t\t\t\t\tif ( scrollContainer.scrollTop !== scrollPosition ) {\r\n\t\t\t\t\t\t\tscrollContainer.scrollTop = scrollPosition;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} );\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t} );\r\n\r\n\t\t\teditor.on( 'mousedown touchstart', () => {\r\n\t\t\t\tbookmark = null;\r\n\t\t\t} );\r\n\r\n\t\t\tconst debouncedOnChange = debounce( () => {\r\n\t\t\t\tconst value = editor.getContent();\r\n\r\n\t\t\t\tif ( value !== editor._lastChange ) {\r\n\t\t\t\t\teditor._lastChange = value;\r\n\t\t\t\t\tsetAttributes( {\r\n\t\t\t\t\t\tcontent: value,\r\n\t\t\t\t\t} );\r\n\t\t\t\t}\r\n\t\t\t}, 250 );\r\n\t\t\teditor.on( 'Paste Change input Undo Redo', debouncedOnChange );\r\n\r\n\t\t\t// We need to cancel the debounce call because when we remove\r\n\t\t\t// the editor (onUnmount) this callback is executed in\r\n\t\t\t// another tick. This results in setting the content to empty.\r\n\t\t\teditor.on( 'remove', debouncedOnChange.cancel );\r\n\r\n\t\t\teditor.on( 'keydown', ( event ) => {\r\n\t\t\t\tif ( isKeyboardEvent.primary( event, 'z' ) ) {\r\n\t\t\t\t\t// Prevent the gutenberg undo kicking in so TinyMCE undo stack works as expected.\r\n\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (\r\n\t\t\t\t\t( event.keyCode === BACKSPACE ||\r\n\t\t\t\t\t\tevent.keyCode === DELETE ) &&\r\n\t\t\t\t\tisTmceEmpty( editor )\r\n\t\t\t\t) {\r\n\t\t\t\t\t// Delete the block.\r\n\t\t\t\t\tonReplace( [] );\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tevent.stopImmediatePropagation();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst { altKey } = event;\r\n\t\t\t\t/*\r\n\t\t\t\t * Prevent Mousetrap from kicking in: TinyMCE already uses its own\r\n\t\t\t\t * `alt+f10` shortcut to focus its toolbar.\r\n\t\t\t\t */\r\n\t\t\t\tif ( altKey && event.keyCode === F10 ) {\r\n\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\r\n\t\t\teditor.on( 'init', () => {\r\n\t\t\t\tconst rootNode = editor.getBody();\r\n\r\n\t\t\t\t// Create the toolbar by refocussing the editor.\r\n\t\t\t\tif ( rootNode.ownerDocument.activeElement === rootNode ) {\r\n\t\t\t\t\trootNode.blur();\r\n\t\t\t\t\teditor.focus();\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t}\r\n\r\n\t\tfunction initialize() {\r\n\t\t\tconst { settings } = window.wpEditorL10n.tinymce;\r\n\t\t\twp.oldEditor.initialize( `editor-${ clientId }`, {\r\n\t\t\t\ttinymce: {\r\n\t\t\t\t\t...settings,\r\n\t\t\t\t\tinline: true,\r\n\t\t\t\t\tcontent_css: false,\r\n\t\t\t\t\tfixed_toolbar_container: `#toolbar-${ clientId }`,\r\n\t\t\t\t\tsetup: onSetup,\r\n\t\t\t\t},\r\n\t\t\t} );\r\n\t\t}\r\n\r\n\t\tfunction onReadyStateChange() {\r\n\t\t\tif ( document.readyState === 'complete' ) {\r\n\t\t\t\tinitialize();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( document.readyState === 'complete' ) {\r\n\t\t\tinitialize();\r\n\t\t} else {\r\n\t\t\tdocument.addEventListener( 'readystatechange', onReadyStateChange );\r\n\t\t}\r\n\r\n\t\treturn () => {\r\n\t\t\tdocument.removeEventListener(\r\n\t\t\t\t'readystatechange',\r\n\t\t\t\tonReadyStateChange\r\n\t\t\t);\r\n\t\t\twp.oldEditor.remove( `editor-${ clientId }` );\r\n\t\t\tdidMountRef.current = false;\r\n\t\t};\r\n\t}, [] );\r\n\r\n\tfunction focus() {\r\n\t\tconst editor = window.tinymce.get( `editor-${ clientId }` );\r\n\t\tif ( editor ) {\r\n\t\t\teditor.focus();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction onToolbarKeyDown( event ) {\r\n\t\t// Prevent WritingFlow from kicking in and allow arrows navigation on the toolbar.\r\n\t\tevent.stopPropagation();\r\n\t\t// Prevent Mousetrap from moving focus to the top toolbar when pressing `alt+f10` on this block toolbar.\r\n\t\tevent.nativeEvent.stopImmediatePropagation();\r\n\t}\r\n\r\n\t// Disable reasons:\r\n\t//\r\n\t// jsx-a11y/no-static-element-interactions\r\n\t//  - the toolbar itself is non-interactive, but must capture events\r\n\t//    from the KeyboardShortcuts component to stop their propagation.\r\n\r\n\t/* eslint-disable jsx-a11y/no-static-element-interactions */\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div\r\n\t\t\t\tkey=\"toolbar\"\r\n\t\t\t\tid={ `toolbar-${ clientId }` }\r\n\t\t\t\tclassName=\"block-library-classic__toolbar\"\r\n\t\t\t\tonClick={ focus }\r\n\t\t\t\tdata-placeholder={ __( 'Classic' ) }\r\n\t\t\t\tonKeyDown={ onToolbarKeyDown }\r\n\t\t\t/>\r\n\t\t\t<div\r\n\t\t\t\tkey=\"editor\"\r\n\t\t\t\tid={ `editor-${ clientId }` }\r\n\t\t\t\tclassName=\"wp-block-freeform block-library-rich-text__tinymce\"\r\n\t\t\t/>\r\n\t\t</>\r\n\t);\r\n\t/* eslint-enable jsx-a11y/no-static-element-interactions */\r\n}\r\n"],"mappings":"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","ignoreList":[]}