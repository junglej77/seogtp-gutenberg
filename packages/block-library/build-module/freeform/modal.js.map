{"version":3,"names":["BlockControls","store","ToolbarGroup","ToolbarButton","Modal","Button","Flex","FlexItem","useEffect","useState","RawHTML","__","useSelect","fullscreen","useViewportMatch","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ModalAuxiliaryActions","onClick","isModalFullScreen","isMobileViewport","__next40pxDefaultSize","icon","isPressed","label","ClassicEdit","props","styles","select","getSettings","baseURL","suffix","settings","window","wpEditorL10n","tinymce","EditorManager","overrideDefaults","base_url","wp","oldEditor","initialize","id","setup","editor","on","doc","getDoc","forEach","css","styleEl","createElement","innerHTML","head","appendChild","remove","ModalEdit","clientId","attributes","content","setAttributes","onReplace","isOpen","setOpen","setIsModalFullScreen","onClose","children","title","onRequestClose","shouldCloseOnClickOutside","overlayClassName","isFullScreen","className","headerActions","defaultValue","justify","expanded","variant","getContent"],"sources":["@wordpress/block-library/src/freeform/modal.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { BlockControls, store } from '@wordpress/block-editor';\r\nimport {\r\n\tToolbarGroup,\r\n\tToolbarButton,\r\n\tModal,\r\n\tButton,\r\n\tFlex,\r\n\tFlexItem,\r\n} from '@wordpress/components';\r\nimport { useEffect, useState, RawHTML } from '@wordpress/element';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { fullscreen } from '@wordpress/icons';\r\nimport { useViewportMatch } from '@wordpress/compose';\r\n\r\nfunction ModalAuxiliaryActions( { onClick, isModalFullScreen } ) {\r\n\t// 'small' to match the rules in editor.scss.\r\n\tconst isMobileViewport = useViewportMatch( 'small', '<' );\r\n\tif ( isMobileViewport ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Button\r\n\t\t\t// TODO: Switch to `true` (40px size) if possible\r\n\t\t\t__next40pxDefaultSize={ false }\r\n\t\t\tonClick={ onClick }\r\n\t\t\ticon={ fullscreen }\r\n\t\t\tisPressed={ isModalFullScreen }\r\n\t\t\tlabel={\r\n\t\t\t\tisModalFullScreen\r\n\t\t\t\t\t? __( 'Exit fullscreen' )\r\n\t\t\t\t\t: __( 'Enter fullscreen' )\r\n\t\t\t}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nfunction ClassicEdit( props ) {\r\n\tconst styles = useSelect(\r\n\t\t( select ) => select( store ).getSettings().styles\r\n\t);\r\n\tuseEffect( () => {\r\n\t\tconst { baseURL, suffix, settings } = window.wpEditorL10n.tinymce;\r\n\r\n\t\twindow.tinymce.EditorManager.overrideDefaults( {\r\n\t\t\tbase_url: baseURL,\r\n\t\t\tsuffix,\r\n\t\t} );\r\n\r\n\t\twindow.wp.oldEditor.initialize( props.id, {\r\n\t\t\ttinymce: {\r\n\t\t\t\t...settings,\r\n\t\t\t\tsetup( editor ) {\r\n\t\t\t\t\teditor.on( 'init', () => {\r\n\t\t\t\t\t\tconst doc = editor.getDoc();\r\n\t\t\t\t\t\tstyles.forEach( ( { css } ) => {\r\n\t\t\t\t\t\t\tconst styleEl = doc.createElement( 'style' );\r\n\t\t\t\t\t\t\tstyleEl.innerHTML = css;\r\n\t\t\t\t\t\t\tdoc.head.appendChild( styleEl );\r\n\t\t\t\t\t\t} );\r\n\t\t\t\t\t} );\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t} );\r\n\r\n\t\treturn () => {\r\n\t\t\twindow.wp.oldEditor.remove( props.id );\r\n\t\t};\r\n\t}, [] );\r\n\r\n\treturn <textarea { ...props } />;\r\n}\r\n\r\nexport default function ModalEdit( props ) {\r\n\tconst {\r\n\t\tclientId,\r\n\t\tattributes: { content },\r\n\t\tsetAttributes,\r\n\t\tonReplace,\r\n\t} = props;\r\n\tconst [ isOpen, setOpen ] = useState( false );\r\n\tconst [ isModalFullScreen, setIsModalFullScreen ] = useState( false );\r\n\tconst id = `editor-${ clientId }`;\r\n\r\n\tconst onClose = () => ( content ? setOpen( false ) : onReplace( [] ) );\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<BlockControls>\r\n\t\t\t\t<ToolbarGroup>\r\n\t\t\t\t\t<ToolbarButton onClick={ () => setOpen( true ) }>\r\n\t\t\t\t\t\t{ __( 'Edit' ) }\r\n\t\t\t\t\t</ToolbarButton>\r\n\t\t\t\t</ToolbarGroup>\r\n\t\t\t</BlockControls>\r\n\t\t\t{ content && <RawHTML>{ content }</RawHTML> }\r\n\t\t\t{ ( isOpen || ! content ) && (\r\n\t\t\t\t<Modal\r\n\t\t\t\t\ttitle={ __( 'Classic Editor' ) }\r\n\t\t\t\t\tonRequestClose={ onClose }\r\n\t\t\t\t\tshouldCloseOnClickOutside={ false }\r\n\t\t\t\t\toverlayClassName=\"block-editor-freeform-modal\"\r\n\t\t\t\t\tisFullScreen={ isModalFullScreen }\r\n\t\t\t\t\tclassName=\"block-editor-freeform-modal__content\"\r\n\t\t\t\t\theaderActions={\r\n\t\t\t\t\t\t<ModalAuxiliaryActions\r\n\t\t\t\t\t\t\tonClick={ () =>\r\n\t\t\t\t\t\t\t\tsetIsModalFullScreen( ! isModalFullScreen )\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tisModalFullScreen={ isModalFullScreen }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t}\r\n\t\t\t\t>\r\n\t\t\t\t\t<ClassicEdit id={ id } defaultValue={ content } />\r\n\t\t\t\t\t<Flex\r\n\t\t\t\t\t\tclassName=\"block-editor-freeform-modal__actions\"\r\n\t\t\t\t\t\tjustify=\"flex-end\"\r\n\t\t\t\t\t\texpanded={ false }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<FlexItem>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\t\t\tvariant=\"tertiary\"\r\n\t\t\t\t\t\t\t\tonClick={ onClose }\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{ __( 'Cancel' ) }\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</FlexItem>\r\n\t\t\t\t\t\t<FlexItem>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\t\t\t\tsetAttributes( {\r\n\t\t\t\t\t\t\t\t\t\tcontent:\r\n\t\t\t\t\t\t\t\t\t\t\twindow.wp.oldEditor.getContent(\r\n\t\t\t\t\t\t\t\t\t\t\t\tid\r\n\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t} );\r\n\t\t\t\t\t\t\t\t\tsetOpen( false );\r\n\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{ __( 'Save' ) }\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</FlexItem>\r\n\t\t\t\t\t</Flex>\r\n\t\t\t\t</Modal>\r\n\t\t\t) }\r\n\t\t</>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}