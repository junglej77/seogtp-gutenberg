{"version":3,"names":["useDispatch","useSelect","InnerBlocks","useBlockProps","InspectorControls","useInnerBlocksProps","store","blockEditorStore","SelectControl","useRef","__","View","GroupPlaceHolder","useShouldShowPlaceHolder","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","GroupEditControls","tagName","onSelectTagName","htmlElementMessages","header","main","section","article","aside","footer","group","children","__nextHasNoMarginBottom","__next40pxDefaultSize","label","options","value","onChange","help","GroupEdit","attributes","name","setAttributes","clientId","hasInnerBlocks","themeSupportsLayout","select","getBlock","getSettings","block","innerBlocks","length","supportsLayout","TagName","templateLock","allowedBlocks","layout","type","layoutSupportEnabled","ref","blockProps","showPlaceholder","setShowPlaceholder","usedLayoutType","renderAppender","ButtonBlockAppender","innerBlocksProps","className","dropZoneElement","current","selectBlock","selectVariation","nextVariation","onSelect"],"sources":["@wordpress/block-library/src/group/edit.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\nimport {\r\n\tInnerBlocks,\r\n\tuseBlockProps,\r\n\tInspectorControls,\r\n\tuseInnerBlocksProps,\r\n\tstore as blockEditorStore,\r\n} from '@wordpress/block-editor';\r\nimport { SelectControl } from '@wordpress/components';\r\nimport { useRef } from '@wordpress/element';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { View } from '@wordpress/primitives';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport GroupPlaceHolder, { useShouldShowPlaceHolder } from './placeholder';\r\n\r\n/**\r\n * Render inspector controls for the Group block.\r\n *\r\n * @param {Object}   props                 Component props.\r\n * @param {string}   props.tagName         The HTML tag name.\r\n * @param {Function} props.onSelectTagName onChange function for the SelectControl.\r\n *\r\n * @return {JSX.Element}                The control group.\r\n */\r\nfunction GroupEditControls( { tagName, onSelectTagName } ) {\r\n\tconst htmlElementMessages = {\r\n\t\theader: __(\r\n\t\t\t'The <header> element should represent introductory content, typically a group of introductory or navigational aids.'\r\n\t\t),\r\n\t\tmain: __(\r\n\t\t\t'The <main> element should be used for the primary content of your document only.'\r\n\t\t),\r\n\t\tsection: __(\r\n\t\t\t\"The <section> element should represent a standalone portion of the document that can't be better represented by another element.\"\r\n\t\t),\r\n\t\tarticle: __(\r\n\t\t\t'The <article> element should represent a self-contained, syndicatable portion of the document.'\r\n\t\t),\r\n\t\taside: __(\r\n\t\t\t\"The <aside> element should represent a portion of a document whose content is only indirectly related to the document's main content.\"\r\n\t\t),\r\n\t\tfooter: __(\r\n\t\t\t'The <footer> element should represent a footer for its nearest sectioning element (e.g.: <section>, <article>, <main> etc.).'\r\n\t\t),\r\n\t};\r\n\treturn (\r\n\t\t<InspectorControls group=\"advanced\">\r\n\t\t\t<SelectControl\r\n\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\tlabel={ __( 'HTML element' ) }\r\n\t\t\t\toptions={ [\r\n\t\t\t\t\t{ label: __( 'Default (<div>)' ), value: 'div' },\r\n\t\t\t\t\t{ label: '<header>', value: 'header' },\r\n\t\t\t\t\t{ label: '<main>', value: 'main' },\r\n\t\t\t\t\t{ label: '<section>', value: 'section' },\r\n\t\t\t\t\t{ label: '<article>', value: 'article' },\r\n\t\t\t\t\t{ label: '<aside>', value: 'aside' },\r\n\t\t\t\t\t{ label: '<footer>', value: 'footer' },\r\n\t\t\t\t] }\r\n\t\t\t\tvalue={ tagName }\r\n\t\t\t\tonChange={ onSelectTagName }\r\n\t\t\t\thelp={ htmlElementMessages[ tagName ] }\r\n\t\t\t/>\r\n\t\t</InspectorControls>\r\n\t);\r\n}\r\n\r\nfunction GroupEdit( { attributes, name, setAttributes, clientId } ) {\r\n\tconst { hasInnerBlocks, themeSupportsLayout } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst { getBlock, getSettings } = select( blockEditorStore );\r\n\t\t\tconst block = getBlock( clientId );\r\n\t\t\treturn {\r\n\t\t\t\thasInnerBlocks: !! ( block && block.innerBlocks.length ),\r\n\t\t\t\tthemeSupportsLayout: getSettings()?.supportsLayout,\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ clientId ]\r\n\t);\r\n\r\n\tconst {\r\n\t\ttagName: TagName = 'div',\r\n\t\ttemplateLock,\r\n\t\tallowedBlocks,\r\n\t\tlayout = {},\r\n\t} = attributes;\r\n\r\n\t// Layout settings.\r\n\tconst { type = 'default' } = layout;\r\n\tconst layoutSupportEnabled =\r\n\t\tthemeSupportsLayout || type === 'flex' || type === 'grid';\r\n\r\n\t// Hooks.\r\n\tconst ref = useRef();\r\n\tconst blockProps = useBlockProps( { ref } );\r\n\r\n\tconst [ showPlaceholder, setShowPlaceholder ] = useShouldShowPlaceHolder( {\r\n\t\tattributes,\r\n\t\tusedLayoutType: type,\r\n\t\thasInnerBlocks,\r\n\t} );\r\n\r\n\t// Default to the regular appender being rendered.\r\n\tlet renderAppender;\r\n\tif ( showPlaceholder ) {\r\n\t\t// In the placeholder state, ensure the appender is not rendered.\r\n\t\t// This is needed because `...innerBlocksProps` is used in the placeholder\r\n\t\t// state so that blocks can dragged onto the placeholder area\r\n\t\t// from both the list view and in the editor canvas.\r\n\t\trenderAppender = false;\r\n\t} else if ( ! hasInnerBlocks ) {\r\n\t\t// When there is no placeholder, but the block is also empty,\r\n\t\t// use the larger button appender.\r\n\t\trenderAppender = InnerBlocks.ButtonBlockAppender;\r\n\t}\r\n\r\n\tconst innerBlocksProps = useInnerBlocksProps(\r\n\t\tlayoutSupportEnabled\r\n\t\t\t? blockProps\r\n\t\t\t: { className: 'wp-block-group__inner-container' },\r\n\t\t{\r\n\t\t\tdropZoneElement: ref.current,\r\n\t\t\ttemplateLock,\r\n\t\t\tallowedBlocks,\r\n\t\t\trenderAppender,\r\n\t\t}\r\n\t);\r\n\r\n\tconst { selectBlock } = useDispatch( blockEditorStore );\r\n\r\n\tconst selectVariation = ( nextVariation ) => {\r\n\t\tsetAttributes( nextVariation.attributes );\r\n\t\tselectBlock( clientId, -1 );\r\n\t\tsetShowPlaceholder( false );\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<GroupEditControls\r\n\t\t\t\ttagName={ TagName }\r\n\t\t\t\tonSelectTagName={ ( value ) =>\r\n\t\t\t\t\tsetAttributes( { tagName: value } )\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\t\t\t{ showPlaceholder && (\r\n\t\t\t\t<View>\r\n\t\t\t\t\t{ innerBlocksProps.children }\r\n\t\t\t\t\t<GroupPlaceHolder\r\n\t\t\t\t\t\tname={ name }\r\n\t\t\t\t\t\tonSelect={ selectVariation }\r\n\t\t\t\t\t/>\r\n\t\t\t\t</View>\r\n\t\t\t) }\r\n\t\t\t{ layoutSupportEnabled && ! showPlaceholder && (\r\n\t\t\t\t<TagName { ...innerBlocksProps } />\r\n\t\t\t) }\r\n\t\t\t{ /* Ideally this is not needed but it's there for backward compatibility reason\r\n\t\t\t\tto keep this div for themes that might rely on its presence */ }\r\n\t\t\t{ ! layoutSupportEnabled && ! showPlaceholder && (\r\n\t\t\t\t<TagName { ...blockProps }>\r\n\t\t\t\t\t<div { ...innerBlocksProps } />\r\n\t\t\t\t</TagName>\r\n\t\t\t) }\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default GroupEdit;\r\n"],"mappings":"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","ignoreList":[]}