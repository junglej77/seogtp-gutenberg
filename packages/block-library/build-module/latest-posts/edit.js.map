{"version":3,"names":["clsx","PanelBody","Placeholder","QueryControls","RadioControl","RangeControl","Spinner","ToggleControl","ToolbarGroup","__experimentalToggleGroupControl","ToggleGroupControl","__experimentalToggleGroupControlOptionIcon","ToggleGroupControlOptionIcon","__","_x","sprintf","dateI18n","format","getSettings","InspectorControls","BlockControls","__experimentalImageSizeControl","ImageSizeControl","useBlockProps","store","blockEditorStore","useSelect","useDispatch","pin","list","grid","alignNone","positionLeft","positionCenter","positionRight","coreStore","noticeStore","useInstanceId","createInterpolateElement","MIN_EXCERPT_LENGTH","MAX_EXCERPT_LENGTH","MAX_POSTS_COLUMNS","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CATEGORIES_LIST_QUERY","per_page","context","USERS_LIST_QUERY","has_published_posts","getFeaturedImageDetails","post","size","_image$media_details$","image","_embedded","url","media_details","sizes","source_url","alt","alt_text","LatestPostsEdit","attributes","setAttributes","_categoriesList$reduc","instanceId","postsToShow","order","orderBy","categories","selectedAuthor","displayFeaturedImage","displayPostContentRadio","displayPostContent","displayPostDate","displayAuthor","postLayout","columns","excerptLength","featuredImageAlign","featuredImageSizeSlug","featuredImageSizeWidth","featuredImageSizeHeight","addLinkToFeaturedImage","imageSizes","latestPosts","defaultImageWidth","defaultImageHeight","categoriesList","authorList","select","_settings$imageDimens","_settings$imageDimens2","getEntityRecords","getUsers","settings","catIds","length","map","cat","id","latestPostsQuery","Object","fromEntries","entries","author","orderby","_embed","filter","value","imageDimensions","width","height","createWarningNotice","removeNotice","noticeId","showRedirectionPreventedNotice","event","preventDefault","type","imageSizeOptions","slug","name","label","categorySuggestions","reduce","accumulator","category","selectCategories","tokens","hasNoSuggestion","some","token","allCategories","includes","imageAlignmentOptions","icon","hasPosts","inspectorControls","children","title","__nextHasNoMarginBottom","checked","onChange","className","selected","options","__next40pxDefaultSize","min","max","newAttrs","hasOwnProperty","imageWidth","imageHeight","imageSizeHelp","onChangeImage","undefined","numberOfItems","onOrderChange","onOrderByChange","onNumberOfItemsChange","onCategoryChange","selectedCategories","onAuthorChange","Number","selectedAuthorId","Math","required","blockProps","Array","isArray","displayPosts","slice","layoutControls","onClick","isActive","dateFormat","formats","date","controls","titleTrimmed","rendered","trim","excerpt","currentAuthor","find","excerptElement","document","createElement","innerHTML","textContent","innerText","imageSourceUrl","featuredImageAlt","imageClasses","renderFeaturedImage","featuredImage","src","style","maxWidth","maxHeight","needsReadMore","split","raw","postExcerpt","join","a","href","link","rel","span","dangerouslySetInnerHTML","__html","date_gmt","dateTime","content"],"sources":["@wordpress/block-library/src/latest-posts/edit.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tPanelBody,\r\n\tPlaceholder,\r\n\tQueryControls,\r\n\tRadioControl,\r\n\tRangeControl,\r\n\tSpinner,\r\n\tToggleControl,\r\n\tToolbarGroup,\r\n\t__experimentalToggleGroupControl as ToggleGroupControl,\r\n\t__experimentalToggleGroupControlOptionIcon as ToggleGroupControlOptionIcon,\r\n} from '@wordpress/components';\r\nimport { __, _x, sprintf } from '@wordpress/i18n';\r\nimport { dateI18n, format, getSettings } from '@wordpress/date';\r\nimport {\r\n\tInspectorControls,\r\n\tBlockControls,\r\n\t__experimentalImageSizeControl as ImageSizeControl,\r\n\tuseBlockProps,\r\n\tstore as blockEditorStore,\r\n} from '@wordpress/block-editor';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport {\r\n\tpin,\r\n\tlist,\r\n\tgrid,\r\n\talignNone,\r\n\tpositionLeft,\r\n\tpositionCenter,\r\n\tpositionRight,\r\n} from '@wordpress/icons';\r\nimport { store as coreStore } from '@wordpress/core-data';\r\nimport { store as noticeStore } from '@wordpress/notices';\r\nimport { useInstanceId } from '@wordpress/compose';\r\nimport { createInterpolateElement } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport {\r\n\tMIN_EXCERPT_LENGTH,\r\n\tMAX_EXCERPT_LENGTH,\r\n\tMAX_POSTS_COLUMNS,\r\n} from './constants';\r\n\r\n/**\r\n * Module Constants\r\n */\r\nconst CATEGORIES_LIST_QUERY = {\r\n\tper_page: -1,\r\n\tcontext: 'view',\r\n};\r\nconst USERS_LIST_QUERY = {\r\n\tper_page: -1,\r\n\thas_published_posts: [ 'post' ],\r\n\tcontext: 'view',\r\n};\r\n\r\nfunction getFeaturedImageDetails( post, size ) {\r\n\tconst image = post._embedded?.[ 'wp:featuredmedia' ]?.[ '0' ];\r\n\r\n\treturn {\r\n\t\turl:\r\n\t\t\timage?.media_details?.sizes?.[ size ]?.source_url ??\r\n\t\t\timage?.source_url,\r\n\t\talt: image?.alt_text,\r\n\t};\r\n}\r\n\r\nexport default function LatestPostsEdit( { attributes, setAttributes } ) {\r\n\tconst instanceId = useInstanceId( LatestPostsEdit );\r\n\tconst {\r\n\t\tpostsToShow,\r\n\t\torder,\r\n\t\torderBy,\r\n\t\tcategories,\r\n\t\tselectedAuthor,\r\n\t\tdisplayFeaturedImage,\r\n\t\tdisplayPostContentRadio,\r\n\t\tdisplayPostContent,\r\n\t\tdisplayPostDate,\r\n\t\tdisplayAuthor,\r\n\t\tpostLayout,\r\n\t\tcolumns,\r\n\t\texcerptLength,\r\n\t\tfeaturedImageAlign,\r\n\t\tfeaturedImageSizeSlug,\r\n\t\tfeaturedImageSizeWidth,\r\n\t\tfeaturedImageSizeHeight,\r\n\t\taddLinkToFeaturedImage,\r\n\t} = attributes;\r\n\tconst {\r\n\t\timageSizes,\r\n\t\tlatestPosts,\r\n\t\tdefaultImageWidth,\r\n\t\tdefaultImageHeight,\r\n\t\tcategoriesList,\r\n\t\tauthorList,\r\n\t} = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst { getEntityRecords, getUsers } = select( coreStore );\r\n\t\t\tconst settings = select( blockEditorStore ).getSettings();\r\n\t\t\tconst catIds =\r\n\t\t\t\tcategories && categories.length > 0\r\n\t\t\t\t\t? categories.map( ( cat ) => cat.id )\r\n\t\t\t\t\t: [];\r\n\t\t\tconst latestPostsQuery = Object.fromEntries(\r\n\t\t\t\tObject.entries( {\r\n\t\t\t\t\tcategories: catIds,\r\n\t\t\t\t\tauthor: selectedAuthor,\r\n\t\t\t\t\torder,\r\n\t\t\t\t\torderby: orderBy,\r\n\t\t\t\t\tper_page: postsToShow,\r\n\t\t\t\t\t_embed: 'wp:featuredmedia',\r\n\t\t\t\t} ).filter( ( [ , value ] ) => typeof value !== 'undefined' )\r\n\t\t\t);\r\n\r\n\t\t\treturn {\r\n\t\t\t\tdefaultImageWidth:\r\n\t\t\t\t\tsettings.imageDimensions?.[ featuredImageSizeSlug ]\r\n\t\t\t\t\t\t?.width ?? 0,\r\n\t\t\t\tdefaultImageHeight:\r\n\t\t\t\t\tsettings.imageDimensions?.[ featuredImageSizeSlug ]\r\n\t\t\t\t\t\t?.height ?? 0,\r\n\t\t\t\timageSizes: settings.imageSizes,\r\n\t\t\t\tlatestPosts: getEntityRecords(\r\n\t\t\t\t\t'postType',\r\n\t\t\t\t\t'post',\r\n\t\t\t\t\tlatestPostsQuery\r\n\t\t\t\t),\r\n\t\t\t\tcategoriesList: getEntityRecords(\r\n\t\t\t\t\t'taxonomy',\r\n\t\t\t\t\t'category',\r\n\t\t\t\t\tCATEGORIES_LIST_QUERY\r\n\t\t\t\t),\r\n\t\t\t\tauthorList: getUsers( USERS_LIST_QUERY ),\r\n\t\t\t};\r\n\t\t},\r\n\t\t[\r\n\t\t\tfeaturedImageSizeSlug,\r\n\t\t\tpostsToShow,\r\n\t\t\torder,\r\n\t\t\torderBy,\r\n\t\t\tcategories,\r\n\t\t\tselectedAuthor,\r\n\t\t]\r\n\t);\r\n\r\n\t// If a user clicks to a link prevent redirection and show a warning.\r\n\tconst { createWarningNotice, removeNotice } = useDispatch( noticeStore );\r\n\tlet noticeId;\r\n\tconst showRedirectionPreventedNotice = ( event ) => {\r\n\t\tevent.preventDefault();\r\n\t\t// Remove previous warning if any, to show one at a time per block.\r\n\t\tremoveNotice( noticeId );\r\n\t\tnoticeId = `block-library/core/latest-posts/redirection-prevented/${ instanceId }`;\r\n\t\tcreateWarningNotice( __( 'Links are disabled in the editor.' ), {\r\n\t\t\tid: noticeId,\r\n\t\t\ttype: 'snackbar',\r\n\t\t} );\r\n\t};\r\n\r\n\tconst imageSizeOptions = imageSizes\r\n\t\t.filter( ( { slug } ) => slug !== 'full' )\r\n\t\t.map( ( { name, slug } ) => ( {\r\n\t\t\tvalue: slug,\r\n\t\t\tlabel: name,\r\n\t\t} ) );\r\n\tconst categorySuggestions =\r\n\t\tcategoriesList?.reduce(\r\n\t\t\t( accumulator, category ) => ( {\r\n\t\t\t\t...accumulator,\r\n\t\t\t\t[ category.name ]: category,\r\n\t\t\t} ),\r\n\t\t\t{}\r\n\t\t) ?? {};\r\n\tconst selectCategories = ( tokens ) => {\r\n\t\tconst hasNoSuggestion = tokens.some(\r\n\t\t\t( token ) =>\r\n\t\t\t\ttypeof token === 'string' && ! categorySuggestions[ token ]\r\n\t\t);\r\n\t\tif ( hasNoSuggestion ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// Categories that are already will be objects, while new additions will be strings (the name).\r\n\t\t// allCategories nomalizes the array so that they are all objects.\r\n\t\tconst allCategories = tokens.map( ( token ) => {\r\n\t\t\treturn typeof token === 'string'\r\n\t\t\t\t? categorySuggestions[ token ]\r\n\t\t\t\t: token;\r\n\t\t} );\r\n\t\t// We do nothing if the category is not selected\r\n\t\t// from suggestions.\r\n\t\tif ( allCategories.includes( null ) ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tsetAttributes( { categories: allCategories } );\r\n\t};\r\n\r\n\tconst imageAlignmentOptions = [\r\n\t\t{\r\n\t\t\tvalue: 'none',\r\n\t\t\ticon: alignNone,\r\n\t\t\tlabel: __( 'None' ),\r\n\t\t},\r\n\t\t{\r\n\t\t\tvalue: 'left',\r\n\t\t\ticon: positionLeft,\r\n\t\t\tlabel: __( 'Left' ),\r\n\t\t},\r\n\t\t{\r\n\t\t\tvalue: 'center',\r\n\t\t\ticon: positionCenter,\r\n\t\t\tlabel: __( 'Center' ),\r\n\t\t},\r\n\t\t{\r\n\t\t\tvalue: 'right',\r\n\t\t\ticon: positionRight,\r\n\t\t\tlabel: __( 'Right' ),\r\n\t\t},\r\n\t];\r\n\r\n\tconst hasPosts = !! latestPosts?.length;\r\n\tconst inspectorControls = (\r\n\t\t<InspectorControls>\r\n\t\t\t<PanelBody title={ __( 'Post content' ) }>\r\n\t\t\t\t<ToggleControl\r\n\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\tlabel={ __( 'Post content' ) }\r\n\t\t\t\t\tchecked={ displayPostContent }\r\n\t\t\t\t\tonChange={ ( value ) =>\r\n\t\t\t\t\t\tsetAttributes( { displayPostContent: value } )\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t\t{ displayPostContent && (\r\n\t\t\t\t\t<RadioControl\r\n\t\t\t\t\t\tclassName=\"wp-block-latest-posts__post-content-radio\"\r\n\t\t\t\t\t\tlabel={ __( 'Show:' ) }\r\n\t\t\t\t\t\tselected={ displayPostContentRadio }\r\n\t\t\t\t\t\toptions={ [\r\n\t\t\t\t\t\t\t{ label: __( 'Excerpt' ), value: 'excerpt' },\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlabel: __( 'Full post' ),\r\n\t\t\t\t\t\t\t\tvalue: 'full_post',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t] }\r\n\t\t\t\t\t\tonChange={ ( value ) =>\r\n\t\t\t\t\t\t\tsetAttributes( {\r\n\t\t\t\t\t\t\t\tdisplayPostContentRadio: value,\r\n\t\t\t\t\t\t\t} )\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t) }\r\n\t\t\t\t{ displayPostContent &&\r\n\t\t\t\t\tdisplayPostContentRadio === 'excerpt' && (\r\n\t\t\t\t\t\t<RangeControl\r\n\t\t\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\t\tlabel={ __( 'Max number of words' ) }\r\n\t\t\t\t\t\t\tvalue={ excerptLength }\r\n\t\t\t\t\t\t\tonChange={ ( value ) =>\r\n\t\t\t\t\t\t\t\tsetAttributes( { excerptLength: value } )\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tmin={ MIN_EXCERPT_LENGTH }\r\n\t\t\t\t\t\t\tmax={ MAX_EXCERPT_LENGTH }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) }\r\n\t\t\t</PanelBody>\r\n\r\n\t\t\t<PanelBody title={ __( 'Post meta' ) }>\r\n\t\t\t\t<ToggleControl\r\n\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\tlabel={ __( 'Display author name' ) }\r\n\t\t\t\t\tchecked={ displayAuthor }\r\n\t\t\t\t\tonChange={ ( value ) =>\r\n\t\t\t\t\t\tsetAttributes( { displayAuthor: value } )\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t\t<ToggleControl\r\n\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\tlabel={ __( 'Display post date' ) }\r\n\t\t\t\t\tchecked={ displayPostDate }\r\n\t\t\t\t\tonChange={ ( value ) =>\r\n\t\t\t\t\t\tsetAttributes( { displayPostDate: value } )\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t</PanelBody>\r\n\r\n\t\t\t<PanelBody title={ __( 'Featured image' ) }>\r\n\t\t\t\t<ToggleControl\r\n\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\tlabel={ __( 'Display featured image' ) }\r\n\t\t\t\t\tchecked={ displayFeaturedImage }\r\n\t\t\t\t\tonChange={ ( value ) =>\r\n\t\t\t\t\t\tsetAttributes( { displayFeaturedImage: value } )\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t\t{ displayFeaturedImage && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<ImageSizeControl\r\n\t\t\t\t\t\t\tonChange={ ( value ) => {\r\n\t\t\t\t\t\t\t\tconst newAttrs = {};\r\n\t\t\t\t\t\t\t\tif ( value.hasOwnProperty( 'width' ) ) {\r\n\t\t\t\t\t\t\t\t\tnewAttrs.featuredImageSizeWidth =\r\n\t\t\t\t\t\t\t\t\t\tvalue.width;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif ( value.hasOwnProperty( 'height' ) ) {\r\n\t\t\t\t\t\t\t\t\tnewAttrs.featuredImageSizeHeight =\r\n\t\t\t\t\t\t\t\t\t\tvalue.height;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tsetAttributes( newAttrs );\r\n\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\tslug={ featuredImageSizeSlug }\r\n\t\t\t\t\t\t\twidth={ featuredImageSizeWidth }\r\n\t\t\t\t\t\t\theight={ featuredImageSizeHeight }\r\n\t\t\t\t\t\t\timageWidth={ defaultImageWidth }\r\n\t\t\t\t\t\t\timageHeight={ defaultImageHeight }\r\n\t\t\t\t\t\t\timageSizeOptions={ imageSizeOptions }\r\n\t\t\t\t\t\t\timageSizeHelp={ __(\r\n\t\t\t\t\t\t\t\t'Select the size of the source image.'\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\tonChangeImage={ ( value ) =>\r\n\t\t\t\t\t\t\t\tsetAttributes( {\r\n\t\t\t\t\t\t\t\t\tfeaturedImageSizeSlug: value,\r\n\t\t\t\t\t\t\t\t\tfeaturedImageSizeWidth: undefined,\r\n\t\t\t\t\t\t\t\t\tfeaturedImageSizeHeight: undefined,\r\n\t\t\t\t\t\t\t\t} )\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<ToggleGroupControl\r\n\t\t\t\t\t\t\tclassName=\"editor-latest-posts-image-alignment-control\"\r\n\t\t\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\t\tlabel={ __( 'Image alignment' ) }\r\n\t\t\t\t\t\t\tvalue={ featuredImageAlign || 'none' }\r\n\t\t\t\t\t\t\tonChange={ ( value ) =>\r\n\t\t\t\t\t\t\t\tsetAttributes( {\r\n\t\t\t\t\t\t\t\t\tfeaturedImageAlign:\r\n\t\t\t\t\t\t\t\t\t\tvalue !== 'none' ? value : undefined,\r\n\t\t\t\t\t\t\t\t} )\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{ imageAlignmentOptions.map(\r\n\t\t\t\t\t\t\t\t( { value, icon, label } ) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<ToggleGroupControlOptionIcon\r\n\t\t\t\t\t\t\t\t\t\t\tkey={ value }\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={ value }\r\n\t\t\t\t\t\t\t\t\t\t\ticon={ icon }\r\n\t\t\t\t\t\t\t\t\t\t\tlabel={ label }\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t</ToggleGroupControl>\r\n\t\t\t\t\t\t<ToggleControl\r\n\t\t\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\t\t\tlabel={ __( 'Add link to featured image' ) }\r\n\t\t\t\t\t\t\tchecked={ addLinkToFeaturedImage }\r\n\t\t\t\t\t\t\tonChange={ ( value ) =>\r\n\t\t\t\t\t\t\t\tsetAttributes( {\r\n\t\t\t\t\t\t\t\t\taddLinkToFeaturedImage: value,\r\n\t\t\t\t\t\t\t\t} )\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</>\r\n\t\t\t\t) }\r\n\t\t\t</PanelBody>\r\n\r\n\t\t\t<PanelBody title={ __( 'Sorting and filtering' ) }>\r\n\t\t\t\t<QueryControls\r\n\t\t\t\t\t{ ...{ order, orderBy } }\r\n\t\t\t\t\tnumberOfItems={ postsToShow }\r\n\t\t\t\t\tonOrderChange={ ( value ) =>\r\n\t\t\t\t\t\tsetAttributes( { order: value } )\r\n\t\t\t\t\t}\r\n\t\t\t\t\tonOrderByChange={ ( value ) =>\r\n\t\t\t\t\t\tsetAttributes( { orderBy: value } )\r\n\t\t\t\t\t}\r\n\t\t\t\t\tonNumberOfItemsChange={ ( value ) =>\r\n\t\t\t\t\t\tsetAttributes( { postsToShow: value } )\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcategorySuggestions={ categorySuggestions }\r\n\t\t\t\t\tonCategoryChange={ selectCategories }\r\n\t\t\t\t\tselectedCategories={ categories }\r\n\t\t\t\t\tonAuthorChange={ ( value ) =>\r\n\t\t\t\t\t\tsetAttributes( {\r\n\t\t\t\t\t\t\tselectedAuthor:\r\n\t\t\t\t\t\t\t\t'' !== value ? Number( value ) : undefined,\r\n\t\t\t\t\t\t} )\r\n\t\t\t\t\t}\r\n\t\t\t\t\tauthorList={ authorList ?? [] }\r\n\t\t\t\t\tselectedAuthorId={ selectedAuthor }\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t{ postLayout === 'grid' && (\r\n\t\t\t\t\t<RangeControl\r\n\t\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\tlabel={ __( 'Columns' ) }\r\n\t\t\t\t\t\tvalue={ columns }\r\n\t\t\t\t\t\tonChange={ ( value ) =>\r\n\t\t\t\t\t\t\tsetAttributes( { columns: value } )\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tmin={ 2 }\r\n\t\t\t\t\t\tmax={\r\n\t\t\t\t\t\t\t! hasPosts\r\n\t\t\t\t\t\t\t\t? MAX_POSTS_COLUMNS\r\n\t\t\t\t\t\t\t\t: Math.min(\r\n\t\t\t\t\t\t\t\t\t\tMAX_POSTS_COLUMNS,\r\n\t\t\t\t\t\t\t\t\t\tlatestPosts.length\r\n\t\t\t\t\t\t\t\t  )\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t/>\r\n\t\t\t\t) }\r\n\t\t\t</PanelBody>\r\n\t\t</InspectorControls>\r\n\t);\r\n\r\n\tconst blockProps = useBlockProps( {\r\n\t\tclassName: clsx( {\r\n\t\t\t'wp-block-latest-posts__list': true,\r\n\t\t\t'is-grid': postLayout === 'grid',\r\n\t\t\t'has-dates': displayPostDate,\r\n\t\t\t'has-author': displayAuthor,\r\n\t\t\t[ `columns-${ columns }` ]: postLayout === 'grid',\r\n\t\t} ),\r\n\t} );\r\n\r\n\tif ( ! hasPosts ) {\r\n\t\treturn (\r\n\t\t\t<div { ...blockProps }>\r\n\t\t\t\t{ inspectorControls }\r\n\t\t\t\t<Placeholder icon={ pin } label={ __( 'Latest Posts' ) }>\r\n\t\t\t\t\t{ ! Array.isArray( latestPosts ) ? (\r\n\t\t\t\t\t\t<Spinner />\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t__( 'No posts found.' )\r\n\t\t\t\t\t) }\r\n\t\t\t\t</Placeholder>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\t// Removing posts from display should be instant.\r\n\tconst displayPosts =\r\n\t\tlatestPosts.length > postsToShow\r\n\t\t\t? latestPosts.slice( 0, postsToShow )\r\n\t\t\t: latestPosts;\r\n\r\n\tconst layoutControls = [\r\n\t\t{\r\n\t\t\ticon: list,\r\n\t\t\ttitle: _x( 'List view', 'Latest posts block display setting' ),\r\n\t\t\tonClick: () => setAttributes( { postLayout: 'list' } ),\r\n\t\t\tisActive: postLayout === 'list',\r\n\t\t},\r\n\t\t{\r\n\t\t\ticon: grid,\r\n\t\t\ttitle: _x( 'Grid view', 'Latest posts block display setting' ),\r\n\t\t\tonClick: () => setAttributes( { postLayout: 'grid' } ),\r\n\t\t\tisActive: postLayout === 'grid',\r\n\t\t},\r\n\t];\r\n\r\n\tconst dateFormat = getSettings().formats.date;\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ inspectorControls }\r\n\t\t\t<BlockControls>\r\n\t\t\t\t<ToolbarGroup controls={ layoutControls } />\r\n\t\t\t</BlockControls>\r\n\t\t\t<ul { ...blockProps }>\r\n\t\t\t\t{ displayPosts.map( ( post ) => {\r\n\t\t\t\t\tconst titleTrimmed = post.title.rendered.trim();\r\n\t\t\t\t\tlet excerpt = post.excerpt.rendered;\r\n\t\t\t\t\tconst currentAuthor = authorList?.find(\r\n\t\t\t\t\t\t( author ) => author.id === post.author\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tconst excerptElement = document.createElement( 'div' );\r\n\t\t\t\t\texcerptElement.innerHTML = excerpt;\r\n\r\n\t\t\t\t\texcerpt =\r\n\t\t\t\t\t\texcerptElement.textContent ||\r\n\t\t\t\t\t\texcerptElement.innerText ||\r\n\t\t\t\t\t\t'';\r\n\r\n\t\t\t\t\tconst { url: imageSourceUrl, alt: featuredImageAlt } =\r\n\t\t\t\t\t\tgetFeaturedImageDetails( post, featuredImageSizeSlug );\r\n\t\t\t\t\tconst imageClasses = clsx( {\r\n\t\t\t\t\t\t'wp-block-latest-posts__featured-image': true,\r\n\t\t\t\t\t\t[ `align${ featuredImageAlign }` ]:\r\n\t\t\t\t\t\t\t!! featuredImageAlign,\r\n\t\t\t\t\t} );\r\n\t\t\t\t\tconst renderFeaturedImage =\r\n\t\t\t\t\t\tdisplayFeaturedImage && imageSourceUrl;\r\n\t\t\t\t\tconst featuredImage = renderFeaturedImage && (\r\n\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\tsrc={ imageSourceUrl }\r\n\t\t\t\t\t\t\talt={ featuredImageAlt }\r\n\t\t\t\t\t\t\tstyle={ {\r\n\t\t\t\t\t\t\t\tmaxWidth: featuredImageSizeWidth,\r\n\t\t\t\t\t\t\t\tmaxHeight: featuredImageSizeHeight,\r\n\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tconst needsReadMore =\r\n\t\t\t\t\t\texcerptLength < excerpt.trim().split( ' ' ).length &&\r\n\t\t\t\t\t\tpost.excerpt.raw === '';\r\n\r\n\t\t\t\t\tconst postExcerpt = needsReadMore ? (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t{ excerpt\r\n\t\t\t\t\t\t\t\t.trim()\r\n\t\t\t\t\t\t\t\t.split( ' ', excerptLength )\r\n\t\t\t\t\t\t\t\t.join( ' ' ) }\r\n\t\t\t\t\t\t\t{ createInterpolateElement(\r\n\t\t\t\t\t\t\t\tsprintf(\r\n\t\t\t\t\t\t\t\t\t/* translators: 1: Hidden accessibility text: Post title */\r\n\t\t\t\t\t\t\t\t\t__(\r\n\t\t\t\t\t\t\t\t\t\t'… <a>Read more<span>: %1$s</span></a>'\r\n\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\ttitleTrimmed || __( '(no title)' )\r\n\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\ta: (\r\n\t\t\t\t\t\t\t\t\t\t// eslint-disable-next-line jsx-a11y/anchor-has-content\r\n\t\t\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"wp-block-latest-posts__read-more\"\r\n\t\t\t\t\t\t\t\t\t\t\thref={ post.link }\r\n\t\t\t\t\t\t\t\t\t\t\trel=\"noopener noreferrer\"\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={\r\n\t\t\t\t\t\t\t\t\t\t\t\tshowRedirectionPreventedNotice\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\tspan: (\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"screen-reader-text\" />\r\n\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\texcerpt\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<li key={ post.id }>\r\n\t\t\t\t\t\t\t{ renderFeaturedImage && (\r\n\t\t\t\t\t\t\t\t<div className={ imageClasses }>\r\n\t\t\t\t\t\t\t\t\t{ addLinkToFeaturedImage ? (\r\n\t\t\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\t\t\thref={ post.link }\r\n\t\t\t\t\t\t\t\t\t\t\trel=\"noreferrer noopener\"\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={\r\n\t\t\t\t\t\t\t\t\t\t\t\tshowRedirectionPreventedNotice\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{ featuredImage }\r\n\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\tfeaturedImage\r\n\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\tclassName=\"wp-block-latest-posts__post-title\"\r\n\t\t\t\t\t\t\t\thref={ post.link }\r\n\t\t\t\t\t\t\t\trel=\"noreferrer noopener\"\r\n\t\t\t\t\t\t\t\tdangerouslySetInnerHTML={\r\n\t\t\t\t\t\t\t\t\t!! titleTrimmed\r\n\t\t\t\t\t\t\t\t\t\t? {\r\n\t\t\t\t\t\t\t\t\t\t\t\t__html: titleTrimmed,\r\n\t\t\t\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t\t\t\t: undefined\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tonClick={ showRedirectionPreventedNotice }\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{ ! titleTrimmed ? __( '(no title)' ) : null }\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t{ displayAuthor && currentAuthor && (\r\n\t\t\t\t\t\t\t\t<div className=\"wp-block-latest-posts__post-author\">\r\n\t\t\t\t\t\t\t\t\t{ sprintf(\r\n\t\t\t\t\t\t\t\t\t\t/* translators: byline. %s: current author. */\r\n\t\t\t\t\t\t\t\t\t\t__( 'by %s' ),\r\n\t\t\t\t\t\t\t\t\t\tcurrentAuthor.name\r\n\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t{ displayPostDate && post.date_gmt && (\r\n\t\t\t\t\t\t\t\t<time\r\n\t\t\t\t\t\t\t\t\tdateTime={ format( 'c', post.date_gmt ) }\r\n\t\t\t\t\t\t\t\t\tclassName=\"wp-block-latest-posts__post-date\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{ dateI18n( dateFormat, post.date_gmt ) }\r\n\t\t\t\t\t\t\t\t</time>\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t{ displayPostContent &&\r\n\t\t\t\t\t\t\t\tdisplayPostContentRadio === 'excerpt' && (\r\n\t\t\t\t\t\t\t\t\t<div className=\"wp-block-latest-posts__post-excerpt\">\r\n\t\t\t\t\t\t\t\t\t\t{ postExcerpt }\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t{ displayPostContent &&\r\n\t\t\t\t\t\t\t\tdisplayPostContentRadio === 'full_post' && (\r\n\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"wp-block-latest-posts__post-full-content\"\r\n\t\t\t\t\t\t\t\t\t\tdangerouslySetInnerHTML={ {\r\n\t\t\t\t\t\t\t\t\t\t\t__html: post.content.raw.trim(),\r\n\t\t\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t);\r\n\t\t\t\t} ) }\r\n\t\t\t</ul>\r\n\t\t</>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}