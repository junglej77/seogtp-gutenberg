{"version":3,"names":["View","RichText","useBlockProps","useInnerBlocksProps","BlockControls","store","blockEditorStore","__","usePreferredColorSchemeStyle","useSelect","useState","useCallback","useRef","useMerge","useEnter","IndentUI","styles","ListStyleType","jsx","_jsx","jsxs","_jsxs","OPACITY","ListItemEdit","attributes","setAttributes","clientId","style","mergeBlocks","contentWidth","setContentWidth","placeholder","content","blockIndex","hasInnerBlocks","indentationLevel","numberOfListItems","ordered","reversed","start","select","getBlockAttributes","getBlockCount","getBlockIndex","getBlockParentsByBlockName","getBlockRootClientId","currentIdentationLevel","length","currentBlockIndex","blockWithInnerBlocks","rootClientId","blockAttributes","totalListItems","isOrdered","isReversed","startValue","blockProps","innerBlocksProps","renderAppender","defaultPlaceholderFromScheme","currentTextColor","color","baseColors","text","defaultPlaceholderTextColor","defaultPlaceholderTextColorWithOpacity","styleWithPlaceholderOpacity","placeholderColor","preventDefault","onEnter","onMerge","onLayout","nativeEvent","prevState","width","layout","Math","floor","children","__unstableUseSplitSelection","identifier","tagName","onChange","nextContent","value","placeholderTextColor","deleteEnter","containerWidth","group"],"sources":["@wordpress/block-library/src/list-item/edit.native.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport { View } from 'react-native';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tRichText,\r\n\tuseBlockProps,\r\n\tuseInnerBlocksProps,\r\n\tBlockControls,\r\n\tstore as blockEditorStore,\r\n} from '@wordpress/block-editor';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { usePreferredColorSchemeStyle } from '@wordpress/compose';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { useState, useCallback, useRef } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { useMerge, useEnter } from './hooks';\r\nimport { IndentUI } from './edit.js';\r\nimport styles from './style.scss';\r\nimport ListStyleType from './list-style-type';\r\n\r\nconst OPACITY = '9e';\r\n\r\nexport default function ListItemEdit( {\r\n\tattributes,\r\n\tsetAttributes,\r\n\tclientId,\r\n\tstyle,\r\n\tmergeBlocks,\r\n} ) {\r\n\tconst [ contentWidth, setContentWidth ] = useState();\r\n\tconst { placeholder, content } = attributes;\r\n\tconst {\r\n\t\tblockIndex,\r\n\t\thasInnerBlocks,\r\n\t\tindentationLevel,\r\n\t\tnumberOfListItems,\r\n\t\tordered,\r\n\t\treversed,\r\n\t\tstart,\r\n\t} = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst {\r\n\t\t\t\tgetBlockAttributes,\r\n\t\t\t\tgetBlockCount,\r\n\t\t\t\tgetBlockIndex,\r\n\t\t\t\tgetBlockParentsByBlockName,\r\n\t\t\t\tgetBlockRootClientId,\r\n\t\t\t} = select( blockEditorStore );\r\n\t\t\tconst currentIdentationLevel = getBlockParentsByBlockName(\r\n\t\t\t\tclientId,\r\n\t\t\t\t'core/list-item',\r\n\t\t\t\ttrue\r\n\t\t\t).length;\r\n\t\t\tconst currentBlockIndex = getBlockIndex( clientId );\r\n\t\t\tconst blockWithInnerBlocks = getBlockCount( clientId ) > 0;\r\n\t\t\tconst rootClientId = getBlockRootClientId( clientId );\r\n\t\t\tconst blockAttributes = getBlockAttributes( rootClientId );\r\n\t\t\tconst totalListItems = getBlockCount( rootClientId );\r\n\t\t\tconst {\r\n\t\t\t\tordered: isOrdered,\r\n\t\t\t\treversed: isReversed,\r\n\t\t\t\tstart: startValue,\r\n\t\t\t} = blockAttributes || {};\r\n\r\n\t\t\treturn {\r\n\t\t\t\tblockIndex: currentBlockIndex,\r\n\t\t\t\thasInnerBlocks: blockWithInnerBlocks,\r\n\t\t\t\tindentationLevel: currentIdentationLevel,\r\n\t\t\t\tnumberOfListItems: totalListItems,\r\n\t\t\t\tordered: isOrdered,\r\n\t\t\t\treversed: isReversed,\r\n\t\t\t\tstart: startValue,\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ clientId ]\r\n\t);\r\n\r\n\tconst blockProps = useBlockProps( {\r\n\t\t...( hasInnerBlocks && styles[ 'wp-block-list-item__nested-blocks' ] ),\r\n\t} );\r\n\r\n\tconst innerBlocksProps = useInnerBlocksProps( blockProps, {\r\n\t\trenderAppender: false,\r\n\t} );\r\n\r\n\t// Set default placeholder text color from light/dark scheme or base colors\r\n\tconst defaultPlaceholderFromScheme = usePreferredColorSchemeStyle(\r\n\t\tstyles[ 'wp-block-list-item__list-item-placeholder' ],\r\n\t\tstyles[ 'wp-block-list-item__list-item-placeholder--dark' ]\r\n\t);\r\n\r\n\tconst currentTextColor = style?.color || style?.baseColors?.color?.text;\r\n\r\n\tconst defaultPlaceholderTextColor = currentTextColor\r\n\t\t? currentTextColor\r\n\t\t: defaultPlaceholderFromScheme?.color;\r\n\r\n\t// Add hex opacity to default placeholder text color and style object\r\n\tconst defaultPlaceholderTextColorWithOpacity =\r\n\t\tdefaultPlaceholderTextColor + OPACITY;\r\n\r\n\tconst styleWithPlaceholderOpacity = {\r\n\t\t...style,\r\n\t\t...( style?.color && {\r\n\t\t\tplaceholderColor: style.color + OPACITY,\r\n\t\t} ),\r\n\t};\r\n\r\n\tconst preventDefault = useRef( false );\r\n\tconst { onEnter } = useEnter( { content, clientId }, preventDefault );\r\n\tconst onMerge = useMerge( clientId, mergeBlocks );\r\n\tconst onLayout = useCallback( ( { nativeEvent } ) => {\r\n\t\tsetContentWidth( ( prevState ) => {\r\n\t\t\tconst { width } = nativeEvent.layout;\r\n\r\n\t\t\tif ( ! prevState || prevState.width !== width ) {\r\n\t\t\t\treturn Math.floor( width );\r\n\t\t\t}\r\n\t\t\treturn prevState;\r\n\t\t} );\r\n\t}, [] );\r\n\r\n\treturn (\r\n\t\t<View style={ styles[ 'wp-block-list-item__list-item-parent' ] }>\r\n\t\t\t<View style={ styles[ 'wp-block-list-item__list-item' ] }>\r\n\t\t\t\t<View style={ styles[ 'wp-block-list-item__list-item-icon' ] }>\r\n\t\t\t\t\t<ListStyleType\r\n\t\t\t\t\t\tblockIndex={ blockIndex }\r\n\t\t\t\t\t\tindentationLevel={ indentationLevel }\r\n\t\t\t\t\t\tnumberOfListItems={ numberOfListItems }\r\n\t\t\t\t\t\tordered={ ordered }\r\n\t\t\t\t\t\treversed={ reversed }\r\n\t\t\t\t\t\tstart={ start }\r\n\t\t\t\t\t\tstyle={ style }\r\n\t\t\t\t\t/>\r\n\t\t\t\t</View>\r\n\t\t\t\t<View\r\n\t\t\t\t\tstyle={ styles[ 'wp-block-list-item__list-item-content' ] }\r\n\t\t\t\t\tonLayout={ onLayout }\r\n\t\t\t\t>\r\n\t\t\t\t\t<RichText\r\n\t\t\t\t\t\t__unstableUseSplitSelection\r\n\t\t\t\t\t\tidentifier=\"content\"\r\n\t\t\t\t\t\ttagName=\"p\"\r\n\t\t\t\t\t\tonChange={ ( nextContent ) =>\r\n\t\t\t\t\t\t\tsetAttributes( { content: nextContent } )\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvalue={ content }\r\n\t\t\t\t\t\tplaceholder={ placeholder || __( 'List' ) }\r\n\t\t\t\t\t\tplaceholderTextColor={\r\n\t\t\t\t\t\t\tdefaultPlaceholderTextColorWithOpacity\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonMerge={ onMerge }\r\n\t\t\t\t\t\tonEnter={ onEnter }\r\n\t\t\t\t\t\tstyle={ styleWithPlaceholderOpacity }\r\n\t\t\t\t\t\tdeleteEnter\r\n\t\t\t\t\t\tcontainerWidth={ contentWidth }\r\n\t\t\t\t\t/>\r\n\t\t\t\t</View>\r\n\t\t\t</View>\r\n\t\t\t<View { ...innerBlocksProps }></View>\r\n\t\t\t<BlockControls group=\"block\">\r\n\t\t\t\t<IndentUI clientId={ clientId } />\r\n\t\t\t</BlockControls>\r\n\t\t</View>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}