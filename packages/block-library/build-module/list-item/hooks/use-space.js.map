{"version":3,"names":["useRefEffect","SPACE","TAB","store","blockEditorStore","useSelect","useIndentListItem","useOutdentListItem","useSpace","clientId","getSelectionStart","getSelectionEnd","getBlockIndex","indentListItem","outdentListItem","element","onKeyDown","event","keyCode","shiftKey","altKey","metaKey","ctrlKey","defaultPrevented","selectionStart","selectionEnd","offset","preventDefault","addEventListener","removeEventListener"],"sources":["@wordpress/block-library/src/list-item/hooks/use-space.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useRefEffect } from '@wordpress/compose';\r\nimport { SPACE, TAB } from '@wordpress/keycodes';\r\nimport { store as blockEditorStore } from '@wordpress/block-editor';\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport useIndentListItem from './use-indent-list-item';\r\nimport useOutdentListItem from './use-outdent-list-item';\r\n\r\nexport default function useSpace( clientId ) {\r\n\tconst { getSelectionStart, getSelectionEnd, getBlockIndex } =\r\n\t\tuseSelect( blockEditorStore );\r\n\tconst indentListItem = useIndentListItem( clientId );\r\n\tconst outdentListItem = useOutdentListItem();\r\n\r\n\treturn useRefEffect(\r\n\t\t( element ) => {\r\n\t\t\tfunction onKeyDown( event ) {\r\n\t\t\t\tconst { keyCode, shiftKey, altKey, metaKey, ctrlKey } = event;\r\n\r\n\t\t\t\tif (\r\n\t\t\t\t\tevent.defaultPrevented ||\r\n\t\t\t\t\t( keyCode !== SPACE && keyCode !== TAB ) ||\r\n\t\t\t\t\t// Only override when no modifiers are pressed.\r\n\t\t\t\t\taltKey ||\r\n\t\t\t\t\tmetaKey ||\r\n\t\t\t\t\tctrlKey\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst selectionStart = getSelectionStart();\r\n\t\t\t\tconst selectionEnd = getSelectionEnd();\r\n\t\t\t\tif (\r\n\t\t\t\t\tselectionStart.offset === 0 &&\r\n\t\t\t\t\tselectionEnd.offset === 0\r\n\t\t\t\t) {\r\n\t\t\t\t\tif ( shiftKey ) {\r\n\t\t\t\t\t\t// Note that backspace behaviour in defined in onMerge.\r\n\t\t\t\t\t\tif ( keyCode === TAB ) {\r\n\t\t\t\t\t\t\tif ( outdentListItem() ) {\r\n\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if ( getBlockIndex( clientId ) !== 0 ) {\r\n\t\t\t\t\t\tif ( indentListItem() ) {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\telement.addEventListener( 'keydown', onKeyDown );\r\n\t\t\treturn () => {\r\n\t\t\t\telement.removeEventListener( 'keydown', onKeyDown );\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ clientId, indentListItem ]\r\n\t);\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,YAAY,QAAQ,oBAAoB;AACjD,SAASC,KAAK,EAAEC,GAAG,QAAQ,qBAAqB;AAChD,SAASC,KAAK,IAAIC,gBAAgB,QAAQ,yBAAyB;AACnE,SAASC,SAAS,QAAQ,iBAAiB;;AAE3C;AACA;AACA;AACA,OAAOC,iBAAiB,MAAM,wBAAwB;AACtD,OAAOC,kBAAkB,MAAM,yBAAyB;AAExD,eAAe,SAASC,QAAQA,CAAEC,QAAQ,EAAG;EAC5C,MAAM;IAAEC,iBAAiB;IAAEC,eAAe;IAAEC;EAAc,CAAC,GAC1DP,SAAS,CAAED,gBAAiB,CAAC;EAC9B,MAAMS,cAAc,GAAGP,iBAAiB,CAAEG,QAAS,CAAC;EACpD,MAAMK,eAAe,GAAGP,kBAAkB,CAAC,CAAC;EAE5C,OAAOP,YAAY,CAChBe,OAAO,IAAM;IACd,SAASC,SAASA,CAAEC,KAAK,EAAG;MAC3B,MAAM;QAAEC,OAAO;QAAEC,QAAQ;QAAEC,MAAM;QAAEC,OAAO;QAAEC;MAAQ,CAAC,GAAGL,KAAK;MAE7D,IACCA,KAAK,CAACM,gBAAgB,IACpBL,OAAO,KAAKjB,KAAK,IAAIiB,OAAO,KAAKhB,GAAK;MACxC;MACAkB,MAAM,IACNC,OAAO,IACPC,OAAO,EACN;QACD;MACD;MAEA,MAAME,cAAc,GAAGd,iBAAiB,CAAC,CAAC;MAC1C,MAAMe,YAAY,GAAGd,eAAe,CAAC,CAAC;MACtC,IACCa,cAAc,CAACE,MAAM,KAAK,CAAC,IAC3BD,YAAY,CAACC,MAAM,KAAK,CAAC,EACxB;QACD,IAAKP,QAAQ,EAAG;UACf;UACA,IAAKD,OAAO,KAAKhB,GAAG,EAAG;YACtB,IAAKY,eAAe,CAAC,CAAC,EAAG;cACxBG,KAAK,CAACU,cAAc,CAAC,CAAC;YACvB;UACD;QACD,CAAC,MAAM,IAAKf,aAAa,CAAEH,QAAS,CAAC,KAAK,CAAC,EAAG;UAC7C,IAAKI,cAAc,CAAC,CAAC,EAAG;YACvBI,KAAK,CAACU,cAAc,CAAC,CAAC;UACvB;QACD;MACD;IACD;IAEAZ,OAAO,CAACa,gBAAgB,CAAE,SAAS,EAAEZ,SAAU,CAAC;IAChD,OAAO,MAAM;MACZD,OAAO,CAACc,mBAAmB,CAAE,SAAS,EAAEb,SAAU,CAAC;IACpD,CAAC;EACF,CAAC,EACD,CAAEP,QAAQ,EAAEI,cAAc,CAC3B,CAAC;AACF","ignoreList":[]}