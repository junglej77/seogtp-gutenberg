{"version":3,"names":["BlockControls","useBlockProps","useInnerBlocksProps","store","blockEditorStore","ToolbarButton","useDispatch","useSelect","useRegistry","isRTL","__","formatListBullets","formatListBulletsRTL","formatListNumbered","formatListNumberedRTL","formatOutdent","formatOutdentRTL","createBlock","useCallback","useEffect","Platform","deprecated","OrderedListSettings","migrateToListV2","TagName","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","DEFAULT_BLOCK","name","TEMPLATE","NATIVE_MARGIN_SPACING","useMigrateOnLoad","attributes","clientId","registry","updateBlockAttributes","replaceInnerBlocks","values","newAttributes","newInnerBlocks","since","version","alternative","batch","useOutdentList","replaceBlocks","selectionChange","getBlockRootClientId","getBlockAttributes","getBlock","parentBlockId","parentBlockAttributes","newParentBlock","innerBlocks","length","IndentUI","outdentList","canOutdent","select","getBlockName","children","icon","title","description","disabled","onClick","Edit","setAttributes","style","ordered","type","reversed","start","blockProps","isNative","listStyleType","undefined","innerBlocksProps","defaultBlock","directInsert","template","templateLock","templateInsertUpdatesSelection","marginVertical","marginHorizontal","renderAppender","__experimentalCaptureToolbars","controls","group","isActive"],"sources":["@wordpress/block-library/src/list/edit.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tBlockControls,\r\n\tuseBlockProps,\r\n\tuseInnerBlocksProps,\r\n\tstore as blockEditorStore,\r\n} from '@wordpress/block-editor';\r\nimport { ToolbarButton } from '@wordpress/components';\r\nimport { useDispatch, useSelect, useRegistry } from '@wordpress/data';\r\nimport { isRTL, __ } from '@wordpress/i18n';\r\nimport {\r\n\tformatListBullets,\r\n\tformatListBulletsRTL,\r\n\tformatListNumbered,\r\n\tformatListNumberedRTL,\r\n\tformatOutdent,\r\n\tformatOutdentRTL,\r\n} from '@wordpress/icons';\r\nimport { createBlock } from '@wordpress/blocks';\r\nimport { useCallback, useEffect, Platform } from '@wordpress/element';\r\nimport deprecated from '@wordpress/deprecated';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport OrderedListSettings from './ordered-list-settings';\r\nimport { migrateToListV2 } from './utils';\r\nimport TagName from './tag-name';\r\n\r\nconst DEFAULT_BLOCK = {\r\n\tname: 'core/list-item',\r\n};\r\nconst TEMPLATE = [ [ 'core/list-item' ] ];\r\nconst NATIVE_MARGIN_SPACING = 8;\r\n\r\n/**\r\n * At the moment, deprecations don't handle create blocks from attributes\r\n * (like when using CPT templates). For this reason, this hook is necessary\r\n * to avoid breaking templates using the old list block format.\r\n *\r\n * @param {Object} attributes Block attributes.\r\n * @param {string} clientId   Block client ID.\r\n */\r\nfunction useMigrateOnLoad( attributes, clientId ) {\r\n\tconst registry = useRegistry();\r\n\tconst { updateBlockAttributes, replaceInnerBlocks } =\r\n\t\tuseDispatch( blockEditorStore );\r\n\r\n\tuseEffect( () => {\r\n\t\t// As soon as the block is loaded, migrate it to the new version.\r\n\r\n\t\tif ( ! attributes.values ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst [ newAttributes, newInnerBlocks ] = migrateToListV2( attributes );\r\n\r\n\t\tdeprecated( 'Value attribute on the list block', {\r\n\t\t\tsince: '6.0',\r\n\t\t\tversion: '6.5',\r\n\t\t\talternative: 'inner blocks',\r\n\t\t} );\r\n\r\n\t\tregistry.batch( () => {\r\n\t\t\tupdateBlockAttributes( clientId, newAttributes );\r\n\t\t\treplaceInnerBlocks( clientId, newInnerBlocks );\r\n\t\t} );\r\n\t}, [ attributes.values ] );\r\n}\r\n\r\nfunction useOutdentList( clientId ) {\r\n\tconst { replaceBlocks, selectionChange } = useDispatch( blockEditorStore );\r\n\tconst { getBlockRootClientId, getBlockAttributes, getBlock } =\r\n\t\tuseSelect( blockEditorStore );\r\n\r\n\treturn useCallback( () => {\r\n\t\tconst parentBlockId = getBlockRootClientId( clientId );\r\n\t\tconst parentBlockAttributes = getBlockAttributes( parentBlockId );\r\n\t\t// Create a new parent block without the inner blocks.\r\n\t\tconst newParentBlock = createBlock(\r\n\t\t\t'core/list-item',\r\n\t\t\tparentBlockAttributes\r\n\t\t);\r\n\t\tconst { innerBlocks } = getBlock( clientId );\r\n\t\t// Replace the parent block with a new parent block without inner blocks,\r\n\t\t// and make the inner blocks siblings of the parent.\r\n\t\treplaceBlocks( [ parentBlockId ], [ newParentBlock, ...innerBlocks ] );\r\n\t\t// Select the last child of the list being outdent.\r\n\t\tselectionChange( innerBlocks[ innerBlocks.length - 1 ].clientId );\r\n\t}, [ clientId ] );\r\n}\r\n\r\nfunction IndentUI( { clientId } ) {\r\n\tconst outdentList = useOutdentList( clientId );\r\n\tconst canOutdent = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst { getBlockRootClientId, getBlockName } =\r\n\t\t\t\tselect( blockEditorStore );\r\n\t\t\treturn (\r\n\t\t\t\tgetBlockName( getBlockRootClientId( clientId ) ) ===\r\n\t\t\t\t'core/list-item'\r\n\t\t\t);\r\n\t\t},\r\n\t\t[ clientId ]\r\n\t);\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<ToolbarButton\r\n\t\t\t\ticon={ isRTL() ? formatOutdentRTL : formatOutdent }\r\n\t\t\t\ttitle={ __( 'Outdent' ) }\r\n\t\t\t\tdescription={ __( 'Outdent list item' ) }\r\n\t\t\t\tdisabled={ ! canOutdent }\r\n\t\t\t\tonClick={ outdentList }\r\n\t\t\t/>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default function Edit( { attributes, setAttributes, clientId, style } ) {\r\n\tconst { ordered, type, reversed, start } = attributes;\r\n\tconst blockProps = useBlockProps( {\r\n\t\tstyle: {\r\n\t\t\t...( Platform.isNative && style ),\r\n\t\t\tlistStyleType: ordered && type !== 'decimal' ? type : undefined,\r\n\t\t},\r\n\t} );\r\n\r\n\tconst innerBlocksProps = useInnerBlocksProps( blockProps, {\r\n\t\tdefaultBlock: DEFAULT_BLOCK,\r\n\t\tdirectInsert: true,\r\n\t\ttemplate: TEMPLATE,\r\n\t\ttemplateLock: false,\r\n\t\ttemplateInsertUpdatesSelection: true,\r\n\t\t...( Platform.isNative && {\r\n\t\t\tmarginVertical: NATIVE_MARGIN_SPACING,\r\n\t\t\tmarginHorizontal: NATIVE_MARGIN_SPACING,\r\n\t\t\trenderAppender: false,\r\n\t\t} ),\r\n\t\t__experimentalCaptureToolbars: true,\r\n\t} );\r\n\tuseMigrateOnLoad( attributes, clientId );\r\n\r\n\tconst controls = (\r\n\t\t<BlockControls group=\"block\">\r\n\t\t\t<ToolbarButton\r\n\t\t\t\ticon={ isRTL() ? formatListBulletsRTL : formatListBullets }\r\n\t\t\t\ttitle={ __( 'Unordered' ) }\r\n\t\t\t\tdescription={ __( 'Convert to unordered list' ) }\r\n\t\t\t\tisActive={ ordered === false }\r\n\t\t\t\tonClick={ () => {\r\n\t\t\t\t\tsetAttributes( { ordered: false } );\r\n\t\t\t\t} }\r\n\t\t\t/>\r\n\t\t\t<ToolbarButton\r\n\t\t\t\ticon={ isRTL() ? formatListNumberedRTL : formatListNumbered }\r\n\t\t\t\ttitle={ __( 'Ordered' ) }\r\n\t\t\t\tdescription={ __( 'Convert to ordered list' ) }\r\n\t\t\t\tisActive={ ordered === true }\r\n\t\t\t\tonClick={ () => {\r\n\t\t\t\t\tsetAttributes( { ordered: true } );\r\n\t\t\t\t} }\r\n\t\t\t/>\r\n\t\t\t<IndentUI clientId={ clientId } />\r\n\t\t</BlockControls>\r\n\t);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<TagName\r\n\t\t\t\tordered={ ordered }\r\n\t\t\t\treversed={ reversed }\r\n\t\t\t\tstart={ start }\r\n\t\t\t\t{ ...innerBlocksProps }\r\n\t\t\t/>\r\n\t\t\t{ controls }\r\n\t\t\t{ ordered && (\r\n\t\t\t\t<OrderedListSettings\r\n\t\t\t\t\t{ ...{\r\n\t\t\t\t\t\tsetAttributes,\r\n\t\t\t\t\t\treversed,\r\n\t\t\t\t\t\tstart,\r\n\t\t\t\t\t\ttype,\r\n\t\t\t\t\t} }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t</>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}