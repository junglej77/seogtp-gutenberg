{"version":3,"names":["View","__","BlockControls","BlockVerticalAlignmentToolbar","InnerBlocks","InspectorControls","withColors","MEDIA_TYPE_IMAGE","MEDIA_TYPE_VIDEO","store","blockEditorStore","Component","Button","ToolbarGroup","PanelBody","ToggleControl","withSelect","compose","pullLeft","pullRight","replace","WIDTH_CONSTRAINT_PERCENTAGE","MediaContainer","styles","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","TEMPLATE","BREAKPOINTS","mobile","applyWidthConstraints","width","Math","max","min","MediaTextEdit","constructor","arguments","onSelectMedia","bind","onMediaUpdate","onMediaThumbnailUpdate","onWidthChange","commitWidthChange","onLayoutChange","onMediaSelected","onReplaceMedia","onSetOpenPickerRef","onSetImageFill","state","mediaWidth","containerWidth","isMediaSelected","getDerivedStateFromProps","props","isSelected","isAncestorSelected","media","setAttributes","mediaType","src","media_type","type","sizes","large","url","media_details","source_url","mediaAlt","alt","mediaId","id","mediaUrl","imageFill","undefined","focalPoint","setState","nativeEvent","layout","openPickerRef","openPicker","attributes","getControls","children","title","label","checked","onChange","renderMediaArea","shouldStack","mediaPosition","verticalAlignment","mediaAreaWidth","mediaAreaPadding","aligmentStyles","onFocus","render","backgroundColor","isRTL","style","blockWidth","isStackedOnMobile","isMobile","temporaryMediaWidth","widthString","innerBlockWidth","innerBlockWidthString","hasMedia","innerBlockContainerStyle","innerBlock","innerBlockStackMediaLeft","innerBlockStackMediaRight","color","innerBlockPaddings","containerStyles","paddingBottom","mediaContainerStyle","flex","mediaStackLeft","mediaStackRight","mediaLeft","mediaRight","toolbarControls","icon","isActive","onClick","onVerticalAlignmentChange","alignment","controls","value","onLayout","template","select","clientId","getSelectedBlockClientId","getBlockParents","getSettings","parents","selectedBlockClientId","includes"],"sources":["@wordpress/block-library/src/media-text/edit.native.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport { View } from 'react-native';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport {\r\n\tBlockControls,\r\n\tBlockVerticalAlignmentToolbar,\r\n\tInnerBlocks,\r\n\tInspectorControls,\r\n\twithColors,\r\n\tMEDIA_TYPE_IMAGE,\r\n\tMEDIA_TYPE_VIDEO,\r\n\tstore as blockEditorStore,\r\n} from '@wordpress/block-editor';\r\nimport { Component } from '@wordpress/element';\r\nimport {\r\n\tButton,\r\n\tToolbarGroup,\r\n\tPanelBody,\r\n\tToggleControl,\r\n} from '@wordpress/components';\r\nimport { withSelect } from '@wordpress/data';\r\nimport { compose } from '@wordpress/compose';\r\nimport { pullLeft, pullRight, replace } from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { WIDTH_CONSTRAINT_PERCENTAGE } from './constants';\r\nimport MediaContainer from './media-container';\r\nimport styles from './style.scss';\r\n\r\nconst TEMPLATE = [ [ 'core/paragraph' ] ];\r\n// this limits the resize to a safe zone to avoid making broken layouts\r\nconst BREAKPOINTS = {\r\n\tmobile: 480,\r\n};\r\nconst applyWidthConstraints = ( width ) =>\r\n\tMath.max(\r\n\t\tWIDTH_CONSTRAINT_PERCENTAGE,\r\n\t\tMath.min( width, 100 - WIDTH_CONSTRAINT_PERCENTAGE )\r\n\t);\r\n\r\nclass MediaTextEdit extends Component {\r\n\tconstructor() {\r\n\t\tsuper( ...arguments );\r\n\r\n\t\tthis.onSelectMedia = this.onSelectMedia.bind( this );\r\n\t\tthis.onMediaUpdate = this.onMediaUpdate.bind( this );\r\n\t\tthis.onMediaThumbnailUpdate = this.onMediaThumbnailUpdate.bind( this );\r\n\t\tthis.onWidthChange = this.onWidthChange.bind( this );\r\n\t\tthis.commitWidthChange = this.commitWidthChange.bind( this );\r\n\t\tthis.onLayoutChange = this.onLayoutChange.bind( this );\r\n\t\tthis.onMediaSelected = this.onMediaSelected.bind( this );\r\n\t\tthis.onReplaceMedia = this.onReplaceMedia.bind( this );\r\n\t\tthis.onSetOpenPickerRef = this.onSetOpenPickerRef.bind( this );\r\n\t\tthis.onSetImageFill = this.onSetImageFill.bind( this );\r\n\r\n\t\tthis.state = {\r\n\t\t\tmediaWidth: null,\r\n\t\t\tcontainerWidth: 0,\r\n\t\t\tisMediaSelected: false,\r\n\t\t};\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps( props, state ) {\r\n\t\treturn {\r\n\t\t\tisMediaSelected:\r\n\t\t\t\tstate.isMediaSelected &&\r\n\t\t\t\tprops.isSelected &&\r\n\t\t\t\t! props.isAncestorSelected,\r\n\t\t};\r\n\t}\r\n\r\n\tonSelectMedia( media ) {\r\n\t\tconst { setAttributes } = this.props;\r\n\r\n\t\tlet mediaType;\r\n\t\tlet src;\r\n\t\t// For media selections originated from a file upload.\r\n\t\tif ( media.media_type ) {\r\n\t\t\tif ( media.media_type === 'image' ) {\r\n\t\t\t\tmediaType = 'image';\r\n\t\t\t} else {\r\n\t\t\t\t// only images and videos are accepted so if the media_type is not an image we can assume it is a video.\r\n\t\t\t\t// video contain the media type of 'file' in the object returned from the rest api.\r\n\t\t\t\tmediaType = 'video';\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t// For media selections originated from existing files in the media library.\r\n\t\t\tmediaType = media.type;\r\n\t\t}\r\n\r\n\t\tif ( mediaType === 'image' && media.sizes ) {\r\n\t\t\t// Try the \"large\" size URL, falling back to the \"full\" size URL below.\r\n\t\t\tsrc =\r\n\t\t\t\tmedia.sizes.large?.url ||\r\n\t\t\t\tmedia?.media_details?.sizes?.large?.source_url;\r\n\t\t}\r\n\r\n\t\tsetAttributes( {\r\n\t\t\tmediaAlt: media.alt,\r\n\t\t\tmediaId: media.id,\r\n\t\t\tmediaType,\r\n\t\t\tmediaUrl: src || media.url,\r\n\t\t\timageFill: undefined,\r\n\t\t\tfocalPoint: undefined,\r\n\t\t} );\r\n\t}\r\n\r\n\tonMediaUpdate( media ) {\r\n\t\tconst { setAttributes } = this.props;\r\n\r\n\t\tsetAttributes( {\r\n\t\t\tmediaId: media.id,\r\n\t\t\tmediaUrl: media.url,\r\n\t\t} );\r\n\t}\r\n\r\n\tonMediaThumbnailUpdate( mediaUrl ) {\r\n\t\tconst { setAttributes } = this.props;\r\n\r\n\t\tsetAttributes( {\r\n\t\t\tmediaUrl,\r\n\t\t} );\r\n\t}\r\n\r\n\tonWidthChange( width ) {\r\n\t\tthis.setState( {\r\n\t\t\tmediaWidth: applyWidthConstraints( width ),\r\n\t\t} );\r\n\t}\r\n\r\n\tcommitWidthChange( width ) {\r\n\t\tconst { setAttributes } = this.props;\r\n\r\n\t\tsetAttributes( {\r\n\t\t\tmediaWidth: applyWidthConstraints( width ),\r\n\t\t} );\r\n\t\tthis.setState( {\r\n\t\t\tmediaWidth: null,\r\n\t\t} );\r\n\t}\r\n\r\n\tonLayoutChange( { nativeEvent } ) {\r\n\t\tconst { width } = nativeEvent.layout;\r\n\t\tconst { containerWidth } = this.state;\r\n\r\n\t\tif ( containerWidth === width ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tthis.setState( {\r\n\t\t\tcontainerWidth: width,\r\n\t\t} );\r\n\t}\r\n\r\n\tonMediaSelected() {\r\n\t\tthis.setState( { isMediaSelected: true } );\r\n\t}\r\n\r\n\tonReplaceMedia() {\r\n\t\tif ( this.openPickerRef ) {\r\n\t\t\tthis.openPickerRef();\r\n\t\t}\r\n\t}\r\n\r\n\tonSetOpenPickerRef( openPicker ) {\r\n\t\tthis.openPickerRef = openPicker;\r\n\t}\r\n\r\n\tonSetImageFill() {\r\n\t\tconst { attributes, setAttributes } = this.props;\r\n\t\tconst { imageFill } = attributes;\r\n\r\n\t\tsetAttributes( {\r\n\t\t\timageFill: ! imageFill,\r\n\t\t} );\r\n\t}\r\n\r\n\tgetControls() {\r\n\t\tconst { attributes } = this.props;\r\n\t\tconst { imageFill } = attributes;\r\n\r\n\t\treturn (\r\n\t\t\t<InspectorControls>\r\n\t\t\t\t<PanelBody title={ __( 'Settings' ) }>\r\n\t\t\t\t\t<ToggleControl\r\n\t\t\t\t\t\tlabel={ __( 'Crop image to fill' ) }\r\n\t\t\t\t\t\tchecked={ imageFill }\r\n\t\t\t\t\t\tonChange={ this.onSetImageFill }\r\n\t\t\t\t\t/>\r\n\t\t\t\t</PanelBody>\r\n\t\t\t</InspectorControls>\r\n\t\t);\r\n\t}\r\n\trenderMediaArea( shouldStack ) {\r\n\t\tconst { isMediaSelected, containerWidth } = this.state;\r\n\t\tconst { attributes, isSelected } = this.props;\r\n\t\tconst {\r\n\t\t\tmediaAlt,\r\n\t\t\tmediaId,\r\n\t\t\tmediaPosition,\r\n\t\t\tmediaType,\r\n\t\t\tmediaUrl,\r\n\t\t\tmediaWidth,\r\n\t\t\timageFill,\r\n\t\t\tfocalPoint,\r\n\t\t\tverticalAlignment,\r\n\t\t} = attributes;\r\n\t\tconst mediaAreaWidth =\r\n\t\t\tmediaWidth && ! shouldStack\r\n\t\t\t\t? ( containerWidth * mediaWidth ) / 100 -\r\n\t\t\t\t  styles.mediaAreaPadding.width\r\n\t\t\t\t: containerWidth;\r\n\t\tconst aligmentStyles =\r\n\t\t\tstyles[\r\n\t\t\t\t`is-vertically-aligned-${ verticalAlignment || 'center' }`\r\n\t\t\t];\r\n\r\n\t\treturn (\r\n\t\t\t<MediaContainer\r\n\t\t\t\tcommitWidthChange={ this.commitWidthChange }\r\n\t\t\t\tisMediaSelected={ isMediaSelected }\r\n\t\t\t\tonFocus={ this.props.onFocus }\r\n\t\t\t\tonMediaSelected={ this.onMediaSelected }\r\n\t\t\t\tonMediaUpdate={ this.onMediaUpdate }\r\n\t\t\t\tonMediaThumbnailUpdate={ this.onMediaThumbnailUpdate }\r\n\t\t\t\tonSelectMedia={ this.onSelectMedia }\r\n\t\t\t\tonSetOpenPickerRef={ this.onSetOpenPickerRef }\r\n\t\t\t\tonWidthChange={ this.onWidthChange }\r\n\t\t\t\tmediaWidth={ mediaAreaWidth }\r\n\t\t\t\t{ ...{\r\n\t\t\t\t\tmediaAlt,\r\n\t\t\t\t\tmediaId,\r\n\t\t\t\t\tmediaType,\r\n\t\t\t\t\tmediaUrl,\r\n\t\t\t\t\tmediaPosition,\r\n\t\t\t\t\timageFill,\r\n\t\t\t\t\tfocalPoint,\r\n\t\t\t\t\tisSelected,\r\n\t\t\t\t\taligmentStyles,\r\n\t\t\t\t\tshouldStack,\r\n\t\t\t\t} }\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tattributes,\r\n\t\t\tbackgroundColor,\r\n\t\t\tsetAttributes,\r\n\t\t\tisSelected,\r\n\t\t\tisRTL,\r\n\t\t\tstyle,\r\n\t\t\tblockWidth,\r\n\t\t} = this.props;\r\n\t\tconst {\r\n\t\t\tisStackedOnMobile,\r\n\t\t\timageFill,\r\n\t\t\tmediaPosition,\r\n\t\t\tmediaWidth,\r\n\t\t\tmediaType,\r\n\t\t\tverticalAlignment,\r\n\t\t} = attributes;\r\n\t\tconst { containerWidth, isMediaSelected } = this.state;\r\n\r\n\t\tconst isMobile = containerWidth < BREAKPOINTS.mobile;\r\n\t\tconst shouldStack = isStackedOnMobile && isMobile;\r\n\t\tconst temporaryMediaWidth = shouldStack\r\n\t\t\t? 100\r\n\t\t\t: this.state.mediaWidth || mediaWidth;\r\n\t\tconst widthString = `${ temporaryMediaWidth }%`;\r\n\t\tconst innerBlockWidth = shouldStack ? 100 : 100 - temporaryMediaWidth;\r\n\t\tconst innerBlockWidthString = `${ innerBlockWidth }%`;\r\n\t\tconst hasMedia =\r\n\t\t\tmediaType === MEDIA_TYPE_IMAGE || mediaType === MEDIA_TYPE_VIDEO;\r\n\r\n\t\tconst innerBlockContainerStyle = [\r\n\t\t\t{ width: innerBlockWidthString },\r\n\t\t\t! shouldStack\r\n\t\t\t\t? styles.innerBlock\r\n\t\t\t\t: {\r\n\t\t\t\t\t\t...( mediaPosition === 'left'\r\n\t\t\t\t\t\t\t? styles.innerBlockStackMediaLeft\r\n\t\t\t\t\t\t\t: styles.innerBlockStackMediaRight ),\r\n\t\t\t\t  },\r\n\t\t\t( style?.backgroundColor || backgroundColor.color ) &&\r\n\t\t\t\tstyles.innerBlockPaddings,\r\n\t\t];\r\n\r\n\t\tconst containerStyles = {\r\n\t\t\t...styles[ 'wp-block-media-text' ],\r\n\t\t\t...styles[\r\n\t\t\t\t`is-vertically-aligned-${ verticalAlignment || 'center' }`\r\n\t\t\t],\r\n\t\t\t...( mediaPosition === 'right'\r\n\t\t\t\t? styles[ 'has-media-on-the-right' ]\r\n\t\t\t\t: {} ),\r\n\t\t\t...( shouldStack && styles[ 'is-stacked-on-mobile' ] ),\r\n\t\t\t...( shouldStack && mediaPosition === 'right'\r\n\t\t\t\t? styles[ 'is-stacked-on-mobile.has-media-on-the-right' ]\r\n\t\t\t\t: {} ),\r\n\t\t\t...( isSelected && styles[ 'is-selected' ] ),\r\n\t\t\tbackgroundColor: style?.backgroundColor || backgroundColor.color,\r\n\t\t\tpaddingBottom: 0,\r\n\t\t};\r\n\r\n\t\tconst mediaContainerStyle = [\r\n\t\t\t{ flex: 1 },\r\n\t\t\tshouldStack\r\n\t\t\t\t? {\r\n\t\t\t\t\t\t...( mediaPosition === 'left' &&\r\n\t\t\t\t\t\t\tstyles.mediaStackLeft ),\r\n\t\t\t\t\t\t...( mediaPosition === 'right' &&\r\n\t\t\t\t\t\t\tstyles.mediaStackRight ),\r\n\t\t\t\t  }\r\n\t\t\t\t: {\r\n\t\t\t\t\t\t...( mediaPosition === 'left' && styles.mediaLeft ),\r\n\t\t\t\t\t\t...( mediaPosition === 'right' && styles.mediaRight ),\r\n\t\t\t\t  },\r\n\t\t];\r\n\r\n\t\tconst toolbarControls = [\r\n\t\t\t{\r\n\t\t\t\ticon: isRTL ? pullRight : pullLeft,\r\n\t\t\t\ttitle: __( 'Show media on left' ),\r\n\t\t\t\tisActive: mediaPosition === 'left',\r\n\t\t\t\tonClick: () => setAttributes( { mediaPosition: 'left' } ),\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ticon: isRTL ? pullLeft : pullRight,\r\n\t\t\t\ttitle: __( 'Show media on right' ),\r\n\t\t\t\tisActive: mediaPosition === 'right',\r\n\t\t\t\tonClick: () => setAttributes( { mediaPosition: 'right' } ),\r\n\t\t\t},\r\n\t\t];\r\n\r\n\t\tconst onVerticalAlignmentChange = ( alignment ) => {\r\n\t\t\tsetAttributes( { verticalAlignment: alignment } );\r\n\t\t};\r\n\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{ mediaType === MEDIA_TYPE_IMAGE && this.getControls() }\r\n\t\t\t\t<BlockControls>\r\n\t\t\t\t\t{ hasMedia && (\r\n\t\t\t\t\t\t<ToolbarGroup>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tlabel={ __( 'Edit media' ) }\r\n\t\t\t\t\t\t\t\ticon={ replace }\r\n\t\t\t\t\t\t\t\tonClick={ this.onReplaceMedia }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</ToolbarGroup>\r\n\t\t\t\t\t) }\r\n\t\t\t\t\t{ ( ! isMediaSelected ||\r\n\t\t\t\t\t\tmediaType === MEDIA_TYPE_VIDEO ) && (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<ToolbarGroup controls={ toolbarControls } />\r\n\t\t\t\t\t\t\t<BlockVerticalAlignmentToolbar\r\n\t\t\t\t\t\t\t\tonChange={ onVerticalAlignmentChange }\r\n\t\t\t\t\t\t\t\tvalue={ verticalAlignment }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t) }\r\n\t\t\t\t</BlockControls>\r\n\t\t\t\t<View\r\n\t\t\t\t\tstyle={ containerStyles }\r\n\t\t\t\t\tonLayout={ this.onLayoutChange }\r\n\t\t\t\t>\r\n\t\t\t\t\t<View\r\n\t\t\t\t\t\tstyle={ [\r\n\t\t\t\t\t\t\t( shouldStack || ! imageFill ) && {\r\n\t\t\t\t\t\t\t\twidth: widthString,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tmediaContainerStyle,\r\n\t\t\t\t\t\t] }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ this.renderMediaArea( shouldStack ) }\r\n\t\t\t\t\t</View>\r\n\t\t\t\t\t<View style={ innerBlockContainerStyle }>\r\n\t\t\t\t\t\t<InnerBlocks\r\n\t\t\t\t\t\t\ttemplate={ TEMPLATE }\r\n\t\t\t\t\t\t\tblockWidth={ blockWidth }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</View>\r\n\t\t\t\t</View>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default compose(\r\n\twithColors( 'backgroundColor' ),\r\n\twithSelect( ( select, { clientId } ) => {\r\n\t\tconst { getSelectedBlockClientId, getBlockParents, getSettings } =\r\n\t\t\tselect( blockEditorStore );\r\n\r\n\t\tconst parents = getBlockParents( clientId, true );\r\n\r\n\t\tconst selectedBlockClientId = getSelectedBlockClientId();\r\n\t\tconst isAncestorSelected =\r\n\t\t\tselectedBlockClientId && parents.includes( selectedBlockClientId );\r\n\r\n\t\treturn {\r\n\t\t\tisSelected: selectedBlockClientId === clientId,\r\n\t\t\tisAncestorSelected,\r\n\t\t\tisRTL: getSettings().isRTL,\r\n\t\t};\r\n\t} )\r\n)( MediaTextEdit );\r\n"],"mappings":"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","ignoreList":[]}