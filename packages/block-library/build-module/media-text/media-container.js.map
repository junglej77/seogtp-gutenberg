{"version":3,"names":["clsx","ResizableBox","Spinner","Placeholder","BlockControls","BlockIcon","MediaPlaceholder","MediaReplaceFlow","store","blockEditorStore","__","useViewportMatch","useDispatch","forwardRef","isBlobURL","noticesStore","media","icon","imageFillStyles","jsx","_jsx","jsxs","_jsxs","ALLOWED_MEDIA_TYPES","noop","ResizableBoxContainer","isSelected","isStackedOnMobile","props","ref","isMobile","showHandle","ToolbarEditButton","mediaId","mediaUrl","onSelectMedia","toggleUseFeaturedImage","useFeaturedImage","group","children","mediaURL","allowedTypes","accept","onSelect","onToggleFeaturedImage","onReset","undefined","PlaceholderContainer","className","createErrorNotice","onUploadError","message","type","labels","title","onError","disableMediaButtons","MediaContainer","commitWidthChange","focalPoint","imageFill","mediaAlt","mediaPosition","mediaType","mediaWidth","onWidthChange","enableResize","featuredImageURL","featuredImageAlt","refMedia","isTemporaryMedia","toggleSelection","onResizeStart","onResize","event","direction","elt","parseInt","style","width","onResizeStop","enablePositions","right","left","positionStyles","mediaTypeRenderers","image","src","alt","video","controls","as","size","minWidth","maxWidth","enable","axis","withIllustration"],"sources":["@wordpress/block-library/src/media-text/media-container.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { ResizableBox, Spinner, Placeholder } from '@wordpress/components';\r\nimport {\r\n\tBlockControls,\r\n\tBlockIcon,\r\n\tMediaPlaceholder,\r\n\tMediaReplaceFlow,\r\n\tstore as blockEditorStore,\r\n} from '@wordpress/block-editor';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useViewportMatch } from '@wordpress/compose';\r\nimport { useDispatch } from '@wordpress/data';\r\nimport { forwardRef } from '@wordpress/element';\r\nimport { isBlobURL } from '@wordpress/blob';\r\nimport { store as noticesStore } from '@wordpress/notices';\r\nimport { media as icon } from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { imageFillStyles } from './image-fill';\r\n\r\n/**\r\n * Constants\r\n */\r\nconst ALLOWED_MEDIA_TYPES = [ 'image', 'video' ];\r\nconst noop = () => {};\r\n\r\nconst ResizableBoxContainer = forwardRef(\r\n\t( { isSelected, isStackedOnMobile, ...props }, ref ) => {\r\n\t\tconst isMobile = useViewportMatch( 'small', '<' );\r\n\t\treturn (\r\n\t\t\t<ResizableBox\r\n\t\t\t\tref={ ref }\r\n\t\t\t\tshowHandle={\r\n\t\t\t\t\tisSelected && ( ! isMobile || ! isStackedOnMobile )\r\n\t\t\t\t}\r\n\t\t\t\t{ ...props }\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n);\r\n\r\nfunction ToolbarEditButton( {\r\n\tmediaId,\r\n\tmediaUrl,\r\n\tonSelectMedia,\r\n\ttoggleUseFeaturedImage,\r\n\tuseFeaturedImage,\r\n} ) {\r\n\treturn (\r\n\t\t<BlockControls group=\"other\">\r\n\t\t\t<MediaReplaceFlow\r\n\t\t\t\tmediaId={ mediaId }\r\n\t\t\t\tmediaURL={ mediaUrl }\r\n\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\r\n\t\t\t\taccept=\"image/*,video/*\"\r\n\t\t\t\tonSelect={ onSelectMedia }\r\n\t\t\t\tonToggleFeaturedImage={ toggleUseFeaturedImage }\r\n\t\t\t\tuseFeaturedImage={ useFeaturedImage }\r\n\t\t\t\tonReset={ () => onSelectMedia( undefined ) }\r\n\t\t\t/>\r\n\t\t</BlockControls>\r\n\t);\r\n}\r\n\r\nfunction PlaceholderContainer( {\r\n\tclassName,\r\n\tmediaUrl,\r\n\tonSelectMedia,\r\n\ttoggleUseFeaturedImage,\r\n} ) {\r\n\tconst { createErrorNotice } = useDispatch( noticesStore );\r\n\r\n\tconst onUploadError = ( message ) => {\r\n\t\tcreateErrorNotice( message, { type: 'snackbar' } );\r\n\t};\r\n\r\n\treturn (\r\n\t\t<MediaPlaceholder\r\n\t\t\ticon={ <BlockIcon icon={ icon } /> }\r\n\t\t\tlabels={ {\r\n\t\t\t\ttitle: __( 'Media area' ),\r\n\t\t\t} }\r\n\t\t\tclassName={ className }\r\n\t\t\tonSelect={ onSelectMedia }\r\n\t\t\taccept=\"image/*,video/*\"\r\n\t\t\tonToggleFeaturedImage={ toggleUseFeaturedImage }\r\n\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\r\n\t\t\tonError={ onUploadError }\r\n\t\t\tdisableMediaButtons={ mediaUrl }\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nfunction MediaContainer( props, ref ) {\r\n\tconst {\r\n\t\tclassName,\r\n\t\tcommitWidthChange,\r\n\t\tfocalPoint,\r\n\t\timageFill,\r\n\t\tisSelected,\r\n\t\tisStackedOnMobile,\r\n\t\tmediaAlt,\r\n\t\tmediaId,\r\n\t\tmediaPosition,\r\n\t\tmediaType,\r\n\t\tmediaUrl,\r\n\t\tmediaWidth,\r\n\t\tonSelectMedia,\r\n\t\tonWidthChange,\r\n\t\tenableResize,\r\n\t\ttoggleUseFeaturedImage,\r\n\t\tuseFeaturedImage,\r\n\t\tfeaturedImageURL,\r\n\t\tfeaturedImageAlt,\r\n\t\trefMedia,\r\n\t} = props;\r\n\r\n\tconst isTemporaryMedia = ! mediaId && isBlobURL( mediaUrl );\r\n\r\n\tconst { toggleSelection } = useDispatch( blockEditorStore );\r\n\r\n\tif ( mediaUrl || featuredImageURL || useFeaturedImage ) {\r\n\t\tconst onResizeStart = () => {\r\n\t\t\ttoggleSelection( false );\r\n\t\t};\r\n\t\tconst onResize = ( event, direction, elt ) => {\r\n\t\t\tonWidthChange( parseInt( elt.style.width ) );\r\n\t\t};\r\n\t\tconst onResizeStop = ( event, direction, elt ) => {\r\n\t\t\ttoggleSelection( true );\r\n\t\t\tcommitWidthChange( parseInt( elt.style.width ) );\r\n\t\t};\r\n\t\tconst enablePositions = {\r\n\t\t\tright: enableResize && mediaPosition === 'left',\r\n\t\t\tleft: enableResize && mediaPosition === 'right',\r\n\t\t};\r\n\r\n\t\tconst positionStyles =\r\n\t\t\tmediaType === 'image' && imageFill\r\n\t\t\t\t? imageFillStyles( mediaUrl || featuredImageURL, focalPoint )\r\n\t\t\t\t: {};\r\n\r\n\t\tconst mediaTypeRenderers = {\r\n\t\t\timage: () =>\r\n\t\t\t\tuseFeaturedImage && featuredImageURL ? (\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tref={ refMedia }\r\n\t\t\t\t\t\tsrc={ featuredImageURL }\r\n\t\t\t\t\t\talt={ featuredImageAlt }\r\n\t\t\t\t\t\tstyle={ positionStyles }\r\n\t\t\t\t\t/>\r\n\t\t\t\t) : (\r\n\t\t\t\t\tmediaUrl && (\r\n\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\tref={ refMedia }\r\n\t\t\t\t\t\t\tsrc={ mediaUrl }\r\n\t\t\t\t\t\t\talt={ mediaAlt }\r\n\t\t\t\t\t\t\tstyle={ positionStyles }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)\r\n\t\t\t\t),\r\n\t\t\tvideo: () => <video controls ref={ refMedia } src={ mediaUrl } />,\r\n\t\t};\r\n\r\n\t\treturn (\r\n\t\t\t<ResizableBoxContainer\r\n\t\t\t\tas=\"figure\"\r\n\t\t\t\tclassName={ clsx(\r\n\t\t\t\t\tclassName,\r\n\t\t\t\t\t'editor-media-container__resizer',\r\n\t\t\t\t\t{ 'is-transient': isTemporaryMedia }\r\n\t\t\t\t) }\r\n\t\t\t\tsize={ { width: mediaWidth + '%' } }\r\n\t\t\t\tminWidth=\"10%\"\r\n\t\t\t\tmaxWidth=\"100%\"\r\n\t\t\t\tenable={ enablePositions }\r\n\t\t\t\tonResizeStart={ onResizeStart }\r\n\t\t\t\tonResize={ onResize }\r\n\t\t\t\tonResizeStop={ onResizeStop }\r\n\t\t\t\taxis=\"x\"\r\n\t\t\t\tisSelected={ isSelected }\r\n\t\t\t\tisStackedOnMobile={ isStackedOnMobile }\r\n\t\t\t\tref={ ref }\r\n\t\t\t>\r\n\t\t\t\t<ToolbarEditButton\r\n\t\t\t\t\tonSelectMedia={ onSelectMedia }\r\n\t\t\t\t\tmediaUrl={\r\n\t\t\t\t\t\tuseFeaturedImage && featuredImageURL\r\n\t\t\t\t\t\t\t? featuredImageURL\r\n\t\t\t\t\t\t\t: mediaUrl\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmediaId={ mediaId }\r\n\t\t\t\t\ttoggleUseFeaturedImage={ toggleUseFeaturedImage }\r\n\t\t\t\t/>\r\n\t\t\t\t{ ( mediaTypeRenderers[ mediaType ] || noop )() }\r\n\t\t\t\t{ isTemporaryMedia && <Spinner /> }\r\n\t\t\t\t{ ! useFeaturedImage && <PlaceholderContainer { ...props } /> }\r\n\t\t\t\t{ ! featuredImageURL && useFeaturedImage && (\r\n\t\t\t\t\t<Placeholder\r\n\t\t\t\t\t\tclassName=\"wp-block-media-text--placeholder-image\"\r\n\t\t\t\t\t\tstyle={ positionStyles }\r\n\t\t\t\t\t\twithIllustration\r\n\t\t\t\t\t/>\r\n\t\t\t\t) }\r\n\t\t\t</ResizableBoxContainer>\r\n\t\t);\r\n\t}\r\n\r\n\treturn <PlaceholderContainer { ...props } />;\r\n}\r\n\r\nexport default forwardRef( MediaContainer );\r\n"],"mappings":"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","ignoreList":[]}