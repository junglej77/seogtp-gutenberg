{"version":3,"names":["View","Text","TouchableWithoutFeedback","mediaUploadSync","requestImageFailedRetryDialog","requestImageUploadCancelDialog","requestImageFullscreenPreview","Icon","Image","IMAGE_DEFAULT_FOCAL_POINT","MEDIA_TYPE_IMAGE","MEDIA_TYPE_VIDEO","MediaPlaceholder","MediaUpload","MediaUploadProgress","VIDEO_ASPECT_RATIO","VideoPlayer","Component","__","isURL","getProtocol","compose","withPreferredColorScheme","media","icon","styles","SvgIconRetry","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ALLOWED_MEDIA_TYPES","ICON_TYPE","PLACEHOLDER","RETRY","MediaContainer","constructor","arguments","updateMediaProgress","bind","finishMediaUploadWithSuccess","finishMediaUploadWithFailure","mediaUploadStateReset","onSelectMediaUploadOption","onMediaPressed","state","isUploadInProgress","componentDidMount","mediaId","mediaUrl","props","params","id","url","type","onSelectMedia","media_type","mediaType","isMediaSelected","onMediaSelected","getIcon","iconType","getStylesFromColorScheme","iconStyle","iconRetry","iconRetryVideo","iconRetryVideoDark","iconPlaceholder","iconPlaceholderDark","payload","onMediaThumbnailUpdate","setState","onMediaUpdate","mediaServerId","renderImage","openMediaOptions","aligmentStyles","focalPoint","imageFill","isSelected","mediaAlt","mediaWidth","shouldStack","isUploadFailed","isUploadPaused","retryMessage","focalPointValues","style","imageWithFocalPoint","height","children","accessible","onPress","disabled","imageCropped","mediaImageContainer","align","alt","width","renderVideo","showVideo","videoPlaceholderStyles","videoPlaceholder","videoPlaceholderDark","retryVideoTextStyles","uploadFailedText","uploadFailedTextVideo","uploadFailedTextVideoDark","mediaVideo","videoContainer","videoContent","aspectRatio","videoPlayer","video","source","uri","paused","modalIcon","renderContent","mediaElement","renderPlaceholder","labels","title","onSelect","allowedTypes","onFocus","className","render","onSetOpenPickerRef","coverUrl","isReplacingMedia","value","open","getMediaOptions","enablePausedUploads","onUpdateMediaProgress","onFinishMediaUploadWithSuccess","onFinishMediaUploadWithFailure","onMediaUploadStateReset"],"sources":["@wordpress/block-library/src/media-text/media-container.native.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport { View, Text, TouchableWithoutFeedback } from 'react-native';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tmediaUploadSync,\r\n\trequestImageFailedRetryDialog,\r\n\trequestImageUploadCancelDialog,\r\n\trequestImageFullscreenPreview,\r\n} from '@wordpress/react-native-bridge';\r\nimport { Icon, Image, IMAGE_DEFAULT_FOCAL_POINT } from '@wordpress/components';\r\nimport {\r\n\tMEDIA_TYPE_IMAGE,\r\n\tMEDIA_TYPE_VIDEO,\r\n\tMediaPlaceholder,\r\n\tMediaUpload,\r\n\tMediaUploadProgress,\r\n\tVIDEO_ASPECT_RATIO,\r\n\tVideoPlayer,\r\n} from '@wordpress/block-editor';\r\nimport { Component } from '@wordpress/element';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { isURL, getProtocol } from '@wordpress/url';\r\nimport { compose, withPreferredColorScheme } from '@wordpress/compose';\r\nimport { media as icon } from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport styles from './style.scss';\r\nimport SvgIconRetry from './icon-retry';\r\n\r\n/**\r\n * Constants\r\n */\r\nconst ALLOWED_MEDIA_TYPES = [ MEDIA_TYPE_IMAGE, MEDIA_TYPE_VIDEO ];\r\n\r\nconst ICON_TYPE = {\r\n\tPLACEHOLDER: 'placeholder',\r\n\tRETRY: 'retry',\r\n};\r\n\r\nclass MediaContainer extends Component {\r\n\tconstructor() {\r\n\t\tsuper( ...arguments );\r\n\t\tthis.updateMediaProgress = this.updateMediaProgress.bind( this );\r\n\t\tthis.finishMediaUploadWithSuccess =\r\n\t\t\tthis.finishMediaUploadWithSuccess.bind( this );\r\n\t\tthis.finishMediaUploadWithFailure =\r\n\t\t\tthis.finishMediaUploadWithFailure.bind( this );\r\n\t\tthis.mediaUploadStateReset = this.mediaUploadStateReset.bind( this );\r\n\t\tthis.onSelectMediaUploadOption =\r\n\t\t\tthis.onSelectMediaUploadOption.bind( this );\r\n\t\tthis.onMediaPressed = this.onMediaPressed.bind( this );\r\n\r\n\t\tthis.state = {\r\n\t\t\tisUploadInProgress: false,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst { mediaId, mediaUrl } = this.props;\r\n\r\n\t\t// Make sure we mark any temporary images as failed if they failed while\r\n\t\t// the editor wasn't open.\r\n\t\tif ( mediaId && mediaUrl && getProtocol( mediaUrl ) === 'file:' ) {\r\n\t\t\tmediaUploadSync();\r\n\t\t}\r\n\t}\r\n\r\n\tonSelectMediaUploadOption( params ) {\r\n\t\tconst { id, url, type } = params;\r\n\t\tconst { onSelectMedia } = this.props;\r\n\r\n\t\tonSelectMedia( {\r\n\t\t\tmedia_type: type,\r\n\t\t\tid,\r\n\t\t\turl,\r\n\t\t} );\r\n\t}\r\n\r\n\tonMediaPressed() {\r\n\t\tconst { isUploadInProgress } = this.state;\r\n\t\tconst {\r\n\t\t\tmediaId,\r\n\t\t\tmediaUrl,\r\n\t\t\tmediaType,\r\n\t\t\tisMediaSelected,\r\n\t\t\tonMediaSelected,\r\n\t\t} = this.props;\r\n\r\n\t\tif ( isUploadInProgress ) {\r\n\t\t\trequestImageUploadCancelDialog( mediaId );\r\n\t\t} else if ( mediaId && getProtocol( mediaUrl ) === 'file:' ) {\r\n\t\t\trequestImageFailedRetryDialog( mediaId );\r\n\t\t} else if ( mediaType === MEDIA_TYPE_IMAGE && isMediaSelected ) {\r\n\t\t\trequestImageFullscreenPreview( mediaUrl );\r\n\t\t} else if ( mediaType === MEDIA_TYPE_IMAGE ) {\r\n\t\t\tonMediaSelected();\r\n\t\t}\r\n\t}\r\n\r\n\tgetIcon( iconType ) {\r\n\t\tconst { mediaType, getStylesFromColorScheme } = this.props;\r\n\t\tlet iconStyle;\r\n\t\tswitch ( iconType ) {\r\n\t\t\tcase ICON_TYPE.RETRY:\r\n\t\t\t\ticonStyle =\r\n\t\t\t\t\tmediaType === MEDIA_TYPE_IMAGE\r\n\t\t\t\t\t\t? styles.iconRetry\r\n\t\t\t\t\t\t: getStylesFromColorScheme(\r\n\t\t\t\t\t\t\t\tstyles.iconRetryVideo,\r\n\t\t\t\t\t\t\t\tstyles.iconRetryVideoDark\r\n\t\t\t\t\t\t  );\r\n\r\n\t\t\t\treturn <Icon icon={ SvgIconRetry } { ...iconStyle } />;\r\n\t\t\tcase ICON_TYPE.PLACEHOLDER:\r\n\t\t\t\ticonStyle = getStylesFromColorScheme(\r\n\t\t\t\t\tstyles.iconPlaceholder,\r\n\t\t\t\t\tstyles.iconPlaceholderDark\r\n\t\t\t\t);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn <Icon icon={ icon } { ...iconStyle } />;\r\n\t}\r\n\r\n\tupdateMediaProgress( payload ) {\r\n\t\tconst { isUploadInProgress } = this.state;\r\n\t\tconst { mediaUrl, state } = payload;\r\n\t\tconst { mediaType, onMediaThumbnailUpdate } = this.props;\r\n\r\n\t\tif ( ! isUploadInProgress ) {\r\n\t\t\tthis.setState( { isUploadInProgress: true } );\r\n\t\t}\r\n\r\n\t\tif (\r\n\t\t\tisUploadInProgress &&\r\n\t\t\tmediaType === MEDIA_TYPE_IMAGE &&\r\n\t\t\tmediaUrl &&\r\n\t\t\t! state\r\n\t\t) {\r\n\t\t\tonMediaThumbnailUpdate( mediaUrl );\r\n\t\t}\r\n\t}\r\n\r\n\tfinishMediaUploadWithSuccess( payload ) {\r\n\t\tconst { onMediaUpdate } = this.props;\r\n\r\n\t\tonMediaUpdate( {\r\n\t\t\tid: payload.mediaServerId,\r\n\t\t\turl: payload.mediaUrl,\r\n\t\t} );\r\n\t\tthis.setState( { isUploadInProgress: false } );\r\n\t}\r\n\r\n\tfinishMediaUploadWithFailure() {\r\n\t\tthis.setState( { isUploadInProgress: false } );\r\n\t}\r\n\r\n\tmediaUploadStateReset() {\r\n\t\tconst { onMediaUpdate } = this.props;\r\n\r\n\t\tonMediaUpdate( { id: null, url: null } );\r\n\t\tthis.setState( { isUploadInProgress: false } );\r\n\t}\r\n\r\n\trenderImage( params, openMediaOptions ) {\r\n\t\tconst { isUploadInProgress } = this.state;\r\n\t\tconst {\r\n\t\t\taligmentStyles,\r\n\t\t\tfocalPoint,\r\n\t\t\timageFill,\r\n\t\t\tisMediaSelected,\r\n\t\t\tisSelected,\r\n\t\t\tmediaAlt,\r\n\t\t\tmediaUrl,\r\n\t\t\tmediaWidth,\r\n\t\t\tshouldStack,\r\n\t\t} = this.props;\r\n\t\tconst { isUploadFailed, isUploadPaused, retryMessage } = params;\r\n\t\tconst focalPointValues = ! focalPoint\r\n\t\t\t? IMAGE_DEFAULT_FOCAL_POINT\r\n\t\t\t: focalPoint;\r\n\r\n\t\treturn (\r\n\t\t\t<View\r\n\t\t\t\tstyle={ [\r\n\t\t\t\t\timageFill && styles.imageWithFocalPoint,\r\n\t\t\t\t\timageFill &&\r\n\t\t\t\t\t\tshouldStack && {\r\n\t\t\t\t\t\t\theight: styles.imageFill.height,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t] }\r\n\t\t\t>\r\n\t\t\t\t<TouchableWithoutFeedback\r\n\t\t\t\t\taccessible={ ! isSelected }\r\n\t\t\t\t\tonPress={ this.onMediaPressed }\r\n\t\t\t\t\tdisabled={ ! isSelected }\r\n\t\t\t\t>\r\n\t\t\t\t\t<View\r\n\t\t\t\t\t\tstyle={ [\r\n\t\t\t\t\t\t\timageFill && styles.imageCropped,\r\n\t\t\t\t\t\t\tstyles.mediaImageContainer,\r\n\t\t\t\t\t\t\t! isUploadInProgress && aligmentStyles,\r\n\t\t\t\t\t\t] }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Image\r\n\t\t\t\t\t\t\talign=\"center\"\r\n\t\t\t\t\t\t\talt={ mediaAlt }\r\n\t\t\t\t\t\t\tfocalPoint={ imageFill && focalPointValues }\r\n\t\t\t\t\t\t\tisSelected={ isMediaSelected }\r\n\t\t\t\t\t\t\tisUploadFailed={ isUploadFailed }\r\n\t\t\t\t\t\t\tisUploadPaused={ isUploadPaused }\r\n\t\t\t\t\t\t\tisUploadInProgress={ isUploadInProgress }\r\n\t\t\t\t\t\t\tonSelectMediaUploadOption={\r\n\t\t\t\t\t\t\t\tthis.onSelectMediaUploadOption\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\topenMediaOptions={ openMediaOptions }\r\n\t\t\t\t\t\t\tretryMessage={ retryMessage }\r\n\t\t\t\t\t\t\turl={ mediaUrl }\r\n\t\t\t\t\t\t\twidth={ ! isUploadInProgress && mediaWidth }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</View>\r\n\t\t\t\t</TouchableWithoutFeedback>\r\n\t\t\t</View>\r\n\t\t);\r\n\t}\r\n\r\n\trenderVideo( params ) {\r\n\t\tconst {\r\n\t\t\taligmentStyles,\r\n\t\t\tmediaUrl,\r\n\t\t\tisSelected,\r\n\t\t\tgetStylesFromColorScheme,\r\n\t\t} = this.props;\r\n\t\tconst { isUploadInProgress } = this.state;\r\n\t\tconst { isUploadFailed, retryMessage } = params;\r\n\t\tconst showVideo =\r\n\t\t\tisURL( mediaUrl ) && ! isUploadInProgress && ! isUploadFailed;\r\n\r\n\t\tconst videoPlaceholderStyles = getStylesFromColorScheme(\r\n\t\t\tstyles.videoPlaceholder,\r\n\t\t\tstyles.videoPlaceholderDark\r\n\t\t);\r\n\t\tconst retryVideoTextStyles = [\r\n\t\t\tstyles.uploadFailedText,\r\n\t\t\tgetStylesFromColorScheme(\r\n\t\t\t\tstyles.uploadFailedTextVideo,\r\n\t\t\t\tstyles.uploadFailedTextVideoDark\r\n\t\t\t),\r\n\t\t];\r\n\r\n\t\treturn (\r\n\t\t\t<View style={ styles.mediaVideo }>\r\n\t\t\t\t<TouchableWithoutFeedback\r\n\t\t\t\t\taccessible={ ! isSelected }\r\n\t\t\t\t\tonPress={ this.onMediaPressed }\r\n\t\t\t\t\tdisabled={ ! isSelected }\r\n\t\t\t\t>\r\n\t\t\t\t\t<View style={ [ styles.videoContainer, aligmentStyles ] }>\r\n\t\t\t\t\t\t<View\r\n\t\t\t\t\t\t\tstyle={ [\r\n\t\t\t\t\t\t\t\tstyles.videoContent,\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\taspectRatio: VIDEO_ASPECT_RATIO,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t] }\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{ showVideo && (\r\n\t\t\t\t\t\t\t\t<View style={ styles.videoPlayer }>\r\n\t\t\t\t\t\t\t\t\t<VideoPlayer\r\n\t\t\t\t\t\t\t\t\t\tisSelected={ isSelected }\r\n\t\t\t\t\t\t\t\t\t\tstyle={ styles.video }\r\n\t\t\t\t\t\t\t\t\t\tsource={ { uri: mediaUrl } }\r\n\t\t\t\t\t\t\t\t\t\tpaused\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</View>\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t{ ! showVideo && (\r\n\t\t\t\t\t\t\t\t<View style={ videoPlaceholderStyles }>\r\n\t\t\t\t\t\t\t\t\t<View style={ styles.modalIcon }>\r\n\t\t\t\t\t\t\t\t\t\t{ isUploadFailed\r\n\t\t\t\t\t\t\t\t\t\t\t? this.getIcon( ICON_TYPE.RETRY )\r\n\t\t\t\t\t\t\t\t\t\t\t: this.getIcon(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tICON_TYPE.PLACEHOLDER\r\n\t\t\t\t\t\t\t\t\t\t\t  ) }\r\n\t\t\t\t\t\t\t\t\t</View>\r\n\t\t\t\t\t\t\t\t\t{ isUploadFailed && (\r\n\t\t\t\t\t\t\t\t\t\t<Text style={ retryVideoTextStyles }>\r\n\t\t\t\t\t\t\t\t\t\t\t{ retryMessage }\r\n\t\t\t\t\t\t\t\t\t\t</Text>\r\n\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t</View>\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t</View>\r\n\t\t\t\t\t</View>\r\n\t\t\t\t</TouchableWithoutFeedback>\r\n\t\t\t</View>\r\n\t\t);\r\n\t}\r\n\r\n\trenderContent( params, openMediaOptions ) {\r\n\t\tconst { mediaType } = this.props;\r\n\t\tlet mediaElement = null;\r\n\r\n\t\tswitch ( mediaType ) {\r\n\t\t\tcase MEDIA_TYPE_IMAGE:\r\n\t\t\t\tmediaElement = this.renderImage( params, openMediaOptions );\r\n\t\t\t\tbreak;\r\n\t\t\tcase MEDIA_TYPE_VIDEO:\r\n\t\t\t\tmediaElement = this.renderVideo( params );\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn mediaElement;\r\n\t}\r\n\r\n\trenderPlaceholder() {\r\n\t\treturn (\r\n\t\t\t<MediaPlaceholder\r\n\t\t\t\ticon={ this.getIcon( ICON_TYPE.PLACEHOLDER ) }\r\n\t\t\t\tlabels={ {\r\n\t\t\t\t\ttitle: __( 'Media area' ),\r\n\t\t\t\t} }\r\n\t\t\t\tonSelect={ this.onSelectMediaUploadOption }\r\n\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\r\n\t\t\t\tonFocus={ this.props.onFocus }\r\n\t\t\t\tclassName=\"no-block-outline\"\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { mediaUrl, mediaId, mediaType, onSetOpenPickerRef } = this.props;\r\n\t\tconst coverUrl = mediaType === MEDIA_TYPE_IMAGE ? mediaUrl : null;\r\n\r\n\t\tif ( mediaUrl ) {\r\n\t\t\treturn (\r\n\t\t\t\t<MediaUpload\r\n\t\t\t\t\tisReplacingMedia\r\n\t\t\t\t\tonSelect={ this.onSelectMediaUploadOption }\r\n\t\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\r\n\t\t\t\t\tvalue={ mediaId }\r\n\t\t\t\t\trender={ ( { open, getMediaOptions } ) => {\r\n\t\t\t\t\t\tonSetOpenPickerRef( open );\r\n\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t{ getMediaOptions() }\r\n\r\n\t\t\t\t\t\t\t\t<MediaUploadProgress\r\n\t\t\t\t\t\t\t\t\tenablePausedUploads={\r\n\t\t\t\t\t\t\t\t\t\tmediaType === MEDIA_TYPE_IMAGE\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tcoverUrl={ coverUrl }\r\n\t\t\t\t\t\t\t\t\tmediaId={ mediaId }\r\n\t\t\t\t\t\t\t\t\tonUpdateMediaProgress={\r\n\t\t\t\t\t\t\t\t\t\tthis.updateMediaProgress\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tonFinishMediaUploadWithSuccess={\r\n\t\t\t\t\t\t\t\t\t\tthis.finishMediaUploadWithSuccess\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tonFinishMediaUploadWithFailure={\r\n\t\t\t\t\t\t\t\t\t\tthis.finishMediaUploadWithFailure\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tonMediaUploadStateReset={\r\n\t\t\t\t\t\t\t\t\t\tthis.mediaUploadStateReset\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\trenderContent={ ( params ) => {\r\n\t\t\t\t\t\t\t\t\t\treturn this.renderContent(\r\n\t\t\t\t\t\t\t\t\t\t\tparams,\r\n\t\t\t\t\t\t\t\t\t\t\topen\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} }\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn this.renderPlaceholder();\r\n\t}\r\n}\r\n\r\nexport default compose( [ withPreferredColorScheme ] )( MediaContainer );\r\n"],"mappings":"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","ignoreList":[]}