{"version":3,"names":["clsx","createBlock","useSelect","useDispatch","PanelBody","TextControl","TextareaControl","ToolbarButton","Tooltip","ToolbarGroup","displayShortcut","isKeyboardEvent","__","BlockControls","InspectorControls","RichText","useBlockProps","store","blockEditorStore","getColorClassName","useInnerBlocksProps","isURL","prependHTTP","safeDecodeURI","useState","useEffect","useRef","__unstableStripHTML","stripHTML","decodeEntities","link","linkIcon","addSubmenu","coreStore","useMergeRefs","usePrevious","LinkUI","updateAttributes","getColors","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","DEFAULT_BLOCK","name","useIsDraggingWithin","elementRef","isDraggingWithin","setIsDraggingWithin","ownerDocument","current","handleDragStart","event","handleDragEnter","handleDragEnd","contains","target","addEventListener","removeEventListener","useIsInvalidLink","kind","type","id","isPostType","hasId","Number","isInteger","postStatus","select","getEntityRecord","status","isInvalid","isDraft","getMissingText","missingText","Controls","attributes","setAttributes","setIsLabelFieldFocused","label","url","description","title","rel","children","__nextHasNoMarginBottom","__next40pxDefaultSize","value","onChange","labelValue","autoComplete","onFocus","onBlur","urlValue","descriptionValue","help","titleValue","relValue","NavigationLinkEdit","isSelected","insertBlocksAfter","mergeBlocks","onReplace","context","clientId","maxNestingLevel","replaceBlock","__unstableMarkNextChangeAsNotPersistent","selectBlock","selectPreviousBlock","isLinkOpen","setIsLinkOpen","openedBy","setOpenedBy","popoverAnchor","setPopoverAnchor","listItemRef","itemLabelPlaceholder","ref","linkUIref","prevUrl","isLabelFieldFocused","isAtMaxNesting","isTopLevelLink","isParentOfSelectedBlock","hasChildren","getBlockCount","getBlockName","getBlockRootClientId","hasSelectedInnerBlock","getBlockParentsByBlockName","length","getBlocks","transformToSubmenu","innerBlocks","newSubmenu","test","selectLabelText","focus","defaultView","selection","getSelection","range","createRange","selectNodeContents","removeAllRanges","addRange","removeLink","undefined","opensInNewTab","textColor","customTextColor","backgroundColor","customBackgroundColor","onKeyDown","primary","preventDefault","stopPropagation","blockProps","className","style","color","innerBlocksProps","defaultBlock","directInsert","renderAppender","onClick","classes","placeholderText","tooltipText","icon","shortcut","currentTarget","text","identifier","onMerge","__unstableOnSplitAtEnd","placeholder","withoutInteractiveFormatting","allowedFormats","trim","onClose","window","document","activeElement","anchor","onRemove","updatedValue"],"sources":["@wordpress/block-library/src/navigation-link/edit.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { createBlock } from '@wordpress/blocks';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport {\r\n\tPanelBody,\r\n\tTextControl,\r\n\tTextareaControl,\r\n\tToolbarButton,\r\n\tTooltip,\r\n\tToolbarGroup,\r\n} from '@wordpress/components';\r\nimport { displayShortcut, isKeyboardEvent } from '@wordpress/keycodes';\r\nimport { __ } from '@wordpress/i18n';\r\nimport {\r\n\tBlockControls,\r\n\tInspectorControls,\r\n\tRichText,\r\n\tuseBlockProps,\r\n\tstore as blockEditorStore,\r\n\tgetColorClassName,\r\n\tuseInnerBlocksProps,\r\n} from '@wordpress/block-editor';\r\nimport { isURL, prependHTTP, safeDecodeURI } from '@wordpress/url';\r\nimport { useState, useEffect, useRef } from '@wordpress/element';\r\nimport { __unstableStripHTML as stripHTML } from '@wordpress/dom';\r\nimport { decodeEntities } from '@wordpress/html-entities';\r\nimport { link as linkIcon, addSubmenu } from '@wordpress/icons';\r\nimport { store as coreStore } from '@wordpress/core-data';\r\nimport { useMergeRefs, usePrevious } from '@wordpress/compose';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { LinkUI } from './link-ui';\r\nimport { updateAttributes } from './update-attributes';\r\nimport { getColors } from '../navigation/edit/utils';\r\n\r\nconst DEFAULT_BLOCK = { name: 'core/navigation-link' };\r\n\r\n/**\r\n * A React hook to determine if it's dragging within the target element.\r\n *\r\n * @typedef {import('@wordpress/element').RefObject} RefObject\r\n *\r\n * @param {RefObject<HTMLElement>} elementRef The target elementRef object.\r\n *\r\n * @return {boolean} Is dragging within the target element.\r\n */\r\nconst useIsDraggingWithin = ( elementRef ) => {\r\n\tconst [ isDraggingWithin, setIsDraggingWithin ] = useState( false );\r\n\r\n\tuseEffect( () => {\r\n\t\tconst { ownerDocument } = elementRef.current;\r\n\r\n\t\tfunction handleDragStart( event ) {\r\n\t\t\t// Check the first time when the dragging starts.\r\n\t\t\thandleDragEnter( event );\r\n\t\t}\r\n\r\n\t\t// Set to false whenever the user cancel the drag event by either releasing the mouse or press Escape.\r\n\t\tfunction handleDragEnd() {\r\n\t\t\tsetIsDraggingWithin( false );\r\n\t\t}\r\n\r\n\t\tfunction handleDragEnter( event ) {\r\n\t\t\t// Check if the current target is inside the item element.\r\n\t\t\tif ( elementRef.current.contains( event.target ) ) {\r\n\t\t\t\tsetIsDraggingWithin( true );\r\n\t\t\t} else {\r\n\t\t\t\tsetIsDraggingWithin( false );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Bind these events to the document to catch all drag events.\r\n\t\t// Ideally, we can also use `event.relatedTarget`, but sadly that\r\n\t\t// doesn't work in Safari.\r\n\t\townerDocument.addEventListener( 'dragstart', handleDragStart );\r\n\t\townerDocument.addEventListener( 'dragend', handleDragEnd );\r\n\t\townerDocument.addEventListener( 'dragenter', handleDragEnter );\r\n\r\n\t\treturn () => {\r\n\t\t\townerDocument.removeEventListener( 'dragstart', handleDragStart );\r\n\t\t\townerDocument.removeEventListener( 'dragend', handleDragEnd );\r\n\t\t\townerDocument.removeEventListener( 'dragenter', handleDragEnter );\r\n\t\t};\r\n\t}, [ elementRef ] );\r\n\r\n\treturn isDraggingWithin;\r\n};\r\n\r\nconst useIsInvalidLink = ( kind, type, id ) => {\r\n\tconst isPostType =\r\n\t\tkind === 'post-type' || type === 'post' || type === 'page';\r\n\tconst hasId = Number.isInteger( id );\r\n\tconst postStatus = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tif ( ! isPostType ) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tconst { getEntityRecord } = select( coreStore );\r\n\t\t\treturn getEntityRecord( 'postType', type, id )?.status;\r\n\t\t},\r\n\t\t[ isPostType, type, id ]\r\n\t);\r\n\r\n\t// Check Navigation Link validity if:\r\n\t// 1. Link is 'post-type'.\r\n\t// 2. It has an id.\r\n\t// 3. It's neither null, nor undefined, as valid items might be either of those while loading.\r\n\t// If those conditions are met, check if\r\n\t// 1. The post status is published.\r\n\t// 2. The Navigation Link item has no label.\r\n\t// If either of those is true, invalidate.\r\n\tconst isInvalid =\r\n\t\tisPostType && hasId && postStatus && 'trash' === postStatus;\r\n\tconst isDraft = 'draft' === postStatus;\r\n\r\n\treturn [ isInvalid, isDraft ];\r\n};\r\n\r\nfunction getMissingText( type ) {\r\n\tlet missingText = '';\r\n\r\n\tswitch ( type ) {\r\n\t\tcase 'post':\r\n\t\t\t/* translators: label for missing post in navigation link block */\r\n\t\t\tmissingText = __( 'Select post' );\r\n\t\t\tbreak;\r\n\t\tcase 'page':\r\n\t\t\t/* translators: label for missing page in navigation link block */\r\n\t\t\tmissingText = __( 'Select page' );\r\n\t\t\tbreak;\r\n\t\tcase 'category':\r\n\t\t\t/* translators: label for missing category in navigation link block */\r\n\t\t\tmissingText = __( 'Select category' );\r\n\t\t\tbreak;\r\n\t\tcase 'tag':\r\n\t\t\t/* translators: label for missing tag in navigation link block */\r\n\t\t\tmissingText = __( 'Select tag' );\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\t/* translators: label for missing values in navigation link block */\r\n\t\t\tmissingText = __( 'Add link' );\r\n\t}\r\n\r\n\treturn missingText;\r\n}\r\n\r\n/*\r\n * Warning, this duplicated in\r\n * packages/block-library/src/navigation-submenu/edit.js\r\n * Consider reuseing this components for both blocks.\r\n */\r\nfunction Controls( { attributes, setAttributes, setIsLabelFieldFocused } ) {\r\n\tconst { label, url, description, title, rel } = attributes;\r\n\treturn (\r\n\t\t<PanelBody title={ __( 'Settings' ) }>\r\n\t\t\t<TextControl\r\n\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\tvalue={ label ? stripHTML( label ) : '' }\r\n\t\t\t\tonChange={ ( labelValue ) => {\r\n\t\t\t\t\tsetAttributes( { label: labelValue } );\r\n\t\t\t\t} }\r\n\t\t\t\tlabel={ __( 'Text' ) }\r\n\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\tonFocus={ () => setIsLabelFieldFocused( true ) }\r\n\t\t\t\tonBlur={ () => setIsLabelFieldFocused( false ) }\r\n\t\t\t/>\r\n\t\t\t<TextControl\r\n\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\tvalue={ url ? safeDecodeURI( url ) : '' }\r\n\t\t\t\tonChange={ ( urlValue ) => {\r\n\t\t\t\t\tupdateAttributes(\r\n\t\t\t\t\t\t{ url: urlValue },\r\n\t\t\t\t\t\tsetAttributes,\r\n\t\t\t\t\t\tattributes\r\n\t\t\t\t\t);\r\n\t\t\t\t} }\r\n\t\t\t\tlabel={ __( 'Link' ) }\r\n\t\t\t\tautoComplete=\"off\"\r\n\t\t\t/>\r\n\t\t\t<TextareaControl\r\n\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\tvalue={ description || '' }\r\n\t\t\t\tonChange={ ( descriptionValue ) => {\r\n\t\t\t\t\tsetAttributes( { description: descriptionValue } );\r\n\t\t\t\t} }\r\n\t\t\t\tlabel={ __( 'Description' ) }\r\n\t\t\t\thelp={ __(\r\n\t\t\t\t\t'The description will be displayed in the menu if the current theme supports it.'\r\n\t\t\t\t) }\r\n\t\t\t/>\r\n\t\t\t<TextControl\r\n\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\tvalue={ title || '' }\r\n\t\t\t\tonChange={ ( titleValue ) => {\r\n\t\t\t\t\tsetAttributes( { title: titleValue } );\r\n\t\t\t\t} }\r\n\t\t\t\tlabel={ __( 'Title attribute' ) }\r\n\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\thelp={ __(\r\n\t\t\t\t\t'Additional information to help clarify the purpose of the link.'\r\n\t\t\t\t) }\r\n\t\t\t/>\r\n\t\t\t<TextControl\r\n\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\tvalue={ rel || '' }\r\n\t\t\t\tonChange={ ( relValue ) => {\r\n\t\t\t\t\tsetAttributes( { rel: relValue } );\r\n\t\t\t\t} }\r\n\t\t\t\tlabel={ __( 'Rel attribute' ) }\r\n\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\thelp={ __(\r\n\t\t\t\t\t'The relationship of the linked URL as space-separated link types.'\r\n\t\t\t\t) }\r\n\t\t\t/>\r\n\t\t</PanelBody>\r\n\t);\r\n}\r\n\r\nexport default function NavigationLinkEdit( {\r\n\tattributes,\r\n\tisSelected,\r\n\tsetAttributes,\r\n\tinsertBlocksAfter,\r\n\tmergeBlocks,\r\n\tonReplace,\r\n\tcontext,\r\n\tclientId,\r\n} ) {\r\n\tconst { id, label, type, url, description, kind } = attributes;\r\n\r\n\tconst [ isInvalid, isDraft ] = useIsInvalidLink( kind, type, id );\r\n\tconst { maxNestingLevel } = context;\r\n\r\n\tconst {\r\n\t\treplaceBlock,\r\n\t\t__unstableMarkNextChangeAsNotPersistent,\r\n\t\tselectBlock,\r\n\t\tselectPreviousBlock,\r\n\t} = useDispatch( blockEditorStore );\r\n\t// Have the link editing ui open on mount when lacking a url and selected.\r\n\tconst [ isLinkOpen, setIsLinkOpen ] = useState( isSelected && ! url );\r\n\t// Store what element opened the popover, so we know where to return focus to (toolbar button vs navigation link text)\r\n\tconst [ openedBy, setOpenedBy ] = useState( null );\r\n\t// Use internal state instead of a ref to make sure that the component\r\n\t// re-renders when the popover's anchor updates.\r\n\tconst [ popoverAnchor, setPopoverAnchor ] = useState( null );\r\n\tconst listItemRef = useRef( null );\r\n\tconst isDraggingWithin = useIsDraggingWithin( listItemRef );\r\n\tconst itemLabelPlaceholder = __( 'Add labelâ€¦' );\r\n\tconst ref = useRef();\r\n\tconst linkUIref = useRef();\r\n\tconst prevUrl = usePrevious( url );\r\n\r\n\t// Change the label using inspector causes rich text to change focus on firefox.\r\n\t// This is a workaround to keep the focus on the label field when label filed is focused we don't render the rich text.\r\n\tconst [ isLabelFieldFocused, setIsLabelFieldFocused ] = useState( false );\r\n\r\n\tconst {\r\n\t\tisAtMaxNesting,\r\n\t\tisTopLevelLink,\r\n\t\tisParentOfSelectedBlock,\r\n\t\thasChildren,\r\n\t} = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst {\r\n\t\t\t\tgetBlockCount,\r\n\t\t\t\tgetBlockName,\r\n\t\t\t\tgetBlockRootClientId,\r\n\t\t\t\thasSelectedInnerBlock,\r\n\t\t\t\tgetBlockParentsByBlockName,\r\n\t\t\t} = select( blockEditorStore );\r\n\r\n\t\t\treturn {\r\n\t\t\t\tisAtMaxNesting:\r\n\t\t\t\t\tgetBlockParentsByBlockName( clientId, [\r\n\t\t\t\t\t\t'core/navigation-link',\r\n\t\t\t\t\t\t'core/navigation-submenu',\r\n\t\t\t\t\t] ).length >= maxNestingLevel,\r\n\t\t\t\tisTopLevelLink:\r\n\t\t\t\t\tgetBlockName( getBlockRootClientId( clientId ) ) ===\r\n\t\t\t\t\t'core/navigation',\r\n\t\t\t\tisParentOfSelectedBlock: hasSelectedInnerBlock(\r\n\t\t\t\t\tclientId,\r\n\t\t\t\t\ttrue\r\n\t\t\t\t),\r\n\t\t\t\thasChildren: !! getBlockCount( clientId ),\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ clientId, maxNestingLevel ]\r\n\t);\r\n\tconst { getBlocks } = useSelect( blockEditorStore );\r\n\r\n\t/**\r\n\t * Transform to submenu block.\r\n\t */\r\n\tconst transformToSubmenu = () => {\r\n\t\tlet innerBlocks = getBlocks( clientId );\r\n\t\tif ( innerBlocks.length === 0 ) {\r\n\t\t\tinnerBlocks = [ createBlock( 'core/navigation-link' ) ];\r\n\t\t\tselectBlock( innerBlocks[ 0 ].clientId );\r\n\t\t}\r\n\t\tconst newSubmenu = createBlock(\r\n\t\t\t'core/navigation-submenu',\r\n\t\t\tattributes,\r\n\t\t\tinnerBlocks\r\n\t\t);\r\n\t\treplaceBlock( clientId, newSubmenu );\r\n\t};\r\n\r\n\tuseEffect( () => {\r\n\t\t// If block has inner blocks, transform to Submenu.\r\n\t\tif ( hasChildren ) {\r\n\t\t\t// This side-effect should not create an undo level as those should\r\n\t\t\t// only be created via user interactions.\r\n\t\t\t__unstableMarkNextChangeAsNotPersistent();\r\n\t\t\ttransformToSubmenu();\r\n\t\t}\r\n\t}, [ hasChildren ] );\r\n\r\n\t// If the LinkControl popover is open and the URL has changed, close the LinkControl and focus the label text.\r\n\tuseEffect( () => {\r\n\t\t// We only want to do this when the URL has gone from nothing to a new URL AND the label looks like a URL\r\n\t\tif (\r\n\t\t\t! prevUrl &&\r\n\t\t\turl &&\r\n\t\t\tisLinkOpen &&\r\n\t\t\tisURL( prependHTTP( label ) ) &&\r\n\t\t\t/^.+\\.[a-z]+/.test( label )\r\n\t\t) {\r\n\t\t\t// Focus and select the label text.\r\n\t\t\tselectLabelText();\r\n\t\t}\r\n\t}, [ prevUrl, url, isLinkOpen, label ] );\r\n\r\n\t/**\r\n\t * Focus the Link label text and select it.\r\n\t */\r\n\tfunction selectLabelText() {\r\n\t\tref.current.focus();\r\n\t\tconst { ownerDocument } = ref.current;\r\n\t\tconst { defaultView } = ownerDocument;\r\n\t\tconst selection = defaultView.getSelection();\r\n\t\tconst range = ownerDocument.createRange();\r\n\t\t// Get the range of the current ref contents so we can add this range to the selection.\r\n\t\trange.selectNodeContents( ref.current );\r\n\t\tselection.removeAllRanges();\r\n\t\tselection.addRange( range );\r\n\t}\r\n\r\n\t/**\r\n\t * Removes the current link if set.\r\n\t */\r\n\tfunction removeLink() {\r\n\t\t// Reset all attributes that comprise the link.\r\n\t\t// It is critical that all attributes are reset\r\n\t\t// to their default values otherwise this may\r\n\t\t// in advertently trigger side effects because\r\n\t\t// the values will have \"changed\".\r\n\t\tsetAttributes( {\r\n\t\t\turl: undefined,\r\n\t\t\tlabel: undefined,\r\n\t\t\tid: undefined,\r\n\t\t\tkind: undefined,\r\n\t\t\ttype: undefined,\r\n\t\t\topensInNewTab: false,\r\n\t\t} );\r\n\r\n\t\t// Close the link editing UI.\r\n\t\tsetIsLinkOpen( false );\r\n\t}\r\n\r\n\tconst {\r\n\t\ttextColor,\r\n\t\tcustomTextColor,\r\n\t\tbackgroundColor,\r\n\t\tcustomBackgroundColor,\r\n\t} = getColors( context, ! isTopLevelLink );\r\n\r\n\tfunction onKeyDown( event ) {\r\n\t\tif ( isKeyboardEvent.primary( event, 'k' ) ) {\r\n\t\t\t// Required to prevent the command center from opening,\r\n\t\t\t// as it shares the CMD+K shortcut.\r\n\t\t\t// See https://github.com/WordPress/gutenberg/pull/59845.\r\n\t\t\tevent.preventDefault();\r\n\t\t\t// If this link is a child of a parent submenu item, the parent submenu item event will also open, closing this popover\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tsetIsLinkOpen( true );\r\n\t\t\tsetOpenedBy( ref.current );\r\n\t\t}\r\n\t}\r\n\r\n\tconst blockProps = useBlockProps( {\r\n\t\tref: useMergeRefs( [ setPopoverAnchor, listItemRef ] ),\r\n\t\tclassName: clsx( 'wp-block-navigation-item', {\r\n\t\t\t'is-editing': isSelected || isParentOfSelectedBlock,\r\n\t\t\t'is-dragging-within': isDraggingWithin,\r\n\t\t\t'has-link': !! url,\r\n\t\t\t'has-child': hasChildren,\r\n\t\t\t'has-text-color': !! textColor || !! customTextColor,\r\n\t\t\t[ getColorClassName( 'color', textColor ) ]: !! textColor,\r\n\t\t\t'has-background': !! backgroundColor || customBackgroundColor,\r\n\t\t\t[ getColorClassName( 'background-color', backgroundColor ) ]:\r\n\t\t\t\t!! backgroundColor,\r\n\t\t} ),\r\n\t\tstyle: {\r\n\t\t\tcolor: ! textColor && customTextColor,\r\n\t\t\tbackgroundColor: ! backgroundColor && customBackgroundColor,\r\n\t\t},\r\n\t\tonKeyDown,\r\n\t} );\r\n\r\n\tconst innerBlocksProps = useInnerBlocksProps(\r\n\t\t{\r\n\t\t\t...blockProps,\r\n\t\t\tclassName: 'remove-outline', // Remove the outline from the inner blocks container.\r\n\t\t},\r\n\t\t{\r\n\t\t\tdefaultBlock: DEFAULT_BLOCK,\r\n\t\t\tdirectInsert: true,\r\n\t\t\trenderAppender: false,\r\n\t\t}\r\n\t);\r\n\r\n\tif ( ! url || isInvalid || isDraft ) {\r\n\t\tblockProps.onClick = () => {\r\n\t\t\tsetIsLinkOpen( true );\r\n\t\t\tsetOpenedBy( ref.current );\r\n\t\t};\r\n\t}\r\n\r\n\tconst classes = clsx( 'wp-block-navigation-item__content', {\r\n\t\t'wp-block-navigation-link__placeholder': ! url || isInvalid || isDraft,\r\n\t} );\r\n\r\n\tconst missingText = getMissingText( type );\r\n\t/* translators: Whether the navigation link is Invalid or a Draft. */\r\n\tconst placeholderText = `(${\r\n\t\tisInvalid ? __( 'Invalid' ) : __( 'Draft' )\r\n\t})`;\r\n\tconst tooltipText =\r\n\t\tisInvalid || isDraft\r\n\t\t\t? __( 'This item has been deleted, or is a draft' )\r\n\t\t\t: __( 'This item is missing a link' );\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<BlockControls>\r\n\t\t\t\t<ToolbarGroup>\r\n\t\t\t\t\t<ToolbarButton\r\n\t\t\t\t\t\tname=\"link\"\r\n\t\t\t\t\t\ticon={ linkIcon }\r\n\t\t\t\t\t\ttitle={ __( 'Link' ) }\r\n\t\t\t\t\t\tshortcut={ displayShortcut.primary( 'k' ) }\r\n\t\t\t\t\t\tonClick={ ( event ) => {\r\n\t\t\t\t\t\t\tsetIsLinkOpen( true );\r\n\t\t\t\t\t\t\tsetOpenedBy( event.currentTarget );\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{ ! isAtMaxNesting && (\r\n\t\t\t\t\t\t<ToolbarButton\r\n\t\t\t\t\t\t\tname=\"submenu\"\r\n\t\t\t\t\t\t\ticon={ addSubmenu }\r\n\t\t\t\t\t\t\ttitle={ __( 'Add submenu' ) }\r\n\t\t\t\t\t\t\tonClick={ transformToSubmenu }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) }\r\n\t\t\t\t</ToolbarGroup>\r\n\t\t\t</BlockControls>\r\n\t\t\t{ /* Warning, this duplicated in packages/block-library/src/navigation-submenu/edit.js */ }\r\n\t\t\t<InspectorControls>\r\n\t\t\t\t<Controls\r\n\t\t\t\t\tattributes={ attributes }\r\n\t\t\t\t\tsetAttributes={ setAttributes }\r\n\t\t\t\t\tsetIsLabelFieldFocused={ setIsLabelFieldFocused }\r\n\t\t\t\t/>\r\n\t\t\t</InspectorControls>\r\n\t\t\t<div { ...blockProps }>\r\n\t\t\t\t{ /* eslint-disable jsx-a11y/anchor-is-valid */ }\r\n\t\t\t\t<a className={ classes }>\r\n\t\t\t\t\t{ /* eslint-enable */ }\r\n\t\t\t\t\t{ ! url ? (\r\n\t\t\t\t\t\t<div className=\"wp-block-navigation-link__placeholder-text\">\r\n\t\t\t\t\t\t\t<Tooltip text={ tooltipText }>\r\n\t\t\t\t\t\t\t\t<span>{ missingText }</span>\r\n\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t{ ! isInvalid &&\r\n\t\t\t\t\t\t\t\t! isDraft &&\r\n\t\t\t\t\t\t\t\t! isLabelFieldFocused && (\r\n\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t<RichText\r\n\t\t\t\t\t\t\t\t\t\t\tref={ ref }\r\n\t\t\t\t\t\t\t\t\t\t\tidentifier=\"label\"\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"wp-block-navigation-item__label\"\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={ label }\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={ ( labelValue ) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetAttributes( {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: labelValue,\r\n\t\t\t\t\t\t\t\t\t\t\t\t} )\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tonMerge={ mergeBlocks }\r\n\t\t\t\t\t\t\t\t\t\t\tonReplace={ onReplace }\r\n\t\t\t\t\t\t\t\t\t\t\t__unstableOnSplitAtEnd={ () =>\r\n\t\t\t\t\t\t\t\t\t\t\t\tinsertBlocksAfter(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcreateBlock(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'core/navigation-link'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\taria-label={ __(\r\n\t\t\t\t\t\t\t\t\t\t\t\t'Navigation link text'\r\n\t\t\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={ itemLabelPlaceholder }\r\n\t\t\t\t\t\t\t\t\t\t\twithoutInteractiveFormatting\r\n\t\t\t\t\t\t\t\t\t\t\tallowedFormats={ [\r\n\t\t\t\t\t\t\t\t\t\t\t\t'core/bold',\r\n\t\t\t\t\t\t\t\t\t\t\t\t'core/italic',\r\n\t\t\t\t\t\t\t\t\t\t\t\t'core/image',\r\n\t\t\t\t\t\t\t\t\t\t\t\t'core/strikethrough',\r\n\t\t\t\t\t\t\t\t\t\t\t] }\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t{ description && (\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"wp-block-navigation-item__description\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{ description }\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t{ ( isInvalid ||\r\n\t\t\t\t\t\t\t\tisDraft ||\r\n\t\t\t\t\t\t\t\tisLabelFieldFocused ) && (\r\n\t\t\t\t\t\t\t\t<div className=\"wp-block-navigation-link__placeholder-text wp-block-navigation-link__label\">\r\n\t\t\t\t\t\t\t\t\t<Tooltip text={ tooltipText }>\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\taria-label={ __(\r\n\t\t\t\t\t\t\t\t\t\t\t\t'Navigation link text'\r\n\t\t\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t// Some attributes are stored in an escaped form. It's a legacy issue.\r\n\t\t\t\t\t\t\t\t\t\t\t\t// Ideally they would be stored in a raw, unescaped form.\r\n\t\t\t\t\t\t\t\t\t\t\t\t// Unescape is used here to \"recover\" the escaped characters\r\n\t\t\t\t\t\t\t\t\t\t\t\t// so they display without encoding.\r\n\t\t\t\t\t\t\t\t\t\t\t\t// See `updateAttributes` for more details.\r\n\t\t\t\t\t\t\t\t\t\t\t\t`${ decodeEntities( label ) } ${\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tisInvalid || isDraft\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? placeholderText\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: ''\r\n\t\t\t\t\t\t\t\t\t\t\t\t}`.trim()\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t) }\r\n\t\t\t\t\t{ isLinkOpen && (\r\n\t\t\t\t\t\t<LinkUI\r\n\t\t\t\t\t\t\tref={ linkUIref }\r\n\t\t\t\t\t\t\tclientId={ clientId }\r\n\t\t\t\t\t\t\tlink={ attributes }\r\n\t\t\t\t\t\t\tonClose={ () => {\r\n\t\t\t\t\t\t\t\t// If there is no link then remove the auto-inserted block.\r\n\t\t\t\t\t\t\t\t// This avoids empty blocks which can provided a poor UX.\r\n\t\t\t\t\t\t\t\tif ( ! url ) {\r\n\t\t\t\t\t\t\t\t\t// Fixes https://github.com/WordPress/gutenberg/issues/61361\r\n\t\t\t\t\t\t\t\t\t// There's a chance we're closing due to the user selecting the browse all button.\r\n\t\t\t\t\t\t\t\t\t// Only move focus if the focus is still within the popover ui. If it's not within\r\n\t\t\t\t\t\t\t\t\t// the popover, it's because something has taken the focus from the popover, and\r\n\t\t\t\t\t\t\t\t\t// we don't want to steal it back.\r\n\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\tlinkUIref.current.contains(\r\n\t\t\t\t\t\t\t\t\t\t\twindow.document.activeElement\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t// Select the previous block to keep focus nearby\r\n\t\t\t\t\t\t\t\t\t\tselectPreviousBlock( clientId, true );\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t// Remove the link.\r\n\t\t\t\t\t\t\t\t\tonReplace( [] );\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tsetIsLinkOpen( false );\r\n\t\t\t\t\t\t\t\tif ( openedBy ) {\r\n\t\t\t\t\t\t\t\t\topenedBy.focus();\r\n\t\t\t\t\t\t\t\t\tsetOpenedBy( null );\r\n\t\t\t\t\t\t\t\t} else if ( ref.current ) {\r\n\t\t\t\t\t\t\t\t\t// select the ref when adding a new link\r\n\t\t\t\t\t\t\t\t\tref.current.focus();\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t// Fallback\r\n\t\t\t\t\t\t\t\t\tselectPreviousBlock( clientId, true );\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\tanchor={ popoverAnchor }\r\n\t\t\t\t\t\t\tonRemove={ removeLink }\r\n\t\t\t\t\t\t\tonChange={ ( updatedValue ) => {\r\n\t\t\t\t\t\t\t\tupdateAttributes(\r\n\t\t\t\t\t\t\t\t\tupdatedValue,\r\n\t\t\t\t\t\t\t\t\tsetAttributes,\r\n\t\t\t\t\t\t\t\t\tattributes\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) }\r\n\t\t\t\t</a>\r\n\t\t\t\t<div { ...innerBlocksProps } />\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}