{"version":3,"names":["useEntityBlockEditor","useInnerBlocksProps","InnerBlocks","store","blockEditorStore","useSelect","useMemo","PlaceholderPreview","DEFAULT_BLOCK","PRIORITIZED_INSERTER_BLOCKS","jsx","_jsx","NavigationInnerBlocks","clientId","hasCustomPlaceholder","orientation","templateLock","isImmediateParentOfSelectedBlock","selectedBlockHasChildren","isSelected","select","getBlockCount","hasSelectedInnerBlock","getSelectedBlockClientId","selectedBlockId","blocks","onInput","onChange","parentOrChildHasSelection","placeholder","hasMenuItems","length","showPlaceholder","innerBlocksProps","className","value","prioritizedInserterBlocks","defaultBlock","directInsert","renderAppender","ButtonBlockAppender","undefined","__experimentalCaptureToolbars","__unstableDisableLayoutClassNames"],"sources":["@wordpress/block-library/src/navigation/edit/inner-blocks.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useEntityBlockEditor } from '@wordpress/core-data';\r\nimport {\r\n\tuseInnerBlocksProps,\r\n\tInnerBlocks,\r\n\tstore as blockEditorStore,\r\n} from '@wordpress/block-editor';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { useMemo } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport PlaceholderPreview from './placeholder/placeholder-preview';\r\nimport { DEFAULT_BLOCK, PRIORITIZED_INSERTER_BLOCKS } from '../constants';\r\n\r\nexport default function NavigationInnerBlocks( {\r\n\tclientId,\r\n\thasCustomPlaceholder,\r\n\torientation,\r\n\ttemplateLock,\r\n} ) {\r\n\tconst {\r\n\t\tisImmediateParentOfSelectedBlock,\r\n\t\tselectedBlockHasChildren,\r\n\t\tisSelected,\r\n\t} = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst {\r\n\t\t\t\tgetBlockCount,\r\n\t\t\t\thasSelectedInnerBlock,\r\n\t\t\t\tgetSelectedBlockClientId,\r\n\t\t\t} = select( blockEditorStore );\r\n\t\t\tconst selectedBlockId = getSelectedBlockClientId();\r\n\r\n\t\t\treturn {\r\n\t\t\t\tisImmediateParentOfSelectedBlock: hasSelectedInnerBlock(\r\n\t\t\t\t\tclientId,\r\n\t\t\t\t\tfalse\r\n\t\t\t\t),\r\n\t\t\t\tselectedBlockHasChildren: !! getBlockCount( selectedBlockId ),\r\n\r\n\t\t\t\t// This prop is already available but computing it here ensures it's\r\n\t\t\t\t// fresh compared to isImmediateParentOfSelectedBlock.\r\n\t\t\t\tisSelected: selectedBlockId === clientId,\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ clientId ]\r\n\t);\r\n\r\n\tconst [ blocks, onInput, onChange ] = useEntityBlockEditor(\r\n\t\t'postType',\r\n\t\t'wp_navigation'\r\n\t);\r\n\r\n\t// When the block is selected itself or has a top level item selected that\r\n\t// doesn't itself have children, show the standard appender. Else show no\r\n\t// appender.\r\n\tconst parentOrChildHasSelection =\r\n\t\tisSelected ||\r\n\t\t( isImmediateParentOfSelectedBlock && ! selectedBlockHasChildren );\r\n\r\n\tconst placeholder = useMemo( () => <PlaceholderPreview />, [] );\r\n\r\n\tconst hasMenuItems = !! blocks?.length;\r\n\r\n\t// If there is a `ref` attribute pointing to a `wp_navigation` but\r\n\t// that menu has no **items** (i.e. empty) then show a placeholder.\r\n\t// The block must also be selected else the placeholder will display\r\n\t// alongside the appender.\r\n\tconst showPlaceholder =\r\n\t\t! hasCustomPlaceholder && ! hasMenuItems && ! isSelected;\r\n\r\n\tconst innerBlocksProps = useInnerBlocksProps(\r\n\t\t{\r\n\t\t\tclassName: 'wp-block-navigation__container',\r\n\t\t},\r\n\t\t{\r\n\t\t\tvalue: blocks,\r\n\t\t\tonInput,\r\n\t\t\tonChange,\r\n\t\t\tprioritizedInserterBlocks: PRIORITIZED_INSERTER_BLOCKS,\r\n\t\t\tdefaultBlock: DEFAULT_BLOCK,\r\n\t\t\tdirectInsert: true,\r\n\t\t\torientation,\r\n\t\t\ttemplateLock,\r\n\r\n\t\t\t// As an exception to other blocks which feature nesting, show\r\n\t\t\t// the block appender even when a child block is selected.\r\n\t\t\t// This should be a temporary fix, to be replaced by improvements to\r\n\t\t\t// the sibling inserter.\r\n\t\t\t// See https://github.com/WordPress/gutenberg/issues/37572.\r\n\t\t\trenderAppender:\r\n\t\t\t\tisSelected ||\r\n\t\t\t\t( isImmediateParentOfSelectedBlock &&\r\n\t\t\t\t\t! selectedBlockHasChildren ) ||\r\n\t\t\t\t// Show the appender while dragging to allow inserting element between item and the appender.\r\n\t\t\t\tparentOrChildHasSelection\r\n\t\t\t\t\t? InnerBlocks.ButtonBlockAppender\r\n\t\t\t\t\t: false,\r\n\t\t\tplaceholder: showPlaceholder ? placeholder : undefined,\r\n\t\t\t__experimentalCaptureToolbars: true,\r\n\t\t\t__unstableDisableLayoutClassNames: true,\r\n\t\t}\r\n\t);\r\n\r\n\treturn <div { ...innerBlocksProps } />;\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,oBAAoB,QAAQ,sBAAsB;AAC3D,SACCC,mBAAmB,EACnBC,WAAW,EACXC,KAAK,IAAIC,gBAAgB,QACnB,yBAAyB;AAChC,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,OAAO,QAAQ,oBAAoB;;AAE5C;AACA;AACA;AACA,OAAOC,kBAAkB,MAAM,mCAAmC;AAClE,SAASC,aAAa,EAAEC,2BAA2B,QAAQ,cAAc;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAE1E,eAAe,SAASC,qBAAqBA,CAAE;EAC9CC,QAAQ;EACRC,oBAAoB;EACpBC,WAAW;EACXC;AACD,CAAC,EAAG;EACH,MAAM;IACLC,gCAAgC;IAChCC,wBAAwB;IACxBC;EACD,CAAC,GAAGd,SAAS,CACVe,MAAM,IAAM;IACb,MAAM;MACLC,aAAa;MACbC,qBAAqB;MACrBC;IACD,CAAC,GAAGH,MAAM,CAAEhB,gBAAiB,CAAC;IAC9B,MAAMoB,eAAe,GAAGD,wBAAwB,CAAC,CAAC;IAElD,OAAO;MACNN,gCAAgC,EAAEK,qBAAqB,CACtDT,QAAQ,EACR,KACD,CAAC;MACDK,wBAAwB,EAAE,CAAC,CAAEG,aAAa,CAAEG,eAAgB,CAAC;MAE7D;MACA;MACAL,UAAU,EAAEK,eAAe,KAAKX;IACjC,CAAC;EACF,CAAC,EACD,CAAEA,QAAQ,CACX,CAAC;EAED,MAAM,CAAEY,MAAM,EAAEC,OAAO,EAAEC,QAAQ,CAAE,GAAG3B,oBAAoB,CACzD,UAAU,EACV,eACD,CAAC;;EAED;EACA;EACA;EACA,MAAM4B,yBAAyB,GAC9BT,UAAU,IACRF,gCAAgC,IAAI,CAAEC,wBAA0B;EAEnE,MAAMW,WAAW,GAAGvB,OAAO,CAAE,mBAAMK,IAAA,CAACJ,kBAAkB,IAAE,CAAC,EAAE,EAAG,CAAC;EAE/D,MAAMuB,YAAY,GAAG,CAAC,CAAEL,MAAM,EAAEM,MAAM;;EAEtC;EACA;EACA;EACA;EACA,MAAMC,eAAe,GACpB,CAAElB,oBAAoB,IAAI,CAAEgB,YAAY,IAAI,CAAEX,UAAU;EAEzD,MAAMc,gBAAgB,GAAGhC,mBAAmB,CAC3C;IACCiC,SAAS,EAAE;EACZ,CAAC,EACD;IACCC,KAAK,EAAEV,MAAM;IACbC,OAAO;IACPC,QAAQ;IACRS,yBAAyB,EAAE3B,2BAA2B;IACtD4B,YAAY,EAAE7B,aAAa;IAC3B8B,YAAY,EAAE,IAAI;IAClBvB,WAAW;IACXC,YAAY;IAEZ;IACA;IACA;IACA;IACA;IACAuB,cAAc,EACbpB,UAAU,IACRF,gCAAgC,IACjC,CAAEC,wBAA0B;IAC7B;IACAU,yBAAyB,GACtB1B,WAAW,CAACsC,mBAAmB,GAC/B,KAAK;IACTX,WAAW,EAAEG,eAAe,GAAGH,WAAW,GAAGY,SAAS;IACtDC,6BAA6B,EAAE,IAAI;IACnCC,iCAAiC,EAAE;EACpC,CACD,CAAC;EAED,oBAAOhC,IAAA;IAAA,GAAUsB;EAAgB,CAAI,CAAC;AACvC","ignoreList":[]}