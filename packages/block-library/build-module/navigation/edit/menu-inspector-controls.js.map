{"version":3,"names":["privateApis","blockEditorPrivateApis","InspectorControls","store","blockEditorStore","PanelBody","__experimentalHStack","HStack","__experimentalHeading","Heading","Spinner","useSelect","useDispatch","__","sprintf","NavigationMenuSelector","unlock","DeletedNavigationWarning","useNavigationMenu","LeafMoreMenu","updateAttributes","LinkUI","jsx","_jsx","jsxs","_jsxs","actionLabel","BLOCKS_WITH_LINK_UI_SUPPORT","PrivateListView","AdditionalBlockContent","block","insertedBlock","setInsertedBlock","updateBlockAttributes","supportsLinkControls","includes","name","blockWasJustInserted","clientId","showLinkControls","setInsertedBlockAttributes","_insertedBlockClientId","_updatedAttributes","link","attributes","onClose","onChange","updatedValue","onCancel","MainContent","currentMenuId","isLoading","isNavigationMenuMissing","onCreateNew","hasChildren","select","getBlockCount","navigationMenu","description","title","className","children","rootClientId","isExpanded","showAppender","blockSettingsMenu","additionalBlockContent","MenuInspectorControls","props","createNavigationMenuIsSuccess","createNavigationMenuIsError","onSelectClassicMenu","onSelectNavigationMenu","isManageMenusButtonDisabled","blockEditingMode","group","level"],"sources":["@wordpress/block-library/src/navigation/edit/menu-inspector-controls.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tprivateApis as blockEditorPrivateApis,\r\n\tInspectorControls,\r\n\tstore as blockEditorStore,\r\n} from '@wordpress/block-editor';\r\nimport {\r\n\tPanelBody,\r\n\t__experimentalHStack as HStack,\r\n\t__experimentalHeading as Heading,\r\n\tSpinner,\r\n} from '@wordpress/components';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport NavigationMenuSelector from './navigation-menu-selector';\r\nimport { unlock } from '../../lock-unlock';\r\nimport DeletedNavigationWarning from './deleted-navigation-warning';\r\nimport useNavigationMenu from '../use-navigation-menu';\r\nimport LeafMoreMenu from './leaf-more-menu';\r\nimport { updateAttributes } from '../../navigation-link/update-attributes';\r\nimport { LinkUI } from '../../navigation-link/link-ui';\r\n\r\n/* translators: %s: The name of a menu. */\r\nconst actionLabel = __( \"Switch to '%s'\" );\r\nconst BLOCKS_WITH_LINK_UI_SUPPORT = [\r\n\t'core/navigation-link',\r\n\t'core/navigation-submenu',\r\n];\r\nconst { PrivateListView } = unlock( blockEditorPrivateApis );\r\n\r\nfunction AdditionalBlockContent( { block, insertedBlock, setInsertedBlock } ) {\r\n\tconst { updateBlockAttributes } = useDispatch( blockEditorStore );\r\n\r\n\tconst supportsLinkControls = BLOCKS_WITH_LINK_UI_SUPPORT?.includes(\r\n\t\tinsertedBlock?.name\r\n\t);\r\n\tconst blockWasJustInserted = insertedBlock?.clientId === block.clientId;\r\n\tconst showLinkControls = supportsLinkControls && blockWasJustInserted;\r\n\r\n\tif ( ! showLinkControls ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst setInsertedBlockAttributes =\r\n\t\t( _insertedBlockClientId ) => ( _updatedAttributes ) => {\r\n\t\t\tif ( ! _insertedBlockClientId ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tupdateBlockAttributes( _insertedBlockClientId, _updatedAttributes );\r\n\t\t};\r\n\r\n\treturn (\r\n\t\t<LinkUI\r\n\t\t\tclientId={ insertedBlock?.clientId }\r\n\t\t\tlink={ insertedBlock?.attributes }\r\n\t\t\tonClose={ () => {\r\n\t\t\t\tsetInsertedBlock( null );\r\n\t\t\t} }\r\n\t\t\tonChange={ ( updatedValue ) => {\r\n\t\t\t\tupdateAttributes(\r\n\t\t\t\t\tupdatedValue,\r\n\t\t\t\t\tsetInsertedBlockAttributes( insertedBlock?.clientId ),\r\n\t\t\t\t\tinsertedBlock?.attributes\r\n\t\t\t\t);\r\n\t\t\t\tsetInsertedBlock( null );\r\n\t\t\t} }\r\n\t\t\tonCancel={ () => {\r\n\t\t\t\tsetInsertedBlock( null );\r\n\t\t\t} }\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nconst MainContent = ( {\r\n\tclientId,\r\n\tcurrentMenuId,\r\n\tisLoading,\r\n\tisNavigationMenuMissing,\r\n\tonCreateNew,\r\n} ) => {\r\n\tconst hasChildren = useSelect(\r\n\t\t( select ) => {\r\n\t\t\treturn !! select( blockEditorStore ).getBlockCount( clientId );\r\n\t\t},\r\n\t\t[ clientId ]\r\n\t);\r\n\r\n\tconst { navigationMenu } = useNavigationMenu( currentMenuId );\r\n\r\n\tif ( currentMenuId && isNavigationMenuMissing ) {\r\n\t\treturn <DeletedNavigationWarning onCreateNew={ onCreateNew } />;\r\n\t}\r\n\r\n\tif ( isLoading ) {\r\n\t\treturn <Spinner />;\r\n\t}\r\n\r\n\tconst description = navigationMenu\r\n\t\t? sprintf(\r\n\t\t\t\t/* translators: %s: The name of a menu. */\r\n\t\t\t\t__( 'Structure for Navigation Menu: %s' ),\r\n\t\t\t\tnavigationMenu?.title || __( 'Untitled menu' )\r\n\t\t  )\r\n\t\t: __(\r\n\t\t\t\t'You have not yet created any menus. Displaying a list of your Pages'\r\n\t\t  );\r\n\r\n\treturn (\r\n\t\t<div className=\"wp-block-navigation__menu-inspector-controls\">\r\n\t\t\t{ ! hasChildren && (\r\n\t\t\t\t<p className=\"wp-block-navigation__menu-inspector-controls__empty-message\">\r\n\t\t\t\t\t{ __( 'This Navigation Menu is empty.' ) }\r\n\t\t\t\t</p>\r\n\t\t\t) }\r\n\t\t\t<PrivateListView\r\n\t\t\t\trootClientId={ clientId }\r\n\t\t\t\tisExpanded\r\n\t\t\t\tdescription={ description }\r\n\t\t\t\tshowAppender\r\n\t\t\t\tblockSettingsMenu={ LeafMoreMenu }\r\n\t\t\t\tadditionalBlockContent={ AdditionalBlockContent }\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst MenuInspectorControls = ( props ) => {\r\n\tconst {\r\n\t\tcreateNavigationMenuIsSuccess,\r\n\t\tcreateNavigationMenuIsError,\r\n\t\tcurrentMenuId = null,\r\n\t\tonCreateNew,\r\n\t\tonSelectClassicMenu,\r\n\t\tonSelectNavigationMenu,\r\n\t\tisManageMenusButtonDisabled,\r\n\t\tblockEditingMode,\r\n\t} = props;\r\n\r\n\treturn (\r\n\t\t<InspectorControls group=\"list\">\r\n\t\t\t<PanelBody title={ null }>\r\n\t\t\t\t<HStack className=\"wp-block-navigation-off-canvas-editor__header\">\r\n\t\t\t\t\t<Heading\r\n\t\t\t\t\t\tclassName=\"wp-block-navigation-off-canvas-editor__title\"\r\n\t\t\t\t\t\tlevel={ 2 }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ __( 'Menu' ) }\r\n\t\t\t\t\t</Heading>\r\n\t\t\t\t\t{ blockEditingMode === 'default' && (\r\n\t\t\t\t\t\t<NavigationMenuSelector\r\n\t\t\t\t\t\t\tcurrentMenuId={ currentMenuId }\r\n\t\t\t\t\t\t\tonSelectClassicMenu={ onSelectClassicMenu }\r\n\t\t\t\t\t\t\tonSelectNavigationMenu={ onSelectNavigationMenu }\r\n\t\t\t\t\t\t\tonCreateNew={ onCreateNew }\r\n\t\t\t\t\t\t\tcreateNavigationMenuIsSuccess={\r\n\t\t\t\t\t\t\t\tcreateNavigationMenuIsSuccess\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tcreateNavigationMenuIsError={\r\n\t\t\t\t\t\t\t\tcreateNavigationMenuIsError\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tactionLabel={ actionLabel }\r\n\t\t\t\t\t\t\tisManageMenusButtonDisabled={\r\n\t\t\t\t\t\t\t\tisManageMenusButtonDisabled\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) }\r\n\t\t\t\t</HStack>\r\n\t\t\t\t<MainContent { ...props } />\r\n\t\t\t</PanelBody>\r\n\t\t</InspectorControls>\r\n\t);\r\n};\r\n\r\nexport default MenuInspectorControls;\r\n"],"mappings":"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","ignoreList":[]}