{"version":3,"names":["store","blockEditorStore","coreStore","useSelect","createTemplatePartId","useTemplatePartAreaLabel","clientId","select","getBlock","getBlockParentsByBlockName","withAscendingResults","parentTemplatePartClientIds","length","definedAreas","__experimentalGetDefaultTemplatePartAreas","getCurrentTheme","getEditedEntityRecord","templatePartClientId","templatePartBlock","theme","stylesheet","slug","attributes","templatePartEntityId","templatePartEntity","area","find","definedArea","label"],"sources":["@wordpress/block-library/src/navigation/use-template-part-area-label.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { store as blockEditorStore } from '@wordpress/block-editor';\r\nimport { store as coreStore } from '@wordpress/core-data';\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\n\r\n// TODO: this util should perhaps be refactored somewhere like core-data.\r\nimport { createTemplatePartId } from '../template-part/edit/utils/create-template-part-id';\r\n\r\nexport default function useTemplatePartAreaLabel( clientId ) {\r\n\treturn useSelect(\r\n\t\t( select ) => {\r\n\t\t\t// Use the lack of a clientId as an opportunity to bypass the rest\r\n\t\t\t// of this hook.\r\n\t\t\tif ( ! clientId ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst { getBlock, getBlockParentsByBlockName } =\r\n\t\t\t\tselect( blockEditorStore );\r\n\r\n\t\t\tconst withAscendingResults = true;\r\n\t\t\tconst parentTemplatePartClientIds = getBlockParentsByBlockName(\r\n\t\t\t\tclientId,\r\n\t\t\t\t'core/template-part',\r\n\t\t\t\twithAscendingResults\r\n\t\t\t);\r\n\r\n\t\t\tif ( ! parentTemplatePartClientIds?.length ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// FIXME: @wordpress/block-library should not depend on @wordpress/editor.\r\n\t\t\t// Blocks can be loaded into a *non-post* block editor.\r\n\t\t\t// This code is lifted from this file:\r\n\t\t\t// packages/block-library/src/template-part/edit/advanced-controls.js\r\n\t\t\t/* eslint-disable @wordpress/data-no-store-string-literals */\r\n\t\t\tconst definedAreas =\r\n\t\t\t\tselect(\r\n\t\t\t\t\t'core/editor'\r\n\t\t\t\t).__experimentalGetDefaultTemplatePartAreas();\r\n\t\t\t/* eslint-enable @wordpress/data-no-store-string-literals */\r\n\t\t\tconst { getCurrentTheme, getEditedEntityRecord } =\r\n\t\t\t\tselect( coreStore );\r\n\r\n\t\t\tfor ( const templatePartClientId of parentTemplatePartClientIds ) {\r\n\t\t\t\tconst templatePartBlock = getBlock( templatePartClientId );\r\n\r\n\t\t\t\t// The 'area' usually isn't stored on the block, but instead\r\n\t\t\t\t// on the entity.\r\n\t\t\t\tconst { theme = getCurrentTheme()?.stylesheet, slug } =\r\n\t\t\t\t\ttemplatePartBlock.attributes;\r\n\t\t\t\tconst templatePartEntityId = createTemplatePartId(\r\n\t\t\t\t\ttheme,\r\n\t\t\t\t\tslug\r\n\t\t\t\t);\r\n\t\t\t\tconst templatePartEntity = getEditedEntityRecord(\r\n\t\t\t\t\t'postType',\r\n\t\t\t\t\t'wp_template_part',\r\n\t\t\t\t\ttemplatePartEntityId\r\n\t\t\t\t);\r\n\r\n\t\t\t\t// Look up the `label` for the area in the defined areas so\r\n\t\t\t\t// that an internationalized label can be used.\r\n\t\t\t\tif ( templatePartEntity?.area ) {\r\n\t\t\t\t\treturn definedAreas.find(\r\n\t\t\t\t\t\t( definedArea ) =>\r\n\t\t\t\t\t\t\tdefinedArea.area !== 'uncategorized' &&\r\n\t\t\t\t\t\t\tdefinedArea.area === templatePartEntity.area\r\n\t\t\t\t\t)?.label;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t[ clientId ]\r\n\t);\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,KAAK,IAAIC,gBAAgB,QAAQ,yBAAyB;AACnE,SAASD,KAAK,IAAIE,SAAS,QAAQ,sBAAsB;AACzD,SAASC,SAAS,QAAQ,iBAAiB;;AAE3C;AACA;AACA;;AAEA;AACA,SAASC,oBAAoB,QAAQ,qDAAqD;AAE1F,eAAe,SAASC,wBAAwBA,CAAEC,QAAQ,EAAG;EAC5D,OAAOH,SAAS,CACbI,MAAM,IAAM;IACb;IACA;IACA,IAAK,CAAED,QAAQ,EAAG;MACjB;IACD;IAEA,MAAM;MAAEE,QAAQ;MAAEC;IAA2B,CAAC,GAC7CF,MAAM,CAAEN,gBAAiB,CAAC;IAE3B,MAAMS,oBAAoB,GAAG,IAAI;IACjC,MAAMC,2BAA2B,GAAGF,0BAA0B,CAC7DH,QAAQ,EACR,oBAAoB,EACpBI,oBACD,CAAC;IAED,IAAK,CAAEC,2BAA2B,EAAEC,MAAM,EAAG;MAC5C;IACD;;IAEA;IACA;IACA;IACA;IACA;IACA,MAAMC,YAAY,GACjBN,MAAM,CACL,aACD,CAAC,CAACO,yCAAyC,CAAC,CAAC;IAC9C;IACA,MAAM;MAAEC,eAAe;MAAEC;IAAsB,CAAC,GAC/CT,MAAM,CAAEL,SAAU,CAAC;IAEpB,KAAM,MAAMe,oBAAoB,IAAIN,2BAA2B,EAAG;MACjE,MAAMO,iBAAiB,GAAGV,QAAQ,CAAES,oBAAqB,CAAC;;MAE1D;MACA;MACA,MAAM;QAAEE,KAAK,GAAGJ,eAAe,CAAC,CAAC,EAAEK,UAAU;QAAEC;MAAK,CAAC,GACpDH,iBAAiB,CAACI,UAAU;MAC7B,MAAMC,oBAAoB,GAAGnB,oBAAoB,CAChDe,KAAK,EACLE,IACD,CAAC;MACD,MAAMG,kBAAkB,GAAGR,qBAAqB,CAC/C,UAAU,EACV,kBAAkB,EAClBO,oBACD,CAAC;;MAED;MACA;MACA,IAAKC,kBAAkB,EAAEC,IAAI,EAAG;QAC/B,OAAOZ,YAAY,CAACa,IAAI,CACrBC,WAAW,IACZA,WAAW,CAACF,IAAI,KAAK,eAAe,IACpCE,WAAW,CAACF,IAAI,KAAKD,kBAAkB,CAACC,IAC1C,CAAC,EAAEG,KAAK;MACT;IACD;EACD,CAAC,EACD,CAAEtB,QAAQ,CACX,CAAC;AACF","ignoreList":[]}