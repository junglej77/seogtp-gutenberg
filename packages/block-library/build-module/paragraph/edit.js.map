{"version":3,"names":["clsx","__","_x","isRTL","ToolbarButton","ToggleControl","__experimentalToolsPanelItem","ToolsPanelItem","AlignmentControl","BlockControls","InspectorControls","RichText","useBlockProps","useSettings","useBlockEditingMode","formatLtr","useOnEnter","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ParagraphRTLControl","direction","setDirection","icon","title","isActive","onClick","undefined","hasDropCapDisabled","align","DropCapControl","clientId","attributes","setAttributes","isDropCapFeatureEnabled","dropCap","helpText","hasValue","label","onDeselect","resetAllFilter","panelId","children","__nextHasNoMarginBottom","checked","onChange","help","disabled","ParagraphBlock","mergeBlocks","onReplace","onRemove","content","placeholder","blockProps","ref","className","style","blockEditingMode","group","value","newAlign","newDirection","identifier","tagName","newContent","onMerge","isEmpty","__unstableEmbedURLOnPaste","__unstableAllowPrefixTransformations"],"sources":["D:/jungle/gutenberg/packages/block-library/src/paragraph/edit.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { __, _x, isRTL } from '@wordpress/i18n';\r\nimport {\r\n\tToolbarButton,\r\n\tToggleControl,\r\n\t__experimentalToolsPanelItem as ToolsPanelItem,\r\n} from '@wordpress/components';\r\nimport {\r\n\tAlignmentControl,\r\n\tBlockControls,\r\n\tInspectorControls,\r\n\tRichText,\r\n\tuseBlockProps,\r\n\tuseSettings,\r\n\tuseBlockEditingMode,\r\n} from '@wordpress/block-editor';\r\nimport { formatLtr } from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { useOnEnter } from './use-enter';\r\n\r\nfunction ParagraphRTLControl( { direction, setDirection } ) {\r\n\treturn (\r\n\t\tisRTL() && (\r\n\t\t\t<ToolbarButton\r\n\t\t\t\ticon={ formatLtr }\r\n\t\t\t\ttitle={ _x( 'Left to right', 'editor button' ) }\r\n\t\t\t\tisActive={ direction === 'ltr' }\r\n\t\t\t\tonClick={ () => {\r\n\t\t\t\t\tsetDirection( direction === 'ltr' ? undefined : 'ltr' );\r\n\t\t\t\t} }\r\n\t\t\t/>\r\n\t\t)\r\n\t);\r\n}\r\n\r\nfunction hasDropCapDisabled( align ) {\r\n\treturn align === ( isRTL() ? 'left' : 'right' ) || align === 'center';\r\n}\r\n\r\nfunction DropCapControl( { clientId, attributes, setAttributes } ) {\r\n\t// Please do not add a useSelect call to the paragraph block unconditionally.\r\n\t// Every useSelect added to a (frequently used) block will degrade load\r\n\t// and type performance. By moving it within InspectorControls, the subscription is\r\n\t// now only added for the selected block(s).\r\n\tconst [ isDropCapFeatureEnabled ] = useSettings( 'typography.dropCap' );\r\n\r\n\tif ( ! isDropCapFeatureEnabled ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst { align, dropCap } = attributes;\r\n\r\n\tlet helpText;\r\n\tif ( hasDropCapDisabled( align ) ) {\r\n\t\thelpText = __( 'Not available for aligned text.' );\r\n\t} else if ( dropCap ) {\r\n\t\thelpText = __( 'Showing large initial letter.' );\r\n\t} else {\r\n\t\thelpText = __( 'Toggle to show a large initial letter.' );\r\n\t}\r\n\r\n\treturn (\r\n\t\t<ToolsPanelItem\r\n\t\t\thasValue={ () => !! dropCap }\r\n\t\t\tlabel={ __( 'Drop cap' ) }\r\n\t\t\tonDeselect={ () => setAttributes( { dropCap: undefined } ) }\r\n\t\t\tresetAllFilter={ () => ( { dropCap: undefined } ) }\r\n\t\t\tpanelId={ clientId }\r\n\t\t>\r\n\t\t\t<ToggleControl\r\n\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\tlabel={ __( 'Drop cap' ) }\r\n\t\t\t\tchecked={ !! dropCap }\r\n\t\t\t\tonChange={ () => setAttributes( { dropCap: ! dropCap } ) }\r\n\t\t\t\thelp={ helpText }\r\n\t\t\t\tdisabled={ hasDropCapDisabled( align ) ? true : false }\r\n\t\t\t/>\r\n\t\t</ToolsPanelItem>\r\n\t);\r\n}\r\n\r\nfunction ParagraphBlock( {\r\n\tattributes,\r\n\tmergeBlocks,\r\n\tonReplace,\r\n\tonRemove,\r\n\tsetAttributes,\r\n\tclientId,\r\n} ) {\r\n\tconst { align, content, direction, dropCap, placeholder } = attributes;\r\n\tconst blockProps = useBlockProps( {\r\n\t\tref: useOnEnter( { clientId, content } ),\r\n\t\tclassName: clsx( {\r\n\t\t\t'has-drop-cap': hasDropCapDisabled( align ) ? false : dropCap,\r\n\t\t\t[ `has-text-align-${ align }` ]: align,\r\n\t\t} ),\r\n\t\tstyle: { direction },\r\n\t} );\r\n\tconst blockEditingMode = useBlockEditingMode();\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ blockEditingMode === 'default' && (\r\n\t\t\t\t<BlockControls group=\"block\">\r\n\t\t\t\t\t<AlignmentControl\r\n\t\t\t\t\t\tvalue={ align }\r\n\t\t\t\t\t\tonChange={ ( newAlign ) =>\r\n\t\t\t\t\t\t\tsetAttributes( {\r\n\t\t\t\t\t\t\t\talign: newAlign,\r\n\t\t\t\t\t\t\t\tdropCap: hasDropCapDisabled( newAlign )\r\n\t\t\t\t\t\t\t\t\t? false\r\n\t\t\t\t\t\t\t\t\t: dropCap,\r\n\t\t\t\t\t\t\t} )\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<ParagraphRTLControl\r\n\t\t\t\t\t\tdirection={ direction }\r\n\t\t\t\t\t\tsetDirection={ ( newDirection ) =>\r\n\t\t\t\t\t\t\tsetAttributes( { direction: newDirection } )\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</BlockControls>\r\n\t\t\t) }\r\n\t\t\t{/* <InspectorControls group=\"typography\">\r\n\t\t\t\t<DropCapControl\r\n\t\t\t\t\tclientId={ clientId }\r\n\t\t\t\t\tattributes={ attributes }\r\n\t\t\t\t\tsetAttributes={ setAttributes }\r\n\t\t\t\t/>\r\n\t\t\t</InspectorControls> */}\r\n\t\t\t<RichText\r\n\t\t\t\tidentifier=\"content\"\r\n\t\t\t\ttagName=\"p\"\r\n\t\t\t\t{ ...blockProps }\r\n\t\t\t\tvalue={ content }\r\n\t\t\t\tonChange={ ( newContent ) =>\r\n\t\t\t\t\tsetAttributes( { content: newContent } )\r\n\t\t\t\t}\r\n\t\t\t\tonMerge={ mergeBlocks }\r\n\t\t\t\tonReplace={ onReplace }\r\n\t\t\t\tonRemove={ onRemove }\r\n\t\t\t\taria-label={\r\n\t\t\t\t\tRichText.isEmpty( content )\r\n\t\t\t\t\t\t? __(\r\n\t\t\t\t\t\t\t\t'Empty block; start writing or type forward slash to choose a block'\r\n\t\t\t\t\t\t  )\r\n\t\t\t\t\t\t: __( 'Block: Paragraph' )\r\n\t\t\t\t}\r\n\t\t\t\tdata-empty={ RichText.isEmpty( content ) }\r\n\t\t\t\tplaceholder={ placeholder || __( 'Type / to choose a block' ) }\r\n\t\t\t\tdata-custom-placeholder={ placeholder ? true : undefined }\r\n\t\t\t\t__unstableEmbedURLOnPaste\r\n\t\t\t\t__unstableAllowPrefixTransformations\r\n\t\t\t/>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default ParagraphBlock;\r\n"],"mappings":"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","ignoreList":[]}