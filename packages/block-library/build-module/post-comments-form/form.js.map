{"version":3,"names":["clsx","__","_x","sprintf","Warning","store","blockEditorStore","__experimentalGetElementClassName","Button","useInstanceId","useEntityProp","coreStore","useSelect","jsx","_jsx","jsxs","_jsxs","CommentsFormPlaceholder","instanceId","className","children","noValidate","onSubmit","event","preventDefault","htmlFor","id","name","cols","rows","readOnly","type","label","value","CommentsForm","postId","postType","commentStatus","setCommentStatus","isSiteEditor","undefined","defaultCommentStatus","select","getSettings","__experimentalDiscussionSettings","postTypeSupportsComments","getPostType","supports","comments","actions","__next40pxDefaultSize","onClick","variant"],"sources":["@wordpress/block-library/src/post-comments-form/form.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { __, _x, sprintf } from '@wordpress/i18n';\r\nimport {\r\n\tWarning,\r\n\tstore as blockEditorStore,\r\n\t__experimentalGetElementClassName,\r\n} from '@wordpress/block-editor';\r\nimport { Button } from '@wordpress/components';\r\nimport { useInstanceId } from '@wordpress/compose';\r\nimport { useEntityProp, store as coreStore } from '@wordpress/core-data';\r\nimport { useSelect } from '@wordpress/data';\r\n\r\nconst CommentsFormPlaceholder = () => {\r\n\tconst instanceId = useInstanceId( CommentsFormPlaceholder );\r\n\r\n\treturn (\r\n\t\t<div className=\"comment-respond\">\r\n\t\t\t<h3 className=\"comment-reply-title\">{ __( 'Leave a Reply' ) }</h3>\r\n\t\t\t<form\r\n\t\t\t\tnoValidate\r\n\t\t\t\tclassName=\"comment-form\"\r\n\t\t\t\tonSubmit={ ( event ) => event.preventDefault() }\r\n\t\t\t>\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<label htmlFor={ `comment-${ instanceId }` }>\r\n\t\t\t\t\t\t{ __( 'Comment' ) }\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<textarea\r\n\t\t\t\t\t\tid={ `comment-${ instanceId }` }\r\n\t\t\t\t\t\tname=\"comment\"\r\n\t\t\t\t\t\tcols=\"45\"\r\n\t\t\t\t\t\trows=\"8\"\r\n\t\t\t\t\t\treadOnly\r\n\t\t\t\t\t/>\r\n\t\t\t\t</p>\r\n\t\t\t\t<p className=\"form-submit wp-block-button\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tname=\"submit\"\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tclassName={ clsx(\r\n\t\t\t\t\t\t\t'wp-block-button__link',\r\n\t\t\t\t\t\t\t__experimentalGetElementClassName( 'button' )\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t\tlabel={ __( 'Post Comment' ) }\r\n\t\t\t\t\t\tvalue={ __( 'Post Comment' ) }\r\n\t\t\t\t\t\taria-disabled=\"true\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</p>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst CommentsForm = ( { postId, postType } ) => {\r\n\tconst [ commentStatus, setCommentStatus ] = useEntityProp(\r\n\t\t'postType',\r\n\t\tpostType,\r\n\t\t'comment_status',\r\n\t\tpostId\r\n\t);\r\n\r\n\tconst isSiteEditor = postType === undefined || postId === undefined;\r\n\r\n\tconst { defaultCommentStatus } = useSelect(\r\n\t\t( select ) =>\r\n\t\t\tselect( blockEditorStore ).getSettings()\r\n\t\t\t\t.__experimentalDiscussionSettings\r\n\t);\r\n\r\n\tconst postTypeSupportsComments = useSelect( ( select ) =>\r\n\t\tpostType\r\n\t\t\t? !! select( coreStore ).getPostType( postType )?.supports.comments\r\n\t\t\t: false\r\n\t);\r\n\r\n\tif ( ! isSiteEditor && 'open' !== commentStatus ) {\r\n\t\tif ( 'closed' === commentStatus ) {\r\n\t\t\tconst actions = [\r\n\t\t\t\t<Button\r\n\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\tkey=\"enableComments\"\r\n\t\t\t\t\tonClick={ () => setCommentStatus( 'open' ) }\r\n\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{ _x(\r\n\t\t\t\t\t\t'Enable comments',\r\n\t\t\t\t\t\t'action that affects the current post'\r\n\t\t\t\t\t) }\r\n\t\t\t\t</Button>,\r\n\t\t\t];\r\n\t\t\treturn (\r\n\t\t\t\t<Warning actions={ actions }>\r\n\t\t\t\t\t{ __(\r\n\t\t\t\t\t\t'Post Comments Form block: Comments are not enabled for this item.'\r\n\t\t\t\t\t) }\r\n\t\t\t\t</Warning>\r\n\t\t\t);\r\n\t\t} else if ( ! postTypeSupportsComments ) {\r\n\t\t\treturn (\r\n\t\t\t\t<Warning>\r\n\t\t\t\t\t{ sprintf(\r\n\t\t\t\t\t\t/* translators: 1: Post type (i.e. \"post\", \"page\") */\r\n\t\t\t\t\t\t__(\r\n\t\t\t\t\t\t\t'Post Comments Form block: Comments are not enabled for this post type (%s).'\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\tpostType\r\n\t\t\t\t\t) }\r\n\t\t\t\t</Warning>\r\n\t\t\t);\r\n\t\t} else if ( 'open' !== defaultCommentStatus ) {\r\n\t\t\treturn (\r\n\t\t\t\t<Warning>\r\n\t\t\t\t\t{ __(\r\n\t\t\t\t\t\t'Post Comments Form block: Comments are not enabled.'\r\n\t\t\t\t\t) }\r\n\t\t\t\t</Warning>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\treturn <CommentsFormPlaceholder />;\r\n};\r\n\r\nexport default CommentsForm;\r\n"],"mappings":"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","ignoreList":[]}