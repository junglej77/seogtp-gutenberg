{"version":3,"names":["clsx","isBlobURL","useEntityProp","store","coreStore","useSelect","useDispatch","ToggleControl","PanelBody","Placeholder","Button","Spinner","TextControl","InspectorControls","BlockControls","MediaPlaceholder","MediaReplaceFlow","useBlockProps","__experimentalUseBorderProps","useBorderProps","__experimentalGetShadowClassesAndStyles","getShadowClassesAndStyles","useBlockEditingMode","useMemo","useEffect","useState","__","sprintf","upload","noticesStore","DimensionControls","OverlayControls","Overlay","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","ALLOWED_MEDIA_TYPES","getMediaSourceUrlBySizeSlug","media","slug","media_details","sizes","source_url","disabledClickProps","onClick","event","preventDefault","PostFeaturedImageEdit","clientId","attributes","setAttributes","context","postId","postType","postTypeSlug","queryId","isDescendentOfQueryLoop","Number","isFinite","isLink","aspectRatio","height","width","scale","sizeSlug","rel","linkTarget","useFirstImageFromPost","temporaryURL","setTemporaryURL","storedFeaturedImage","setFeaturedImage","postContent","featuredImage","imageOpener","exec","imageId","groups","attrs","JSON","parse","id","postPermalink","select","getMedia","getPostType","getEditedEntityRecord","link","mediaUrl","blockProps","style","className","borderProps","shadowProps","blockEditingMode","placeholder","content","withIllustration","children","onSelectImage","value","url","createErrorNotice","onUploadError","message","type","controls","group","title","__nextHasNoMarginBottom","label","labels","singular_name","onChange","checked","__next40pxDefaultSize","newRel","image","href","target","imageStyles","objectFit","onSelect","accept","allowedTypes","onError","mediaLibraryButton","open","icon","variant","showTooltip","tooltipPosition","src","alt","alt_text","mediaId","mediaURL","onReset"],"sources":["@wordpress/block-library/src/post-featured-image/edit.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { isBlobURL } from '@wordpress/blob';\r\nimport { useEntityProp, store as coreStore } from '@wordpress/core-data';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport {\r\n\tToggleControl,\r\n\tPanelBody,\r\n\tPlaceholder,\r\n\tButton,\r\n\tSpinner,\r\n\tTextControl,\r\n} from '@wordpress/components';\r\nimport {\r\n\tInspectorControls,\r\n\tBlockControls,\r\n\tMediaPlaceholder,\r\n\tMediaReplaceFlow,\r\n\tuseBlockProps,\r\n\t__experimentalUseBorderProps as useBorderProps,\r\n\t__experimentalGetShadowClassesAndStyles as getShadowClassesAndStyles,\r\n\tuseBlockEditingMode,\r\n} from '@wordpress/block-editor';\r\nimport { useMemo, useEffect, useState } from '@wordpress/element';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { upload } from '@wordpress/icons';\r\nimport { store as noticesStore } from '@wordpress/notices';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport DimensionControls from './dimension-controls';\r\nimport OverlayControls from './overlay-controls';\r\nimport Overlay from './overlay';\r\n\r\nconst ALLOWED_MEDIA_TYPES = [ 'image' ];\r\n\r\nfunction getMediaSourceUrlBySizeSlug( media, slug ) {\r\n\treturn (\r\n\t\tmedia?.media_details?.sizes?.[ slug ]?.source_url || media?.source_url\r\n\t);\r\n}\r\n\r\nconst disabledClickProps = {\r\n\tonClick: ( event ) => event.preventDefault(),\r\n\t'aria-disabled': true,\r\n};\r\n\r\nexport default function PostFeaturedImageEdit( {\r\n\tclientId,\r\n\tattributes,\r\n\tsetAttributes,\r\n\tcontext: { postId, postType: postTypeSlug, queryId },\r\n} ) {\r\n\tconst isDescendentOfQueryLoop = Number.isFinite( queryId );\r\n\tconst {\r\n\t\tisLink,\r\n\t\taspectRatio,\r\n\t\theight,\r\n\t\twidth,\r\n\t\tscale,\r\n\t\tsizeSlug,\r\n\t\trel,\r\n\t\tlinkTarget,\r\n\t\tuseFirstImageFromPost,\r\n\t} = attributes;\r\n\tconst [ temporaryURL, setTemporaryURL ] = useState();\r\n\r\n\tconst [ storedFeaturedImage, setFeaturedImage ] = useEntityProp(\r\n\t\t'postType',\r\n\t\tpostTypeSlug,\r\n\t\t'featured_media',\r\n\t\tpostId\r\n\t);\r\n\r\n\t// Fallback to post content if no featured image is set.\r\n\t// This is needed for the \"Use first image from post\" option.\r\n\tconst [ postContent ] = useEntityProp(\r\n\t\t'postType',\r\n\t\tpostTypeSlug,\r\n\t\t'content',\r\n\t\tpostId\r\n\t);\r\n\r\n\tconst featuredImage = useMemo( () => {\r\n\t\tif ( storedFeaturedImage ) {\r\n\t\t\treturn storedFeaturedImage;\r\n\t\t}\r\n\r\n\t\tif ( ! useFirstImageFromPost ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst imageOpener =\r\n\t\t\t/<!--\\s+wp:(?:core\\/)?image\\s+(?<attrs>{(?:(?:[^}]+|}+(?=})|(?!}\\s+\\/?-->).)*)?}\\s+)?-->/.exec(\r\n\t\t\t\tpostContent\r\n\t\t\t);\r\n\t\tconst imageId =\r\n\t\t\timageOpener?.groups?.attrs &&\r\n\t\t\tJSON.parse( imageOpener.groups.attrs )?.id;\r\n\t\treturn imageId;\r\n\t}, [ storedFeaturedImage, useFirstImageFromPost, postContent ] );\r\n\r\n\tconst { media, postType, postPermalink } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst { getMedia, getPostType, getEditedEntityRecord } =\r\n\t\t\t\tselect( coreStore );\r\n\t\t\treturn {\r\n\t\t\t\tmedia:\r\n\t\t\t\t\tfeaturedImage &&\r\n\t\t\t\t\tgetMedia( featuredImage, {\r\n\t\t\t\t\t\tcontext: 'view',\r\n\t\t\t\t\t} ),\r\n\t\t\t\tpostType: postTypeSlug && getPostType( postTypeSlug ),\r\n\t\t\t\tpostPermalink: getEditedEntityRecord(\r\n\t\t\t\t\t'postType',\r\n\t\t\t\t\tpostTypeSlug,\r\n\t\t\t\t\tpostId\r\n\t\t\t\t)?.link,\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ featuredImage, postTypeSlug, postId ]\r\n\t);\r\n\r\n\tconst mediaUrl = getMediaSourceUrlBySizeSlug( media, sizeSlug );\r\n\r\n\tconst blockProps = useBlockProps( {\r\n\t\tstyle: { width, height, aspectRatio },\r\n\t\tclassName: clsx( {\r\n\t\t\t'is-transient': temporaryURL,\r\n\t\t} ),\r\n\t} );\r\n\tconst borderProps = useBorderProps( attributes );\r\n\tconst shadowProps = getShadowClassesAndStyles( attributes );\r\n\tconst blockEditingMode = useBlockEditingMode();\r\n\r\n\tconst placeholder = ( content ) => {\r\n\t\treturn (\r\n\t\t\t<Placeholder\r\n\t\t\t\tclassName={ clsx(\r\n\t\t\t\t\t'block-editor-media-placeholder',\r\n\t\t\t\t\tborderProps.className\r\n\t\t\t\t) }\r\n\t\t\t\twithIllustration\r\n\t\t\t\tstyle={ {\r\n\t\t\t\t\theight: !! aspectRatio && '100%',\r\n\t\t\t\t\twidth: !! aspectRatio && '100%',\r\n\t\t\t\t\t...borderProps.style,\r\n\t\t\t\t\t...shadowProps.style,\r\n\t\t\t\t} }\r\n\t\t\t>\r\n\t\t\t\t{ content }\r\n\t\t\t</Placeholder>\r\n\t\t);\r\n\t};\r\n\r\n\tconst onSelectImage = ( value ) => {\r\n\t\tif ( value?.id ) {\r\n\t\t\tsetFeaturedImage( value.id );\r\n\t\t}\r\n\r\n\t\tif ( value?.url && isBlobURL( value.url ) ) {\r\n\t\t\tsetTemporaryURL( value.url );\r\n\t\t}\r\n\t};\r\n\r\n\t// Reset temporary url when media is available.\r\n\tuseEffect( () => {\r\n\t\tif ( mediaUrl && temporaryURL ) {\r\n\t\t\tsetTemporaryURL();\r\n\t\t}\r\n\t}, [ mediaUrl, temporaryURL ] );\r\n\r\n\tconst { createErrorNotice } = useDispatch( noticesStore );\r\n\tconst onUploadError = ( message ) => {\r\n\t\tcreateErrorNotice( message, { type: 'snackbar' } );\r\n\t\tsetTemporaryURL();\r\n\t};\r\n\r\n\tconst controls = blockEditingMode === 'default' && (\r\n\t\t<>\r\n\t\t\t<InspectorControls group=\"color\">\r\n\t\t\t\t<OverlayControls\r\n\t\t\t\t\tattributes={ attributes }\r\n\t\t\t\t\tsetAttributes={ setAttributes }\r\n\t\t\t\t\tclientId={ clientId }\r\n\t\t\t\t/>\r\n\t\t\t</InspectorControls>\r\n\t\t\t<InspectorControls group=\"dimensions\">\r\n\t\t\t\t<DimensionControls\r\n\t\t\t\t\tclientId={ clientId }\r\n\t\t\t\t\tattributes={ attributes }\r\n\t\t\t\t\tsetAttributes={ setAttributes }\r\n\t\t\t\t\tmedia={ media }\r\n\t\t\t\t/>\r\n\t\t\t</InspectorControls>\r\n\t\t\t<InspectorControls>\r\n\t\t\t\t<PanelBody title={ __( 'Settings' ) }>\r\n\t\t\t\t\t<ToggleControl\r\n\t\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\t\tlabel={\r\n\t\t\t\t\t\t\tpostType?.labels.singular_name\r\n\t\t\t\t\t\t\t\t? sprintf(\r\n\t\t\t\t\t\t\t\t\t\t// translators: %s: Name of the post type e.g: \"Page\".\r\n\t\t\t\t\t\t\t\t\t\t__( 'Link to %s' ),\r\n\t\t\t\t\t\t\t\t\t\tpostType.labels.singular_name\r\n\t\t\t\t\t\t\t\t  )\r\n\t\t\t\t\t\t\t\t: __( 'Link to post' )\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonChange={ () => setAttributes( { isLink: ! isLink } ) }\r\n\t\t\t\t\t\tchecked={ isLink }\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{ isLink && (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<ToggleControl\r\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\t\t\t\tlabel={ __( 'Open in new tab' ) }\r\n\t\t\t\t\t\t\t\tonChange={ ( value ) =>\r\n\t\t\t\t\t\t\t\t\tsetAttributes( {\r\n\t\t\t\t\t\t\t\t\t\tlinkTarget: value ? '_blank' : '_self',\r\n\t\t\t\t\t\t\t\t\t} )\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tchecked={ linkTarget === '_blank' }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<TextControl\r\n\t\t\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\t\t\t\tlabel={ __( 'Link rel' ) }\r\n\t\t\t\t\t\t\t\tvalue={ rel }\r\n\t\t\t\t\t\t\t\tonChange={ ( newRel ) =>\r\n\t\t\t\t\t\t\t\t\tsetAttributes( { rel: newRel } )\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t) }\r\n\t\t\t\t</PanelBody>\r\n\t\t\t</InspectorControls>\r\n\t\t</>\r\n\t);\r\n\r\n\tlet image;\r\n\r\n\t/**\r\n\t * A Post Featured Image block should not have image replacement\r\n\t * or upload options in the following cases:\r\n\t * - Is placed in a Query Loop. This is a conscious decision to\r\n\t * prevent content editing of different posts in Query Loop, and\r\n\t * this could change in the future.\r\n\t * - Is in a context where it does not have a postId (for example\r\n\t * in a template or template part).\r\n\t */\r\n\tif ( ! featuredImage && ( isDescendentOfQueryLoop || ! postId ) ) {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{ controls }\r\n\t\t\t\t<div { ...blockProps }>\r\n\t\t\t\t\t{ !! isLink ? (\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={ postPermalink }\r\n\t\t\t\t\t\t\ttarget={ linkTarget }\r\n\t\t\t\t\t\t\t{ ...disabledClickProps }\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{ placeholder() }\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\tplaceholder()\r\n\t\t\t\t\t) }\r\n\t\t\t\t\t<Overlay\r\n\t\t\t\t\t\tattributes={ attributes }\r\n\t\t\t\t\t\tsetAttributes={ setAttributes }\r\n\t\t\t\t\t\tclientId={ clientId }\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n\r\n\tconst label = __( 'Add a featured image' );\r\n\tconst imageStyles = {\r\n\t\t...borderProps.style,\r\n\t\t...shadowProps.style,\r\n\t\theight: aspectRatio ? '100%' : height,\r\n\t\twidth: !! aspectRatio && '100%',\r\n\t\tobjectFit: !! ( height || aspectRatio ) && scale,\r\n\t};\r\n\r\n\t/**\r\n\t * When the post featured image block is placed in a context where:\r\n\t * - It has a postId (for example in a single post)\r\n\t * - It is not inside a query loop\r\n\t * - It has no image assigned yet\r\n\t * Then display the placeholder with the image upload option.\r\n\t */\r\n\tif ( ! featuredImage && ! temporaryURL ) {\r\n\t\timage = (\r\n\t\t\t<MediaPlaceholder\r\n\t\t\t\tonSelect={ onSelectImage }\r\n\t\t\t\taccept=\"image/*\"\r\n\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\r\n\t\t\t\tonError={ onUploadError }\r\n\t\t\t\tplaceholder={ placeholder }\r\n\t\t\t\tmediaLibraryButton={ ( { open } ) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\t\ticon={ upload }\r\n\t\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\t\tlabel={ label }\r\n\t\t\t\t\t\t\tshowTooltip\r\n\t\t\t\t\t\t\ttooltipPosition=\"top center\"\r\n\t\t\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\t\t\topen();\r\n\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t} }\r\n\t\t\t/>\r\n\t\t);\r\n\t} else {\r\n\t\t// We have a Featured image so show a Placeholder if is loading.\r\n\t\timage =\r\n\t\t\t! media && ! temporaryURL ? (\r\n\t\t\t\tplaceholder()\r\n\t\t\t) : (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tclassName={ borderProps.className }\r\n\t\t\t\t\t\tsrc={ temporaryURL || mediaUrl }\r\n\t\t\t\t\t\talt={\r\n\t\t\t\t\t\t\tmedia && media?.alt_text\r\n\t\t\t\t\t\t\t\t? sprintf(\r\n\t\t\t\t\t\t\t\t\t\t// translators: %s: The image's alt text.\r\n\t\t\t\t\t\t\t\t\t\t__( 'Featured image: %s' ),\r\n\t\t\t\t\t\t\t\t\t\tmedia.alt_text\r\n\t\t\t\t\t\t\t\t  )\r\n\t\t\t\t\t\t\t\t: __( 'Featured image' )\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tstyle={ imageStyles }\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{ temporaryURL && <Spinner /> }\r\n\t\t\t\t</>\r\n\t\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * When the post featured image block:\r\n\t * - Has an image assigned\r\n\t * - Is not inside a query loop\r\n\t * Then display the image and the image replacement option.\r\n\t */\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ ! temporaryURL && controls }\r\n\t\t\t{ !! media && ! isDescendentOfQueryLoop && (\r\n\t\t\t\t<BlockControls group=\"other\">\r\n\t\t\t\t\t<MediaReplaceFlow\r\n\t\t\t\t\t\tmediaId={ featuredImage }\r\n\t\t\t\t\t\tmediaURL={ mediaUrl }\r\n\t\t\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\r\n\t\t\t\t\t\taccept=\"image/*\"\r\n\t\t\t\t\t\tonSelect={ onSelectImage }\r\n\t\t\t\t\t\tonError={ onUploadError }\r\n\t\t\t\t\t\tonReset={ () => setFeaturedImage( 0 ) }\r\n\t\t\t\t\t/>\r\n\t\t\t\t</BlockControls>\r\n\t\t\t) }\r\n\t\t\t<figure { ...blockProps }>\r\n\t\t\t\t{ /* If the featured image is linked, wrap in an <a /> tag to trigger any inherited link element styles */ }\r\n\t\t\t\t{ !! isLink ? (\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={ postPermalink }\r\n\t\t\t\t\t\ttarget={ linkTarget }\r\n\t\t\t\t\t\t{ ...disabledClickProps }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ image }\r\n\t\t\t\t\t</a>\r\n\t\t\t\t) : (\r\n\t\t\t\t\timage\r\n\t\t\t\t) }\r\n\t\t\t\t<Overlay\r\n\t\t\t\t\tattributes={ attributes }\r\n\t\t\t\t\tsetAttributes={ setAttributes }\r\n\t\t\t\t\tclientId={ clientId }\r\n\t\t\t\t/>\r\n\t\t\t</figure>\r\n\t\t</>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}