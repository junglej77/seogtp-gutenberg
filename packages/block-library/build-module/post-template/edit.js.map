{"version":3,"names":["clsx","memo","useMemo","useState","useSelect","__","_x","BlockControls","BlockContextProvider","__experimentalUseBlockPreview","useBlockPreview","useBlockProps","useInnerBlocksProps","store","blockEditorStore","Spinner","ToolbarGroup","coreStore","list","grid","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TEMPLATE","PostTemplateInnerBlocks","classList","innerBlocksProps","className","template","__unstableDisableLayoutClassNames","PostTemplateBlockPreview","blocks","blockContextId","isHidden","setActiveBlockContextId","blockPreviewProps","props","handleOnClick","style","display","undefined","tabIndex","role","onClick","onKeyPress","MemoizedPostTemplateBlockPreview","PostTemplateEdit","setAttributes","clientId","context","query","perPage","offset","postType","order","orderBy","author","search","exclude","sticky","inherit","taxQuery","parents","pages","restQueryArgs","templateSlug","previewPostType","attributes","layout","__unstableLayoutClassNames","type","layoutType","columnCount","activeBlockContextId","posts","select","getEntityRecords","getTaxonomies","getBlocks","templateCategory","startsWith","per_page","_fields","slug","replace","orderby","taxonomies","builtTaxQuery","Object","entries","reduce","accumulator","taxonomySlug","terms","taxonomy","find","rest_base","keys","length","assign","parent","categories","id","usedPostType","blockContexts","map","post","_post$class_list","postId","class_list","blockProps","children","setDisplayLayout","newDisplayLayout","displayLayoutControls","icon","title","isActive","controls","blockContext","value"],"sources":["@wordpress/block-library/src/post-template/edit.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { memo, useMemo, useState } from '@wordpress/element';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { __, _x } from '@wordpress/i18n';\r\nimport {\r\n\tBlockControls,\r\n\tBlockContextProvider,\r\n\t__experimentalUseBlockPreview as useBlockPreview,\r\n\tuseBlockProps,\r\n\tuseInnerBlocksProps,\r\n\tstore as blockEditorStore,\r\n} from '@wordpress/block-editor';\r\nimport { Spinner, ToolbarGroup } from '@wordpress/components';\r\nimport { store as coreStore } from '@wordpress/core-data';\r\nimport { list, grid } from '@wordpress/icons';\r\n\r\nconst TEMPLATE = [\r\n\t[ 'core/post-title' ],\r\n\t[ 'core/post-date' ],\r\n\t[ 'core/post-excerpt' ],\r\n];\r\n\r\nfunction PostTemplateInnerBlocks( { classList } ) {\r\n\tconst innerBlocksProps = useInnerBlocksProps(\r\n\t\t{ className: clsx( 'wp-block-post', classList ) },\r\n\t\t{ template: TEMPLATE, __unstableDisableLayoutClassNames: true }\r\n\t);\r\n\treturn <li { ...innerBlocksProps } />;\r\n}\r\n\r\nfunction PostTemplateBlockPreview( {\r\n\tblocks,\r\n\tblockContextId,\r\n\tclassList,\r\n\tisHidden,\r\n\tsetActiveBlockContextId,\r\n} ) {\r\n\tconst blockPreviewProps = useBlockPreview( {\r\n\t\tblocks,\r\n\t\tprops: {\r\n\t\t\tclassName: clsx( 'wp-block-post', classList ),\r\n\t\t},\r\n\t} );\r\n\r\n\tconst handleOnClick = () => {\r\n\t\tsetActiveBlockContextId( blockContextId );\r\n\t};\r\n\r\n\tconst style = {\r\n\t\tdisplay: isHidden ? 'none' : undefined,\r\n\t};\r\n\r\n\treturn (\r\n\t\t<li\r\n\t\t\t{ ...blockPreviewProps }\r\n\t\t\ttabIndex={ 0 }\r\n\t\t\t// eslint-disable-next-line jsx-a11y/no-noninteractive-element-to-interactive-role\r\n\t\t\trole=\"button\"\r\n\t\t\tonClick={ handleOnClick }\r\n\t\t\tonKeyPress={ handleOnClick }\r\n\t\t\tstyle={ style }\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nconst MemoizedPostTemplateBlockPreview = memo( PostTemplateBlockPreview );\r\n\r\nexport default function PostTemplateEdit( {\r\n\tsetAttributes,\r\n\tclientId,\r\n\tcontext: {\r\n\t\tquery: {\r\n\t\t\tperPage,\r\n\t\t\toffset = 0,\r\n\t\t\tpostType,\r\n\t\t\torder,\r\n\t\t\torderBy,\r\n\t\t\tauthor,\r\n\t\t\tsearch,\r\n\t\t\texclude,\r\n\t\t\tsticky,\r\n\t\t\tinherit,\r\n\t\t\ttaxQuery,\r\n\t\t\tparents,\r\n\t\t\tpages,\r\n\t\t\t// We gather extra query args to pass to the REST API call.\r\n\t\t\t// This way extenders of Query Loop can add their own query args,\r\n\t\t\t// and have accurate previews in the editor.\r\n\t\t\t// Noting though that these args should either be supported by the\r\n\t\t\t// REST API or be handled by custom REST filters like `rest_{$this->post_type}_query`.\r\n\t\t\t...restQueryArgs\r\n\t\t} = {},\r\n\t\ttemplateSlug,\r\n\t\tpreviewPostType,\r\n\t},\r\n\tattributes: { layout },\r\n\t__unstableLayoutClassNames,\r\n} ) {\r\n\tconst { type: layoutType, columnCount = 3 } = layout || {};\r\n\tconst [ activeBlockContextId, setActiveBlockContextId ] = useState();\r\n\tconst { posts, blocks } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst { getEntityRecords, getTaxonomies } = select( coreStore );\r\n\t\t\tconst { getBlocks } = select( blockEditorStore );\r\n\t\t\tconst templateCategory =\r\n\t\t\t\tinherit &&\r\n\t\t\t\ttemplateSlug?.startsWith( 'category-' ) &&\r\n\t\t\t\tgetEntityRecords( 'taxonomy', 'category', {\r\n\t\t\t\t\tcontext: 'view',\r\n\t\t\t\t\tper_page: 1,\r\n\t\t\t\t\t_fields: [ 'id' ],\r\n\t\t\t\t\tslug: templateSlug.replace( 'category-', '' ),\r\n\t\t\t\t} );\r\n\t\t\tconst query = {\r\n\t\t\t\toffset: offset || 0,\r\n\t\t\t\torder,\r\n\t\t\t\torderby: orderBy,\r\n\t\t\t};\r\n\t\t\t// There is no need to build the taxQuery if we inherit.\r\n\t\t\tif ( taxQuery && ! inherit ) {\r\n\t\t\t\tconst taxonomies = getTaxonomies( {\r\n\t\t\t\t\ttype: postType,\r\n\t\t\t\t\tper_page: -1,\r\n\t\t\t\t\tcontext: 'view',\r\n\t\t\t\t} );\r\n\t\t\t\t// We have to build the tax query for the REST API and use as\r\n\t\t\t\t// keys the taxonomies `rest_base` with the `term ids` as values.\r\n\t\t\t\tconst builtTaxQuery = Object.entries( taxQuery ).reduce(\r\n\t\t\t\t\t( accumulator, [ taxonomySlug, terms ] ) => {\r\n\t\t\t\t\t\tconst taxonomy = taxonomies?.find(\r\n\t\t\t\t\t\t\t( { slug } ) => slug === taxonomySlug\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tif ( taxonomy?.rest_base ) {\r\n\t\t\t\t\t\t\taccumulator[ taxonomy?.rest_base ] = terms;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn accumulator;\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{}\r\n\t\t\t\t);\r\n\t\t\t\tif ( !! Object.keys( builtTaxQuery ).length ) {\r\n\t\t\t\t\tObject.assign( query, builtTaxQuery );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif ( perPage ) {\r\n\t\t\t\tquery.per_page = perPage;\r\n\t\t\t}\r\n\t\t\tif ( author ) {\r\n\t\t\t\tquery.author = author;\r\n\t\t\t}\r\n\t\t\tif ( search ) {\r\n\t\t\t\tquery.search = search;\r\n\t\t\t}\r\n\t\t\tif ( exclude?.length ) {\r\n\t\t\t\tquery.exclude = exclude;\r\n\t\t\t}\r\n\t\t\tif ( parents?.length ) {\r\n\t\t\t\tquery.parent = parents;\r\n\t\t\t}\r\n\t\t\t// If sticky is not set, it will return all posts in the results.\r\n\t\t\t// If sticky is set to `only`, it will limit the results to sticky posts only.\r\n\t\t\t// If it is anything else, it will exclude sticky posts from results. For the record the value stored is `exclude`.\r\n\t\t\tif ( sticky ) {\r\n\t\t\t\tquery.sticky = sticky === 'only';\r\n\t\t\t}\r\n\t\t\t// If `inherit` is truthy, adjust conditionally the query to create a better preview.\r\n\t\t\tif ( inherit ) {\r\n\t\t\t\t// Change the post-type if needed.\r\n\t\t\t\tif ( templateSlug?.startsWith( 'archive-' ) ) {\r\n\t\t\t\t\tquery.postType = templateSlug.replace( 'archive-', '' );\r\n\t\t\t\t\tpostType = query.postType;\r\n\t\t\t\t} else if ( templateCategory ) {\r\n\t\t\t\t\tquery.categories = templateCategory[ 0 ]?.id;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// When we preview Query Loop blocks we should prefer the current\r\n\t\t\t// block's postType, which is passed through block context.\r\n\t\t\tconst usedPostType = previewPostType || postType;\r\n\t\t\treturn {\r\n\t\t\t\tposts: getEntityRecords( 'postType', usedPostType, {\r\n\t\t\t\t\t...query,\r\n\t\t\t\t\t...restQueryArgs,\r\n\t\t\t\t} ),\r\n\t\t\t\tblocks: getBlocks( clientId ),\r\n\t\t\t};\r\n\t\t},\r\n\t\t[\r\n\t\t\tperPage,\r\n\t\t\toffset,\r\n\t\t\torder,\r\n\t\t\torderBy,\r\n\t\t\tclientId,\r\n\t\t\tauthor,\r\n\t\t\tsearch,\r\n\t\t\tpostType,\r\n\t\t\texclude,\r\n\t\t\tsticky,\r\n\t\t\tinherit,\r\n\t\t\ttemplateSlug,\r\n\t\t\ttaxQuery,\r\n\t\t\tparents,\r\n\t\t\trestQueryArgs,\r\n\t\t\tpreviewPostType,\r\n\t\t]\r\n\t);\r\n\tconst blockContexts = useMemo(\r\n\t\t() =>\r\n\t\t\tposts?.map( ( post ) => ( {\r\n\t\t\t\tpostType: post.type,\r\n\t\t\t\tpostId: post.id,\r\n\t\t\t\tclassList: post.class_list ?? '',\r\n\t\t\t} ) ),\r\n\t\t[ posts ]\r\n\t);\r\n\r\n\tconst blockProps = useBlockProps( {\r\n\t\tclassName: clsx( __unstableLayoutClassNames, {\r\n\t\t\t[ `columns-${ columnCount }` ]:\r\n\t\t\t\tlayoutType === 'grid' && columnCount, // Ensure column count is flagged via classname for backwards compatibility.\r\n\t\t} ),\r\n\t} );\r\n\r\n\tif ( ! posts ) {\r\n\t\treturn (\r\n\t\t\t<p { ...blockProps }>\r\n\t\t\t\t<Spinner />\r\n\t\t\t</p>\r\n\t\t);\r\n\t}\r\n\r\n\tif ( ! posts.length ) {\r\n\t\treturn <p { ...blockProps }> { __( 'No results found.' ) }</p>;\r\n\t}\r\n\r\n\tconst setDisplayLayout = ( newDisplayLayout ) =>\r\n\t\tsetAttributes( {\r\n\t\t\tlayout: { ...layout, ...newDisplayLayout },\r\n\t\t} );\r\n\r\n\tconst displayLayoutControls = [\r\n\t\t{\r\n\t\t\ticon: list,\r\n\t\t\ttitle: _x( 'List view', 'Post template block display setting' ),\r\n\t\t\tonClick: () => setDisplayLayout( { type: 'default' } ),\r\n\t\t\tisActive: layoutType === 'default' || layoutType === 'constrained',\r\n\t\t},\r\n\t\t{\r\n\t\t\ticon: grid,\r\n\t\t\ttitle: _x( 'Grid view', 'Post template block display setting' ),\r\n\t\t\tonClick: () =>\r\n\t\t\t\tsetDisplayLayout( {\r\n\t\t\t\t\ttype: 'grid',\r\n\t\t\t\t\tcolumnCount,\r\n\t\t\t\t} ),\r\n\t\t\tisActive: layoutType === 'grid',\r\n\t\t},\r\n\t];\r\n\r\n\t// To avoid flicker when switching active block contexts, a preview is rendered\r\n\t// for each block context, but the preview for the active block context is hidden.\r\n\t// This ensures that when it is displayed again, the cached rendering of the\r\n\t// block preview is used, instead of having to re-render the preview from scratch.\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<BlockControls>\r\n\t\t\t\t<ToolbarGroup controls={ displayLayoutControls } />\r\n\t\t\t</BlockControls>\r\n\r\n\t\t\t<ul { ...blockProps }>\r\n\t\t\t\t{ blockContexts &&\r\n\t\t\t\t\tblockContexts.map( ( blockContext ) => (\r\n\t\t\t\t\t\t<BlockContextProvider\r\n\t\t\t\t\t\t\tkey={ blockContext.postId }\r\n\t\t\t\t\t\t\tvalue={ blockContext }\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{ blockContext.postId ===\r\n\t\t\t\t\t\t\t( activeBlockContextId ||\r\n\t\t\t\t\t\t\t\tblockContexts[ 0 ]?.postId ) ? (\r\n\t\t\t\t\t\t\t\t<PostTemplateInnerBlocks\r\n\t\t\t\t\t\t\t\t\tclassList={ blockContext.classList }\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t) : null }\r\n\t\t\t\t\t\t\t<MemoizedPostTemplateBlockPreview\r\n\t\t\t\t\t\t\t\tblocks={ blocks }\r\n\t\t\t\t\t\t\t\tblockContextId={ blockContext.postId }\r\n\t\t\t\t\t\t\t\tclassList={ blockContext.classList }\r\n\t\t\t\t\t\t\t\tsetActiveBlockContextId={\r\n\t\t\t\t\t\t\t\t\tsetActiveBlockContextId\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tisHidden={\r\n\t\t\t\t\t\t\t\t\tblockContext.postId ===\r\n\t\t\t\t\t\t\t\t\t( activeBlockContextId ||\r\n\t\t\t\t\t\t\t\t\t\tblockContexts[ 0 ]?.postId )\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</BlockContextProvider>\r\n\t\t\t\t\t) ) }\r\n\t\t\t</ul>\r\n\t\t</>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}