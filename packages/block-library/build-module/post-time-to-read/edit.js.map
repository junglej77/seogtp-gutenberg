{"version":3,"names":["clsx","_x","_n","sprintf","useMemo","AlignmentControl","BlockControls","useBlockProps","__unstableSerializeAndClean","useEntityProp","useEntityBlockEditor","count","wordCount","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","AVERAGE_READING_RATE","PostTimeToReadEdit","attributes","setAttributes","context","textAlign","postId","postType","contentStructure","blocks","id","minutesToReadString","content","Function","wordCountType","minutesToRead","Math","max","round","blockProps","className","children","group","value","onChange","nextAlign"],"sources":["@wordpress/block-library/src/post-time-to-read/edit.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { _x, _n, sprintf } from '@wordpress/i18n';\r\nimport { useMemo } from '@wordpress/element';\r\nimport {\r\n\tAlignmentControl,\r\n\tBlockControls,\r\n\tuseBlockProps,\r\n} from '@wordpress/block-editor';\r\nimport { __unstableSerializeAndClean } from '@wordpress/blocks';\r\nimport { useEntityProp, useEntityBlockEditor } from '@wordpress/core-data';\r\nimport { count as wordCount } from '@wordpress/wordcount';\r\n\r\n/**\r\n * Average reading rate - based on average taken from\r\n * https://irisreading.com/average-reading-speed-in-various-languages/\r\n * (Characters/minute used for Chinese rather than words).\r\n */\r\nconst AVERAGE_READING_RATE = 189;\r\n\r\nfunction PostTimeToReadEdit( { attributes, setAttributes, context } ) {\r\n\tconst { textAlign } = attributes;\r\n\tconst { postId, postType } = context;\r\n\r\n\tconst [ contentStructure ] = useEntityProp(\r\n\t\t'postType',\r\n\t\tpostType,\r\n\t\t'content',\r\n\t\tpostId\r\n\t);\r\n\r\n\tconst [ blocks ] = useEntityBlockEditor( 'postType', postType, {\r\n\t\tid: postId,\r\n\t} );\r\n\r\n\tconst minutesToReadString = useMemo( () => {\r\n\t\t// Replicates the logic found in getEditedPostContent().\r\n\t\tlet content;\r\n\t\tif ( contentStructure instanceof Function ) {\r\n\t\t\tcontent = contentStructure( { blocks } );\r\n\t\t} else if ( blocks ) {\r\n\t\t\t// If we have parsed blocks already, they should be our source of truth.\r\n\t\t\t// Parsing applies block deprecations and legacy block conversions that\r\n\t\t\t// unparsed content will not have.\r\n\t\t\tcontent = __unstableSerializeAndClean( blocks );\r\n\t\t} else {\r\n\t\t\tcontent = contentStructure;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * translators: If your word count is based on single characters (e.g. East Asian characters),\r\n\t\t * enter 'characters_excluding_spaces' or 'characters_including_spaces'. Otherwise, enter 'words'.\r\n\t\t * Do not translate into your own language.\r\n\t\t */\r\n\t\tconst wordCountType = _x(\r\n\t\t\t'words',\r\n\t\t\t'Word count type. Do not translate!'\r\n\t\t);\r\n\r\n\t\tconst minutesToRead = Math.max(\r\n\t\t\t1,\r\n\t\t\tMath.round(\r\n\t\t\t\twordCount( content || '', wordCountType ) / AVERAGE_READING_RATE\r\n\t\t\t)\r\n\t\t);\r\n\r\n\t\treturn sprintf(\r\n\t\t\t/* translators: %d is the number of minutes the post will take to read. */\r\n\t\t\t_n( '%d minute', '%d minutes', minutesToRead ),\r\n\t\t\tminutesToRead\r\n\t\t);\r\n\t}, [ contentStructure, blocks ] );\r\n\r\n\tconst blockProps = useBlockProps( {\r\n\t\tclassName: clsx( {\r\n\t\t\t[ `has-text-align-${ textAlign }` ]: textAlign,\r\n\t\t} ),\r\n\t} );\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<BlockControls group=\"block\">\r\n\t\t\t\t<AlignmentControl\r\n\t\t\t\t\tvalue={ textAlign }\r\n\t\t\t\t\tonChange={ ( nextAlign ) => {\r\n\t\t\t\t\t\tsetAttributes( { textAlign: nextAlign } );\r\n\t\t\t\t\t} }\r\n\t\t\t\t/>\r\n\t\t\t</BlockControls>\r\n\t\t\t<div { ...blockProps }>{ minutesToReadString }</div>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default PostTimeToReadEdit;\r\n"],"mappings":"AAAA;AACA;AACA;AACA,OAAOA,IAAI,MAAM,MAAM;;AAEvB;AACA;AACA;AACA,SAASC,EAAE,EAAEC,EAAE,EAAEC,OAAO,QAAQ,iBAAiB;AACjD,SAASC,OAAO,QAAQ,oBAAoB;AAC5C,SACCC,gBAAgB,EAChBC,aAAa,EACbC,aAAa,QACP,yBAAyB;AAChC,SAASC,2BAA2B,QAAQ,mBAAmB;AAC/D,SAASC,aAAa,EAAEC,oBAAoB,QAAQ,sBAAsB;AAC1E,SAASC,KAAK,IAAIC,SAAS,QAAQ,sBAAsB;;AAEzD;AACA;AACA;AACA;AACA;AAJA,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAKA,MAAMC,oBAAoB,GAAG,GAAG;AAEhC,SAASC,kBAAkBA,CAAE;EAAEC,UAAU;EAAEC,aAAa;EAAEC;AAAQ,CAAC,EAAG;EACrE,MAAM;IAAEC;EAAU,CAAC,GAAGH,UAAU;EAChC,MAAM;IAAEI,MAAM;IAAEC;EAAS,CAAC,GAAGH,OAAO;EAEpC,MAAM,CAAEI,gBAAgB,CAAE,GAAGlB,aAAa,CACzC,UAAU,EACViB,QAAQ,EACR,SAAS,EACTD,MACD,CAAC;EAED,MAAM,CAAEG,MAAM,CAAE,GAAGlB,oBAAoB,CAAE,UAAU,EAAEgB,QAAQ,EAAE;IAC9DG,EAAE,EAAEJ;EACL,CAAE,CAAC;EAEH,MAAMK,mBAAmB,GAAG1B,OAAO,CAAE,MAAM;IAC1C;IACA,IAAI2B,OAAO;IACX,IAAKJ,gBAAgB,YAAYK,QAAQ,EAAG;MAC3CD,OAAO,GAAGJ,gBAAgB,CAAE;QAAEC;MAAO,CAAE,CAAC;IACzC,CAAC,MAAM,IAAKA,MAAM,EAAG;MACpB;MACA;MACA;MACAG,OAAO,GAAGvB,2BAA2B,CAAEoB,MAAO,CAAC;IAChD,CAAC,MAAM;MACNG,OAAO,GAAGJ,gBAAgB;IAC3B;;IAEA;AACF;AACA;AACA;AACA;IACE,MAAMM,aAAa,GAAGhC,EAAE,CACvB,OAAO,EACP,oCACD,CAAC;IAED,MAAMiC,aAAa,GAAGC,IAAI,CAACC,GAAG,CAC7B,CAAC,EACDD,IAAI,CAACE,KAAK,CACTzB,SAAS,CAAEmB,OAAO,IAAI,EAAE,EAAEE,aAAc,CAAC,GAAGd,oBAC7C,CACD,CAAC;IAED,OAAOhB,OAAO,EACb;IACAD,EAAE,CAAE,WAAW,EAAE,YAAY,EAAEgC,aAAc,CAAC,EAC9CA,aACD,CAAC;EACF,CAAC,EAAE,CAAEP,gBAAgB,EAAEC,MAAM,CAAG,CAAC;EAEjC,MAAMU,UAAU,GAAG/B,aAAa,CAAE;IACjCgC,SAAS,EAAEvC,IAAI,CAAE;MAChB,CAAG,kBAAkBwB,SAAW,EAAC,GAAIA;IACtC,CAAE;EACH,CAAE,CAAC;EAEH,oBACCN,KAAA,CAAAF,SAAA;IAAAwB,QAAA,gBACC1B,IAAA,CAACR,aAAa;MAACmC,KAAK,EAAC,OAAO;MAAAD,QAAA,eAC3B1B,IAAA,CAACT,gBAAgB;QAChBqC,KAAK,EAAGlB,SAAW;QACnBmB,QAAQ,EAAKC,SAAS,IAAM;UAC3BtB,aAAa,CAAE;YAAEE,SAAS,EAAEoB;UAAU,CAAE,CAAC;QAC1C;MAAG,CACH;IAAC,CACY,CAAC,eAChB9B,IAAA;MAAA,GAAUwB,UAAU;MAAAE,QAAA,EAAKV;IAAmB,CAAO,CAAC;EAAA,CACnD,CAAC;AAEL;AAEA,eAAeV,kBAAkB","ignoreList":[]}