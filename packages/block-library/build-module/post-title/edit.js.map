{"version":3,"names":["clsx","AlignmentControl","BlockControls","InspectorControls","useBlockProps","PlainText","HeadingLevelDropdown","useBlockEditingMode","ToggleControl","TextControl","PanelBody","__","createBlock","getDefaultBlockName","useEntityProp","store","coreStore","useSelect","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PostTitleEdit","attributes","level","levelOptions","textAlign","isLink","rel","linkTarget","setAttributes","context","postType","postId","queryId","insertBlocksAfter","TagName","isDescendentOfQueryLoop","Number","isFinite","userCanEdit","select","canUser","kind","name","id","rawTitle","setTitle","fullTitle","link","onSplitAtEnd","blockProps","className","blockEditingMode","titleElement","children","tagName","placeholder","value","onChange","__experimentalVersion","__unstableOnSplitAtEnd","dangerouslySetInnerHTML","__html","rendered","href","target","length","onClick","event","preventDefault","group","options","newLevel","nextAlign","title","__nextHasNoMarginBottom","label","checked","__next40pxDefaultSize","newRel"],"sources":["@wordpress/block-library/src/post-title/edit.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tAlignmentControl,\r\n\tBlockControls,\r\n\tInspectorControls,\r\n\tuseBlockProps,\r\n\tPlainText,\r\n\tHeadingLevelDropdown,\r\n\tuseBlockEditingMode,\r\n} from '@wordpress/block-editor';\r\nimport { ToggleControl, TextControl, PanelBody } from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { createBlock, getDefaultBlockName } from '@wordpress/blocks';\r\nimport { useEntityProp, store as coreStore } from '@wordpress/core-data';\r\nimport { useSelect } from '@wordpress/data';\r\n\r\nexport default function PostTitleEdit( {\r\n\tattributes: { level, levelOptions, textAlign, isLink, rel, linkTarget },\r\n\tsetAttributes,\r\n\tcontext: { postType, postId, queryId },\r\n\tinsertBlocksAfter,\r\n} ) {\r\n\tconst TagName = level === 0 ? 'p' : `h${ level }`;\r\n\tconst isDescendentOfQueryLoop = Number.isFinite( queryId );\r\n\tconst userCanEdit = useSelect(\r\n\t\t( select ) => {\r\n\t\t\t/**\r\n\t\t\t * useCanEditEntity may trigger an OPTIONS request to the REST API\r\n\t\t\t * via the canUser resolver. However, when the Post Title is a\r\n\t\t\t * descendant of a Query Loop block, the title cannot be edited. In\r\n\t\t\t * order to avoid these unnecessary requests, we call the hook\r\n\t\t\t * without the proper data, resulting in returning early without\r\n\t\t\t * making them.\r\n\t\t\t */\r\n\t\t\tif ( isDescendentOfQueryLoop ) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn select( coreStore ).canUser( 'update', {\r\n\t\t\t\tkind: 'postType',\r\n\t\t\t\tname: postType,\r\n\t\t\t\tid: postId,\r\n\t\t\t} );\r\n\t\t},\r\n\t\t[ isDescendentOfQueryLoop, postType, postId ]\r\n\t);\r\n\tconst [ rawTitle = '', setTitle, fullTitle ] = useEntityProp(\r\n\t\t'postType',\r\n\t\tpostType,\r\n\t\t'title',\r\n\t\tpostId\r\n\t);\r\n\tconst [ link ] = useEntityProp( 'postType', postType, 'link', postId );\r\n\tconst onSplitAtEnd = () => {\r\n\t\tinsertBlocksAfter( createBlock( getDefaultBlockName() ) );\r\n\t};\r\n\tconst blockProps = useBlockProps( {\r\n\t\tclassName: clsx( {\r\n\t\t\t[ `has-text-align-${ textAlign }` ]: textAlign,\r\n\t\t} ),\r\n\t} );\r\n\tconst blockEditingMode = useBlockEditingMode();\r\n\r\n\tlet titleElement = <TagName { ...blockProps }>{ __( 'Title' ) }</TagName>;\r\n\r\n\tif ( postType && postId ) {\r\n\t\ttitleElement = userCanEdit ? (\r\n\t\t\t<PlainText\r\n\t\t\t\ttagName={ TagName }\r\n\t\t\t\tplaceholder={ __( 'No title' ) }\r\n\t\t\t\tvalue={ rawTitle }\r\n\t\t\t\tonChange={ setTitle }\r\n\t\t\t\t__experimentalVersion={ 2 }\r\n\t\t\t\t__unstableOnSplitAtEnd={ onSplitAtEnd }\r\n\t\t\t\t{ ...blockProps }\r\n\t\t\t/>\r\n\t\t) : (\r\n\t\t\t<TagName\r\n\t\t\t\t{ ...blockProps }\r\n\t\t\t\tdangerouslySetInnerHTML={ { __html: fullTitle?.rendered } }\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\tif ( isLink && postType && postId ) {\r\n\t\ttitleElement = userCanEdit ? (\r\n\t\t\t<TagName { ...blockProps }>\r\n\t\t\t\t<PlainText\r\n\t\t\t\t\ttagName=\"a\"\r\n\t\t\t\t\thref={ link }\r\n\t\t\t\t\ttarget={ linkTarget }\r\n\t\t\t\t\trel={ rel }\r\n\t\t\t\t\tplaceholder={ ! rawTitle.length ? __( 'No title' ) : null }\r\n\t\t\t\t\tvalue={ rawTitle }\r\n\t\t\t\t\tonChange={ setTitle }\r\n\t\t\t\t\t__experimentalVersion={ 2 }\r\n\t\t\t\t\t__unstableOnSplitAtEnd={ onSplitAtEnd }\r\n\t\t\t\t/>\r\n\t\t\t</TagName>\r\n\t\t) : (\r\n\t\t\t<TagName { ...blockProps }>\r\n\t\t\t\t<a\r\n\t\t\t\t\thref={ link }\r\n\t\t\t\t\ttarget={ linkTarget }\r\n\t\t\t\t\trel={ rel }\r\n\t\t\t\t\tonClick={ ( event ) => event.preventDefault() }\r\n\t\t\t\t\tdangerouslySetInnerHTML={ {\r\n\t\t\t\t\t\t__html: fullTitle?.rendered,\r\n\t\t\t\t\t} }\r\n\t\t\t\t/>\r\n\t\t\t</TagName>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ blockEditingMode === 'default' && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<BlockControls group=\"block\">\r\n\t\t\t\t\t\t<HeadingLevelDropdown\r\n\t\t\t\t\t\t\tvalue={ level }\r\n\t\t\t\t\t\t\toptions={ levelOptions }\r\n\t\t\t\t\t\t\tonChange={ ( newLevel ) =>\r\n\t\t\t\t\t\t\t\tsetAttributes( { level: newLevel } )\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<AlignmentControl\r\n\t\t\t\t\t\t\tvalue={ textAlign }\r\n\t\t\t\t\t\t\tonChange={ ( nextAlign ) => {\r\n\t\t\t\t\t\t\t\tsetAttributes( { textAlign: nextAlign } );\r\n\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</BlockControls>\r\n\t\t\t\t\t<InspectorControls>\r\n\t\t\t\t\t\t<PanelBody title={ __( 'Settings' ) }>\r\n\t\t\t\t\t\t\t<ToggleControl\r\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\t\t\t\tlabel={ __( 'Make title a link' ) }\r\n\t\t\t\t\t\t\t\tonChange={ () =>\r\n\t\t\t\t\t\t\t\t\tsetAttributes( { isLink: ! isLink } )\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tchecked={ isLink }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t{ isLink && (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<ToggleControl\r\n\t\t\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\t\t\t\t\t\tlabel={ __( 'Open in new tab' ) }\r\n\t\t\t\t\t\t\t\t\t\tonChange={ ( value ) =>\r\n\t\t\t\t\t\t\t\t\t\t\tsetAttributes( {\r\n\t\t\t\t\t\t\t\t\t\t\t\tlinkTarget: value\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? '_blank'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: '_self',\r\n\t\t\t\t\t\t\t\t\t\t\t} )\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tchecked={ linkTarget === '_blank' }\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<TextControl\r\n\t\t\t\t\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\t\t\t\t\t\tlabel={ __( 'Link rel' ) }\r\n\t\t\t\t\t\t\t\t\t\tvalue={ rel }\r\n\t\t\t\t\t\t\t\t\t\tonChange={ ( newRel ) =>\r\n\t\t\t\t\t\t\t\t\t\t\tsetAttributes( { rel: newRel } )\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t</PanelBody>\r\n\t\t\t\t\t</InspectorControls>\r\n\t\t\t\t</>\r\n\t\t\t) }\r\n\t\t\t{ titleElement }\r\n\t\t</>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}