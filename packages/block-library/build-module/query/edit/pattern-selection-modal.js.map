{"version":3,"names":["useState","useMemo","useDispatch","Modal","SearchControl","useAsyncList","BlockContextProvider","store","blockEditorStore","__experimentalBlockPatternsList","BlockPatternsList","__","useBlockNameForPatterns","getTransformedBlocksFromPattern","usePatterns","searchPatterns","jsx","_jsx","jsxs","_jsxs","PatternSelectionModal","clientId","attributes","setIsPatternSelectionModalOpen","searchValue","setSearchValue","replaceBlock","selectBlock","onBlockPatternSelect","pattern","blocks","newBlocks","queryClientIds","blockPreviewContext","previewPostType","query","postType","blockNameForPatterns","blockPatterns","filteredBlockPatterns","shownBlockPatterns","overlayClassName","title","onRequestClose","isFullScreen","children","className","__nextHasNoMarginBottom","onChange","value","label","placeholder","shownPatterns","onClickPattern"],"sources":["@wordpress/block-library/src/query/edit/pattern-selection-modal.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useState, useMemo } from '@wordpress/element';\r\nimport { useDispatch } from '@wordpress/data';\r\nimport { Modal, SearchControl } from '@wordpress/components';\r\nimport { useAsyncList } from '@wordpress/compose';\r\nimport {\r\n\tBlockContextProvider,\r\n\tstore as blockEditorStore,\r\n\t__experimentalBlockPatternsList as BlockPatternsList,\r\n} from '@wordpress/block-editor';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport {\r\n\tuseBlockNameForPatterns,\r\n\tgetTransformedBlocksFromPattern,\r\n\tusePatterns,\r\n} from '../utils';\r\nimport { searchPatterns } from '../../utils/search-patterns';\r\n\r\nexport default function PatternSelectionModal( {\r\n\tclientId,\r\n\tattributes,\r\n\tsetIsPatternSelectionModalOpen,\r\n} ) {\r\n\tconst [ searchValue, setSearchValue ] = useState( '' );\r\n\tconst { replaceBlock, selectBlock } = useDispatch( blockEditorStore );\r\n\tconst onBlockPatternSelect = ( pattern, blocks ) => {\r\n\t\tconst { newBlocks, queryClientIds } = getTransformedBlocksFromPattern(\r\n\t\t\tblocks,\r\n\t\t\tattributes\r\n\t\t);\r\n\t\treplaceBlock( clientId, newBlocks );\r\n\t\tif ( queryClientIds[ 0 ] ) {\r\n\t\t\tselectBlock( queryClientIds[ 0 ] );\r\n\t\t}\r\n\t};\r\n\t// When we preview Query Loop blocks we should prefer the current\r\n\t// block's postType, which is passed through block context.\r\n\tconst blockPreviewContext = useMemo(\r\n\t\t() => ( {\r\n\t\t\tpreviewPostType: attributes.query.postType,\r\n\t\t} ),\r\n\t\t[ attributes.query.postType ]\r\n\t);\r\n\tconst blockNameForPatterns = useBlockNameForPatterns(\r\n\t\tclientId,\r\n\t\tattributes\r\n\t);\r\n\tconst blockPatterns = usePatterns( clientId, blockNameForPatterns );\r\n\tconst filteredBlockPatterns = useMemo( () => {\r\n\t\treturn searchPatterns( blockPatterns, searchValue );\r\n\t}, [ blockPatterns, searchValue ] );\r\n\tconst shownBlockPatterns = useAsyncList( filteredBlockPatterns );\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\toverlayClassName=\"block-library-query-pattern__selection-modal\"\r\n\t\t\ttitle={ __( 'Choose a pattern' ) }\r\n\t\t\tonRequestClose={ () => setIsPatternSelectionModalOpen( false ) }\r\n\t\t\tisFullScreen\r\n\t\t>\r\n\t\t\t<div className=\"block-library-query-pattern__selection-content\">\r\n\t\t\t\t<div className=\"block-library-query-pattern__selection-search\">\r\n\t\t\t\t\t<SearchControl\r\n\t\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\t\tonChange={ setSearchValue }\r\n\t\t\t\t\t\tvalue={ searchValue }\r\n\t\t\t\t\t\tlabel={ __( 'Search for patterns' ) }\r\n\t\t\t\t\t\tplaceholder={ __( 'Search' ) }\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<BlockContextProvider value={ blockPreviewContext }>\r\n\t\t\t\t\t<BlockPatternsList\r\n\t\t\t\t\t\tblockPatterns={ filteredBlockPatterns }\r\n\t\t\t\t\t\tshownPatterns={ shownBlockPatterns }\r\n\t\t\t\t\t\tonClickPattern={ onBlockPatternSelect }\r\n\t\t\t\t\t/>\r\n\t\t\t\t</BlockContextProvider>\r\n\t\t\t</div>\r\n\t\t</Modal>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}