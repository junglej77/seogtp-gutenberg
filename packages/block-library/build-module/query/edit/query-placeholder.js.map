{"version":3,"names":["useSelect","useDispatch","createBlocksFromInnerBlocksTemplate","store","blocksStore","useState","useBlockProps","blockEditorStore","__experimentalBlockVariationPicker","Button","Placeholder","__","useScopedBlockVariations","useBlockNameForPatterns","jsx","_jsx","jsxs","_jsxs","QueryPlaceholder","attributes","clientId","name","openPatternSelectionModal","isStartingBlank","setIsStartingBlank","blockProps","blockNameForPatterns","blockType","activeBlockVariation","hasPatterns","select","getActiveBlockVariation","getBlockType","getBlockRootClientId","getPatternsByBlockTypes","rootClientId","length","icon","src","label","title","QueryVariationPicker","children","instructions","__next40pxDefaultSize","variant","onClick","scopeVariations","replaceInnerBlocks","variations","onSelect","variation","innerBlocks"],"sources":["@wordpress/block-library/src/query/edit/query-placeholder.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport {\r\n\tcreateBlocksFromInnerBlocksTemplate,\r\n\tstore as blocksStore,\r\n} from '@wordpress/blocks';\r\nimport { useState } from '@wordpress/element';\r\nimport {\r\n\tuseBlockProps,\r\n\tstore as blockEditorStore,\r\n\t__experimentalBlockVariationPicker,\r\n} from '@wordpress/block-editor';\r\nimport { Button, Placeholder } from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { useScopedBlockVariations, useBlockNameForPatterns } from '../utils';\r\n\r\nexport default function QueryPlaceholder( {\r\n\tattributes,\r\n\tclientId,\r\n\tname,\r\n\topenPatternSelectionModal,\r\n} ) {\r\n\tconst [ isStartingBlank, setIsStartingBlank ] = useState( false );\r\n\tconst blockProps = useBlockProps();\r\n\tconst blockNameForPatterns = useBlockNameForPatterns(\r\n\t\tclientId,\r\n\t\tattributes\r\n\t);\r\n\tconst { blockType, activeBlockVariation, hasPatterns } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst { getActiveBlockVariation, getBlockType } =\r\n\t\t\t\tselect( blocksStore );\r\n\t\t\tconst { getBlockRootClientId, getPatternsByBlockTypes } =\r\n\t\t\t\tselect( blockEditorStore );\r\n\t\t\tconst rootClientId = getBlockRootClientId( clientId );\r\n\t\t\treturn {\r\n\t\t\t\tblockType: getBlockType( name ),\r\n\t\t\t\tactiveBlockVariation: getActiveBlockVariation(\r\n\t\t\t\t\tname,\r\n\t\t\t\t\tattributes\r\n\t\t\t\t),\r\n\t\t\t\thasPatterns: !! getPatternsByBlockTypes(\r\n\t\t\t\t\tblockNameForPatterns,\r\n\t\t\t\t\trootClientId\r\n\t\t\t\t).length,\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ name, blockNameForPatterns, clientId, attributes ]\r\n\t);\r\n\tconst icon =\r\n\t\tactiveBlockVariation?.icon?.src ||\r\n\t\tactiveBlockVariation?.icon ||\r\n\t\tblockType?.icon?.src;\r\n\tconst label = activeBlockVariation?.title || blockType?.title;\r\n\tif ( isStartingBlank ) {\r\n\t\treturn (\r\n\t\t\t<QueryVariationPicker\r\n\t\t\t\tclientId={ clientId }\r\n\t\t\t\tattributes={ attributes }\r\n\t\t\t\ticon={ icon }\r\n\t\t\t\tlabel={ label }\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\treturn (\r\n\t\t<div { ...blockProps }>\r\n\t\t\t<Placeholder\r\n\t\t\t\ticon={ icon }\r\n\t\t\t\tlabel={ label }\r\n\t\t\t\tinstructions={ __(\r\n\t\t\t\t\t'Choose a pattern for the query loop or start blank.'\r\n\t\t\t\t) }\r\n\t\t\t>\r\n\t\t\t\t{ !! hasPatterns && (\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\t// TODO: Switch to `true` (40px size) if possible\r\n\t\t\t\t\t\t__next40pxDefaultSize={ false }\r\n\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\tonClick={ openPatternSelectionModal }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ __( 'Choose' ) }\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t) }\r\n\r\n\t\t\t\t<Button\r\n\t\t\t\t\t// TODO: Switch to `true` (40px size) if possible\r\n\t\t\t\t\t__next40pxDefaultSize={ false }\r\n\t\t\t\t\tvariant=\"secondary\"\r\n\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\tsetIsStartingBlank( true );\r\n\t\t\t\t\t} }\r\n\t\t\t\t>\r\n\t\t\t\t\t{ __( 'Start blank' ) }\r\n\t\t\t\t</Button>\r\n\t\t\t</Placeholder>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction QueryVariationPicker( { clientId, attributes, icon, label } ) {\r\n\tconst scopeVariations = useScopedBlockVariations( attributes );\r\n\tconst { replaceInnerBlocks } = useDispatch( blockEditorStore );\r\n\tconst blockProps = useBlockProps();\r\n\treturn (\r\n\t\t<div { ...blockProps }>\r\n\t\t\t<__experimentalBlockVariationPicker\r\n\t\t\t\ticon={ icon }\r\n\t\t\t\tlabel={ label }\r\n\t\t\t\tvariations={ scopeVariations }\r\n\t\t\t\tonSelect={ ( variation ) => {\r\n\t\t\t\t\tif ( variation.innerBlocks ) {\r\n\t\t\t\t\t\treplaceInnerBlocks(\r\n\t\t\t\t\t\t\tclientId,\r\n\t\t\t\t\t\t\tcreateBlocksFromInnerBlocksTemplate(\r\n\t\t\t\t\t\t\t\tvariation.innerBlocks\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\tfalse\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t} }\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}