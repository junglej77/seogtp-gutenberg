{"version":3,"names":["RichText","createBlock","transforms","from","type","blocks","transform","value","align","citation","anchor","fontSize","style","content","prefix","schema","blockquote","children","selector","node","handler","HTML","innerHTML","mode","isMultiBlock","isMatch","length","includes","name","some","__experimentalConvert","map","block","attributes","innerBlocks","to","every","join","isEmpty","ungroup"],"sources":["@wordpress/block-library/src/quote/transforms.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { RichText } from '@wordpress/block-editor';\r\nimport { createBlock } from '@wordpress/blocks';\r\n\r\nconst transforms = {\r\n\tfrom: [\r\n\t\t{\r\n\t\t\ttype: 'block',\r\n\t\t\tblocks: [ 'core/pullquote' ],\r\n\t\t\ttransform: ( {\r\n\t\t\t\tvalue,\r\n\t\t\t\talign,\r\n\t\t\t\tcitation,\r\n\t\t\t\tanchor,\r\n\t\t\t\tfontSize,\r\n\t\t\t\tstyle,\r\n\t\t\t} ) => {\r\n\t\t\t\treturn createBlock(\r\n\t\t\t\t\t'core/quote',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\talign,\r\n\t\t\t\t\t\tcitation,\r\n\t\t\t\t\t\tanchor,\r\n\t\t\t\t\t\tfontSize,\r\n\t\t\t\t\t\tstyle,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t[ createBlock( 'core/paragraph', { content: value } ) ]\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: 'prefix',\r\n\t\t\tprefix: '>',\r\n\t\t\ttransform: ( content ) =>\r\n\t\t\t\tcreateBlock( 'core/quote', {}, [\r\n\t\t\t\t\tcreateBlock( 'core/paragraph', { content } ),\r\n\t\t\t\t] ),\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: 'raw',\r\n\t\t\tschema: () => ( {\r\n\t\t\t\tblockquote: {\r\n\t\t\t\t\tchildren: '*',\r\n\t\t\t\t},\r\n\t\t\t} ),\r\n\t\t\tselector: 'blockquote',\r\n\t\t\ttransform: ( node, handler ) => {\r\n\t\t\t\treturn createBlock(\r\n\t\t\t\t\t'core/quote',\r\n\t\t\t\t\t// Don't try to parse any `cite` out of this content.\r\n\t\t\t\t\t// * There may be more than one cite.\r\n\t\t\t\t\t// * There may be more attribution text than just the cite.\r\n\t\t\t\t\t// * If the cite is nested in the quoted text, it's wrong to\r\n\t\t\t\t\t//   remove it.\r\n\t\t\t\t\t{},\r\n\t\t\t\t\thandler( {\r\n\t\t\t\t\t\tHTML: node.innerHTML,\r\n\t\t\t\t\t\tmode: 'BLOCKS',\r\n\t\t\t\t\t} )\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: 'block',\r\n\t\t\tisMultiBlock: true,\r\n\t\t\tblocks: [ '*' ],\r\n\t\t\tisMatch: ( {}, blocks ) => {\r\n\t\t\t\t// When a single block is selected make the tranformation\r\n\t\t\t\t// available only to specific blocks that make sense.\r\n\t\t\t\tif ( blocks.length === 1 ) {\r\n\t\t\t\t\treturn [\r\n\t\t\t\t\t\t'core/paragraph',\r\n\t\t\t\t\t\t'core/heading',\r\n\t\t\t\t\t\t'core/list',\r\n\t\t\t\t\t\t'core/pullquote',\r\n\t\t\t\t\t].includes( blocks[ 0 ].name );\r\n\t\t\t\t}\r\n\t\t\t\treturn ! blocks.some( ( { name } ) => name === 'core/quote' );\r\n\t\t\t},\r\n\t\t\t__experimentalConvert: ( blocks ) =>\r\n\t\t\t\tcreateBlock(\r\n\t\t\t\t\t'core/quote',\r\n\t\t\t\t\t{},\r\n\t\t\t\t\tblocks.map( ( block ) =>\r\n\t\t\t\t\t\tcreateBlock(\r\n\t\t\t\t\t\t\tblock.name,\r\n\t\t\t\t\t\t\tblock.attributes,\r\n\t\t\t\t\t\t\tblock.innerBlocks\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t),\r\n\t\t},\r\n\t],\r\n\tto: [\r\n\t\t{\r\n\t\t\ttype: 'block',\r\n\t\t\tblocks: [ 'core/pullquote' ],\r\n\t\t\tisMatch: ( {}, block ) => {\r\n\t\t\t\treturn block.innerBlocks.every(\r\n\t\t\t\t\t( { name } ) => name === 'core/paragraph'\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\ttransform: (\r\n\t\t\t\t{ align, citation, anchor, fontSize, style },\r\n\t\t\t\tinnerBlocks\r\n\t\t\t) => {\r\n\t\t\t\tconst value = innerBlocks\r\n\t\t\t\t\t.map( ( { attributes } ) => `${ attributes.content }` )\r\n\t\t\t\t\t.join( '<br>' );\r\n\t\t\t\treturn createBlock( 'core/pullquote', {\r\n\t\t\t\t\tvalue,\r\n\t\t\t\t\talign,\r\n\t\t\t\t\tcitation,\r\n\t\t\t\t\tanchor,\r\n\t\t\t\t\tfontSize,\r\n\t\t\t\t\tstyle,\r\n\t\t\t\t} );\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: 'block',\r\n\t\t\tblocks: [ 'core/paragraph' ],\r\n\t\t\ttransform: ( { citation }, innerBlocks ) =>\r\n\t\t\t\tRichText.isEmpty( citation )\r\n\t\t\t\t\t? innerBlocks\r\n\t\t\t\t\t: [\r\n\t\t\t\t\t\t\t...innerBlocks,\r\n\t\t\t\t\t\t\tcreateBlock( 'core/paragraph', {\r\n\t\t\t\t\t\t\t\tcontent: citation,\r\n\t\t\t\t\t\t\t} ),\r\n\t\t\t\t\t  ],\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: 'block',\r\n\t\t\tblocks: [ 'core/group' ],\r\n\t\t\ttransform: ( { citation, anchor }, innerBlocks ) =>\r\n\t\t\t\tcreateBlock(\r\n\t\t\t\t\t'core/group',\r\n\t\t\t\t\t{ anchor },\r\n\t\t\t\t\tRichText.isEmpty( citation )\r\n\t\t\t\t\t\t? innerBlocks\r\n\t\t\t\t\t\t: [\r\n\t\t\t\t\t\t\t\t...innerBlocks,\r\n\t\t\t\t\t\t\t\tcreateBlock( 'core/paragraph', {\r\n\t\t\t\t\t\t\t\t\tcontent: citation,\r\n\t\t\t\t\t\t\t\t} ),\r\n\t\t\t\t\t\t  ]\r\n\t\t\t\t),\r\n\t\t},\r\n\t],\r\n\tungroup: ( { citation }, innerBlocks ) =>\r\n\t\tRichText.isEmpty( citation )\r\n\t\t\t? innerBlocks\r\n\t\t\t: [\r\n\t\t\t\t\t...innerBlocks,\r\n\t\t\t\t\tcreateBlock( 'core/paragraph', {\r\n\t\t\t\t\t\tcontent: citation,\r\n\t\t\t\t\t} ),\r\n\t\t\t  ],\r\n};\r\n\r\nexport default transforms;\r\n"],"mappings":"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","ignoreList":[]}