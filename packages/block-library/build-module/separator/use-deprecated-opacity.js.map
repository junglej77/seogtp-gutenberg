{"version":3,"names":["useEffect","useState","usePrevious","useDeprecatedOpacity","opacity","currentColor","setAttributes","deprecatedOpacityWithNoColor","setDeprecatedOpacityWithNoColor","previousColor"],"sources":["@wordpress/block-library/src/separator/use-deprecated-opacity.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useEffect, useState } from '@wordpress/element';\r\nimport { usePrevious } from '@wordpress/compose';\r\n\r\nexport default function useDeprecatedOpacity(\r\n\topacity,\r\n\tcurrentColor,\r\n\tsetAttributes\r\n) {\r\n\tconst [ deprecatedOpacityWithNoColor, setDeprecatedOpacityWithNoColor ] =\r\n\t\tuseState( false );\r\n\tconst previousColor = usePrevious( currentColor );\r\n\r\n\t// A separator with no color set will always have previousColor set to undefined,\r\n\t// and we need to differentiate these from those with color set that will return\r\n\t// previousColor as undefined on the first render.\r\n\tuseEffect( () => {\r\n\t\tif ( opacity === 'css' && ! currentColor && ! previousColor ) {\r\n\t\t\tsetDeprecatedOpacityWithNoColor( true );\r\n\t\t}\r\n\t}, [ currentColor, previousColor, opacity ] );\r\n\r\n\t// For deprecated blocks, that have a default 0.4 css opacity set, we\r\n\t// need to remove this if the current color is changed, or a color is added.\r\n\t// In these instances the opacity attribute is set back to the default of\r\n\t// alpha-channel which allows a new custom opacity to be set via the color picker.\r\n\tuseEffect( () => {\r\n\t\tif (\r\n\t\t\topacity === 'css' &&\r\n\t\t\t( ( deprecatedOpacityWithNoColor && currentColor ) ||\r\n\t\t\t\t( previousColor && currentColor !== previousColor ) )\r\n\t\t) {\r\n\t\t\tsetAttributes( { opacity: 'alpha-channel' } );\r\n\t\t\tsetDeprecatedOpacityWithNoColor( false );\r\n\t\t}\r\n\t}, [ deprecatedOpacityWithNoColor, currentColor, previousColor ] );\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,oBAAoB;AACxD,SAASC,WAAW,QAAQ,oBAAoB;AAEhD,eAAe,SAASC,oBAAoBA,CAC3CC,OAAO,EACPC,YAAY,EACZC,aAAa,EACZ;EACD,MAAM,CAAEC,4BAA4B,EAAEC,+BAA+B,CAAE,GACtEP,QAAQ,CAAE,KAAM,CAAC;EAClB,MAAMQ,aAAa,GAAGP,WAAW,CAAEG,YAAa,CAAC;;EAEjD;EACA;EACA;EACAL,SAAS,CAAE,MAAM;IAChB,IAAKI,OAAO,KAAK,KAAK,IAAI,CAAEC,YAAY,IAAI,CAAEI,aAAa,EAAG;MAC7DD,+BAA+B,CAAE,IAAK,CAAC;IACxC;EACD,CAAC,EAAE,CAAEH,YAAY,EAAEI,aAAa,EAAEL,OAAO,CAAG,CAAC;;EAE7C;EACA;EACA;EACA;EACAJ,SAAS,CAAE,MAAM;IAChB,IACCI,OAAO,KAAK,KAAK,KACbG,4BAA4B,IAAIF,YAAY,IAC7CI,aAAa,IAAIJ,YAAY,KAAKI,aAAe,CAAE,EACrD;MACDH,aAAa,CAAE;QAAEF,OAAO,EAAE;MAAgB,CAAE,CAAC;MAC7CI,+BAA+B,CAAE,KAAM,CAAC;IACzC;EACD,CAAC,EAAE,CAAED,4BAA4B,EAAEF,YAAY,EAAEI,aAAa,CAAG,CAAC;AACnE","ignoreList":[]}