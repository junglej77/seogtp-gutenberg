{"version":3,"names":["clsx","DELETE","BACKSPACE","useDispatch","InspectorControls","URLPopover","URLInput","useBlockProps","store","blockEditorStore","useState","Button","PanelBody","PanelRow","TextControl","__","keyboardReturn","getIconBySite","getNameBySite","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SocialLinkURLPopover","url","setAttributes","setPopover","popoverAnchor","clientId","removeBlock","anchor","onClose","focus","children","className","onSubmit","event","preventDefault","value","onChange","nextURL","placeholder","label","hideLabelFromVision","disableSuggestions","onKeyDown","defaultPrevented","includes","keyCode","__next40pxDefaultSize","icon","type","SocialLinkEdit","attributes","context","isSelected","service","rel","showLabels","iconColor","iconColorValue","iconBackgroundColor","iconBackgroundColorValue","showURLPopover","classes","setPopoverAnchor","IconComponent","socialLinkName","socialLinkText","trim","blockProps","style","color","backgroundColor","title","__nextHasNoMarginBottom","help","group","ref","onClick"],"sources":["@wordpress/block-library/src/social-link/edit.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { DELETE, BACKSPACE } from '@wordpress/keycodes';\r\nimport { useDispatch } from '@wordpress/data';\r\n\r\nimport {\r\n\tInspectorControls,\r\n\tURLPopover,\r\n\tURLInput,\r\n\tuseBlockProps,\r\n\tstore as blockEditorStore,\r\n} from '@wordpress/block-editor';\r\nimport { useState } from '@wordpress/element';\r\nimport {\r\n\tButton,\r\n\tPanelBody,\r\n\tPanelRow,\r\n\tTextControl,\r\n} from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { keyboardReturn } from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { getIconBySite, getNameBySite } from './social-list';\r\n\r\nconst SocialLinkURLPopover = ( {\r\n\turl,\r\n\tsetAttributes,\r\n\tsetPopover,\r\n\tpopoverAnchor,\r\n\tclientId,\r\n} ) => {\r\n\tconst { removeBlock } = useDispatch( blockEditorStore );\r\n\treturn (\r\n\t\t<URLPopover\r\n\t\t\tanchor={ popoverAnchor }\r\n\t\t\taria-label={ __( 'Edit social link' ) }\r\n\t\t\tonClose={ () => {\r\n\t\t\t\tsetPopover( false );\r\n\t\t\t\tpopoverAnchor?.focus();\r\n\t\t\t} }\r\n\t\t>\r\n\t\t\t<form\r\n\t\t\t\tclassName=\"block-editor-url-popover__link-editor\"\r\n\t\t\t\tonSubmit={ ( event ) => {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tsetPopover( false );\r\n\t\t\t\t\tpopoverAnchor?.focus();\r\n\t\t\t\t} }\r\n\t\t\t>\r\n\t\t\t\t<div className=\"block-editor-url-input\">\r\n\t\t\t\t\t<URLInput\r\n\t\t\t\t\t\tvalue={ url }\r\n\t\t\t\t\t\tonChange={ ( nextURL ) =>\r\n\t\t\t\t\t\t\tsetAttributes( { url: nextURL } )\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tplaceholder={ __( 'Enter social link' ) }\r\n\t\t\t\t\t\tlabel={ __( 'Enter social link' ) }\r\n\t\t\t\t\t\thideLabelFromVision\r\n\t\t\t\t\t\tdisableSuggestions\r\n\t\t\t\t\t\tonKeyDown={ ( event ) => {\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t!! url ||\r\n\t\t\t\t\t\t\t\tevent.defaultPrevented ||\r\n\t\t\t\t\t\t\t\t! [ BACKSPACE, DELETE ].includes(\r\n\t\t\t\t\t\t\t\t\tevent.keyCode\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tremoveBlock( clientId );\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Button\r\n\t\t\t\t\t// TODO: Switch to `true` (40px size) if possible.\r\n\t\t\t\t\t__next40pxDefaultSize={ false }\r\n\t\t\t\t\ticon={ keyboardReturn }\r\n\t\t\t\t\tlabel={ __( 'Apply' ) }\r\n\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t/>\r\n\t\t\t</form>\r\n\t\t</URLPopover>\r\n\t);\r\n};\r\n\r\nconst SocialLinkEdit = ( {\r\n\tattributes,\r\n\tcontext,\r\n\tisSelected,\r\n\tsetAttributes,\r\n\tclientId,\r\n} ) => {\r\n\tconst { url, service, label = '', rel } = attributes;\r\n\tconst {\r\n\t\tshowLabels,\r\n\t\ticonColor,\r\n\t\ticonColorValue,\r\n\t\ticonBackgroundColor,\r\n\t\ticonBackgroundColorValue,\r\n\t} = context;\r\n\tconst [ showURLPopover, setPopover ] = useState( false );\r\n\tconst classes = clsx( 'wp-social-link', 'wp-social-link-' + service, {\r\n\t\t'wp-social-link__is-incomplete': ! url,\r\n\t\t[ `has-${ iconColor }-color` ]: iconColor,\r\n\t\t[ `has-${ iconBackgroundColor }-background-color` ]:\r\n\t\t\ticonBackgroundColor,\r\n\t} );\r\n\r\n\t// Use internal state instead of a ref to make sure that the component\r\n\t// re-renders when the popover's anchor updates.\r\n\tconst [ popoverAnchor, setPopoverAnchor ] = useState( null );\r\n\r\n\tconst IconComponent = getIconBySite( service );\r\n\tconst socialLinkName = getNameBySite( service );\r\n\t// The initial label (ie. the link text) is an empty string.\r\n\t// We want to prevent empty links so that the link text always fallbacks to\r\n\t// the social name, even when users enter and save an empty string or only\r\n\t// spaces. The PHP render callback fallbacks to the social name as well.\r\n\tconst socialLinkText = label.trim() === '' ? socialLinkName : label;\r\n\r\n\tconst blockProps = useBlockProps( {\r\n\t\tclassName: classes,\r\n\t\tstyle: {\r\n\t\t\tcolor: iconColorValue,\r\n\t\t\tbackgroundColor: iconBackgroundColorValue,\r\n\t\t},\r\n\t} );\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<InspectorControls>\r\n\t\t\t\t<PanelBody title={ __( 'Settings' ) }>\r\n\t\t\t\t\t<PanelRow>\r\n\t\t\t\t\t\t<TextControl\r\n\t\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\t\t\tlabel={ __( 'Text' ) }\r\n\t\t\t\t\t\t\thelp={ __(\r\n\t\t\t\t\t\t\t\t'The text is visible when enabled from the parent Social Icons block.'\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\tvalue={ label }\r\n\t\t\t\t\t\t\tonChange={ ( value ) =>\r\n\t\t\t\t\t\t\t\tsetAttributes( { label: value } )\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tplaceholder={ socialLinkName }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</PanelRow>\r\n\t\t\t\t</PanelBody>\r\n\t\t\t</InspectorControls>\r\n\t\t\t<InspectorControls group=\"advanced\">\r\n\t\t\t\t<TextControl\r\n\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\tlabel={ __( 'Link rel' ) }\r\n\t\t\t\t\tvalue={ rel || '' }\r\n\t\t\t\t\tonChange={ ( value ) => setAttributes( { rel: value } ) }\r\n\t\t\t\t/>\r\n\t\t\t</InspectorControls>\r\n\t\t\t<li { ...blockProps }>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName=\"wp-block-social-link-anchor\"\r\n\t\t\t\t\tref={ setPopoverAnchor }\r\n\t\t\t\t\tonClick={ () => setPopover( true ) }\r\n\t\t\t\t\taria-haspopup=\"dialog\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<IconComponent />\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tclassName={ clsx( 'wp-block-social-link-label', {\r\n\t\t\t\t\t\t\t'screen-reader-text': ! showLabels,\r\n\t\t\t\t\t\t} ) }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ socialLinkText }\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</button>\r\n\t\t\t\t{ isSelected && showURLPopover && (\r\n\t\t\t\t\t<SocialLinkURLPopover\r\n\t\t\t\t\t\turl={ url }\r\n\t\t\t\t\t\tsetAttributes={ setAttributes }\r\n\t\t\t\t\t\tsetPopover={ setPopover }\r\n\t\t\t\t\t\tpopoverAnchor={ popoverAnchor }\r\n\t\t\t\t\t\tclientId={ clientId }\r\n\t\t\t\t\t/>\r\n\t\t\t\t) }\r\n\t\t\t</li>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default SocialLinkEdit;\r\n"],"mappings":"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","ignoreList":[]}