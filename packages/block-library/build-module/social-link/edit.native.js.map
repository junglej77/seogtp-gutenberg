{"version":3,"names":["View","Animated","Easing","TouchableWithoutFeedback","BlockControls","store","blockEditorStore","useEffect","useState","useRef","useCallback","ToolbarGroup","ToolbarButton","LinkSettingsNavigation","compose","__","sprintf","link","Icon","withSelect","getIconBySite","getNameBySite","styles","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","DEFAULT_ACTIVE_ICON_STYLES","backgroundColor","color","ANIMATION_DELAY","ANIMATION_DURATION","linkSettingsOptions","url","label","placeholder","autoFocus","linkLabel","footer","SocialLinkEdit","attributes","setAttributes","isSelected","onFocus","name","service","isLinkSheetVisible","setIsLinkSheetVisible","hasUrl","setHasUrl","activeIcon","animatedValue","Value","current","IconComponent","socialLinkName","setValue","animateColors","interpolationColors","opacity","interpolate","inputRange","outputRange","sequence","delay","timing","toValue","duration","easing","circle","useNativeDriver","start","onCloseSettingsSheet","onOpenSettingsSheet","onEmptyURL","onIconPress","accessibilityHint","style","container","children","title","icon","onClick","isActive","isVisible","rel","onClose","options","withBottomSheet","onPress","accessibilityRole","accessibilityLabel","iconContainer","animated","select","clientId","getBlock","block","substring"],"sources":["@wordpress/block-library/src/social-link/edit.native.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport { View, Animated, Easing, TouchableWithoutFeedback } from 'react-native';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tBlockControls,\r\n\tstore as blockEditorStore,\r\n} from '@wordpress/block-editor';\r\nimport { useEffect, useState, useRef, useCallback } from '@wordpress/element';\r\nimport {\r\n\tToolbarGroup,\r\n\tToolbarButton,\r\n\tLinkSettingsNavigation,\r\n} from '@wordpress/components';\r\nimport { compose } from '@wordpress/compose';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { link, Icon } from '@wordpress/icons';\r\nimport { withSelect } from '@wordpress/data';\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { getIconBySite, getNameBySite } from './social-list';\r\nimport styles from './editor.scss';\r\n\r\nconst DEFAULT_ACTIVE_ICON_STYLES = {\r\n\tbackgroundColor: '#f0f0f0',\r\n\tcolor: '#444',\r\n};\r\nconst ANIMATION_DELAY = 300;\r\nconst ANIMATION_DURATION = 400;\r\n\r\nconst linkSettingsOptions = {\r\n\turl: {\r\n\t\tlabel: __( 'URL' ),\r\n\t\tplaceholder: __( 'Add URL' ),\r\n\t\tautoFocus: true,\r\n\t},\r\n\tlinkLabel: {\r\n\t\tlabel: __( 'Link label' ),\r\n\t\tplaceholder: __( 'None' ),\r\n\t},\r\n\tfooter: {\r\n\t\tlabel: __( 'Briefly describe the link to help screen reader user' ),\r\n\t},\r\n};\r\n\r\nconst SocialLinkEdit = ( {\r\n\tattributes,\r\n\tsetAttributes,\r\n\tisSelected,\r\n\tonFocus,\r\n\tname,\r\n} ) => {\r\n\tconst { url, service = name } = attributes;\r\n\tconst [ isLinkSheetVisible, setIsLinkSheetVisible ] = useState( false );\r\n\tconst [ hasUrl, setHasUrl ] = useState( !! url );\r\n\tconst activeIcon =\r\n\t\tstyles[ `wp-social-link-${ service }` ] ||\r\n\t\tstyles[ `wp-social-link` ] ||\r\n\t\tDEFAULT_ACTIVE_ICON_STYLES;\r\n\tconst animatedValue = useRef( new Animated.Value( 0 ) ).current;\r\n\r\n\tconst IconComponent = getIconBySite( service )();\r\n\tconst socialLinkName = getNameBySite( service );\r\n\r\n\t// When new social icon is added link sheet is opened automatically.\r\n\tuseEffect( () => {\r\n\t\tif ( isSelected && ! url ) {\r\n\t\t\tsetIsLinkSheetVisible( true );\r\n\t\t}\r\n\t}, [] );\r\n\r\n\tuseEffect( () => {\r\n\t\tif ( ! url ) {\r\n\t\t\tsetHasUrl( false );\r\n\t\t\tanimatedValue.setValue( 0 );\r\n\t\t} else if ( url ) {\r\n\t\t\tanimateColors();\r\n\t\t}\r\n\t}, [ url ] );\r\n\r\n\tconst interpolationColors = {\r\n\t\topacity: animatedValue.interpolate( {\r\n\t\t\tinputRange: [ 0, 1 ],\r\n\t\t\toutputRange: [ 0.3, 1 ],\r\n\t\t} ),\r\n\t};\r\n\r\n\tconst { opacity } = hasUrl ? activeIcon : interpolationColors;\r\n\r\n\tfunction animateColors() {\r\n\t\tAnimated.sequence( [\r\n\t\t\tAnimated.delay( ANIMATION_DELAY ),\r\n\t\t\tAnimated.timing( animatedValue, {\r\n\t\t\t\ttoValue: 1,\r\n\t\t\t\tduration: ANIMATION_DURATION,\r\n\t\t\t\teasing: Easing.circle,\r\n\t\t\t\tuseNativeDriver: false,\r\n\t\t\t} ),\r\n\t\t] ).start( () => setHasUrl( true ) );\r\n\t}\r\n\r\n\tconst onCloseSettingsSheet = useCallback( () => {\r\n\t\tsetIsLinkSheetVisible( false );\r\n\t}, [] );\r\n\r\n\tconst onOpenSettingsSheet = useCallback( () => {\r\n\t\tsetIsLinkSheetVisible( true );\r\n\t}, [] );\r\n\r\n\tconst onEmptyURL = useCallback( () => {\r\n\t\tanimatedValue.setValue( 0 );\r\n\t\tsetHasUrl( false );\r\n\t}, [ animatedValue ] );\r\n\r\n\tfunction onIconPress() {\r\n\t\tif ( isSelected ) {\r\n\t\t\tsetIsLinkSheetVisible( true );\r\n\t\t} else {\r\n\t\t\tonFocus();\r\n\t\t}\r\n\t}\r\n\r\n\tconst accessibilityHint = url\r\n\t\t? sprintf(\r\n\t\t\t\t// translators: %s: social link name e.g: \"Instagram\".\r\n\t\t\t\t__( '%s has URL set' ),\r\n\t\t\t\tsocialLinkName\r\n\t\t  )\r\n\t\t: sprintf(\r\n\t\t\t\t// translators: %s: social link name e.g: \"Instagram\".\r\n\t\t\t\t__( '%s has no URL set' ),\r\n\t\t\t\tsocialLinkName\r\n\t\t  );\r\n\r\n\treturn (\r\n\t\t<View style={ styles.container }>\r\n\t\t\t{ isSelected && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<BlockControls>\r\n\t\t\t\t\t\t<ToolbarGroup>\r\n\t\t\t\t\t\t\t<ToolbarButton\r\n\t\t\t\t\t\t\t\ttitle={ sprintf(\r\n\t\t\t\t\t\t\t\t\t// translators: %s: social link name e.g: \"Instagram\".\r\n\t\t\t\t\t\t\t\t\t__( 'Add link to %s' ),\r\n\t\t\t\t\t\t\t\t\tsocialLinkName\r\n\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\ticon={ link }\r\n\t\t\t\t\t\t\t\tonClick={ onOpenSettingsSheet }\r\n\t\t\t\t\t\t\t\tisActive={ url }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</ToolbarGroup>\r\n\t\t\t\t\t</BlockControls>\r\n\t\t\t\t\t<LinkSettingsNavigation\r\n\t\t\t\t\t\tisVisible={ isLinkSheetVisible }\r\n\t\t\t\t\t\turl={ attributes.url }\r\n\t\t\t\t\t\tlabel={ attributes.label }\r\n\t\t\t\t\t\trel={ attributes.rel }\r\n\t\t\t\t\t\tonEmptyURL={ onEmptyURL }\r\n\t\t\t\t\t\tonClose={ onCloseSettingsSheet }\r\n\t\t\t\t\t\tsetAttributes={ setAttributes }\r\n\t\t\t\t\t\toptions={ linkSettingsOptions }\r\n\t\t\t\t\t\twithBottomSheet\r\n\t\t\t\t\t/>\r\n\t\t\t\t</>\r\n\t\t\t) }\r\n\r\n\t\t\t<TouchableWithoutFeedback\r\n\t\t\t\tonPress={ onIconPress }\r\n\t\t\t\taccessibilityRole=\"button\"\r\n\t\t\t\taccessibilityLabel={ sprintf(\r\n\t\t\t\t\t// translators: %s: social link name e.g: \"Instagram\".\r\n\t\t\t\t\t__( '%s social icon' ),\r\n\t\t\t\t\tsocialLinkName\r\n\t\t\t\t) }\r\n\t\t\t\taccessibilityHint={ accessibilityHint }\r\n\t\t\t>\r\n\t\t\t\t<Animated.View\r\n\t\t\t\t\tstyle={ [\r\n\t\t\t\t\t\tstyles.iconContainer,\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tbackgroundColor: activeIcon.backgroundColor,\r\n\t\t\t\t\t\t\topacity,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t] }\r\n\t\t\t\t>\r\n\t\t\t\t\t<Icon\r\n\t\t\t\t\t\tanimated\r\n\t\t\t\t\t\ticon={ IconComponent }\r\n\t\t\t\t\t\tstyle={ { color: activeIcon.color } }\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Animated.View>\r\n\t\t\t</TouchableWithoutFeedback>\r\n\t\t</View>\r\n\t);\r\n};\r\n\r\nexport default compose( [\r\n\twithSelect( ( select, { clientId } ) => {\r\n\t\tconst { getBlock } = select( blockEditorStore );\r\n\r\n\t\tconst block = getBlock( clientId );\r\n\t\tconst name = block?.name.substring( 17 );\r\n\r\n\t\treturn {\r\n\t\t\tname,\r\n\t\t};\r\n\t} ),\r\n] )( SocialLinkEdit );\r\n"],"mappings":"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","ignoreList":[]}