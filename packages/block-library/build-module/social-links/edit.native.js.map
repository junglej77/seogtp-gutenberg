{"version":3,"names":["View","InnerBlocks","store","blockEditorStore","withDispatch","withSelect","useRef","useEffect","useState","compose","usePreferredColorSchemeStyle","styles","jsx","_jsx","TEMPLATE","service","url","SocialLinksEdit","shouldDelete","onDelete","isSelected","isInnerIconSelected","innerBlocks","attributes","activeInnerBlocks","getBlock","blockWidth","initialCreation","setInitialCreation","shouldRenderFooterAppender","align","marginLeft","spacing","renderFooterAppender","style","footerAppenderContainer","children","ButtonBlockAppender","isFloating","placeholderStyle","placeholder","placeholderDark","renderPlaceholder","Array","length","map","_","index","testID","filterInnerBlocks","blockIds","filter","blockId","placeholderWrapper","templateLock","template","current","orientation","onDeleteBlock","undefined","marginVertical","marginHorizontal","horizontalAlignment","select","clientId","getBlockCount","getBlockParents","getSelectedBlockClientId","getBlocks","selectedBlockClientId","selectedBlockParents","block","dispatch","removeBlock"],"sources":["@wordpress/block-library/src/social-links/edit.native.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport { View } from 'react-native';\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tInnerBlocks,\r\n\tstore as blockEditorStore,\r\n} from '@wordpress/block-editor';\r\nimport { withDispatch, withSelect } from '@wordpress/data';\r\nimport { useRef, useEffect, useState } from '@wordpress/element';\r\nimport { compose, usePreferredColorSchemeStyle } from '@wordpress/compose';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport styles from './editor.scss';\r\n\r\n// Template contains the links that show when start.\r\nconst TEMPLATE = [\r\n\t[\r\n\t\t'core/social-link-wordpress',\r\n\t\t{ service: 'wordpress', url: 'https://wordpress.org' },\r\n\t],\r\n\t[ 'core/social-link-facebook', { service: 'facebook' } ],\r\n\t[ 'core/social-link-twitter', { service: 'twitter' } ],\r\n\t[ 'core/social-link-instagram', { service: 'instagram' } ],\r\n];\r\n\r\nfunction SocialLinksEdit( {\r\n\tshouldDelete,\r\n\tonDelete,\r\n\tisSelected,\r\n\tisInnerIconSelected,\r\n\tinnerBlocks,\r\n\tattributes,\r\n\tactiveInnerBlocks,\r\n\tgetBlock,\r\n\tblockWidth,\r\n} ) {\r\n\tconst [ initialCreation, setInitialCreation ] = useState( true );\r\n\tconst shouldRenderFooterAppender = isSelected || isInnerIconSelected;\r\n\tconst { align } = attributes;\r\n\tconst { marginLeft: spacing } = styles.spacing;\r\n\r\n\tuseEffect( () => {\r\n\t\tif ( ! shouldRenderFooterAppender ) {\r\n\t\t\tsetInitialCreation( false );\r\n\t\t}\r\n\t}, [ shouldRenderFooterAppender ] );\r\n\r\n\tconst renderFooterAppender = useRef( () => (\r\n\t\t<View style={ styles.footerAppenderContainer }>\r\n\t\t\t<InnerBlocks.ButtonBlockAppender isFloating />\r\n\t\t</View>\r\n\t) );\r\n\r\n\tconst placeholderStyle = usePreferredColorSchemeStyle(\r\n\t\tstyles.placeholder,\r\n\t\tstyles.placeholderDark\r\n\t);\r\n\r\n\tfunction renderPlaceholder() {\r\n\t\treturn [ ...new Array( innerBlocks.length || 1 ) ].map(\r\n\t\t\t( _, index ) => (\r\n\t\t\t\t<View\r\n\t\t\t\t\ttestID=\"social-links-placeholder\"\r\n\t\t\t\t\tstyle={ placeholderStyle }\r\n\t\t\t\t\tkey={ index }\r\n\t\t\t\t/>\r\n\t\t\t)\r\n\t\t);\r\n\t}\r\n\r\n\tfunction filterInnerBlocks( blockIds ) {\r\n\t\treturn blockIds.filter(\r\n\t\t\t( blockId ) => getBlock( blockId ).attributes.url\r\n\t\t);\r\n\t}\r\n\r\n\tif ( ! shouldRenderFooterAppender && activeInnerBlocks.length === 0 ) {\r\n\t\treturn (\r\n\t\t\t<View style={ styles.placeholderWrapper }>\r\n\t\t\t\t{ renderPlaceholder() }\r\n\t\t\t</View>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<InnerBlocks\r\n\t\t\ttemplateLock={ false }\r\n\t\t\ttemplate={ initialCreation && TEMPLATE }\r\n\t\t\trenderFooterAppender={\r\n\t\t\t\tshouldRenderFooterAppender && renderFooterAppender.current\r\n\t\t\t}\r\n\t\t\torientation=\"horizontal\"\r\n\t\t\tonDeleteBlock={ shouldDelete ? onDelete : undefined }\r\n\t\t\tmarginVertical={ spacing }\r\n\t\t\tmarginHorizontal={ spacing }\r\n\t\t\thorizontalAlignment={ align }\r\n\t\t\tfilterInnerBlocks={\r\n\t\t\t\t! shouldRenderFooterAppender && filterInnerBlocks\r\n\t\t\t}\r\n\t\t\tblockWidth={ blockWidth }\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default compose(\r\n\twithSelect( ( select, { clientId } ) => {\r\n\t\tconst {\r\n\t\t\tgetBlockCount,\r\n\t\t\tgetBlockParents,\r\n\t\t\tgetSelectedBlockClientId,\r\n\t\t\tgetBlocks,\r\n\t\t\tgetBlock,\r\n\t\t} = select( blockEditorStore );\r\n\t\tconst selectedBlockClientId = getSelectedBlockClientId();\r\n\t\tconst selectedBlockParents = getBlockParents(\r\n\t\t\tselectedBlockClientId,\r\n\t\t\ttrue\r\n\t\t);\r\n\t\tconst innerBlocks = getBlocks( clientId );\r\n\t\tconst activeInnerBlocks = innerBlocks.filter(\r\n\t\t\t( block ) => block.attributes?.url\r\n\t\t);\r\n\r\n\t\treturn {\r\n\t\t\tshouldDelete: getBlockCount( clientId ) === 1,\r\n\t\t\tisInnerIconSelected: selectedBlockParents[ 0 ] === clientId,\r\n\t\t\tinnerBlocks,\r\n\t\t\tactiveInnerBlocks,\r\n\t\t\tgetBlock,\r\n\t\t};\r\n\t} ),\r\n\twithDispatch( ( dispatch, { clientId } ) => {\r\n\t\tconst { removeBlock } = dispatch( blockEditorStore );\r\n\r\n\t\treturn {\r\n\t\t\tonDelete: () => {\r\n\t\t\t\tremoveBlock( clientId, false );\r\n\t\t\t},\r\n\t\t};\r\n\t} )\r\n)( SocialLinksEdit );\r\n"],"mappings":"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","ignoreList":[]}