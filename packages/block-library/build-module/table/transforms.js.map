{"version":3,"names":["createBlock","normalizeRowColSpan","tableContentPasteSchema","phrasingContentSchema","tr","allowEmpty","children","th","attributes","td","tablePasteSchema","args","table","thead","tfoot","tbody","transforms","from","type","selector","schema","transform","node","Array","reduce","sectionAcc","section","length","sectionName","nodeName","toLowerCase","slice","sectionAttributes","rowAcc","row","rowAttributes","colAcc","col","rowspan","getAttribute","colspan","push","tag","content","innerHTML","cells"],"sources":["@wordpress/block-library/src/table/transforms.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { createBlock } from '@wordpress/blocks';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { normalizeRowColSpan } from './utils';\r\n\r\nconst tableContentPasteSchema = ( { phrasingContentSchema } ) => ( {\r\n\ttr: {\r\n\t\tallowEmpty: true,\r\n\t\tchildren: {\r\n\t\t\tth: {\r\n\t\t\t\tallowEmpty: true,\r\n\t\t\t\tchildren: phrasingContentSchema,\r\n\t\t\t\tattributes: [ 'scope', 'colspan', 'rowspan' ],\r\n\t\t\t},\r\n\t\t\ttd: {\r\n\t\t\t\tallowEmpty: true,\r\n\t\t\t\tchildren: phrasingContentSchema,\r\n\t\t\t\tattributes: [ 'colspan', 'rowspan' ],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n} );\r\n\r\nconst tablePasteSchema = ( args ) => ( {\r\n\ttable: {\r\n\t\tchildren: {\r\n\t\t\tthead: {\r\n\t\t\t\tallowEmpty: true,\r\n\t\t\t\tchildren: tableContentPasteSchema( args ),\r\n\t\t\t},\r\n\t\t\ttfoot: {\r\n\t\t\t\tallowEmpty: true,\r\n\t\t\t\tchildren: tableContentPasteSchema( args ),\r\n\t\t\t},\r\n\t\t\ttbody: {\r\n\t\t\t\tallowEmpty: true,\r\n\t\t\t\tchildren: tableContentPasteSchema( args ),\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n} );\r\n\r\nconst transforms = {\r\n\tfrom: [\r\n\t\t{\r\n\t\t\ttype: 'raw',\r\n\t\t\tselector: 'table',\r\n\t\t\tschema: tablePasteSchema,\r\n\t\t\ttransform: ( node ) => {\r\n\t\t\t\tconst attributes = Array.from( node.children ).reduce(\r\n\t\t\t\t\t( sectionAcc, section ) => {\r\n\t\t\t\t\t\tif ( ! section.children.length ) {\r\n\t\t\t\t\t\t\treturn sectionAcc;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tconst sectionName = section.nodeName\r\n\t\t\t\t\t\t\t.toLowerCase()\r\n\t\t\t\t\t\t\t.slice( 1 );\r\n\r\n\t\t\t\t\t\tconst sectionAttributes = Array.from(\r\n\t\t\t\t\t\t\tsection.children\r\n\t\t\t\t\t\t).reduce( ( rowAcc, row ) => {\r\n\t\t\t\t\t\t\tif ( ! row.children.length ) {\r\n\t\t\t\t\t\t\t\treturn rowAcc;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tconst rowAttributes = Array.from(\r\n\t\t\t\t\t\t\t\trow.children\r\n\t\t\t\t\t\t\t).reduce( ( colAcc, col ) => {\r\n\t\t\t\t\t\t\t\tconst rowspan = normalizeRowColSpan(\r\n\t\t\t\t\t\t\t\t\tcol.getAttribute( 'rowspan' )\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\tconst colspan = normalizeRowColSpan(\r\n\t\t\t\t\t\t\t\t\tcol.getAttribute( 'colspan' )\r\n\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\tcolAcc.push( {\r\n\t\t\t\t\t\t\t\t\ttag: col.nodeName.toLowerCase(),\r\n\t\t\t\t\t\t\t\t\tcontent: col.innerHTML,\r\n\t\t\t\t\t\t\t\t\trowspan,\r\n\t\t\t\t\t\t\t\t\tcolspan,\r\n\t\t\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t\t\t\treturn colAcc;\r\n\t\t\t\t\t\t\t}, [] );\r\n\r\n\t\t\t\t\t\t\trowAcc.push( {\r\n\t\t\t\t\t\t\t\tcells: rowAttributes,\r\n\t\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t\t\treturn rowAcc;\r\n\t\t\t\t\t\t}, [] );\r\n\r\n\t\t\t\t\t\tsectionAcc[ sectionName ] = sectionAttributes;\r\n\t\t\t\t\t\treturn sectionAcc;\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{}\r\n\t\t\t\t);\r\n\r\n\t\t\t\treturn createBlock( 'core/table', attributes );\r\n\t\t\t},\r\n\t\t},\r\n\t],\r\n};\r\n\r\nexport default transforms;\r\n"],"mappings":"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","ignoreList":[]}