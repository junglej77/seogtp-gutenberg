{"version":3,"names":["Flex","FlexItem","PanelBody","ToggleControl","SelectControl","RangeControl","__experimentalUnitControl","UnitControl","__experimentalUseCustomUnits","useCustomUnits","__experimentalParseQuantityAndUnitFromRawValue","parseQuantityAndUnitFromRawValue","__experimentalVStack","VStack","Disabled","useSelect","__","InspectorControls","useBlockProps","useSettings","ServerSideRender","store","coreStore","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MIN_TAGS","MAX_TAGS","MIN_FONT_SIZE","MAX_FONT_SIZE","TagCloudEdit","attributes","setAttributes","taxonomy","showTagCounts","numberOfTags","smallestFontSize","largestFontSize","availableUnits","units","taxonomies","select","getTaxonomies","per_page","getTaxonomyOptions","selectOption","label","value","disabled","taxonomyOptions","filter","tax","show_cloud","map","item","slug","name","onFontSizeChange","fontSizeLabel","newValue","quantity","newUnit","Number","isFinite","updateObj","Object","entries","forEach","attribute","currentValue","currentQuantity","currentUnit","serverSideAttributes","style","border","undefined","inspectorControls","children","title","spacing","className","__nextHasNoMarginBottom","__next40pxDefaultSize","options","onChange","selectedTaxonomy","gap","isBlock","min","max","size","required","checked","skipBlockSupportAttributes","block"],"sources":["@wordpress/block-library/src/tag-cloud/edit.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tFlex,\r\n\tFlexItem,\r\n\tPanelBody,\r\n\tToggleControl,\r\n\tSelectControl,\r\n\tRangeControl,\r\n\t__experimentalUnitControl as UnitControl,\r\n\t__experimentalUseCustomUnits as useCustomUnits,\r\n\t__experimentalParseQuantityAndUnitFromRawValue as parseQuantityAndUnitFromRawValue,\r\n\t__experimentalVStack as VStack,\r\n\tDisabled,\r\n} from '@wordpress/components';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { __ } from '@wordpress/i18n';\r\nimport {\r\n\tInspectorControls,\r\n\tuseBlockProps,\r\n\tuseSettings,\r\n} from '@wordpress/block-editor';\r\nimport ServerSideRender from '@wordpress/server-side-render';\r\nimport { store as coreStore } from '@wordpress/core-data';\r\n\r\n/**\r\n * Minimum number of tags a user can show using this block.\r\n *\r\n * @type {number}\r\n */\r\nconst MIN_TAGS = 1;\r\n\r\n/**\r\n * Maximum number of tags a user can show using this block.\r\n *\r\n * @type {number}\r\n */\r\nconst MAX_TAGS = 100;\r\n\r\nconst MIN_FONT_SIZE = 0.1;\r\nconst MAX_FONT_SIZE = 100;\r\n\r\nfunction TagCloudEdit( { attributes, setAttributes } ) {\r\n\tconst {\r\n\t\ttaxonomy,\r\n\t\tshowTagCounts,\r\n\t\tnumberOfTags,\r\n\t\tsmallestFontSize,\r\n\t\tlargestFontSize,\r\n\t} = attributes;\r\n\r\n\tconst [ availableUnits ] = useSettings( 'spacing.units' );\r\n\r\n\t// The `pt` unit is used as the default value and is therefore\r\n\t// always considered an available unit.\r\n\tconst units = useCustomUnits( {\r\n\t\tavailableUnits: availableUnits\r\n\t\t\t? [ ...availableUnits, 'pt' ]\r\n\t\t\t: [ '%', 'px', 'em', 'rem', 'pt' ],\r\n\t} );\r\n\r\n\tconst taxonomies = useSelect(\r\n\t\t( select ) => select( coreStore ).getTaxonomies( { per_page: -1 } ),\r\n\t\t[]\r\n\t);\r\n\r\n\tconst getTaxonomyOptions = () => {\r\n\t\tconst selectOption = {\r\n\t\t\tlabel: __( '- Select -' ),\r\n\t\t\tvalue: '',\r\n\t\t\tdisabled: true,\r\n\t\t};\r\n\t\tconst taxonomyOptions = ( taxonomies ?? [] )\r\n\t\t\t.filter( ( tax ) => !! tax.show_cloud )\r\n\t\t\t.map( ( item ) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tvalue: item.slug,\r\n\t\t\t\t\tlabel: item.name,\r\n\t\t\t\t};\r\n\t\t\t} );\r\n\r\n\t\treturn [ selectOption, ...taxonomyOptions ];\r\n\t};\r\n\r\n\tconst onFontSizeChange = ( fontSizeLabel, newValue ) => {\r\n\t\t// eslint-disable-next-line @wordpress/no-unused-vars-before-return\r\n\t\tconst [ quantity, newUnit ] =\r\n\t\t\tparseQuantityAndUnitFromRawValue( newValue );\r\n\t\tif ( ! Number.isFinite( quantity ) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst updateObj = { [ fontSizeLabel ]: newValue };\r\n\t\t// We need to keep in sync the `unit` changes to both `smallestFontSize`\r\n\t\t// and `largestFontSize` attributes.\r\n\t\tObject.entries( {\r\n\t\t\tsmallestFontSize,\r\n\t\t\tlargestFontSize,\r\n\t\t} ).forEach( ( [ attribute, currentValue ] ) => {\r\n\t\t\tconst [ currentQuantity, currentUnit ] =\r\n\t\t\t\tparseQuantityAndUnitFromRawValue( currentValue );\r\n\t\t\t// Only add an update if the other font size attribute has a different unit.\r\n\t\t\tif ( attribute !== fontSizeLabel && currentUnit !== newUnit ) {\r\n\t\t\t\tupdateObj[ attribute ] = `${ currentQuantity }${ newUnit }`;\r\n\t\t\t}\r\n\t\t} );\r\n\t\tsetAttributes( updateObj );\r\n\t};\r\n\r\n\t// Remove border styles from the server-side attributes to prevent duplicate border.\r\n\tconst serverSideAttributes = {\r\n\t\t...attributes,\r\n\t\tstyle: {\r\n\t\t\t...attributes?.style,\r\n\t\t\tborder: undefined,\r\n\t\t},\r\n\t};\r\n\r\n\tconst inspectorControls = (\r\n\t\t<InspectorControls>\r\n\t\t\t<PanelBody title={ __( 'Settings' ) }>\r\n\t\t\t\t<VStack\r\n\t\t\t\t\tspacing={ 4 }\r\n\t\t\t\t\tclassName=\"wp-block-tag-cloud__inspector-settings\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<SelectControl\r\n\t\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\tlabel={ __( 'Taxonomy' ) }\r\n\t\t\t\t\t\toptions={ getTaxonomyOptions() }\r\n\t\t\t\t\t\tvalue={ taxonomy }\r\n\t\t\t\t\t\tonChange={ ( selectedTaxonomy ) =>\r\n\t\t\t\t\t\t\tsetAttributes( { taxonomy: selectedTaxonomy } )\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Flex gap={ 4 }>\r\n\t\t\t\t\t\t<FlexItem isBlock>\r\n\t\t\t\t\t\t\t<UnitControl\r\n\t\t\t\t\t\t\t\tlabel={ __( 'Smallest size' ) }\r\n\t\t\t\t\t\t\t\tvalue={ smallestFontSize }\r\n\t\t\t\t\t\t\t\tonChange={ ( value ) => {\r\n\t\t\t\t\t\t\t\t\tonFontSizeChange(\r\n\t\t\t\t\t\t\t\t\t\t'smallestFontSize',\r\n\t\t\t\t\t\t\t\t\t\tvalue\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t\tunits={ units }\r\n\t\t\t\t\t\t\t\tmin={ MIN_FONT_SIZE }\r\n\t\t\t\t\t\t\t\tmax={ MAX_FONT_SIZE }\r\n\t\t\t\t\t\t\t\tsize=\"__unstable-large\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</FlexItem>\r\n\t\t\t\t\t\t<FlexItem isBlock>\r\n\t\t\t\t\t\t\t<UnitControl\r\n\t\t\t\t\t\t\t\tlabel={ __( 'Largest size' ) }\r\n\t\t\t\t\t\t\t\tvalue={ largestFontSize }\r\n\t\t\t\t\t\t\t\tonChange={ ( value ) => {\r\n\t\t\t\t\t\t\t\t\tonFontSizeChange(\r\n\t\t\t\t\t\t\t\t\t\t'largestFontSize',\r\n\t\t\t\t\t\t\t\t\t\tvalue\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t\tunits={ units }\r\n\t\t\t\t\t\t\t\tmin={ MIN_FONT_SIZE }\r\n\t\t\t\t\t\t\t\tmax={ MAX_FONT_SIZE }\r\n\t\t\t\t\t\t\t\tsize=\"__unstable-large\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</FlexItem>\r\n\t\t\t\t\t</Flex>\r\n\t\t\t\t\t<RangeControl\r\n\t\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\tlabel={ __( 'Number of tags' ) }\r\n\t\t\t\t\t\tvalue={ numberOfTags }\r\n\t\t\t\t\t\tonChange={ ( value ) =>\r\n\t\t\t\t\t\t\tsetAttributes( { numberOfTags: value } )\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tmin={ MIN_TAGS }\r\n\t\t\t\t\t\tmax={ MAX_TAGS }\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<ToggleControl\r\n\t\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\t\tlabel={ __( 'Show tag counts' ) }\r\n\t\t\t\t\t\tchecked={ showTagCounts }\r\n\t\t\t\t\t\tonChange={ () =>\r\n\t\t\t\t\t\t\tsetAttributes( { showTagCounts: ! showTagCounts } )\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</VStack>\r\n\t\t\t</PanelBody>\r\n\t\t</InspectorControls>\r\n\t);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ inspectorControls }\r\n\t\t\t<div { ...useBlockProps() }>\r\n\t\t\t\t<Disabled>\r\n\t\t\t\t\t<ServerSideRender\r\n\t\t\t\t\t\tskipBlockSupportAttributes\r\n\t\t\t\t\t\tblock=\"core/tag-cloud\"\r\n\t\t\t\t\t\tattributes={ serverSideAttributes }\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Disabled>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default TagCloudEdit;\r\n"],"mappings":"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","ignoreList":[]}