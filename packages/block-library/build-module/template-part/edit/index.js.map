{"version":3,"names":["serialize","useSelect","useDispatch","BlockSettingsMenuControls","useBlockProps","Warning","store","blockEditorStore","RecursionProvider","useHasRecursion","InspectorControls","__experimentalBlockPatternsList","BlockPatternsList","BlockControls","PanelBody","Spinner","Modal","MenuItem","ToolbarButton","useAsyncList","__","sprintf","coreStore","useState","noticesStore","TemplatePartPlaceholder","TemplatePartSelectionModal","TemplatePartAdvancedControls","TemplatePartInnerBlocks","createTemplatePartId","useAlternativeBlockPatterns","useAlternativeTemplateParts","useTemplatePartArea","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ReplaceButton","isEntityAvailable","area","templatePartId","isTemplatePartSelectionOpen","setIsTemplatePartSelectionOpen","templateParts","hasReplacements","length","canReplace","onClick","children","TemplatesList","clientId","onSelect","blockPatterns","shownTemplates","title","label","shownPatterns","onClickPattern","showTitle","TemplatePartEdit","attributes","setAttributes","createSuccessNotice","editEntityRecord","currentTheme","select","getCurrentTheme","stylesheet","slug","theme","tagName","layout","hasAlreadyRendered","isResolved","hasInnerBlocks","isMissing","onNavigateToEntityRecord","canUserEdit","getEditedEntityRecord","hasFinishedResolution","getBlockCount","getSettings","getEntityArgs","entityRecord","_area","hasResolvedEntity","_canUserEdit","canUser","kind","name","id","Object","keys","areaObject","blockProps","isPlaceholder","TagName","onPatternSelect","pattern","blocks","content","type","uniqueId","group","postId","postType","defaultWrapper","onOpenSelectionModal","selectedClientIds","overlayClassName","toLowerCase","onRequestClose","isFullScreen","onClose"],"sources":["@wordpress/block-library/src/template-part/edit/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { serialize } from '@wordpress/blocks';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport {\r\n\tBlockSettingsMenuControls,\r\n\tuseBlockProps,\r\n\tWarning,\r\n\tstore as blockEditorStore,\r\n\tRecursionProvider,\r\n\tuseHasRecursion,\r\n\tInspectorControls,\r\n\t__experimentalBlockPatternsList as BlockPatternsList,\r\n\tBlockControls,\r\n} from '@wordpress/block-editor';\r\nimport {\r\n\tPanelBody,\r\n\tSpinner,\r\n\tModal,\r\n\tMenuItem,\r\n\tToolbarButton,\r\n} from '@wordpress/components';\r\nimport { useAsyncList } from '@wordpress/compose';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { store as coreStore } from '@wordpress/core-data';\r\nimport { useState } from '@wordpress/element';\r\nimport { store as noticesStore } from '@wordpress/notices';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport TemplatePartPlaceholder from './placeholder';\r\nimport TemplatePartSelectionModal from './selection-modal';\r\nimport { TemplatePartAdvancedControls } from './advanced-controls';\r\nimport TemplatePartInnerBlocks from './inner-blocks';\r\nimport { createTemplatePartId } from './utils/create-template-part-id';\r\nimport {\r\n\tuseAlternativeBlockPatterns,\r\n\tuseAlternativeTemplateParts,\r\n\tuseTemplatePartArea,\r\n} from './utils/hooks';\r\n\r\nfunction ReplaceButton( {\r\n\tisEntityAvailable,\r\n\tarea,\r\n\ttemplatePartId,\r\n\tisTemplatePartSelectionOpen,\r\n\tsetIsTemplatePartSelectionOpen,\r\n} ) {\r\n\t// This hook fetches patterns, so don't run it unconditionally in the main\r\n\t// edit function!\r\n\tconst { templateParts } = useAlternativeTemplateParts(\r\n\t\tarea,\r\n\t\ttemplatePartId\r\n\t);\r\n\tconst hasReplacements = !! templateParts.length;\r\n\tconst canReplace =\r\n\t\tisEntityAvailable &&\r\n\t\thasReplacements &&\r\n\t\t( area === 'header' || area === 'footer' );\r\n\r\n\tif ( ! canReplace ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<MenuItem\r\n\t\t\tonClick={ () => {\r\n\t\t\t\tsetIsTemplatePartSelectionOpen( true );\r\n\t\t\t} }\r\n\t\t\taria-expanded={ isTemplatePartSelectionOpen }\r\n\t\t\taria-haspopup=\"dialog\"\r\n\t\t>\r\n\t\t\t{ __( 'Replace' ) }\r\n\t\t</MenuItem>\r\n\t);\r\n}\r\n\r\nfunction TemplatesList( { area, clientId, isEntityAvailable, onSelect } ) {\r\n\t// This hook fetches patterns, so don't run it unconditionally in the main\r\n\t// edit function!\r\n\tconst blockPatterns = useAlternativeBlockPatterns( area, clientId );\r\n\tconst canReplace =\r\n\t\tisEntityAvailable &&\r\n\t\t!! blockPatterns.length &&\r\n\t\t( area === 'header' || area === 'footer' );\r\n\tconst shownTemplates = useAsyncList( blockPatterns );\r\n\r\n\tif ( ! canReplace ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<PanelBody title={ __( 'Design' ) }>\r\n\t\t\t<BlockPatternsList\r\n\t\t\t\tlabel={ __( 'Templates' ) }\r\n\t\t\t\tblockPatterns={ blockPatterns }\r\n\t\t\t\tshownPatterns={ shownTemplates }\r\n\t\t\t\tonClickPattern={ onSelect }\r\n\t\t\t\tshowTitle={ false }\r\n\t\t\t/>\r\n\t\t</PanelBody>\r\n\t);\r\n}\r\n\r\nexport default function TemplatePartEdit( {\r\n\tattributes,\r\n\tsetAttributes,\r\n\tclientId,\r\n} ) {\r\n\tconst { createSuccessNotice } = useDispatch( noticesStore );\r\n\tconst { editEntityRecord } = useDispatch( coreStore );\r\n\tconst currentTheme = useSelect(\r\n\t\t( select ) => select( coreStore ).getCurrentTheme()?.stylesheet,\r\n\t\t[]\r\n\t);\r\n\tconst { slug, theme = currentTheme, tagName, layout = {} } = attributes;\r\n\tconst templatePartId = createTemplatePartId( theme, slug );\r\n\tconst hasAlreadyRendered = useHasRecursion( templatePartId );\r\n\tconst [ isTemplatePartSelectionOpen, setIsTemplatePartSelectionOpen ] =\r\n\t\tuseState( false );\r\n\r\n\tconst {\r\n\t\tisResolved,\r\n\t\thasInnerBlocks,\r\n\t\tisMissing,\r\n\t\tarea,\r\n\t\tonNavigateToEntityRecord,\r\n\t\ttitle,\r\n\t\tcanUserEdit,\r\n\t} = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst { getEditedEntityRecord, hasFinishedResolution } =\r\n\t\t\t\tselect( coreStore );\r\n\t\t\tconst { getBlockCount, getSettings } = select( blockEditorStore );\r\n\r\n\t\t\tconst getEntityArgs = [\r\n\t\t\t\t'postType',\r\n\t\t\t\t'wp_template_part',\r\n\t\t\t\ttemplatePartId,\r\n\t\t\t];\r\n\t\t\tconst entityRecord = templatePartId\r\n\t\t\t\t? getEditedEntityRecord( ...getEntityArgs )\r\n\t\t\t\t: null;\r\n\t\t\tconst _area = entityRecord?.area || attributes.area;\r\n\t\t\tconst hasResolvedEntity = templatePartId\r\n\t\t\t\t? hasFinishedResolution(\r\n\t\t\t\t\t\t'getEditedEntityRecord',\r\n\t\t\t\t\t\tgetEntityArgs\r\n\t\t\t\t  )\r\n\t\t\t\t: false;\r\n\r\n\t\t\tconst _canUserEdit = hasResolvedEntity\r\n\t\t\t\t? select( coreStore ).canUser( 'update', {\r\n\t\t\t\t\t\tkind: 'postType',\r\n\t\t\t\t\t\tname: 'wp_template_part',\r\n\t\t\t\t\t\tid: templatePartId,\r\n\t\t\t\t  } )\r\n\t\t\t\t: false;\r\n\r\n\t\t\treturn {\r\n\t\t\t\thasInnerBlocks: getBlockCount( clientId ) > 0,\r\n\t\t\t\tisResolved: hasResolvedEntity,\r\n\t\t\t\tisMissing:\r\n\t\t\t\t\thasResolvedEntity &&\r\n\t\t\t\t\t( ! entityRecord ||\r\n\t\t\t\t\t\tObject.keys( entityRecord ).length === 0 ),\r\n\t\t\t\tarea: _area,\r\n\t\t\t\tonNavigateToEntityRecord:\r\n\t\t\t\t\tgetSettings().onNavigateToEntityRecord,\r\n\t\t\t\ttitle: entityRecord?.title,\r\n\t\t\t\tcanUserEdit: !! _canUserEdit,\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ templatePartId, attributes.area, clientId ]\r\n\t);\r\n\r\n\tconst areaObject = useTemplatePartArea( area );\r\n\tconst blockProps = useBlockProps();\r\n\tconst isPlaceholder = ! slug;\r\n\tconst isEntityAvailable = ! isPlaceholder && ! isMissing && isResolved;\r\n\tconst TagName = tagName || areaObject.tagName;\r\n\r\n\tconst onPatternSelect = async ( pattern ) => {\r\n\t\tawait editEntityRecord(\r\n\t\t\t'postType',\r\n\t\t\t'wp_template_part',\r\n\t\t\ttemplatePartId,\r\n\t\t\t{\r\n\t\t\t\tblocks: pattern.blocks,\r\n\t\t\t\tcontent: serialize( pattern.blocks ),\r\n\t\t\t}\r\n\t\t);\r\n\t\tcreateSuccessNotice(\r\n\t\t\tsprintf(\r\n\t\t\t\t/* translators: %s: template part title. */\r\n\t\t\t\t__( 'Template Part \"%s\" updated.' ),\r\n\t\t\t\ttitle || slug\r\n\t\t\t),\r\n\t\t\t{\r\n\t\t\t\ttype: 'snackbar',\r\n\t\t\t}\r\n\t\t);\r\n\t};\r\n\r\n\t// We don't want to render a missing state if we have any inner blocks.\r\n\t// A new template part is automatically created if we have any inner blocks but no entity.\r\n\tif (\r\n\t\t! hasInnerBlocks &&\r\n\t\t( ( slug && ! theme ) || ( slug && isMissing ) )\r\n\t) {\r\n\t\treturn (\r\n\t\t\t<TagName { ...blockProps }>\r\n\t\t\t\t<Warning>\r\n\t\t\t\t\t{ sprintf(\r\n\t\t\t\t\t\t/* translators: %s: Template part slug */\r\n\t\t\t\t\t\t__(\r\n\t\t\t\t\t\t\t'Template part has been deleted or is unavailable: %s'\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\tslug\r\n\t\t\t\t\t) }\r\n\t\t\t\t</Warning>\r\n\t\t\t</TagName>\r\n\t\t);\r\n\t}\r\n\r\n\tif ( isEntityAvailable && hasAlreadyRendered ) {\r\n\t\treturn (\r\n\t\t\t<TagName { ...blockProps }>\r\n\t\t\t\t<Warning>\r\n\t\t\t\t\t{ __( 'Block cannot be rendered inside itself.' ) }\r\n\t\t\t\t</Warning>\r\n\t\t\t</TagName>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<RecursionProvider uniqueId={ templatePartId }>\r\n\t\t\t\t{ isEntityAvailable &&\r\n\t\t\t\t\tonNavigateToEntityRecord &&\r\n\t\t\t\t\tcanUserEdit && (\r\n\t\t\t\t\t\t<BlockControls group=\"other\">\r\n\t\t\t\t\t\t\t<ToolbarButton\r\n\t\t\t\t\t\t\t\tonClick={ () =>\r\n\t\t\t\t\t\t\t\t\tonNavigateToEntityRecord( {\r\n\t\t\t\t\t\t\t\t\t\tpostId: templatePartId,\r\n\t\t\t\t\t\t\t\t\t\tpostType: 'wp_template_part',\r\n\t\t\t\t\t\t\t\t\t} )\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{ __( 'Edit' ) }\r\n\t\t\t\t\t\t\t</ToolbarButton>\r\n\t\t\t\t\t\t</BlockControls>\r\n\t\t\t\t\t) }\r\n\t\t\t\t{ canUserEdit && (\r\n\t\t\t\t\t<InspectorControls group=\"advanced\">\r\n\t\t\t\t\t\t<TemplatePartAdvancedControls\r\n\t\t\t\t\t\t\ttagName={ tagName }\r\n\t\t\t\t\t\t\tsetAttributes={ setAttributes }\r\n\t\t\t\t\t\t\tisEntityAvailable={ isEntityAvailable }\r\n\t\t\t\t\t\t\ttemplatePartId={ templatePartId }\r\n\t\t\t\t\t\t\tdefaultWrapper={ areaObject.tagName }\r\n\t\t\t\t\t\t\thasInnerBlocks={ hasInnerBlocks }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</InspectorControls>\r\n\t\t\t\t) }\r\n\t\t\t\t{ isPlaceholder && (\r\n\t\t\t\t\t<TagName { ...blockProps }>\r\n\t\t\t\t\t\t<TemplatePartPlaceholder\r\n\t\t\t\t\t\t\tarea={ attributes.area }\r\n\t\t\t\t\t\t\ttemplatePartId={ templatePartId }\r\n\t\t\t\t\t\t\tclientId={ clientId }\r\n\t\t\t\t\t\t\tsetAttributes={ setAttributes }\r\n\t\t\t\t\t\t\tonOpenSelectionModal={ () =>\r\n\t\t\t\t\t\t\t\tsetIsTemplatePartSelectionOpen( true )\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</TagName>\r\n\t\t\t\t) }\r\n\t\t\t\t<BlockSettingsMenuControls>\r\n\t\t\t\t\t{ ( { selectedClientIds } ) => {\r\n\t\t\t\t\t\t// Only enable for single selection that matches the current block.\r\n\t\t\t\t\t\t// Ensures menu item doesn't render multiple times.\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t! (\r\n\t\t\t\t\t\t\t\tselectedClientIds.length === 1 &&\r\n\t\t\t\t\t\t\t\tclientId === selectedClientIds[ 0 ]\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<ReplaceButton\r\n\t\t\t\t\t\t\t\t{ ...{\r\n\t\t\t\t\t\t\t\t\tisEntityAvailable,\r\n\t\t\t\t\t\t\t\t\tarea,\r\n\t\t\t\t\t\t\t\t\tclientId,\r\n\t\t\t\t\t\t\t\t\ttemplatePartId,\r\n\t\t\t\t\t\t\t\t\tisTemplatePartSelectionOpen,\r\n\t\t\t\t\t\t\t\t\tsetIsTemplatePartSelectionOpen,\r\n\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} }\r\n\t\t\t\t</BlockSettingsMenuControls>\r\n\r\n\t\t\t\t<InspectorControls>\r\n\t\t\t\t\t<TemplatesList\r\n\t\t\t\t\t\tarea={ area }\r\n\t\t\t\t\t\tclientId={ clientId }\r\n\t\t\t\t\t\tisEntityAvailable={ isEntityAvailable }\r\n\t\t\t\t\t\tonSelect={ ( pattern ) => onPatternSelect( pattern ) }\r\n\t\t\t\t\t/>\r\n\t\t\t\t</InspectorControls>\r\n\r\n\t\t\t\t{ isEntityAvailable && (\r\n\t\t\t\t\t<TemplatePartInnerBlocks\r\n\t\t\t\t\t\ttagName={ TagName }\r\n\t\t\t\t\t\tblockProps={ blockProps }\r\n\t\t\t\t\t\tpostId={ templatePartId }\r\n\t\t\t\t\t\thasInnerBlocks={ hasInnerBlocks }\r\n\t\t\t\t\t\tlayout={ layout }\r\n\t\t\t\t\t/>\r\n\t\t\t\t) }\r\n\t\t\t\t{ ! isPlaceholder && ! isResolved && (\r\n\t\t\t\t\t<TagName { ...blockProps }>\r\n\t\t\t\t\t\t<Spinner />\r\n\t\t\t\t\t</TagName>\r\n\t\t\t\t) }\r\n\t\t\t</RecursionProvider>\r\n\t\t\t{ isTemplatePartSelectionOpen && (\r\n\t\t\t\t<Modal\r\n\t\t\t\t\toverlayClassName=\"block-editor-template-part__selection-modal\"\r\n\t\t\t\t\ttitle={ sprintf(\r\n\t\t\t\t\t\t// Translators: %s as template part area title (\"Header\", \"Footer\", etc.).\r\n\t\t\t\t\t\t__( 'Choose a %s' ),\r\n\t\t\t\t\t\tareaObject.label.toLowerCase()\r\n\t\t\t\t\t) }\r\n\t\t\t\t\tonRequestClose={ () =>\r\n\t\t\t\t\t\tsetIsTemplatePartSelectionOpen( false )\r\n\t\t\t\t\t}\r\n\t\t\t\t\tisFullScreen\r\n\t\t\t\t>\r\n\t\t\t\t\t<TemplatePartSelectionModal\r\n\t\t\t\t\t\ttemplatePartId={ templatePartId }\r\n\t\t\t\t\t\tclientId={ clientId }\r\n\t\t\t\t\t\tarea={ area }\r\n\t\t\t\t\t\tsetAttributes={ setAttributes }\r\n\t\t\t\t\t\tonClose={ () =>\r\n\t\t\t\t\t\t\tsetIsTemplatePartSelectionOpen( false )\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Modal>\r\n\t\t\t) }\r\n\t\t</>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}