{"version":3,"names":["useMemo","useState","__","sprintf","store","noticesStore","useDispatch","useAsyncList","__experimentalBlockPatternsList","BlockPatternsList","SearchControl","__experimentalHStack","HStack","useAlternativeBlockPatterns","useAlternativeTemplateParts","mapTemplatePartToBlockPattern","searchPatterns","jsx","_jsx","jsxs","_jsxs","TemplatePartSelectionModal","setAttributes","onClose","templatePartId","area","clientId","searchValue","setSearchValue","templateParts","filteredTemplateParts","partsAsPatterns","map","templatePart","shownTemplateParts","blockPatterns","filteredBlockPatterns","createSuccessNotice","onTemplatePartSelect","slug","theme","undefined","title","rendered","type","hasTemplateParts","length","hasBlockPatterns","className","children","__nextHasNoMarginBottom","onChange","value","label","placeholder","shownPatterns","onClickPattern","pattern","alignment"],"sources":["@wordpress/block-library/src/template-part/edit/selection-modal.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useMemo, useState } from '@wordpress/element';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { store as noticesStore } from '@wordpress/notices';\r\nimport { useDispatch } from '@wordpress/data';\r\nimport { useAsyncList } from '@wordpress/compose';\r\nimport { __experimentalBlockPatternsList as BlockPatternsList } from '@wordpress/block-editor';\r\nimport {\r\n\tSearchControl,\r\n\t__experimentalHStack as HStack,\r\n} from '@wordpress/components';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport {\r\n\tuseAlternativeBlockPatterns,\r\n\tuseAlternativeTemplateParts,\r\n} from './utils/hooks';\r\nimport { mapTemplatePartToBlockPattern } from './utils/map-template-part-to-block-pattern';\r\nimport { searchPatterns } from '../../utils/search-patterns';\r\n\r\nexport default function TemplatePartSelectionModal( {\r\n\tsetAttributes,\r\n\tonClose,\r\n\ttemplatePartId = null,\r\n\tarea,\r\n\tclientId,\r\n} ) {\r\n\tconst [ searchValue, setSearchValue ] = useState( '' );\r\n\tconst { templateParts } = useAlternativeTemplateParts(\r\n\t\tarea,\r\n\t\ttemplatePartId\r\n\t);\r\n\r\n\t// We can map template parts to block patters to reuse the BlockPatternsList UI\r\n\tconst filteredTemplateParts = useMemo( () => {\r\n\t\tconst partsAsPatterns = templateParts.map( ( templatePart ) =>\r\n\t\t\tmapTemplatePartToBlockPattern( templatePart )\r\n\t\t);\r\n\r\n\t\treturn searchPatterns( partsAsPatterns, searchValue );\r\n\t}, [ templateParts, searchValue ] );\r\n\tconst shownTemplateParts = useAsyncList( filteredTemplateParts );\r\n\tconst blockPatterns = useAlternativeBlockPatterns( area, clientId );\r\n\tconst filteredBlockPatterns = useMemo( () => {\r\n\t\treturn searchPatterns( blockPatterns, searchValue );\r\n\t}, [ blockPatterns, searchValue ] );\r\n\r\n\tconst { createSuccessNotice } = useDispatch( noticesStore );\r\n\r\n\tconst onTemplatePartSelect = ( templatePart ) => {\r\n\t\tsetAttributes( {\r\n\t\t\tslug: templatePart.slug,\r\n\t\t\ttheme: templatePart.theme,\r\n\t\t\tarea: undefined,\r\n\t\t} );\r\n\t\tcreateSuccessNotice(\r\n\t\t\tsprintf(\r\n\t\t\t\t/* translators: %s: template part title. */\r\n\t\t\t\t__( 'Template Part \"%s\" inserted.' ),\r\n\t\t\t\ttemplatePart.title?.rendered || templatePart.slug\r\n\t\t\t),\r\n\t\t\t{\r\n\t\t\t\ttype: 'snackbar',\r\n\t\t\t}\r\n\t\t);\r\n\t\tonClose();\r\n\t};\r\n\r\n\tconst hasTemplateParts = !! filteredTemplateParts.length;\r\n\tconst hasBlockPatterns = !! filteredBlockPatterns.length;\r\n\r\n\treturn (\r\n\t\t<div className=\"block-library-template-part__selection-content\">\r\n\t\t\t<div className=\"block-library-template-part__selection-search\">\r\n\t\t\t\t<SearchControl\r\n\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\tonChange={ setSearchValue }\r\n\t\t\t\t\tvalue={ searchValue }\r\n\t\t\t\t\tlabel={ __( 'Search for replacements' ) }\r\n\t\t\t\t\tplaceholder={ __( 'Search' ) }\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t{ hasTemplateParts && (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<h2>{ __( 'Existing template parts' ) }</h2>\r\n\t\t\t\t\t<BlockPatternsList\r\n\t\t\t\t\t\tblockPatterns={ filteredTemplateParts }\r\n\t\t\t\t\t\tshownPatterns={ shownTemplateParts }\r\n\t\t\t\t\t\tonClickPattern={ ( pattern ) => {\r\n\t\t\t\t\t\t\tonTemplatePartSelect( pattern.templatePart );\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t) }\r\n\r\n\t\t\t{ ! hasTemplateParts && ! hasBlockPatterns && (\r\n\t\t\t\t<HStack alignment=\"center\">\r\n\t\t\t\t\t<p>{ __( 'No results found.' ) }</p>\r\n\t\t\t\t</HStack>\r\n\t\t\t) }\r\n\t\t</div>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}