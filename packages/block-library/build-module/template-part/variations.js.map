{"version":3,"names":["store","coreDataStore","select","header","headerIcon","footer","footerIcon","sidebar","sidebarIcon","symbolFilled","symbolFilledIcon","getTemplatePartIcon","iconName","enhanceTemplatePartVariations","settings","name","variations","isActive","blockAttributes","variationAttributes","area","theme","slug","getCurrentTheme","getEntityRecord","entity","stylesheet","map","variation","icon"],"sources":["@wordpress/block-library/src/template-part/variations.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { store as coreDataStore } from '@wordpress/core-data';\r\nimport { select } from '@wordpress/data';\r\nimport {\r\n\theader as headerIcon,\r\n\tfooter as footerIcon,\r\n\tsidebar as sidebarIcon,\r\n\tsymbolFilled as symbolFilledIcon,\r\n} from '@wordpress/icons';\r\n\r\nfunction getTemplatePartIcon( iconName ) {\r\n\tif ( 'header' === iconName ) {\r\n\t\treturn headerIcon;\r\n\t} else if ( 'footer' === iconName ) {\r\n\t\treturn footerIcon;\r\n\t} else if ( 'sidebar' === iconName ) {\r\n\t\treturn sidebarIcon;\r\n\t}\r\n\treturn symbolFilledIcon;\r\n}\r\n\r\nexport function enhanceTemplatePartVariations( settings, name ) {\r\n\tif ( name !== 'core/template-part' ) {\r\n\t\treturn settings;\r\n\t}\r\n\r\n\tif ( settings.variations ) {\r\n\t\tconst isActive = ( blockAttributes, variationAttributes ) => {\r\n\t\t\tconst { area, theme, slug } = blockAttributes;\r\n\t\t\t// We first check the `area` block attribute which is set during insertion.\r\n\t\t\t// This property is removed on the creation of a template part.\r\n\t\t\tif ( area ) {\r\n\t\t\t\treturn area === variationAttributes.area;\r\n\t\t\t}\r\n\t\t\t// Find a matching variation from the created template part\r\n\t\t\t// by checking the entity's `area` property.\r\n\t\t\tif ( ! slug ) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tconst { getCurrentTheme, getEntityRecord } =\r\n\t\t\t\tselect( coreDataStore );\r\n\t\t\tconst entity = getEntityRecord(\r\n\t\t\t\t'postType',\r\n\t\t\t\t'wp_template_part',\r\n\t\t\t\t`${ theme || getCurrentTheme()?.stylesheet }//${ slug }`\r\n\t\t\t);\r\n\r\n\t\t\tif ( entity?.slug ) {\r\n\t\t\t\treturn entity.slug === variationAttributes.slug;\r\n\t\t\t}\r\n\t\t\treturn entity?.area === variationAttributes.area;\r\n\t\t};\r\n\r\n\t\tconst variations = settings.variations.map( ( variation ) => {\r\n\t\t\treturn {\r\n\t\t\t\t...variation,\r\n\t\t\t\t...( ! variation.isActive && { isActive } ),\r\n\t\t\t\t...( typeof variation.icon === 'string' && {\r\n\t\t\t\t\ticon: getTemplatePartIcon( variation.icon ),\r\n\t\t\t\t} ),\r\n\t\t\t};\r\n\t\t} );\r\n\r\n\t\treturn {\r\n\t\t\t...settings,\r\n\t\t\tvariations,\r\n\t\t};\r\n\t}\r\n\treturn settings;\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,KAAK,IAAIC,aAAa,QAAQ,sBAAsB;AAC7D,SAASC,MAAM,QAAQ,iBAAiB;AACxC,SACCC,MAAM,IAAIC,UAAU,EACpBC,MAAM,IAAIC,UAAU,EACpBC,OAAO,IAAIC,WAAW,EACtBC,YAAY,IAAIC,gBAAgB,QAC1B,kBAAkB;AAEzB,SAASC,mBAAmBA,CAAEC,QAAQ,EAAG;EACxC,IAAK,QAAQ,KAAKA,QAAQ,EAAG;IAC5B,OAAOR,UAAU;EAClB,CAAC,MAAM,IAAK,QAAQ,KAAKQ,QAAQ,EAAG;IACnC,OAAON,UAAU;EAClB,CAAC,MAAM,IAAK,SAAS,KAAKM,QAAQ,EAAG;IACpC,OAAOJ,WAAW;EACnB;EACA,OAAOE,gBAAgB;AACxB;AAEA,OAAO,SAASG,6BAA6BA,CAAEC,QAAQ,EAAEC,IAAI,EAAG;EAC/D,IAAKA,IAAI,KAAK,oBAAoB,EAAG;IACpC,OAAOD,QAAQ;EAChB;EAEA,IAAKA,QAAQ,CAACE,UAAU,EAAG;IAC1B,MAAMC,QAAQ,GAAGA,CAAEC,eAAe,EAAEC,mBAAmB,KAAM;MAC5D,MAAM;QAAEC,IAAI;QAAEC,KAAK;QAAEC;MAAK,CAAC,GAAGJ,eAAe;MAC7C;MACA;MACA,IAAKE,IAAI,EAAG;QACX,OAAOA,IAAI,KAAKD,mBAAmB,CAACC,IAAI;MACzC;MACA;MACA;MACA,IAAK,CAAEE,IAAI,EAAG;QACb,OAAO,KAAK;MACb;MACA,MAAM;QAAEC,eAAe;QAAEC;MAAgB,CAAC,GACzCtB,MAAM,CAAED,aAAc,CAAC;MACxB,MAAMwB,MAAM,GAAGD,eAAe,CAC7B,UAAU,EACV,kBAAkB,EACjB,GAAGH,KAAK,IAAIE,eAAe,CAAC,CAAC,EAAEG,UAAY,KAAKJ,IAAM,EACxD,CAAC;MAED,IAAKG,MAAM,EAAEH,IAAI,EAAG;QACnB,OAAOG,MAAM,CAACH,IAAI,KAAKH,mBAAmB,CAACG,IAAI;MAChD;MACA,OAAOG,MAAM,EAAEL,IAAI,KAAKD,mBAAmB,CAACC,IAAI;IACjD,CAAC;IAED,MAAMJ,UAAU,GAAGF,QAAQ,CAACE,UAAU,CAACW,GAAG,CAAIC,SAAS,IAAM;MAC5D,OAAO;QACN,GAAGA,SAAS;QACZ,IAAK,CAAEA,SAAS,CAACX,QAAQ,IAAI;UAAEA;QAAS,CAAC,CAAE;QAC3C,IAAK,OAAOW,SAAS,CAACC,IAAI,KAAK,QAAQ,IAAI;UAC1CA,IAAI,EAAElB,mBAAmB,CAAEiB,SAAS,CAACC,IAAK;QAC3C,CAAC;MACF,CAAC;IACF,CAAE,CAAC;IAEH,OAAO;MACN,GAAGf,QAAQ;MACXE;IACD,CAAC;EACF;EACA,OAAOF,QAAQ;AAChB","ignoreList":[]}