{"version":3,"names":["View","TouchableWithoutFeedback","Text","Component","mediaUploadSync","requestImageFailedRetryDialog","requestImageUploadCancelDialog","Icon","ToolbarButton","ToolbarGroup","PanelBody","withPreferredColorScheme","compose","BlockCaption","MediaPlaceholder","MediaUpload","MediaUploadProgress","MEDIA_TYPE_VIDEO","BlockControls","VIDEO_ASPECT_RATIO","VideoPlayer","InspectorControls","RichText","store","blockEditorStore","__","sprintf","isURL","getProtocol","doAction","hasAction","video","SvgIcon","replace","withDispatch","withSelect","noticesStore","createUpgradedEmbedBlock","style","SvgIconRetry","VideoCommonSettings","jsx","_jsx","jsxs","_jsxs","ICON_TYPE","PLACEHOLDER","RETRY","UPLOAD","VideoEdit","constructor","props","state","isCaptionSelected","videoContainerHeight","mediaUploadStateReset","bind","onSelectMediaUploadOption","onSelectURL","finishMediaUploadWithSuccess","finishMediaUploadWithFailure","updateMediaProgress","onVideoPressed","onVideoContanerLayout","onFocusCaption","componentDidMount","attributes","id","src","componentWillUnmount","isUploadInProgress","getDerivedStateFromProps","isSelected","setState","payload","setAttributes","mediaUrl","url","mediaServerId","mediaId","createErrorNotice","onReplace","test","embedBlock","undefined","poster","event","width","nativeEvent","layout","height","getIcon","iconType","iconStyle","icon","getStylesFromColorScheme","iconDark","iconUploading","iconUploadingDark","render","wasBlockJustInserted","toolbarEditButton","allowedTypes","isReplacingMedia","onSelect","open","getMediaOptions","children","label","onClick","flex","onFocus","autoOpenMediaUpload","accessible","onPress","disabled","title","onFinishMediaUploadWithSuccess","onFinishMediaUploadWithFailure","onUpdateMediaProgress","onMediaUploadStateReset","renderContent","isUploadFailed","retryMessage","showVideo","styleIconContainer","modalIconRetry","modalIcon","iconContainer","videoStyle","containerStyle","containerFocused","container","onLayout","videoContainer","source","uri","paused","placeholderContainer","placeholderContainerDark","uploadFailedText","accessibilityLabelCreator","caption","isEmpty","clientId","onBlur","insertBlocksAfter","select","dispatch"],"sources":["@wordpress/block-library/src/video/edit.native.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport { View, TouchableWithoutFeedback, Text } from 'react-native';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { Component } from '@wordpress/element';\r\nimport {\r\n\tmediaUploadSync,\r\n\trequestImageFailedRetryDialog,\r\n\trequestImageUploadCancelDialog,\r\n} from '@wordpress/react-native-bridge';\r\nimport {\r\n\tIcon,\r\n\tToolbarButton,\r\n\tToolbarGroup,\r\n\tPanelBody,\r\n} from '@wordpress/components';\r\nimport { withPreferredColorScheme, compose } from '@wordpress/compose';\r\nimport {\r\n\tBlockCaption,\r\n\tMediaPlaceholder,\r\n\tMediaUpload,\r\n\tMediaUploadProgress,\r\n\tMEDIA_TYPE_VIDEO,\r\n\tBlockControls,\r\n\tVIDEO_ASPECT_RATIO,\r\n\tVideoPlayer,\r\n\tInspectorControls,\r\n\tRichText,\r\n\tstore as blockEditorStore,\r\n} from '@wordpress/block-editor';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { isURL, getProtocol } from '@wordpress/url';\r\nimport { doAction, hasAction } from '@wordpress/hooks';\r\nimport { video as SvgIcon, replace } from '@wordpress/icons';\r\nimport { withDispatch, withSelect } from '@wordpress/data';\r\nimport { store as noticesStore } from '@wordpress/notices';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { createUpgradedEmbedBlock } from '../embed/util';\r\nimport style from './style.scss';\r\nimport SvgIconRetry from './icon-retry';\r\nimport VideoCommonSettings from './edit-common-settings';\r\n\r\nconst ICON_TYPE = {\r\n\tPLACEHOLDER: 'placeholder',\r\n\tRETRY: 'retry',\r\n\tUPLOAD: 'upload',\r\n};\r\n\r\nclass VideoEdit extends Component {\r\n\tconstructor( props ) {\r\n\t\tsuper( props );\r\n\r\n\t\tthis.state = {\r\n\t\t\tisCaptionSelected: false,\r\n\t\t\tvideoContainerHeight: 0,\r\n\t\t};\r\n\r\n\t\tthis.mediaUploadStateReset = this.mediaUploadStateReset.bind( this );\r\n\t\tthis.onSelectMediaUploadOption =\r\n\t\t\tthis.onSelectMediaUploadOption.bind( this );\r\n\t\tthis.onSelectURL = this.onSelectURL.bind( this );\r\n\t\tthis.finishMediaUploadWithSuccess =\r\n\t\t\tthis.finishMediaUploadWithSuccess.bind( this );\r\n\t\tthis.finishMediaUploadWithFailure =\r\n\t\t\tthis.finishMediaUploadWithFailure.bind( this );\r\n\t\tthis.updateMediaProgress = this.updateMediaProgress.bind( this );\r\n\t\tthis.onVideoPressed = this.onVideoPressed.bind( this );\r\n\t\tthis.onVideoContanerLayout = this.onVideoContanerLayout.bind( this );\r\n\t\tthis.onFocusCaption = this.onFocusCaption.bind( this );\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst { attributes } = this.props;\r\n\t\tif ( attributes.id && getProtocol( attributes.src ) === 'file:' ) {\r\n\t\t\tmediaUploadSync();\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\t// This action will only exist if the user pressed the trash button on the block holder.\r\n\t\tif (\r\n\t\t\thasAction( 'blocks.onRemoveBlockCheckUpload' ) &&\r\n\t\t\tthis.state.isUploadInProgress\r\n\t\t) {\r\n\t\t\tdoAction(\r\n\t\t\t\t'blocks.onRemoveBlockCheckUpload',\r\n\t\t\t\tthis.props.attributes.id\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps( props, state ) {\r\n\t\t// Avoid a UI flicker in the toolbar by insuring that isCaptionSelected\r\n\t\t// is updated immediately any time the isSelected prop becomes false.\r\n\t\treturn {\r\n\t\t\tisCaptionSelected: props.isSelected && state.isCaptionSelected,\r\n\t\t};\r\n\t}\r\n\r\n\tonVideoPressed() {\r\n\t\tconst { attributes } = this.props;\r\n\r\n\t\tif ( this.state.isUploadInProgress ) {\r\n\t\t\trequestImageUploadCancelDialog( attributes.id );\r\n\t\t} else if (\r\n\t\t\tattributes.id &&\r\n\t\t\tgetProtocol( attributes.src ) === 'file:'\r\n\t\t) {\r\n\t\t\trequestImageFailedRetryDialog( attributes.id );\r\n\t\t}\r\n\r\n\t\tthis.setState( {\r\n\t\t\tisCaptionSelected: false,\r\n\t\t} );\r\n\t}\r\n\r\n\tonFocusCaption() {\r\n\t\tif ( ! this.state.isCaptionSelected ) {\r\n\t\t\tthis.setState( { isCaptionSelected: true } );\r\n\t\t}\r\n\t}\r\n\r\n\tupdateMediaProgress( payload ) {\r\n\t\tconst { setAttributes } = this.props;\r\n\t\tif ( payload.mediaUrl ) {\r\n\t\t\tsetAttributes( { url: payload.mediaUrl } );\r\n\t\t}\r\n\t\tif ( ! this.state.isUploadInProgress ) {\r\n\t\t\tthis.setState( { isUploadInProgress: true } );\r\n\t\t}\r\n\t}\r\n\r\n\tfinishMediaUploadWithSuccess( payload ) {\r\n\t\tconst { setAttributes } = this.props;\r\n\t\tsetAttributes( { src: payload.mediaUrl, id: payload.mediaServerId } );\r\n\t\tthis.setState( { isUploadInProgress: false } );\r\n\t}\r\n\r\n\tfinishMediaUploadWithFailure( payload ) {\r\n\t\tconst { setAttributes } = this.props;\r\n\t\tsetAttributes( { id: payload.mediaId } );\r\n\t\tthis.setState( { isUploadInProgress: false } );\r\n\t}\r\n\r\n\tmediaUploadStateReset() {\r\n\t\tconst { setAttributes } = this.props;\r\n\t\tsetAttributes( { id: null, src: null } );\r\n\t\tthis.setState( { isUploadInProgress: false } );\r\n\t}\r\n\r\n\tonSelectMediaUploadOption( { id, url } ) {\r\n\t\tconst { setAttributes } = this.props;\r\n\t\tsetAttributes( { id, src: url } );\r\n\t}\r\n\r\n\tonSelectURL( url ) {\r\n\t\tconst { createErrorNotice, onReplace, setAttributes } = this.props;\r\n\r\n\t\tif ( isURL( url ) && /^https?:/.test( getProtocol( url ) ) ) {\r\n\t\t\t// Check if there's an embed block that handles this URL.\r\n\t\t\tconst embedBlock = createUpgradedEmbedBlock( {\r\n\t\t\t\tattributes: { url },\r\n\t\t\t} );\r\n\t\t\tif ( undefined !== embedBlock ) {\r\n\t\t\t\tonReplace( embedBlock );\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tsetAttributes( { src: url, id: undefined, poster: undefined } );\r\n\t\t} else {\r\n\t\t\tcreateErrorNotice( __( 'Invalid URL.' ) );\r\n\t\t}\r\n\t}\r\n\r\n\tonVideoContanerLayout( event ) {\r\n\t\tconst { width } = event.nativeEvent.layout;\r\n\t\tconst height = width / VIDEO_ASPECT_RATIO;\r\n\t\tif ( height !== this.state.videoContainerHeight ) {\r\n\t\t\tthis.setState( { videoContainerHeight: height } );\r\n\t\t}\r\n\t}\r\n\r\n\tgetIcon( iconType ) {\r\n\t\tlet iconStyle;\r\n\t\tswitch ( iconType ) {\r\n\t\t\tcase ICON_TYPE.RETRY:\r\n\t\t\t\treturn <Icon icon={ SvgIconRetry } { ...style.icon } />;\r\n\t\t\tcase ICON_TYPE.PLACEHOLDER:\r\n\t\t\t\ticonStyle = this.props.getStylesFromColorScheme(\r\n\t\t\t\t\tstyle.icon,\r\n\t\t\t\t\tstyle.iconDark\r\n\t\t\t\t);\r\n\t\t\t\tbreak;\r\n\t\t\tcase ICON_TYPE.UPLOAD:\r\n\t\t\t\ticonStyle = this.props.getStylesFromColorScheme(\r\n\t\t\t\t\tstyle.iconUploading,\r\n\t\t\t\t\tstyle.iconUploadingDark\r\n\t\t\t\t);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn <Icon icon={ SvgIcon } { ...iconStyle } />;\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { setAttributes, attributes, isSelected, wasBlockJustInserted } =\r\n\t\t\tthis.props;\r\n\t\tconst { id, src } = attributes;\r\n\t\tconst { videoContainerHeight } = this.state;\r\n\r\n\t\tconst toolbarEditButton = (\r\n\t\t\t<MediaUpload\r\n\t\t\t\tallowedTypes={ [ MEDIA_TYPE_VIDEO ] }\r\n\t\t\t\tisReplacingMedia\r\n\t\t\t\tonSelect={ this.onSelectMediaUploadOption }\r\n\t\t\t\tonSelectURL={ this.onSelectURL }\r\n\t\t\t\trender={ ( { open, getMediaOptions } ) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<ToolbarGroup>\r\n\t\t\t\t\t\t\t{ getMediaOptions() }\r\n\t\t\t\t\t\t\t<ToolbarButton\r\n\t\t\t\t\t\t\t\tlabel={ __( 'Edit video' ) }\r\n\t\t\t\t\t\t\t\ticon={ replace }\r\n\t\t\t\t\t\t\t\tonClick={ open }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</ToolbarGroup>\r\n\t\t\t\t\t);\r\n\t\t\t\t} }\r\n\t\t\t></MediaUpload>\r\n\t\t);\r\n\r\n\t\tif ( ! src ) {\r\n\t\t\treturn (\r\n\t\t\t\t<View style={ { flex: 1 } }>\r\n\t\t\t\t\t<MediaPlaceholder\r\n\t\t\t\t\t\tallowedTypes={ [ MEDIA_TYPE_VIDEO ] }\r\n\t\t\t\t\t\tonSelect={ this.onSelectMediaUploadOption }\r\n\t\t\t\t\t\tonSelectURL={ this.onSelectURL }\r\n\t\t\t\t\t\ticon={ this.getIcon( ICON_TYPE.PLACEHOLDER ) }\r\n\t\t\t\t\t\tonFocus={ this.props.onFocus }\r\n\t\t\t\t\t\tautoOpenMediaUpload={\r\n\t\t\t\t\t\t\tisSelected && wasBlockJustInserted\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</View>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<TouchableWithoutFeedback\r\n\t\t\t\taccessible={ ! isSelected }\r\n\t\t\t\tonPress={ this.onVideoPressed }\r\n\t\t\t\tdisabled={ ! isSelected }\r\n\t\t\t>\r\n\t\t\t\t<View style={ { flex: 1 } }>\r\n\t\t\t\t\t{ ! this.state.isCaptionSelected && (\r\n\t\t\t\t\t\t<BlockControls>{ toolbarEditButton }</BlockControls>\r\n\t\t\t\t\t) }\r\n\t\t\t\t\t{ isSelected && (\r\n\t\t\t\t\t\t<InspectorControls>\r\n\t\t\t\t\t\t\t<PanelBody title={ __( 'Settings' ) }>\r\n\t\t\t\t\t\t\t\t<VideoCommonSettings\r\n\t\t\t\t\t\t\t\t\tsetAttributes={ setAttributes }\r\n\t\t\t\t\t\t\t\t\tattributes={ attributes }\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</PanelBody>\r\n\t\t\t\t\t\t</InspectorControls>\r\n\t\t\t\t\t) }\r\n\t\t\t\t\t<MediaUploadProgress\r\n\t\t\t\t\t\tmediaId={ id }\r\n\t\t\t\t\t\tonFinishMediaUploadWithSuccess={\r\n\t\t\t\t\t\t\tthis.finishMediaUploadWithSuccess\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonFinishMediaUploadWithFailure={\r\n\t\t\t\t\t\t\tthis.finishMediaUploadWithFailure\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonUpdateMediaProgress={ this.updateMediaProgress }\r\n\t\t\t\t\t\tonMediaUploadStateReset={ this.mediaUploadStateReset }\r\n\t\t\t\t\t\trenderContent={ ( {\r\n\t\t\t\t\t\t\tisUploadInProgress,\r\n\t\t\t\t\t\t\tisUploadFailed,\r\n\t\t\t\t\t\t\tretryMessage,\r\n\t\t\t\t\t\t} ) => {\r\n\t\t\t\t\t\t\tconst showVideo =\r\n\t\t\t\t\t\t\t\tisURL( src ) &&\r\n\t\t\t\t\t\t\t\tgetProtocol( attributes.src ) !== 'file:' &&\r\n\t\t\t\t\t\t\t\t! isUploadInProgress &&\r\n\t\t\t\t\t\t\t\t! isUploadFailed;\r\n\r\n\t\t\t\t\t\t\tconst icon = this.getIcon(\r\n\t\t\t\t\t\t\t\tisUploadFailed\r\n\t\t\t\t\t\t\t\t\t? ICON_TYPE.RETRY\r\n\t\t\t\t\t\t\t\t\t: ICON_TYPE.UPLOAD\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tconst styleIconContainer = isUploadFailed\r\n\t\t\t\t\t\t\t\t? style.modalIconRetry\r\n\t\t\t\t\t\t\t\t: style.modalIcon;\r\n\r\n\t\t\t\t\t\t\tconst iconContainer = (\r\n\t\t\t\t\t\t\t\t<View style={ styleIconContainer }>\r\n\t\t\t\t\t\t\t\t\t{ icon }\r\n\t\t\t\t\t\t\t\t</View>\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\tconst videoStyle = {\r\n\t\t\t\t\t\t\t\theight: videoContainerHeight,\r\n\t\t\t\t\t\t\t\t...style.video,\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\tconst containerStyle =\r\n\t\t\t\t\t\t\t\tshowVideo && isSelected\r\n\t\t\t\t\t\t\t\t\t? style.containerFocused\r\n\t\t\t\t\t\t\t\t\t: style.container;\r\n\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<View\r\n\t\t\t\t\t\t\t\t\tonLayout={ this.onVideoContanerLayout }\r\n\t\t\t\t\t\t\t\t\tstyle={ containerStyle }\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{ showVideo && (\r\n\t\t\t\t\t\t\t\t\t\t<View style={ style.videoContainer }>\r\n\t\t\t\t\t\t\t\t\t\t\t<VideoPlayer\r\n\t\t\t\t\t\t\t\t\t\t\t\tisSelected={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tisSelected &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t! this.state\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.isCaptionSelected\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={ videoStyle }\r\n\t\t\t\t\t\t\t\t\t\t\t\tsource={ { uri: src } }\r\n\t\t\t\t\t\t\t\t\t\t\t\tpaused\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</View>\r\n\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t\t{ ! showVideo && (\r\n\t\t\t\t\t\t\t\t\t\t<View\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={ {\r\n\t\t\t\t\t\t\t\t\t\t\t\theight: videoContainerHeight,\r\n\t\t\t\t\t\t\t\t\t\t\t\twidth: '100%',\r\n\t\t\t\t\t\t\t\t\t\t\t\t...this.props.getStylesFromColorScheme(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle.placeholderContainer,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle.placeholderContainerDark\r\n\t\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{ videoContainerHeight > 0 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\ticonContainer }\r\n\t\t\t\t\t\t\t\t\t\t\t{ isUploadFailed && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Text\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle.uploadFailedText\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ retryMessage }\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Text>\r\n\t\t\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t\t\t</View>\r\n\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t</View>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<BlockCaption\r\n\t\t\t\t\t\taccessible\r\n\t\t\t\t\t\taccessibilityLabelCreator={ ( caption ) =>\r\n\t\t\t\t\t\t\tRichText.isEmpty( caption )\r\n\t\t\t\t\t\t\t\t? /* translators: accessibility text. Empty video caption. */\r\n\t\t\t\t\t\t\t\t  __( 'Video caption. Empty' )\r\n\t\t\t\t\t\t\t\t: sprintf(\r\n\t\t\t\t\t\t\t\t\t\t/* translators: accessibility text. %s: video caption. */\r\n\t\t\t\t\t\t\t\t\t\t__( 'Video caption. %s' ),\r\n\t\t\t\t\t\t\t\t\t\tcaption\r\n\t\t\t\t\t\t\t\t  )\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tclientId={ this.props.clientId }\r\n\t\t\t\t\t\tisSelected={ this.state.isCaptionSelected }\r\n\t\t\t\t\t\tonFocus={ this.onFocusCaption }\r\n\t\t\t\t\t\tonBlur={ this.props.onBlur } // Always assign onBlur as props.\r\n\t\t\t\t\t\tinsertBlocksAfter={ this.props.insertBlocksAfter }\r\n\t\t\t\t\t/>\r\n\t\t\t\t</View>\r\n\t\t\t</TouchableWithoutFeedback>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default compose( [\r\n\twithSelect( ( select, { clientId } ) => ( {\r\n\t\twasBlockJustInserted: select( blockEditorStore ).wasBlockJustInserted(\r\n\t\t\tclientId,\r\n\t\t\t'inserter_menu'\r\n\t\t),\r\n\t} ) ),\r\n\twithDispatch( ( dispatch ) => {\r\n\t\tconst { createErrorNotice } = dispatch( noticesStore );\r\n\r\n\t\treturn { createErrorNotice };\r\n\t} ),\r\n\twithPreferredColorScheme,\r\n] )( VideoEdit );\r\n"],"mappings":"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","ignoreList":[]}