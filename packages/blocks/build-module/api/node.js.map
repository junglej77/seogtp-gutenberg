{"version":3,"names":["deprecated","children","isNodeOfType","node","type","since","version","link","getNamedNodeMapAsObject","nodeMap","result","i","length","name","value","fromDOM","domNode","alternative","nodeType","TEXT_NODE","nodeValue","ELEMENT_NODE","TypeError","nodeName","toLowerCase","props","attributes","childNodes","toHTML","matcher","selector","match","querySelector","error"],"sources":["@wordpress/blocks/src/api/node.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport deprecated from '@wordpress/deprecated';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport * as children from './children';\r\n\r\n/**\r\n * A representation of a single node within a block's rich text value. If\r\n * representing a text node, the value is simply a string of the node value.\r\n * As representing an element node, it is an object of:\r\n *\r\n * 1. `type` (string): Tag name.\r\n * 2. `props` (object): Attributes and children array of WPBlockNode.\r\n *\r\n * @typedef {string|Object} WPBlockNode\r\n */\r\n\r\n/**\r\n * Given a single node and a node type (e.g. `'br'`), returns true if the node\r\n * corresponds to that type, false otherwise.\r\n *\r\n * @param {WPBlockNode} node Block node to test\r\n * @param {string}      type Node to type to test against.\r\n *\r\n * @return {boolean} Whether node is of intended type.\r\n */\r\nfunction isNodeOfType( node, type ) {\r\n\tdeprecated( 'wp.blocks.node.isNodeOfType', {\r\n\t\tsince: '6.1',\r\n\t\tversion: '6.3',\r\n\t\tlink: 'https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/',\r\n\t} );\r\n\r\n\treturn node && node.type === type;\r\n}\r\n\r\n/**\r\n * Given an object implementing the NamedNodeMap interface, returns a plain\r\n * object equivalent value of name, value key-value pairs.\r\n *\r\n * @see https://dom.spec.whatwg.org/#interface-namednodemap\r\n *\r\n * @param {NamedNodeMap} nodeMap NamedNodeMap to convert to object.\r\n *\r\n * @return {Object} Object equivalent value of NamedNodeMap.\r\n */\r\nexport function getNamedNodeMapAsObject( nodeMap ) {\r\n\tconst result = {};\r\n\tfor ( let i = 0; i < nodeMap.length; i++ ) {\r\n\t\tconst { name, value } = nodeMap[ i ];\r\n\t\tresult[ name ] = value;\r\n\t}\r\n\r\n\treturn result;\r\n}\r\n\r\n/**\r\n * Given a DOM Element or Text node, returns an equivalent block node. Throws\r\n * if passed any node type other than element or text.\r\n *\r\n * @throws {TypeError} If non-element/text node is passed.\r\n *\r\n * @param {Node} domNode DOM node to convert.\r\n *\r\n * @return {WPBlockNode} Block node equivalent to DOM node.\r\n */\r\nexport function fromDOM( domNode ) {\r\n\tdeprecated( 'wp.blocks.node.fromDOM', {\r\n\t\tsince: '6.1',\r\n\t\tversion: '6.3',\r\n\t\talternative: 'wp.richText.create',\r\n\t\tlink: 'https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/',\r\n\t} );\r\n\r\n\tif ( domNode.nodeType === domNode.TEXT_NODE ) {\r\n\t\treturn domNode.nodeValue;\r\n\t}\r\n\r\n\tif ( domNode.nodeType !== domNode.ELEMENT_NODE ) {\r\n\t\tthrow new TypeError(\r\n\t\t\t'A block node can only be created from a node of type text or ' +\r\n\t\t\t\t'element.'\r\n\t\t);\r\n\t}\r\n\r\n\treturn {\r\n\t\ttype: domNode.nodeName.toLowerCase(),\r\n\t\tprops: {\r\n\t\t\t...getNamedNodeMapAsObject( domNode.attributes ),\r\n\t\t\tchildren: children.fromDOM( domNode.childNodes ),\r\n\t\t},\r\n\t};\r\n}\r\n\r\n/**\r\n * Given a block node, returns its HTML string representation.\r\n *\r\n * @param {WPBlockNode} node Block node to convert to string.\r\n *\r\n * @return {string} String HTML representation of block node.\r\n */\r\nexport function toHTML( node ) {\r\n\tdeprecated( 'wp.blocks.node.toHTML', {\r\n\t\tsince: '6.1',\r\n\t\tversion: '6.3',\r\n\t\talternative: 'wp.richText.toHTMLString',\r\n\t\tlink: 'https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/',\r\n\t} );\r\n\r\n\treturn children.toHTML( [ node ] );\r\n}\r\n\r\n/**\r\n * Given a selector, returns an hpq matcher generating a WPBlockNode value\r\n * matching the selector result.\r\n *\r\n * @param {string} selector DOM selector.\r\n *\r\n * @return {Function} hpq matcher.\r\n */\r\nexport function matcher( selector ) {\r\n\tdeprecated( 'wp.blocks.node.matcher', {\r\n\t\tsince: '6.1',\r\n\t\tversion: '6.3',\r\n\t\talternative: 'html source',\r\n\t\tlink: 'https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/',\r\n\t} );\r\n\r\n\treturn ( domNode ) => {\r\n\t\tlet match = domNode;\r\n\r\n\t\tif ( selector ) {\r\n\t\t\tmatch = domNode.querySelector( selector );\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\treturn fromDOM( match );\r\n\t\t} catch ( error ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n}\r\n\r\n/**\r\n * Object of utility functions used in managing block attribute values of\r\n * source `node`.\r\n *\r\n * @see https://github.com/WordPress/gutenberg/pull/10439\r\n *\r\n * @deprecated since 4.0. The `node` source should not be used, and can be\r\n *             replaced by the `html` source.\r\n *\r\n * @private\r\n */\r\nexport default {\r\n\tisNodeOfType,\r\n\tfromDOM,\r\n\ttoHTML,\r\n\tmatcher,\r\n};\r\n"],"mappings":"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","ignoreList":[]}