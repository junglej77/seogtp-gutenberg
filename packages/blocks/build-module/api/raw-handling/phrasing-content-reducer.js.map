{"version":3,"names":["wrap","replaceTag","phrasingContentReducer","node","doc","nodeName","style","fontWeight","fontStyle","textDecorationLine","textDecoration","verticalAlign","createElement","includes","target","toLowerCase","rel","removeAttribute","name","id","ownerDocument","querySelector"],"sources":["@wordpress/blocks/src/api/raw-handling/phrasing-content-reducer.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { wrap, replaceTag } from '@wordpress/dom';\r\n\r\nexport default function phrasingContentReducer( node, doc ) {\r\n\t// In jsdom-jscore, 'node.style' can be null.\r\n\t// TODO: Explore fixing this by patching jsdom-jscore.\r\n\tif ( node.nodeName === 'SPAN' && node.style ) {\r\n\t\tconst {\r\n\t\t\tfontWeight,\r\n\t\t\tfontStyle,\r\n\t\t\ttextDecorationLine,\r\n\t\t\ttextDecoration,\r\n\t\t\tverticalAlign,\r\n\t\t} = node.style;\r\n\r\n\t\tif ( fontWeight === 'bold' || fontWeight === '700' ) {\r\n\t\t\twrap( doc.createElement( 'strong' ), node );\r\n\t\t}\r\n\r\n\t\tif ( fontStyle === 'italic' ) {\r\n\t\t\twrap( doc.createElement( 'em' ), node );\r\n\t\t}\r\n\r\n\t\t// Some DOM implementations (Safari, JSDom) don't support\r\n\t\t// style.textDecorationLine, so we check style.textDecoration as a\r\n\t\t// fallback.\r\n\t\tif (\r\n\t\t\ttextDecorationLine === 'line-through' ||\r\n\t\t\ttextDecoration.includes( 'line-through' )\r\n\t\t) {\r\n\t\t\twrap( doc.createElement( 's' ), node );\r\n\t\t}\r\n\r\n\t\tif ( verticalAlign === 'super' ) {\r\n\t\t\twrap( doc.createElement( 'sup' ), node );\r\n\t\t} else if ( verticalAlign === 'sub' ) {\r\n\t\t\twrap( doc.createElement( 'sub' ), node );\r\n\t\t}\r\n\t} else if ( node.nodeName === 'B' ) {\r\n\t\tnode = replaceTag( node, 'strong' );\r\n\t} else if ( node.nodeName === 'I' ) {\r\n\t\tnode = replaceTag( node, 'em' );\r\n\t} else if ( node.nodeName === 'A' ) {\r\n\t\t// In jsdom-jscore, 'node.target' can be null.\r\n\t\t// TODO: Explore fixing this by patching jsdom-jscore.\r\n\t\tif ( node.target && node.target.toLowerCase() === '_blank' ) {\r\n\t\t\tnode.rel = 'noreferrer noopener';\r\n\t\t} else {\r\n\t\t\tnode.removeAttribute( 'target' );\r\n\t\t\tnode.removeAttribute( 'rel' );\r\n\t\t}\r\n\r\n\t\t// Saves anchor elements name attribute as id\r\n\t\tif ( node.name && ! node.id ) {\r\n\t\t\tnode.id = node.name;\r\n\t\t}\r\n\r\n\t\t// Keeps id only if there is an internal link pointing to it\r\n\t\tif (\r\n\t\t\tnode.id &&\r\n\t\t\t! node.ownerDocument.querySelector( `[href=\"#${ node.id }\"]` )\r\n\t\t) {\r\n\t\t\tnode.removeAttribute( 'id' );\r\n\t\t}\r\n\t}\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,IAAI,EAAEC,UAAU,QAAQ,gBAAgB;AAEjD,eAAe,SAASC,sBAAsBA,CAAEC,IAAI,EAAEC,GAAG,EAAG;EAC3D;EACA;EACA,IAAKD,IAAI,CAACE,QAAQ,KAAK,MAAM,IAAIF,IAAI,CAACG,KAAK,EAAG;IAC7C,MAAM;MACLC,UAAU;MACVC,SAAS;MACTC,kBAAkB;MAClBC,cAAc;MACdC;IACD,CAAC,GAAGR,IAAI,CAACG,KAAK;IAEd,IAAKC,UAAU,KAAK,MAAM,IAAIA,UAAU,KAAK,KAAK,EAAG;MACpDP,IAAI,CAAEI,GAAG,CAACQ,aAAa,CAAE,QAAS,CAAC,EAAET,IAAK,CAAC;IAC5C;IAEA,IAAKK,SAAS,KAAK,QAAQ,EAAG;MAC7BR,IAAI,CAAEI,GAAG,CAACQ,aAAa,CAAE,IAAK,CAAC,EAAET,IAAK,CAAC;IACxC;;IAEA;IACA;IACA;IACA,IACCM,kBAAkB,KAAK,cAAc,IACrCC,cAAc,CAACG,QAAQ,CAAE,cAAe,CAAC,EACxC;MACDb,IAAI,CAAEI,GAAG,CAACQ,aAAa,CAAE,GAAI,CAAC,EAAET,IAAK,CAAC;IACvC;IAEA,IAAKQ,aAAa,KAAK,OAAO,EAAG;MAChCX,IAAI,CAAEI,GAAG,CAACQ,aAAa,CAAE,KAAM,CAAC,EAAET,IAAK,CAAC;IACzC,CAAC,MAAM,IAAKQ,aAAa,KAAK,KAAK,EAAG;MACrCX,IAAI,CAAEI,GAAG,CAACQ,aAAa,CAAE,KAAM,CAAC,EAAET,IAAK,CAAC;IACzC;EACD,CAAC,MAAM,IAAKA,IAAI,CAACE,QAAQ,KAAK,GAAG,EAAG;IACnCF,IAAI,GAAGF,UAAU,CAAEE,IAAI,EAAE,QAAS,CAAC;EACpC,CAAC,MAAM,IAAKA,IAAI,CAACE,QAAQ,KAAK,GAAG,EAAG;IACnCF,IAAI,GAAGF,UAAU,CAAEE,IAAI,EAAE,IAAK,CAAC;EAChC,CAAC,MAAM,IAAKA,IAAI,CAACE,QAAQ,KAAK,GAAG,EAAG;IACnC;IACA;IACA,IAAKF,IAAI,CAACW,MAAM,IAAIX,IAAI,CAACW,MAAM,CAACC,WAAW,CAAC,CAAC,KAAK,QAAQ,EAAG;MAC5DZ,IAAI,CAACa,GAAG,GAAG,qBAAqB;IACjC,CAAC,MAAM;MACNb,IAAI,CAACc,eAAe,CAAE,QAAS,CAAC;MAChCd,IAAI,CAACc,eAAe,CAAE,KAAM,CAAC;IAC9B;;IAEA;IACA,IAAKd,IAAI,CAACe,IAAI,IAAI,CAAEf,IAAI,CAACgB,EAAE,EAAG;MAC7BhB,IAAI,CAACgB,EAAE,GAAGhB,IAAI,CAACe,IAAI;IACpB;;IAEA;IACA,IACCf,IAAI,CAACgB,EAAE,IACP,CAAEhB,IAAI,CAACiB,aAAa,CAACC,aAAa,CAAG,WAAWlB,IAAI,CAACgB,EAAI,IAAI,CAAC,EAC7D;MACDhB,IAAI,CAACc,eAAe,CAAE,IAAK,CAAC;IAC7B;EACD;AACD","ignoreList":[]}