{"version":3,"names":["colord","extend","namesPlugin","a11yPlugin","Component","isValidElement","__","sprintf","__unstableStripHTML","stripHTML","RichTextData","BLOCK_ICON_DEFAULT","getBlockType","getDefaultBlockName","ICON_COLORS","isUnmodifiedBlock","block","_getBlockType$attribu","Object","entries","name","attributes","every","key","definition","value","hasOwnProperty","default","type","length","undefined","isUnmodifiedDefaultBlock","isValidIcon","icon","normalizeIconObject","src","colordBgColor","background","getColorContrast","iconColor","contrast","maxContrast","Math","max","map","foreground","find","shadowColor","alpha","toRgbString","normalizeBlockType","blockTypeOrName","getBlockLabel","blockType","context","__experimentalLabel","getLabel","title","label","toPlainText","getAccessibleBlockLabel","position","direction","hasPosition","hasLabel","getDefault","attributeSchema","__experimentalSanitizeBlockAttributes","Error","reduce","accumulator","schema","fromHTMLString","toHTMLString","_default","indexOf","source","Array","isArray","__experimentalGetBlockAttributesNamesByRole","role","attributesNames","keys","filter","attributeName","__experimentalRole","omit","object","fromEntries","includes"],"sources":["@wordpress/blocks/src/api/utils.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport { colord, extend } from 'colord';\r\nimport namesPlugin from 'colord/plugins/names';\r\nimport a11yPlugin from 'colord/plugins/a11y';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { Component, isValidElement } from '@wordpress/element';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { __unstableStripHTML as stripHTML } from '@wordpress/dom';\r\nimport { RichTextData } from '@wordpress/rich-text';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { BLOCK_ICON_DEFAULT } from './constants';\r\nimport { getBlockType, getDefaultBlockName } from './registration';\r\n\r\nextend( [ namesPlugin, a11yPlugin ] );\r\n\r\n/**\r\n * Array of icon colors containing a color to be used if the icon color\r\n * was not explicitly set but the icon background color was.\r\n *\r\n * @type {Object}\r\n */\r\nconst ICON_COLORS = [ '#191e23', '#f8f9f9' ];\r\n\r\n/**\r\n * Determines whether the block's attributes are equal to the default attributes\r\n * which means the block is unmodified.\r\n *\r\n * @param {WPBlock} block Block Object\r\n *\r\n * @return {boolean} Whether the block is an unmodified block.\r\n */\r\nexport function isUnmodifiedBlock( block ) {\r\n\treturn Object.entries( getBlockType( block.name )?.attributes ?? {} ).every(\r\n\t\t( [ key, definition ] ) => {\r\n\t\t\tconst value = block.attributes[ key ];\r\n\r\n\t\t\t// Every attribute that has a default must match the default.\r\n\t\t\tif ( definition.hasOwnProperty( 'default' ) ) {\r\n\t\t\t\treturn value === definition.default;\r\n\t\t\t}\r\n\r\n\t\t\t// The rich text type is a bit different from the rest because it\r\n\t\t\t// has an implicit default value of an empty RichTextData instance,\r\n\t\t\t// so check the length of the value.\r\n\t\t\tif ( definition.type === 'rich-text' ) {\r\n\t\t\t\treturn ! value?.length;\r\n\t\t\t}\r\n\r\n\t\t\t// Every attribute that doesn't have a default should be undefined.\r\n\t\t\treturn value === undefined;\r\n\t\t}\r\n\t);\r\n}\r\n\r\n/**\r\n * Determines whether the block is a default block and its attributes are equal\r\n * to the default attributes which means the block is unmodified.\r\n *\r\n * @param {WPBlock} block Block Object\r\n *\r\n * @return {boolean} Whether the block is an unmodified default block.\r\n */\r\nexport function isUnmodifiedDefaultBlock( block ) {\r\n\treturn block.name === getDefaultBlockName() && isUnmodifiedBlock( block );\r\n}\r\n\r\n/**\r\n * Function that checks if the parameter is a valid icon.\r\n *\r\n * @param {*} icon Parameter to be checked.\r\n *\r\n * @return {boolean} True if the parameter is a valid icon and false otherwise.\r\n */\r\n\r\nexport function isValidIcon( icon ) {\r\n\treturn (\r\n\t\t!! icon &&\r\n\t\t( typeof icon === 'string' ||\r\n\t\t\tisValidElement( icon ) ||\r\n\t\t\ttypeof icon === 'function' ||\r\n\t\t\ticon instanceof Component )\r\n\t);\r\n}\r\n\r\n/**\r\n * Function that receives an icon as set by the blocks during the registration\r\n * and returns a new icon object that is normalized so we can rely on just on possible icon structure\r\n * in the codebase.\r\n *\r\n * @param {WPBlockTypeIconRender} icon Render behavior of a block type icon;\r\n *                                     one of a Dashicon slug, an element, or a\r\n *                                     component.\r\n *\r\n * @return {WPBlockTypeIconDescriptor} Object describing the icon.\r\n */\r\nexport function normalizeIconObject( icon ) {\r\n\ticon = icon || BLOCK_ICON_DEFAULT;\r\n\tif ( isValidIcon( icon ) ) {\r\n\t\treturn { src: icon };\r\n\t}\r\n\r\n\tif ( 'background' in icon ) {\r\n\t\tconst colordBgColor = colord( icon.background );\r\n\t\tconst getColorContrast = ( iconColor ) =>\r\n\t\t\tcolordBgColor.contrast( iconColor );\r\n\t\tconst maxContrast = Math.max( ...ICON_COLORS.map( getColorContrast ) );\r\n\r\n\t\treturn {\r\n\t\t\t...icon,\r\n\t\t\tforeground: icon.foreground\r\n\t\t\t\t? icon.foreground\r\n\t\t\t\t: ICON_COLORS.find(\r\n\t\t\t\t\t\t( iconColor ) =>\r\n\t\t\t\t\t\t\tgetColorContrast( iconColor ) === maxContrast\r\n\t\t\t\t  ),\r\n\t\t\tshadowColor: colordBgColor.alpha( 0.3 ).toRgbString(),\r\n\t\t};\r\n\t}\r\n\r\n\treturn icon;\r\n}\r\n\r\n/**\r\n * Normalizes block type passed as param. When string is passed then\r\n * it converts it to the matching block type object.\r\n * It passes the original object otherwise.\r\n *\r\n * @param {string|Object} blockTypeOrName Block type or name.\r\n *\r\n * @return {?Object} Block type.\r\n */\r\nexport function normalizeBlockType( blockTypeOrName ) {\r\n\tif ( typeof blockTypeOrName === 'string' ) {\r\n\t\treturn getBlockType( blockTypeOrName );\r\n\t}\r\n\r\n\treturn blockTypeOrName;\r\n}\r\n\r\n/**\r\n * Get the label for the block, usually this is either the block title,\r\n * or the value of the block's `label` function when that's specified.\r\n *\r\n * @param {Object} blockType  The block type.\r\n * @param {Object} attributes The values of the block's attributes.\r\n * @param {Object} context    The intended use for the label.\r\n *\r\n * @return {string} The block label.\r\n */\r\nexport function getBlockLabel( blockType, attributes, context = 'visual' ) {\r\n\tconst { __experimentalLabel: getLabel, title } = blockType;\r\n\r\n\tconst label = getLabel && getLabel( attributes, { context } );\r\n\r\n\tif ( ! label ) {\r\n\t\treturn title;\r\n\t}\r\n\r\n\tif ( label.toPlainText ) {\r\n\t\treturn label.toPlainText();\r\n\t}\r\n\r\n\t// Strip any HTML (i.e. RichText formatting) before returning.\r\n\treturn stripHTML( label );\r\n}\r\n\r\n/**\r\n * Get a label for the block for use by screenreaders, this is more descriptive\r\n * than the visual label and includes the block title and the value of the\r\n * `getLabel` function if it's specified.\r\n *\r\n * @param {?Object} blockType              The block type.\r\n * @param {Object}  attributes             The values of the block's attributes.\r\n * @param {?number} position               The position of the block in the block list.\r\n * @param {string}  [direction='vertical'] The direction of the block layout.\r\n *\r\n * @return {string} The block label.\r\n */\r\nexport function getAccessibleBlockLabel(\r\n\tblockType,\r\n\tattributes,\r\n\tposition,\r\n\tdirection = 'vertical'\r\n) {\r\n\t// `title` is already localized, `label` is a user-supplied value.\r\n\tconst title = blockType?.title;\r\n\tconst label = blockType\r\n\t\t? getBlockLabel( blockType, attributes, 'accessibility' )\r\n\t\t: '';\r\n\tconst hasPosition = position !== undefined;\r\n\r\n\t// getBlockLabel returns the block title as a fallback when there's no label,\r\n\t// if it did return the title, this function needs to avoid adding the\r\n\t// title twice within the accessible label. Use this `hasLabel` boolean to\r\n\t// handle that.\r\n\tconst hasLabel = label && label !== title;\r\n\r\n\tif ( hasPosition && direction === 'vertical' ) {\r\n\t\tif ( hasLabel ) {\r\n\t\t\treturn sprintf(\r\n\t\t\t\t/* translators: accessibility text. 1: The block title. 2: The block row number. 3: The block label.. */\r\n\t\t\t\t__( '%1$s Block. Row %2$d. %3$s' ),\r\n\t\t\t\ttitle,\r\n\t\t\t\tposition,\r\n\t\t\t\tlabel\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn sprintf(\r\n\t\t\t/* translators: accessibility text. 1: The block title. 2: The block row number. */\r\n\t\t\t__( '%1$s Block. Row %2$d' ),\r\n\t\t\ttitle,\r\n\t\t\tposition\r\n\t\t);\r\n\t} else if ( hasPosition && direction === 'horizontal' ) {\r\n\t\tif ( hasLabel ) {\r\n\t\t\treturn sprintf(\r\n\t\t\t\t/* translators: accessibility text. 1: The block title. 2: The block column number. 3: The block label.. */\r\n\t\t\t\t__( '%1$s Block. Column %2$d. %3$s' ),\r\n\t\t\t\ttitle,\r\n\t\t\t\tposition,\r\n\t\t\t\tlabel\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn sprintf(\r\n\t\t\t/* translators: accessibility text. 1: The block title. 2: The block column number. */\r\n\t\t\t__( '%1$s Block. Column %2$d' ),\r\n\t\t\ttitle,\r\n\t\t\tposition\r\n\t\t);\r\n\t}\r\n\r\n\tif ( hasLabel ) {\r\n\t\treturn sprintf(\r\n\t\t\t/* translators: accessibility text. %1: The block title. %2: The block label. */\r\n\t\t\t__( '%1$s Block. %2$s' ),\r\n\t\t\ttitle,\r\n\t\t\tlabel\r\n\t\t);\r\n\t}\r\n\r\n\treturn sprintf(\r\n\t\t/* translators: accessibility text. %s: The block title. */\r\n\t\t__( '%s Block' ),\r\n\t\ttitle\r\n\t);\r\n}\r\n\r\nexport function getDefault( attributeSchema ) {\r\n\tif ( attributeSchema.default !== undefined ) {\r\n\t\treturn attributeSchema.default;\r\n\t}\r\n\r\n\tif ( attributeSchema.type === 'rich-text' ) {\r\n\t\treturn new RichTextData();\r\n\t}\r\n}\r\n\r\n/**\r\n * Ensure attributes contains only values defined by block type, and merge\r\n * default values for missing attributes.\r\n *\r\n * @param {string} name       The block's name.\r\n * @param {Object} attributes The block's attributes.\r\n * @return {Object} The sanitized attributes.\r\n */\r\nexport function __experimentalSanitizeBlockAttributes( name, attributes ) {\r\n\t// Get the type definition associated with a registered block.\r\n\tconst blockType = getBlockType( name );\r\n\r\n\tif ( undefined === blockType ) {\r\n\t\tthrow new Error( `Block type '${ name }' is not registered.` );\r\n\t}\r\n\r\n\treturn Object.entries( blockType.attributes ).reduce(\r\n\t\t( accumulator, [ key, schema ] ) => {\r\n\t\t\tconst value = attributes[ key ];\r\n\r\n\t\t\tif ( undefined !== value ) {\r\n\t\t\t\tif ( schema.type === 'rich-text' ) {\r\n\t\t\t\t\tif ( value instanceof RichTextData ) {\r\n\t\t\t\t\t\taccumulator[ key ] = value;\r\n\t\t\t\t\t} else if ( typeof value === 'string' ) {\r\n\t\t\t\t\t\taccumulator[ key ] =\r\n\t\t\t\t\t\t\tRichTextData.fromHTMLString( value );\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (\r\n\t\t\t\t\tschema.type === 'string' &&\r\n\t\t\t\t\tvalue instanceof RichTextData\r\n\t\t\t\t) {\r\n\t\t\t\t\taccumulator[ key ] = value.toHTMLString();\r\n\t\t\t\t} else {\r\n\t\t\t\t\taccumulator[ key ] = value;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tconst _default = getDefault( schema );\r\n\t\t\t\tif ( undefined !== _default ) {\r\n\t\t\t\t\taccumulator[ key ] = _default;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif ( [ 'node', 'children' ].indexOf( schema.source ) !== -1 ) {\r\n\t\t\t\t// Ensure value passed is always an array, which we're expecting in\r\n\t\t\t\t// the RichText component to handle the deprecated value.\r\n\t\t\t\tif ( typeof accumulator[ key ] === 'string' ) {\r\n\t\t\t\t\taccumulator[ key ] = [ accumulator[ key ] ];\r\n\t\t\t\t} else if ( ! Array.isArray( accumulator[ key ] ) ) {\r\n\t\t\t\t\taccumulator[ key ] = [];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn accumulator;\r\n\t\t},\r\n\t\t{}\r\n\t);\r\n}\r\n\r\n/**\r\n * Filter block attributes by `role` and return their names.\r\n *\r\n * @param {string} name Block attribute's name.\r\n * @param {string} role The role of a block attribute.\r\n *\r\n * @return {string[]} The attribute names that have the provided role.\r\n */\r\nexport function __experimentalGetBlockAttributesNamesByRole( name, role ) {\r\n\tconst attributes = getBlockType( name )?.attributes;\r\n\tif ( ! attributes ) {\r\n\t\treturn [];\r\n\t}\r\n\tconst attributesNames = Object.keys( attributes );\r\n\tif ( ! role ) {\r\n\t\treturn attributesNames;\r\n\t}\r\n\treturn attributesNames.filter(\r\n\t\t( attributeName ) =>\r\n\t\t\tattributes[ attributeName ]?.__experimentalRole === role\r\n\t);\r\n}\r\n\r\n/**\r\n * Return a new object with the specified keys omitted.\r\n *\r\n * @param {Object} object Original object.\r\n * @param {Array}  keys   Keys to be omitted.\r\n *\r\n * @return {Object} Object with omitted keys.\r\n */\r\nexport function omit( object, keys ) {\r\n\treturn Object.fromEntries(\r\n\t\tObject.entries( object ).filter( ( [ key ] ) => ! keys.includes( key ) )\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}