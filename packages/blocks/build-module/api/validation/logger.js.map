{"version":3,"names":["createLogger","createLogHandler","logger","log","message","args","process","env","NODE_ENV","require","format","error","console","warning","warn","getItems","createQueuedLogger","queue","push"],"sources":["@wordpress/blocks/src/api/validation/logger.js"],"sourcesContent":["/**\r\n * @typedef LoggerItem\r\n * @property {Function}   log  Which logger recorded the message\r\n * @property {Array<any>} args White arguments were supplied to the logger\r\n */\r\n\r\nexport function createLogger() {\r\n\t/**\r\n\t * Creates a log handler with block validation prefix.\r\n\t *\r\n\t * @param {Function} logger Original logger function.\r\n\t *\r\n\t * @return {Function} Augmented logger function.\r\n\t */\r\n\tfunction createLogHandler( logger ) {\r\n\t\tlet log = ( message, ...args ) =>\r\n\t\t\tlogger( 'Block validation: ' + message, ...args );\r\n\r\n\t\t// In test environments, pre-process string substitutions to improve\r\n\t\t// readability of error messages. We'd prefer to avoid pulling in this\r\n\t\t// dependency in runtime environments, and it can be dropped by a combo\r\n\t\t// of Webpack env substitution + UglifyJS dead code elimination.\r\n\t\tif ( process.env.NODE_ENV === 'test' ) {\r\n\t\t\tlog = ( ...args ) => logger( require( 'util' ).format( ...args ) );\r\n\t\t}\r\n\r\n\t\treturn log;\r\n\t}\r\n\r\n\treturn {\r\n\t\t// eslint-disable-next-line no-console\r\n\t\terror: createLogHandler( console.error ),\r\n\t\t// eslint-disable-next-line no-console\r\n\t\twarning: createLogHandler( console.warn ),\r\n\t\tgetItems() {\r\n\t\t\treturn [];\r\n\t\t},\r\n\t};\r\n}\r\n\r\nexport function createQueuedLogger() {\r\n\t/**\r\n\t * The list of enqueued log actions to print.\r\n\t *\r\n\t * @type {Array<LoggerItem>}\r\n\t */\r\n\tconst queue = [];\r\n\r\n\tconst logger = createLogger();\r\n\r\n\treturn {\r\n\t\terror( ...args ) {\r\n\t\t\tqueue.push( { log: logger.error, args } );\r\n\t\t},\r\n\t\twarning( ...args ) {\r\n\t\t\tqueue.push( { log: logger.warning, args } );\r\n\t\t},\r\n\t\tgetItems() {\r\n\t\t\treturn queue;\r\n\t\t},\r\n\t};\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;;AAEA,OAAO,SAASA,YAAYA,CAAA,EAAG;EAC9B;AACD;AACA;AACA;AACA;AACA;AACA;EACC,SAASC,gBAAgBA,CAAEC,MAAM,EAAG;IACnC,IAAIC,GAAG,GAAGA,CAAEC,OAAO,EAAE,GAAGC,IAAI,KAC3BH,MAAM,CAAE,oBAAoB,GAAGE,OAAO,EAAE,GAAGC,IAAK,CAAC;;IAElD;IACA;IACA;IACA;IACA,IAAKC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,MAAM,EAAG;MACtCL,GAAG,GAAGA,CAAE,GAAGE,IAAI,KAAMH,MAAM,CAAEO,OAAO,CAAE,MAAO,CAAC,CAACC,MAAM,CAAE,GAAGL,IAAK,CAAE,CAAC;IACnE;IAEA,OAAOF,GAAG;EACX;EAEA,OAAO;IACN;IACAQ,KAAK,EAAEV,gBAAgB,CAAEW,OAAO,CAACD,KAAM,CAAC;IACxC;IACAE,OAAO,EAAEZ,gBAAgB,CAAEW,OAAO,CAACE,IAAK,CAAC;IACzCC,QAAQA,CAAA,EAAG;MACV,OAAO,EAAE;IACV;EACD,CAAC;AACF;AAEA,OAAO,SAASC,kBAAkBA,CAAA,EAAG;EACpC;AACD;AACA;AACA;AACA;EACC,MAAMC,KAAK,GAAG,EAAE;EAEhB,MAAMf,MAAM,GAAGF,YAAY,CAAC,CAAC;EAE7B,OAAO;IACNW,KAAKA,CAAE,GAAGN,IAAI,EAAG;MAChBY,KAAK,CAACC,IAAI,CAAE;QAAEf,GAAG,EAAED,MAAM,CAACS,KAAK;QAAEN;MAAK,CAAE,CAAC;IAC1C,CAAC;IACDQ,OAAOA,CAAE,GAAGR,IAAI,EAAG;MAClBY,KAAK,CAACC,IAAI,CAAE;QAAEf,GAAG,EAAED,MAAM,CAACW,OAAO;QAAER;MAAK,CAAE,CAAC;IAC5C,CAAC;IACDU,QAAQA,CAAA,EAAG;MACV,OAAOE,KAAK;IACb;EACD,CAAC;AACF","ignoreList":[]}