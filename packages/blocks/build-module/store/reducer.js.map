{"version":3,"names":["camelCase","combineReducers","__","omit","DEFAULT_CATEGORIES","slug","title","keyBlockTypesByName","types","reduce","newBlockTypes","block","name","getUniqueItemsByName","items","acc","currentItem","some","item","push","bootstrappedBlockTypes","state","action","type","blockType","serverDefinition","newDefinition","blockHooks","undefined","allowedBlocks","Object","fromEntries","entries","filter","value","map","key","names","unprocessedBlockTypes","blockTypes","blockStyles","_state$action$blockNa","_blockType$styles","_state$blockType$name","styles","style","source","updatedStyles","blockNames","forEach","blockName","_state$blockName","styleNames","indexOf","blockVariations","_state$action$blockNa2","_state$action$blockNa3","_blockType$variations","_state$blockType$name2","variations","variation","variationNames","createBlockNameSetterReducer","setActionType","defaultBlockName","freeformFallbackBlockName","unregisteredFallbackBlockName","groupingBlockName","categories","uniqueCategories","Map","category","set","values","keys","length","categoryToChange","find","collections","namespace","icon","getMergedUsesContext","existingUsesContext","newUsesContext","mergedArrays","Array","from","Set","concat","blockBindingsSources","label","usesContext","getValues","setValues","canUserEditValue","getFieldsList"],"sources":["@wordpress/blocks/src/store/reducer.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport { camelCase } from 'change-case';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { combineReducers } from '@wordpress/data';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { omit } from '../api/utils';\r\n\r\n/**\r\n * @typedef {Object} WPBlockCategory\r\n *\r\n * @property {string} slug  Unique category slug.\r\n * @property {string} title Category label, for display in user interface.\r\n */\r\n\r\n/**\r\n * Default set of categories.\r\n *\r\n * @type {WPBlockCategory[]}\r\n */\r\nexport const DEFAULT_CATEGORIES = [\r\n\t{ slug: 'text', title: __( 'Text' ) },\r\n\t{ slug: 'media', title: __( 'Media' ) },\r\n\t{ slug: 'design', title: __( 'Design' ) },\r\n\t{ slug: 'widgets', title: __( 'Widgets' ) },\r\n\t{ slug: 'theme', title: __( 'Theme' ) },\r\n\t{ slug: 'embed', title: __( 'Embeds' ) },\r\n\t{ slug: 'reusable', title: __( 'Reusable blocks' ) },\r\n];\r\n\r\n// Key block types by their name.\r\nfunction keyBlockTypesByName( types ) {\r\n\treturn types.reduce(\r\n\t\t( newBlockTypes, block ) => ( {\r\n\t\t\t...newBlockTypes,\r\n\t\t\t[ block.name ]: block,\r\n\t\t} ),\r\n\t\t{}\r\n\t);\r\n}\r\n\r\n// Filter items to ensure they're unique by their name.\r\nfunction getUniqueItemsByName( items ) {\r\n\treturn items.reduce( ( acc, currentItem ) => {\r\n\t\tif ( ! acc.some( ( item ) => item.name === currentItem.name ) ) {\r\n\t\t\tacc.push( currentItem );\r\n\t\t}\r\n\t\treturn acc;\r\n\t}, [] );\r\n}\r\n\r\nfunction bootstrappedBlockTypes( state = {}, action ) {\r\n\tswitch ( action.type ) {\r\n\t\tcase 'ADD_BOOTSTRAPPED_BLOCK_TYPE':\r\n\t\t\tconst { name, blockType } = action;\r\n\t\t\tconst serverDefinition = state[ name ];\r\n\t\t\tlet newDefinition;\r\n\t\t\t// Don't overwrite if already set. It covers the case when metadata\r\n\t\t\t// was initialized from the server.\r\n\t\t\tif ( serverDefinition ) {\r\n\t\t\t\t// The `blockHooks` prop is not yet included in the server provided\r\n\t\t\t\t// definitions and needs to be polyfilled. This can be removed when the\r\n\t\t\t\t// minimum supported WordPress is >= 6.4.\r\n\t\t\t\tif (\r\n\t\t\t\t\tserverDefinition.blockHooks === undefined &&\r\n\t\t\t\t\tblockType.blockHooks\r\n\t\t\t\t) {\r\n\t\t\t\t\tnewDefinition = {\r\n\t\t\t\t\t\t...serverDefinition,\r\n\t\t\t\t\t\t...newDefinition,\r\n\t\t\t\t\t\tblockHooks: blockType.blockHooks,\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// The `allowedBlocks` prop is not yet included in the server provided\r\n\t\t\t\t// definitions and needs to be polyfilled. This can be removed when the\r\n\t\t\t\t// minimum supported WordPress is >= 6.5.\r\n\t\t\t\tif (\r\n\t\t\t\t\tserverDefinition.allowedBlocks === undefined &&\r\n\t\t\t\t\tblockType.allowedBlocks\r\n\t\t\t\t) {\r\n\t\t\t\t\tnewDefinition = {\r\n\t\t\t\t\t\t...serverDefinition,\r\n\t\t\t\t\t\t...newDefinition,\r\n\t\t\t\t\t\tallowedBlocks: blockType.allowedBlocks,\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tnewDefinition = Object.fromEntries(\r\n\t\t\t\t\tObject.entries( blockType )\r\n\t\t\t\t\t\t.filter(\r\n\t\t\t\t\t\t\t( [ , value ] ) =>\r\n\t\t\t\t\t\t\t\tvalue !== null && value !== undefined\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t.map( ( [ key, value ] ) => [\r\n\t\t\t\t\t\t\tcamelCase( key ),\r\n\t\t\t\t\t\t\tvalue,\r\n\t\t\t\t\t\t] )\r\n\t\t\t\t);\r\n\t\t\t\tnewDefinition.name = name;\r\n\t\t\t}\r\n\r\n\t\t\tif ( newDefinition ) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\t[ name ]: newDefinition,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\treturn state;\r\n\t\tcase 'REMOVE_BLOCK_TYPES':\r\n\t\t\treturn omit( state, action.names );\r\n\t}\r\n\r\n\treturn state;\r\n}\r\n\r\n/**\r\n * Reducer managing the unprocessed block types in a form passed when registering the by block.\r\n * It's for internal use only. It allows recomputing the processed block types on-demand after block type filters\r\n * get added or removed.\r\n *\r\n * @param {Object} state  Current state.\r\n * @param {Object} action Dispatched action.\r\n *\r\n * @return {Object} Updated state.\r\n */\r\nexport function unprocessedBlockTypes( state = {}, action ) {\r\n\tswitch ( action.type ) {\r\n\t\tcase 'ADD_UNPROCESSED_BLOCK_TYPE':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t[ action.name ]: action.blockType,\r\n\t\t\t};\r\n\t\tcase 'REMOVE_BLOCK_TYPES':\r\n\t\t\treturn omit( state, action.names );\r\n\t}\r\n\r\n\treturn state;\r\n}\r\n\r\n/**\r\n * Reducer managing the processed block types with all filters applied.\r\n * The state is derived from the `unprocessedBlockTypes` reducer.\r\n *\r\n * @param {Object} state  Current state.\r\n * @param {Object} action Dispatched action.\r\n *\r\n * @return {Object} Updated state.\r\n */\r\nexport function blockTypes( state = {}, action ) {\r\n\tswitch ( action.type ) {\r\n\t\tcase 'ADD_BLOCK_TYPES':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t...keyBlockTypesByName( action.blockTypes ),\r\n\t\t\t};\r\n\t\tcase 'REMOVE_BLOCK_TYPES':\r\n\t\t\treturn omit( state, action.names );\r\n\t}\r\n\r\n\treturn state;\r\n}\r\n\r\n/**\r\n * Reducer managing the block styles.\r\n *\r\n * @param {Object} state  Current state.\r\n * @param {Object} action Dispatched action.\r\n *\r\n * @return {Object} Updated state.\r\n */\r\nexport function blockStyles( state = {}, action ) {\r\n\tswitch ( action.type ) {\r\n\t\tcase 'ADD_BLOCK_TYPES':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t...Object.fromEntries(\r\n\t\t\t\t\tObject.entries(\r\n\t\t\t\t\t\tkeyBlockTypesByName( action.blockTypes )\r\n\t\t\t\t\t).map( ( [ name, blockType ] ) => [\r\n\t\t\t\t\t\tname,\r\n\t\t\t\t\t\tgetUniqueItemsByName( [\r\n\t\t\t\t\t\t\t...( blockType.styles ?? [] ).map( ( style ) => ( {\r\n\t\t\t\t\t\t\t\t...style,\r\n\t\t\t\t\t\t\t\tsource: 'block',\r\n\t\t\t\t\t\t\t} ) ),\r\n\t\t\t\t\t\t\t...( state[ blockType.name ] ?? [] ).filter(\r\n\t\t\t\t\t\t\t\t( { source } ) => 'block' !== source\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t] ),\r\n\t\t\t\t\t] )\r\n\t\t\t\t),\r\n\t\t\t};\r\n\t\tcase 'ADD_BLOCK_STYLES':\r\n\t\t\tconst updatedStyles = {};\r\n\t\t\taction.blockNames.forEach( ( blockName ) => {\r\n\t\t\t\tupdatedStyles[ blockName ] = getUniqueItemsByName( [\r\n\t\t\t\t\t...( state[ blockName ] ?? [] ),\r\n\t\t\t\t\t...action.styles,\r\n\t\t\t\t] );\r\n\t\t\t} );\r\n\t\t\treturn { ...state, ...updatedStyles };\r\n\t\tcase 'REMOVE_BLOCK_STYLES':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t[ action.blockName ]: (\r\n\t\t\t\t\tstate[ action.blockName ] ?? []\r\n\t\t\t\t).filter(\r\n\t\t\t\t\t( style ) => action.styleNames.indexOf( style.name ) === -1\r\n\t\t\t\t),\r\n\t\t\t};\r\n\t}\r\n\r\n\treturn state;\r\n}\r\n\r\n/**\r\n * Reducer managing the block variations.\r\n *\r\n * @param {Object} state  Current state.\r\n * @param {Object} action Dispatched action.\r\n *\r\n * @return {Object} Updated state.\r\n */\r\nexport function blockVariations( state = {}, action ) {\r\n\tswitch ( action.type ) {\r\n\t\tcase 'ADD_BLOCK_TYPES':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t...Object.fromEntries(\r\n\t\t\t\t\tObject.entries(\r\n\t\t\t\t\t\tkeyBlockTypesByName( action.blockTypes )\r\n\t\t\t\t\t).map( ( [ name, blockType ] ) => {\r\n\t\t\t\t\t\treturn [\r\n\t\t\t\t\t\t\tname,\r\n\t\t\t\t\t\t\tgetUniqueItemsByName( [\r\n\t\t\t\t\t\t\t\t...( blockType.variations ?? [] ).map(\r\n\t\t\t\t\t\t\t\t\t( variation ) => ( {\r\n\t\t\t\t\t\t\t\t\t\t...variation,\r\n\t\t\t\t\t\t\t\t\t\tsource: 'block',\r\n\t\t\t\t\t\t\t\t\t} )\r\n\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t...( state[ blockType.name ] ?? [] ).filter(\r\n\t\t\t\t\t\t\t\t\t( { source } ) => 'block' !== source\r\n\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t] ),\r\n\t\t\t\t\t\t];\r\n\t\t\t\t\t} )\r\n\t\t\t\t),\r\n\t\t\t};\r\n\t\tcase 'ADD_BLOCK_VARIATIONS':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t[ action.blockName ]: getUniqueItemsByName( [\r\n\t\t\t\t\t...( state[ action.blockName ] ?? [] ),\r\n\t\t\t\t\t...action.variations,\r\n\t\t\t\t] ),\r\n\t\t\t};\r\n\t\tcase 'REMOVE_BLOCK_VARIATIONS':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t[ action.blockName ]: (\r\n\t\t\t\t\tstate[ action.blockName ] ?? []\r\n\t\t\t\t).filter(\r\n\t\t\t\t\t( variation ) =>\r\n\t\t\t\t\t\taction.variationNames.indexOf( variation.name ) === -1\r\n\t\t\t\t),\r\n\t\t\t};\r\n\t}\r\n\r\n\treturn state;\r\n}\r\n\r\n/**\r\n * Higher-order Reducer creating a reducer keeping track of given block name.\r\n *\r\n * @param {string} setActionType Action type.\r\n *\r\n * @return {Function} Reducer.\r\n */\r\nexport function createBlockNameSetterReducer( setActionType ) {\r\n\treturn ( state = null, action ) => {\r\n\t\tswitch ( action.type ) {\r\n\t\t\tcase 'REMOVE_BLOCK_TYPES':\r\n\t\t\t\tif ( action.names.indexOf( state ) !== -1 ) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t\treturn state;\r\n\r\n\t\t\tcase setActionType:\r\n\t\t\t\treturn action.name || null;\r\n\t\t}\r\n\r\n\t\treturn state;\r\n\t};\r\n}\r\n\r\nexport const defaultBlockName = createBlockNameSetterReducer(\r\n\t'SET_DEFAULT_BLOCK_NAME'\r\n);\r\nexport const freeformFallbackBlockName = createBlockNameSetterReducer(\r\n\t'SET_FREEFORM_FALLBACK_BLOCK_NAME'\r\n);\r\nexport const unregisteredFallbackBlockName = createBlockNameSetterReducer(\r\n\t'SET_UNREGISTERED_FALLBACK_BLOCK_NAME'\r\n);\r\nexport const groupingBlockName = createBlockNameSetterReducer(\r\n\t'SET_GROUPING_BLOCK_NAME'\r\n);\r\n\r\n/**\r\n * Reducer managing the categories\r\n *\r\n * @param {WPBlockCategory[]} state  Current state.\r\n * @param {Object}            action Dispatched action.\r\n *\r\n * @return {WPBlockCategory[]} Updated state.\r\n */\r\nexport function categories( state = DEFAULT_CATEGORIES, action ) {\r\n\tswitch ( action.type ) {\r\n\t\tcase 'SET_CATEGORIES':\r\n\t\t\t// Ensure, that categories are unique by slug.\r\n\t\t\tconst uniqueCategories = new Map();\r\n\t\t\t( action.categories || [] ).forEach( ( category ) => {\r\n\t\t\t\tuniqueCategories.set( category.slug, category );\r\n\t\t\t} );\r\n\t\t\treturn [ ...uniqueCategories.values() ];\r\n\t\tcase 'UPDATE_CATEGORY': {\r\n\t\t\tif (\r\n\t\t\t\t! action.category ||\r\n\t\t\t\t! Object.keys( action.category ).length\r\n\t\t\t) {\r\n\t\t\t\treturn state;\r\n\t\t\t}\r\n\t\t\tconst categoryToChange = state.find(\r\n\t\t\t\t( { slug } ) => slug === action.slug\r\n\t\t\t);\r\n\t\t\tif ( categoryToChange ) {\r\n\t\t\t\treturn state.map( ( category ) => {\r\n\t\t\t\t\tif ( category.slug === action.slug ) {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t...category,\r\n\t\t\t\t\t\t\t...action.category,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn category;\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn state;\r\n}\r\n\r\nexport function collections( state = {}, action ) {\r\n\tswitch ( action.type ) {\r\n\t\tcase 'ADD_BLOCK_COLLECTION':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t[ action.namespace ]: {\r\n\t\t\t\t\ttitle: action.title,\r\n\t\t\t\t\ticon: action.icon,\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\tcase 'REMOVE_BLOCK_COLLECTION':\r\n\t\t\treturn omit( state, action.namespace );\r\n\t}\r\n\treturn state;\r\n}\r\n\r\n/**\r\n * Merges usesContext with existing values, potentially defined in the server registration.\r\n *\r\n * @param {string[]} existingUsesContext Existing `usesContext`.\r\n * @param {string[]} newUsesContext      Newly added `usesContext`.\r\n * @return {string[]|undefined} Merged `usesContext`.\r\n */\r\nfunction getMergedUsesContext( existingUsesContext = [], newUsesContext = [] ) {\r\n\tconst mergedArrays = Array.from(\r\n\t\tnew Set( existingUsesContext.concat( newUsesContext ) )\r\n\t);\r\n\treturn mergedArrays.length > 0 ? mergedArrays : undefined;\r\n}\r\n\r\nexport function blockBindingsSources( state = {}, action ) {\r\n\tswitch ( action.type ) {\r\n\t\tcase 'ADD_BLOCK_BINDINGS_SOURCE':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t[ action.name ]: {\r\n\t\t\t\t\t// Don't override the label if it's already set.\r\n\t\t\t\t\tlabel: state[ action.name ]?.label || action.label,\r\n\t\t\t\t\tusesContext: getMergedUsesContext(\r\n\t\t\t\t\t\tstate[ action.name ]?.usesContext,\r\n\t\t\t\t\t\taction.usesContext\r\n\t\t\t\t\t),\r\n\t\t\t\t\tgetValues: action.getValues,\r\n\t\t\t\t\tsetValues: action.setValues,\r\n\t\t\t\t\tcanUserEditValue: action.canUserEditValue,\r\n\t\t\t\t\tgetFieldsList: action.getFieldsList,\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\tcase 'ADD_BOOTSTRAPPED_BLOCK_BINDINGS_SOURCE':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t[ action.name ]: {\r\n\t\t\t\t\t/*\r\n\t\t\t\t\t * Keep the exisitng properties in case the source has been registered\r\n\t\t\t\t\t * in the client before bootstrapping.\r\n\t\t\t\t\t */\r\n\t\t\t\t\t...state[ action.name ],\r\n\t\t\t\t\tlabel: action.label,\r\n\t\t\t\t\tusesContext: getMergedUsesContext(\r\n\t\t\t\t\t\tstate[ action.name ]?.usesContext,\r\n\t\t\t\t\t\taction.usesContext\r\n\t\t\t\t\t),\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\tcase 'REMOVE_BLOCK_BINDINGS_SOURCE':\r\n\t\t\treturn omit( state, action.name );\r\n\t}\r\n\treturn state;\r\n}\r\n\r\nexport default combineReducers( {\r\n\tbootstrappedBlockTypes,\r\n\tunprocessedBlockTypes,\r\n\tblockTypes,\r\n\tblockStyles,\r\n\tblockVariations,\r\n\tdefaultBlockName,\r\n\tfreeformFallbackBlockName,\r\n\tunregisteredFallbackBlockName,\r\n\tgroupingBlockName,\r\n\tcategories,\r\n\tcollections,\r\n\tblockBindingsSources,\r\n} );\r\n"],"mappings":"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","ignoreList":[]}