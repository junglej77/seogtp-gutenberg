{"version":3,"names":["View","Animated","StyleSheet","Text","TouchableOpacity","ScrollView","useLayoutEffect","useEffect","useRef","useState","useCallback","__","sprintf","usePreferredColorSchemeStyle","BackgroundView","getDefaultUseItems","styles","Icon","__unstableAutocompletionItemsFill","AutocompletionItemsFill","jsx","_jsx","jsxs","_jsxs","compose","stylesCompose","getAutoCompleterUI","autocompleter","useItems","AutocompleterUI","filterValue","selectedIndex","onChangeOptions","onSelect","value","reset","items","filteredItems","filter","item","isDisabled","scrollViewRef","animationValue","Value","current","isVisible","setIsVisible","text","length","scrollTo","x","animated","startAnimation","activeItemStyles","iconStyles","activeIconStyles","textStyles","activeTextStyles","show","timing","toValue","duration","useNativeDriver","start","finished","contentStyles","transform","translateY","interpolate","inputRange","outputRange","height","children","style","testID","ref","horizontal","contentContainerStyle","showsHorizontalScrollIndicator","keyboardShouldPersistTaps","accessibilityLabel","map","option","index","isActive","itemStyle","textStyle","iconStyle","iconSource","icon","src","activeOpacity","onPress","title","size"],"sources":["@wordpress/components/src/autocomplete/autocompleter-ui.native.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport {\r\n\tView,\r\n\tAnimated,\r\n\tStyleSheet,\r\n\tText,\r\n\tTouchableOpacity,\r\n\tScrollView,\r\n} from 'react-native';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tuseLayoutEffect,\r\n\tuseEffect,\r\n\tuseRef,\r\n\tuseState,\r\n\tuseCallback,\r\n} from '@wordpress/element';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { usePreferredColorSchemeStyle } from '@wordpress/compose';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BackgroundView from './background-view';\r\nimport getDefaultUseItems from './get-default-use-items';\r\nimport styles from './style.scss';\r\nimport Icon from '../icon';\r\nimport { __unstableAutocompletionItemsFill as AutocompletionItemsFill } from '../mobile/autocompletion-items';\r\n\r\nconst { compose: stylesCompose } = StyleSheet;\r\n\r\nexport function getAutoCompleterUI( autocompleter ) {\r\n\tconst useItems = autocompleter.useItems\r\n\t\t? autocompleter.useItems\r\n\t\t: getDefaultUseItems( autocompleter );\r\n\r\n\tfunction AutocompleterUI( {\r\n\t\tfilterValue,\r\n\t\tselectedIndex,\r\n\t\tonChangeOptions,\r\n\t\tonSelect,\r\n\t\tvalue,\r\n\t\treset,\r\n\t} ) {\r\n\t\tconst [ items ] = useItems( filterValue );\r\n\t\tconst filteredItems = items.filter( ( item ) => ! item.isDisabled );\r\n\t\tconst scrollViewRef = useRef();\r\n\t\tconst animationValue = useRef( new Animated.Value( 0 ) ).current;\r\n\t\tconst [ isVisible, setIsVisible ] = useState( false );\r\n\t\tconst { text } = value;\r\n\r\n\t\tuseEffect( () => {\r\n\t\t\tif ( ! isVisible && text.length > 0 ) {\r\n\t\t\t\tsetIsVisible( true );\r\n\t\t\t}\r\n\t\t}, [ isVisible, text ] );\r\n\r\n\t\tuseLayoutEffect( () => {\r\n\t\t\tonChangeOptions( items );\r\n\t\t\tscrollViewRef.current?.scrollTo( { x: 0, animated: false } );\r\n\r\n\t\t\tif ( isVisible && text.length > 0 ) {\r\n\t\t\t\tstartAnimation( true );\r\n\t\t\t} else if ( isVisible && text.length === 0 ) {\r\n\t\t\t\tstartAnimation( false );\r\n\t\t\t}\r\n\t\t\t// Temporarily disabling exhaustive-deps to avoid introducing unexpected side effecst.\r\n\t\t\t// See https://github.com/WordPress/gutenberg/pull/41820\r\n\t\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t}, [ items, isVisible, text ] );\r\n\r\n\t\tconst activeItemStyles = usePreferredColorSchemeStyle(\r\n\t\t\tstyles[ 'components-autocomplete__item-active' ],\r\n\t\t\tstyles[ 'components-autocomplete__item-active-dark' ]\r\n\t\t);\r\n\r\n\t\tconst iconStyles = usePreferredColorSchemeStyle(\r\n\t\t\tstyles[ 'components-autocomplete__icon' ],\r\n\t\t\tstyles[ 'components-autocomplete__icon-active-dark' ]\r\n\t\t);\r\n\r\n\t\tconst activeIconStyles = usePreferredColorSchemeStyle(\r\n\t\t\tstyles[ 'components-autocomplete__icon-active ' ],\r\n\t\t\tstyles[ 'components-autocomplete__icon-active-dark' ]\r\n\t\t);\r\n\r\n\t\tconst textStyles = usePreferredColorSchemeStyle(\r\n\t\t\tstyles[ 'components-autocomplete__text' ],\r\n\t\t\tstyles[ 'components-autocomplete__text-dark' ]\r\n\t\t);\r\n\r\n\t\tconst activeTextStyles = usePreferredColorSchemeStyle(\r\n\t\t\tstyles[ 'components-autocomplete__text-active' ],\r\n\t\t\tstyles[ 'components-autocomplete__text-active-dark' ]\r\n\t\t);\r\n\r\n\t\tconst startAnimation = useCallback(\r\n\t\t\t( show ) => {\r\n\t\t\t\tAnimated.timing( animationValue, {\r\n\t\t\t\t\ttoValue: show ? 1 : 0,\r\n\t\t\t\t\tduration: show ? 200 : 100,\r\n\t\t\t\t\tuseNativeDriver: true,\r\n\t\t\t\t} ).start( ( { finished } ) => {\r\n\t\t\t\t\tif ( finished && ! show && isVisible ) {\r\n\t\t\t\t\t\tsetIsVisible( false );\r\n\t\t\t\t\t\treset();\r\n\t\t\t\t\t}\r\n\t\t\t\t} );\r\n\t\t\t},\r\n\t\t\t// Temporarily disabling exhaustive-deps to avoid introducing unexpected side effecst.\r\n\t\t\t// See https://github.com/WordPress/gutenberg/pull/41820\r\n\t\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t\t[ isVisible ]\r\n\t\t);\r\n\r\n\t\tconst contentStyles = {\r\n\t\t\ttransform: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttranslateY: animationValue.interpolate( {\r\n\t\t\t\t\t\tinputRange: [ 0, 1 ],\r\n\t\t\t\t\t\toutputRange: [\r\n\t\t\t\t\t\t\tstyles[ 'components-autocomplete' ].height,\r\n\t\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t} ),\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t};\r\n\r\n\t\tif ( ! filteredItems.length > 0 || ! isVisible ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<AutocompletionItemsFill>\r\n\t\t\t\t<View style={ styles[ 'components-autocomplete' ] }>\r\n\t\t\t\t\t<Animated.View style={ contentStyles }>\r\n\t\t\t\t\t\t<BackgroundView>\r\n\t\t\t\t\t\t\t<ScrollView\r\n\t\t\t\t\t\t\t\ttestID=\"autocompleter\"\r\n\t\t\t\t\t\t\t\tref={ scrollViewRef }\r\n\t\t\t\t\t\t\t\thorizontal\r\n\t\t\t\t\t\t\t\tcontentContainerStyle={\r\n\t\t\t\t\t\t\t\t\tstyles[ 'components-autocomplete__content' ]\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tshowsHorizontalScrollIndicator={ false }\r\n\t\t\t\t\t\t\t\tkeyboardShouldPersistTaps=\"always\"\r\n\t\t\t\t\t\t\t\taccessibilityLabel={\r\n\t\t\t\t\t\t\t\t\t// translators: Slash inserter autocomplete results\r\n\t\t\t\t\t\t\t\t\t__( 'Slash inserter results' )\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{ filteredItems.map( ( option, index ) => {\r\n\t\t\t\t\t\t\t\t\tconst isActive = index === selectedIndex;\r\n\t\t\t\t\t\t\t\t\tconst itemStyle = stylesCompose(\r\n\t\t\t\t\t\t\t\t\t\tstyles[\r\n\t\t\t\t\t\t\t\t\t\t\t'components-autocomplete__item'\r\n\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\tisActive && activeItemStyles\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\tconst textStyle = stylesCompose(\r\n\t\t\t\t\t\t\t\t\t\ttextStyles,\r\n\t\t\t\t\t\t\t\t\t\tisActive && activeTextStyles\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\tconst iconStyle = stylesCompose(\r\n\t\t\t\t\t\t\t\t\t\ticonStyles,\r\n\t\t\t\t\t\t\t\t\t\tisActive && activeIconStyles\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\tconst iconSource =\r\n\t\t\t\t\t\t\t\t\t\toption?.value?.icon?.src ||\r\n\t\t\t\t\t\t\t\t\t\toption?.value?.icon;\r\n\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<TouchableOpacity\r\n\t\t\t\t\t\t\t\t\t\t\tactiveOpacity={ 0.5 }\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={ itemStyle }\r\n\t\t\t\t\t\t\t\t\t\t\tkey={ index }\r\n\t\t\t\t\t\t\t\t\t\t\tonPress={ () => onSelect( option ) }\r\n\t\t\t\t\t\t\t\t\t\t\taccessibilityLabel={ sprintf(\r\n\t\t\t\t\t\t\t\t\t\t\t\t// translators: %s: Block name e.g. \"Image block\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t__( '%s block' ),\r\n\t\t\t\t\t\t\t\t\t\t\t\toption?.value?.title\r\n\t\t\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<View\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyles[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'components-autocomplete__icon'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon={ iconSource }\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize={ 24 }\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={ iconStyle }\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t</View>\r\n\t\t\t\t\t\t\t\t\t\t\t<Text style={ textStyle }>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{ option?.value?.title }\r\n\t\t\t\t\t\t\t\t\t\t\t</Text>\r\n\t\t\t\t\t\t\t\t\t\t</TouchableOpacity>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t} ) }\r\n\t\t\t\t\t\t\t</ScrollView>\r\n\t\t\t\t\t\t</BackgroundView>\r\n\t\t\t\t\t</Animated.View>\r\n\t\t\t\t</View>\r\n\t\t\t</AutocompletionItemsFill>\r\n\t\t);\r\n\t}\r\n\r\n\treturn AutocompleterUI;\r\n}\r\n\r\nexport default getAutoCompleterUI;\r\n"],"mappings":"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","ignoreList":[]}