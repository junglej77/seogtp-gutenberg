{"version":3,"names":["useMemo","useState","styles","getBorderDiff","getCommonBorder","getSplitBorders","hasMixedBorders","hasSplitBorders","isCompleteBorder","isEmptyBorder","useContextSystem","useCx","useBorderBoxControl","props","className","colors","onChange","enableAlpha","enableStyle","size","value","__experimentalIsRenderedInSidebar","__next40pxDefaultSize","otherProps","computedSize","mixedBorders","splitBorders","linkedValue","splitValue","hasWidthValue","isNaN","parseFloat","width","isLinked","setIsLinked","toggleLinked","onLinkedChange","newBorder","undefined","changes","updatedBorders","top","right","bottom","left","filteredResult","onSplitChange","side","cx","classes","borderBoxControl","linkedControlClassName","linkedBorderControl","wrapperClassName","wrapper","disableUnits"],"sources":["@wordpress/components/src/border-box-control/border-box-control/hook.ts"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useMemo, useState } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport * as styles from '../styles';\r\nimport {\r\n\tgetBorderDiff,\r\n\tgetCommonBorder,\r\n\tgetSplitBorders,\r\n\thasMixedBorders,\r\n\thasSplitBorders,\r\n\tisCompleteBorder,\r\n\tisEmptyBorder,\r\n} from '../utils';\r\nimport type { WordPressComponentProps } from '../../context';\r\nimport { useContextSystem } from '../../context';\r\nimport { useCx } from '../../utils/hooks/use-cx';\r\n\r\nimport type { Border } from '../../border-control/types';\r\nimport type { Borders, BorderSide, BorderBoxControlProps } from '../types';\r\n\r\nexport function useBorderBoxControl(\r\n\tprops: WordPressComponentProps< BorderBoxControlProps, 'div' >\r\n) {\r\n\tconst {\r\n\t\tclassName,\r\n\t\tcolors = [],\r\n\t\tonChange,\r\n\t\tenableAlpha = false,\r\n\t\tenableStyle = true,\r\n\t\tsize = 'default',\r\n\t\tvalue,\r\n\t\t__experimentalIsRenderedInSidebar = false,\r\n\t\t__next40pxDefaultSize,\r\n\t\t...otherProps\r\n\t} = useContextSystem( props, 'BorderBoxControl' );\r\n\r\n\tconst computedSize =\r\n\t\tsize === 'default' && __next40pxDefaultSize ? '__unstable-large' : size;\r\n\r\n\tconst mixedBorders = hasMixedBorders( value );\r\n\tconst splitBorders = hasSplitBorders( value );\r\n\r\n\tconst linkedValue = splitBorders\r\n\t\t? getCommonBorder( value as Borders | undefined )\r\n\t\t: ( value as Border );\r\n\r\n\tconst splitValue = splitBorders\r\n\t\t? ( value as Borders )\r\n\t\t: getSplitBorders( value as Border | undefined );\r\n\r\n\t// If no numeric width value is set, the unit select will be disabled.\r\n\tconst hasWidthValue = ! isNaN( parseFloat( `${ linkedValue?.width }` ) );\r\n\r\n\tconst [ isLinked, setIsLinked ] = useState( ! mixedBorders );\r\n\tconst toggleLinked = () => setIsLinked( ! isLinked );\r\n\r\n\tconst onLinkedChange = ( newBorder?: Border ) => {\r\n\t\tif ( ! newBorder ) {\r\n\t\t\treturn onChange( undefined );\r\n\t\t}\r\n\r\n\t\t// If we have all props defined on the new border apply it.\r\n\t\tif ( ! mixedBorders || isCompleteBorder( newBorder ) ) {\r\n\t\t\treturn onChange(\r\n\t\t\t\tisEmptyBorder( newBorder ) ? undefined : newBorder\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\t// If we had mixed borders we might have had some shared border props\r\n\t\t// that we need to maintain. For example; we could have mixed borders\r\n\t\t// with all the same color but different widths. Then from the linked\r\n\t\t// control we change the color. We should keep the separate  widths.\r\n\t\tconst changes = getBorderDiff(\r\n\t\t\tlinkedValue as Border,\r\n\t\t\tnewBorder as Border\r\n\t\t);\r\n\t\tconst updatedBorders = {\r\n\t\t\ttop: { ...( value as Borders )?.top, ...changes },\r\n\t\t\tright: { ...( value as Borders )?.right, ...changes },\r\n\t\t\tbottom: { ...( value as Borders )?.bottom, ...changes },\r\n\t\t\tleft: { ...( value as Borders )?.left, ...changes },\r\n\t\t};\r\n\r\n\t\tif ( hasMixedBorders( updatedBorders ) ) {\r\n\t\t\treturn onChange( updatedBorders );\r\n\t\t}\r\n\r\n\t\tconst filteredResult = isEmptyBorder( updatedBorders.top )\r\n\t\t\t? undefined\r\n\t\t\t: updatedBorders.top;\r\n\r\n\t\tonChange( filteredResult );\r\n\t};\r\n\r\n\tconst onSplitChange = (\r\n\t\tnewBorder: Border | undefined,\r\n\t\tside: BorderSide\r\n\t) => {\r\n\t\tconst updatedBorders = { ...splitValue, [ side ]: newBorder };\r\n\r\n\t\tif ( hasMixedBorders( updatedBorders ) ) {\r\n\t\t\tonChange( updatedBorders );\r\n\t\t} else {\r\n\t\t\tonChange( newBorder );\r\n\t\t}\r\n\t};\r\n\r\n\tconst cx = useCx();\r\n\tconst classes = useMemo( () => {\r\n\t\treturn cx( styles.borderBoxControl, className );\r\n\t}, [ cx, className ] );\r\n\r\n\tconst linkedControlClassName = useMemo( () => {\r\n\t\treturn cx( styles.linkedBorderControl() );\r\n\t}, [ cx ] );\r\n\r\n\tconst wrapperClassName = useMemo( () => {\r\n\t\treturn cx( styles.wrapper );\r\n\t}, [ cx ] );\r\n\r\n\treturn {\r\n\t\t...otherProps,\r\n\t\tclassName: classes,\r\n\t\tcolors,\r\n\t\tdisableUnits: mixedBorders && ! hasWidthValue,\r\n\t\tenableAlpha,\r\n\t\tenableStyle,\r\n\t\thasMixedBorders: mixedBorders,\r\n\t\tisLinked,\r\n\t\tlinkedControlClassName,\r\n\t\tonLinkedChange,\r\n\t\tonSplitChange,\r\n\t\ttoggleLinked,\r\n\t\tlinkedValue,\r\n\t\tsize: computedSize,\r\n\t\tsplitValue,\r\n\t\twrapperClassName,\r\n\t\t__experimentalIsRenderedInSidebar,\r\n\t};\r\n}\r\n"],"mappings":"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","ignoreList":[]}