{"version":3,"names":["__","sprintf","closeSmall","BorderControlStylePicker","Button","ColorIndicator","ColorPalette","Dropdown","HStack","VStack","contextConnect","useBorderControlDropdown","StyledLabel","DropdownContentWrapper","isMultiplePaletteArray","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","getAriaLabelColorValue","colorValue","replace","getColorObject","colors","matchedColor","some","origin","color","find","getToggleAriaLabel","colorObject","style","isStyleEnabled","ariaLabelValue","name","BorderControlDropdown","props","forwardedRef","__experimentalIsRenderedInSidebar","border","disableCustomColors","enableAlpha","enableStyle","indicatorClassName","indicatorWrapperClassName","isStyleSettable","onReset","onColorChange","onStyleChange","popoverContentClassName","popoverControlsClassName","resetButtonClassName","showDropdownHeader","size","__unstablePopoverProps","otherProps","toggleAriaLabel","showResetButton","dropdownPosition","undefined","renderToggle","onToggle","onClick","variant","tooltipPosition","label","showTooltip","__next40pxDefaultSize","children","className","renderContent","onClose","paddingSize","spacing","icon","value","onChange","clearable","popoverProps","ref","ConnectedBorderControlDropdown"],"sources":["@wordpress/components/src/border-control/border-control-dropdown/component.tsx"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport type { CSSProperties } from 'react';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { closeSmall } from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BorderControlStylePicker from '../border-control-style-picker';\r\nimport Button from '../../button';\r\nimport ColorIndicator from '../../color-indicator';\r\nimport ColorPalette from '../../color-palette';\r\nimport Dropdown from '../../dropdown';\r\nimport { HStack } from '../../h-stack';\r\nimport { VStack } from '../../v-stack';\r\nimport type { WordPressComponentProps } from '../../context';\r\nimport { contextConnect } from '../../context';\r\nimport { useBorderControlDropdown } from './hook';\r\nimport { StyledLabel } from '../../base-control/styles/base-control-styles';\r\nimport DropdownContentWrapper from '../../dropdown/dropdown-content-wrapper';\r\n\r\nimport type { ColorObject } from '../../color-palette/types';\r\nimport { isMultiplePaletteArray } from '../../color-palette/utils';\r\nimport type { DropdownProps as DropdownComponentProps } from '../../dropdown/types';\r\nimport type { ColorProps, DropdownProps } from '../types';\r\n\r\nconst getAriaLabelColorValue = ( colorValue: string ) => {\r\n\t// Leave hex values as-is. Remove the `var()` wrapper from CSS vars.\r\n\treturn colorValue.replace( /^var\\((.+)\\)$/, '$1' );\r\n};\r\n\r\nconst getColorObject = (\r\n\tcolorValue: CSSProperties[ 'borderColor' ],\r\n\tcolors: ColorProps[ 'colors' ] | undefined\r\n) => {\r\n\tif ( ! colorValue || ! colors ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tif ( isMultiplePaletteArray( colors ) ) {\r\n\t\t// Multiple origins\r\n\t\tlet matchedColor;\r\n\r\n\t\tcolors.some( ( origin ) =>\r\n\t\t\torigin.colors.some( ( color ) => {\r\n\t\t\t\tif ( color.color === colorValue ) {\r\n\t\t\t\t\tmatchedColor = color;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t} )\r\n\t\t);\r\n\r\n\t\treturn matchedColor;\r\n\t}\r\n\r\n\t// Single origin\r\n\treturn colors.find( ( color ) => color.color === colorValue );\r\n};\r\n\r\nconst getToggleAriaLabel = (\r\n\tcolorValue: CSSProperties[ 'borderColor' ],\r\n\tcolorObject: ColorObject | undefined,\r\n\tstyle: CSSProperties[ 'borderStyle' ],\r\n\tisStyleEnabled: boolean\r\n) => {\r\n\tif ( isStyleEnabled ) {\r\n\t\tif ( colorObject ) {\r\n\t\t\tconst ariaLabelValue = getAriaLabelColorValue( colorObject.color );\r\n\t\t\treturn style\r\n\t\t\t\t? sprintf(\r\n\t\t\t\t\t\t// translators: %1$s: The name of the color e.g. \"vivid red\". %2$s: The color's hex code e.g.: \"#f00:\". %3$s: The current border style selection e.g. \"solid\".\r\n\t\t\t\t\t\t'Border color and style picker. The currently selected color is called \"%1$s\" and has a value of \"%2$s\". The currently selected style is \"%3$s\".',\r\n\t\t\t\t\t\tcolorObject.name,\r\n\t\t\t\t\t\tariaLabelValue,\r\n\t\t\t\t\t\tstyle\r\n\t\t\t\t  )\r\n\t\t\t\t: sprintf(\r\n\t\t\t\t\t\t// translators: %1$s: The name of the color e.g. \"vivid red\". %2$s: The color's hex code e.g.: \"#f00:\".\r\n\t\t\t\t\t\t'Border color and style picker. The currently selected color is called \"%1$s\" and has a value of \"%2$s\".',\r\n\t\t\t\t\t\tcolorObject.name,\r\n\t\t\t\t\t\tariaLabelValue\r\n\t\t\t\t  );\r\n\t\t}\r\n\r\n\t\tif ( colorValue ) {\r\n\t\t\tconst ariaLabelValue = getAriaLabelColorValue( colorValue );\r\n\t\t\treturn style\r\n\t\t\t\t? sprintf(\r\n\t\t\t\t\t\t// translators: %1$s: The color's hex code e.g.: \"#f00:\". %2$s: The current border style selection e.g. \"solid\".\r\n\t\t\t\t\t\t'Border color and style picker. The currently selected color has a value of \"%1$s\". The currently selected style is \"%2$s\".',\r\n\t\t\t\t\t\tariaLabelValue,\r\n\t\t\t\t\t\tstyle\r\n\t\t\t\t  )\r\n\t\t\t\t: sprintf(\r\n\t\t\t\t\t\t// translators: %1$s: The color's hex code e.g: \"#f00\".\r\n\t\t\t\t\t\t'Border color and style picker. The currently selected color has a value of \"%1$s\".',\r\n\t\t\t\t\t\tariaLabelValue\r\n\t\t\t\t  );\r\n\t\t}\r\n\r\n\t\treturn __( 'Border color and style picker.' );\r\n\t}\r\n\r\n\tif ( colorObject ) {\r\n\t\treturn sprintf(\r\n\t\t\t// translators: %1$s: The name of the color e.g. \"vivid red\". %2$s: The color's hex code e.g: \"#f00\".\r\n\t\t\t'Border color picker. The currently selected color is called \"%1$s\" and has a value of \"%2$s\".',\r\n\t\t\tcolorObject.name,\r\n\t\t\tgetAriaLabelColorValue( colorObject.color )\r\n\t\t);\r\n\t}\r\n\r\n\tif ( colorValue ) {\r\n\t\treturn sprintf(\r\n\t\t\t// translators: %1$s: The color's hex code e.g: \"#f00\".\r\n\t\t\t'Border color picker. The currently selected color has a value of \"%1$s\".',\r\n\t\t\tgetAriaLabelColorValue( colorValue )\r\n\t\t);\r\n\t}\r\n\r\n\treturn __( 'Border color picker.' );\r\n};\r\n\r\nconst BorderControlDropdown = (\r\n\tprops: WordPressComponentProps< DropdownProps, 'div' >,\r\n\tforwardedRef: React.ForwardedRef< any >\r\n) => {\r\n\tconst {\r\n\t\t__experimentalIsRenderedInSidebar,\r\n\t\tborder,\r\n\t\tcolors,\r\n\t\tdisableCustomColors,\r\n\t\tenableAlpha,\r\n\t\tenableStyle,\r\n\t\tindicatorClassName,\r\n\t\tindicatorWrapperClassName,\r\n\t\tisStyleSettable,\r\n\t\tonReset,\r\n\t\tonColorChange,\r\n\t\tonStyleChange,\r\n\t\tpopoverContentClassName,\r\n\t\tpopoverControlsClassName,\r\n\t\tresetButtonClassName,\r\n\t\tshowDropdownHeader,\r\n\t\tsize,\r\n\t\t__unstablePopoverProps,\r\n\t\t...otherProps\r\n\t} = useBorderControlDropdown( props );\r\n\r\n\tconst { color, style } = border || {};\r\n\tconst colorObject = getColorObject( color, colors );\r\n\r\n\tconst toggleAriaLabel = getToggleAriaLabel(\r\n\t\tcolor,\r\n\t\tcolorObject,\r\n\t\tstyle,\r\n\t\tenableStyle\r\n\t);\r\n\r\n\tconst showResetButton = color || ( style && style !== 'none' );\r\n\tconst dropdownPosition = __experimentalIsRenderedInSidebar\r\n\t\t? 'bottom left'\r\n\t\t: undefined;\r\n\r\n\tconst renderToggle: DropdownComponentProps[ 'renderToggle' ] = ( {\r\n\t\tonToggle,\r\n\t} ) => (\r\n\t\t<Button\r\n\t\t\tonClick={ onToggle }\r\n\t\t\tvariant=\"tertiary\"\r\n\t\t\taria-label={ toggleAriaLabel }\r\n\t\t\ttooltipPosition={ dropdownPosition }\r\n\t\t\tlabel={ __( 'Border color and style picker' ) }\r\n\t\t\tshowTooltip\r\n\t\t\t__next40pxDefaultSize={ size === '__unstable-large' ? true : false }\r\n\t\t>\r\n\t\t\t<span className={ indicatorWrapperClassName }>\r\n\t\t\t\t<ColorIndicator\r\n\t\t\t\t\tclassName={ indicatorClassName }\r\n\t\t\t\t\tcolorValue={ color }\r\n\t\t\t\t/>\r\n\t\t\t</span>\r\n\t\t</Button>\r\n\t);\r\n\r\n\tconst renderContent: DropdownComponentProps[ 'renderContent' ] = ( {\r\n\t\tonClose,\r\n\t} ) => (\r\n\t\t<>\r\n\t\t\t<DropdownContentWrapper paddingSize=\"medium\">\r\n\t\t\t\t<VStack className={ popoverControlsClassName } spacing={ 6 }>\r\n\t\t\t\t\t{ showDropdownHeader ? (\r\n\t\t\t\t\t\t<HStack>\r\n\t\t\t\t\t\t\t<StyledLabel>{ __( 'Border color' ) }</StyledLabel>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tlabel={ __( 'Close border color' ) }\r\n\t\t\t\t\t\t\t\ticon={ closeSmall }\r\n\t\t\t\t\t\t\t\tonClick={ onClose }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</HStack>\r\n\t\t\t\t\t) : undefined }\r\n\t\t\t\t\t<ColorPalette\r\n\t\t\t\t\t\tclassName={ popoverContentClassName }\r\n\t\t\t\t\t\tvalue={ color }\r\n\t\t\t\t\t\tonChange={ onColorChange }\r\n\t\t\t\t\t\t{ ...{ colors, disableCustomColors } }\r\n\t\t\t\t\t\t__experimentalIsRenderedInSidebar={\r\n\t\t\t\t\t\t\t__experimentalIsRenderedInSidebar\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tclearable={ false }\r\n\t\t\t\t\t\tenableAlpha={ enableAlpha }\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{ enableStyle && isStyleSettable && (\r\n\t\t\t\t\t\t<BorderControlStylePicker\r\n\t\t\t\t\t\t\tlabel={ __( 'Style' ) }\r\n\t\t\t\t\t\t\tvalue={ style }\r\n\t\t\t\t\t\t\tonChange={ onStyleChange }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) }\r\n\t\t\t\t</VStack>\r\n\t\t\t</DropdownContentWrapper>\r\n\t\t\t{ showResetButton && (\r\n\t\t\t\t<DropdownContentWrapper paddingSize=\"none\">\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tclassName={ resetButtonClassName }\r\n\t\t\t\t\t\tvariant=\"tertiary\"\r\n\t\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\t\tonReset();\r\n\t\t\t\t\t\t\tonClose();\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ __( 'Reset' ) }\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DropdownContentWrapper>\r\n\t\t\t) }\r\n\t\t</>\r\n\t);\r\n\r\n\treturn (\r\n\t\t<Dropdown\r\n\t\t\trenderToggle={ renderToggle }\r\n\t\t\trenderContent={ renderContent }\r\n\t\t\tpopoverProps={ {\r\n\t\t\t\t...__unstablePopoverProps,\r\n\t\t\t} }\r\n\t\t\t{ ...otherProps }\r\n\t\t\tref={ forwardedRef }\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nconst ConnectedBorderControlDropdown = contextConnect(\r\n\tBorderControlDropdown,\r\n\t'BorderControlDropdown'\r\n);\r\n\r\nexport default ConnectedBorderControlDropdown;\r\n"],"mappings":"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","ignoreList":[]}