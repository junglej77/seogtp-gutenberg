{"version":3,"names":["StyleSheet","TouchableOpacity","Text","View","Platform","LongPressGestureHandler","State","Children","cloneElement","useCallback","usePreferredColorScheme","usePreferredColorSchemeStyle","Tooltip","Icon","style","jsx","_jsx","jsxs","_jsxs","isAndroid","OS","marginBottom","marginLeft","styles","create","container","flex","padding","justifyContent","alignItems","buttonInactive","flexDirection","fixedRatio","aspectRatio","buttonActive","borderRadius","subscriptInactive","color","fontWeight","fontSize","alignSelf","subscriptInactiveDark","subscriptActive","Button","props","children","onClick","onLongPress","disabled","hint","isPressed","ariaDisabled","subscript","testID","icon","iconSize","showTooltip","label","shortcut","tooltipPosition","isActiveStyle","customContainerStyles","hitSlop","preferredColorScheme","isDisabled","containerStyle","buttonActiveColorStyles","buttonViewStyle","opacity","backgroundColor","states","push","newChildren","map","child","colorScheme","shouldShowTooltip","Array","isArray","length","newIcon","size","longPressHandler","nativeEvent","state","ACTIVE","element","activeOpacity","accessible","accessibilityLabel","accessibilityStates","accessibilityRole","accessibilityHint","onPress","minDurationMs","maxDist","onHandlerStateChange","text","position","visible"],"sources":["@wordpress/components/src/button/index.native.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport {\r\n\tStyleSheet,\r\n\tTouchableOpacity,\r\n\tText,\r\n\tView,\r\n\tPlatform,\r\n} from 'react-native';\r\nimport { LongPressGestureHandler, State } from 'react-native-gesture-handler';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { Children, cloneElement, useCallback } from '@wordpress/element';\r\nimport {\r\n\tusePreferredColorScheme,\r\n\tusePreferredColorSchemeStyle,\r\n} from '@wordpress/compose';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport Tooltip from '../tooltip';\r\nimport Icon from '../icon';\r\nimport style from './style.scss';\r\n\r\nconst isAndroid = Platform.OS === 'android';\r\nconst marginBottom = isAndroid ? -0.5 : 0;\r\nconst marginLeft = -3;\r\n\r\nconst styles = StyleSheet.create( {\r\n\tcontainer: {\r\n\t\tflex: 1,\r\n\t\tpadding: 3,\r\n\t\tjustifyContent: 'center',\r\n\t\talignItems: 'center',\r\n\t},\r\n\tbuttonInactive: {\r\n\t\tflex: 1,\r\n\t\tflexDirection: 'row',\r\n\t\tjustifyContent: 'center',\r\n\t\talignItems: 'center',\r\n\t},\r\n\tfixedRatio: {\r\n\t\taspectRatio: 1,\r\n\t},\r\n\tbuttonActive: {\r\n\t\tflex: 1,\r\n\t\tflexDirection: 'row',\r\n\t\tjustifyContent: 'center',\r\n\t\talignItems: 'center',\r\n\t\tborderRadius: 6,\r\n\t},\r\n\tsubscriptInactive: {\r\n\t\tcolor: '#7b9ab1', // $toolbar-button.\r\n\t\tfontWeight: 'bold',\r\n\t\tfontSize: 13,\r\n\t\talignSelf: 'flex-end',\r\n\t\tmarginLeft,\r\n\t\tmarginBottom,\r\n\t},\r\n\tsubscriptInactiveDark: {\r\n\t\tcolor: '#a7aaad', // $gray_20.\r\n\t},\r\n\tsubscriptActive: {\r\n\t\tcolor: 'white',\r\n\t\tfontWeight: 'bold',\r\n\t\tfontSize: 13,\r\n\t\talignSelf: 'flex-end',\r\n\t\tmarginLeft,\r\n\t\tmarginBottom,\r\n\t},\r\n} );\r\n\r\nexport function Button( props ) {\r\n\tconst {\r\n\t\tchildren,\r\n\t\tonClick,\r\n\t\tonLongPress,\r\n\t\tdisabled,\r\n\t\thint,\r\n\t\tfixedRatio = true,\r\n\t\tisPressed,\r\n\t\t'aria-disabled': ariaDisabled,\r\n\t\t'data-subscript': subscript,\r\n\t\ttestID,\r\n\t\ticon,\r\n\t\ticonSize,\r\n\t\tshowTooltip,\r\n\t\tlabel,\r\n\t\tshortcut,\r\n\t\ttooltipPosition,\r\n\t\tisActiveStyle,\r\n\t\tcustomContainerStyles,\r\n\t\thitSlop,\r\n\t} = props;\r\n\tconst preferredColorScheme = usePreferredColorScheme();\r\n\r\n\tconst isDisabled = ariaDisabled || disabled;\r\n\r\n\tconst containerStyle = [\r\n\t\tstyles.container,\r\n\t\tcustomContainerStyles && { ...customContainerStyles },\r\n\t];\r\n\r\n\tconst buttonActiveColorStyles = usePreferredColorSchemeStyle(\r\n\t\tstyle[ 'components-button-light--active' ],\r\n\t\tstyle[ 'components-button-dark--active' ]\r\n\t);\r\n\r\n\tconst buttonViewStyle = {\r\n\t\topacity: isDisabled ? 0.3 : 1,\r\n\t\t...( fixedRatio && styles.fixedRatio ),\r\n\t\t...( isPressed ? styles.buttonActive : styles.buttonInactive ),\r\n\t\t...( isPressed ? buttonActiveColorStyles : {} ),\r\n\t\t...( isPressed &&\r\n\t\t\tisActiveStyle?.borderRadius && {\r\n\t\t\t\tborderRadius: isActiveStyle.borderRadius,\r\n\t\t\t} ),\r\n\t\t...( isActiveStyle?.backgroundColor && {\r\n\t\t\tbackgroundColor: isActiveStyle.backgroundColor,\r\n\t\t} ),\r\n\t};\r\n\r\n\tconst states = [];\r\n\tif ( isPressed ) {\r\n\t\tstates.push( 'selected' );\r\n\t}\r\n\r\n\tif ( isDisabled ) {\r\n\t\tstates.push( 'disabled' );\r\n\t}\r\n\r\n\tconst subscriptInactive = usePreferredColorSchemeStyle(\r\n\t\tstyles.subscriptInactive,\r\n\t\tstyles.subscriptInactiveDark\r\n\t);\r\n\r\n\tconst newChildren = Children.map( children, ( child ) => {\r\n\t\treturn child\r\n\t\t\t? cloneElement( child, {\r\n\t\t\t\t\tcolorScheme: preferredColorScheme,\r\n\t\t\t\t\tisPressed,\r\n\t\t\t  } )\r\n\t\t\t: child;\r\n\t} );\r\n\r\n\t// Should show the tooltip if...\r\n\tconst shouldShowTooltip =\r\n\t\t! isDisabled &&\r\n\t\t// An explicit tooltip is passed or...\r\n\t\t( ( showTooltip && label ) ||\r\n\t\t\t// There's a shortcut or...\r\n\t\t\tshortcut ||\r\n\t\t\t// There's a label and...\r\n\t\t\t( !! label &&\r\n\t\t\t\t// The children are empty and...\r\n\t\t\t\t( ! children ||\r\n\t\t\t\t\t( Array.isArray( children ) && ! children.length ) ) &&\r\n\t\t\t\t// The tooltip is not explicitly disabled.\r\n\t\t\t\tfalse !== showTooltip ) );\r\n\r\n\tconst newIcon = icon\r\n\t\t? cloneElement( <Icon icon={ icon } size={ iconSize } />, {\r\n\t\t\t\tisPressed,\r\n\t\t  } )\r\n\t\t: null;\r\n\r\n\tconst longPressHandler = useCallback(\r\n\t\t( { nativeEvent } ) => {\r\n\t\t\tif ( nativeEvent.state === State.ACTIVE && onLongPress ) {\r\n\t\t\t\tonLongPress();\r\n\t\t\t}\r\n\t\t},\r\n\t\t[ onLongPress ]\r\n\t);\r\n\r\n\tconst element = (\r\n\t\t<TouchableOpacity\r\n\t\t\tactiveOpacity={ 0.7 }\r\n\t\t\taccessible\r\n\t\t\taccessibilityLabel={ label }\r\n\t\t\taccessibilityStates={ states }\r\n\t\t\taccessibilityRole=\"button\"\r\n\t\t\taccessibilityHint={ hint }\r\n\t\t\tonPress={ onClick }\r\n\t\t\tstyle={ containerStyle }\r\n\t\t\tdisabled={ isDisabled }\r\n\t\t\ttestID={ testID }\r\n\t\t\thitSlop={ hitSlop }\r\n\t\t>\r\n\t\t\t<LongPressGestureHandler\r\n\t\t\t\tminDurationMs={ 500 }\r\n\t\t\t\tmaxDist={ 150 }\r\n\t\t\t\tonHandlerStateChange={ longPressHandler }\r\n\t\t\t>\r\n\t\t\t\t<View style={ buttonViewStyle }>\r\n\t\t\t\t\t<View style={ { flexDirection: 'row' } }>\r\n\t\t\t\t\t\t{ newIcon }\r\n\t\t\t\t\t\t{ newChildren }\r\n\t\t\t\t\t\t{ subscript && (\r\n\t\t\t\t\t\t\t<Text\r\n\t\t\t\t\t\t\t\tstyle={\r\n\t\t\t\t\t\t\t\t\tisPressed\r\n\t\t\t\t\t\t\t\t\t\t? styles.subscriptActive\r\n\t\t\t\t\t\t\t\t\t\t: subscriptInactive\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{ subscript }\r\n\t\t\t\t\t\t\t</Text>\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t</View>\r\n\t\t\t\t</View>\r\n\t\t\t</LongPressGestureHandler>\r\n\t\t</TouchableOpacity>\r\n\t);\r\n\r\n\tif ( ! shouldShowTooltip ) {\r\n\t\treturn element;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Tooltip\r\n\t\t\ttext={ label }\r\n\t\t\tshortcut={ shortcut }\r\n\t\t\tposition={ tooltipPosition }\r\n\t\t\tvisible={ showTooltip === true }\r\n\t\t>\r\n\t\t\t{ element }\r\n\t\t</Tooltip>\r\n\t);\r\n}\r\n\r\nexport default Button;\r\n"],"mappings":"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","ignoreList":[]}