{"version":3,"names":["ScrollView","TouchableWithoutFeedback","View","Animated","Easing","Dimensions","Platform","Text","__","sprintf","useRef","useEffect","usePreferredColorSchemeStyle","styles","ColorIndicator","colorsUtils","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ANIMATION_DURATION","contentWidth","scrollPosition","customIndicatorWidth","ColorPalette","enableCustomColor","setColor","activeColor","isGradientColor","defaultSettings","currentSegment","onCustomPress","shouldEnableBottomSheetScroll","shouldShowCustomIndicatorOption","shouldShowCustomLabel","shouldShowCustomVerticalSeparator","customColorIndicatorStyles","customIndicatorWrapperStyles","label","_defaultSettings$colo","_defaultSettings$grad","_defaultSettings$allC","_defaultSettings$allG","customSwatchGradients","scrollViewRef","isIOS","OS","isGradientSegment","segments","scale","Value","current","opacity","delayedScrollRef","mergedColors","Set","colors","map","color","mergedGradients","gradients","gradient","allAvailableColors","allColors","allAvailableGradients","allGradients","customIndicatorColor","isCustomGradientColor","isSelectedCustom","shouldShowCustomIndicator","accessibilityHint","customText","scrollToEndWithDelay","scrollTo","x","y","isWithinColors","includes","isSelected","timingAnimation","property","toValue","timing","duration","easing","ease","useNativeDriver","performAnimation","setValue","parallel","start","scaleInterpolation","interpolate","inputRange","outputRange","deselectCustomGradient","width","get","isVisible","getColorGradientName","value","fallbackName","foundColorName","find","name","onColorPress","onContentSizeChange","setTimeout","scrollToEnd","clearTimeout","onCustomIndicatorLayout","nativeEvent","layout","onScroll","contentOffset","verticalSeparatorStyle","verticalSeparator","verticalSeparatorDark","customTextStyle","customTextAndroid","customTextDark","customIndicatorWrapperStyle","customIndicatorWrapper","children","accessibilityRole","style","headerText","contentContainerStyle","contentContainer","horizontal","showsHorizontalScrollIndicator","keyboardShouldPersistTaps","disableScrollViewPanResponder","scrollEventThrottle","onScrollBeginDrag","onScrollEndDrag","ref","testID","scaleValue","colorName","onPress","accessibilityState","selected","accessibilityLabel","transform","colorIndicator","onLayout","withCustomPicker","toUpperCase"],"sources":["@wordpress/components/src/color-palette/index.native.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport {\r\n\tScrollView,\r\n\tTouchableWithoutFeedback,\r\n\tView,\r\n\tAnimated,\r\n\tEasing,\r\n\tDimensions,\r\n\tPlatform,\r\n\tText,\r\n} from 'react-native';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { useRef, useEffect } from '@wordpress/element';\r\nimport { usePreferredColorSchemeStyle } from '@wordpress/compose';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport styles from './style.scss';\r\nimport ColorIndicator from '../color-indicator';\r\nimport { colorsUtils } from '../mobile/color-settings/utils';\r\n\r\nconst ANIMATION_DURATION = 200;\r\n\r\nlet contentWidth = 0;\r\nlet scrollPosition = 0;\r\nlet customIndicatorWidth = 0;\r\n\r\nfunction ColorPalette( {\r\n\tenableCustomColor = false,\r\n\tsetColor,\r\n\tactiveColor,\r\n\tisGradientColor,\r\n\tdefaultSettings,\r\n\tcurrentSegment,\r\n\tonCustomPress,\r\n\tshouldEnableBottomSheetScroll,\r\n\tshouldShowCustomIndicatorOption = true,\r\n\tshouldShowCustomLabel = true,\r\n\tshouldShowCustomVerticalSeparator = true,\r\n\tcustomColorIndicatorStyles,\r\n\tcustomIndicatorWrapperStyles,\r\n\tlabel,\r\n} ) {\r\n\tconst customSwatchGradients = [\r\n\t\t'linear-gradient(120deg, rgba(255,0,0,.8) 0%, rgba(255,255,255,1) 70.71%)',\r\n\t\t'linear-gradient(240deg, rgba(0,255,0,.8) 0%, rgba(0,255,0,0) 70.71%)',\r\n\t\t'linear-gradient(360deg, rgba(0,0,255,.8) 0%, rgba(0,0,255,0) 70.71%)',\r\n\t];\r\n\r\n\tconst scrollViewRef = useRef();\r\n\tconst isIOS = Platform.OS === 'ios';\r\n\r\n\tconst isGradientSegment = currentSegment === colorsUtils.segments[ 1 ];\r\n\r\n\tconst scale = useRef( new Animated.Value( 1 ) ).current;\r\n\tconst opacity = useRef( new Animated.Value( 1 ) ).current;\r\n\tconst delayedScrollRef = useRef();\r\n\r\n\tconst mergedColors = [\r\n\t\t...new Set(\r\n\t\t\t( defaultSettings.colors ?? [] ).map( ( { color } ) => color )\r\n\t\t),\r\n\t];\r\n\tconst mergedGradients = [\r\n\t\t...new Set(\r\n\t\t\t( defaultSettings.gradients ?? [] ).map(\r\n\t\t\t\t( { gradient } ) => gradient\r\n\t\t\t)\r\n\t\t),\r\n\t];\r\n\tconst allAvailableColors = [\r\n\t\t...new Set(\r\n\t\t\t( defaultSettings.allColors ?? [] ).map( ( { color } ) => color )\r\n\t\t),\r\n\t];\r\n\tconst allAvailableGradients = [\r\n\t\t...new Set(\r\n\t\t\t( defaultSettings.allGradients ?? [] ).map(\r\n\t\t\t\t( { gradient } ) => gradient\r\n\t\t\t)\r\n\t\t),\r\n\t];\r\n\r\n\tconst colors = isGradientSegment ? mergedGradients : mergedColors;\r\n\tconst allColors = isGradientSegment\r\n\t\t? allAvailableGradients\r\n\t\t: allAvailableColors;\r\n\r\n\tconst customIndicatorColor = isGradientSegment\r\n\t\t? activeColor\r\n\t\t: customSwatchGradients;\r\n\tconst isCustomGradientColor = isGradientColor && isSelectedCustom();\r\n\tconst shouldShowCustomIndicator =\r\n\t\tenableCustomColor &&\r\n\t\tshouldShowCustomIndicatorOption &&\r\n\t\t( ! isGradientSegment || isCustomGradientColor );\r\n\r\n\tconst accessibilityHint = isGradientSegment\r\n\t\t? __( 'Navigates to customize the gradient' )\r\n\t\t: __( 'Navigates to custom color picker' );\r\n\tconst customText = __( 'Custom' );\r\n\r\n\tuseEffect( () => {\r\n\t\tif ( scrollViewRef.current ) {\r\n\t\t\tif ( isSelectedCustom() ) {\r\n\t\t\t\tscrollToEndWithDelay();\r\n\t\t\t} else {\r\n\t\t\t\tscrollViewRef.current.scrollTo( { x: 0, y: 0 } );\r\n\t\t\t}\r\n\t\t}\r\n\t\t// Temporarily disabling exhuastive-deps until the component can be refactored and updated safely.\r\n\t\t// Please see https://github.com/WordPress/gutenberg/pull/41253 for discussion and details.\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [ currentSegment ] );\r\n\r\n\tfunction isSelectedCustom() {\r\n\t\tconst isWithinColors =\r\n\t\t\tactiveColor && allColors?.includes( activeColor );\r\n\t\tif ( enableCustomColor && activeColor ) {\r\n\t\t\tif ( isGradientSegment ) {\r\n\t\t\t\treturn isGradientColor && ! isWithinColors;\r\n\t\t\t}\r\n\t\t\treturn ! isGradientColor && ! isWithinColors;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tfunction isSelected( color ) {\r\n\t\treturn ! isSelectedCustom() && activeColor === color;\r\n\t}\r\n\r\n\tfunction timingAnimation( property, toValue ) {\r\n\t\treturn Animated.timing( property, {\r\n\t\t\ttoValue,\r\n\t\t\tduration: ANIMATION_DURATION,\r\n\t\t\teasing: Easing.ease,\r\n\t\t\tuseNativeDriver: true,\r\n\t\t} );\r\n\t}\r\n\r\n\tfunction performAnimation( color ) {\r\n\t\tif ( ! isSelected( color ) ) {\r\n\t\t\topacity.setValue( 0 );\r\n\t\t}\r\n\r\n\t\tAnimated.parallel( [\r\n\t\t\ttimingAnimation( scale, 2 ),\r\n\t\t\ttimingAnimation( opacity, 1 ),\r\n\t\t] ).start( () => {\r\n\t\t\topacity.setValue( 1 );\r\n\t\t\tscale.setValue( 1 );\r\n\t\t} );\r\n\t}\r\n\r\n\tconst scaleInterpolation = scale.interpolate( {\r\n\t\tinputRange: [ 1, 1.5, 2 ],\r\n\t\toutputRange: [ 1, 0.7, 1 ],\r\n\t} );\r\n\r\n\tfunction deselectCustomGradient() {\r\n\t\tconst { width } = Dimensions.get( 'window' );\r\n\t\tconst isVisible =\r\n\t\t\tcontentWidth - scrollPosition - customIndicatorWidth < width;\r\n\r\n\t\tif ( isCustomGradientColor ) {\r\n\t\t\tif ( ! isIOS ) {\r\n\t\t\t\t// Scroll position on Android doesn't adjust automatically when removing the last item from the horizontal list.\r\n\t\t\t\t// https://github.com/facebook/react-native/issues/27504\r\n\t\t\t\t// Workaround: Force the scroll when deselecting custom gradient color and when custom indicator is visible on layout.\r\n\t\t\t\tif (\r\n\t\t\t\t\tisCustomGradientColor &&\r\n\t\t\t\t\tisVisible &&\r\n\t\t\t\t\tscrollViewRef.current\r\n\t\t\t\t) {\r\n\t\t\t\t\tscrollViewRef.current.scrollTo( {\r\n\t\t\t\t\t\tx: scrollPosition - customIndicatorWidth,\r\n\t\t\t\t\t} );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getColorGradientName( value ) {\r\n\t\tconst fallbackName = sprintf(\r\n\t\t\t/* translators: %s: the hex color value */\r\n\t\t\t__( 'Unlabeled color. %s' ),\r\n\t\t\tvalue\r\n\t\t);\r\n\t\tconst foundColorName = isGradientSegment\r\n\t\t\t? defaultSettings.gradients?.find(\r\n\t\t\t\t\t( gradient ) => gradient.gradient === value\r\n\t\t\t  )\r\n\t\t\t: defaultSettings.allColors?.find(\r\n\t\t\t\t\t( color ) => color.color === value\r\n\t\t\t  );\r\n\t\treturn foundColorName ? foundColorName?.name : fallbackName;\r\n\t}\r\n\r\n\tfunction onColorPress( color ) {\r\n\t\tdeselectCustomGradient();\r\n\t\tperformAnimation( color );\r\n\t\tsetColor( color );\r\n\t}\r\n\r\n\tfunction onContentSizeChange( width ) {\r\n\t\tcontentWidth = width;\r\n\t\tif ( isSelectedCustom() && scrollViewRef.current ) {\r\n\t\t\tscrollToEndWithDelay();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction scrollToEndWithDelay() {\r\n\t\tdelayedScrollRef.current = setTimeout( () => {\r\n\t\t\tscrollViewRef?.current.scrollToEnd();\r\n\t\t}, ANIMATION_DURATION );\r\n\t\treturn () => {\r\n\t\t\tclearTimeout( delayedScrollRef.current );\r\n\t\t};\r\n\t}\r\n\r\n\tfunction onCustomIndicatorLayout( { nativeEvent } ) {\r\n\t\tconst { width } = nativeEvent.layout;\r\n\t\tif ( width !== customIndicatorWidth ) {\r\n\t\t\tcustomIndicatorWidth = width;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction onScroll( { nativeEvent } ) {\r\n\t\tscrollPosition = nativeEvent.contentOffset.x;\r\n\t}\r\n\r\n\tconst verticalSeparatorStyle = usePreferredColorSchemeStyle(\r\n\t\tstyles.verticalSeparator,\r\n\t\tstyles.verticalSeparatorDark\r\n\t);\r\n\r\n\tconst customTextStyle = usePreferredColorSchemeStyle(\r\n\t\t[ styles.customText, ! isIOS && styles.customTextAndroid ],\r\n\t\tstyles.customTextDark\r\n\t);\r\n\r\n\tconst customIndicatorWrapperStyle = [\r\n\t\tstyles.customIndicatorWrapper,\r\n\t\tcustomIndicatorWrapperStyles,\r\n\t];\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ label && (\r\n\t\t\t\t<Text accessibilityRole=\"header\" style={ styles.headerText }>\r\n\t\t\t\t\t{ label }\r\n\t\t\t\t</Text>\r\n\t\t\t) }\r\n\r\n\t\t\t<ScrollView\r\n\t\t\t\tcontentContainerStyle={ styles.contentContainer }\r\n\t\t\t\thorizontal\r\n\t\t\t\tshowsHorizontalScrollIndicator={ false }\r\n\t\t\t\tkeyboardShouldPersistTaps=\"always\"\r\n\t\t\t\tdisableScrollViewPanResponder\r\n\t\t\t\tscrollEventThrottle={ 16 }\r\n\t\t\t\tonScroll={ onScroll }\r\n\t\t\t\tonContentSizeChange={ onContentSizeChange }\r\n\t\t\t\tonScrollBeginDrag={ () =>\r\n\t\t\t\t\tshouldEnableBottomSheetScroll( false )\r\n\t\t\t\t}\r\n\t\t\t\tonScrollEndDrag={ () => shouldEnableBottomSheetScroll( true ) }\r\n\t\t\t\tref={ scrollViewRef }\r\n\t\t\t\ttestID={ `color-palette${ label ? '-' + label : '' }` }\r\n\t\t\t>\r\n\t\t\t\t{ colors.map( ( color ) => {\r\n\t\t\t\t\tconst scaleValue = isSelected( color )\r\n\t\t\t\t\t\t? scaleInterpolation\r\n\t\t\t\t\t\t: 1;\r\n\t\t\t\t\tconst colorName = getColorGradientName( color );\r\n\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<View key={ `${ color }-${ isSelected( color ) }` }>\r\n\t\t\t\t\t\t\t<TouchableWithoutFeedback\r\n\t\t\t\t\t\t\t\tonPress={ () => onColorPress( color ) }\r\n\t\t\t\t\t\t\t\taccessibilityRole=\"button\"\r\n\t\t\t\t\t\t\t\taccessibilityState={ {\r\n\t\t\t\t\t\t\t\t\tselected: isSelected( color ),\r\n\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t\taccessibilityHint={ color }\r\n\t\t\t\t\t\t\t\taccessibilityLabel={ colorName }\r\n\t\t\t\t\t\t\t\ttestID={ color }\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Animated.View\r\n\t\t\t\t\t\t\t\t\tstyle={ {\r\n\t\t\t\t\t\t\t\t\t\ttransform: [\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tscale: scaleValue,\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<ColorIndicator\r\n\t\t\t\t\t\t\t\t\t\tcolor={ color }\r\n\t\t\t\t\t\t\t\t\t\tisSelected={ isSelected( color ) }\r\n\t\t\t\t\t\t\t\t\t\topacity={ opacity }\r\n\t\t\t\t\t\t\t\t\t\tstyle={ [\r\n\t\t\t\t\t\t\t\t\t\t\tstyles.colorIndicator,\r\n\t\t\t\t\t\t\t\t\t\t\tcustomColorIndicatorStyles,\r\n\t\t\t\t\t\t\t\t\t\t] }\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Animated.View>\r\n\t\t\t\t\t\t\t</TouchableWithoutFeedback>\r\n\t\t\t\t\t\t</View>\r\n\t\t\t\t\t);\r\n\t\t\t\t} ) }\r\n\t\t\t\t{ shouldShowCustomIndicator && (\r\n\t\t\t\t\t<View\r\n\t\t\t\t\t\tstyle={ customIndicatorWrapperStyle }\r\n\t\t\t\t\t\tonLayout={ onCustomIndicatorLayout }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ shouldShowCustomVerticalSeparator && (\r\n\t\t\t\t\t\t\t<View style={ verticalSeparatorStyle } />\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t<TouchableWithoutFeedback\r\n\t\t\t\t\t\t\tonPress={ onCustomPress }\r\n\t\t\t\t\t\t\taccessibilityRole=\"button\"\r\n\t\t\t\t\t\t\taccessibilityState={ {\r\n\t\t\t\t\t\t\t\tselected: isSelectedCustom(),\r\n\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\taccessibilityHint={ accessibilityHint }\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<View style={ customIndicatorWrapperStyle }>\r\n\t\t\t\t\t\t\t\t<ColorIndicator\r\n\t\t\t\t\t\t\t\t\twithCustomPicker={ ! isGradientSegment }\r\n\t\t\t\t\t\t\t\t\tcolor={ customIndicatorColor }\r\n\t\t\t\t\t\t\t\t\tisSelected={ isSelectedCustom() }\r\n\t\t\t\t\t\t\t\t\tstyle={ [\r\n\t\t\t\t\t\t\t\t\t\tstyles.colorIndicator,\r\n\t\t\t\t\t\t\t\t\t\tcustomColorIndicatorStyles,\r\n\t\t\t\t\t\t\t\t\t] }\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t{ shouldShowCustomLabel && (\r\n\t\t\t\t\t\t\t\t\t<Text style={ customTextStyle }>\r\n\t\t\t\t\t\t\t\t\t\t{ isIOS\r\n\t\t\t\t\t\t\t\t\t\t\t? customText\r\n\t\t\t\t\t\t\t\t\t\t\t: customText.toUpperCase() }\r\n\t\t\t\t\t\t\t\t\t</Text>\r\n\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t</View>\r\n\t\t\t\t\t\t</TouchableWithoutFeedback>\r\n\t\t\t\t\t</View>\r\n\t\t\t\t) }\r\n\t\t\t</ScrollView>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default ColorPalette;\r\n"],"mappings":"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","ignoreList":[]}