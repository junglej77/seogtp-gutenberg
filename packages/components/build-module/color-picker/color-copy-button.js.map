{"version":3,"names":["useCopyToClipboard","useState","useEffect","useRef","copy","__","CopyButton","Tooltip","jsx","_jsx","ColorCopyButton","props","color","colorType","copiedColor","setCopiedColor","copyTimerRef","copyRef","toHslString","toRgbString","toHex","current","clearTimeout","setTimeout","undefined","delay","hideOnClick","text","children","size","ref","icon","showTooltip"],"sources":["@wordpress/components/src/color-picker/color-copy-button.tsx"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useCopyToClipboard } from '@wordpress/compose';\r\nimport { useState, useEffect, useRef } from '@wordpress/element';\r\nimport { copy } from '@wordpress/icons';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { CopyButton } from './styles';\r\nimport Tooltip from '../tooltip';\r\n\r\nimport type { ColorCopyButtonProps } from './types';\r\n\r\nexport const ColorCopyButton = ( props: ColorCopyButtonProps ) => {\r\n\tconst { color, colorType } = props;\r\n\tconst [ copiedColor, setCopiedColor ] = useState< string | null >( null );\r\n\tconst copyTimerRef = useRef<\r\n\t\tReturnType< typeof setTimeout > | undefined\r\n\t>();\r\n\tconst copyRef = useCopyToClipboard< HTMLDivElement >(\r\n\t\t() => {\r\n\t\t\tswitch ( colorType ) {\r\n\t\t\t\tcase 'hsl': {\r\n\t\t\t\t\treturn color.toHslString();\r\n\t\t\t\t}\r\n\t\t\t\tcase 'rgb': {\r\n\t\t\t\t\treturn color.toRgbString();\r\n\t\t\t\t}\r\n\t\t\t\tdefault:\r\n\t\t\t\tcase 'hex': {\r\n\t\t\t\t\treturn color.toHex();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t() => {\r\n\t\t\tif ( copyTimerRef.current ) {\r\n\t\t\t\tclearTimeout( copyTimerRef.current );\r\n\t\t\t}\r\n\t\t\tsetCopiedColor( color.toHex() );\r\n\t\t\tcopyTimerRef.current = setTimeout( () => {\r\n\t\t\t\tsetCopiedColor( null );\r\n\t\t\t\tcopyTimerRef.current = undefined;\r\n\t\t\t}, 3000 );\r\n\t\t}\r\n\t);\r\n\tuseEffect( () => {\r\n\t\t// Clear copyTimerRef on component unmount.\r\n\t\treturn () => {\r\n\t\t\tif ( copyTimerRef.current ) {\r\n\t\t\t\tclearTimeout( copyTimerRef.current );\r\n\t\t\t}\r\n\t\t};\r\n\t}, [] );\r\n\r\n\treturn (\r\n\t\t<Tooltip\r\n\t\t\tdelay={ 0 }\r\n\t\t\thideOnClick={ false }\r\n\t\t\ttext={\r\n\t\t\t\tcopiedColor === color.toHex() ? __( 'Copied!' ) : __( 'Copy' )\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t<CopyButton\r\n\t\t\t\tsize=\"small\"\r\n\t\t\t\tref={ copyRef }\r\n\t\t\t\ticon={ copy }\r\n\t\t\t\tshowTooltip={ false }\r\n\t\t\t/>\r\n\t\t</Tooltip>\r\n\t);\r\n};\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,kBAAkB,QAAQ,oBAAoB;AACvD,SAASC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,oBAAoB;AAChE,SAASC,IAAI,QAAQ,kBAAkB;AACvC,SAASC,EAAE,QAAQ,iBAAiB;;AAEpC;AACA;AACA;AACA,SAASC,UAAU,QAAQ,UAAU;AACrC,OAAOC,OAAO,MAAM,YAAY;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAIjC,OAAO,MAAMC,eAAe,GAAKC,KAA2B,IAAM;EACjE,MAAM;IAAEC,KAAK;IAAEC;EAAU,CAAC,GAAGF,KAAK;EAClC,MAAM,CAAEG,WAAW,EAAEC,cAAc,CAAE,GAAGd,QAAQ,CAAmB,IAAK,CAAC;EACzE,MAAMe,YAAY,GAAGb,MAAM,CAEzB,CAAC;EACH,MAAMc,OAAO,GAAGjB,kBAAkB,CACjC,MAAM;IACL,QAASa,SAAS;MACjB,KAAK,KAAK;QAAE;UACX,OAAOD,KAAK,CAACM,WAAW,CAAC,CAAC;QAC3B;MACA,KAAK,KAAK;QAAE;UACX,OAAON,KAAK,CAACO,WAAW,CAAC,CAAC;QAC3B;MACA;MACA,KAAK,KAAK;QAAE;UACX,OAAOP,KAAK,CAACQ,KAAK,CAAC,CAAC;QACrB;IACD;EACD,CAAC,EACD,MAAM;IACL,IAAKJ,YAAY,CAACK,OAAO,EAAG;MAC3BC,YAAY,CAAEN,YAAY,CAACK,OAAQ,CAAC;IACrC;IACAN,cAAc,CAAEH,KAAK,CAACQ,KAAK,CAAC,CAAE,CAAC;IAC/BJ,YAAY,CAACK,OAAO,GAAGE,UAAU,CAAE,MAAM;MACxCR,cAAc,CAAE,IAAK,CAAC;MACtBC,YAAY,CAACK,OAAO,GAAGG,SAAS;IACjC,CAAC,EAAE,IAAK,CAAC;EACV,CACD,CAAC;EACDtB,SAAS,CAAE,MAAM;IAChB;IACA,OAAO,MAAM;MACZ,IAAKc,YAAY,CAACK,OAAO,EAAG;QAC3BC,YAAY,CAAEN,YAAY,CAACK,OAAQ,CAAC;MACrC;IACD,CAAC;EACF,CAAC,EAAE,EAAG,CAAC;EAEP,oBACCZ,IAAA,CAACF,OAAO;IACPkB,KAAK,EAAG,CAAG;IACXC,WAAW,EAAG,KAAO;IACrBC,IAAI,EACHb,WAAW,KAAKF,KAAK,CAACQ,KAAK,CAAC,CAAC,GAAGf,EAAE,CAAE,SAAU,CAAC,GAAGA,EAAE,CAAE,MAAO,CAC7D;IAAAuB,QAAA,eAEDnB,IAAA,CAACH,UAAU;MACVuB,IAAI,EAAC,OAAO;MACZC,GAAG,EAAGb,OAAS;MACfc,IAAI,EAAG3B,IAAM;MACb4B,WAAW,EAAG;IAAO,CACrB;EAAC,CACM,CAAC;AAEZ,CAAC","ignoreList":[]}