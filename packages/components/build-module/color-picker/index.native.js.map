{"version":3,"names":["View","Text","TouchableWithoutFeedback","Platform","colord","extend","namesPlugin","useState","useEffect","__","usePreferredColorSchemeStyle","Icon","check","close","styles","HsvColorPicker","BottomSheet","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ColorPicker","shouldEnableBottomSheetScroll","shouldEnableBottomSheetMaxHeight","isBottomSheetContentScrolling","setColor","activeColor","isGradientColor","onNavigationBack","onHandleClosingBottomSheet","onBottomSheetClosed","onHandleHardwareButtonPress","bottomLabelText","isIOS","OS","hitSlop","top","bottom","left","right","h","initH","s","initS","v","initV","toHsv","hue","setHue","sat","setSaturation","val","setValue","savedColor","paddingLeft","spacing","height","pickerHeight","borderRadius","picker","pickerPointerSize","pickerPointer","pickerWidth","getWidth","applyButtonStyle","applyButton","applyButtonDark","cancelButtonStyle","cancelButton","cancelButtonDark","colorTextStyle","colorText","colorTextDark","selectColorTextStyle","selectColorText","selectColorTextDark","footerStyle","footer","footerDark","combineToHex","toHex","currentColor","updateColor","saturation","value","undefined","onButtonPress","action","children","huePickerHue","onHuePickerDragMove","onHuePickerPress","satValPickerHue","satValPickerSaturation","satValPickerValue","onSatValPickerDragMove","onSatValPickerPress","onSatValPickerDragStart","onSatValPickerDragEnd","onHuePickerDragStart","onHuePickerDragEnd","huePickerBarWidth","huePickerBarHeight","satValPickerSize","width","satValPickerSliderSize","satValPickerBorderRadius","huePickerBorderRadius","style","onPress","icon","size","selectable","toUpperCase"],"sources":["@wordpress/components/src/color-picker/index.native.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport { View, Text, TouchableWithoutFeedback, Platform } from 'react-native';\r\nimport { colord, extend } from 'colord';\r\nimport namesPlugin from 'colord/plugins/names';\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useState, useEffect } from '@wordpress/element';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { usePreferredColorSchemeStyle } from '@wordpress/compose';\r\nimport { Icon, check, close } from '@wordpress/icons';\r\n/**\r\n * Internal dependencies\r\n */\r\nimport styles from './style.scss';\r\nimport HsvColorPicker from './hsv-color-picker.native.js';\r\nimport BottomSheet from '../mobile/bottom-sheet';\r\n\r\nextend( [ namesPlugin ] );\r\n\r\nfunction ColorPicker( {\r\n\tshouldEnableBottomSheetScroll,\r\n\tshouldEnableBottomSheetMaxHeight,\r\n\tisBottomSheetContentScrolling,\r\n\tsetColor,\r\n\tactiveColor,\r\n\tisGradientColor,\r\n\tonNavigationBack,\r\n\tonHandleClosingBottomSheet,\r\n\tonBottomSheetClosed,\r\n\tonHandleHardwareButtonPress,\r\n\tbottomLabelText,\r\n} ) {\r\n\tconst isIOS = Platform.OS === 'ios';\r\n\tconst hitSlop = { top: 22, bottom: 22, left: 22, right: 22 };\r\n\tconst {\r\n\t\th: initH,\r\n\t\ts: initS,\r\n\t\tv: initV,\r\n\t} = ! isGradientColor && activeColor\r\n\t\t? colord( activeColor ).toHsv()\r\n\t\t: { h: 0, s: 50, v: 50 };\r\n\tconst [ hue, setHue ] = useState( initH );\r\n\tconst [ sat, setSaturation ] = useState( initS / 100 );\r\n\tconst [ val, setValue ] = useState( initV / 100 );\r\n\tconst [ savedColor ] = useState( activeColor );\r\n\r\n\tconst {\r\n\t\tpaddingLeft: spacing,\r\n\t\theight: pickerHeight,\r\n\t\tborderRadius,\r\n\t} = styles.picker;\r\n\tconst { height: pickerPointerSize } = styles.pickerPointer;\r\n\tconst pickerWidth = BottomSheet.getWidth() - 2 * spacing;\r\n\r\n\tconst applyButtonStyle = usePreferredColorSchemeStyle(\r\n\t\tstyles.applyButton,\r\n\t\tstyles.applyButtonDark\r\n\t);\r\n\tconst cancelButtonStyle = usePreferredColorSchemeStyle(\r\n\t\tstyles.cancelButton,\r\n\t\tstyles.cancelButtonDark\r\n\t);\r\n\tconst colorTextStyle = usePreferredColorSchemeStyle(\r\n\t\tstyles.colorText,\r\n\t\tstyles.colorTextDark\r\n\t);\r\n\tconst selectColorTextStyle = usePreferredColorSchemeStyle(\r\n\t\tstyles.selectColorText,\r\n\t\tstyles.selectColorTextDark\r\n\t);\r\n\tconst footerStyle = usePreferredColorSchemeStyle(\r\n\t\tstyles.footer,\r\n\t\tstyles.footerDark\r\n\t);\r\n\r\n\tconst combineToHex = ( h = hue, s = sat, v = val ) =>\r\n\t\tcolord( { h, s: s * 100, v: v * 100 } ).toHex();\r\n\r\n\tconst currentColor = combineToHex();\r\n\r\n\tconst updateColor = ( { hue: h, saturation: s, value: v } ) => {\r\n\t\tif ( h !== undefined ) {\r\n\t\t\tsetHue( h );\r\n\t\t}\r\n\t\tif ( s !== undefined ) {\r\n\t\t\tsetSaturation( s );\r\n\t\t}\r\n\t\tif ( v !== undefined ) {\r\n\t\t\tsetValue( v );\r\n\t\t}\r\n\t\tsetColor( combineToHex( h, s, v ) );\r\n\t};\r\n\r\n\tuseEffect( () => {\r\n\t\tshouldEnableBottomSheetMaxHeight( false );\r\n\t\tonHandleClosingBottomSheet( () => {\r\n\t\t\tif ( savedColor ) {\r\n\t\t\t\tsetColor( savedColor );\r\n\t\t\t}\r\n\t\t\tif ( onBottomSheetClosed ) {\r\n\t\t\t\tonBottomSheetClosed();\r\n\t\t\t}\r\n\t\t} );\r\n\t\tif ( onHandleHardwareButtonPress ) {\r\n\t\t\tonHandleHardwareButtonPress( onButtonPress );\r\n\t\t}\r\n\t\t// TODO: Revisit this to discover if there's a good reason for omitting\r\n\t\t// the hookâ€™s dependencies and running it a single time. Ideally there\r\n\t\t// may be a way to refactor and obviate the disabled lint rule. If not,\r\n\t\t// this comment should be replaced by one that explains the reasoning.\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [] );\r\n\r\n\tfunction onButtonPress( action ) {\r\n\t\tonNavigationBack();\r\n\t\tonHandleClosingBottomSheet( null );\r\n\t\tshouldEnableBottomSheetMaxHeight( true );\r\n\t\tsetColor( action === 'apply' ? currentColor : savedColor );\r\n\t\tif ( onBottomSheetClosed ) {\r\n\t\t\tonBottomSheetClosed();\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<HsvColorPicker\r\n\t\t\t\thuePickerHue={ hue }\r\n\t\t\t\tcurrentColor={ currentColor }\r\n\t\t\t\tonHuePickerDragMove={ updateColor }\r\n\t\t\t\tonHuePickerPress={\r\n\t\t\t\t\t! isBottomSheetContentScrolling && updateColor\r\n\t\t\t\t}\r\n\t\t\t\tsatValPickerHue={ hue }\r\n\t\t\t\tsatValPickerSaturation={ sat }\r\n\t\t\t\tsatValPickerValue={ val }\r\n\t\t\t\tonSatValPickerDragMove={ updateColor }\r\n\t\t\t\tonSatValPickerPress={\r\n\t\t\t\t\t! isBottomSheetContentScrolling && updateColor\r\n\t\t\t\t}\r\n\t\t\t\tonSatValPickerDragStart={ () => {\r\n\t\t\t\t\tshouldEnableBottomSheetScroll( false );\r\n\t\t\t\t} }\r\n\t\t\t\tonSatValPickerDragEnd={ () =>\r\n\t\t\t\t\tshouldEnableBottomSheetScroll( true )\r\n\t\t\t\t}\r\n\t\t\t\tonHuePickerDragStart={ () =>\r\n\t\t\t\t\tshouldEnableBottomSheetScroll( false )\r\n\t\t\t\t}\r\n\t\t\t\tonHuePickerDragEnd={ () =>\r\n\t\t\t\t\tshouldEnableBottomSheetScroll( true )\r\n\t\t\t\t}\r\n\t\t\t\thuePickerBarWidth={ pickerWidth }\r\n\t\t\t\thuePickerBarHeight={ pickerPointerSize / 2 }\r\n\t\t\t\tsatValPickerSize={ {\r\n\t\t\t\t\twidth: pickerWidth,\r\n\t\t\t\t\theight: pickerHeight,\r\n\t\t\t\t} }\r\n\t\t\t\tsatValPickerSliderSize={ pickerPointerSize * 2 }\r\n\t\t\t\tsatValPickerBorderRadius={ borderRadius }\r\n\t\t\t\thuePickerBorderRadius={ borderRadius }\r\n\t\t\t/>\r\n\t\t\t<View style={ footerStyle }>\r\n\t\t\t\t<TouchableWithoutFeedback\r\n\t\t\t\t\tonPress={ () => onButtonPress( 'cancel' ) }\r\n\t\t\t\t\thitSlop={ hitSlop }\r\n\t\t\t\t>\r\n\t\t\t\t\t<View>\r\n\t\t\t\t\t\t{ isIOS ? (\r\n\t\t\t\t\t\t\t<Text style={ cancelButtonStyle }>\r\n\t\t\t\t\t\t\t\t{ __( 'Cancel' ) }\r\n\t\t\t\t\t\t\t</Text>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\ticon={ close }\r\n\t\t\t\t\t\t\t\tsize={ 24 }\r\n\t\t\t\t\t\t\t\tstyle={ cancelButtonStyle }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t</View>\r\n\t\t\t\t</TouchableWithoutFeedback>\r\n\t\t\t\t{ bottomLabelText ? (\r\n\t\t\t\t\t<Text style={ selectColorTextStyle }>\r\n\t\t\t\t\t\t{ bottomLabelText }\r\n\t\t\t\t\t</Text>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Text style={ colorTextStyle } selectable>\r\n\t\t\t\t\t\t{ currentColor.toUpperCase() }\r\n\t\t\t\t\t</Text>\r\n\t\t\t\t) }\r\n\t\t\t\t<TouchableWithoutFeedback\r\n\t\t\t\t\tonPress={ () => onButtonPress( 'apply' ) }\r\n\t\t\t\t\thitSlop={ hitSlop }\r\n\t\t\t\t>\r\n\t\t\t\t\t<View>\r\n\t\t\t\t\t\t{ isIOS ? (\r\n\t\t\t\t\t\t\t<Text style={ applyButtonStyle }>\r\n\t\t\t\t\t\t\t\t{ __( 'Apply' ) }\r\n\t\t\t\t\t\t\t</Text>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\ticon={ check }\r\n\t\t\t\t\t\t\t\tsize={ 24 }\r\n\t\t\t\t\t\t\t\tstyle={ applyButtonStyle }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t</View>\r\n\t\t\t\t</TouchableWithoutFeedback>\r\n\t\t\t</View>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport { ColorPicker };\r\n"],"mappings":"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","ignoreList":[]}