{"version":3,"names":["colord","memoize","useCallback","isLegacyProps","props","onChangeComplete","disableAlpha","color","hex","getColorFromLegacyProps","undefined","transformColorStringToLegacyColor","colordColor","toHex","rgb","toRgb","hsv","toHsv","hsl","toHsl","source","oldHue","h","useDeprecatedProps","legacyChangeHandler","enableAlpha","onChange"],"sources":["@wordpress/components/src/color-picker/use-deprecated-props.ts"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport { colord } from 'colord';\r\nimport memoize from 'memize';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useCallback } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport type { ColorPickerProps, LegacyColor, LegacyProps } from './types';\r\n\r\nfunction isLegacyProps( props: any ): props is LegacyProps {\r\n\treturn (\r\n\t\ttypeof props.onChangeComplete !== 'undefined' ||\r\n\t\ttypeof props.disableAlpha !== 'undefined' ||\r\n\t\ttypeof props.color?.hex === 'string'\r\n\t);\r\n}\r\n\r\nfunction getColorFromLegacyProps(\r\n\tcolor: LegacyProps[ 'color' ]\r\n): string | undefined {\r\n\tif ( color === undefined ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tif ( typeof color === 'string' ) {\r\n\t\treturn color;\r\n\t}\r\n\r\n\tif ( color.hex ) {\r\n\t\treturn color.hex;\r\n\t}\r\n\r\n\treturn undefined;\r\n}\r\n\r\nconst transformColorStringToLegacyColor = memoize(\r\n\t( color: string ): LegacyColor => {\r\n\t\tconst colordColor = colord( color );\r\n\t\tconst hex = colordColor.toHex();\r\n\t\tconst rgb = colordColor.toRgb();\r\n\t\tconst hsv = colordColor.toHsv();\r\n\t\tconst hsl = colordColor.toHsl();\r\n\r\n\t\treturn {\r\n\t\t\thex,\r\n\t\t\trgb,\r\n\t\t\thsv,\r\n\t\t\thsl,\r\n\t\t\tsource: 'hex',\r\n\t\t\toldHue: hsl.h,\r\n\t\t};\r\n\t}\r\n);\r\n\r\nexport function useDeprecatedProps(\r\n\tprops: LegacyProps | ColorPickerProps\r\n): ColorPickerProps {\r\n\tconst { onChangeComplete } = props as LegacyProps;\r\n\tconst legacyChangeHandler = useCallback(\r\n\t\t( color: string ) => {\r\n\t\t\tonChangeComplete( transformColorStringToLegacyColor( color ) );\r\n\t\t},\r\n\t\t[ onChangeComplete ]\r\n\t);\r\n\tif ( isLegacyProps( props ) ) {\r\n\t\treturn {\r\n\t\t\tcolor: getColorFromLegacyProps( props.color ),\r\n\t\t\tenableAlpha: ! props.disableAlpha,\r\n\t\t\tonChange: legacyChangeHandler,\r\n\t\t};\r\n\t}\r\n\treturn {\r\n\t\t...props,\r\n\t\tcolor: props.color as ColorPickerProps[ 'color' ],\r\n\t\tenableAlpha: ( props as ColorPickerProps ).enableAlpha,\r\n\t\tonChange: ( props as ColorPickerProps ).onChange,\r\n\t};\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,MAAM,QAAQ,QAAQ;AAC/B,OAAOC,OAAO,MAAM,QAAQ;;AAE5B;AACA;AACA;AACA,SAASC,WAAW,QAAQ,oBAAoB;;AAEhD;AACA;AACA;;AAGA,SAASC,aAAaA,CAAEC,KAAU,EAAyB;EAC1D,OACC,OAAOA,KAAK,CAACC,gBAAgB,KAAK,WAAW,IAC7C,OAAOD,KAAK,CAACE,YAAY,KAAK,WAAW,IACzC,OAAOF,KAAK,CAACG,KAAK,EAAEC,GAAG,KAAK,QAAQ;AAEtC;AAEA,SAASC,uBAAuBA,CAC/BF,KAA6B,EACR;EACrB,IAAKA,KAAK,KAAKG,SAAS,EAAG;IAC1B;EACD;EAEA,IAAK,OAAOH,KAAK,KAAK,QAAQ,EAAG;IAChC,OAAOA,KAAK;EACb;EAEA,IAAKA,KAAK,CAACC,GAAG,EAAG;IAChB,OAAOD,KAAK,CAACC,GAAG;EACjB;EAEA,OAAOE,SAAS;AACjB;AAEA,MAAMC,iCAAiC,GAAGV,OAAO,CAC9CM,KAAa,IAAmB;EACjC,MAAMK,WAAW,GAAGZ,MAAM,CAAEO,KAAM,CAAC;EACnC,MAAMC,GAAG,GAAGI,WAAW,CAACC,KAAK,CAAC,CAAC;EAC/B,MAAMC,GAAG,GAAGF,WAAW,CAACG,KAAK,CAAC,CAAC;EAC/B,MAAMC,GAAG,GAAGJ,WAAW,CAACK,KAAK,CAAC,CAAC;EAC/B,MAAMC,GAAG,GAAGN,WAAW,CAACO,KAAK,CAAC,CAAC;EAE/B,OAAO;IACNX,GAAG;IACHM,GAAG;IACHE,GAAG;IACHE,GAAG;IACHE,MAAM,EAAE,KAAK;IACbC,MAAM,EAAEH,GAAG,CAACI;EACb,CAAC;AACF,CACD,CAAC;AAED,OAAO,SAASC,kBAAkBA,CACjCnB,KAAqC,EAClB;EACnB,MAAM;IAAEC;EAAiB,CAAC,GAAGD,KAAoB;EACjD,MAAMoB,mBAAmB,GAAGtB,WAAW,CACpCK,KAAa,IAAM;IACpBF,gBAAgB,CAAEM,iCAAiC,CAAEJ,KAAM,CAAE,CAAC;EAC/D,CAAC,EACD,CAAEF,gBAAgB,CACnB,CAAC;EACD,IAAKF,aAAa,CAAEC,KAAM,CAAC,EAAG;IAC7B,OAAO;MACNG,KAAK,EAAEE,uBAAuB,CAAEL,KAAK,CAACG,KAAM,CAAC;MAC7CkB,WAAW,EAAE,CAAErB,KAAK,CAACE,YAAY;MACjCoB,QAAQ,EAAEF;IACX,CAAC;EACF;EACA,OAAO;IACN,GAAGpB,KAAK;IACRG,KAAK,EAAEH,KAAK,CAACG,KAAoC;IACjDkB,WAAW,EAAIrB,KAAK,CAAuBqB,WAAW;IACtDC,QAAQ,EAAItB,KAAK,CAAuBsB;EACzC,CAAC;AACF","ignoreList":[]}