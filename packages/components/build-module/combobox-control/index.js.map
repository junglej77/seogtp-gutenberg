{"version":3,"names":["clsx","__","_n","sprintf","Component","useState","useMemo","useRef","useEffect","useInstanceId","speak","closeSmall","InputWrapperFlex","TokenInput","SuggestionsList","BaseControl","Button","FlexBlock","FlexItem","withFocusOutside","useControlledValue","normalizeTextString","useDeprecated36pxDefaultSizeProp","withIgnoreIMEEvents","jsx","_jsx","jsxs","_jsxs","noop","DetectOutside","handleFocusOutside","event","props","onFocusOutside","render","children","getIndexOfMatchingSuggestion","selectedSuggestion","matchingSuggestions","indexOf","ComboboxControl","_currentOption$label","__nextHasNoMarginBottom","__next40pxDefaultSize","value","valueProp","label","options","onChange","onChangeProp","onFilterValueChange","hideLabelFromVision","help","allowReset","className","messages","selected","__experimentalRenderItem","expandOnFocus","setValue","currentOption","find","option","currentLabel","instanceId","setSelectedSuggestion","isExpanded","setIsExpanded","inputHasFocus","setInputHasFocus","inputValue","setInputValue","inputContainer","startsWithMatch","containsMatch","match","forEach","index","push","concat","onSuggestionSelected","newSelectedSuggestion","disabled","handleArrowNavigation","offset","nextIndex","length","onKeyDown","preventDefault","defaultPrevented","code","onBlur","onFocus","onClick","onInputChange","text","handleOnReset","current","focus","handleResetStopPropagation","stopPropagation","hasMatchingSuggestions","hasSelectedMatchingSuggestions","message","__associatedWPComponentName","id","tabIndex","ref","selectedSuggestionIndex","icon","displayTransform","suggestion","suggestions","selectedIndex","onHover","onSelect","scrollIntoView"],"sources":["@wordpress/components/src/combobox-control/index.tsx"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { __, _n, sprintf } from '@wordpress/i18n';\r\nimport {\r\n\tComponent,\r\n\tuseState,\r\n\tuseMemo,\r\n\tuseRef,\r\n\tuseEffect,\r\n} from '@wordpress/element';\r\nimport { useInstanceId } from '@wordpress/compose';\r\nimport { speak } from '@wordpress/a11y';\r\nimport { closeSmall } from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { InputWrapperFlex } from './styles';\r\nimport TokenInput from '../form-token-field/token-input';\r\nimport SuggestionsList from '../form-token-field/suggestions-list';\r\nimport BaseControl from '../base-control';\r\nimport Button from '../button';\r\nimport { FlexBlock, FlexItem } from '../flex';\r\nimport withFocusOutside from '../higher-order/with-focus-outside';\r\nimport { useControlledValue } from '../utils/hooks';\r\nimport { normalizeTextString } from '../utils/strings';\r\nimport type { ComboboxControlOption, ComboboxControlProps } from './types';\r\nimport type { TokenInputProps } from '../form-token-field/types';\r\nimport { useDeprecated36pxDefaultSizeProp } from '../utils/use-deprecated-props';\r\nimport { withIgnoreIMEEvents } from '../utils/with-ignore-ime-events';\r\n\r\nconst noop = () => {};\r\n\r\ninterface DetectOutsideComponentProps {\r\n\tonFocusOutside: ( event: React.FocusEvent ) => void;\r\n\tchildren?: React.ReactNode;\r\n}\r\n\r\nconst DetectOutside = withFocusOutside(\r\n\tclass extends Component< DetectOutsideComponentProps > {\r\n\t\thandleFocusOutside( event: React.FocusEvent ) {\r\n\t\t\tthis.props.onFocusOutside( event );\r\n\t\t}\r\n\r\n\t\trender() {\r\n\t\t\treturn this.props.children;\r\n\t\t}\r\n\t}\r\n);\r\n\r\nconst getIndexOfMatchingSuggestion = (\r\n\tselectedSuggestion: ComboboxControlOption | null,\r\n\tmatchingSuggestions: ComboboxControlOption[]\r\n) =>\r\n\tselectedSuggestion === null\r\n\t\t? -1\r\n\t\t: matchingSuggestions.indexOf( selectedSuggestion );\r\n\r\n/**\r\n * `ComboboxControl` is an enhanced version of a [`SelectControl`](../select-control/README.md) with the addition of\r\n * being able to search for options using a search input.\r\n *\r\n * ```jsx\r\n * import { ComboboxControl } from '@wordpress/components';\r\n * import { useState } from '@wordpress/element';\r\n *\r\n * const options = [\r\n * \t{\r\n * \t\tvalue: 'small',\r\n * \t\tlabel: 'Small',\r\n * \t},\r\n * \t{\r\n * \t\tvalue: 'normal',\r\n * \t\tlabel: 'Normal',\r\n * \t\tdisabled: true,\r\n * \t},\r\n * \t{\r\n * \t\tvalue: 'large',\r\n * \t\tlabel: 'Large',\r\n * \t\tdisabled: false,\r\n * \t},\r\n * ];\r\n *\r\n * function MyComboboxControl() {\r\n * \tconst [ fontSize, setFontSize ] = useState();\r\n * \tconst [ filteredOptions, setFilteredOptions ] = useState( options );\r\n * \treturn (\r\n * \t\t<ComboboxControl\r\n * \t\t\t__nextHasNoMarginBottom\r\n * \t\t\tlabel=\"Font Size\"\r\n * \t\t\tvalue={ fontSize }\r\n * \t\t\tonChange={ setFontSize }\r\n * \t\t\toptions={ filteredOptions }\r\n * \t\t\tonFilterValueChange={ ( inputValue ) =>\r\n * \t\t\t\tsetFilteredOptions(\r\n * \t\t\t\t\toptions.filter( ( option ) =>\r\n * \t\t\t\t\t\toption.label\r\n * \t\t\t\t\t\t\t.toLowerCase()\r\n * \t\t\t\t\t\t\t.startsWith( inputValue.toLowerCase() )\r\n * \t\t\t\t\t)\r\n * \t\t\t\t)\r\n * \t\t\t}\r\n * \t\t/>\r\n * \t);\r\n * }\r\n * ```\r\n */\r\nfunction ComboboxControl( props: ComboboxControlProps ) {\r\n\tconst {\r\n\t\t__nextHasNoMarginBottom = false,\r\n\t\t__next40pxDefaultSize = false,\r\n\t\tvalue: valueProp,\r\n\t\tlabel,\r\n\t\toptions,\r\n\t\tonChange: onChangeProp,\r\n\t\tonFilterValueChange = noop,\r\n\t\thideLabelFromVision,\r\n\t\thelp,\r\n\t\tallowReset = true,\r\n\t\tclassName,\r\n\t\tmessages = {\r\n\t\t\tselected: __( 'Item selected.' ),\r\n\t\t},\r\n\t\t__experimentalRenderItem,\r\n\t\texpandOnFocus = true,\r\n\t} = useDeprecated36pxDefaultSizeProp( props );\r\n\r\n\tconst [ value, setValue ] = useControlledValue( {\r\n\t\tvalue: valueProp,\r\n\t\tonChange: onChangeProp,\r\n\t} );\r\n\r\n\tconst currentOption = options.find( ( option ) => option.value === value );\r\n\tconst currentLabel = currentOption?.label ?? '';\r\n\t// Use a custom prefix when generating the `instanceId` to avoid having\r\n\t// duplicate input IDs when rendering this component and `FormTokenField`\r\n\t// in the same page (see https://github.com/WordPress/gutenberg/issues/42112).\r\n\tconst instanceId = useInstanceId( ComboboxControl, 'combobox-control' );\r\n\tconst [ selectedSuggestion, setSelectedSuggestion ] = useState(\r\n\t\tcurrentOption || null\r\n\t);\r\n\tconst [ isExpanded, setIsExpanded ] = useState( false );\r\n\tconst [ inputHasFocus, setInputHasFocus ] = useState( false );\r\n\tconst [ inputValue, setInputValue ] = useState( '' );\r\n\tconst inputContainer = useRef< HTMLInputElement >( null );\r\n\r\n\tconst matchingSuggestions = useMemo( () => {\r\n\t\tconst startsWithMatch: ComboboxControlOption[] = [];\r\n\t\tconst containsMatch: ComboboxControlOption[] = [];\r\n\t\tconst match = normalizeTextString( inputValue );\r\n\t\toptions.forEach( ( option ) => {\r\n\t\t\tconst index = normalizeTextString( option.label ).indexOf( match );\r\n\t\t\tif ( index === 0 ) {\r\n\t\t\t\tstartsWithMatch.push( option );\r\n\t\t\t} else if ( index > 0 ) {\r\n\t\t\t\tcontainsMatch.push( option );\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\treturn startsWithMatch.concat( containsMatch );\r\n\t}, [ inputValue, options ] );\r\n\r\n\tconst onSuggestionSelected = (\r\n\t\tnewSelectedSuggestion: ComboboxControlOption\r\n\t) => {\r\n\t\tif ( newSelectedSuggestion.disabled ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetValue( newSelectedSuggestion.value );\r\n\t\tspeak( messages.selected, 'assertive' );\r\n\t\tsetSelectedSuggestion( newSelectedSuggestion );\r\n\t\tsetInputValue( '' );\r\n\t\tsetIsExpanded( false );\r\n\t};\r\n\r\n\tconst handleArrowNavigation = ( offset = 1 ) => {\r\n\t\tconst index = getIndexOfMatchingSuggestion(\r\n\t\t\tselectedSuggestion,\r\n\t\t\tmatchingSuggestions\r\n\t\t);\r\n\t\tlet nextIndex = index + offset;\r\n\t\tif ( nextIndex < 0 ) {\r\n\t\t\tnextIndex = matchingSuggestions.length - 1;\r\n\t\t} else if ( nextIndex >= matchingSuggestions.length ) {\r\n\t\t\tnextIndex = 0;\r\n\t\t}\r\n\t\tsetSelectedSuggestion( matchingSuggestions[ nextIndex ] );\r\n\t\tsetIsExpanded( true );\r\n\t};\r\n\r\n\tconst onKeyDown: React.KeyboardEventHandler< HTMLDivElement > =\r\n\t\twithIgnoreIMEEvents( ( event ) => {\r\n\t\t\tlet preventDefault = false;\r\n\r\n\t\t\tif ( event.defaultPrevented ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tswitch ( event.code ) {\r\n\t\t\t\tcase 'Enter':\r\n\t\t\t\t\tif ( selectedSuggestion ) {\r\n\t\t\t\t\t\tonSuggestionSelected( selectedSuggestion );\r\n\t\t\t\t\t\tpreventDefault = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'ArrowUp':\r\n\t\t\t\t\thandleArrowNavigation( -1 );\r\n\t\t\t\t\tpreventDefault = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'ArrowDown':\r\n\t\t\t\t\thandleArrowNavigation( 1 );\r\n\t\t\t\t\tpreventDefault = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'Escape':\r\n\t\t\t\t\tsetIsExpanded( false );\r\n\t\t\t\t\tsetSelectedSuggestion( null );\r\n\t\t\t\t\tpreventDefault = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tif ( preventDefault ) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\tconst onBlur = () => {\r\n\t\tsetInputHasFocus( false );\r\n\t};\r\n\r\n\tconst onFocus = () => {\r\n\t\tsetInputHasFocus( true );\r\n\t\tif ( expandOnFocus ) {\r\n\t\t\tsetIsExpanded( true );\r\n\t\t}\r\n\r\n\t\tonFilterValueChange( '' );\r\n\t\tsetInputValue( '' );\r\n\t};\r\n\r\n\tconst onClick = () => {\r\n\t\tsetIsExpanded( true );\r\n\t};\r\n\r\n\tconst onFocusOutside = () => {\r\n\t\tsetIsExpanded( false );\r\n\t};\r\n\r\n\tconst onInputChange: TokenInputProps[ 'onChange' ] = ( event ) => {\r\n\t\tconst text = event.value;\r\n\t\tsetInputValue( text );\r\n\t\tonFilterValueChange( text );\r\n\t\tif ( inputHasFocus ) {\r\n\t\t\tsetIsExpanded( true );\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleOnReset = () => {\r\n\t\tsetValue( null );\r\n\t\tinputContainer.current?.focus();\r\n\t};\r\n\r\n\t// Stop propagation of the keydown event when pressing Enter on the Reset\r\n\t// button to prevent calling the onKeydown callback on the container div\r\n\t// element which actually sets the selected suggestion.\r\n\tconst handleResetStopPropagation: React.KeyboardEventHandler<\r\n\t\tHTMLButtonElement\r\n\t> = ( event ) => {\r\n\t\tevent.stopPropagation();\r\n\t};\r\n\r\n\t// Update current selections when the filter input changes.\r\n\tuseEffect( () => {\r\n\t\tconst hasMatchingSuggestions = matchingSuggestions.length > 0;\r\n\t\tconst hasSelectedMatchingSuggestions =\r\n\t\t\tgetIndexOfMatchingSuggestion(\r\n\t\t\t\tselectedSuggestion,\r\n\t\t\t\tmatchingSuggestions\r\n\t\t\t) > 0;\r\n\r\n\t\tif ( hasMatchingSuggestions && ! hasSelectedMatchingSuggestions ) {\r\n\t\t\t// If the current selection isn't present in the list of suggestions, then automatically select the first item from the list of suggestions.\r\n\t\t\tsetSelectedSuggestion( matchingSuggestions[ 0 ] );\r\n\t\t}\r\n\t}, [ matchingSuggestions, selectedSuggestion ] );\r\n\r\n\t// Announcements.\r\n\tuseEffect( () => {\r\n\t\tconst hasMatchingSuggestions = matchingSuggestions.length > 0;\r\n\t\tif ( isExpanded ) {\r\n\t\t\tconst message = hasMatchingSuggestions\r\n\t\t\t\t? sprintf(\r\n\t\t\t\t\t\t/* translators: %d: number of results. */\r\n\t\t\t\t\t\t_n(\r\n\t\t\t\t\t\t\t'%d result found, use up and down arrow keys to navigate.',\r\n\t\t\t\t\t\t\t'%d results found, use up and down arrow keys to navigate.',\r\n\t\t\t\t\t\t\tmatchingSuggestions.length\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\tmatchingSuggestions.length\r\n\t\t\t\t  )\r\n\t\t\t\t: __( 'No results.' );\r\n\r\n\t\t\tspeak( message, 'polite' );\r\n\t\t}\r\n\t}, [ matchingSuggestions, isExpanded ] );\r\n\r\n\t// Disable reason: There is no appropriate role which describes the\r\n\t// input container intended accessible usability.\r\n\t// TODO: Refactor click detection to use blur to stop propagation.\r\n\t/* eslint-disable jsx-a11y/no-static-element-interactions */\r\n\treturn (\r\n\t\t<DetectOutside onFocusOutside={ onFocusOutside }>\r\n\t\t\t<BaseControl\r\n\t\t\t\t__nextHasNoMarginBottom={ __nextHasNoMarginBottom }\r\n\t\t\t\t__associatedWPComponentName=\"ComboboxControl\"\r\n\t\t\t\tclassName={ clsx( className, 'components-combobox-control' ) }\r\n\t\t\t\tlabel={ label }\r\n\t\t\t\tid={ `components-form-token-input-${ instanceId }` }\r\n\t\t\t\thideLabelFromVision={ hideLabelFromVision }\r\n\t\t\t\thelp={ help }\r\n\t\t\t>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName=\"components-combobox-control__suggestions-container\"\r\n\t\t\t\t\ttabIndex={ -1 }\r\n\t\t\t\t\tonKeyDown={ onKeyDown }\r\n\t\t\t\t>\r\n\t\t\t\t\t<InputWrapperFlex\r\n\t\t\t\t\t\t__next40pxDefaultSize={ __next40pxDefaultSize }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<FlexBlock>\r\n\t\t\t\t\t\t\t<TokenInput\r\n\t\t\t\t\t\t\t\tclassName=\"components-combobox-control__input\"\r\n\t\t\t\t\t\t\t\tinstanceId={ instanceId }\r\n\t\t\t\t\t\t\t\tref={ inputContainer }\r\n\t\t\t\t\t\t\t\tvalue={ isExpanded ? inputValue : currentLabel }\r\n\t\t\t\t\t\t\t\tonFocus={ onFocus }\r\n\t\t\t\t\t\t\t\tonBlur={ onBlur }\r\n\t\t\t\t\t\t\t\tonClick={ onClick }\r\n\t\t\t\t\t\t\t\tisExpanded={ isExpanded }\r\n\t\t\t\t\t\t\t\tselectedSuggestionIndex={ getIndexOfMatchingSuggestion(\r\n\t\t\t\t\t\t\t\t\tselectedSuggestion,\r\n\t\t\t\t\t\t\t\t\tmatchingSuggestions\r\n\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\tonChange={ onInputChange }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</FlexBlock>\r\n\t\t\t\t\t\t{ allowReset && (\r\n\t\t\t\t\t\t\t<FlexItem>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tclassName=\"components-combobox-control__reset\"\r\n\t\t\t\t\t\t\t\t\ticon={ closeSmall }\r\n\t\t\t\t\t\t\t\t\t// Disable reason: Focus returns to input field when reset is clicked.\r\n\t\t\t\t\t\t\t\t\t// eslint-disable-next-line no-restricted-syntax\r\n\t\t\t\t\t\t\t\t\tdisabled={ ! value }\r\n\t\t\t\t\t\t\t\t\tonClick={ handleOnReset }\r\n\t\t\t\t\t\t\t\t\tonKeyDown={ handleResetStopPropagation }\r\n\t\t\t\t\t\t\t\t\tlabel={ __( 'Reset' ) }\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</FlexItem>\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t</InputWrapperFlex>\r\n\t\t\t\t\t{ isExpanded && (\r\n\t\t\t\t\t\t<SuggestionsList\r\n\t\t\t\t\t\t\tinstanceId={ instanceId }\r\n\t\t\t\t\t\t\t// The empty string for `value` here is not actually used, but is\r\n\t\t\t\t\t\t\t// just a quick way to satisfy the TypeScript requirements of SuggestionsList.\r\n\t\t\t\t\t\t\t// See: https://github.com/WordPress/gutenberg/pull/47581/files#r1091089330\r\n\t\t\t\t\t\t\tmatch={ { label: inputValue, value: '' } }\r\n\t\t\t\t\t\t\tdisplayTransform={ ( suggestion ) =>\r\n\t\t\t\t\t\t\t\tsuggestion.label\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tsuggestions={ matchingSuggestions }\r\n\t\t\t\t\t\t\tselectedIndex={ getIndexOfMatchingSuggestion(\r\n\t\t\t\t\t\t\t\tselectedSuggestion,\r\n\t\t\t\t\t\t\t\tmatchingSuggestions\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\tonHover={ setSelectedSuggestion }\r\n\t\t\t\t\t\t\tonSelect={ onSuggestionSelected }\r\n\t\t\t\t\t\t\tscrollIntoView\r\n\t\t\t\t\t\t\t__experimentalRenderItem={\r\n\t\t\t\t\t\t\t\t__experimentalRenderItem\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) }\r\n\t\t\t\t</div>\r\n\t\t\t</BaseControl>\r\n\t\t</DetectOutside>\r\n\t);\r\n\t/* eslint-enable jsx-a11y/no-static-element-interactions */\r\n}\r\n\r\nexport default ComboboxControl;\r\n"],"mappings":"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","ignoreList":[]}