{"version":3,"names":["Ariakit","forwardRef","useInstanceId","deprecated","Composite","Current","jsx","_jsx","mapLegacyStatePropsToComponentProps","legacyProps","state","rest","store","props","LEGACY_TO_NEW_DISPLAY_NAME","__unstableComposite","__unstableCompositeGroup","__unstableCompositeItem","__unstableUseCompositeState","proxyComposite","ProxiedComponent","propMap","_ProxiedComponent$dis","displayName","Component","since","alternative","hasOwnProperty","undefined","id","baseId","Object","entries","forEach","from","to","assign","UnproxiedCompositeGroup","role","ref","Row","Group","CompositeGroup","CompositeItem","Item","focusable","useCompositeState","legacyStateOptions","currentId","defaultActiveId","orientation","rtl","loop","focusLoop","wrap","focusWrap","shift","focusShift","unstable_virtual","virtualFocus","useCompositeStore"],"sources":["@wordpress/components/src/composite/legacy/index.tsx"],"sourcesContent":["/**\r\n * Composite is a component that may contain navigable items represented by\r\n * CompositeItem. It's inspired by the WAI-ARIA Composite Role and implements\r\n * all the keyboard navigation mechanisms to ensure that there's only one\r\n * tab stop for the whole Composite element. This means that it can behave as\r\n * a roving tabindex or aria-activedescendant container.\r\n *\r\n * This file aims at providing components that are as close as possible to the\r\n * original `reakit`-based implementation (which was removed from the codebase),\r\n * although it is recommended that consumers of the package switch to the stable,\r\n * un-prefixed, `ariakit`-based version of `Composite`.\r\n *\r\n * @see https://ariakit.org/components/composite\r\n */\r\n\r\n/**\r\n * External dependencies\r\n */\r\nimport * as Ariakit from '@ariakit/react';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { forwardRef } from '@wordpress/element';\r\nimport { useInstanceId } from '@wordpress/compose';\r\nimport deprecated from '@wordpress/deprecated';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { Composite as Current } from '..';\r\n\r\ntype Orientation = 'horizontal' | 'vertical';\r\n\r\nexport interface LegacyStateOptions {\r\n\t/**\r\n\t * ID that will serve as a base for all the items IDs.\r\n\t */\r\n\tbaseId?: string;\r\n\t/**\r\n\t * Determines how next and previous functions will behave. If `rtl` is set\r\n\t * to `true`, they will be inverted. This only affects the composite widget\r\n\t * behavior. You still need to set `dir=\"rtl\"` on HTML/CSS.\r\n\t *\r\n\t * @default false\r\n\t */\r\n\trtl?: boolean;\r\n\t/**\r\n\t * Defines the orientation of the composite widget. If the composite has a\r\n\t * single row or column (one-dimensional), the orientation value determines\r\n\t * which arrow keys can be used to move focus.\r\n\t */\r\n\torientation?: Orientation;\r\n\t/**\r\n\t * The current focused item `id`.\r\n\t */\r\n\tcurrentId?: string;\r\n\t/**\r\n\t * Determines how focus moves from the start and end of rows and columns.\r\n\t *\r\n\t * @default false\r\n\t */\r\n\tloop?: boolean | Orientation;\r\n\t/**\r\n\t * If enabled, moving to the next item from the last one in a row or column\r\n\t * will focus the first item in the next row or column and vice-versa.\r\n\t *\r\n\t * ** Has effect only on two-dimensional composites. **\r\n\t *\r\n\t * @default false\r\n\t */\r\n\twrap?: boolean | Orientation;\r\n\t/**\r\n\t * If enabled, moving up or down when there's no next item or the next item\r\n\t * is disabled will shift to the item right before it.\r\n\t *\r\n\t * ** Has effect only on two-dimensional composites. **\r\n\t *\r\n\t * @default false\r\n\t */\r\n\tshift?: boolean;\r\n\tunstable_virtual?: boolean;\r\n}\r\n\r\ntype Component = React.FunctionComponent< any >;\r\n\r\ntype CompositeStore = ReturnType< typeof Ariakit.useCompositeStore >;\r\ntype CompositeStoreState = { store: CompositeStore };\r\nexport type CompositeState = CompositeStoreState &\r\n\tRequired< Pick< LegacyStateOptions, 'baseId' > >;\r\n\r\n// Legacy composite components can either provide state through a\r\n// single `state` prop, or via individual props, usually through\r\n// spreading the state generated by `useCompositeState`.\r\n// That is, `<Composite* { ...state }>`.\r\nexport type CompositeStateProps =\r\n\t| { state: CompositeState }\r\n\t| ( CompositeState & { state?: never } );\r\ntype ComponentProps< C extends Component > = React.ComponentPropsWithRef< C >;\r\nexport type CompositeProps< C extends Component > = ComponentProps< C > &\r\n\tCompositeStateProps;\r\ntype CompositeComponent< C extends Component > = (\r\n\tprops: CompositeProps< C >\r\n) => React.ReactElement;\r\ntype CompositeComponentProps = CompositeState &\r\n\t(\r\n\t\t| ComponentProps< typeof Current.Group >\r\n\t\t| ComponentProps< typeof Current.Item >\r\n\t\t| ComponentProps< typeof Current.Row >\r\n\t);\r\n\r\nfunction mapLegacyStatePropsToComponentProps(\r\n\tlegacyProps: CompositeStateProps\r\n): CompositeComponentProps {\r\n\t// If a `state` prop is provided, we unpack that; otherwise,\r\n\t// the necessary props are provided directly in `legacyProps`.\r\n\tif ( legacyProps.state ) {\r\n\t\tconst { state, ...rest } = legacyProps;\r\n\t\tconst { store, ...props } =\r\n\t\t\tmapLegacyStatePropsToComponentProps( state );\r\n\t\treturn { ...rest, ...props, store };\r\n\t}\r\n\r\n\treturn legacyProps;\r\n}\r\n\r\nconst LEGACY_TO_NEW_DISPLAY_NAME = {\r\n\t__unstableComposite: 'Composite',\r\n\t__unstableCompositeGroup: 'Composite.Group or Composite.Row',\r\n\t__unstableCompositeItem: 'Composite.Item',\r\n\t__unstableUseCompositeState: 'Composite',\r\n};\r\n\r\nfunction proxyComposite< C extends Component >(\r\n\tProxiedComponent: C | React.ForwardRefExoticComponent< C >,\r\n\tpropMap: Record< string, string > = {}\r\n): CompositeComponent< C > {\r\n\tconst displayName = ProxiedComponent.displayName ?? '';\r\n\r\n\tconst Component = ( legacyProps: CompositeStateProps ) => {\r\n\t\tdeprecated( `wp.components.${ displayName }`, {\r\n\t\t\tsince: '6.7',\r\n\t\t\talternative: LEGACY_TO_NEW_DISPLAY_NAME.hasOwnProperty(\r\n\t\t\t\tdisplayName\r\n\t\t\t)\r\n\t\t\t\t? LEGACY_TO_NEW_DISPLAY_NAME[\r\n\t\t\t\t\t\tdisplayName as keyof typeof LEGACY_TO_NEW_DISPLAY_NAME\r\n\t\t\t\t  ]\r\n\t\t\t\t: undefined,\r\n\t\t} );\r\n\r\n\t\tconst { store, ...rest } =\r\n\t\t\tmapLegacyStatePropsToComponentProps( legacyProps );\r\n\t\tconst props = rest as ComponentProps< C >;\r\n\t\tprops.id = useInstanceId( store, props.baseId, props.id );\r\n\r\n\t\tObject.entries( propMap ).forEach( ( [ from, to ] ) => {\r\n\t\t\tif ( props.hasOwnProperty( from ) ) {\r\n\t\t\t\tObject.assign( props, { [ to ]: props[ from ] } );\r\n\t\t\t\tdelete props[ from ];\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\tdelete props.baseId;\r\n\r\n\t\treturn <ProxiedComponent { ...props } store={ store } />;\r\n\t};\r\n\tComponent.displayName = displayName;\r\n\treturn Component;\r\n}\r\n\r\n// The old `CompositeGroup` used to behave more like the current\r\n// `CompositeRow`, but this has been split into two different\r\n// components. We handle that difference by checking on the\r\n// provided role, and returning the appropriate component.\r\nconst UnproxiedCompositeGroup = forwardRef<\r\n\tany,\r\n\tReact.ComponentPropsWithoutRef< typeof Current.Group | typeof Current.Row >\r\n>( ( { role, ...props }, ref ) => {\r\n\tconst Component = role === 'row' ? Current.Row : Current.Group;\r\n\treturn <Component ref={ ref } role={ role } { ...props } />;\r\n} );\r\n\r\n/**\r\n * _Note: please use the `Composite` component instead._\r\n *\r\n * @deprecated\r\n */\r\nexport const Composite = proxyComposite(\r\n\tObject.assign( Current, { displayName: '__unstableComposite' } ),\r\n\t{ baseId: 'id' }\r\n);\r\n/**\r\n * _Note: please use the `Composite.Row` or `Composite.Group` components instead._\r\n *\r\n * @deprecated\r\n */\r\nexport const CompositeGroup = proxyComposite(\r\n\tObject.assign( UnproxiedCompositeGroup, {\r\n\t\tdisplayName: '__unstableCompositeGroup',\r\n\t} )\r\n);\r\n/**\r\n * _Note: please use the `Composite.Item` component instead._\r\n *\r\n * @deprecated\r\n */\r\nexport const CompositeItem = proxyComposite(\r\n\tObject.assign( Current.Item, {\r\n\t\tdisplayName: '__unstableCompositeItem',\r\n\t} ),\r\n\t{\r\n\t\tfocusable: 'accessibleWhenDisabled',\r\n\t}\r\n);\r\n\r\n/**\r\n * _Note: please use the `Composite` component instead._\r\n *\r\n * @deprecated\r\n */\r\nexport function useCompositeState(\r\n\tlegacyStateOptions: LegacyStateOptions = {}\r\n): CompositeState {\r\n\tdeprecated( `wp.components.__unstableUseCompositeState`, {\r\n\t\tsince: '6.7',\r\n\t\talternative: LEGACY_TO_NEW_DISPLAY_NAME.__unstableUseCompositeState,\r\n\t} );\r\n\r\n\tconst {\r\n\t\tbaseId,\r\n\t\tcurrentId: defaultActiveId,\r\n\t\torientation,\r\n\t\trtl = false,\r\n\t\tloop: focusLoop = false,\r\n\t\twrap: focusWrap = false,\r\n\t\tshift: focusShift = false,\r\n\t\t// eslint-disable-next-line camelcase\r\n\t\tunstable_virtual: virtualFocus,\r\n\t} = legacyStateOptions;\r\n\r\n\treturn {\r\n\t\tbaseId: useInstanceId( Composite, 'composite', baseId ),\r\n\t\tstore: Ariakit.useCompositeStore( {\r\n\t\t\tdefaultActiveId,\r\n\t\t\trtl,\r\n\t\t\torientation,\r\n\t\t\tfocusLoop,\r\n\t\t\tfocusShift,\r\n\t\t\tfocusWrap,\r\n\t\t\tvirtualFocus,\r\n\t\t} ),\r\n\t};\r\n}\r\n"],"mappings":"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","ignoreList":[]}