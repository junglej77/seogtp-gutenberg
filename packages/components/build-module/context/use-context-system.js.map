{"version":3,"names":["warn","useComponentsContext","getNamespace","getConnectedNamespace","getStyledClassNameFromKey","useCx","useContextSystem","props","namespace","contextSystemProps","globalThis","SCRIPT_DEBUG","contextProps","finalComponentProps","_overrides","overrideProps","otherContextProps","initialMergedProps","Object","entries","length","assign","cx","classes","className","rendered","renderChildren","children","key","undefined"],"sources":["@wordpress/components/src/context/use-context-system.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport warn from '@wordpress/warning';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { useComponentsContext } from './context-system-provider';\r\nimport { getNamespace, getConnectedNamespace } from './utils';\r\nimport { getStyledClassNameFromKey } from './get-styled-class-name-from-key';\r\nimport { useCx } from '../utils/hooks/use-cx';\r\n\r\n/**\r\n * @template TProps\r\n * @typedef {TProps & { className: string }} ConnectedProps\r\n */\r\n\r\n/**\r\n * Custom hook that derives registered props from the Context system.\r\n * These derived props are then consolidated with incoming component props.\r\n *\r\n * @template {{ className?: string }} P\r\n * @param {P}      props     Incoming props from the component.\r\n * @param {string} namespace The namespace to register and to derive context props from.\r\n * @return {ConnectedProps<P>} The connected props.\r\n */\r\nexport function useContextSystem( props, namespace ) {\r\n\tconst contextSystemProps = useComponentsContext();\r\n\tif ( typeof namespace === 'undefined' ) {\r\n\t\twarn( 'useContextSystem: Please provide a namespace' );\r\n\t}\r\n\r\n\tconst contextProps = contextSystemProps?.[ namespace ] || {};\r\n\r\n\t/* eslint-disable jsdoc/no-undefined-types */\r\n\t/** @type {ConnectedProps<P>} */\r\n\t// @ts-ignore We fill in the missing properties below\r\n\tconst finalComponentProps = {\r\n\t\t...getConnectedNamespace(),\r\n\t\t...getNamespace( namespace ),\r\n\t};\r\n\t/* eslint-enable jsdoc/no-undefined-types */\r\n\r\n\tconst { _overrides: overrideProps, ...otherContextProps } = contextProps;\r\n\r\n\tconst initialMergedProps = Object.entries( otherContextProps ).length\r\n\t\t? Object.assign( {}, otherContextProps, props )\r\n\t\t: props;\r\n\r\n\tconst cx = useCx();\r\n\r\n\tconst classes = cx(\r\n\t\tgetStyledClassNameFromKey( namespace ),\r\n\t\tprops.className\r\n\t);\r\n\r\n\t// Provides the ability to customize the render of the component.\r\n\tconst rendered =\r\n\t\ttypeof initialMergedProps.renderChildren === 'function'\r\n\t\t\t? initialMergedProps.renderChildren( initialMergedProps )\r\n\t\t\t: initialMergedProps.children;\r\n\r\n\tfor ( const key in initialMergedProps ) {\r\n\t\t// @ts-ignore filling in missing props\r\n\t\tfinalComponentProps[ key ] = initialMergedProps[ key ];\r\n\t}\r\n\r\n\tfor ( const key in overrideProps ) {\r\n\t\t// @ts-ignore filling in missing props\r\n\t\tfinalComponentProps[ key ] = overrideProps[ key ];\r\n\t}\r\n\r\n\t// Setting an `undefined` explicitly can cause unintended overwrites\r\n\t// when a `cloneElement()` is involved.\r\n\tif ( rendered !== undefined ) {\r\n\t\t// @ts-ignore\r\n\t\tfinalComponentProps.children = rendered;\r\n\t}\r\n\r\n\tfinalComponentProps.className = classes;\r\n\r\n\treturn finalComponentProps;\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,OAAOA,IAAI,MAAM,oBAAoB;;AAErC;AACA;AACA;AACA,SAASC,oBAAoB,QAAQ,2BAA2B;AAChE,SAASC,YAAY,EAAEC,qBAAqB,QAAQ,SAAS;AAC7D,SAASC,yBAAyB,QAAQ,kCAAkC;AAC5E,SAASC,KAAK,QAAQ,uBAAuB;;AAE7C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,gBAAgBA,CAAEC,KAAK,EAAEC,SAAS,EAAG;EACpD,MAAMC,kBAAkB,GAAGR,oBAAoB,CAAC,CAAC;EACjD,IAAK,OAAOO,SAAS,KAAK,WAAW,EAAG;IACvCE,UAAA,CAAAC,YAAA,YAAAX,IAAI,CAAE,8CAA+C,CAAC;EACvD;EAEA,MAAMY,YAAY,GAAGH,kBAAkB,GAAID,SAAS,CAAE,IAAI,CAAC,CAAC;;EAE5D;EACA;EACA;EACA,MAAMK,mBAAmB,GAAG;IAC3B,GAAGV,qBAAqB,CAAC,CAAC;IAC1B,GAAGD,YAAY,CAAEM,SAAU;EAC5B,CAAC;EACD;;EAEA,MAAM;IAAEM,UAAU,EAAEC,aAAa;IAAE,GAAGC;EAAkB,CAAC,GAAGJ,YAAY;EAExE,MAAMK,kBAAkB,GAAGC,MAAM,CAACC,OAAO,CAAEH,iBAAkB,CAAC,CAACI,MAAM,GAClEF,MAAM,CAACG,MAAM,CAAE,CAAC,CAAC,EAAEL,iBAAiB,EAAET,KAAM,CAAC,GAC7CA,KAAK;EAER,MAAMe,EAAE,GAAGjB,KAAK,CAAC,CAAC;EAElB,MAAMkB,OAAO,GAAGD,EAAE,CACjBlB,yBAAyB,CAAEI,SAAU,CAAC,EACtCD,KAAK,CAACiB,SACP,CAAC;;EAED;EACA,MAAMC,QAAQ,GACb,OAAOR,kBAAkB,CAACS,cAAc,KAAK,UAAU,GACpDT,kBAAkB,CAACS,cAAc,CAAET,kBAAmB,CAAC,GACvDA,kBAAkB,CAACU,QAAQ;EAE/B,KAAM,MAAMC,GAAG,IAAIX,kBAAkB,EAAG;IACvC;IACAJ,mBAAmB,CAAEe,GAAG,CAAE,GAAGX,kBAAkB,CAAEW,GAAG,CAAE;EACvD;EAEA,KAAM,MAAMA,GAAG,IAAIb,aAAa,EAAG;IAClC;IACAF,mBAAmB,CAAEe,GAAG,CAAE,GAAGb,aAAa,CAAEa,GAAG,CAAE;EAClD;;EAEA;EACA;EACA,IAAKH,QAAQ,KAAKI,SAAS,EAAG;IAC7B;IACAhB,mBAAmB,CAACc,QAAQ,GAAGF,QAAQ;EACxC;EAEAZ,mBAAmB,CAACW,SAAS,GAAGD,OAAO;EAEvC,OAAOV,mBAAmB;AAC3B","ignoreList":[]}