{"version":3,"names":["clsx","colord","useInstanceId","useEffect","useRef","useState","useMemo","__","sprintf","plus","Button","HStack","ColorPicker","VisuallyHidden","CustomColorPickerDropdown","addControlPoint","clampPercent","removeControlPoint","updateControlPointColor","updateControlPointColorByPosition","updateControlPointPosition","getHorizontalRelativeGradientPosition","MINIMUM_SIGNIFICANT_MOVE","KEYBOARD_CONTROL_POINT_VARIATION","DropdownContentWrapper","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","ControlPointButton","isOpen","position","color","additionalProps","instanceId","descriptionId","children","className","id","GradientColorPickerDropdown","isRenderedInSidebar","props","popoverProps","placement","offset","resize","mergedClassName","ControlPoints","disableRemove","disableAlpha","gradientPickerDomRef","ignoreMarkerPosition","value","controlPoints","onChange","onStartControlPointChange","onStopControlPointChange","__experimentalIsRenderedInSidebar","controlPointMoveStateRef","onMouseMove","event","current","undefined","relativePosition","clientX","initialPosition","index","significantMoveHappened","Math","abs","cleanEventListeners","window","removeEventListener","listenersActivated","cleanEventListenersRef","map","point","onClose","renderToggle","onToggle","onClick","onMouseDown","addEventListener","onKeyDown","code","stopPropagation","renderContent","paddingSize","enableAlpha","toRgbString","length","alignment","variant","style","left","transform","InsertPoint","onOpenInserter","onCloseInserter","insertPosition","alreadyInsertedPoint","setAlreadyInsertedPoint","icon"],"sources":["@wordpress/components/src/custom-gradient-picker/gradient-bar/control-points.tsx"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\nimport { colord } from 'colord';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useInstanceId } from '@wordpress/compose';\r\nimport { useEffect, useRef, useState, useMemo } from '@wordpress/element';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { plus } from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport Button from '../../button';\r\nimport { HStack } from '../../h-stack';\r\nimport { ColorPicker } from '../../color-picker';\r\nimport { VisuallyHidden } from '../../visually-hidden';\r\nimport { CustomColorPickerDropdown } from '../../color-palette';\r\n\r\nimport {\r\n\taddControlPoint,\r\n\tclampPercent,\r\n\tremoveControlPoint,\r\n\tupdateControlPointColor,\r\n\tupdateControlPointColorByPosition,\r\n\tupdateControlPointPosition,\r\n\tgetHorizontalRelativeGradientPosition,\r\n} from './utils';\r\nimport {\r\n\tMINIMUM_SIGNIFICANT_MOVE,\r\n\tKEYBOARD_CONTROL_POINT_VARIATION,\r\n} from './constants';\r\nimport type { WordPressComponentProps } from '../../context';\r\nimport type {\r\n\tControlPointButtonProps,\r\n\tControlPointMoveState,\r\n\tControlPointsProps,\r\n\tInsertPointProps,\r\n} from '../types';\r\nimport type { CustomColorPickerDropdownProps } from '../../color-palette/types';\r\nimport DropdownContentWrapper from '../../dropdown/dropdown-content-wrapper';\r\n\r\nfunction ControlPointButton( {\r\n\tisOpen,\r\n\tposition,\r\n\tcolor,\r\n\t...additionalProps\r\n}: WordPressComponentProps< ControlPointButtonProps, 'button', true > ) {\r\n\tconst instanceId = useInstanceId( ControlPointButton );\r\n\tconst descriptionId = `components-custom-gradient-picker__control-point-button-description-${ instanceId }`;\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Button\r\n\t\t\t\taria-label={ sprintf(\r\n\t\t\t\t\t// translators: %1$s: gradient position e.g: 70, %2$s: gradient color code e.g: rgb(52,121,151).\r\n\t\t\t\t\t__(\r\n\t\t\t\t\t\t'Gradient control point at position %1$s%% with color code %2$s.'\r\n\t\t\t\t\t),\r\n\t\t\t\t\tposition,\r\n\t\t\t\t\tcolor\r\n\t\t\t\t) }\r\n\t\t\t\taria-describedby={ descriptionId }\r\n\t\t\t\taria-haspopup=\"true\"\r\n\t\t\t\taria-expanded={ isOpen }\r\n\t\t\t\tclassName={ clsx(\r\n\t\t\t\t\t'components-custom-gradient-picker__control-point-button',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'is-active': isOpen,\r\n\t\t\t\t\t}\r\n\t\t\t\t) }\r\n\t\t\t\t{ ...additionalProps }\r\n\t\t\t/>\r\n\t\t\t<VisuallyHidden id={ descriptionId }>\r\n\t\t\t\t{ __(\r\n\t\t\t\t\t'Use your left or right arrow keys or drag and drop with the mouse to change the gradient position. Press the button to change the color or remove the control point.'\r\n\t\t\t\t) }\r\n\t\t\t</VisuallyHidden>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nfunction GradientColorPickerDropdown( {\r\n\tisRenderedInSidebar,\r\n\tclassName,\r\n\t...props\r\n}: CustomColorPickerDropdownProps ) {\r\n\t// Open the popover below the gradient control/insertion point\r\n\tconst popoverProps = useMemo(\r\n\t\t() =>\r\n\t\t\t( {\r\n\t\t\t\tplacement: 'bottom',\r\n\t\t\t\toffset: 8,\r\n\t\t\t\t// Disabling resize as it would otherwise cause the popover to show\r\n\t\t\t\t// scrollbars while dragging the color picker's handle close to the\r\n\t\t\t\t// popover edge.\r\n\t\t\t\tresize: false,\r\n\t\t\t} ) as const,\r\n\t\t[]\r\n\t);\r\n\r\n\tconst mergedClassName = clsx(\r\n\t\t'components-custom-gradient-picker__control-point-dropdown',\r\n\t\tclassName\r\n\t);\r\n\r\n\treturn (\r\n\t\t<CustomColorPickerDropdown\r\n\t\t\tisRenderedInSidebar={ isRenderedInSidebar }\r\n\t\t\tpopoverProps={ popoverProps }\r\n\t\t\tclassName={ mergedClassName }\r\n\t\t\t{ ...props }\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nfunction ControlPoints( {\r\n\tdisableRemove,\r\n\tdisableAlpha,\r\n\tgradientPickerDomRef,\r\n\tignoreMarkerPosition,\r\n\tvalue: controlPoints,\r\n\tonChange,\r\n\tonStartControlPointChange,\r\n\tonStopControlPointChange,\r\n\t__experimentalIsRenderedInSidebar,\r\n}: ControlPointsProps ) {\r\n\tconst controlPointMoveStateRef = useRef< ControlPointMoveState >();\r\n\r\n\tconst onMouseMove = ( event: MouseEvent ) => {\r\n\t\tif (\r\n\t\t\tcontrolPointMoveStateRef.current === undefined ||\r\n\t\t\tgradientPickerDomRef.current === null\r\n\t\t) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst relativePosition = getHorizontalRelativeGradientPosition(\r\n\t\t\tevent.clientX,\r\n\t\t\tgradientPickerDomRef.current\r\n\t\t);\r\n\r\n\t\tconst { initialPosition, index, significantMoveHappened } =\r\n\t\t\tcontrolPointMoveStateRef.current;\r\n\r\n\t\tif (\r\n\t\t\t! significantMoveHappened &&\r\n\t\t\tMath.abs( initialPosition - relativePosition ) >=\r\n\t\t\t\tMINIMUM_SIGNIFICANT_MOVE\r\n\t\t) {\r\n\t\t\tcontrolPointMoveStateRef.current.significantMoveHappened = true;\r\n\t\t}\r\n\r\n\t\tonChange(\r\n\t\t\tupdateControlPointPosition( controlPoints, index, relativePosition )\r\n\t\t);\r\n\t};\r\n\r\n\tconst cleanEventListeners = () => {\r\n\t\tif (\r\n\t\t\twindow &&\r\n\t\t\twindow.removeEventListener &&\r\n\t\t\tcontrolPointMoveStateRef.current &&\r\n\t\t\tcontrolPointMoveStateRef.current.listenersActivated\r\n\t\t) {\r\n\t\t\twindow.removeEventListener( 'mousemove', onMouseMove );\r\n\t\t\twindow.removeEventListener( 'mouseup', cleanEventListeners );\r\n\t\t\tonStopControlPointChange();\r\n\t\t\tcontrolPointMoveStateRef.current.listenersActivated = false;\r\n\t\t}\r\n\t};\r\n\r\n\t// Adding `cleanEventListeners` to the dependency array below requires the function itself to be wrapped in a `useCallback`\r\n\t// This memoization would prevent the event listeners from being properly cleaned.\r\n\t// Instead, we'll pass a ref to the function in our `useEffect` so `cleanEventListeners` itself is no longer a dependency.\r\n\tconst cleanEventListenersRef = useRef< () => void >();\r\n\tcleanEventListenersRef.current = cleanEventListeners;\r\n\r\n\tuseEffect( () => {\r\n\t\treturn () => {\r\n\t\t\tcleanEventListenersRef.current?.();\r\n\t\t};\r\n\t}, [] );\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ controlPoints.map( ( point, index ) => {\r\n\t\t\t\tconst initialPosition = point?.position;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tignoreMarkerPosition !== initialPosition && (\r\n\t\t\t\t\t\t<GradientColorPickerDropdown\r\n\t\t\t\t\t\t\tisRenderedInSidebar={\r\n\t\t\t\t\t\t\t\t__experimentalIsRenderedInSidebar\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tkey={ index }\r\n\t\t\t\t\t\t\tonClose={ onStopControlPointChange }\r\n\t\t\t\t\t\t\trenderToggle={ ( { isOpen, onToggle } ) => (\r\n\t\t\t\t\t\t\t\t<ControlPointButton\r\n\t\t\t\t\t\t\t\t\tkey={ index }\r\n\t\t\t\t\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\t\tcontrolPointMoveStateRef.current &&\r\n\t\t\t\t\t\t\t\t\t\t\tcontrolPointMoveStateRef.current\r\n\t\t\t\t\t\t\t\t\t\t\t\t.significantMoveHappened\r\n\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tif ( isOpen ) {\r\n\t\t\t\t\t\t\t\t\t\t\tonStopControlPointChange();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tonStartControlPointChange();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tonToggle();\r\n\t\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t\t\tonMouseDown={ () => {\r\n\t\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\t\twindow &&\r\n\t\t\t\t\t\t\t\t\t\t\twindow.addEventListener\r\n\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\tcontrolPointMoveStateRef.current = {\r\n\t\t\t\t\t\t\t\t\t\t\t\tinitialPosition,\r\n\t\t\t\t\t\t\t\t\t\t\t\tindex,\r\n\t\t\t\t\t\t\t\t\t\t\t\tsignificantMoveHappened: false,\r\n\t\t\t\t\t\t\t\t\t\t\t\tlistenersActivated: true,\r\n\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\t\tonStartControlPointChange();\r\n\t\t\t\t\t\t\t\t\t\t\twindow.addEventListener(\r\n\t\t\t\t\t\t\t\t\t\t\t\t'mousemove',\r\n\t\t\t\t\t\t\t\t\t\t\t\tonMouseMove\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\twindow.addEventListener(\r\n\t\t\t\t\t\t\t\t\t\t\t\t'mouseup',\r\n\t\t\t\t\t\t\t\t\t\t\t\tcleanEventListeners\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t\t\tonKeyDown={ ( event ) => {\r\n\t\t\t\t\t\t\t\t\t\tif ( event.code === 'ArrowLeft' ) {\r\n\t\t\t\t\t\t\t\t\t\t\t// Stop propagation of the key press event to avoid focus moving\r\n\t\t\t\t\t\t\t\t\t\t\t// to another editor area.\r\n\t\t\t\t\t\t\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\t\t\t\t\t\t\tonChange(\r\n\t\t\t\t\t\t\t\t\t\t\t\tupdateControlPointPosition(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontrolPoints,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tindex,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclampPercent(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpoint.position -\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tKEYBOARD_CONTROL_POINT_VARIATION\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t} else if (\r\n\t\t\t\t\t\t\t\t\t\t\tevent.code === 'ArrowRight'\r\n\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\t// Stop propagation of the key press event to avoid focus moving\r\n\t\t\t\t\t\t\t\t\t\t\t// to another editor area.\r\n\t\t\t\t\t\t\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\t\t\t\t\t\t\tonChange(\r\n\t\t\t\t\t\t\t\t\t\t\t\tupdateControlPointPosition(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontrolPoints,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tindex,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclampPercent(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpoint.position +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tKEYBOARD_CONTROL_POINT_VARIATION\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t\t\tisOpen={ isOpen }\r\n\t\t\t\t\t\t\t\t\tposition={ point.position }\r\n\t\t\t\t\t\t\t\t\tcolor={ point.color }\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\trenderContent={ ( { onClose } ) => (\r\n\t\t\t\t\t\t\t\t<DropdownContentWrapper paddingSize=\"none\">\r\n\t\t\t\t\t\t\t\t\t<ColorPicker\r\n\t\t\t\t\t\t\t\t\t\tenableAlpha={ ! disableAlpha }\r\n\t\t\t\t\t\t\t\t\t\tcolor={ point.color }\r\n\t\t\t\t\t\t\t\t\t\tonChange={ ( color ) => {\r\n\t\t\t\t\t\t\t\t\t\t\tonChange(\r\n\t\t\t\t\t\t\t\t\t\t\t\tupdateControlPointColor(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontrolPoints,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tindex,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolord(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t).toRgbString()\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t{ ! disableRemove &&\r\n\t\t\t\t\t\t\t\t\t\tcontrolPoints.length > 2 && (\r\n\t\t\t\t\t\t\t\t\t\t\t<HStack\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"components-custom-gradient-picker__remove-control-point-wrapper\"\r\n\t\t\t\t\t\t\t\t\t\t\t\talignment=\"center\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tremoveControlPoint(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontrolPoints,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tindex\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClose();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ __(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'Remove Control Point'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t</HStack>\r\n\t\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t</DropdownContentWrapper>\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\tstyle={ {\r\n\t\t\t\t\t\t\t\tleft: `${ point.position }%`,\r\n\t\t\t\t\t\t\t\ttransform: 'translateX( -50% )',\r\n\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t\t} ) }\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nfunction InsertPoint( {\r\n\tvalue: controlPoints,\r\n\tonChange,\r\n\tonOpenInserter,\r\n\tonCloseInserter,\r\n\tinsertPosition,\r\n\tdisableAlpha,\r\n\t__experimentalIsRenderedInSidebar,\r\n}: InsertPointProps ) {\r\n\tconst [ alreadyInsertedPoint, setAlreadyInsertedPoint ] = useState( false );\r\n\treturn (\r\n\t\t<GradientColorPickerDropdown\r\n\t\t\tisRenderedInSidebar={ __experimentalIsRenderedInSidebar }\r\n\t\t\tclassName=\"components-custom-gradient-picker__inserter\"\r\n\t\t\tonClose={ () => {\r\n\t\t\t\tonCloseInserter();\r\n\t\t\t} }\r\n\t\t\trenderToggle={ ( { isOpen, onToggle } ) => (\r\n\t\t\t\t<Button\r\n\t\t\t\t\taria-expanded={ isOpen }\r\n\t\t\t\t\taria-haspopup=\"true\"\r\n\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\tif ( isOpen ) {\r\n\t\t\t\t\t\t\tonCloseInserter();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tsetAlreadyInsertedPoint( false );\r\n\t\t\t\t\t\t\tonOpenInserter();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonToggle();\r\n\t\t\t\t\t} }\r\n\t\t\t\t\tclassName=\"components-custom-gradient-picker__insert-point-dropdown\"\r\n\t\t\t\t\ticon={ plus }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t\trenderContent={ () => (\r\n\t\t\t\t<DropdownContentWrapper paddingSize=\"none\">\r\n\t\t\t\t\t<ColorPicker\r\n\t\t\t\t\t\tenableAlpha={ ! disableAlpha }\r\n\t\t\t\t\t\tonChange={ ( color ) => {\r\n\t\t\t\t\t\t\tif ( ! alreadyInsertedPoint ) {\r\n\t\t\t\t\t\t\t\tonChange(\r\n\t\t\t\t\t\t\t\t\taddControlPoint(\r\n\t\t\t\t\t\t\t\t\t\tcontrolPoints,\r\n\t\t\t\t\t\t\t\t\t\tinsertPosition,\r\n\t\t\t\t\t\t\t\t\t\tcolord( color ).toRgbString()\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\tsetAlreadyInsertedPoint( true );\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tonChange(\r\n\t\t\t\t\t\t\t\t\tupdateControlPointColorByPosition(\r\n\t\t\t\t\t\t\t\t\t\tcontrolPoints,\r\n\t\t\t\t\t\t\t\t\t\tinsertPosition,\r\n\t\t\t\t\t\t\t\t\t\tcolord( color ).toRgbString()\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t/>\r\n\t\t\t\t</DropdownContentWrapper>\r\n\t\t\t) }\r\n\t\t\tstyle={\r\n\t\t\t\tinsertPosition !== null\r\n\t\t\t\t\t? {\r\n\t\t\t\t\t\t\tleft: `${ insertPosition }%`,\r\n\t\t\t\t\t\t\ttransform: 'translateX( -50% )',\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t: undefined\r\n\t\t\t}\r\n\t\t/>\r\n\t);\r\n}\r\nControlPoints.InsertPoint = InsertPoint;\r\n\r\nexport default ControlPoints;\r\n"],"mappings":"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","ignoreList":[]}