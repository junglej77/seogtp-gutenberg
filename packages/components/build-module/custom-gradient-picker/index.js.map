{"version":3,"names":["__","AnglePickerControl","CustomGradientBar","Flex","SelectControl","VStack","getGradientAstWithDefault","getLinearGradientRepresentation","getGradientAstWithControlPoints","getStopCssColor","serializeGradient","DEFAULT_LINEAR_GRADIENT_ANGLE","HORIZONTAL_GRADIENT_ORIENTATION","GRADIENT_OPTIONS","AccessoryWrapper","SelectWrapper","jsx","_jsx","jsxs","_jsxs","GradientAnglePicker","gradientAST","hasGradient","onChange","_gradientAST$orientat","angle","orientation","value","onAngleChange","newAngle","type","GradientTypePicker","onSetLinearGradient","undefined","onSetRadialGradient","restGradientAST","handleOnChange","next","__nextHasNoMarginBottom","className","label","labelPosition","options","size","CustomGradientPicker","__experimentalIsRenderedInSidebar","background","controlPoints","colorStops","map","colorStop","color","position","parseInt","length","spacing","children","newControlPoints","gap"],"sources":["@wordpress/components/src/custom-gradient-picker/index.tsx"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport { type LinearGradientNode } from 'gradient-parser';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport AnglePickerControl from '../angle-picker-control';\r\nimport CustomGradientBar from './gradient-bar';\r\nimport { Flex } from '../flex';\r\nimport SelectControl from '../select-control';\r\nimport { VStack } from '../v-stack';\r\nimport {\r\n\tgetGradientAstWithDefault,\r\n\tgetLinearGradientRepresentation,\r\n\tgetGradientAstWithControlPoints,\r\n\tgetStopCssColor,\r\n} from './utils';\r\nimport { serializeGradient } from './serializer';\r\nimport {\r\n\tDEFAULT_LINEAR_GRADIENT_ANGLE,\r\n\tHORIZONTAL_GRADIENT_ORIENTATION,\r\n\tGRADIENT_OPTIONS,\r\n} from './constants';\r\nimport {\r\n\tAccessoryWrapper,\r\n\tSelectWrapper,\r\n} from './styles/custom-gradient-picker-styles';\r\nimport type {\r\n\tCustomGradientPickerProps,\r\n\tGradientAnglePickerProps,\r\n\tGradientTypePickerProps,\r\n} from './types';\r\n\r\nconst GradientAnglePicker = ( {\r\n\tgradientAST,\r\n\thasGradient,\r\n\tonChange,\r\n}: GradientAnglePickerProps ) => {\r\n\tconst angle =\r\n\t\tgradientAST?.orientation?.value ?? DEFAULT_LINEAR_GRADIENT_ANGLE;\r\n\tconst onAngleChange = ( newAngle: number ) => {\r\n\t\tonChange(\r\n\t\t\tserializeGradient( {\r\n\t\t\t\t...gradientAST,\r\n\t\t\t\torientation: {\r\n\t\t\t\t\ttype: 'angular',\r\n\t\t\t\t\tvalue: `${ newAngle }`,\r\n\t\t\t\t},\r\n\t\t\t} )\r\n\t\t);\r\n\t};\r\n\treturn (\r\n\t\t<AnglePickerControl\r\n\t\t\tonChange={ onAngleChange }\r\n\t\t\tvalue={ hasGradient ? angle : '' }\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nconst GradientTypePicker = ( {\r\n\tgradientAST,\r\n\thasGradient,\r\n\tonChange,\r\n}: GradientTypePickerProps ) => {\r\n\tconst { type } = gradientAST;\r\n\r\n\tconst onSetLinearGradient = () => {\r\n\t\tonChange(\r\n\t\t\tserializeGradient( {\r\n\t\t\t\t...gradientAST,\r\n\t\t\t\torientation: gradientAST.orientation\r\n\t\t\t\t\t? undefined\r\n\t\t\t\t\t: HORIZONTAL_GRADIENT_ORIENTATION,\r\n\t\t\t\ttype: 'linear-gradient',\r\n\t\t\t} satisfies LinearGradientNode )\r\n\t\t);\r\n\t};\r\n\r\n\tconst onSetRadialGradient = () => {\r\n\t\tconst { orientation, ...restGradientAST } = gradientAST;\r\n\t\tonChange(\r\n\t\t\tserializeGradient( {\r\n\t\t\t\t...restGradientAST,\r\n\t\t\t\ttype: 'radial-gradient',\r\n\t\t\t} )\r\n\t\t);\r\n\t};\r\n\r\n\tconst handleOnChange = ( next: string ) => {\r\n\t\tif ( next === 'linear-gradient' ) {\r\n\t\t\tonSetLinearGradient();\r\n\t\t}\r\n\t\tif ( next === 'radial-gradient' ) {\r\n\t\t\tonSetRadialGradient();\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<SelectControl\r\n\t\t\t__nextHasNoMarginBottom\r\n\t\t\tclassName=\"components-custom-gradient-picker__type-picker\"\r\n\t\t\tlabel={ __( 'Type' ) }\r\n\t\t\tlabelPosition=\"top\"\r\n\t\t\tonChange={ handleOnChange }\r\n\t\t\toptions={ GRADIENT_OPTIONS }\r\n\t\t\tsize=\"__unstable-large\"\r\n\t\t\tvalue={ hasGradient ? type : undefined }\r\n\t\t/>\r\n\t);\r\n};\r\n\r\n/**\r\n * CustomGradientPicker is a React component that renders a UI for specifying\r\n * linear or radial gradients. Radial gradients are displayed in the picker as\r\n * a slice of the gradient from the center to the outside.\r\n *\r\n * ```jsx\r\n * import { CustomGradientPicker } from '@wordpress/components';\r\n * import { useState } from '@wordpress/element';\r\n *\r\n * const MyCustomGradientPicker = () => {\r\n *   const [ gradient, setGradient ] = useState();\r\n *\r\n *   return (\r\n *     <CustomGradientPicker\r\n *\t\t\tvalue={ gradient }\r\n *\t\t\tonChange={ setGradient }\r\n *     />\r\n *   );\r\n * };\r\n * ```\r\n */\r\nexport function CustomGradientPicker( {\r\n\tvalue,\r\n\tonChange,\r\n\t__experimentalIsRenderedInSidebar = false,\r\n}: CustomGradientPickerProps ) {\r\n\tconst { gradientAST, hasGradient } = getGradientAstWithDefault( value );\r\n\r\n\t// On radial gradients the bar should display a linear gradient.\r\n\t// On radial gradients the bar represents a slice of the gradient from the center until the outside.\r\n\t// On liner gradients the bar represents the color stops from left to right independently of the angle.\r\n\tconst background = getLinearGradientRepresentation( gradientAST );\r\n\r\n\t// Control points color option may be hex from presets, custom colors will be rgb.\r\n\t// The position should always be a percentage.\r\n\tconst controlPoints = gradientAST.colorStops.map( ( colorStop ) => {\r\n\t\treturn {\r\n\t\t\tcolor: getStopCssColor( colorStop ),\r\n\t\t\t// Although it's already been checked by `hasUnsupportedLength` in `getGradientAstWithDefault`,\r\n\t\t\t// TypeScript doesn't know that `colorStop.length` is not undefined here.\r\n\t\t\t// @ts-expect-error\r\n\t\t\tposition: parseInt( colorStop.length.value ),\r\n\t\t};\r\n\t} );\r\n\r\n\treturn (\r\n\t\t<VStack spacing={ 4 } className=\"components-custom-gradient-picker\">\r\n\t\t\t<CustomGradientBar\r\n\t\t\t\t__experimentalIsRenderedInSidebar={\r\n\t\t\t\t\t__experimentalIsRenderedInSidebar\r\n\t\t\t\t}\r\n\t\t\t\tbackground={ background }\r\n\t\t\t\thasGradient={ hasGradient }\r\n\t\t\t\tvalue={ controlPoints }\r\n\t\t\t\tonChange={ ( newControlPoints ) => {\r\n\t\t\t\t\tonChange(\r\n\t\t\t\t\t\tserializeGradient(\r\n\t\t\t\t\t\t\tgetGradientAstWithControlPoints(\r\n\t\t\t\t\t\t\t\tgradientAST,\r\n\t\t\t\t\t\t\t\tnewControlPoints\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t);\r\n\t\t\t\t} }\r\n\t\t\t/>\r\n\t\t\t<Flex\r\n\t\t\t\tgap={ 3 }\r\n\t\t\t\tclassName=\"components-custom-gradient-picker__ui-line\"\r\n\t\t\t>\r\n\t\t\t\t<SelectWrapper>\r\n\t\t\t\t\t<GradientTypePicker\r\n\t\t\t\t\t\tgradientAST={ gradientAST }\r\n\t\t\t\t\t\thasGradient={ hasGradient }\r\n\t\t\t\t\t\tonChange={ onChange }\r\n\t\t\t\t\t/>\r\n\t\t\t\t</SelectWrapper>\r\n\t\t\t\t<AccessoryWrapper>\r\n\t\t\t\t\t{ gradientAST.type === 'linear-gradient' && (\r\n\t\t\t\t\t\t<GradientAnglePicker\r\n\t\t\t\t\t\t\tgradientAST={ gradientAST }\r\n\t\t\t\t\t\t\thasGradient={ hasGradient }\r\n\t\t\t\t\t\t\tonChange={ onChange }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) }\r\n\t\t\t\t</AccessoryWrapper>\r\n\t\t\t</Flex>\r\n\t\t</VStack>\r\n\t);\r\n}\r\n\r\nexport default CustomGradientPicker;\r\n"],"mappings":"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","ignoreList":[]}