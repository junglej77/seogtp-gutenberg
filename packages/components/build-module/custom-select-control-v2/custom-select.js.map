{"version":3,"names":["Ariakit","useStoreState","createContext","useCallback","useMemo","__","sprintf","VisuallyHidden","Styled","InputBase","SelectControlChevronDown","BaseControl","jsx","_jsx","jsxs","_jsxs","CustomSelectContext","undefined","defaultRenderSelectedValue","value","isValueEmpty","Array","isArray","length","CustomSelectButton","renderSelectedValue","size","store","restProps","currentValue","computedRenderSelectedValue","Select","hasCustomRenderProp","children","_CustomSelect","props","hideLabelFromVision","label","className","isLegacy","onSelectPopoverKeyDown","e","stopPropagation","contextValue","SelectLabel","render","VisualLabel","as","__next40pxDefaultSize","suffix","showOnKeyDown","SelectPopover","gutter","sameWidth","slide","onKeyDown","flip","Provider"],"sources":["@wordpress/components/src/custom-select-control-v2/custom-select.tsx"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport * as Ariakit from '@ariakit/react';\r\nimport { useStoreState } from '@ariakit/react';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { createContext, useCallback, useMemo } from '@wordpress/element';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { VisuallyHidden } from '..';\r\nimport * as Styled from './styles';\r\nimport type {\r\n\tCustomSelectContext as CustomSelectContextType,\r\n\tCustomSelectStore,\r\n\tCustomSelectButtonProps,\r\n\tCustomSelectButtonSize,\r\n\t_CustomSelectInternalProps,\r\n\t_CustomSelectProps,\r\n} from './types';\r\nimport InputBase from '../input-control/input-base';\r\nimport SelectControlChevronDown from '../select-control/chevron-down';\r\nimport BaseControl from '../base-control';\r\n\r\nexport const CustomSelectContext =\r\n\tcreateContext< CustomSelectContextType >( undefined );\r\n\r\nfunction defaultRenderSelectedValue(\r\n\tvalue: CustomSelectButtonProps[ 'value' ]\r\n) {\r\n\tconst isValueEmpty = Array.isArray( value )\r\n\t\t? value.length === 0\r\n\t\t: value === undefined || value === null;\r\n\r\n\tif ( isValueEmpty ) {\r\n\t\treturn __( 'Select an item' );\r\n\t}\r\n\r\n\tif ( Array.isArray( value ) ) {\r\n\t\treturn value.length === 1\r\n\t\t\t? value[ 0 ]\r\n\t\t\t: // translators: %s: number of items selected (it will always be 2 or more items)\r\n\t\t\t  sprintf( __( '%s items selected' ), value.length );\r\n\t}\r\n\r\n\treturn value;\r\n}\r\n\r\nconst CustomSelectButton = ( {\r\n\trenderSelectedValue,\r\n\tsize = 'default',\r\n\tstore,\r\n\t...restProps\r\n}: Omit<\r\n\tReact.ComponentProps< typeof Ariakit.Select > &\r\n\t\tCustomSelectButtonProps &\r\n\t\tCustomSelectButtonSize &\r\n\t\tCustomSelectStore,\r\n\t'onChange'\r\n> ) => {\r\n\tconst { value: currentValue } = useStoreState( store );\r\n\r\n\tconst computedRenderSelectedValue = useMemo(\r\n\t\t() => renderSelectedValue ?? defaultRenderSelectedValue,\r\n\t\t[ renderSelectedValue ]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<Styled.Select\r\n\t\t\t{ ...restProps }\r\n\t\t\tsize={ size }\r\n\t\t\thasCustomRenderProp={ !! renderSelectedValue }\r\n\t\t\tstore={ store }\r\n\t\t>\r\n\t\t\t{ computedRenderSelectedValue( currentValue ) }\r\n\t\t</Styled.Select>\r\n\t);\r\n};\r\n\r\nfunction _CustomSelect(\r\n\tprops: _CustomSelectInternalProps &\r\n\t\t_CustomSelectProps &\r\n\t\tCustomSelectStore &\r\n\t\tCustomSelectButtonSize\r\n) {\r\n\tconst {\r\n\t\tchildren,\r\n\t\thideLabelFromVision = false,\r\n\t\tlabel,\r\n\t\tsize,\r\n\t\tstore,\r\n\t\tclassName,\r\n\t\tisLegacy = false,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst onSelectPopoverKeyDown: React.KeyboardEventHandler< HTMLDivElement > =\r\n\t\tuseCallback(\r\n\t\t\t( e ) => {\r\n\t\t\t\tif ( isLegacy ) {\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t[ isLegacy ]\r\n\t\t);\r\n\r\n\tconst contextValue = useMemo( () => ( { store, size } ), [ store, size ] );\r\n\r\n\treturn (\r\n\t\t// Where should `restProps` be forwarded to?\r\n\t\t<div className={ className }>\r\n\t\t\t<Ariakit.SelectLabel\r\n\t\t\t\tstore={ store }\r\n\t\t\t\trender={\r\n\t\t\t\t\thideLabelFromVision ? (\r\n\t\t\t\t\t\t// @ts-expect-error `children` are passed via the render prop\r\n\t\t\t\t\t\t<VisuallyHidden />\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t// @ts-expect-error `children` are passed via the render prop\r\n\t\t\t\t\t\t<BaseControl.VisualLabel as=\"div\" />\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t{ label }\r\n\t\t\t</Ariakit.SelectLabel>\r\n\t\t\t<InputBase\r\n\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\tsize={ size }\r\n\t\t\t\tsuffix={ <SelectControlChevronDown /> }\r\n\t\t\t>\r\n\t\t\t\t<CustomSelectButton\r\n\t\t\t\t\t{ ...restProps }\r\n\t\t\t\t\tsize={ size }\r\n\t\t\t\t\tstore={ store }\r\n\t\t\t\t\t// Match legacy behavior (move selection rather than open the popover)\r\n\t\t\t\t\tshowOnKeyDown={ ! isLegacy }\r\n\t\t\t\t/>\r\n\t\t\t\t<Styled.SelectPopover\r\n\t\t\t\t\tgutter={ 12 }\r\n\t\t\t\t\tstore={ store }\r\n\t\t\t\t\tsameWidth\r\n\t\t\t\t\tslide={ false }\r\n\t\t\t\t\tonKeyDown={ onSelectPopoverKeyDown }\r\n\t\t\t\t\t// Match legacy behavior\r\n\t\t\t\t\tflip={ ! isLegacy }\r\n\t\t\t\t>\r\n\t\t\t\t\t<CustomSelectContext.Provider value={ contextValue }>\r\n\t\t\t\t\t\t{ children }\r\n\t\t\t\t\t</CustomSelectContext.Provider>\r\n\t\t\t\t</Styled.SelectPopover>\r\n\t\t\t</InputBase>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default _CustomSelect;\r\n"],"mappings":"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","ignoreList":[]}