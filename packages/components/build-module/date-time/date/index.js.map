{"version":3,"names":["format","isSameDay","subMonths","addMonths","startOfDay","isEqual","addDays","subWeeks","addWeeks","isSameMonth","startOfWeek","endOfWeek","__","_n","sprintf","isRTL","arrowLeft","arrowRight","dateI18n","getSettings","useState","useRef","useEffect","useLilius","Wrapper","Navigator","NavigatorHeading","Calendar","DayOfWeek","DayButton","inputToDate","Button","TIMEZONELESS_FORMAT","jsx","_jsx","jsxs","_jsxs","DatePicker","currentDate","onChange","events","isInvalidDate","onMonthPreviewed","weekStartsOn","date","Date","calendar","viewing","setSelected","setViewing","isSelected","viewPreviousMonth","viewNextMonth","selected","focusable","setFocusable","isFocusWithinCalendar","setIsFocusWithinCalendar","prevCurrentDate","setPrevCurrentDate","className","role","children","icon","variant","onClick","level","getTimezoneOffset","onFocus","onBlur","map","day","toString","week","index","Day","column","isFocusable","isFocusAllowed","isToday","isInvalid","numEvents","filter","event","length","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","onKeyDown","nextFocusable","key","preventDefault","ref","current","focus","disabled","tabIndex","getDayLabel","hasEvents","formats","localizedDate"],"sources":["@wordpress/components/src/date-time/date/index.tsx"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport {\r\n\tformat,\r\n\tisSameDay,\r\n\tsubMonths,\r\n\taddMonths,\r\n\tstartOfDay,\r\n\tisEqual,\r\n\taddDays,\r\n\tsubWeeks,\r\n\taddWeeks,\r\n\tisSameMonth,\r\n\tstartOfWeek,\r\n\tendOfWeek,\r\n} from 'date-fns';\r\nimport type { KeyboardEventHandler } from 'react';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { __, _n, sprintf, isRTL } from '@wordpress/i18n';\r\nimport { arrowLeft, arrowRight } from '@wordpress/icons';\r\nimport { dateI18n, getSettings } from '@wordpress/date';\r\nimport { useState, useRef, useEffect } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { useLilius } from './use-lilius';\r\nimport type { DatePickerProps } from '../types';\r\nimport {\r\n\tWrapper,\r\n\tNavigator,\r\n\tNavigatorHeading,\r\n\tCalendar,\r\n\tDayOfWeek,\r\n\tDayButton,\r\n} from './styles';\r\nimport { inputToDate } from '../utils';\r\nimport Button from '../../button';\r\nimport { TIMEZONELESS_FORMAT } from '../constants';\r\n\r\n/**\r\n * DatePicker is a React component that renders a calendar for date selection.\r\n *\r\n * ```jsx\r\n * import { DatePicker } from '@wordpress/components';\r\n * import { useState } from '@wordpress/element';\r\n *\r\n * const MyDatePicker = () => {\r\n *   const [ date, setDate ] = useState( new Date() );\r\n *\r\n *   return (\r\n *     <DatePicker\r\n *       currentDate={ date }\r\n *       onChange={ ( newDate ) => setDate( newDate ) }\r\n *     />\r\n *   );\r\n * };\r\n * ```\r\n */\r\nexport function DatePicker( {\r\n\tcurrentDate,\r\n\tonChange,\r\n\tevents = [],\r\n\tisInvalidDate,\r\n\tonMonthPreviewed,\r\n\tstartOfWeek: weekStartsOn = 0,\r\n}: DatePickerProps ) {\r\n\tconst date = currentDate ? inputToDate( currentDate ) : new Date();\r\n\r\n\tconst {\r\n\t\tcalendar,\r\n\t\tviewing,\r\n\t\tsetSelected,\r\n\t\tsetViewing,\r\n\t\tisSelected,\r\n\t\tviewPreviousMonth,\r\n\t\tviewNextMonth,\r\n\t} = useLilius( {\r\n\t\tselected: [ startOfDay( date ) ],\r\n\t\tviewing: startOfDay( date ),\r\n\t\tweekStartsOn,\r\n\t} );\r\n\r\n\t// Used to implement a roving tab index. Tracks the day that receives focus\r\n\t// when the user tabs into the calendar.\r\n\tconst [ focusable, setFocusable ] = useState( startOfDay( date ) );\r\n\r\n\t// Allows us to only programmatically focus() a day when focus was already\r\n\t// within the calendar. This stops us stealing focus from e.g. a TimePicker\r\n\t// input.\r\n\tconst [ isFocusWithinCalendar, setIsFocusWithinCalendar ] =\r\n\t\tuseState( false );\r\n\r\n\t// Update internal state when currentDate prop changes.\r\n\tconst [ prevCurrentDate, setPrevCurrentDate ] = useState( currentDate );\r\n\tif ( currentDate !== prevCurrentDate ) {\r\n\t\tsetPrevCurrentDate( currentDate );\r\n\t\tsetSelected( [ startOfDay( date ) ] );\r\n\t\tsetViewing( startOfDay( date ) );\r\n\t\tsetFocusable( startOfDay( date ) );\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Wrapper\r\n\t\t\tclassName=\"components-datetime__date\"\r\n\t\t\trole=\"application\"\r\n\t\t\taria-label={ __( 'Calendar' ) }\r\n\t\t>\r\n\t\t\t<Navigator>\r\n\t\t\t\t<Button\r\n\t\t\t\t\ticon={ isRTL() ? arrowRight : arrowLeft }\r\n\t\t\t\t\tvariant=\"tertiary\"\r\n\t\t\t\t\taria-label={ __( 'View previous month' ) }\r\n\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\tviewPreviousMonth();\r\n\t\t\t\t\t\tsetFocusable( subMonths( focusable, 1 ) );\r\n\t\t\t\t\t\tonMonthPreviewed?.(\r\n\t\t\t\t\t\t\tformat(\r\n\t\t\t\t\t\t\t\tsubMonths( viewing, 1 ),\r\n\t\t\t\t\t\t\t\tTIMEZONELESS_FORMAT\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} }\r\n\t\t\t\t/>\r\n\t\t\t\t<NavigatorHeading level={ 3 }>\r\n\t\t\t\t\t<strong>\r\n\t\t\t\t\t\t{ dateI18n(\r\n\t\t\t\t\t\t\t'F',\r\n\t\t\t\t\t\t\tviewing,\r\n\t\t\t\t\t\t\t-viewing.getTimezoneOffset()\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t</strong>{ ' ' }\r\n\t\t\t\t\t{ dateI18n( 'Y', viewing, -viewing.getTimezoneOffset() ) }\r\n\t\t\t\t</NavigatorHeading>\r\n\t\t\t\t<Button\r\n\t\t\t\t\ticon={ isRTL() ? arrowLeft : arrowRight }\r\n\t\t\t\t\tvariant=\"tertiary\"\r\n\t\t\t\t\taria-label={ __( 'View next month' ) }\r\n\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\tviewNextMonth();\r\n\t\t\t\t\t\tsetFocusable( addMonths( focusable, 1 ) );\r\n\t\t\t\t\t\tonMonthPreviewed?.(\r\n\t\t\t\t\t\t\tformat(\r\n\t\t\t\t\t\t\t\taddMonths( viewing, 1 ),\r\n\t\t\t\t\t\t\t\tTIMEZONELESS_FORMAT\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} }\r\n\t\t\t\t/>\r\n\t\t\t</Navigator>\r\n\t\t\t<Calendar\r\n\t\t\t\tonFocus={ () => setIsFocusWithinCalendar( true ) }\r\n\t\t\t\tonBlur={ () => setIsFocusWithinCalendar( false ) }\r\n\t\t\t>\r\n\t\t\t\t{ calendar[ 0 ][ 0 ].map( ( day ) => (\r\n\t\t\t\t\t<DayOfWeek key={ day.toString() }>\r\n\t\t\t\t\t\t{ dateI18n( 'D', day, -day.getTimezoneOffset() ) }\r\n\t\t\t\t\t</DayOfWeek>\r\n\t\t\t\t) ) }\r\n\t\t\t\t{ calendar[ 0 ].map( ( week ) =>\r\n\t\t\t\t\tweek.map( ( day, index ) => {\r\n\t\t\t\t\t\tif ( ! isSameMonth( day, viewing ) ) {\r\n\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<Day\r\n\t\t\t\t\t\t\t\tkey={ day.toString() }\r\n\t\t\t\t\t\t\t\tday={ day }\r\n\t\t\t\t\t\t\t\tcolumn={ index + 1 }\r\n\t\t\t\t\t\t\t\tisSelected={ isSelected( day ) }\r\n\t\t\t\t\t\t\t\tisFocusable={ isEqual( day, focusable ) }\r\n\t\t\t\t\t\t\t\tisFocusAllowed={ isFocusWithinCalendar }\r\n\t\t\t\t\t\t\t\tisToday={ isSameDay( day, new Date() ) }\r\n\t\t\t\t\t\t\t\tisInvalid={\r\n\t\t\t\t\t\t\t\t\tisInvalidDate ? isInvalidDate( day ) : false\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tnumEvents={\r\n\t\t\t\t\t\t\t\t\tevents.filter( ( event ) =>\r\n\t\t\t\t\t\t\t\t\t\tisSameDay( event.date, day )\r\n\t\t\t\t\t\t\t\t\t).length\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\t\t\t\tsetSelected( [ day ] );\r\n\t\t\t\t\t\t\t\t\tsetFocusable( day );\r\n\t\t\t\t\t\t\t\t\tonChange?.(\r\n\t\t\t\t\t\t\t\t\t\tformat(\r\n\t\t\t\t\t\t\t\t\t\t\t// Don't change the selected date's time fields.\r\n\t\t\t\t\t\t\t\t\t\t\tnew Date(\r\n\t\t\t\t\t\t\t\t\t\t\t\tday.getFullYear(),\r\n\t\t\t\t\t\t\t\t\t\t\t\tday.getMonth(),\r\n\t\t\t\t\t\t\t\t\t\t\t\tday.getDate(),\r\n\t\t\t\t\t\t\t\t\t\t\t\tdate.getHours(),\r\n\t\t\t\t\t\t\t\t\t\t\t\tdate.getMinutes(),\r\n\t\t\t\t\t\t\t\t\t\t\t\tdate.getSeconds(),\r\n\t\t\t\t\t\t\t\t\t\t\t\tdate.getMilliseconds()\r\n\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\tTIMEZONELESS_FORMAT\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t\tonKeyDown={ ( event ) => {\r\n\t\t\t\t\t\t\t\t\tlet nextFocusable;\r\n\t\t\t\t\t\t\t\t\tif ( event.key === 'ArrowLeft' ) {\r\n\t\t\t\t\t\t\t\t\t\tnextFocusable = addDays(\r\n\t\t\t\t\t\t\t\t\t\t\tday,\r\n\t\t\t\t\t\t\t\t\t\t\tisRTL() ? 1 : -1\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif ( event.key === 'ArrowRight' ) {\r\n\t\t\t\t\t\t\t\t\t\tnextFocusable = addDays(\r\n\t\t\t\t\t\t\t\t\t\t\tday,\r\n\t\t\t\t\t\t\t\t\t\t\tisRTL() ? -1 : 1\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif ( event.key === 'ArrowUp' ) {\r\n\t\t\t\t\t\t\t\t\t\tnextFocusable = subWeeks( day, 1 );\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif ( event.key === 'ArrowDown' ) {\r\n\t\t\t\t\t\t\t\t\t\tnextFocusable = addWeeks( day, 1 );\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif ( event.key === 'PageUp' ) {\r\n\t\t\t\t\t\t\t\t\t\tnextFocusable = subMonths( day, 1 );\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif ( event.key === 'PageDown' ) {\r\n\t\t\t\t\t\t\t\t\t\tnextFocusable = addMonths( day, 1 );\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif ( event.key === 'Home' ) {\r\n\t\t\t\t\t\t\t\t\t\tnextFocusable = startOfWeek( day );\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif ( event.key === 'End' ) {\r\n\t\t\t\t\t\t\t\t\t\tnextFocusable = startOfDay(\r\n\t\t\t\t\t\t\t\t\t\t\tendOfWeek( day )\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif ( nextFocusable ) {\r\n\t\t\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\tsetFocusable( nextFocusable );\r\n\t\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\t\t! isSameMonth(\r\n\t\t\t\t\t\t\t\t\t\t\t\tnextFocusable,\r\n\t\t\t\t\t\t\t\t\t\t\t\tviewing\r\n\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\tsetViewing( nextFocusable );\r\n\t\t\t\t\t\t\t\t\t\t\tonMonthPreviewed?.(\r\n\t\t\t\t\t\t\t\t\t\t\t\tformat(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnextFocusable,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tTIMEZONELESS_FORMAT\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} )\r\n\t\t\t\t) }\r\n\t\t\t</Calendar>\r\n\t\t</Wrapper>\r\n\t);\r\n}\r\n\r\ntype DayProps = {\r\n\tday: Date;\r\n\tcolumn: number;\r\n\tisSelected: boolean;\r\n\tisFocusable: boolean;\r\n\tisFocusAllowed: boolean;\r\n\tisToday: boolean;\r\n\tnumEvents: number;\r\n\tisInvalid: boolean;\r\n\tonClick: () => void;\r\n\tonKeyDown: KeyboardEventHandler;\r\n};\r\n\r\nfunction Day( {\r\n\tday,\r\n\tcolumn,\r\n\tisSelected,\r\n\tisFocusable,\r\n\tisFocusAllowed,\r\n\tisToday,\r\n\tisInvalid,\r\n\tnumEvents,\r\n\tonClick,\r\n\tonKeyDown,\r\n}: DayProps ) {\r\n\tconst ref = useRef< HTMLButtonElement >();\r\n\r\n\t// Focus the day when it becomes focusable, e.g. because an arrow key is\r\n\t// pressed. Only do this if focus is allowed - this stops us stealing focus\r\n\t// from e.g. a TimePicker input.\r\n\tuseEffect( () => {\r\n\t\tif ( ref.current && isFocusable && isFocusAllowed ) {\r\n\t\t\tref.current.focus();\r\n\t\t}\r\n\t\t// isFocusAllowed is not a dep as there is no point calling focus() on\r\n\t\t// an already focused element.\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [ isFocusable ] );\r\n\r\n\treturn (\r\n\t\t<DayButton\r\n\t\t\tref={ ref }\r\n\t\t\tclassName=\"components-datetime__date__day\" // Unused, for backwards compatibility.\r\n\t\t\tdisabled={ isInvalid }\r\n\t\t\ttabIndex={ isFocusable ? 0 : -1 }\r\n\t\t\taria-label={ getDayLabel( day, isSelected, numEvents ) }\r\n\t\t\tcolumn={ column }\r\n\t\t\tisSelected={ isSelected }\r\n\t\t\tisToday={ isToday }\r\n\t\t\thasEvents={ numEvents > 0 }\r\n\t\t\tonClick={ onClick }\r\n\t\t\tonKeyDown={ onKeyDown }\r\n\t\t>\r\n\t\t\t{ dateI18n( 'j', day, -day.getTimezoneOffset() ) }\r\n\t\t</DayButton>\r\n\t);\r\n}\r\n\r\nfunction getDayLabel( date: Date, isSelected: boolean, numEvents: number ) {\r\n\tconst { formats } = getSettings();\r\n\tconst localizedDate = dateI18n(\r\n\t\tformats.date,\r\n\t\tdate,\r\n\t\t-date.getTimezoneOffset()\r\n\t);\r\n\tif ( isSelected && numEvents > 0 ) {\r\n\t\treturn sprintf(\r\n\t\t\t// translators: 1: The calendar date. 2: Number of events on the calendar date.\r\n\t\t\t_n(\r\n\t\t\t\t'%1$s. Selected. There is %2$d event',\r\n\t\t\t\t'%1$s. Selected. There are %2$d events',\r\n\t\t\t\tnumEvents\r\n\t\t\t),\r\n\t\t\tlocalizedDate,\r\n\t\t\tnumEvents\r\n\t\t);\r\n\t} else if ( isSelected ) {\r\n\t\treturn sprintf(\r\n\t\t\t// translators: %s: The calendar date.\r\n\t\t\t__( '%1$s. Selected' ),\r\n\t\t\tlocalizedDate\r\n\t\t);\r\n\t} else if ( numEvents > 0 ) {\r\n\t\treturn sprintf(\r\n\t\t\t// translators: 1: The calendar date. 2: Number of events on the calendar date.\r\n\t\t\t_n(\r\n\t\t\t\t'%1$s. There is %2$d event',\r\n\t\t\t\t'%1$s. There are %2$d events',\r\n\t\t\t\tnumEvents\r\n\t\t\t),\r\n\t\t\tlocalizedDate,\r\n\t\t\tnumEvents\r\n\t\t);\r\n\t}\r\n\treturn localizedDate;\r\n}\r\n\r\nexport default DatePicker;\r\n"],"mappings":"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","ignoreList":[]}