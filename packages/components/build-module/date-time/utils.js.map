{"version":3,"names":["toDate","COMMIT","PRESS_DOWN","PRESS_UP","inputToDate","input","Date","from12hTo24h","hours","isPm","from24hTo12h","buildPadInputStateReducer","pad","state","action","nextState","type","value","undefined","toString","padStart","validateInputElementTarget","event","_ownerDocument$defaul","HTMLInputElementInstance","target","ownerDocument","defaultView","HTMLInputElement","validity","valid"],"sources":["@wordpress/components/src/date-time/utils.ts"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport { toDate } from 'date-fns';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport type { InputState } from '../input-control/reducer/state';\r\nimport type { InputAction } from '../input-control/reducer/actions';\r\nimport { COMMIT, PRESS_DOWN, PRESS_UP } from '../input-control/reducer/actions';\r\n\r\n/**\r\n * Like date-fn's toDate, but tries to guess the format when a string is\r\n * given.\r\n *\r\n * @param input Value to turn into a date.\r\n */\r\nexport function inputToDate( input: Date | string | number ): Date {\r\n\tif ( typeof input === 'string' ) {\r\n\t\treturn new Date( input );\r\n\t}\r\n\treturn toDate( input );\r\n}\r\n\r\n/**\r\n * Converts a 12-hour time to a 24-hour time.\r\n * @param hours\r\n * @param isPm\r\n */\r\nexport function from12hTo24h( hours: number, isPm: boolean ) {\r\n\treturn isPm ? ( ( hours % 12 ) + 12 ) % 24 : hours % 12;\r\n}\r\n\r\n/**\r\n * Converts a 24-hour time to a 12-hour time.\r\n * @param hours\r\n */\r\nexport function from24hTo12h( hours: number ) {\r\n\treturn hours % 12 || 12;\r\n}\r\n\r\n/**\r\n * Creates an InputControl reducer used to pad an input so that it is always a\r\n * given width. For example, the hours and minutes inputs are padded to 2 so\r\n * that '4' appears as '04'.\r\n *\r\n * @param pad How many digits the value should be.\r\n */\r\nexport function buildPadInputStateReducer( pad: number ) {\r\n\treturn ( state: InputState, action: InputAction ) => {\r\n\t\tconst nextState = { ...state };\r\n\t\tif (\r\n\t\t\taction.type === COMMIT ||\r\n\t\t\taction.type === PRESS_UP ||\r\n\t\t\taction.type === PRESS_DOWN\r\n\t\t) {\r\n\t\t\tif ( nextState.value !== undefined ) {\r\n\t\t\t\tnextState.value = nextState.value\r\n\t\t\t\t\t.toString()\r\n\t\t\t\t\t.padStart( pad, '0' );\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn nextState;\r\n\t};\r\n}\r\n\r\n/**\r\n * Validates the target of a React event to ensure it is an input element and\r\n * that the input is valid.\r\n * @param event\r\n */\r\nexport function validateInputElementTarget( event: React.SyntheticEvent ) {\r\n\t// `instanceof` checks need to get the instance definition from the\r\n\t// corresponding window object â€” therefore, the following logic makes\r\n\t// the component work correctly even when rendered inside an iframe.\r\n\tconst HTMLInputElementInstance =\r\n\t\t( event.target as HTMLInputElement )?.ownerDocument.defaultView\r\n\t\t\t?.HTMLInputElement ?? HTMLInputElement;\r\n\r\n\tif ( ! ( event.target instanceof HTMLInputElementInstance ) ) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\treturn event.target.validity.valid;\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,MAAM,QAAQ,UAAU;;AAEjC;AACA;AACA;;AAGA,SAASC,MAAM,EAAEC,UAAU,EAAEC,QAAQ,QAAQ,kCAAkC;;AAE/E;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,WAAWA,CAAEC,KAA6B,EAAS;EAClE,IAAK,OAAOA,KAAK,KAAK,QAAQ,EAAG;IAChC,OAAO,IAAIC,IAAI,CAAED,KAAM,CAAC;EACzB;EACA,OAAOL,MAAM,CAAEK,KAAM,CAAC;AACvB;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASE,YAAYA,CAAEC,KAAa,EAAEC,IAAa,EAAG;EAC5D,OAAOA,IAAI,GAAG,CAAID,KAAK,GAAG,EAAE,GAAK,EAAE,IAAK,EAAE,GAAGA,KAAK,GAAG,EAAE;AACxD;;AAEA;AACA;AACA;AACA;AACA,OAAO,SAASE,YAAYA,CAAEF,KAAa,EAAG;EAC7C,OAAOA,KAAK,GAAG,EAAE,IAAI,EAAE;AACxB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASG,yBAAyBA,CAAEC,GAAW,EAAG;EACxD,OAAO,CAAEC,KAAiB,EAAEC,MAAmB,KAAM;IACpD,MAAMC,SAAS,GAAG;MAAE,GAAGF;IAAM,CAAC;IAC9B,IACCC,MAAM,CAACE,IAAI,KAAKf,MAAM,IACtBa,MAAM,CAACE,IAAI,KAAKb,QAAQ,IACxBW,MAAM,CAACE,IAAI,KAAKd,UAAU,EACzB;MACD,IAAKa,SAAS,CAACE,KAAK,KAAKC,SAAS,EAAG;QACpCH,SAAS,CAACE,KAAK,GAAGF,SAAS,CAACE,KAAK,CAC/BE,QAAQ,CAAC,CAAC,CACVC,QAAQ,CAAER,GAAG,EAAE,GAAI,CAAC;MACvB;IACD;IACA,OAAOG,SAAS;EACjB,CAAC;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASM,0BAA0BA,CAAEC,KAA2B,EAAG;EAAA,IAAAC,qBAAA;EACzE;EACA;EACA;EACA,MAAMC,wBAAwB,IAAAD,qBAAA,GAC3BD,KAAK,CAACG,MAAM,EAAwBC,aAAa,CAACC,WAAW,EAC5DC,gBAAgB,cAAAL,qBAAA,cAAAA,qBAAA,GAAIK,gBAAgB;EAExC,IAAK,EAAIN,KAAK,CAACG,MAAM,YAAYD,wBAAwB,CAAE,EAAG;IAC7D,OAAO,KAAK;EACb;EAEA,OAAOF,KAAK,CAACG,MAAM,CAACI,QAAQ,CAACC,KAAK;AACnC","ignoreList":[]}