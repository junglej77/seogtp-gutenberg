{"version":3,"names":["clsx","__","useState","upload","Icon","getFilesFromDataTransfer","__experimentalUseDropZone","useDropZone","jsx","_jsx","jsxs","_jsxs","DropZoneComponent","className","label","onFilesDrop","onHTMLDrop","onDrop","restProps","isDraggingOverDocument","setIsDraggingOverDocument","isDraggingOverElement","setIsDraggingOverElement","type","setType","ref","event","files","dataTransfer","html","getData","length","onDragStart","_type","types","includes","onDragEnd","undefined","onDragEnter","onDragLeave","classes","children","icon"],"sources":["@wordpress/components/src/drop-zone/index.tsx"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useState } from '@wordpress/element';\r\nimport { upload, Icon } from '@wordpress/icons';\r\nimport { getFilesFromDataTransfer } from '@wordpress/dom';\r\nimport { __experimentalUseDropZone as useDropZone } from '@wordpress/compose';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport type { DropType, DropZoneProps } from './types';\r\nimport type { WordPressComponentProps } from '../context';\r\n\r\n/**\r\n * `DropZone` is a component creating a drop zone area taking the full size of its parent element. It supports dropping files, HTML content or any other HTML drop event.\r\n *\r\n * ```jsx\r\n * import { DropZone } from '@wordpress/components';\r\n * import { useState } from '@wordpress/element';\r\n *\r\n * const MyDropZone = () => {\r\n *   const [ hasDropped, setHasDropped ] = useState( false );\r\n *\r\n *   return (\r\n *     <div>\r\n *       { hasDropped ? 'Dropped!' : 'Drop something here' }\r\n *       <DropZone\r\n *         onFilesDrop={ () => setHasDropped( true ) }\r\n *         onHTMLDrop={ () => setHasDropped( true ) }\r\n *         onDrop={ () => setHasDropped( true ) }\r\n *       />\r\n *     </div>\r\n *   );\r\n * }\r\n * ```\r\n */\r\nexport function DropZoneComponent( {\r\n\tclassName,\r\n\tlabel,\r\n\tonFilesDrop,\r\n\tonHTMLDrop,\r\n\tonDrop,\r\n\t...restProps\r\n}: WordPressComponentProps< DropZoneProps, 'div', false > ) {\r\n\tconst [ isDraggingOverDocument, setIsDraggingOverDocument ] =\r\n\t\tuseState< boolean >();\r\n\tconst [ isDraggingOverElement, setIsDraggingOverElement ] =\r\n\t\tuseState< boolean >();\r\n\tconst [ type, setType ] = useState< DropType >();\r\n\tconst ref = useDropZone( {\r\n\t\tonDrop( event ) {\r\n\t\t\tconst files = event.dataTransfer\r\n\t\t\t\t? getFilesFromDataTransfer( event.dataTransfer )\r\n\t\t\t\t: [];\r\n\t\t\tconst html = event.dataTransfer?.getData( 'text/html' );\r\n\r\n\t\t\t/**\r\n\t\t\t * From Windows Chrome 96, the `event.dataTransfer` returns both file object and HTML.\r\n\t\t\t * The order of the checks is important to recognize the HTML drop.\r\n\t\t\t */\r\n\t\t\tif ( html && onHTMLDrop ) {\r\n\t\t\t\tonHTMLDrop( html );\r\n\t\t\t} else if ( files.length && onFilesDrop ) {\r\n\t\t\t\tonFilesDrop( files );\r\n\t\t\t} else if ( onDrop ) {\r\n\t\t\t\tonDrop( event );\r\n\t\t\t}\r\n\t\t},\r\n\t\tonDragStart( event ) {\r\n\t\t\tsetIsDraggingOverDocument( true );\r\n\r\n\t\t\tlet _type: DropType = 'default';\r\n\r\n\t\t\t/**\r\n\t\t\t * From Windows Chrome 96, the `event.dataTransfer` returns both file object and HTML.\r\n\t\t\t * The order of the checks is important to recognize the HTML drop.\r\n\t\t\t */\r\n\t\t\tif ( event.dataTransfer?.types.includes( 'text/html' ) ) {\r\n\t\t\t\t_type = 'html';\r\n\t\t\t} else if (\r\n\t\t\t\t// Check for the types because sometimes the files themselves\r\n\t\t\t\t// are only available on drop.\r\n\t\t\t\tevent.dataTransfer?.types.includes( 'Files' ) ||\r\n\t\t\t\t( event.dataTransfer\r\n\t\t\t\t\t? getFilesFromDataTransfer( event.dataTransfer )\r\n\t\t\t\t\t: []\r\n\t\t\t\t).length > 0\r\n\t\t\t) {\r\n\t\t\t\t_type = 'file';\r\n\t\t\t}\r\n\r\n\t\t\tsetType( _type );\r\n\t\t},\r\n\t\tonDragEnd() {\r\n\t\t\tsetIsDraggingOverDocument( false );\r\n\t\t\tsetType( undefined );\r\n\t\t},\r\n\t\tonDragEnter() {\r\n\t\t\tsetIsDraggingOverElement( true );\r\n\t\t},\r\n\t\tonDragLeave() {\r\n\t\t\tsetIsDraggingOverElement( false );\r\n\t\t},\r\n\t} );\r\n\r\n\tconst classes = clsx( 'components-drop-zone', className, {\r\n\t\t'is-active':\r\n\t\t\t( isDraggingOverDocument || isDraggingOverElement ) &&\r\n\t\t\t( ( type === 'file' && onFilesDrop ) ||\r\n\t\t\t\t( type === 'html' && onHTMLDrop ) ||\r\n\t\t\t\t( type === 'default' && onDrop ) ),\r\n\t\t'has-dragged-out': ! isDraggingOverElement,\r\n\t\t// Keeping the following classnames for legacy purposes\r\n\t\t'is-dragging-over-document': isDraggingOverDocument,\r\n\t\t'is-dragging-over-element': isDraggingOverElement,\r\n\t\t[ `is-dragging-${ type }` ]: !! type,\r\n\t} );\r\n\r\n\treturn (\r\n\t\t<div { ...restProps } ref={ ref } className={ classes }>\r\n\t\t\t<div className=\"components-drop-zone__content\">\r\n\t\t\t\t<div className=\"components-drop-zone__content-inner\">\r\n\t\t\t\t\t<Icon\r\n\t\t\t\t\t\ticon={ upload }\r\n\t\t\t\t\t\tclassName=\"components-drop-zone__content-icon\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<span className=\"components-drop-zone__content-text\">\r\n\t\t\t\t\t\t{ label ? label : __( 'Drop files to upload' ) }\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default DropZoneComponent;\r\n"],"mappings":"AAAA;AACA;AACA;AACA,OAAOA,IAAI,MAAM,MAAM;;AAEvB;AACA;AACA;AACA,SAASC,EAAE,QAAQ,iBAAiB;AACpC,SAASC,QAAQ,QAAQ,oBAAoB;AAC7C,SAASC,MAAM,EAAEC,IAAI,QAAQ,kBAAkB;AAC/C,SAASC,wBAAwB,QAAQ,gBAAgB;AACzD,SAASC,yBAAyB,IAAIC,WAAW,QAAQ,oBAAoB;;AAE7E;AACA;AACA;AAFA,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,iBAAiBA,CAAE;EAClCC,SAAS;EACTC,KAAK;EACLC,WAAW;EACXC,UAAU;EACVC,MAAM;EACN,GAAGC;AACoD,CAAC,EAAG;EAC3D,MAAM,CAAEC,sBAAsB,EAAEC,yBAAyB,CAAE,GAC1DlB,QAAQ,CAAY,CAAC;EACtB,MAAM,CAAEmB,qBAAqB,EAAEC,wBAAwB,CAAE,GACxDpB,QAAQ,CAAY,CAAC;EACtB,MAAM,CAAEqB,IAAI,EAAEC,OAAO,CAAE,GAAGtB,QAAQ,CAAa,CAAC;EAChD,MAAMuB,GAAG,GAAGlB,WAAW,CAAE;IACxBU,MAAMA,CAAES,KAAK,EAAG;MACf,MAAMC,KAAK,GAAGD,KAAK,CAACE,YAAY,GAC7BvB,wBAAwB,CAAEqB,KAAK,CAACE,YAAa,CAAC,GAC9C,EAAE;MACL,MAAMC,IAAI,GAAGH,KAAK,CAACE,YAAY,EAAEE,OAAO,CAAE,WAAY,CAAC;;MAEvD;AACH;AACA;AACA;MACG,IAAKD,IAAI,IAAIb,UAAU,EAAG;QACzBA,UAAU,CAAEa,IAAK,CAAC;MACnB,CAAC,MAAM,IAAKF,KAAK,CAACI,MAAM,IAAIhB,WAAW,EAAG;QACzCA,WAAW,CAAEY,KAAM,CAAC;MACrB,CAAC,MAAM,IAAKV,MAAM,EAAG;QACpBA,MAAM,CAAES,KAAM,CAAC;MAChB;IACD,CAAC;IACDM,WAAWA,CAAEN,KAAK,EAAG;MACpBN,yBAAyB,CAAE,IAAK,CAAC;MAEjC,IAAIa,KAAe,GAAG,SAAS;;MAE/B;AACH;AACA;AACA;MACG,IAAKP,KAAK,CAACE,YAAY,EAAEM,KAAK,CAACC,QAAQ,CAAE,WAAY,CAAC,EAAG;QACxDF,KAAK,GAAG,MAAM;MACf,CAAC,MAAM;MACN;MACA;MACAP,KAAK,CAACE,YAAY,EAAEM,KAAK,CAACC,QAAQ,CAAE,OAAQ,CAAC,IAC7C,CAAET,KAAK,CAACE,YAAY,GACjBvB,wBAAwB,CAAEqB,KAAK,CAACE,YAAa,CAAC,GAC9C,EAAE,EACHG,MAAM,GAAG,CAAC,EACX;QACDE,KAAK,GAAG,MAAM;MACf;MAEAT,OAAO,CAAES,KAAM,CAAC;IACjB,CAAC;IACDG,SAASA,CAAA,EAAG;MACXhB,yBAAyB,CAAE,KAAM,CAAC;MAClCI,OAAO,CAAEa,SAAU,CAAC;IACrB,CAAC;IACDC,WAAWA,CAAA,EAAG;MACbhB,wBAAwB,CAAE,IAAK,CAAC;IACjC,CAAC;IACDiB,WAAWA,CAAA,EAAG;MACbjB,wBAAwB,CAAE,KAAM,CAAC;IAClC;EACD,CAAE,CAAC;EAEH,MAAMkB,OAAO,GAAGxC,IAAI,CAAE,sBAAsB,EAAEa,SAAS,EAAE;IACxD,WAAW,EACV,CAAEM,sBAAsB,IAAIE,qBAAqB,MAC7CE,IAAI,KAAK,MAAM,IAAIR,WAAW,IAC/BQ,IAAI,KAAK,MAAM,IAAIP,UAAY,IAC/BO,IAAI,KAAK,SAAS,IAAIN,MAAQ,CAAE;IACpC,iBAAiB,EAAE,CAAEI,qBAAqB;IAC1C;IACA,2BAA2B,EAAEF,sBAAsB;IACnD,0BAA0B,EAAEE,qBAAqB;IACjD,CAAG,eAAeE,IAAM,EAAC,GAAI,CAAC,CAAEA;EACjC,CAAE,CAAC;EAEH,oBACCd,IAAA;IAAA,GAAUS,SAAS;IAAGO,GAAG,EAAGA,GAAK;IAACZ,SAAS,EAAG2B,OAAS;IAAAC,QAAA,eACtDhC,IAAA;MAAKI,SAAS,EAAC,+BAA+B;MAAA4B,QAAA,eAC7C9B,KAAA;QAAKE,SAAS,EAAC,qCAAqC;QAAA4B,QAAA,gBACnDhC,IAAA,CAACL,IAAI;UACJsC,IAAI,EAAGvC,MAAQ;UACfU,SAAS,EAAC;QAAoC,CAC9C,CAAC,eACFJ,IAAA;UAAMI,SAAS,EAAC,oCAAoC;UAAA4B,QAAA,EACjD3B,KAAK,GAAGA,KAAK,GAAGb,EAAE,CAAE,sBAAuB;QAAC,CACzC,CAAC;MAAA,CACH;IAAC,CACF;EAAC,CACF,CAAC;AAER;AAEA,eAAeW,iBAAiB","ignoreList":[]}