{"version":3,"names":["Ariakit","useStoreState","useContext","useMemo","cloneElement","isValidElement","useCallback","isRTL","chevronRightSmall","useContextSystem","contextConnect","Styled","DropdownMenuContext","DropdownMenuItem","DropdownMenuCheckboxItem","DropdownMenuRadioItem","DropdownMenuGroup","DropdownMenuGroupLabel","DropdownMenuSeparator","DropdownMenuItemLabel","DropdownMenuItemHelpText","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","UnconnectedDropdownMenu","props","ref","_props$placement","open","defaultOpen","onOpenChange","placement","trigger","gutter","children","shift","modal","variant","otherProps","parentContext","computedDirection","computedPlacement","store","test","replace","dropdownMenuStore","useMenuStore","parent","focusLoop","setOpen","willBeOpen","rtl","contextValue","appliedPlacementSide","split","type","console","warn","hideOnEscape","event","preventDefault","wrapperProps","dir","style","direction","MenuButton","render","suffix","SubmenuChevronIcon","icon","size","preserveAspectRatio","Menu","hideOnHoverOutside","unmountOnHide","renderProps","MenuPopoverOuterWrapper","MenuPopoverInnerWrapper","Provider","value","DropdownMenuV2","Object","assign","Context","displayName","Item","RadioItem","CheckboxItem","Group","GroupLabel","Separator","ItemLabel","ItemHelpText"],"sources":["@wordpress/components/src/dropdown-menu-v2/index.tsx"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport * as Ariakit from '@ariakit/react';\r\nimport { useStoreState } from '@ariakit/react';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tuseContext,\r\n\tuseMemo,\r\n\tcloneElement,\r\n\tisValidElement,\r\n\tuseCallback,\r\n} from '@wordpress/element';\r\nimport { isRTL } from '@wordpress/i18n';\r\nimport { chevronRightSmall } from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { useContextSystem, contextConnect } from '../context';\r\nimport type { WordPressComponentProps } from '../context';\r\nimport type {\r\n\tDropdownMenuContext as DropdownMenuContextType,\r\n\tDropdownMenuProps,\r\n} from './types';\r\nimport * as Styled from './styles';\r\nimport { DropdownMenuContext } from './context';\r\nimport { DropdownMenuItem } from './item';\r\nimport { DropdownMenuCheckboxItem } from './checkbox-item';\r\nimport { DropdownMenuRadioItem } from './radio-item';\r\nimport { DropdownMenuGroup } from './group';\r\nimport { DropdownMenuGroupLabel } from './group-label';\r\nimport { DropdownMenuSeparator } from './separator';\r\nimport { DropdownMenuItemLabel } from './item-label';\r\nimport { DropdownMenuItemHelpText } from './item-help-text';\r\n\r\nconst UnconnectedDropdownMenu = (\r\n\tprops: WordPressComponentProps< DropdownMenuProps, 'div', false >,\r\n\tref: React.ForwardedRef< HTMLDivElement >\r\n) => {\r\n\tconst {\r\n\t\t// Store props\r\n\t\topen,\r\n\t\tdefaultOpen = false,\r\n\t\tonOpenChange,\r\n\t\tplacement,\r\n\r\n\t\t// Menu trigger props\r\n\t\ttrigger,\r\n\r\n\t\t// Menu props\r\n\t\tgutter,\r\n\t\tchildren,\r\n\t\tshift,\r\n\t\tmodal = true,\r\n\r\n\t\t// From internal components context\r\n\t\tvariant,\r\n\r\n\t\t// Rest\r\n\t\t...otherProps\r\n\t} = useContextSystem<\r\n\t\ttypeof props & Pick< DropdownMenuContextType, 'variant' >\r\n\t>( props, 'DropdownMenu' );\r\n\r\n\tconst parentContext = useContext( DropdownMenuContext );\r\n\r\n\tconst computedDirection = isRTL() ? 'rtl' : 'ltr';\r\n\r\n\t// If an explicit value for the `placement` prop is not passed,\r\n\t// apply a default placement of `bottom-start` for the root dropdown,\r\n\t// and of `right-start` for nested dropdowns.\r\n\tlet computedPlacement =\r\n\t\tprops.placement ??\r\n\t\t( parentContext?.store ? 'right-start' : 'bottom-start' );\r\n\t// Swap left/right in case of RTL direction\r\n\tif ( computedDirection === 'rtl' ) {\r\n\t\tif ( /right/.test( computedPlacement ) ) {\r\n\t\t\tcomputedPlacement = computedPlacement.replace(\r\n\t\t\t\t'right',\r\n\t\t\t\t'left'\r\n\t\t\t) as typeof computedPlacement;\r\n\t\t} else if ( /left/.test( computedPlacement ) ) {\r\n\t\t\tcomputedPlacement = computedPlacement.replace(\r\n\t\t\t\t'left',\r\n\t\t\t\t'right'\r\n\t\t\t) as typeof computedPlacement;\r\n\t\t}\r\n\t}\r\n\r\n\tconst dropdownMenuStore = Ariakit.useMenuStore( {\r\n\t\tparent: parentContext?.store,\r\n\t\topen,\r\n\t\tdefaultOpen,\r\n\t\tplacement: computedPlacement,\r\n\t\tfocusLoop: true,\r\n\t\tsetOpen( willBeOpen ) {\r\n\t\t\tonOpenChange?.( willBeOpen );\r\n\t\t},\r\n\t\trtl: computedDirection === 'rtl',\r\n\t} );\r\n\r\n\tconst contextValue = useMemo(\r\n\t\t() => ( { store: dropdownMenuStore, variant } ),\r\n\t\t[ dropdownMenuStore, variant ]\r\n\t);\r\n\r\n\t// Extract the side from the applied placement â€” useful for animations.\r\n\t// Using `currentPlacement` instead of `placement` to make sure that we\r\n\t// use the final computed placement (including \"flips\" etc).\r\n\tconst appliedPlacementSide = useStoreState(\r\n\t\tdropdownMenuStore,\r\n\t\t'currentPlacement'\r\n\t).split( '-' )[ 0 ];\r\n\r\n\tif (\r\n\t\tdropdownMenuStore.parent &&\r\n\t\t! ( isValidElement( trigger ) && DropdownMenuItem === trigger.type )\r\n\t) {\r\n\t\t// eslint-disable-next-line no-console\r\n\t\tconsole.warn(\r\n\t\t\t'For nested DropdownMenus, the `trigger` should always be a `DropdownMenuItem`.'\r\n\t\t);\r\n\t}\r\n\r\n\tconst hideOnEscape = useCallback(\r\n\t\t( event: React.KeyboardEvent< Element > ) => {\r\n\t\t\t// Pressing Escape can cause unexpected consequences (ie. exiting\r\n\t\t\t// full screen mode on MacOs, close parent modals...).\r\n\t\t\tevent.preventDefault();\r\n\t\t\t// Returning `true` causes the menu to hide.\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t[]\r\n\t);\r\n\r\n\tconst wrapperProps = useMemo(\r\n\t\t() => ( {\r\n\t\t\tdir: computedDirection,\r\n\t\t\tstyle: {\r\n\t\t\t\tdirection:\r\n\t\t\t\t\tcomputedDirection as React.CSSProperties[ 'direction' ],\r\n\t\t\t},\r\n\t\t} ),\r\n\t\t[ computedDirection ]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ /* Menu trigger */ }\r\n\t\t\t<Ariakit.MenuButton\r\n\t\t\t\tref={ ref }\r\n\t\t\t\tstore={ dropdownMenuStore }\r\n\t\t\t\trender={\r\n\t\t\t\t\tdropdownMenuStore.parent\r\n\t\t\t\t\t\t? cloneElement( trigger, {\r\n\t\t\t\t\t\t\t\t// Add submenu arrow, unless a `suffix` is explicitly specified\r\n\t\t\t\t\t\t\t\tsuffix: (\r\n\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t{ trigger.props.suffix }\r\n\t\t\t\t\t\t\t\t\t\t<Styled.SubmenuChevronIcon\r\n\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\ticon={ chevronRightSmall }\r\n\t\t\t\t\t\t\t\t\t\t\tsize={ 24 }\r\n\t\t\t\t\t\t\t\t\t\t\tpreserveAspectRatio=\"xMidYMid slice\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t  } )\r\n\t\t\t\t\t\t: trigger\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\r\n\t\t\t{ /* Menu popover */ }\r\n\t\t\t<Ariakit.Menu\r\n\t\t\t\t{ ...otherProps }\r\n\t\t\t\tmodal={ modal }\r\n\t\t\t\tstore={ dropdownMenuStore }\r\n\t\t\t\t// Root menu has an 8px distance from its trigger,\r\n\t\t\t\t// otherwise 0 (which causes the submenu to slightly overlap)\r\n\t\t\t\tgutter={ gutter ?? ( dropdownMenuStore.parent ? 0 : 8 ) }\r\n\t\t\t\t// Align nested menu by the same (but opposite) amount\r\n\t\t\t\t// as the menu container's padding.\r\n\t\t\t\tshift={ shift ?? ( dropdownMenuStore.parent ? -4 : 0 ) }\r\n\t\t\t\thideOnHoverOutside={ false }\r\n\t\t\t\tdata-side={ appliedPlacementSide }\r\n\t\t\t\twrapperProps={ wrapperProps }\r\n\t\t\t\thideOnEscape={ hideOnEscape }\r\n\t\t\t\tunmountOnHide\r\n\t\t\t\trender={ ( renderProps ) => (\r\n\t\t\t\t\t// Two wrappers are needed for the entry animation, where the menu\r\n\t\t\t\t\t// container scales with a different factor than its contents.\r\n\t\t\t\t\t// The {...renderProps} are passed to the inner wrapper, so that the\r\n\t\t\t\t\t// menu element is the direct parent of the menu item elements.\r\n\t\t\t\t\t<Styled.MenuPopoverOuterWrapper variant={ variant }>\r\n\t\t\t\t\t\t<Styled.MenuPopoverInnerWrapper { ...renderProps } />\r\n\t\t\t\t\t</Styled.MenuPopoverOuterWrapper>\r\n\t\t\t\t) }\r\n\t\t\t>\r\n\t\t\t\t<DropdownMenuContext.Provider value={ contextValue }>\r\n\t\t\t\t\t{ children }\r\n\t\t\t\t</DropdownMenuContext.Provider>\r\n\t\t\t</Ariakit.Menu>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport const DropdownMenuV2 = Object.assign(\r\n\tcontextConnect( UnconnectedDropdownMenu, 'DropdownMenu' ),\r\n\t{\r\n\t\tContext: Object.assign( DropdownMenuContext, {\r\n\t\t\tdisplayName: 'DropdownMenuV2.Context',\r\n\t\t} ),\r\n\t\tItem: Object.assign( DropdownMenuItem, {\r\n\t\t\tdisplayName: 'DropdownMenuV2.Item',\r\n\t\t} ),\r\n\t\tRadioItem: Object.assign( DropdownMenuRadioItem, {\r\n\t\t\tdisplayName: 'DropdownMenuV2.RadioItem',\r\n\t\t} ),\r\n\t\tCheckboxItem: Object.assign( DropdownMenuCheckboxItem, {\r\n\t\t\tdisplayName: 'DropdownMenuV2.CheckboxItem',\r\n\t\t} ),\r\n\t\tGroup: Object.assign( DropdownMenuGroup, {\r\n\t\t\tdisplayName: 'DropdownMenuV2.Group',\r\n\t\t} ),\r\n\t\tGroupLabel: Object.assign( DropdownMenuGroupLabel, {\r\n\t\t\tdisplayName: 'DropdownMenuV2.GroupLabel',\r\n\t\t} ),\r\n\t\tSeparator: Object.assign( DropdownMenuSeparator, {\r\n\t\t\tdisplayName: 'DropdownMenuV2.Separator',\r\n\t\t} ),\r\n\t\tItemLabel: Object.assign( DropdownMenuItemLabel, {\r\n\t\t\tdisplayName: 'DropdownMenuV2.ItemLabel',\r\n\t\t} ),\r\n\t\tItemHelpText: Object.assign( DropdownMenuItemHelpText, {\r\n\t\t\tdisplayName: 'DropdownMenuV2.ItemHelpText',\r\n\t\t} ),\r\n\t}\r\n);\r\n\r\nexport default DropdownMenuV2;\r\n"],"mappings":"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","ignoreList":[]}