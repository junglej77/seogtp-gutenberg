{"version":3,"names":["fastDeepEqual","useMemo","__","sprintf","ColorListPicker","CircularOptionPicker","VStack","CustomDuotoneBar","getDefaultColors","getGradientFromCSSColors","Spacer","jsx","_jsx","jsxs","_jsxs","DuotonePicker","asButtons","loop","clearable","unsetable","colorPalette","duotonePalette","disableCustomColors","disableCustomDuotone","value","onChange","ariaLabel","ariaLabelledby","otherProps","defaultDark","defaultLight","isUnset","unsetOptionLabel","unsetOption","Option","isSelected","tooltipText","className","onClick","undefined","duotoneOptions","map","colors","slug","name","style","background","color","label","metaProps","_metaProps","options","actions","ButtonAction","children","paddingTop","length","spacing","labels","enableAlpha","newColors","newValue"],"sources":["@wordpress/components/src/duotone-picker/duotone-picker.tsx"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport fastDeepEqual from 'fast-deep-equal/es6';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useMemo } from '@wordpress/element';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport ColorListPicker from './color-list-picker';\r\nimport CircularOptionPicker from '../circular-option-picker';\r\nimport { VStack } from '../v-stack';\r\n\r\nimport CustomDuotoneBar from './custom-duotone-bar';\r\nimport { getDefaultColors, getGradientFromCSSColors } from './utils';\r\nimport { Spacer } from '../spacer';\r\nimport type { DuotonePickerProps } from './types';\r\n\r\n/**\r\n * ```jsx\r\n * import { DuotonePicker, DuotoneSwatch } from '@wordpress/components';\r\n * import { useState } from '@wordpress/element';\r\n *\r\n * const DUOTONE_PALETTE = [\r\n * \t{ colors: [ '#8c00b7', '#fcff41' ], name: 'Purple and yellow', slug: 'purple-yellow' },\r\n * \t{ colors: [ '#000097', '#ff4747' ], name: 'Blue and red', slug: 'blue-red' },\r\n * ];\r\n *\r\n * const COLOR_PALETTE = [\r\n * \t{ color: '#ff4747', name: 'Red', slug: 'red' },\r\n * \t{ color: '#fcff41', name: 'Yellow', slug: 'yellow' },\r\n * \t{ color: '#000097', name: 'Blue', slug: 'blue' },\r\n * \t{ color: '#8c00b7', name: 'Purple', slug: 'purple' },\r\n * ];\r\n *\r\n * const Example = () => {\r\n * \tconst [ duotone, setDuotone ] = useState( [ '#000000', '#ffffff' ] );\r\n * \treturn (\r\n * \t\t<>\r\n * \t\t\t<DuotonePicker\r\n * \t\t\t\tduotonePalette={ DUOTONE_PALETTE }\r\n * \t\t\t\tcolorPalette={ COLOR_PALETTE }\r\n * \t\t\t\tvalue={ duotone }\r\n * \t\t\t\tonChange={ setDuotone }\r\n * \t\t\t/>\r\n * \t\t\t<DuotoneSwatch values={ duotone } />\r\n * \t\t</>\r\n * \t);\r\n * };\r\n * ```\r\n */\r\nfunction DuotonePicker( {\r\n\tasButtons,\r\n\tloop,\r\n\tclearable = true,\r\n\tunsetable = true,\r\n\tcolorPalette,\r\n\tduotonePalette,\r\n\tdisableCustomColors,\r\n\tdisableCustomDuotone,\r\n\tvalue,\r\n\tonChange,\r\n\t'aria-label': ariaLabel,\r\n\t'aria-labelledby': ariaLabelledby,\r\n\t...otherProps\r\n}: DuotonePickerProps ) {\r\n\tconst [ defaultDark, defaultLight ] = useMemo(\r\n\t\t() => getDefaultColors( colorPalette ),\r\n\t\t[ colorPalette ]\r\n\t);\r\n\r\n\tconst isUnset = value === 'unset';\r\n\tconst unsetOptionLabel = __( 'Unset' );\r\n\r\n\tconst unsetOption = (\r\n\t\t<CircularOptionPicker.Option\r\n\t\t\tkey=\"unset\"\r\n\t\t\tvalue=\"unset\"\r\n\t\t\tisSelected={ isUnset }\r\n\t\t\ttooltipText={ unsetOptionLabel }\r\n\t\t\taria-label={ unsetOptionLabel }\r\n\t\t\tclassName=\"components-duotone-picker__color-indicator\"\r\n\t\t\tonClick={ () => {\r\n\t\t\t\tonChange( isUnset ? undefined : 'unset' );\r\n\t\t\t} }\r\n\t\t/>\r\n\t);\r\n\r\n\tconst duotoneOptions = duotonePalette.map( ( { colors, slug, name } ) => {\r\n\t\tconst style = {\r\n\t\t\tbackground: getGradientFromCSSColors( colors, '135deg' ),\r\n\t\t\tcolor: 'transparent',\r\n\t\t};\r\n\t\tconst tooltipText =\r\n\t\t\tname ??\r\n\t\t\tsprintf(\r\n\t\t\t\t// translators: %s: duotone code e.g: \"dark-grayscale\" or \"7f7f7f-ffffff\".\r\n\t\t\t\t__( 'Duotone code: %s' ),\r\n\t\t\t\tslug\r\n\t\t\t);\r\n\t\tconst label = name\r\n\t\t\t? sprintf(\r\n\t\t\t\t\t// translators: %s: The name of the option e.g: \"Dark grayscale\".\r\n\t\t\t\t\t__( 'Duotone: %s' ),\r\n\t\t\t\t\tname\r\n\t\t\t  )\r\n\t\t\t: tooltipText;\r\n\t\tconst isSelected = fastDeepEqual( colors, value );\r\n\r\n\t\treturn (\r\n\t\t\t<CircularOptionPicker.Option\r\n\t\t\t\tkey={ slug }\r\n\t\t\t\tvalue={ colors }\r\n\t\t\t\tisSelected={ isSelected }\r\n\t\t\t\taria-label={ label }\r\n\t\t\t\ttooltipText={ tooltipText }\r\n\t\t\t\tstyle={ style }\r\n\t\t\t\tonClick={ () => {\r\n\t\t\t\t\tonChange( isSelected ? undefined : colors );\r\n\t\t\t\t} }\r\n\t\t\t/>\r\n\t\t);\r\n\t} );\r\n\r\n\tlet metaProps:\r\n\t\t| { asButtons: false; loop?: boolean; 'aria-label': string }\r\n\t\t| { asButtons: false; loop?: boolean; 'aria-labelledby': string }\r\n\t\t| { asButtons: true };\r\n\r\n\tif ( asButtons ) {\r\n\t\tmetaProps = { asButtons: true };\r\n\t} else {\r\n\t\tconst _metaProps: { asButtons: false; loop?: boolean } = {\r\n\t\t\tasButtons: false,\r\n\t\t\tloop,\r\n\t\t};\r\n\r\n\t\tif ( ariaLabel ) {\r\n\t\t\tmetaProps = { ..._metaProps, 'aria-label': ariaLabel };\r\n\t\t} else if ( ariaLabelledby ) {\r\n\t\t\tmetaProps = {\r\n\t\t\t\t..._metaProps,\r\n\t\t\t\t'aria-labelledby': ariaLabelledby,\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tmetaProps = {\r\n\t\t\t\t..._metaProps,\r\n\t\t\t\t'aria-label': __( 'Custom color picker.' ),\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\tconst options = unsetable\r\n\t\t? [ unsetOption, ...duotoneOptions ]\r\n\t\t: duotoneOptions;\r\n\r\n\treturn (\r\n\t\t<CircularOptionPicker\r\n\t\t\t{ ...otherProps }\r\n\t\t\t{ ...metaProps }\r\n\t\t\toptions={ options }\r\n\t\t\tactions={\r\n\t\t\t\t!! clearable && (\r\n\t\t\t\t\t<CircularOptionPicker.ButtonAction\r\n\t\t\t\t\t\tonClick={ () => onChange( undefined ) }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ __( 'Clear' ) }\r\n\t\t\t\t\t</CircularOptionPicker.ButtonAction>\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t<Spacer paddingTop={ options.length === 0 ? 0 : 4 }>\r\n\t\t\t\t<VStack spacing={ 3 }>\r\n\t\t\t\t\t{ ! disableCustomColors && ! disableCustomDuotone && (\r\n\t\t\t\t\t\t<CustomDuotoneBar\r\n\t\t\t\t\t\t\tvalue={ isUnset ? undefined : value }\r\n\t\t\t\t\t\t\tonChange={ onChange }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) }\r\n\t\t\t\t\t{ ! disableCustomDuotone && (\r\n\t\t\t\t\t\t<ColorListPicker\r\n\t\t\t\t\t\t\tlabels={ [ __( 'Shadows' ), __( 'Highlights' ) ] }\r\n\t\t\t\t\t\t\tcolors={ colorPalette }\r\n\t\t\t\t\t\t\tvalue={ isUnset ? undefined : value }\r\n\t\t\t\t\t\t\tdisableCustomColors={ disableCustomColors }\r\n\t\t\t\t\t\t\tenableAlpha\r\n\t\t\t\t\t\t\tonChange={ ( newColors ) => {\r\n\t\t\t\t\t\t\t\tif ( ! newColors[ 0 ] ) {\r\n\t\t\t\t\t\t\t\t\tnewColors[ 0 ] = defaultDark;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif ( ! newColors[ 1 ] ) {\r\n\t\t\t\t\t\t\t\t\tnewColors[ 1 ] = defaultLight;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tconst newValue =\r\n\t\t\t\t\t\t\t\t\tnewColors.length >= 2\r\n\t\t\t\t\t\t\t\t\t\t? newColors\r\n\t\t\t\t\t\t\t\t\t\t: undefined;\r\n\t\t\t\t\t\t\t\t// @ts-expect-error TODO: The color arrays for a DuotonePicker should be a tuple of two colors,\r\n\t\t\t\t\t\t\t\t// but it's currently typed as a string[].\r\n\t\t\t\t\t\t\t\t// See also https://github.com/WordPress/gutenberg/pull/49060#discussion_r1136951035\r\n\t\t\t\t\t\t\t\tonChange( newValue );\r\n\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) }\r\n\t\t\t\t</VStack>\r\n\t\t\t</Spacer>\r\n\t\t</CircularOptionPicker>\r\n\t);\r\n}\r\n\r\nexport default DuotonePicker;\r\n"],"mappings":"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","ignoreList":[]}