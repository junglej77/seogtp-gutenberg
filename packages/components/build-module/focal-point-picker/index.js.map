{"version":3,"names":["clsx","__","useEffect","useRef","useState","__experimentalUseDragging","useDragging","useInstanceId","useIsomorphicLayoutEffect","BaseControl","Controls","FocalPoint","Grid","Media","MediaWrapper","MediaContainer","INITIAL_BOUNDS","useUpdateEffect","jsx","_jsx","jsxs","_jsxs","GRID_OVERLAY_TIMEOUT","FocalPointPicker","__nextHasNoMarginBottom","autoPlay","className","help","label","onChange","onDrag","onDragEnd","onDragStart","resolvePoint","url","value","valueProp","x","y","restProps","point","setPoint","showGridOverlay","setShowGridOverlay","startDrag","endDrag","isDragging","event","dragAreaRef","current","focus","getValueWithinDragArea","onDragMove","preventDefault","bounds","setBounds","refUpdateBounds","clientWidth","width","clientHeight","height","updateBounds","defaultView","ownerDocument","addEventListener","removeEventListener","clientX","clientY","shiftKey","top","left","getBoundingClientRect","nextX","nextY","Math","round","getFinalValue","_resolvePoint","resolvedValue","max","min","roundToTwoDecimalPlaces","n","arrowKeyStep","code","includes","step","delta","axis","focalPointPosition","undefined","classes","instanceId","id","timeout","window","setTimeout","clearTimeout","__associatedWPComponentName","children","onKeyDown","onMouseDown","onBlur","ref","role","tabIndex","showOverlay","alt","onLoad","src","hasHelpText"],"sources":["@wordpress/components/src/focal-point-picker/index.tsx"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useEffect, useRef, useState } from '@wordpress/element';\r\nimport {\r\n\t__experimentalUseDragging as useDragging,\r\n\tuseInstanceId,\r\n\tuseIsomorphicLayoutEffect,\r\n} from '@wordpress/compose';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BaseControl from '../base-control';\r\nimport Controls from './controls';\r\nimport FocalPoint from './focal-point';\r\nimport Grid from './grid';\r\nimport Media from './media';\r\nimport {\r\n\tMediaWrapper,\r\n\tMediaContainer,\r\n} from './styles/focal-point-picker-style';\r\nimport { INITIAL_BOUNDS } from './utils';\r\nimport { useUpdateEffect } from '../utils/hooks';\r\nimport type { WordPressComponentProps } from '../context/wordpress-component';\r\nimport type {\r\n\tFocalPoint as FocalPointType,\r\n\tFocalPointPickerProps,\r\n} from './types';\r\nimport type { KeyboardEventHandler } from 'react';\r\n\r\nconst GRID_OVERLAY_TIMEOUT = 600;\r\n\r\n/**\r\n * Focal Point Picker is a component which creates a UI for identifying the most important visual point of an image.\r\n *\r\n * This component addresses a specific problem: with large background images it is common to see undesirable crops,\r\n * especially when viewing on smaller viewports such as mobile phones. This component allows the selection of\r\n * the point with the most important visual information and returns it as a pair of numbers between 0 and 1.\r\n * This value can be easily converted into the CSS `background-position` attribute, and will ensure that the\r\n * focal point is never cropped out, regardless of viewport.\r\n *\r\n * - Example focal point picker value: `{ x: 0.5, y: 0.1 }`\r\n * - Corresponding CSS: `background-position: 50% 10%;`\r\n *\r\n * ```jsx\r\n * import { FocalPointPicker } from '@wordpress/components';\r\n * import { useState } from '@wordpress/element';\r\n *\r\n * const Example = () => {\r\n * \tconst [ focalPoint, setFocalPoint ] = useState( {\r\n * \t\tx: 0.5,\r\n * \t\ty: 0.5,\r\n * \t} );\r\n *\r\n * \tconst url = '/path/to/image';\r\n *\r\n * \t// Example function to render the CSS styles based on Focal Point Picker value\r\n * \tconst style = {\r\n * \t\tbackgroundImage: `url(${ url })`,\r\n * \t\tbackgroundPosition: `${ focalPoint.x * 100 }% ${ focalPoint.y * 100 }%`,\r\n * \t};\r\n *\r\n * \treturn (\r\n * \t\t<>\r\n * \t\t\t<FocalPointPicker\r\n *        __nextHasNoMarginBottom\r\n * \t\t\t\turl={ url }\r\n * \t\t\t\tvalue={ focalPoint }\r\n * \t\t\t\tonDragStart={ setFocalPoint }\r\n * \t\t\t\tonDrag={ setFocalPoint }\r\n * \t\t\t\tonChange={ setFocalPoint }\r\n * \t\t\t/>\r\n * \t\t\t<div style={ style } />\r\n * \t\t</>\r\n * \t);\r\n * };\r\n * ```\r\n */\r\nexport function FocalPointPicker( {\r\n\t__nextHasNoMarginBottom,\r\n\tautoPlay = true,\r\n\tclassName,\r\n\thelp,\r\n\tlabel,\r\n\tonChange,\r\n\tonDrag,\r\n\tonDragEnd,\r\n\tonDragStart,\r\n\tresolvePoint,\r\n\turl,\r\n\tvalue: valueProp = {\r\n\t\tx: 0.5,\r\n\t\ty: 0.5,\r\n\t},\r\n\t...restProps\r\n}: WordPressComponentProps< FocalPointPickerProps, 'div', false > ) {\r\n\tconst [ point, setPoint ] = useState( valueProp );\r\n\tconst [ showGridOverlay, setShowGridOverlay ] = useState( false );\r\n\r\n\tconst { startDrag, endDrag, isDragging } = useDragging( {\r\n\t\tonDragStart: ( event ) => {\r\n\t\t\tdragAreaRef.current?.focus();\r\n\t\t\tconst value = getValueWithinDragArea( event );\r\n\r\n\t\t\t// `value` can technically be undefined if getValueWithinDragArea() is\r\n\t\t\t// called before dragAreaRef is set, but this shouldn't happen in reality.\r\n\t\t\tif ( ! value ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tonDragStart?.( value, event );\r\n\t\t\tsetPoint( value );\r\n\t\t},\r\n\t\tonDragMove: ( event ) => {\r\n\t\t\t// Prevents text-selection when dragging.\r\n\t\t\tevent.preventDefault();\r\n\t\t\tconst value = getValueWithinDragArea( event );\r\n\t\t\tif ( ! value ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tonDrag?.( value, event );\r\n\t\t\tsetPoint( value );\r\n\t\t},\r\n\t\tonDragEnd: () => {\r\n\t\t\tonDragEnd?.();\r\n\t\t\tonChange?.( point );\r\n\t\t},\r\n\t} );\r\n\r\n\t// Uses the internal point while dragging or else the value from props.\r\n\tconst { x, y } = isDragging ? point : valueProp;\r\n\r\n\tconst dragAreaRef = useRef< HTMLDivElement >( null );\r\n\tconst [ bounds, setBounds ] = useState( INITIAL_BOUNDS );\r\n\tconst refUpdateBounds = useRef( () => {\r\n\t\tif ( ! dragAreaRef.current ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst { clientWidth: width, clientHeight: height } =\r\n\t\t\tdragAreaRef.current;\r\n\t\t// Falls back to initial bounds if the ref has no size. Since styles\r\n\t\t// give the drag area dimensions even when the media has not loaded\r\n\t\t// this should only happen in unit tests (jsdom).\r\n\t\tsetBounds(\r\n\t\t\twidth > 0 && height > 0 ? { width, height } : { ...INITIAL_BOUNDS }\r\n\t\t);\r\n\t} );\r\n\r\n\tuseEffect( () => {\r\n\t\tconst updateBounds = refUpdateBounds.current;\r\n\t\tif ( ! dragAreaRef.current ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst { defaultView } = dragAreaRef.current.ownerDocument;\r\n\t\tdefaultView?.addEventListener( 'resize', updateBounds );\r\n\t\treturn () => defaultView?.removeEventListener( 'resize', updateBounds );\r\n\t}, [] );\r\n\r\n\t// Updates the bounds to cover cases of unspecified media or load failures.\r\n\tuseIsomorphicLayoutEffect( () => void refUpdateBounds.current(), [] );\r\n\r\n\t// TODO: Consider refactoring getValueWithinDragArea() into a pure function.\r\n\t// https://github.com/WordPress/gutenberg/pull/43872#discussion_r963455173\r\n\tconst getValueWithinDragArea = ( {\r\n\t\tclientX,\r\n\t\tclientY,\r\n\t\tshiftKey,\r\n\t}: {\r\n\t\tclientX: number;\r\n\t\tclientY: number;\r\n\t\tshiftKey: boolean;\r\n\t} ) => {\r\n\t\tif ( ! dragAreaRef.current ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst { top, left } = dragAreaRef.current.getBoundingClientRect();\r\n\t\tlet nextX = ( clientX - left ) / bounds.width;\r\n\t\tlet nextY = ( clientY - top ) / bounds.height;\r\n\t\t// Enables holding shift to jump values by 10%.\r\n\t\tif ( shiftKey ) {\r\n\t\t\tnextX = Math.round( nextX / 0.1 ) * 0.1;\r\n\t\t\tnextY = Math.round( nextY / 0.1 ) * 0.1;\r\n\t\t}\r\n\t\treturn getFinalValue( { x: nextX, y: nextY } );\r\n\t};\r\n\r\n\tconst getFinalValue = ( value: FocalPointType ): FocalPointType => {\r\n\t\tconst resolvedValue = resolvePoint?.( value ) ?? value;\r\n\t\tresolvedValue.x = Math.max( 0, Math.min( resolvedValue.x, 1 ) );\r\n\t\tresolvedValue.y = Math.max( 0, Math.min( resolvedValue.y, 1 ) );\r\n\t\tconst roundToTwoDecimalPlaces = ( n: number ) =>\r\n\t\t\tMath.round( n * 1e2 ) / 1e2;\r\n\r\n\t\treturn {\r\n\t\t\tx: roundToTwoDecimalPlaces( resolvedValue.x ),\r\n\t\t\ty: roundToTwoDecimalPlaces( resolvedValue.y ),\r\n\t\t};\r\n\t};\r\n\r\n\tconst arrowKeyStep: KeyboardEventHandler< HTMLDivElement > = ( event ) => {\r\n\t\tconst { code, shiftKey } = event;\r\n\t\tif (\r\n\t\t\t! [ 'ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight' ].includes(\r\n\t\t\t\tcode\r\n\t\t\t)\r\n\t\t) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tevent.preventDefault();\r\n\t\tconst value = { x, y };\r\n\t\tconst step = shiftKey ? 0.1 : 0.01;\r\n\t\tconst delta =\r\n\t\t\tcode === 'ArrowUp' || code === 'ArrowLeft' ? -1 * step : step;\r\n\t\tconst axis = code === 'ArrowUp' || code === 'ArrowDown' ? 'y' : 'x';\r\n\t\tvalue[ axis ] = value[ axis ] + delta;\r\n\t\tonChange?.( getFinalValue( value ) );\r\n\t};\r\n\r\n\tconst focalPointPosition = {\r\n\t\tleft: x !== undefined ? x * bounds.width : 0.5 * bounds.width,\r\n\t\ttop: y !== undefined ? y * bounds.height : 0.5 * bounds.height,\r\n\t};\r\n\r\n\tconst classes = clsx( 'components-focal-point-picker-control', className );\r\n\r\n\tconst instanceId = useInstanceId( FocalPointPicker );\r\n\tconst id = `inspector-focal-point-picker-control-${ instanceId }`;\r\n\r\n\tuseUpdateEffect( () => {\r\n\t\tsetShowGridOverlay( true );\r\n\t\tconst timeout = window.setTimeout( () => {\r\n\t\t\tsetShowGridOverlay( false );\r\n\t\t}, GRID_OVERLAY_TIMEOUT );\r\n\r\n\t\treturn () => window.clearTimeout( timeout );\r\n\t}, [ x, y ] );\r\n\r\n\treturn (\r\n\t\t<BaseControl\r\n\t\t\t{ ...restProps }\r\n\t\t\t__nextHasNoMarginBottom={ __nextHasNoMarginBottom }\r\n\t\t\t__associatedWPComponentName=\"FocalPointPicker\"\r\n\t\t\tlabel={ label }\r\n\t\t\tid={ id }\r\n\t\t\thelp={ help }\r\n\t\t\tclassName={ classes }\r\n\t\t>\r\n\t\t\t<MediaWrapper className=\"components-focal-point-picker-wrapper\">\r\n\t\t\t\t<MediaContainer\r\n\t\t\t\t\tclassName=\"components-focal-point-picker\"\r\n\t\t\t\t\tonKeyDown={ arrowKeyStep }\r\n\t\t\t\t\tonMouseDown={ startDrag }\r\n\t\t\t\t\tonBlur={ () => {\r\n\t\t\t\t\t\tif ( isDragging ) {\r\n\t\t\t\t\t\t\tendDrag();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} }\r\n\t\t\t\t\tref={ dragAreaRef }\r\n\t\t\t\t\trole=\"button\"\r\n\t\t\t\t\ttabIndex={ -1 }\r\n\t\t\t\t>\r\n\t\t\t\t\t<Grid bounds={ bounds } showOverlay={ showGridOverlay } />\r\n\t\t\t\t\t<Media\r\n\t\t\t\t\t\talt={ __( 'Media preview' ) }\r\n\t\t\t\t\t\tautoPlay={ autoPlay }\r\n\t\t\t\t\t\tonLoad={ refUpdateBounds.current }\r\n\t\t\t\t\t\tsrc={ url }\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<FocalPoint\r\n\t\t\t\t\t\t{ ...focalPointPosition }\r\n\t\t\t\t\t\tisDragging={ isDragging }\r\n\t\t\t\t\t/>\r\n\t\t\t\t</MediaContainer>\r\n\t\t\t</MediaWrapper>\r\n\t\t\t<Controls\r\n\t\t\t\t__nextHasNoMarginBottom={ __nextHasNoMarginBottom }\r\n\t\t\t\thasHelpText={ !! help }\r\n\t\t\t\tpoint={ { x, y } }\r\n\t\t\t\tonChange={ ( value ) => {\r\n\t\t\t\t\tonChange?.( getFinalValue( value ) );\r\n\t\t\t\t} }\r\n\t\t\t/>\r\n\t\t</BaseControl>\r\n\t);\r\n}\r\n\r\nexport default FocalPointPicker;\r\n"],"mappings":"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","ignoreList":[]}