{"version":3,"names":["Animated","Easing","PanResponder","Text","View","createContext","useEffect","useRef","useState","useContext","styles","jsx","_jsx","jsxs","_jsxs","TooltipContext","Tooltip","children","onPress","style","visible","panResponder","create","onStartShouldSetPanResponderCapture","current","Provider","value","panHandlers","Label","align","text","xOffset","yOffset","animationValue","Value","dimensions","setDimensions","Error","startAnimation","timing","toValue","duration","useNativeDriver","delay","easing","out","quad","start","tooltipTransforms","translateX","width","translateY","height","tooltipStyles","tooltip","shadowColor","tooltipShadow","color","shadowOffset","shadowOpacity","shadowRadius","elevation","transform","tooltipLeftAlign","arrowStyles","arrow","arrowLeftAlign","opacity","interpolate","inputRange","outputRange","onLayout","nativeEvent","layout"],"sources":["@wordpress/components/src/focal-point-picker/tooltip/index.native.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport { Animated, Easing, PanResponder, Text, View } from 'react-native';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tcreateContext,\r\n\tuseEffect,\r\n\tuseRef,\r\n\tuseState,\r\n\tuseContext,\r\n} from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport styles from './style.scss';\r\n\r\nconst TooltipContext = createContext();\r\n\r\nfunction Tooltip( { children, onPress, style, visible } ) {\r\n\tconst panResponder = useRef(\r\n\t\tPanResponder.create( {\r\n\t\t\t/**\r\n\t\t\t * To allow dimissing the tooltip on press while also avoiding blocking\r\n\t\t\t * interactivity within the child context, we place this `onPress` side\r\n\t\t\t * effect within the `onStartShouldSetPanResponderCapture` callback.\r\n\t\t\t *\r\n\t\t\t * This is a bit unorthodox, but may be the simplest approach to achieving\r\n\t\t\t * this outcome. This is effectively a gesture responder that never\r\n\t\t\t * becomes the controlling responder. https://bit.ly/2J3ugKF\r\n\t\t\t */\r\n\t\t\tonStartShouldSetPanResponderCapture: () => {\r\n\t\t\t\tif ( onPress ) {\r\n\t\t\t\t\tonPress();\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t} )\r\n\t).current;\r\n\r\n\treturn (\r\n\t\t<TooltipContext.Provider value={ visible }>\r\n\t\t\t<View\r\n\t\t\t\t{ ...( visible ? panResponder.panHandlers : {} ) }\r\n\t\t\t\tstyle={ style }\r\n\t\t\t>\r\n\t\t\t\t{ children }\r\n\t\t\t</View>\r\n\t\t</TooltipContext.Provider>\r\n\t);\r\n}\r\n\r\nfunction Label( { align = 'center', text, xOffset = 0, yOffset = 0 } ) {\r\n\tconst animationValue = useRef( new Animated.Value( 0 ) ).current;\r\n\tconst [ dimensions, setDimensions ] = useState( null );\r\n\tconst visible = useContext( TooltipContext );\r\n\r\n\tif ( typeof visible === 'undefined' ) {\r\n\t\tthrow new Error(\r\n\t\t\t'Tooltip.Label cannot be rendered outside of the Tooltip component'\r\n\t\t);\r\n\t}\r\n\r\n\tuseEffect( () => {\r\n\t\tconst startAnimation = () => {\r\n\t\t\tAnimated.timing( animationValue, {\r\n\t\t\t\ttoValue: visible ? 1 : 0,\r\n\t\t\t\tduration: visible ? 300 : 150,\r\n\t\t\t\tuseNativeDriver: true,\r\n\t\t\t\tdelay: visible ? 500 : 0,\r\n\t\t\t\teasing: Easing.out( Easing.quad ),\r\n\t\t\t} ).start();\r\n\t\t};\r\n\t\tstartAnimation();\r\n\t}, [ animationValue, visible ] );\r\n\r\n\t// Transforms rely upon onLayout to enable custom offsets additions.\r\n\tlet tooltipTransforms;\r\n\tif ( dimensions ) {\r\n\t\ttooltipTransforms = [\r\n\t\t\t{\r\n\t\t\t\ttranslateX:\r\n\t\t\t\t\t( align === 'center' ? -dimensions.width / 2 : 0 ) +\r\n\t\t\t\t\txOffset,\r\n\t\t\t},\r\n\t\t\t{ translateY: -dimensions.height + yOffset },\r\n\t\t];\r\n\t}\r\n\r\n\tconst tooltipStyles = [\r\n\t\tstyles.tooltip,\r\n\t\t{\r\n\t\t\tshadowColor: styles.tooltipShadow?.color,\r\n\t\t\tshadowOffset: {\r\n\t\t\t\twidth: 0,\r\n\t\t\t\theight: 2,\r\n\t\t\t},\r\n\t\t\tshadowOpacity: 0.25,\r\n\t\t\tshadowRadius: 2,\r\n\t\t\televation: 2,\r\n\t\t\ttransform: tooltipTransforms,\r\n\t\t},\r\n\t\talign === 'left' && styles.tooltipLeftAlign,\r\n\t];\r\n\tconst arrowStyles = [\r\n\t\tstyles.arrow,\r\n\t\talign === 'left' && styles.arrowLeftAlign,\r\n\t];\r\n\r\n\treturn (\r\n\t\t<Animated.View\r\n\t\t\tstyle={ {\r\n\t\t\t\topacity: animationValue,\r\n\t\t\t\ttransform: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttranslateY: animationValue.interpolate( {\r\n\t\t\t\t\t\t\tinputRange: [ 0, 1 ],\r\n\t\t\t\t\t\t\toutputRange: [ visible ? 4 : -8, -8 ],\r\n\t\t\t\t\t\t} ),\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t} }\r\n\t\t>\r\n\t\t\t<View\r\n\t\t\t\tonLayout={ ( { nativeEvent } ) => {\r\n\t\t\t\t\tconst { height, width } = nativeEvent.layout;\r\n\t\t\t\t\tsetDimensions( { height, width } );\r\n\t\t\t\t} }\r\n\t\t\t\tstyle={ tooltipStyles }\r\n\t\t\t>\r\n\t\t\t\t<Text style={ styles.text }>{ text }</Text>\r\n\t\t\t\t<View style={ arrowStyles } />\r\n\t\t\t</View>\r\n\t\t</Animated.View>\r\n\t);\r\n}\r\n\r\nTooltip.Label = Label;\r\n\r\nexport default Tooltip;\r\n"],"mappings":"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","ignoreList":[]}