{"version":3,"names":["clsx","useState","useEffect","Children","useRef","deprecated","__","Modal","Button","PageControl","jsx","_jsx","jsxs","_jsxs","Guide","children","className","contentLabel","finishButtonText","onFinish","pages","ref","currentPage","setCurrentPage","frame","current","querySelector","HTMLElement","focus","count","since","alternative","_Children$map","map","child","content","canGoBack","canGoForward","length","goBack","goForward","isDismissible","onRequestClose","onKeyDown","event","code","preventDefault","image","numberOfPages","variant","onClick","__next40pxDefaultSize"],"sources":["@wordpress/components/src/guide/index.tsx"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useState, useEffect, Children, useRef } from '@wordpress/element';\r\nimport deprecated from '@wordpress/deprecated';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport Modal from '../modal';\r\nimport Button from '../button';\r\nimport PageControl from './page-control';\r\nimport type { GuideProps } from './types';\r\n\r\n/**\r\n * `Guide` is a React component that renders a _user guide_ in a modal. The guide consists of several pages which the user can step through one by one. The guide is finished when the modal is closed or when the user clicks _Finish_ on the last page of the guide.\r\n *\r\n * ```jsx\r\n * function MyTutorial() {\r\n * \tconst [ isOpen, setIsOpen ] = useState( true );\r\n *\r\n * \tif ( ! isOpen ) {\r\n * \t\treturn null;\r\n * \t}\r\n *\r\n * \treturn (\r\n * \t\t<Guide\r\n * \t\t\tonFinish={ () => setIsOpen( false ) }\r\n * \t\t\tpages={ [\r\n * \t\t\t\t{\r\n * \t\t\t\t\tcontent: <p>Welcome to the ACME Store!</p>,\r\n * \t\t\t\t},\r\n * \t\t\t\t{\r\n * \t\t\t\t\timage: <img src=\"https://acmestore.com/add-to-cart.png\" />,\r\n * \t\t\t\t\tcontent: (\r\n * \t\t\t\t\t\t<p>\r\n * \t\t\t\t\t\t\tClick <i>Add to Cart</i> to buy a product.\r\n * \t\t\t\t\t\t</p>\r\n * \t\t\t\t\t),\r\n * \t\t\t\t},\r\n * \t\t\t] }\r\n * \t\t/>\r\n * \t);\r\n * }\r\n * ```\r\n */\r\nfunction Guide( {\r\n\tchildren,\r\n\tclassName,\r\n\tcontentLabel,\r\n\tfinishButtonText = __( 'Finish' ),\r\n\tonFinish,\r\n\tpages = [],\r\n}: GuideProps ) {\r\n\tconst ref = useRef< HTMLDivElement >( null );\r\n\tconst [ currentPage, setCurrentPage ] = useState( 0 );\r\n\r\n\tuseEffect( () => {\r\n\t\t// Place focus at the top of the guide on mount and when the page changes.\r\n\t\tconst frame = ref.current?.querySelector( '.components-guide' );\r\n\t\tif ( frame instanceof HTMLElement ) {\r\n\t\t\tframe.focus();\r\n\t\t}\r\n\t}, [ currentPage ] );\r\n\r\n\tuseEffect( () => {\r\n\t\tif ( Children.count( children ) ) {\r\n\t\t\tdeprecated( 'Passing children to <Guide>', {\r\n\t\t\t\tsince: '5.5',\r\n\t\t\t\talternative: 'the `pages` prop',\r\n\t\t\t} );\r\n\t\t}\r\n\t}, [ children ] );\r\n\r\n\tif ( Children.count( children ) ) {\r\n\t\tpages =\r\n\t\t\tChildren.map( children, ( child ) => ( {\r\n\t\t\t\tcontent: child,\r\n\t\t\t} ) ) ?? [];\r\n\t}\r\n\r\n\tconst canGoBack = currentPage > 0;\r\n\tconst canGoForward = currentPage < pages.length - 1;\r\n\r\n\tconst goBack = () => {\r\n\t\tif ( canGoBack ) {\r\n\t\t\tsetCurrentPage( currentPage - 1 );\r\n\t\t}\r\n\t};\r\n\r\n\tconst goForward = () => {\r\n\t\tif ( canGoForward ) {\r\n\t\t\tsetCurrentPage( currentPage + 1 );\r\n\t\t}\r\n\t};\r\n\r\n\tif ( pages.length === 0 ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\tclassName={ clsx( 'components-guide', className ) }\r\n\t\t\tcontentLabel={ contentLabel }\r\n\t\t\tisDismissible={ pages.length > 1 }\r\n\t\t\tonRequestClose={ onFinish }\r\n\t\t\tonKeyDown={ ( event ) => {\r\n\t\t\t\tif ( event.code === 'ArrowLeft' ) {\r\n\t\t\t\t\tgoBack();\r\n\t\t\t\t\t// Do not scroll the modal's contents.\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t} else if ( event.code === 'ArrowRight' ) {\r\n\t\t\t\t\tgoForward();\r\n\t\t\t\t\t// Do not scroll the modal's contents.\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t} }\r\n\t\t\tref={ ref }\r\n\t\t>\r\n\t\t\t<div className=\"components-guide__container\">\r\n\t\t\t\t<div className=\"components-guide__page\">\r\n\t\t\t\t\t{ pages[ currentPage ].image }\r\n\r\n\t\t\t\t\t{ pages.length > 1 && (\r\n\t\t\t\t\t\t<PageControl\r\n\t\t\t\t\t\t\tcurrentPage={ currentPage }\r\n\t\t\t\t\t\t\tnumberOfPages={ pages.length }\r\n\t\t\t\t\t\t\tsetCurrentPage={ setCurrentPage }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) }\r\n\r\n\t\t\t\t\t{ pages[ currentPage ].content }\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"components-guide__footer\">\r\n\t\t\t\t\t{ canGoBack && (\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tclassName=\"components-guide__back-button\"\r\n\t\t\t\t\t\t\tvariant=\"tertiary\"\r\n\t\t\t\t\t\t\tonClick={ goBack }\r\n\t\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{ __( 'Previous' ) }\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t) }\r\n\t\t\t\t\t{ canGoForward && (\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tclassName=\"components-guide__forward-button\"\r\n\t\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\t\tonClick={ goForward }\r\n\t\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{ __( 'Next' ) }\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t) }\r\n\t\t\t\t\t{ ! canGoForward && (\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tclassName=\"components-guide__finish-button\"\r\n\t\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\t\tonClick={ onFinish }\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{ finishButtonText }\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t) }\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Modal>\r\n\t);\r\n}\r\n\r\nexport default Guide;\r\n"],"mappings":"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","ignoreList":[]}