{"version":3,"names":["View","Platform","RNLinearGradient","gradientParser","RadialGradient","Stop","SVG","Defs","Rect","useResizeObserver","useMemo","styles","colorsUtils","jsx","_jsx","jsxs","_jsxs","getGradientAngle","gradientValue","angleBase","matchAngle","angle","exec","angleType","includes","parseFloat","getGradientColorGroup","colorNeedParenthesis","excludeSideOrCorner","modifiedGradientValue","replace","concat","parse","map","gradient","colorStops","color","index","type","value","length","fallbackLength","colorLength","join","getGradientBaseColors","colorGroup","getColorLocations","location","Number","Gradient","style","angleCenter","x","y","children","otherProps","resizeObserver","sizes","width","height","isGradient","getGradientType","gradients","locations","colors","isLinearGradient","linear","useAngle","overflow","radialGradientContent","id","gradientUnits","rx","ry","cy","OS","group","offset","stopColor","stopOpacity","fill"],"sources":["@wordpress/components/src/mobile/gradient/index.native.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport { View, Platform } from 'react-native';\r\nimport RNLinearGradient from 'react-native-linear-gradient';\r\nimport gradientParser from 'gradient-parser';\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { RadialGradient, Stop, SVG, Defs, Rect } from '@wordpress/primitives';\r\nimport { useResizeObserver } from '@wordpress/compose';\r\nimport { useMemo } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport styles from './style.scss';\r\nimport { colorsUtils } from '../color-settings/utils';\r\n\r\nexport function getGradientAngle( gradientValue ) {\r\n\tconst angleBase = 45;\r\n\tconst matchAngle = /\\(((\\d+deg)|(to\\s[^,]+))/;\r\n\tconst angle = matchAngle.exec( gradientValue )\r\n\t\t? matchAngle.exec( gradientValue )[ 1 ]\r\n\t\t: '180deg';\r\n\r\n\tconst angleType = angle.includes( 'deg' ) ? 'angle' : 'sideOrCorner';\r\n\r\n\tif ( angleType === 'sideOrCorner' ) {\r\n\t\tswitch ( angle ) {\r\n\t\t\tcase 'to top':\r\n\t\t\t\treturn 0;\r\n\t\t\tcase 'to top right':\r\n\t\t\tcase 'to right top':\r\n\t\t\t\treturn angleBase;\r\n\t\t\tcase 'to right':\r\n\t\t\t\treturn 2 * angleBase;\r\n\t\t\tcase 'to bottom right':\r\n\t\t\tcase 'to right bottom':\r\n\t\t\t\treturn 3 * angleBase;\r\n\t\t\tcase 'to bottom':\r\n\t\t\t\treturn 4 * angleBase;\r\n\t\t\tcase 'to bottom left':\r\n\t\t\tcase 'to left bottom':\r\n\t\t\t\treturn 5 * angleBase;\r\n\t\t\tcase 'to left':\r\n\t\t\t\treturn 6 * angleBase;\r\n\t\t\tcase 'to top left':\r\n\t\t\tcase 'to left top':\r\n\t\t\t\treturn 7 * angleBase;\r\n\t\t}\r\n\t} else if ( angleType === 'angle' ) {\r\n\t\treturn parseFloat( angle );\r\n\t} else {\r\n\t\treturn 4 * angleBase;\r\n\t}\r\n}\r\n\r\nexport function getGradientColorGroup( gradientValue ) {\r\n\tconst colorNeedParenthesis = [ 'rgb', 'rgba' ];\r\n\r\n\tconst excludeSideOrCorner = /linear-gradient\\(to\\s+([a-z\\s]+,)/;\r\n\r\n\t// Parser has some difficulties with angle defined as a side or corner (e.g. `to left`)\r\n\t// so it's going to be excluded in order to matching color groups.\r\n\tconst modifiedGradientValue = gradientValue.replace(\r\n\t\texcludeSideOrCorner,\r\n\t\t'linear-gradient('\r\n\t);\r\n\r\n\treturn [].concat(\r\n\t\t...gradientParser.parse( modifiedGradientValue )?.map( ( gradient ) =>\r\n\t\t\tgradient.colorStops?.map( ( color, index ) => {\r\n\t\t\t\tconst { type, value, length } = color;\r\n\t\t\t\tconst fallbackLength = `${\r\n\t\t\t\t\t100 * ( index / ( gradient.colorStops.length - 1 ) )\r\n\t\t\t\t}%`;\r\n\t\t\t\tconst colorLength = length\r\n\t\t\t\t\t? `${ length.value }${ length.type }`\r\n\t\t\t\t\t: fallbackLength;\r\n\r\n\t\t\t\tif ( colorNeedParenthesis.includes( type ) ) {\r\n\t\t\t\t\treturn [ `${ type }(${ value.join( ',' ) })`, colorLength ];\r\n\t\t\t\t} else if ( type === 'literal' ) {\r\n\t\t\t\t\treturn [ value, colorLength ];\r\n\t\t\t\t}\r\n\t\t\t\treturn [ `#${ value }`, colorLength ];\r\n\t\t\t} )\r\n\t\t)\r\n\t);\r\n}\r\n\r\nexport function getGradientBaseColors( colorGroup ) {\r\n\treturn colorGroup.map( ( color ) => color[ 0 ] );\r\n}\r\n\r\nexport function getColorLocations( colorGroup ) {\r\n\treturn colorGroup.map(\r\n\t\t( location ) => Number( location[ 1 ].replace( '%', '' ) ) / 100\r\n\t);\r\n}\r\n\r\nfunction Gradient( {\r\n\tgradientValue,\r\n\tstyle,\r\n\tangleCenter = { x: 0.5, y: 0.5 },\r\n\tchildren,\r\n\t...otherProps\r\n} ) {\r\n\tconst [ resizeObserver, sizes ] = useResizeObserver();\r\n\tconst { width = 0, height = 0 } = sizes || {};\r\n\tconst { isGradient, getGradientType, gradients } = colorsUtils;\r\n\r\n\tconst colorGroup = useMemo(\r\n\t\t() => getGradientColorGroup( gradientValue ),\r\n\t\t[ gradientValue ]\r\n\t);\r\n\r\n\tconst locations = useMemo(\r\n\t\t() => getColorLocations( colorGroup ),\r\n\t\t[ colorGroup ]\r\n\t);\r\n\r\n\tconst colors = useMemo(\r\n\t\t() => getGradientBaseColors( colorGroup ),\r\n\t\t[ colorGroup ]\r\n\t);\r\n\r\n\tif ( ! gradientValue || ! isGradient( gradientValue ) ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst isLinearGradient =\r\n\t\tgetGradientType( gradientValue ) === gradients.linear;\r\n\r\n\tif ( isLinearGradient ) {\r\n\t\treturn (\r\n\t\t\t<RNLinearGradient\r\n\t\t\t\tcolors={ colors }\r\n\t\t\t\tuseAngle\r\n\t\t\t\tangle={ getGradientAngle( gradientValue ) }\r\n\t\t\t\tlocations={ locations }\r\n\t\t\t\tangleCenter={ angleCenter }\r\n\t\t\t\tstyle={ style }\r\n\t\t\t\t{ ...otherProps }\r\n\t\t\t>\r\n\t\t\t\t{ children }\r\n\t\t\t</RNLinearGradient>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<View style={ [ style, styles.overflow ] }>\r\n\t\t\t<View style={ styles.radialGradientContent }>{ children }</View>\r\n\t\t\t{ resizeObserver }\r\n\t\t\t<SVG>\r\n\t\t\t\t<Defs>\r\n\t\t\t\t\t<RadialGradient\r\n\t\t\t\t\t\t// eslint-disable-next-line no-restricted-syntax\r\n\t\t\t\t\t\tid=\"radialGradient\"\r\n\t\t\t\t\t\tgradientUnits=\"userSpaceOnUse\"\r\n\t\t\t\t\t\trx=\"70%\"\r\n\t\t\t\t\t\try=\"70%\"\r\n\t\t\t\t\t\tcy={ Platform.OS === 'android' ? width / 2 : '50%' }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ colorGroup.map( ( group ) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<Stop\r\n\t\t\t\t\t\t\t\t\toffset={ group[ 1 ] }\r\n\t\t\t\t\t\t\t\t\tstopColor={ group[ 0 ] }\r\n\t\t\t\t\t\t\t\t\tstopOpacity=\"1\"\r\n\t\t\t\t\t\t\t\t\tkey={ `${ group[ 1 ] }-${ group[ 0 ] }` }\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t} ) }\r\n\t\t\t\t\t</RadialGradient>\r\n\t\t\t\t</Defs>\r\n\t\t\t\t<Rect\r\n\t\t\t\t\theight={ height }\r\n\t\t\t\t\twidth={ width }\r\n\t\t\t\t\tfill=\"url(#radialGradient)\"\r\n\t\t\t\t/>\r\n\t\t\t</SVG>\r\n\t\t</View>\r\n\t);\r\n}\r\n\r\nexport default Gradient;\r\n"],"mappings":"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","ignoreList":[]}