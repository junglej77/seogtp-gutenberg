{"version":3,"names":["FlatList","Animated","forwardRef","useCallback","useImperativeHandle","useScroll","KeyboardAvoidingView","OPTIMIZATION_ITEMS_THRESHOLD","OPTIMIZATION_PROPS","jsx","_jsx","AnimatedFlatList","createAnimatedComponent","EMPTY_OBJECT","KeyboardAwareFlatList","onScroll","props","ref","extraScrollHeight","scrollEnabled","shouldPreventAutomaticScroll","scrollViewRef","scrollHandler","scrollToSection","scrollToElement","onContentSizeChange","lastScrollTo","getFlatListRef","flatListRef","current","getNativeScrollRef","optimizationProps","data","length","style","flex","children","removeClippedSubviews"],"sources":["@wordpress/components/src/mobile/keyboard-aware-flat-list/index.android.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport { FlatList } from 'react-native';\r\nimport Animated from 'react-native-reanimated';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tforwardRef,\r\n\tuseCallback,\r\n\tuseImperativeHandle,\r\n} from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport useScroll from './use-scroll';\r\nimport KeyboardAvoidingView from '../keyboard-avoiding-view';\r\nimport { OPTIMIZATION_ITEMS_THRESHOLD, OPTIMIZATION_PROPS } from './shared';\r\n\r\nconst AnimatedFlatList = Animated.createAnimatedComponent( FlatList );\r\nconst EMPTY_OBJECT = {};\r\n\r\nexport const KeyboardAwareFlatList = ( { onScroll, ...props }, ref ) => {\r\n\tconst { extraScrollHeight, scrollEnabled, shouldPreventAutomaticScroll } =\r\n\t\tprops;\r\n\r\n\tconst {\r\n\t\tscrollViewRef,\r\n\t\tscrollHandler,\r\n\t\tscrollToSection,\r\n\t\tscrollToElement,\r\n\t\tonContentSizeChange,\r\n\t\tlastScrollTo,\r\n\t} = useScroll( {\r\n\t\tscrollEnabled,\r\n\t\tshouldPreventAutomaticScroll,\r\n\t\textraScrollHeight,\r\n\t\tonScroll,\r\n\t} );\r\n\r\n\tconst getFlatListRef = useCallback(\r\n\t\t( flatListRef ) => {\r\n\t\t\tscrollViewRef.current = flatListRef?.getNativeScrollRef();\r\n\t\t},\r\n\t\t[ scrollViewRef ]\r\n\t);\r\n\r\n\tuseImperativeHandle( ref, () => {\r\n\t\treturn {\r\n\t\t\tscrollViewRef: scrollViewRef.current,\r\n\t\t\tscrollToSection,\r\n\t\t\tscrollToElement,\r\n\t\t\tlastScrollTo,\r\n\t\t};\r\n\t} );\r\n\r\n\tconst optimizationProps =\r\n\t\tprops.data?.length > OPTIMIZATION_ITEMS_THRESHOLD\r\n\t\t\t? OPTIMIZATION_PROPS\r\n\t\t\t: EMPTY_OBJECT;\r\n\r\n\treturn (\r\n\t\t<KeyboardAvoidingView style={ { flex: 1 } }>\r\n\t\t\t<AnimatedFlatList\r\n\t\t\t\tref={ getFlatListRef }\r\n\t\t\t\tonScroll={ scrollHandler }\r\n\t\t\t\tonContentSizeChange={ onContentSizeChange }\r\n\t\t\t\t// Disable clipping to fix focus losing.\r\n\t\t\t\t// See https://github.com/wordpress-mobile/gutenberg-mobile/pull/741#issuecomment-472746541\r\n\t\t\t\tremoveClippedSubviews={ false }\r\n\t\t\t\t{ ...optimizationProps }\r\n\t\t\t\t{ ...props }\r\n\t\t\t/>\r\n\t\t</KeyboardAvoidingView>\r\n\t);\r\n};\r\n\r\nexport default forwardRef( KeyboardAwareFlatList );\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,QAAQ,QAAQ,cAAc;AACvC,OAAOC,QAAQ,MAAM,yBAAyB;;AAE9C;AACA;AACA;AACA,SACCC,UAAU,EACVC,WAAW,EACXC,mBAAmB,QACb,oBAAoB;;AAE3B;AACA;AACA;AACA,OAAOC,SAAS,MAAM,cAAc;AACpC,OAAOC,oBAAoB,MAAM,2BAA2B;AAC5D,SAASC,4BAA4B,EAAEC,kBAAkB,QAAQ,UAAU;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAE5E,MAAMC,gBAAgB,GAAGV,QAAQ,CAACW,uBAAuB,CAAEZ,QAAS,CAAC;AACrE,MAAMa,YAAY,GAAG,CAAC,CAAC;AAEvB,OAAO,MAAMC,qBAAqB,GAAGA,CAAE;EAAEC,QAAQ;EAAE,GAAGC;AAAM,CAAC,EAAEC,GAAG,KAAM;EACvE,MAAM;IAAEC,iBAAiB;IAAEC,aAAa;IAAEC;EAA6B,CAAC,GACvEJ,KAAK;EAEN,MAAM;IACLK,aAAa;IACbC,aAAa;IACbC,eAAe;IACfC,eAAe;IACfC,mBAAmB;IACnBC;EACD,CAAC,GAAGrB,SAAS,CAAE;IACdc,aAAa;IACbC,4BAA4B;IAC5BF,iBAAiB;IACjBH;EACD,CAAE,CAAC;EAEH,MAAMY,cAAc,GAAGxB,WAAW,CAC/ByB,WAAW,IAAM;IAClBP,aAAa,CAACQ,OAAO,GAAGD,WAAW,EAAEE,kBAAkB,CAAC,CAAC;EAC1D,CAAC,EACD,CAAET,aAAa,CAChB,CAAC;EAEDjB,mBAAmB,CAAEa,GAAG,EAAE,MAAM;IAC/B,OAAO;MACNI,aAAa,EAAEA,aAAa,CAACQ,OAAO;MACpCN,eAAe;MACfC,eAAe;MACfE;IACD,CAAC;EACF,CAAE,CAAC;EAEH,MAAMK,iBAAiB,GACtBf,KAAK,CAACgB,IAAI,EAAEC,MAAM,GAAG1B,4BAA4B,GAC9CC,kBAAkB,GAClBK,YAAY;EAEhB,oBACCH,IAAA,CAACJ,oBAAoB;IAAC4B,KAAK,EAAG;MAAEC,IAAI,EAAE;IAAE,CAAG;IAAAC,QAAA,eAC1C1B,IAAA,CAACC,gBAAgB;MAChBM,GAAG,EAAGU,cAAgB;MACtBZ,QAAQ,EAAGO,aAAe;MAC1BG,mBAAmB,EAAGA;MACtB;MACA;MAAA;MACAY,qBAAqB,EAAG,KAAO;MAAA,GAC1BN,iBAAiB;MAAA,GACjBf;IAAK,CACV;EAAC,CACmB,CAAC;AAEzB,CAAC;AAED,eAAed,UAAU,CAAEY,qBAAsB,CAAC","ignoreList":[]}