{"version":3,"names":["useSafeAreaInsets","useCallback","useScrollToSection","extraScrollHeight","keyboardOffset","scrollEnabled","scrollViewMeasurements","scrollViewRef","scrollViewYOffset","top","bottom","insets","scrollToSection","sectionY","sectionHeight","current","currentScrollViewYOffset","Math","max","value","scrollTo","y","animated","availableScreenSpace","abs","floor","height","maxOffset","isAtTheTop"],"sources":["@wordpress/components/src/mobile/keyboard-aware-flat-list/use-scroll-to-section.native.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useCallback } from '@wordpress/element';\r\n\r\n/** @typedef {import('@wordpress/element').RefObject} RefObject */\r\n/** @typedef {import('react-native-reanimated').SharedValue} SharedValue */\r\n/**\r\n * Hook to scroll to a specified section by taking into account the Keyboard\r\n * and the Header.\r\n *\r\n * @param {number}      extraScrollHeight      Extra space to not overlap the content.\r\n * @param {number}      keyboardOffset         Keyboard space offset.\r\n * @param {boolean}     scrollEnabled          Whether the scroll is enabled or not.\r\n * @param {RefObject}   scrollViewMeasurements ScrollView Layout measurements.\r\n * @param {RefObject}   scrollViewRef          Scroll view reference.\r\n * @param {SharedValue} scrollViewYOffset      Current offset position of the ScrollView.\r\n * @return {Function[]} Function to scroll to a section.\r\n */\r\nexport default function useScrollToSection(\r\n\textraScrollHeight,\r\n\tkeyboardOffset,\r\n\tscrollEnabled,\r\n\tscrollViewMeasurements,\r\n\tscrollViewRef,\r\n\tscrollViewYOffset\r\n) {\r\n\tconst { top, bottom } = useSafeAreaInsets();\r\n\tconst insets = top + bottom;\r\n\r\n\t/**\r\n\t * Function to scroll to a section.\r\n\t *\r\n\t * @param {Object} section        Section data to scroll to.\r\n\t * @param {number} section.y      Y-coordinate of of the section.\r\n\t * @param {number} section.height Height of the section.\r\n\t */\r\n\tconst scrollToSection = useCallback(\r\n\t\t( sectionY, sectionHeight ) => {\r\n\t\t\tif (\r\n\t\t\t\t! scrollViewRef.current ||\r\n\t\t\t\t! scrollEnabled ||\r\n\t\t\t\t! scrollViewMeasurements.current\r\n\t\t\t) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst currentScrollViewYOffset = Math.max(\r\n\t\t\t\t0,\r\n\t\t\t\tscrollViewYOffset.value\r\n\t\t\t);\r\n\r\n\t\t\t// Scroll to the top of the section.\r\n\t\t\tif ( sectionY < currentScrollViewYOffset ) {\r\n\t\t\t\tscrollViewRef.current.scrollTo( {\r\n\t\t\t\t\ty: sectionY,\r\n\t\t\t\t\tanimated: true,\r\n\t\t\t\t} );\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst availableScreenSpace = Math.abs(\r\n\t\t\t\tMath.floor(\r\n\t\t\t\t\tscrollViewMeasurements.current.height -\r\n\t\t\t\t\t\t( keyboardOffset + extraScrollHeight + sectionHeight )\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t\tconst maxOffset = Math.floor(\r\n\t\t\t\tcurrentScrollViewYOffset + availableScreenSpace\r\n\t\t\t);\r\n\r\n\t\t\tconst isAtTheTop =\r\n\t\t\t\tsectionY < scrollViewMeasurements.current.y + insets;\r\n\r\n\t\t\t// Scroll to the bottom of the section.\r\n\t\t\tif ( sectionY > maxOffset && ! isAtTheTop ) {\r\n\t\t\t\tscrollViewRef.current.scrollTo( {\r\n\t\t\t\t\ty: sectionY - availableScreenSpace,\r\n\t\t\t\t\tanimated: true,\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\t\t},\r\n\t\t[\r\n\t\t\textraScrollHeight,\r\n\t\t\tinsets,\r\n\t\t\tkeyboardOffset,\r\n\t\t\tscrollEnabled,\r\n\t\t\tscrollViewMeasurements,\r\n\t\t\tscrollViewRef,\r\n\t\t\tscrollViewYOffset,\r\n\t\t]\r\n\t);\r\n\r\n\treturn [ scrollToSection ];\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,iBAAiB,QAAQ,gCAAgC;;AAElE;AACA;AACA;AACA,SAASC,WAAW,QAAQ,oBAAoB;;AAEhD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAASC,kBAAkBA,CACzCC,iBAAiB,EACjBC,cAAc,EACdC,aAAa,EACbC,sBAAsB,EACtBC,aAAa,EACbC,iBAAiB,EAChB;EACD,MAAM;IAAEC,GAAG;IAAEC;EAAO,CAAC,GAAGV,iBAAiB,CAAC,CAAC;EAC3C,MAAMW,MAAM,GAAGF,GAAG,GAAGC,MAAM;;EAE3B;AACD;AACA;AACA;AACA;AACA;AACA;EACC,MAAME,eAAe,GAAGX,WAAW,CAClC,CAAEY,QAAQ,EAAEC,aAAa,KAAM;IAC9B,IACC,CAAEP,aAAa,CAACQ,OAAO,IACvB,CAAEV,aAAa,IACf,CAAEC,sBAAsB,CAACS,OAAO,EAC/B;MACD;IACD;IAEA,MAAMC,wBAAwB,GAAGC,IAAI,CAACC,GAAG,CACxC,CAAC,EACDV,iBAAiB,CAACW,KACnB,CAAC;;IAED;IACA,IAAKN,QAAQ,GAAGG,wBAAwB,EAAG;MAC1CT,aAAa,CAACQ,OAAO,CAACK,QAAQ,CAAE;QAC/BC,CAAC,EAAER,QAAQ;QACXS,QAAQ,EAAE;MACX,CAAE,CAAC;MACH;IACD;IAEA,MAAMC,oBAAoB,GAAGN,IAAI,CAACO,GAAG,CACpCP,IAAI,CAACQ,KAAK,CACTnB,sBAAsB,CAACS,OAAO,CAACW,MAAM,IAClCtB,cAAc,GAAGD,iBAAiB,GAAGW,aAAa,CACtD,CACD,CAAC;IACD,MAAMa,SAAS,GAAGV,IAAI,CAACQ,KAAK,CAC3BT,wBAAwB,GAAGO,oBAC5B,CAAC;IAED,MAAMK,UAAU,GACff,QAAQ,GAAGP,sBAAsB,CAACS,OAAO,CAACM,CAAC,GAAGV,MAAM;;IAErD;IACA,IAAKE,QAAQ,GAAGc,SAAS,IAAI,CAAEC,UAAU,EAAG;MAC3CrB,aAAa,CAACQ,OAAO,CAACK,QAAQ,CAAE;QAC/BC,CAAC,EAAER,QAAQ,GAAGU,oBAAoB;QAClCD,QAAQ,EAAE;MACX,CAAE,CAAC;IACJ;EACD,CAAC,EACD,CACCnB,iBAAiB,EACjBQ,MAAM,EACNP,cAAc,EACdC,aAAa,EACbC,sBAAsB,EACtBC,aAAa,EACbC,iBAAiB,CAEnB,CAAC;EAED,OAAO,CAAEI,eAAe,CAAE;AAC3B","ignoreList":[]}