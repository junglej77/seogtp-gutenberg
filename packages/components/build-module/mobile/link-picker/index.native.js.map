{"version":3,"names":["SafeAreaView","TouchableOpacity","View","Clipboard","useEffect","useState","__","sprintf","getProtocol","isURL","prependHTTP","link","cancelCircleFilled","usePreferredColorSchemeStyle","LinkPickerResults","NavBar","styles","BottomSheet","Icon","jsx","_jsx","jsxs","_jsxs","createDirectEntry","value","type","protocol","toLowerCase","includes","startsWith","isDirectEntry","title","url","getURLFromClipboard","text","getString","LinkPicker","initialValue","onLinkPicked","onCancel","cancel","setValue","clipboardUrl","setClipboardUrl","directEntry","pickLink","onSubmit","clear","omniCellStyle","omniCell","omniCellDark","iconStyle","icon","iconDark","then","catch","style","safeArea","children","DismissButton","onPress","Heading","ApplyButton","contentContainer","Cell","valueStyle","omniInput","placeholder","autoCapitalize","autoCorrect","keyboardType","onChangeValue","autoFocus","separatorType","clearIcon","fill","color","size","LinkSuggestionItemCell","accessible","accessibilityLabel","suggestion","query"],"sources":["@wordpress/components/src/mobile/link-picker/index.native.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport { SafeAreaView, TouchableOpacity, View } from 'react-native';\r\nimport Clipboard from '@react-native-clipboard/clipboard';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useEffect, useState } from '@wordpress/element';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { getProtocol, isURL, prependHTTP } from '@wordpress/url';\r\nimport { link, cancelCircleFilled } from '@wordpress/icons';\r\nimport { usePreferredColorSchemeStyle } from '@wordpress/compose';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport LinkPickerResults from './link-picker-results';\r\nimport NavBar from '../bottom-sheet/nav-bar';\r\nimport styles from './styles.scss';\r\nimport BottomSheet from '../bottom-sheet';\r\nimport Icon from '../../icon';\r\n\r\n// This creates a search suggestion for adding a url directly.\r\nexport const createDirectEntry = ( value ) => {\r\n\tlet type = 'URL';\r\n\r\n\tconst protocol = getProtocol( value )?.toLowerCase() || '';\r\n\r\n\tif ( protocol.includes( 'mailto' ) ) {\r\n\t\ttype = 'mailto';\r\n\t}\r\n\r\n\tif ( protocol.includes( 'tel' ) ) {\r\n\t\ttype = 'tel';\r\n\t}\r\n\r\n\tif ( value?.startsWith( '#' ) ) {\r\n\t\ttype = 'internal';\r\n\t}\r\n\r\n\treturn {\r\n\t\tisDirectEntry: true,\r\n\t\ttitle: value,\r\n\t\turl: type === 'URL' ? prependHTTP( value ) : value,\r\n\t\ttype,\r\n\t};\r\n};\r\n\r\nconst getURLFromClipboard = async () => {\r\n\tconst text = await Clipboard.getString();\r\n\treturn !! text && isURL( text ) ? text : '';\r\n};\r\n\r\nexport const LinkPicker = ( {\r\n\tvalue: initialValue,\r\n\tonLinkPicked,\r\n\tonCancel: cancel,\r\n} ) => {\r\n\tconst [ value, setValue ] = useState( initialValue );\r\n\tconst [ clipboardUrl, setClipboardUrl ] = useState( '' );\r\n\tconst directEntry = createDirectEntry( value );\r\n\r\n\t// The title of a direct entry is displayed as the raw input value, but if we\r\n\t// are replacing empty text, we want to use the generated url.\r\n\tconst pickLink = ( { title, url, isDirectEntry } ) => {\r\n\t\tonLinkPicked( { title: isDirectEntry ? url : title, url } );\r\n\t};\r\n\r\n\tconst onSubmit = () => {\r\n\t\tpickLink( directEntry );\r\n\t};\r\n\r\n\tconst clear = () => {\r\n\t\tsetValue( '' );\r\n\t\tsetClipboardUrl( '' );\r\n\t};\r\n\r\n\tconst omniCellStyle = usePreferredColorSchemeStyle(\r\n\t\tstyles.omniCell,\r\n\t\tstyles.omniCellDark\r\n\t);\r\n\r\n\tconst iconStyle = usePreferredColorSchemeStyle(\r\n\t\tstyles.icon,\r\n\t\tstyles.iconDark\r\n\t);\r\n\r\n\tuseEffect( () => {\r\n\t\tgetURLFromClipboard()\r\n\t\t\t.then( setClipboardUrl )\r\n\t\t\t.catch( () => setClipboardUrl( '' ) );\r\n\t}, [] );\r\n\r\n\t// TODO: Localize the accessibility label.\r\n\t// TODO: Decide on if `LinkSuggestionItemCell` with `isDirectEntry` makes sense.\r\n\treturn (\r\n\t\t<SafeAreaView style={ styles.safeArea }>\r\n\t\t\t<NavBar>\r\n\t\t\t\t<NavBar.DismissButton onPress={ cancel } />\r\n\t\t\t\t<NavBar.Heading>{ __( 'Link to' ) }</NavBar.Heading>\r\n\t\t\t\t<NavBar.ApplyButton onPress={ onSubmit } />\r\n\t\t\t</NavBar>\r\n\t\t\t<View style={ styles.contentContainer }>\r\n\t\t\t\t<BottomSheet.Cell\r\n\t\t\t\t\ticon={ link }\r\n\t\t\t\t\tstyle={ omniCellStyle }\r\n\t\t\t\t\tvalueStyle={ styles.omniInput }\r\n\t\t\t\t\tvalue={ value }\r\n\t\t\t\t\tplaceholder={ __( 'Search or type URL' ) }\r\n\t\t\t\t\tautoCapitalize=\"none\"\r\n\t\t\t\t\tautoCorrect={ false }\r\n\t\t\t\t\tkeyboardType=\"url\"\r\n\t\t\t\t\tonChangeValue={ setValue }\r\n\t\t\t\t\tonSubmit={ onSubmit }\r\n\t\t\t\t\t/* eslint-disable-next-line jsx-a11y/no-autofocus */\r\n\t\t\t\t\tautoFocus\r\n\t\t\t\t\tseparatorType=\"none\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{ value !== '' && (\r\n\t\t\t\t\t\t<TouchableOpacity\r\n\t\t\t\t\t\t\tonPress={ clear }\r\n\t\t\t\t\t\t\tstyle={ styles.clearIcon }\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\ticon={ cancelCircleFilled }\r\n\t\t\t\t\t\t\t\tfill={ iconStyle.color }\r\n\t\t\t\t\t\t\t\tsize={ 24 }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</TouchableOpacity>\r\n\t\t\t\t\t) }\r\n\t\t\t\t</BottomSheet.Cell>\r\n\t\t\t\t{ !! clipboardUrl && clipboardUrl !== value && (\r\n\t\t\t\t\t<BottomSheet.LinkSuggestionItemCell\r\n\t\t\t\t\t\taccessible\r\n\t\t\t\t\t\taccessibilityLabel={ sprintf(\r\n\t\t\t\t\t\t\t/* translators: Copy URL from the clipboard, https://sample.url */\r\n\t\t\t\t\t\t\t__( 'Copy URL from the clipboard, %s' ),\r\n\t\t\t\t\t\t\tclipboardUrl\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t\tsuggestion={ {\r\n\t\t\t\t\t\t\ttype: 'clipboard',\r\n\t\t\t\t\t\t\turl: clipboardUrl,\r\n\t\t\t\t\t\t\tisDirectEntry: true,\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t\tonLinkPicked={ pickLink }\r\n\t\t\t\t\t/>\r\n\t\t\t\t) }\r\n\t\t\t\t{ !! value && (\r\n\t\t\t\t\t<LinkPickerResults\r\n\t\t\t\t\t\tquery={ value }\r\n\t\t\t\t\t\tonLinkPicked={ pickLink }\r\n\t\t\t\t\t\tdirectEntry={ directEntry }\r\n\t\t\t\t\t/>\r\n\t\t\t\t) }\r\n\t\t\t</View>\r\n\t\t</SafeAreaView>\r\n\t);\r\n};\r\n"],"mappings":"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","ignoreList":[]}