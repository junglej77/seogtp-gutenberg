{"version":3,"names":["Platform","Clipboard","compose","withSelect","isURL","prependHTTP","useEffect","useState","useRef","useContext","useCallback","link","external","BottomSheet","BottomSheetContext","PanelBody","TextControl","ToggleControl","FooterMessageControl","PanelActions","LinkRelIcon","styles","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","NEW_TAB_REL","LinkSettings","isVisible","onClose","setAttributes","onEmptyURL","options","withBottomSheet","actions","editorSidebarOpened","showIcon","onLinkCellPressed","urlValue","url","label","linkTarget","rel","urlInputValue","setUrlInputValue","labelInputValue","setLabelInputValue","linkRelInputValue","setLinkRelInputValue","onCloseSettingsSheetConsumed","prevEditorSidebarOpenedRef","onHandleClosingBottomSheet","onCloseSettingsSheet","current","prevEditorSidebarOpened","isSettingSheetOpen","autoFill","getURLFromClipboard","onSetAttributes","onChangeURL","value","onChangeLabel","newURL","onChangeOpenInNewTab","newLinkTarget","undefined","updatedRel","onChangeLinkRel","clipboardText","getString","getSettings","children","LinkCell","valueMask","onPress","icon","valuePlaceholder","placeholder","onChange","onSubmit","autoCapitalize","autoCorrect","autoFocus","OS","keyboardType","linkLabel","openInNewTab","checked","linkRel","style","linkSettingsPanel","footer","separatorType","select","isEditorSidebarOpened"],"sources":["@wordpress/components/src/mobile/link-settings/index.native.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport { Platform } from 'react-native';\r\nimport Clipboard from '@react-native-clipboard/clipboard';\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { compose } from '@wordpress/compose';\r\nimport { withSelect } from '@wordpress/data';\r\nimport { isURL, prependHTTP } from '@wordpress/url';\r\nimport {\r\n\tuseEffect,\r\n\tuseState,\r\n\tuseRef,\r\n\tuseContext,\r\n\tuseCallback,\r\n} from '@wordpress/element';\r\nimport { link, external } from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BottomSheet from '../bottom-sheet';\r\nimport { BottomSheetContext } from '../bottom-sheet/bottom-sheet-context';\r\nimport PanelBody from '../../panel/body';\r\nimport TextControl from '../../text-control';\r\nimport ToggleControl from '../../toggle-control';\r\nimport FooterMessageControl from '../../footer-message-control';\r\nimport PanelActions from '../../panel/actions';\r\nimport LinkRelIcon from './link-rel';\r\n\r\nimport styles from './style.scss';\r\n\r\nconst NEW_TAB_REL = 'noreferrer noopener';\r\nfunction LinkSettings( {\r\n\t// Control link settings `BottomSheet` visibility\r\n\tisVisible,\r\n\t// Callback that is called on closing bottom sheet\r\n\tonClose,\r\n\t// Function called to set attributes\r\n\tsetAttributes,\r\n\t// Callback that is called when url input field is empty\r\n\tonEmptyURL,\r\n\t// Object of available options along with specific, customizable properties.\r\n\t// Available options keys:\r\n\t//\t* url - uses `TextControl` component to set `attributes.url`\r\n\t//\t* linkLabel - uses `TextControl` component to set `attributes.label`\r\n\t//\t* openInNewTab - uses `ToggleControl` component to set `attributes.linkTarget` and `attributes.rel`\r\n\t//\t* linkRel - uses `TextControl` component to set `attributes.rel`\r\n\t//\t* footer - uses `FooterMessageControl` component to display message, e.g. about missing functionality\r\n\t// Available properties:\r\n\t//\t* label - control component label, e.g. `Button Link URL`\r\n\t//\t* placeholder - control component placeholder, e.g. `Add URL`\r\n\t//\t* autoFocus (url only) - whether url input should be focused on sheet opening\r\n\t//\t* autoFill (url only) - whether url input should be filled with url from clipboard\r\n\t// Example:\r\n\t//\tconst options = {\r\n\t//\t\turl: {\r\n\t//\t\t\tlabel: __( 'Button Link URL' ),\r\n\t//\t\t\tplaceholder: __( 'Add URL' ),\r\n\t//\t\t\tautoFocus: true,\r\n\t//\t\t\tautoFill: true,\r\n\t//\t\t}\r\n\t//\t}\r\n\toptions,\r\n\t// Specifies whether settings should be wrapped into `BottomSheet`\r\n\twithBottomSheet,\r\n\t// Defines buttons which will be displayed below the all options.\r\n\t// It's an array of objects with following properties:\r\n\t//\t* label - button title\r\n\t//\t* onPress - callback that is called on pressing button\r\n\t// Example:\r\n\t// \tconst actions = [\r\n\t//\t\t{\r\n\t//\t\t\tlabel: __( 'Remove link' ),\r\n\t//\t\t\tonPress: () => setAttributes({ url: '' }),\r\n\t//\t\t},\r\n\t//\t];\r\n\tactions,\r\n\t// Specifies whether general `BottomSheet` is opened\r\n\teditorSidebarOpened,\r\n\t// Specifies whether icon should be displayed next to the label\r\n\tshowIcon,\r\n\tonLinkCellPressed,\r\n\turlValue,\r\n\t// Attributes properties\r\n\turl,\r\n\tlabel = '',\r\n\tlinkTarget,\r\n\trel = '',\r\n} ) {\r\n\tconst [ urlInputValue, setUrlInputValue ] = useState( '' );\r\n\tconst [ labelInputValue, setLabelInputValue ] = useState( '' );\r\n\tconst [ linkRelInputValue, setLinkRelInputValue ] = useState( '' );\r\n\tconst onCloseSettingsSheetConsumed = useRef( false );\r\n\tconst prevEditorSidebarOpenedRef = useRef();\r\n\r\n\tconst { onHandleClosingBottomSheet } = useContext( BottomSheetContext );\r\n\tuseEffect( () => {\r\n\t\tif ( onHandleClosingBottomSheet ) {\r\n\t\t\tonHandleClosingBottomSheet( onCloseSettingsSheet );\r\n\t\t}\r\n\t\t// Disable reason: deferring this refactor to the native team.\r\n\t\t// see https://github.com/WordPress/gutenberg/pull/41166\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [ urlInputValue, labelInputValue, linkRelInputValue ] );\r\n\r\n\tuseEffect( () => {\r\n\t\tprevEditorSidebarOpenedRef.current = editorSidebarOpened;\r\n\t} );\r\n\tconst prevEditorSidebarOpened = prevEditorSidebarOpenedRef.current;\r\n\r\n\tuseEffect( () => {\r\n\t\tif ( url !== urlInputValue ) {\r\n\t\t\tsetUrlInputValue( url || '' );\r\n\t\t}\r\n\t\t// Disable reason: deferring this refactor to the native team.\r\n\t\t// see https://github.com/WordPress/gutenberg/pull/41166\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [ url ] );\r\n\r\n\tuseEffect( () => {\r\n\t\tsetLabelInputValue( label || '' );\r\n\t}, [ label ] );\r\n\r\n\tuseEffect( () => {\r\n\t\tsetLinkRelInputValue( rel || '' );\r\n\t}, [ rel ] );\r\n\r\n\tuseEffect( () => {\r\n\t\tconst isSettingSheetOpen = isVisible || editorSidebarOpened;\r\n\t\tif ( isSettingSheetOpen ) {\r\n\t\t\tonCloseSettingsSheetConsumed.current = false;\r\n\t\t}\r\n\r\n\t\tif ( options.url.autoFill && isSettingSheetOpen && ! url ) {\r\n\t\t\tgetURLFromClipboard();\r\n\t\t}\r\n\r\n\t\tif ( prevEditorSidebarOpened && ! editorSidebarOpened ) {\r\n\t\t\tonSetAttributes();\r\n\t\t}\r\n\t\t// Disable reason: deferring this refactor to the native team.\r\n\t\t// see https://github.com/WordPress/gutenberg/pull/41166\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [ editorSidebarOpened, isVisible ] );\r\n\r\n\tuseEffect( () => {\r\n\t\tif ( ! urlValue && onEmptyURL ) {\r\n\t\t\tonEmptyURL();\r\n\t\t}\r\n\r\n\t\tif ( prependHTTP( urlValue ) !== url ) {\r\n\t\t\tsetAttributes( {\r\n\t\t\t\turl: prependHTTP( urlValue ),\r\n\t\t\t} );\r\n\t\t}\r\n\t\t// Disable reason: deferring this refactor to the native team.\r\n\t\t// see https://github.com/WordPress/gutenberg/pull/41166\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [ urlValue ] );\r\n\r\n\tconst onChangeURL = useCallback(\r\n\t\t( value ) => {\r\n\t\t\tif ( ! value && onEmptyURL ) {\r\n\t\t\t\tonEmptyURL();\r\n\t\t\t}\r\n\t\t\tsetUrlInputValue( value );\r\n\t\t},\r\n\t\t[ onEmptyURL ]\r\n\t);\r\n\r\n\tconst onChangeLabel = useCallback( ( value ) => {\r\n\t\tsetLabelInputValue( value );\r\n\t}, [] );\r\n\r\n\tconst onSetAttributes = useCallback( () => {\r\n\t\tconst newURL = prependHTTP( urlInputValue );\r\n\t\tif (\r\n\t\t\turl !== newURL ||\r\n\t\t\tlabelInputValue !== label ||\r\n\t\t\tlinkRelInputValue !== rel\r\n\t\t) {\r\n\t\t\tsetAttributes( {\r\n\t\t\t\turl: newURL,\r\n\t\t\t\tlabel: labelInputValue,\r\n\t\t\t\trel: linkRelInputValue,\r\n\t\t\t} );\r\n\t\t}\r\n\t\t// Disable reason: deferring this refactor to the native team.\r\n\t\t// see https://github.com/WordPress/gutenberg/pull/41166\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [ urlInputValue, labelInputValue, linkRelInputValue, setAttributes ] );\r\n\r\n\tconst onCloseSettingsSheet = useCallback( () => {\r\n\t\tif ( onCloseSettingsSheetConsumed.current ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tonCloseSettingsSheetConsumed.current = true;\r\n\r\n\t\tonSetAttributes();\r\n\r\n\t\tif ( onClose ) {\r\n\t\t\tonClose();\r\n\t\t}\r\n\t}, [ onClose, onSetAttributes ] );\r\n\r\n\tconst onChangeOpenInNewTab = useCallback(\r\n\t\t( value ) => {\r\n\t\t\tconst newLinkTarget = value ? '_blank' : undefined;\r\n\r\n\t\t\tlet updatedRel = linkRelInputValue;\r\n\t\t\tif ( newLinkTarget && ! linkRelInputValue ) {\r\n\t\t\t\tupdatedRel = NEW_TAB_REL;\r\n\t\t\t} else if ( ! newLinkTarget && linkRelInputValue === NEW_TAB_REL ) {\r\n\t\t\t\tupdatedRel = undefined;\r\n\t\t\t}\r\n\r\n\t\t\tsetAttributes( {\r\n\t\t\t\tlinkTarget: newLinkTarget,\r\n\t\t\t\trel: updatedRel,\r\n\t\t\t} );\r\n\t\t},\r\n\t\t// Disable reason: deferring this refactor to the native team.\r\n\t\t// see https://github.com/WordPress/gutenberg/pull/41166\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[ linkRelInputValue ]\r\n\t);\r\n\r\n\tconst onChangeLinkRel = useCallback( ( value ) => {\r\n\t\tsetLinkRelInputValue( value );\r\n\t}, [] );\r\n\r\n\tasync function getURLFromClipboard() {\r\n\t\tconst clipboardText = await Clipboard.getString();\r\n\r\n\t\tif ( ! clipboardText ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// Check if pasted text is URL.\r\n\t\tif ( ! isURL( clipboardText ) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetAttributes( { url: clipboardText } );\r\n\t}\r\n\r\n\tfunction getSettings() {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{ options.url &&\r\n\t\t\t\t\t( onLinkCellPressed ? (\r\n\t\t\t\t\t\t<BottomSheet.LinkCell\r\n\t\t\t\t\t\t\tshowIcon={ showIcon }\r\n\t\t\t\t\t\t\tvalue={ url }\r\n\t\t\t\t\t\t\tvalueMask={ options.url.valueMask }\r\n\t\t\t\t\t\t\tonPress={ onLinkCellPressed }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<TextControl\r\n\t\t\t\t\t\t\ticon={ showIcon && link }\r\n\t\t\t\t\t\t\tlabel={ options.url.label }\r\n\t\t\t\t\t\t\tvalue={ urlInputValue }\r\n\t\t\t\t\t\t\tvaluePlaceholder={ options.url.placeholder }\r\n\t\t\t\t\t\t\tonChange={ onChangeURL }\r\n\t\t\t\t\t\t\tonSubmit={ onCloseSettingsSheet }\r\n\t\t\t\t\t\t\tautoCapitalize=\"none\"\r\n\t\t\t\t\t\t\tautoCorrect={ false }\r\n\t\t\t\t\t\t\t// eslint-disable-next-line jsx-a11y/no-autofocus\r\n\t\t\t\t\t\t\tautoFocus={\r\n\t\t\t\t\t\t\t\tPlatform.OS === 'ios' && options.url.autoFocus\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tkeyboardType=\"url\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) ) }\r\n\t\t\t\t{ options.linkLabel && (\r\n\t\t\t\t\t<TextControl\r\n\t\t\t\t\t\tlabel={ options.linkLabel.label }\r\n\t\t\t\t\t\tvalue={ labelInputValue }\r\n\t\t\t\t\t\tvaluePlaceholder={ options.linkLabel.placeholder }\r\n\t\t\t\t\t\tonChange={ onChangeLabel }\r\n\t\t\t\t\t/>\r\n\t\t\t\t) }\r\n\t\t\t\t{ !! urlInputValue && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t{ options.openInNewTab && (\r\n\t\t\t\t\t\t\t<ToggleControl\r\n\t\t\t\t\t\t\t\ticon={ showIcon && external }\r\n\t\t\t\t\t\t\t\tlabel={ options.openInNewTab.label }\r\n\t\t\t\t\t\t\t\tchecked={ linkTarget === '_blank' }\r\n\t\t\t\t\t\t\t\tonChange={ onChangeOpenInNewTab }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t{ options.linkRel && (\r\n\t\t\t\t\t\t\t<TextControl\r\n\t\t\t\t\t\t\t\ticon={ showIcon && LinkRelIcon }\r\n\t\t\t\t\t\t\t\tlabel={ options.linkRel.label }\r\n\t\t\t\t\t\t\t\tvalue={ linkRelInputValue }\r\n\t\t\t\t\t\t\t\tvaluePlaceholder={ options.linkRel.placeholder }\r\n\t\t\t\t\t\t\t\tonChange={ onChangeLinkRel }\r\n\t\t\t\t\t\t\t\tonSubmit={ onCloseSettingsSheet }\r\n\t\t\t\t\t\t\t\tautoCapitalize=\"none\"\r\n\t\t\t\t\t\t\t\tautoCorrect={ false }\r\n\t\t\t\t\t\t\t\tkeyboardType=\"default\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t</>\r\n\t\t\t\t) }\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n\r\n\tif ( ! withBottomSheet ) {\r\n\t\treturn getSettings();\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<PanelBody style={ styles.linkSettingsPanel }>\r\n\t\t\t\t{ getSettings() }\r\n\t\t\t</PanelBody>\r\n\t\t\t{ options.footer && (\r\n\t\t\t\t<PanelBody style={ styles.linkSettingsPanel }>\r\n\t\t\t\t\t<FooterMessageControl\r\n\t\t\t\t\t\tlabel={ options.footer.label }\r\n\t\t\t\t\t\tseparatorType={ options.footer.separatorType }\r\n\t\t\t\t\t/>\r\n\t\t\t\t</PanelBody>\r\n\t\t\t) }\r\n\t\t\t{ actions && <PanelActions actions={ actions } /> }\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default compose( [\r\n\twithSelect( ( select ) => {\r\n\t\tconst { isEditorSidebarOpened } = select( 'core/edit-post' );\r\n\t\treturn {\r\n\t\t\teditorSidebarOpened: isEditorSidebarOpened(),\r\n\t\t};\r\n\t} ),\r\n] )( LinkSettings );\r\n"],"mappings":"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","ignoreList":[]}