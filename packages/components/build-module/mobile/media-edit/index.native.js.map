{"version":3,"names":["Component","__","requestMediaEditor","mediaSources","Picker","jsx","_jsx","MEDIA_TYPE_IMAGE","MEDIA_EDITOR","editOption","id","value","label","requiresModal","types","replaceOption","deviceLibrary","MediaEdit","constructor","props","onPickerPresent","bind","onPickerSelect","getMediaOptionsItems","getDestructiveButtonIndex","pickerOptions","openReplaceMediaOptions","source","uri","filter","Boolean","options","destructiveButtonIndex","findIndex","option","destructiveButton","undefined","picker","presentPicker","onSelect","multiple","media","optionSelected","find","onPress","render","mediaOptions","hideCancelButton","ref","instance","leftAlign","onChange","title","open"],"sources":["@wordpress/components/src/mobile/media-edit/index.native.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { Component } from '@wordpress/element';\r\nimport { __ } from '@wordpress/i18n';\r\nimport {\r\n\trequestMediaEditor,\r\n\tmediaSources,\r\n} from '@wordpress/react-native-bridge';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport Picker from '../picker';\r\n\r\nexport const MEDIA_TYPE_IMAGE = 'image';\r\n\r\nexport const MEDIA_EDITOR = 'MEDIA_EDITOR';\r\n\r\nconst editOption = {\r\n\tid: MEDIA_EDITOR,\r\n\tvalue: MEDIA_EDITOR,\r\n\tlabel: __( 'Edit' ),\r\n\trequiresModal: true,\r\n\ttypes: [ MEDIA_TYPE_IMAGE ],\r\n};\r\n\r\nconst replaceOption = {\r\n\tid: mediaSources.deviceLibrary,\r\n\tvalue: mediaSources.deviceLibrary,\r\n\tlabel: __( 'Replace' ),\r\n\ttypes: [ MEDIA_TYPE_IMAGE ],\r\n};\r\n\r\nexport class MediaEdit extends Component {\r\n\tconstructor( props ) {\r\n\t\tsuper( props );\r\n\t\tthis.onPickerPresent = this.onPickerPresent.bind( this );\r\n\t\tthis.onPickerSelect = this.onPickerSelect.bind( this );\r\n\t\tthis.getMediaOptionsItems = this.getMediaOptionsItems.bind( this );\r\n\t\tthis.getDestructiveButtonIndex =\r\n\t\t\tthis.getDestructiveButtonIndex.bind( this );\r\n\t}\r\n\r\n\tgetMediaOptionsItems() {\r\n\t\tconst { pickerOptions, openReplaceMediaOptions, source } = this.props;\r\n\r\n\t\treturn [\r\n\t\t\tsource?.uri && editOption,\r\n\t\t\topenReplaceMediaOptions && replaceOption,\r\n\t\t\t...( pickerOptions ? pickerOptions : [] ),\r\n\t\t].filter( Boolean );\r\n\t}\r\n\r\n\tgetDestructiveButtonIndex() {\r\n\t\tconst options = this.getMediaOptionsItems();\r\n\t\tconst destructiveButtonIndex = options.findIndex(\r\n\t\t\t( option ) => option?.destructiveButton\r\n\t\t);\r\n\r\n\t\treturn destructiveButtonIndex !== -1\r\n\t\t\t? destructiveButtonIndex + 1\r\n\t\t\t: undefined;\r\n\t}\r\n\r\n\tonPickerPresent() {\r\n\t\tif ( this.picker ) {\r\n\t\t\tthis.picker.presentPicker();\r\n\t\t}\r\n\t}\r\n\r\n\tonPickerSelect( value ) {\r\n\t\tconst {\r\n\t\t\tonSelect,\r\n\t\t\tpickerOptions,\r\n\t\t\tmultiple = false,\r\n\t\t\topenReplaceMediaOptions,\r\n\t\t} = this.props;\r\n\r\n\t\tswitch ( value ) {\r\n\t\t\tcase MEDIA_EDITOR:\r\n\t\t\t\trequestMediaEditor( this.props.source.uri, ( media ) => {\r\n\t\t\t\t\tif ( ( multiple && media ) || ( media && media.id ) ) {\r\n\t\t\t\t\t\tonSelect( media );\r\n\t\t\t\t\t}\r\n\t\t\t\t} );\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tconst optionSelected =\r\n\t\t\t\t\tpickerOptions &&\r\n\t\t\t\t\tpickerOptions.find( ( option ) => option.id === value );\r\n\r\n\t\t\t\tif ( optionSelected && optionSelected.onPress ) {\r\n\t\t\t\t\toptionSelected.onPress();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( openReplaceMediaOptions ) {\r\n\t\t\t\t\topenReplaceMediaOptions();\r\n\t\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst mediaOptions = () => (\r\n\t\t\t<Picker\r\n\t\t\t\thideCancelButton\r\n\t\t\t\tref={ ( instance ) => ( this.picker = instance ) }\r\n\t\t\t\toptions={ this.getMediaOptionsItems() }\r\n\t\t\t\tleftAlign\r\n\t\t\t\tonChange={ this.onPickerSelect }\r\n\t\t\t\t// translators: %s: block title e.g: \"Paragraph\".\r\n\t\t\t\ttitle={ __( 'Media options' ) }\r\n\t\t\t\tdestructiveButtonIndex={ this.getDestructiveButtonIndex() }\r\n\t\t\t/>\r\n\t\t);\r\n\r\n\t\treturn this.props.render( {\r\n\t\t\topen: this.onPickerPresent,\r\n\t\t\tmediaOptions,\r\n\t\t} );\r\n\t}\r\n}\r\n\r\nexport default MediaEdit;\r\n"],"mappings":"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","ignoreList":[]}