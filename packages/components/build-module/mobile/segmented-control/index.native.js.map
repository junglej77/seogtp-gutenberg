{"version":3,"names":["View","TouchableWithoutFeedback","Text","Platform","Animated","Easing","useState","useEffect","usePreferredColorSchemeStyle","performLayoutAnimation","styles","jsx","_jsx","jsxs","_jsxs","ANIMATION_DURATION","isIOS","OS","Segment","isSelected","title","onPress","onLayout","props","isSelectedIOS","segmentStyle","segment","segmentIOS","textStyle","buttonTextDefault","buttonTextDefaultDark","selectedTextStyle","buttonTextSelected","buttonTextSelectedDark","shadowStyle","shadowIOS","style","children","maxFontSizeMultiplier","SegmentedControls","segments","segmentHandler","selectedIndex","addonLeft","addonRight","selectedSegmentIndex","activeSegmentIndex","setActiveSegmentIndex","segmentsDimensions","setSegmentsDimensions","width","height","positionAnimationValue","Value","setValue","calculateEndValue","containerStyle","container","containerDark","performSwatchAnimation","index","timing","toValue","duration","easing","ease","useNativeDriver","start","paddingLeft","offset","containerIOS","widths","Object","values","map","dimension","widthsDistance","slice","widthsDistanceSum","reduce","sum","n","endValue","onHandlePress","segmentOnLayout","event","nativeEvent","layout","selectedStyle","selected","selectedDark","outlineStyle","outline","outlineIOS","row","flex","left","accessibilityState","accessibilityRole","accessibilityLabel","accessibilityHint","length"],"sources":["@wordpress/components/src/mobile/segmented-control/index.native.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport {\r\n\tView,\r\n\tTouchableWithoutFeedback,\r\n\tText,\r\n\tPlatform,\r\n\tAnimated,\r\n\tEasing,\r\n} from 'react-native';\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useState, useEffect } from '@wordpress/element';\r\nimport { usePreferredColorSchemeStyle } from '@wordpress/compose';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { performLayoutAnimation } from '../layout-animation';\r\nimport styles from './style.scss';\r\n\r\nconst ANIMATION_DURATION = 200;\r\n\r\nconst isIOS = Platform.OS === 'ios';\r\n\r\nconst Segment = ( { isSelected, title, onPress, onLayout, ...props } ) => {\r\n\tconst isSelectedIOS = isIOS && isSelected;\r\n\r\n\tconst segmentStyle = [ styles.segment, isIOS && styles.segmentIOS ];\r\n\r\n\tconst textStyle = usePreferredColorSchemeStyle(\r\n\t\tstyles.buttonTextDefault,\r\n\t\tstyles.buttonTextDefaultDark\r\n\t);\r\n\tconst selectedTextStyle = usePreferredColorSchemeStyle(\r\n\t\tstyles.buttonTextSelected,\r\n\t\tstyles.buttonTextSelectedDark\r\n\t);\r\n\tconst shadowStyle = usePreferredColorSchemeStyle( styles.shadowIOS, {} );\r\n\r\n\treturn (\r\n\t\t<View style={ isSelectedIOS && shadowStyle }>\r\n\t\t\t<TouchableWithoutFeedback onPress={ onPress }>\r\n\t\t\t\t<View style={ segmentStyle } onLayout={ onLayout } { ...props }>\r\n\t\t\t\t\t<Text\r\n\t\t\t\t\t\tstyle={ [ textStyle, isSelected && selectedTextStyle ] }\r\n\t\t\t\t\t\tmaxFontSizeMultiplier={ 2 }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ title }\r\n\t\t\t\t\t</Text>\r\n\t\t\t\t</View>\r\n\t\t\t</TouchableWithoutFeedback>\r\n\t\t</View>\r\n\t);\r\n};\r\n\r\nconst SegmentedControls = ( {\r\n\tsegments,\r\n\tsegmentHandler,\r\n\tselectedIndex,\r\n\taddonLeft,\r\n\taddonRight,\r\n} ) => {\r\n\tconst selectedSegmentIndex = selectedIndex || 0;\r\n\tconst [ activeSegmentIndex, setActiveSegmentIndex ] =\r\n\t\tuseState( selectedSegmentIndex );\r\n\tconst [ segmentsDimensions, setSegmentsDimensions ] = useState( {\r\n\t\t[ activeSegmentIndex ]: { width: 0, height: 0 },\r\n\t} );\r\n\tconst [ positionAnimationValue ] = useState( new Animated.Value( 0 ) );\r\n\r\n\tuseEffect( () => {\r\n\t\tsetActiveSegmentIndex( selectedSegmentIndex );\r\n\t\tsegmentHandler( segments[ selectedSegmentIndex ] );\r\n\t\t// Disable reason: deferring this refactor to the native team.\r\n\t\t// see https://github.com/WordPress/gutenberg/pull/41166\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [] );\r\n\r\n\tuseEffect( () => {\r\n\t\tpositionAnimationValue.setValue(\r\n\t\t\tcalculateEndValue( activeSegmentIndex )\r\n\t\t);\r\n\t\t// Disable reason: deferring this refactor to the native team.\r\n\t\t// see https://github.com/WordPress/gutenberg/pull/41166\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [ segmentsDimensions ] );\r\n\r\n\tconst containerStyle = usePreferredColorSchemeStyle(\r\n\t\tstyles.container,\r\n\t\tstyles.containerDark\r\n\t);\r\n\r\n\tfunction performSwatchAnimation( index ) {\r\n\t\tAnimated.timing( positionAnimationValue, {\r\n\t\t\ttoValue: calculateEndValue( index ),\r\n\t\t\tduration: ANIMATION_DURATION,\r\n\t\t\teasing: Easing.ease,\r\n\t\t\tuseNativeDriver: false,\r\n\t\t} ).start();\r\n\t}\r\n\r\n\tfunction calculateEndValue( index ) {\r\n\t\tconst { paddingLeft: offset } = isIOS\r\n\t\t\t? styles.containerIOS\r\n\t\t\t: styles.container;\r\n\t\tconst widths = Object.values( segmentsDimensions ).map(\r\n\t\t\t( dimension ) => dimension.width\r\n\t\t);\r\n\t\tconst widthsDistance = widths.slice( 0, index );\r\n\t\tconst widthsDistanceSum = widthsDistance.reduce(\r\n\t\t\t( sum, n ) => sum + n,\r\n\t\t\t0\r\n\t\t);\r\n\r\n\t\tconst endValue = index === 0 ? 0 : widthsDistanceSum;\r\n\t\treturn endValue + offset;\r\n\t}\r\n\r\n\tfunction onHandlePress( segment, index ) {\r\n\t\tperformLayoutAnimation( ANIMATION_DURATION );\r\n\t\tsetActiveSegmentIndex( index );\r\n\t\tsegmentHandler( segment );\r\n\t\tperformSwatchAnimation( index );\r\n\t}\r\n\r\n\tfunction segmentOnLayout( event, index ) {\r\n\t\tconst { width, height } = event.nativeEvent.layout;\r\n\r\n\t\tsetSegmentsDimensions( {\r\n\t\t\t...segmentsDimensions,\r\n\t\t\t[ index ]: { width, height },\r\n\t\t} );\r\n\t}\r\n\r\n\tconst selectedStyle = usePreferredColorSchemeStyle(\r\n\t\tstyles.selected,\r\n\t\tstyles.selectedDark\r\n\t);\r\n\r\n\tconst width = segmentsDimensions[ activeSegmentIndex ]?.width;\r\n\tconst height = segmentsDimensions[ activeSegmentIndex ]?.height;\r\n\r\n\tconst outlineStyle = [ styles.outline, isIOS && styles.outlineIOS ];\r\n\r\n\treturn (\r\n\t\t<View style={ styles.row }>\r\n\t\t\t<View style={ styles.flex }>{ addonLeft }</View>\r\n\t\t\t<View style={ [ containerStyle, isIOS && styles.containerIOS ] }>\r\n\t\t\t\t<Animated.View\r\n\t\t\t\t\tstyle={ [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\twidth,\r\n\t\t\t\t\t\t\tleft: positionAnimationValue,\r\n\t\t\t\t\t\t\theight,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tselectedStyle,\r\n\t\t\t\t\t\toutlineStyle,\r\n\t\t\t\t\t] }\r\n\t\t\t\t/>\r\n\t\t\t\t{ segments.map( ( segment, index ) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Segment\r\n\t\t\t\t\t\t\ttitle={ segment }\r\n\t\t\t\t\t\t\tonPress={ () => onHandlePress( segment, index ) }\r\n\t\t\t\t\t\t\tisSelected={ activeSegmentIndex === index }\r\n\t\t\t\t\t\t\tkey={ index }\r\n\t\t\t\t\t\t\tonLayout={ ( event ) =>\r\n\t\t\t\t\t\t\t\tsegmentOnLayout( event, index )\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\taccessibilityState={ {\r\n\t\t\t\t\t\t\t\tselected: activeSegmentIndex === index,\r\n\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\taccessibilityRole=\"button\"\r\n\t\t\t\t\t\t\taccessibilityLabel={ segment }\r\n\t\t\t\t\t\t\taccessibilityHint={ `${ index + 1 } on ${\r\n\t\t\t\t\t\t\t\tsegments.length\r\n\t\t\t\t\t\t\t}` }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t} ) }\r\n\t\t\t</View>\r\n\t\t\t<View style={ styles.flex }>{ addonRight }</View>\r\n\t\t</View>\r\n\t);\r\n};\r\n\r\nexport default SegmentedControls;\r\n"],"mappings":"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","ignoreList":[]}