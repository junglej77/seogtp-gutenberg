{"version":3,"names":["Dimensions","useEffect","useState","useMemo","useCallback","getValueAndUnit","value","unit","regex","splitValue","match","filter","v","valueToConvert","valueUnit","undefined","convertUnitToMobile","containerSize","globalStyles","width","height","fontSize","Number","vw","Math","round","vh","useConvertUnitToMobile","styles","windowSizes","setWindowSizes","get","dimensionsChangeSubscription","addEventListener","onDimensionsChange","remove","window"],"sources":["@wordpress/components/src/mobile/utils/use-unit-converter-to-mobile.native.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport { Dimensions } from 'react-native';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useEffect, useState, useMemo, useCallback } from '@wordpress/element';\r\n\r\nconst getValueAndUnit = ( value, unit ) => {\r\n\tconst regex = /(\\d+\\.?\\d*)(.*)/;\r\n\r\n\tconst splitValue = `${ value }`\r\n\t\t?.match( regex )\r\n\t\t?.filter( ( v ) => v !== '' );\r\n\r\n\tif ( splitValue ) {\r\n\t\treturn {\r\n\t\t\tvalueToConvert: splitValue[ 1 ],\r\n\t\t\tvalueUnit: unit || splitValue[ 2 ],\r\n\t\t};\r\n\t}\r\n\treturn undefined;\r\n};\r\n\r\nconst convertUnitToMobile = ( containerSize, globalStyles, value, unit ) => {\r\n\tconst { width, height } = containerSize;\r\n\tconst { valueToConvert, valueUnit } = getValueAndUnit( value, unit ) || {};\r\n\tconst { fontSize = 16 } = globalStyles || {};\r\n\r\n\tif ( valueToConvert === undefined ) {\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tswitch ( valueUnit ) {\r\n\t\tcase 'rem':\r\n\t\tcase 'em':\r\n\t\t\treturn valueToConvert * fontSize;\r\n\t\tcase '%':\r\n\t\t\treturn Number( valueToConvert / 100 ) * width;\r\n\t\tcase 'px':\r\n\t\t\treturn Number( valueToConvert );\r\n\t\tcase 'vw':\r\n\t\t\tconst vw = width / 100;\r\n\t\t\treturn Math.round( valueToConvert * vw );\r\n\t\tcase 'vh':\r\n\t\t\tconst vh = height / 100;\r\n\t\t\treturn Math.round( valueToConvert * vh );\r\n\t\tdefault:\r\n\t\t\treturn Number( valueToConvert / 100 ) * width;\r\n\t}\r\n};\r\n\r\nconst useConvertUnitToMobile = ( value, unit, styles ) => {\r\n\tconst [ windowSizes, setWindowSizes ] = useState(\r\n\t\tDimensions.get( 'window' )\r\n\t);\r\n\r\n\tuseEffect( () => {\r\n\t\tconst dimensionsChangeSubscription = Dimensions.addEventListener(\r\n\t\t\t'change',\r\n\t\t\tonDimensionsChange\r\n\t\t);\r\n\r\n\t\treturn () => {\r\n\t\t\tdimensionsChangeSubscription.remove();\r\n\t\t};\r\n\t\t// Disable reason: deferring this refactor to the native team.\r\n\t\t// see https://github.com/WordPress/gutenberg/pull/41166\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [] );\r\n\r\n\tconst onDimensionsChange = useCallback( ( { window } ) => {\r\n\t\tsetWindowSizes( window );\r\n\t}, [] );\r\n\r\n\treturn useMemo( () => {\r\n\t\tconst { valueToConvert, valueUnit } =\r\n\t\t\tgetValueAndUnit( value, unit ) || {};\r\n\r\n\t\treturn convertUnitToMobile(\r\n\t\t\twindowSizes,\r\n\t\t\tstyles,\r\n\t\t\tvalueToConvert,\r\n\t\t\tvalueUnit\r\n\t\t);\r\n\t\t// Disable reason: deferring this refactor to the native team.\r\n\t\t// see https://github.com/WordPress/gutenberg/pull/41166\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [ windowSizes, value, unit ] );\r\n};\r\n\r\nexport { convertUnitToMobile, useConvertUnitToMobile, getValueAndUnit };\r\n"],"mappings":"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","ignoreList":[]}