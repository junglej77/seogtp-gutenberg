{"version":3,"names":["clsx","createPortal","useCallback","useEffect","useRef","useState","forwardRef","useLayoutEffect","createContext","useContext","useInstanceId","useFocusReturn","useFocusOnMount","useConstrainedTabbing","useMergeRefs","__","close","getScrollContainer","ariaHelper","Button","StyleProvider","withIgnoreIMEEvents","jsx","_jsx","jsxs","_jsxs","ModalContext","Set","bodyOpenClasses","Map","UnforwardedModal","props","forwardedRef","bodyOpenClassName","role","title","focusOnMount","shouldCloseOnEsc","shouldCloseOnClickOutside","isDismissible","aria","labelledby","undefined","describedby","onRequestClose","icon","closeButtonLabel","children","style","overlayClassName","className","contentLabel","onKeyDown","isFullScreen","size","headerActions","__experimentalHideHeader","ref","instanceId","Modal","headingId","focusOnMountRef","constrainedTabbingRef","focusReturnRef","contentRef","childrenContainerRef","hasScrolledContent","setHasScrolledContent","hasScrollableContent","setHasScrollableContent","sizeClass","isContentScrollable","current","closestScrollContainer","modalize","unmodalize","onRequestCloseRef","dismissers","nestedDismissers","add","dismisser","delete","_bodyOpenClasses$get","theClass","oneMore","get","set","document","body","classList","oneLess","remove","window","ResizeObserver","resizeObserver","observe","disconnect","handleEscapeKeyDown","event","code","key","defaultPrevented","preventDefault","onContentContainerScroll","e","_e$currentTarget$scro","scrollY","currentTarget","scrollTop","pressTarget","overlayPressHandlers","onPointerDown","target","onPointerUp","button","isSameTarget","modal","tabIndex","onScroll","id","onClick","label","Provider","value"],"sources":["@wordpress/components/src/modal/index.tsx"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\nimport type { ForwardedRef, KeyboardEvent, RefObject, UIEvent } from 'react';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tcreatePortal,\r\n\tuseCallback,\r\n\tuseEffect,\r\n\tuseRef,\r\n\tuseState,\r\n\tforwardRef,\r\n\tuseLayoutEffect,\r\n\tcreateContext,\r\n\tuseContext,\r\n} from '@wordpress/element';\r\nimport {\r\n\tuseInstanceId,\r\n\tuseFocusReturn,\r\n\tuseFocusOnMount,\r\n\tuseConstrainedTabbing,\r\n\tuseMergeRefs,\r\n} from '@wordpress/compose';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { close } from '@wordpress/icons';\r\nimport { getScrollContainer } from '@wordpress/dom';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport * as ariaHelper from './aria-helper';\r\nimport Button from '../button';\r\nimport StyleProvider from '../style-provider';\r\nimport type { ModalProps } from './types';\r\nimport { withIgnoreIMEEvents } from '../utils/with-ignore-ime-events';\r\n\r\n// Used to track and dismiss the prior modal when another opens unless nested.\r\ntype Dismissers = Set<\r\n\tRefObject< ModalProps[ 'onRequestClose' ] | undefined >\r\n>;\r\nconst ModalContext = createContext< Dismissers >( new Set() );\r\n\r\n// Used to track body class names applied while modals are open.\r\nconst bodyOpenClasses = new Map< string, number >();\r\n\r\nfunction UnforwardedModal(\r\n\tprops: ModalProps,\r\n\tforwardedRef: ForwardedRef< HTMLDivElement >\r\n) {\r\n\tconst {\r\n\t\tbodyOpenClassName = 'modal-open',\r\n\t\trole = 'dialog',\r\n\t\ttitle = null,\r\n\t\tfocusOnMount = true,\r\n\t\tshouldCloseOnEsc = true,\r\n\t\tshouldCloseOnClickOutside = true,\r\n\t\tisDismissible = true,\r\n\t\t/* Accessibility. */\r\n\t\taria = {\r\n\t\t\tlabelledby: undefined,\r\n\t\t\tdescribedby: undefined,\r\n\t\t},\r\n\t\tonRequestClose,\r\n\t\ticon,\r\n\t\tcloseButtonLabel,\r\n\t\tchildren,\r\n\t\tstyle,\r\n\t\toverlayClassName,\r\n\t\tclassName,\r\n\t\tcontentLabel,\r\n\t\tonKeyDown,\r\n\t\tisFullScreen = false,\r\n\t\tsize,\r\n\t\theaderActions = null,\r\n\t\t__experimentalHideHeader = false,\r\n\t} = props;\r\n\r\n\tconst ref = useRef< HTMLDivElement >();\r\n\r\n\tconst instanceId = useInstanceId( Modal );\r\n\tconst headingId = title\r\n\t\t? `components-modal-header-${ instanceId }`\r\n\t\t: aria.labelledby;\r\n\r\n\t// The focus hook does not support 'firstContentElement' but this is a valid\r\n\t// value for the Modal's focusOnMount prop. The following code ensures the focus\r\n\t// hook will focus the first focusable node within the element to which it is applied.\r\n\t// When `firstContentElement` is passed as the value of the focusOnMount prop,\r\n\t// the focus hook is applied to the Modal's content element.\r\n\t// Otherwise, the focus hook is applied to the Modal's ref. This ensures that the\r\n\t// focus hook will focus the first element in the Modal's **content** when\r\n\t// `firstContentElement` is passed.\r\n\tconst focusOnMountRef = useFocusOnMount(\r\n\t\tfocusOnMount === 'firstContentElement' ? 'firstElement' : focusOnMount\r\n\t);\r\n\tconst constrainedTabbingRef = useConstrainedTabbing();\r\n\tconst focusReturnRef = useFocusReturn();\r\n\tconst contentRef = useRef< HTMLDivElement >( null );\r\n\tconst childrenContainerRef = useRef< HTMLDivElement >( null );\r\n\r\n\tconst [ hasScrolledContent, setHasScrolledContent ] = useState( false );\r\n\tconst [ hasScrollableContent, setHasScrollableContent ] = useState( false );\r\n\r\n\tlet sizeClass;\r\n\tif ( isFullScreen || size === 'fill' ) {\r\n\t\tsizeClass = 'is-full-screen';\r\n\t} else if ( size ) {\r\n\t\tsizeClass = `has-size-${ size }`;\r\n\t}\r\n\r\n\t// Determines whether the Modal content is scrollable and updates the state.\r\n\tconst isContentScrollable = useCallback( () => {\r\n\t\tif ( ! contentRef.current ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst closestScrollContainer = getScrollContainer( contentRef.current );\r\n\r\n\t\tif ( contentRef.current === closestScrollContainer ) {\r\n\t\t\tsetHasScrollableContent( true );\r\n\t\t} else {\r\n\t\t\tsetHasScrollableContent( false );\r\n\t\t}\r\n\t}, [ contentRef ] );\r\n\r\n\t// Accessibly isolates/unisolates the modal.\r\n\tuseEffect( () => {\r\n\t\tariaHelper.modalize( ref.current );\r\n\t\treturn () => ariaHelper.unmodalize();\r\n\t}, [] );\r\n\r\n\t// Keeps a fresh ref for the subsequent effect.\r\n\tconst onRequestCloseRef = useRef< ModalProps[ 'onRequestClose' ] >();\r\n\tuseEffect( () => {\r\n\t\tonRequestCloseRef.current = onRequestClose;\r\n\t}, [ onRequestClose ] );\r\n\r\n\t// The list of `onRequestClose` callbacks of open (non-nested) Modals. Only\r\n\t// one should remain open at a time and the list enables closing prior ones.\r\n\tconst dismissers = useContext( ModalContext );\r\n\t// Used for the tracking and dismissing any nested modals.\r\n\tconst [ nestedDismissers ] = useState< Dismissers >( () => new Set() );\r\n\r\n\t// Updates the stack tracking open modals at this level and calls\r\n\t// onRequestClose for any prior and/or nested modals as applicable.\r\n\tuseEffect( () => {\r\n\t\t// add this modal instance to the dismissers set\r\n\t\tdismissers.add( onRequestCloseRef );\r\n\t\t// request that all the other modals close themselves\r\n\t\tfor ( const dismisser of dismissers ) {\r\n\t\t\tif ( dismisser !== onRequestCloseRef ) {\r\n\t\t\t\tdismisser.current?.();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn () => {\r\n\t\t\t// request that all the nested modals close themselves\r\n\t\t\tfor ( const dismisser of nestedDismissers ) {\r\n\t\t\t\tdismisser.current?.();\r\n\t\t\t}\r\n\t\t\t// remove this modal instance from the dismissers set\r\n\t\t\tdismissers.delete( onRequestCloseRef );\r\n\t\t};\r\n\t}, [ dismissers, nestedDismissers ] );\r\n\r\n\t// Adds/removes the value of bodyOpenClassName to body element.\r\n\tuseEffect( () => {\r\n\t\tconst theClass = bodyOpenClassName;\r\n\t\tconst oneMore = 1 + ( bodyOpenClasses.get( theClass ) ?? 0 );\r\n\t\tbodyOpenClasses.set( theClass, oneMore );\r\n\t\tdocument.body.classList.add( bodyOpenClassName );\r\n\t\treturn () => {\r\n\t\t\tconst oneLess = bodyOpenClasses.get( theClass )! - 1;\r\n\t\t\tif ( oneLess === 0 ) {\r\n\t\t\t\tdocument.body.classList.remove( theClass );\r\n\t\t\t\tbodyOpenClasses.delete( theClass );\r\n\t\t\t} else {\r\n\t\t\t\tbodyOpenClasses.set( theClass, oneLess );\r\n\t\t\t}\r\n\t\t};\r\n\t}, [ bodyOpenClassName ] );\r\n\r\n\t// Calls the isContentScrollable callback when the Modal children container resizes.\r\n\tuseLayoutEffect( () => {\r\n\t\tif ( ! window.ResizeObserver || ! childrenContainerRef.current ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst resizeObserver = new ResizeObserver( isContentScrollable );\r\n\t\tresizeObserver.observe( childrenContainerRef.current );\r\n\r\n\t\tisContentScrollable();\r\n\r\n\t\treturn () => {\r\n\t\t\tresizeObserver.disconnect();\r\n\t\t};\r\n\t}, [ isContentScrollable, childrenContainerRef ] );\r\n\r\n\tfunction handleEscapeKeyDown( event: KeyboardEvent< HTMLDivElement > ) {\r\n\t\tif (\r\n\t\t\tshouldCloseOnEsc &&\r\n\t\t\t( event.code === 'Escape' || event.key === 'Escape' ) &&\r\n\t\t\t! event.defaultPrevented\r\n\t\t) {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tif ( onRequestClose ) {\r\n\t\t\t\tonRequestClose( event );\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst onContentContainerScroll = useCallback(\r\n\t\t( e: UIEvent< HTMLDivElement > ) => {\r\n\t\t\tconst scrollY = e?.currentTarget?.scrollTop ?? -1;\r\n\r\n\t\t\tif ( ! hasScrolledContent && scrollY > 0 ) {\r\n\t\t\t\tsetHasScrolledContent( true );\r\n\t\t\t} else if ( hasScrolledContent && scrollY <= 0 ) {\r\n\t\t\t\tsetHasScrolledContent( false );\r\n\t\t\t}\r\n\t\t},\r\n\t\t[ hasScrolledContent ]\r\n\t);\r\n\r\n\tlet pressTarget: EventTarget | null = null;\r\n\tconst overlayPressHandlers: {\r\n\t\tonPointerDown: React.PointerEventHandler< HTMLDivElement >;\r\n\t\tonPointerUp: React.PointerEventHandler< HTMLDivElement >;\r\n\t} = {\r\n\t\tonPointerDown: ( event ) => {\r\n\t\t\tif ( event.target === event.currentTarget ) {\r\n\t\t\t\tpressTarget = event.target;\r\n\t\t\t\t// Avoids focus changing so that focus return works as expected.\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t}\r\n\t\t},\r\n\t\t// Closes the modal with two exceptions. 1. Opening the context menu on\r\n\t\t// the overlay. 2. Pressing on the overlay then dragging the pointer\r\n\t\t// over the modal and releasing. Due to the modal being a child of the\r\n\t\t// overlay, such a gesture is a `click` on the overlay and cannot be\r\n\t\t// excepted by a `click` handler. Thus the tactic of handling\r\n\t\t// `pointerup` and comparing its target to that of the `pointerdown`.\r\n\t\tonPointerUp: ( { target, button } ) => {\r\n\t\t\tconst isSameTarget = target === pressTarget;\r\n\t\t\tpressTarget = null;\r\n\t\t\tif ( button === 0 && isSameTarget ) {\r\n\t\t\t\tonRequestClose();\r\n\t\t\t}\r\n\t\t},\r\n\t};\r\n\r\n\tconst modal = (\r\n\t\t// eslint-disable-next-line jsx-a11y/no-static-element-interactions\r\n\t\t<div\r\n\t\t\tref={ useMergeRefs( [ ref, forwardedRef ] ) }\r\n\t\t\tclassName={ clsx(\r\n\t\t\t\t'components-modal__screen-overlay',\r\n\t\t\t\toverlayClassName\r\n\t\t\t) }\r\n\t\t\tonKeyDown={ withIgnoreIMEEvents( handleEscapeKeyDown ) }\r\n\t\t\t{ ...( shouldCloseOnClickOutside ? overlayPressHandlers : {} ) }\r\n\t\t>\r\n\t\t\t<StyleProvider document={ document }>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName={ clsx(\r\n\t\t\t\t\t\t'components-modal__frame',\r\n\t\t\t\t\t\tsizeClass,\r\n\t\t\t\t\t\tclassName\r\n\t\t\t\t\t) }\r\n\t\t\t\t\tstyle={ style }\r\n\t\t\t\t\tref={ useMergeRefs( [\r\n\t\t\t\t\t\tconstrainedTabbingRef,\r\n\t\t\t\t\t\tfocusReturnRef,\r\n\t\t\t\t\t\tfocusOnMount !== 'firstContentElement'\r\n\t\t\t\t\t\t\t? focusOnMountRef\r\n\t\t\t\t\t\t\t: null,\r\n\t\t\t\t\t] ) }\r\n\t\t\t\t\trole={ role }\r\n\t\t\t\t\taria-label={ contentLabel }\r\n\t\t\t\t\taria-labelledby={ contentLabel ? undefined : headingId }\r\n\t\t\t\t\taria-describedby={ aria.describedby }\r\n\t\t\t\t\ttabIndex={ -1 }\r\n\t\t\t\t\tonKeyDown={ onKeyDown }\r\n\t\t\t\t>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName={ clsx( 'components-modal__content', {\r\n\t\t\t\t\t\t\t'hide-header': __experimentalHideHeader,\r\n\t\t\t\t\t\t\t'is-scrollable': hasScrollableContent,\r\n\t\t\t\t\t\t\t'has-scrolled-content': hasScrolledContent,\r\n\t\t\t\t\t\t} ) }\r\n\t\t\t\t\t\trole=\"document\"\r\n\t\t\t\t\t\tonScroll={ onContentContainerScroll }\r\n\t\t\t\t\t\tref={ contentRef }\r\n\t\t\t\t\t\taria-label={\r\n\t\t\t\t\t\t\thasScrollableContent\r\n\t\t\t\t\t\t\t\t? __( 'Scrollable section' )\r\n\t\t\t\t\t\t\t\t: undefined\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttabIndex={ hasScrollableContent ? 0 : undefined }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ ! __experimentalHideHeader && (\r\n\t\t\t\t\t\t\t<div className=\"components-modal__header\">\r\n\t\t\t\t\t\t\t\t<div className=\"components-modal__header-heading-container\">\r\n\t\t\t\t\t\t\t\t\t{ icon && (\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"components-modal__icon-container\"\r\n\t\t\t\t\t\t\t\t\t\t\taria-hidden\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{ icon }\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t\t{ title && (\r\n\t\t\t\t\t\t\t\t\t\t<h1\r\n\t\t\t\t\t\t\t\t\t\t\tid={ headingId }\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"components-modal__header-heading\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{ title }\r\n\t\t\t\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t{ headerActions }\r\n\t\t\t\t\t\t\t\t{ isDismissible && (\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tonClick={ onRequestClose }\r\n\t\t\t\t\t\t\t\t\t\ticon={ close }\r\n\t\t\t\t\t\t\t\t\t\tlabel={\r\n\t\t\t\t\t\t\t\t\t\t\tcloseButtonLabel || __( 'Close' )\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t) }\r\n\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tref={ useMergeRefs( [\r\n\t\t\t\t\t\t\t\tchildrenContainerRef,\r\n\t\t\t\t\t\t\t\tfocusOnMount === 'firstContentElement'\r\n\t\t\t\t\t\t\t\t\t? focusOnMountRef\r\n\t\t\t\t\t\t\t\t\t: null,\r\n\t\t\t\t\t\t\t] ) }\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{ children }\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</StyleProvider>\r\n\t\t</div>\r\n\t);\r\n\r\n\treturn createPortal(\r\n\t\t<ModalContext.Provider value={ nestedDismissers }>\r\n\t\t\t{ modal }\r\n\t\t</ModalContext.Provider>,\r\n\t\tdocument.body\r\n\t);\r\n}\r\n\r\n/**\r\n * Modals give users information and choices related to a task they’re trying to\r\n * accomplish. They can contain critical information, require decisions, or\r\n * involve multiple tasks.\r\n *\r\n * ```jsx\r\n * import { Button, Modal } from '@wordpress/components';\r\n * import { useState } from '@wordpress/element';\r\n *\r\n * const MyModal = () => {\r\n *   const [ isOpen, setOpen ] = useState( false );\r\n *   const openModal = () => setOpen( true );\r\n *   const closeModal = () => setOpen( false );\r\n *\r\n *   return (\r\n *     <>\r\n *       <Button variant=\"secondary\" onClick={ openModal }>\r\n *         Open Modal\r\n *       </Button>\r\n *       { isOpen && (\r\n *         <Modal title=\"This is my modal\" onRequestClose={ closeModal }>\r\n *           <Button variant=\"secondary\" onClick={ closeModal }>\r\n *             My custom close button\r\n *           </Button>\r\n *         </Modal>\r\n *       ) }\r\n *     </>\r\n *   );\r\n * };\r\n * ```\r\n */\r\nexport const Modal = forwardRef( UnforwardedModal );\r\n\r\nexport default Modal;\r\n"],"mappings":"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","ignoreList":[]}