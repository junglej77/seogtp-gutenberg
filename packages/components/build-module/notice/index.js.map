{"version":3,"names":["clsx","__","RawHTML","useEffect","renderToString","speak","close","Button","VisuallyHidden","jsx","_jsx","jsxs","_jsxs","noop","useSpokenMessage","message","politeness","spokenMessage","getDefaultPoliteness","status","getStatusLabel","Notice","className","children","onRemove","isDismissible","actions","__unstableHTML","onDismiss","classes","onDismissNotice","map","buttonCustomClasses","label","isPrimary","variant","noDefaultClasses","onClick","url","index","computedVariant","href","undefined","icon"],"sources":["@wordpress/components/src/notice/index.tsx"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { RawHTML, useEffect, renderToString } from '@wordpress/element';\r\nimport { speak } from '@wordpress/a11y';\r\nimport { close } from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport Button from '../button';\r\nimport type { NoticeAction, NoticeProps } from './types';\r\nimport type { DeprecatedButtonProps } from '../button/types';\r\nimport { VisuallyHidden } from '../visually-hidden';\r\n\r\nconst noop = () => {};\r\n\r\n/**\r\n * Custom hook which announces the message with the given politeness, if a\r\n * valid message is provided.\r\n */\r\nfunction useSpokenMessage(\r\n\tmessage: NoticeProps[ 'spokenMessage' ],\r\n\tpoliteness: NoticeProps[ 'politeness' ]\r\n) {\r\n\tconst spokenMessage =\r\n\t\ttypeof message === 'string' ? message : renderToString( message );\r\n\r\n\tuseEffect( () => {\r\n\t\tif ( spokenMessage ) {\r\n\t\t\tspeak( spokenMessage, politeness );\r\n\t\t}\r\n\t}, [ spokenMessage, politeness ] );\r\n}\r\n\r\nfunction getDefaultPoliteness( status: NoticeProps[ 'status' ] ) {\r\n\tswitch ( status ) {\r\n\t\tcase 'success':\r\n\t\tcase 'warning':\r\n\t\tcase 'info':\r\n\t\t\treturn 'polite';\r\n\t\t// The default will also catch the 'error' status.\r\n\t\tdefault:\r\n\t\t\treturn 'assertive';\r\n\t}\r\n}\r\n\r\nfunction getStatusLabel( status: NoticeProps[ 'status' ] ) {\r\n\tswitch ( status ) {\r\n\t\tcase 'warning':\r\n\t\t\treturn __( 'Warning notice' );\r\n\t\tcase 'info':\r\n\t\t\treturn __( 'Information notice' );\r\n\t\tcase 'error':\r\n\t\t\treturn __( 'Error notice' );\r\n\t\t// The default will also catch the 'success' status.\r\n\t\tdefault:\r\n\t\t\treturn __( 'Notice' );\r\n\t}\r\n}\r\n\r\n/**\r\n * `Notice` is a component used to communicate feedback to the user.\r\n *\r\n *```jsx\r\n * import { Notice } from `@wordpress/components`;\r\n *\r\n * const MyNotice = () => (\r\n *   <Notice status=\"error\">An unknown error occurred.</Notice>\r\n * );\r\n * ```\r\n */\r\nfunction Notice( {\r\n\tclassName,\r\n\tstatus = 'info',\r\n\tchildren,\r\n\tspokenMessage = children,\r\n\tonRemove = noop,\r\n\tisDismissible = true,\r\n\tactions = [],\r\n\tpoliteness = getDefaultPoliteness( status ),\r\n\t__unstableHTML,\r\n\t// onDismiss is a callback executed when the notice is dismissed.\r\n\t// It is distinct from onRemove, which _looks_ like a callback but is\r\n\t// actually the function to call to remove the notice from the UI.\r\n\tonDismiss = noop,\r\n}: NoticeProps ) {\r\n\tuseSpokenMessage( spokenMessage, politeness );\r\n\r\n\tconst classes = clsx( className, 'components-notice', 'is-' + status, {\r\n\t\t'is-dismissible': isDismissible,\r\n\t} );\r\n\r\n\tif ( __unstableHTML && typeof children === 'string' ) {\r\n\t\tchildren = <RawHTML>{ children }</RawHTML>;\r\n\t}\r\n\r\n\tconst onDismissNotice = () => {\r\n\t\tonDismiss();\r\n\t\tonRemove();\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={ classes }>\r\n\t\t\t<VisuallyHidden>{ getStatusLabel( status ) }</VisuallyHidden>\r\n\t\t\t<div className=\"components-notice__content\">\r\n\t\t\t\t{ children }\r\n\t\t\t\t<div className=\"components-notice__actions\">\r\n\t\t\t\t\t{ actions.map(\r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tclassName: buttonCustomClasses,\r\n\t\t\t\t\t\t\t\tlabel,\r\n\t\t\t\t\t\t\t\tisPrimary,\r\n\t\t\t\t\t\t\t\tvariant,\r\n\t\t\t\t\t\t\t\tnoDefaultClasses = false,\r\n\t\t\t\t\t\t\t\tonClick,\r\n\t\t\t\t\t\t\t\turl,\r\n\t\t\t\t\t\t\t}: NoticeAction &\r\n\t\t\t\t\t\t\t\t// `isPrimary` is a legacy prop included for\r\n\t\t\t\t\t\t\t\t// backcompat, but `variant` should be used\r\n\t\t\t\t\t\t\t\t// instead.\r\n\t\t\t\t\t\t\t\tPick< DeprecatedButtonProps, 'isPrimary' >,\r\n\t\t\t\t\t\t\tindex\r\n\t\t\t\t\t\t) => {\r\n\t\t\t\t\t\t\tlet computedVariant = variant;\r\n\t\t\t\t\t\t\tif ( variant !== 'primary' && ! noDefaultClasses ) {\r\n\t\t\t\t\t\t\t\tcomputedVariant = ! url ? 'secondary' : 'link';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\ttypeof computedVariant === 'undefined' &&\r\n\t\t\t\t\t\t\t\tisPrimary\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\tcomputedVariant = 'primary';\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tkey={ index }\r\n\t\t\t\t\t\t\t\t\thref={ url }\r\n\t\t\t\t\t\t\t\t\tvariant={ computedVariant }\r\n\t\t\t\t\t\t\t\t\tonClick={ url ? undefined : onClick }\r\n\t\t\t\t\t\t\t\t\tclassName={ clsx(\r\n\t\t\t\t\t\t\t\t\t\t'components-notice__action',\r\n\t\t\t\t\t\t\t\t\t\tbuttonCustomClasses\r\n\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{ label }\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t) }\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t{ isDismissible && (\r\n\t\t\t\t<Button\r\n\t\t\t\t\tclassName=\"components-notice__dismiss\"\r\n\t\t\t\t\ticon={ close }\r\n\t\t\t\t\tlabel={ __( 'Close' ) }\r\n\t\t\t\t\tonClick={ onDismissNotice }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Notice;\r\n"],"mappings":"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","ignoreList":[]}