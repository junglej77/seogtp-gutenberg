{"version":3,"names":["clsx","useReducedMotion","useMergeRefs","forwardRef","useRef","chevronUp","chevronDown","Button","Icon","useControlledState","useUpdateEffect","jsx","_jsx","jsxs","_jsxs","noop","UnforwardedPanelBody","props","ref","buttonProps","children","className","icon","initialOpen","onToggle","opened","title","scrollAfterOpen","isOpened","setIsOpened","initial","undefined","fallback","nodeRef","scrollBehavior","handleOnToggle","event","preventDefault","next","scrollAfterOpenRef","current","scrollIntoView","inline","block","behavior","classes","PanelBodyTitle","Boolean","onClick","size","PanelBody"],"sources":["D:/jungle/gutenberg/packages/components/src/panel/body.tsx"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useReducedMotion, useMergeRefs } from '@wordpress/compose';\r\nimport { forwardRef, useRef } from '@wordpress/element';\r\nimport { chevronUp, chevronDown } from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport type { PanelBodyProps, PanelBodyTitleProps } from './types';\r\nimport type { WordPressComponentProps } from '../context';\r\nimport Button from '../button';\r\nimport Icon from '../icon';\r\nimport { useControlledState, useUpdateEffect } from '../utils';\r\n\r\nconst noop = () => {};\r\n\r\nexport function UnforwardedPanelBody(\r\n\tprops: PanelBodyProps,\r\n\tref: React.ForwardedRef< HTMLDivElement >\r\n) {\r\n\tconst {\r\n\t\tbuttonProps = {},\r\n\t\tchildren,\r\n\t\tclassName,\r\n\t\ticon,\r\n\t\tinitialOpen,\r\n\t\tonToggle = noop,\r\n\t\topened,\r\n\t\ttitle,\r\n\t\tscrollAfterOpen = true,\r\n\t} = props;\r\n\tconst [ isOpened, setIsOpened ] = useControlledState< boolean | undefined >(\r\n\t\topened,\r\n\t\t{\r\n\t\t\tinitial: initialOpen === undefined ? true : initialOpen,\r\n\t\t\tfallback: false,\r\n\t\t}\r\n\t);\r\n\tconst nodeRef = useRef< HTMLElement >( null );\r\n\r\n\t// Defaults to 'smooth' scrolling\r\n\t// https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollIntoView\r\n\tconst scrollBehavior = useReducedMotion() ? 'auto' : 'smooth';\r\n\r\n\tconst handleOnToggle = ( event: React.MouseEvent ) => {\r\n\t\tevent.preventDefault();\r\n\t\tconst next = ! isOpened;\r\n\t\tsetIsOpened( next );\r\n\t\tonToggle( next );\r\n\t};\r\n\r\n\t// Ref is used so that the effect does not re-run upon scrollAfterOpen changing value.\r\n\tconst scrollAfterOpenRef = useRef< boolean | undefined >();\r\n\tscrollAfterOpenRef.current = scrollAfterOpen;\r\n\t// Runs after initial render.\r\n\tuseUpdateEffect( () => {\r\n\t\tif (\r\n\t\t\tisOpened &&\r\n\t\t\tscrollAfterOpenRef.current &&\r\n\t\t\tnodeRef.current?.scrollIntoView\r\n\t\t) {\r\n\t\t\t/*\r\n\t\t\t * Scrolls the content into view when visible.\r\n\t\t\t * This improves the UX when there are multiple stacking <PanelBody />\r\n\t\t\t * components in a scrollable container.\r\n\t\t\t */\r\n\t\t\tnodeRef.current.scrollIntoView( {\r\n\t\t\t\tinline: 'nearest',\r\n\t\t\t\tblock: 'nearest',\r\n\t\t\t\tbehavior: scrollBehavior,\r\n\t\t\t} );\r\n\t\t}\r\n\t}, [ isOpened, scrollBehavior ] );\r\n\r\n\tconst classes = clsx( 'components-panel__body', className, {\r\n\t\t'is-opened': isOpened,\r\n\t} );\r\n\r\n\treturn (\r\n\t\t<div className={ classes } ref={ useMergeRefs( [ nodeRef, ref ] ) }>\r\n\t\t\t<PanelBodyTitle\r\n\t\t\t\ticon={ icon }\r\n\t\t\t\tisOpened={ Boolean( isOpened ) }\r\n\t\t\t\tonClick={ handleOnToggle }\r\n\t\t\t\ttitle={ title }\r\n\t\t\t\t{ ...buttonProps }\r\n\t\t\t/>\r\n\t\t\t{ typeof children === 'function'\r\n\t\t\t\t? children( { opened: Boolean( isOpened ) } )\r\n\t\t\t\t: isOpened && children }\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst PanelBodyTitle = forwardRef(\r\n\t(\r\n\t\t{\r\n\t\t\tisOpened,\r\n\t\t\ticon,\r\n\t\t\ttitle,\r\n\t\t\t...props\r\n\t\t}: WordPressComponentProps< PanelBodyTitleProps, 'button' >,\r\n\t\tref: React.ForwardedRef< any >\r\n\t) => {\r\n\t\tif ( ! title ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<h2 className=\"components-panel__body-title\">\r\n\t\t\t\t<Button\r\n\t\t\t\t\tclassName=\"components-panel__body-toggle\"\r\n\t\t\t\t\taria-expanded={ isOpened }\r\n\t\t\t\t\tref={ ref }\r\n\t\t\t\t\t{ ...props }\r\n\t\t\t\t>\r\n\t\t\t\t\t{ /*\r\n\t\t\t\t\tFirefox + NVDA don't announce aria-expanded because the browser\r\n\t\t\t\t\trepaints the whole element, so this wrapping span hides that.\r\n\t\t\t\t*/ }\r\n\t\t\t\t\t<span aria-hidden=\"true\">\r\n\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\tclassName=\"components-panel__arrow\"\r\n\t\t\t\t\t\t\ticon={ isOpened ? chevronUp : chevronDown }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t{ title }\r\n\t\t\t\t\t{ icon && (\r\n\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\ticon={ icon }\r\n\t\t\t\t\t\t\tclassName=\"components-panel__icon\"\r\n\t\t\t\t\t\t\tsize={ 20 }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) }\r\n\t\t\t\t</Button>\r\n\t\t\t</h2>\r\n\t\t);\r\n\t}\r\n);\r\n\r\nexport const PanelBody = forwardRef( UnforwardedPanelBody );\r\n\r\nexport default PanelBody;\r\n"],"mappings":"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","ignoreList":[]}