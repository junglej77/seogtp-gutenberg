{"version":3,"names":["useCallback","useControlledState","clamp","floatClamp","value","min","max","parseFloat","useControlledRangeValue","settings","valueProp","initial","state","setInternalState","fallback","setState","nextValue"],"sources":["@wordpress/components/src/range-control/utils.ts"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useCallback } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { useControlledState } from '../utils/hooks';\r\nimport { clamp } from '../utils/math';\r\n\r\nimport type { UseControlledRangeValueArgs } from './types';\r\n\r\n/**\r\n * A float supported clamp function for a specific value.\r\n *\r\n * @param value The value to clamp.\r\n * @param min   The minimum value.\r\n * @param max   The maximum value.\r\n *\r\n * @return A (float) number\r\n */\r\nexport function floatClamp( value: number | null, min: number, max: number ) {\r\n\tif ( typeof value !== 'number' ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn parseFloat( `${ clamp( value, min, max ) }` );\r\n}\r\n\r\n/**\r\n * Hook to store a clamped value, derived from props.\r\n *\r\n * @param settings\r\n * @return The controlled value and the value setter.\r\n */\r\nexport function useControlledRangeValue(\r\n\tsettings: UseControlledRangeValueArgs\r\n) {\r\n\tconst { min, max, value: valueProp, initial } = settings;\r\n\tconst [ state, setInternalState ] = useControlledState(\r\n\t\tfloatClamp( valueProp, min, max ),\r\n\t\t{\r\n\t\t\tinitial: floatClamp( initial ?? null, min, max ),\r\n\t\t\tfallback: null,\r\n\t\t}\r\n\t);\r\n\r\n\tconst setState = useCallback(\r\n\t\t( nextValue: number | null ) => {\r\n\t\t\tif ( nextValue === null ) {\r\n\t\t\t\tsetInternalState( null );\r\n\t\t\t} else {\r\n\t\t\t\tsetInternalState( floatClamp( nextValue, min, max ) );\r\n\t\t\t}\r\n\t\t},\r\n\t\t[ min, max, setInternalState ]\r\n\t);\r\n\r\n\t// `state` can't be an empty string because we specified a fallback value of\r\n\t// `null` in `useControlledState`\r\n\treturn [ state as Exclude< typeof state, '' >, setState ] as const;\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,WAAW,QAAQ,oBAAoB;;AAEhD;AACA;AACA;AACA,SAASC,kBAAkB,QAAQ,gBAAgB;AACnD,SAASC,KAAK,QAAQ,eAAe;AAIrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,UAAUA,CAAEC,KAAoB,EAAEC,GAAW,EAAEC,GAAW,EAAG;EAC5E,IAAK,OAAOF,KAAK,KAAK,QAAQ,EAAG;IAChC,OAAO,IAAI;EACZ;EAEA,OAAOG,UAAU,CAAG,GAAGL,KAAK,CAAEE,KAAK,EAAEC,GAAG,EAAEC,GAAI,CAAG,EAAE,CAAC;AACrD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASE,uBAAuBA,CACtCC,QAAqC,EACpC;EACD,MAAM;IAAEJ,GAAG;IAAEC,GAAG;IAAEF,KAAK,EAAEM,SAAS;IAAEC;EAAQ,CAAC,GAAGF,QAAQ;EACxD,MAAM,CAAEG,KAAK,EAAEC,gBAAgB,CAAE,GAAGZ,kBAAkB,CACrDE,UAAU,CAAEO,SAAS,EAAEL,GAAG,EAAEC,GAAI,CAAC,EACjC;IACCK,OAAO,EAAER,UAAU,CAAEQ,OAAO,aAAPA,OAAO,cAAPA,OAAO,GAAI,IAAI,EAAEN,GAAG,EAAEC,GAAI,CAAC;IAChDQ,QAAQ,EAAE;EACX,CACD,CAAC;EAED,MAAMC,QAAQ,GAAGf,WAAW,CACzBgB,SAAwB,IAAM;IAC/B,IAAKA,SAAS,KAAK,IAAI,EAAG;MACzBH,gBAAgB,CAAE,IAAK,CAAC;IACzB,CAAC,MAAM;MACNA,gBAAgB,CAAEV,UAAU,CAAEa,SAAS,EAAEX,GAAG,EAAEC,GAAI,CAAE,CAAC;IACtD;EACD,CAAC,EACD,CAAED,GAAG,EAAEC,GAAG,EAAEO,gBAAgB,CAC7B,CAAC;;EAED;EACA;EACA,OAAO,CAAED,KAAK,EAAiCG,QAAQ,CAAE;AAC1D","ignoreList":[]}