{"version":3,"names":["clsx","useInstanceId","useMergeRefs","__","Icon","search","closeSmall","forwardRef","useMemo","useRef","Button","ContextSystemProvider","StyledInputControl","SuffixItemWrapper","jsx","_jsx","SuffixItem","searchRef","value","onChange","onClose","icon","onReset","current","focus","size","label","onClick","UnforwardedSearchControl","__nextHasNoMarginBottom","className","placeholder","hideLabelFromVision","restProps","forwardedRef","disabled","instanceId","SearchControl","contextValue","BaseControl","_overrides","__associatedWPComponentName","InputBase","isBorderless","children","__next40pxDefaultSize","id","ref","type","nextValue","autoComplete","suffix"],"sources":["@wordpress/components/src/search-control/index.tsx"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useInstanceId, useMergeRefs } from '@wordpress/compose';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { Icon, search, closeSmall } from '@wordpress/icons';\r\nimport { forwardRef, useMemo, useRef } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport Button from '../button';\r\nimport type { WordPressComponentProps } from '../context/wordpress-component';\r\nimport type { SearchControlProps, SuffixItemProps } from './types';\r\nimport type { ForwardedRef } from 'react';\r\nimport { ContextSystemProvider } from '../context';\r\nimport { StyledInputControl, SuffixItemWrapper } from './styles';\r\n\r\nfunction SuffixItem( {\r\n\tsearchRef,\r\n\tvalue,\r\n\tonChange,\r\n\tonClose,\r\n}: SuffixItemProps ) {\r\n\tif ( ! onClose && ! value ) {\r\n\t\treturn <Icon icon={ search } />;\r\n\t}\r\n\r\n\tconst onReset = () => {\r\n\t\tonChange( '' );\r\n\t\tsearchRef.current?.focus();\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Button\r\n\t\t\tsize=\"small\"\r\n\t\t\ticon={ closeSmall }\r\n\t\t\tlabel={ onClose ? __( 'Close search' ) : __( 'Reset search' ) }\r\n\t\t\tonClick={ onClose ?? onReset }\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nfunction UnforwardedSearchControl(\r\n\t{\r\n\t\t__nextHasNoMarginBottom = false,\r\n\t\tclassName,\r\n\t\tonChange,\r\n\t\tvalue,\r\n\t\tlabel = __( 'Search' ),\r\n\t\tplaceholder = __( 'Search' ),\r\n\t\thideLabelFromVision = true,\r\n\t\tonClose,\r\n\t\tsize = 'default',\r\n\t\t...restProps\r\n\t}: Omit<\r\n\t\tWordPressComponentProps< SearchControlProps, 'input', false >,\r\n\t\t// TODO: Background styling currently doesn't support a disabled state. Needs design work.\r\n\t\t'disabled'\r\n\t>,\r\n\tforwardedRef: ForwardedRef< HTMLInputElement >\r\n) {\r\n\t// @ts-expect-error The `disabled` prop is not yet supported in the SearchControl component.\r\n\t// Work with the design team (@WordPress/gutenberg-design) if you need this feature.\r\n\tdelete restProps.disabled;\r\n\r\n\tconst searchRef = useRef< HTMLInputElement >( null );\r\n\tconst instanceId = useInstanceId(\r\n\t\tSearchControl,\r\n\t\t'components-search-control'\r\n\t);\r\n\r\n\tconst contextValue = useMemo(\r\n\t\t() => ( {\r\n\t\t\tBaseControl: {\r\n\t\t\t\t// Overrides the underlying BaseControl `__nextHasNoMarginBottom` via the context system\r\n\t\t\t\t// to provide backwards compatibile margin for SearchControl.\r\n\t\t\t\t// (In a standard InputControl, the BaseControl `__nextHasNoMarginBottom` is always set to true.)\r\n\t\t\t\t_overrides: { __nextHasNoMarginBottom },\r\n\t\t\t\t__associatedWPComponentName: 'SearchControl',\r\n\t\t\t},\r\n\t\t\t// `isBorderless` is still experimental and not a public prop for InputControl yet.\r\n\t\t\tInputBase: { isBorderless: true },\r\n\t\t} ),\r\n\t\t[ __nextHasNoMarginBottom ]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<ContextSystemProvider value={ contextValue }>\r\n\t\t\t<StyledInputControl\r\n\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\tid={ instanceId }\r\n\t\t\t\thideLabelFromVision={ hideLabelFromVision }\r\n\t\t\t\tlabel={ label }\r\n\t\t\t\tref={ useMergeRefs( [ searchRef, forwardedRef ] ) }\r\n\t\t\t\ttype=\"search\"\r\n\t\t\t\tsize={ size }\r\n\t\t\t\tclassName={ clsx( 'components-search-control', className ) }\r\n\t\t\t\tonChange={ ( nextValue?: string ) =>\r\n\t\t\t\t\tonChange( nextValue ?? '' )\r\n\t\t\t\t}\r\n\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\tplaceholder={ placeholder }\r\n\t\t\t\tvalue={ value ?? '' }\r\n\t\t\t\tsuffix={\r\n\t\t\t\t\t<SuffixItemWrapper size={ size }>\r\n\t\t\t\t\t\t<SuffixItem\r\n\t\t\t\t\t\t\tsearchRef={ searchRef }\r\n\t\t\t\t\t\t\tvalue={ value }\r\n\t\t\t\t\t\t\tonChange={ onChange }\r\n\t\t\t\t\t\t\tonClose={ onClose }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</SuffixItemWrapper>\r\n\t\t\t\t}\r\n\t\t\t\t{ ...restProps }\r\n\t\t\t/>\r\n\t\t</ContextSystemProvider>\r\n\t);\r\n}\r\n\r\n/**\r\n * SearchControl components let users display a search control.\r\n *\r\n * ```jsx\r\n * import { SearchControl } from '@wordpress/components';\r\n * import { useState } from '@wordpress/element';\r\n *\r\n * function MySearchControl( { className, setState } ) {\r\n *   const [ searchInput, setSearchInput ] = useState( '' );\r\n *\r\n *   return (\r\n *     <SearchControl\r\n *       __nextHasNoMarginBottom\r\n *       value={ searchInput }\r\n *       onChange={ setSearchInput }\r\n *     />\r\n *   );\r\n * }\r\n * ```\r\n */\r\nexport const SearchControl = forwardRef( UnforwardedSearchControl );\r\n\r\nexport default SearchControl;\r\n"],"mappings":"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","ignoreList":[]}