{"version":3,"names":["Children","Component","cloneElement","isEmptyElement","SlotFillContext","Fragment","_Fragment","jsx","_jsx","isFunction","maybeFunc","SlotComponent","constructor","props","isUnmounted","componentDidMount","registerSlot","name","componentWillUnmount","unregisterSlot","componentDidUpdate","prevProps","forceUpdate","render","_getFills","children","fillProps","getFills","fills","map","fill","fillChildren","child","childIndex","childKey","key","filter","element","Slot","Consumer"],"sources":["@wordpress/components/src/slot-fill/slot.tsx"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport type { ReactElement, ReactNode, Key } from 'react';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tChildren,\r\n\tComponent,\r\n\tcloneElement,\r\n\tisEmptyElement,\r\n} from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport SlotFillContext from './context';\r\nimport type { BaseSlotComponentProps, SlotComponentProps } from './types';\r\n\r\n/**\r\n * Whether the argument is a function.\r\n *\r\n * @param maybeFunc The argument to check.\r\n * @return True if the argument is a function, false otherwise.\r\n */\r\nfunction isFunction( maybeFunc: any ): maybeFunc is Function {\r\n\treturn typeof maybeFunc === 'function';\r\n}\r\n\r\nclass SlotComponent extends Component< BaseSlotComponentProps > {\r\n\tprivate isUnmounted: boolean;\r\n\r\n\tconstructor( props: BaseSlotComponentProps ) {\r\n\t\tsuper( props );\r\n\r\n\t\tthis.isUnmounted = false;\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst { registerSlot } = this.props;\r\n\t\tthis.isUnmounted = false;\r\n\t\tregisterSlot( this.props.name, this );\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tconst { unregisterSlot } = this.props;\r\n\t\tthis.isUnmounted = true;\r\n\t\tunregisterSlot( this.props.name, this );\r\n\t}\r\n\r\n\tcomponentDidUpdate( prevProps: BaseSlotComponentProps ) {\r\n\t\tconst { name, unregisterSlot, registerSlot } = this.props;\r\n\r\n\t\tif ( prevProps.name !== name ) {\r\n\t\t\tunregisterSlot( prevProps.name, this );\r\n\t\t\tregisterSlot( name, this );\r\n\t\t}\r\n\t}\r\n\r\n\tforceUpdate() {\r\n\t\tif ( this.isUnmounted ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsuper.forceUpdate();\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { children, name, fillProps = {}, getFills } = this.props;\r\n\t\tconst fills: ReactNode[] = ( getFills( name, this ) ?? [] )\r\n\t\t\t.map( ( fill ) => {\r\n\t\t\t\tconst fillChildren = isFunction( fill.children )\r\n\t\t\t\t\t? fill.children( fillProps )\r\n\t\t\t\t\t: fill.children;\r\n\t\t\t\treturn Children.map( fillChildren, ( child, childIndex ) => {\r\n\t\t\t\t\tif ( ! child || typeof child === 'string' ) {\r\n\t\t\t\t\t\treturn child;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet childKey: Key = childIndex;\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\ttypeof child === 'object' &&\r\n\t\t\t\t\t\t'key' in child &&\r\n\t\t\t\t\t\tchild?.key\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tchildKey = child.key;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn cloneElement( child as ReactElement, {\r\n\t\t\t\t\t\tkey: childKey,\r\n\t\t\t\t\t} );\r\n\t\t\t\t} );\r\n\t\t\t} )\r\n\t\t\t.filter(\r\n\t\t\t\t// In some cases fills are rendered only when some conditions apply.\r\n\t\t\t\t// This ensures that we only use non-empty fills when rendering, i.e.,\r\n\t\t\t\t// it allows us to render wrappers only when the fills are actually present.\r\n\t\t\t\t( element ) => ! isEmptyElement( element )\r\n\t\t\t);\r\n\r\n\t\treturn <>{ isFunction( children ) ? children( fills ) : fills }</>;\r\n\t}\r\n}\r\n\r\nconst Slot = ( props: Omit< SlotComponentProps, 'bubblesVirtually' > ) => (\r\n\t<SlotFillContext.Consumer>\r\n\t\t{ ( { registerSlot, unregisterSlot, getFills } ) => (\r\n\t\t\t<SlotComponent\r\n\t\t\t\t{ ...props }\r\n\t\t\t\tregisterSlot={ registerSlot }\r\n\t\t\t\tunregisterSlot={ unregisterSlot }\r\n\t\t\t\tgetFills={ getFills }\r\n\t\t\t/>\r\n\t\t) }\r\n\t</SlotFillContext.Consumer>\r\n);\r\n\r\nexport default Slot;\r\n"],"mappings":"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","ignoreList":[]}