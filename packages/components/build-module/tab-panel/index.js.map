{"version":3,"names":["Ariakit","useStoreState","clsx","forwardRef","useEffect","useLayoutEffect","useCallback","useInstanceId","usePrevious","Button","jsx","_jsx","jsxs","_jsxs","extractTabName","id","match","UnforwardedTabPanel","className","children","tabs","selectOnMove","initialTabName","orientation","activeClass","onSelect","ref","instanceId","TabPanel","prependInstanceId","tabName","tabStore","useTabStore","setSelectedId","newTabValue","newTab","find","t","name","disabled","selectedTab","simplifiedTabName","defaultSelectedId","selectedTabName","setTabStoreSelectedId","setState","previousSelectedTabName","initialTab","tab","firstEnabledTab","TabList","store","map","Tab","render","icon","label","title","showTooltip","tabId"],"sources":["@wordpress/components/src/tab-panel/index.tsx"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport * as Ariakit from '@ariakit/react';\r\nimport { useStoreState } from '@ariakit/react';\r\nimport clsx from 'clsx';\r\nimport type { ForwardedRef } from 'react';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tforwardRef,\r\n\tuseEffect,\r\n\tuseLayoutEffect,\r\n\tuseCallback,\r\n} from '@wordpress/element';\r\nimport { useInstanceId, usePrevious } from '@wordpress/compose';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\n\r\nimport Button from '../button';\r\nimport type { TabPanelProps } from './types';\r\nimport type { WordPressComponentProps } from '../context';\r\n\r\n// Separate the actual tab name from the instance ID. This is\r\n// necessary because Ariakit internally uses the element ID when\r\n// a new tab is selected, but our implementation looks specifically\r\n// for the tab name to be passed to the `onSelect` callback.\r\nconst extractTabName = ( id: string | undefined | null ) => {\r\n\tif ( typeof id === 'undefined' || id === null ) {\r\n\t\treturn;\r\n\t}\r\n\treturn id.match( /^tab-panel-[0-9]*-(.*)/ )?.[ 1 ];\r\n};\r\n\r\n/**\r\n * TabPanel is an ARIA-compliant tabpanel.\r\n *\r\n * TabPanels organize content across different screens, data sets, and interactions.\r\n * It has two sections: a list of tabs, and the view to show when tabs are chosen.\r\n *\r\n * ```jsx\r\n * import { TabPanel } from '@wordpress/components';\r\n *\r\n * const onSelect = ( tabName ) => {\r\n *   console.log( 'Selecting tab', tabName );\r\n * };\r\n *\r\n * const MyTabPanel = () => (\r\n *   <TabPanel\r\n *     className=\"my-tab-panel\"\r\n *     activeClass=\"active-tab\"\r\n *     onSelect={ onSelect }\r\n *     tabs={ [\r\n *       {\r\n *         name: 'tab1',\r\n *         title: 'Tab 1',\r\n *         className: 'tab-one',\r\n *       },\r\n *       {\r\n *         name: 'tab2',\r\n *         title: 'Tab 2',\r\n *         className: 'tab-two',\r\n *       },\r\n *     ] }\r\n *   >\r\n *     { ( tab ) => <p>{ tab.title }</p> }\r\n *   </TabPanel>\r\n * );\r\n * ```\r\n */\r\nconst UnforwardedTabPanel = (\r\n\t{\r\n\t\tclassName,\r\n\t\tchildren,\r\n\t\ttabs,\r\n\t\tselectOnMove = true,\r\n\t\tinitialTabName,\r\n\t\torientation = 'horizontal',\r\n\t\tactiveClass = 'is-active',\r\n\t\tonSelect,\r\n\t}: WordPressComponentProps< TabPanelProps, 'div', false >,\r\n\tref: ForwardedRef< any >\r\n) => {\r\n\tconst instanceId = useInstanceId( TabPanel, 'tab-panel' );\r\n\r\n\tconst prependInstanceId = useCallback(\r\n\t\t( tabName: string | undefined ) => {\r\n\t\t\tif ( typeof tabName === 'undefined' ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\treturn `${ instanceId }-${ tabName }`;\r\n\t\t},\r\n\t\t[ instanceId ]\r\n\t);\r\n\r\n\tconst tabStore = Ariakit.useTabStore( {\r\n\t\tsetSelectedId: ( newTabValue ) => {\r\n\t\t\tif ( typeof newTabValue === 'undefined' || newTabValue === null ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst newTab = tabs.find(\r\n\t\t\t\t( t ) => prependInstanceId( t.name ) === newTabValue\r\n\t\t\t);\r\n\t\t\tif ( newTab?.disabled || newTab === selectedTab ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst simplifiedTabName = extractTabName( newTabValue );\r\n\t\t\tif ( typeof simplifiedTabName === 'undefined' ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tonSelect?.( simplifiedTabName );\r\n\t\t},\r\n\t\torientation,\r\n\t\tselectOnMove,\r\n\t\tdefaultSelectedId: prependInstanceId( initialTabName ),\r\n\t} );\r\n\r\n\tconst selectedTabName = extractTabName(\r\n\t\tuseStoreState( tabStore, 'selectedId' )\r\n\t);\r\n\r\n\tconst setTabStoreSelectedId = useCallback(\r\n\t\t( tabName: string ) => {\r\n\t\t\ttabStore.setState( 'selectedId', prependInstanceId( tabName ) );\r\n\t\t},\r\n\t\t[ prependInstanceId, tabStore ]\r\n\t);\r\n\r\n\tconst selectedTab = tabs.find( ( { name } ) => name === selectedTabName );\r\n\r\n\tconst previousSelectedTabName = usePrevious( selectedTabName );\r\n\r\n\t// Ensure `onSelect` is called when the initial tab is selected.\r\n\tuseEffect( () => {\r\n\t\tif (\r\n\t\t\tpreviousSelectedTabName !== selectedTabName &&\r\n\t\t\tselectedTabName === initialTabName &&\r\n\t\t\t!! selectedTabName\r\n\t\t) {\r\n\t\t\tonSelect?.( selectedTabName );\r\n\t\t}\r\n\t}, [ selectedTabName, initialTabName, onSelect, previousSelectedTabName ] );\r\n\r\n\t// Handle selecting the initial tab.\r\n\tuseLayoutEffect( () => {\r\n\t\t// If there's a selected tab, don't override it.\r\n\t\tif ( selectedTab ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst initialTab = tabs.find( ( tab ) => tab.name === initialTabName );\r\n\t\t// Wait for the denoted initial tab to be declared before making a\r\n\t\t// selection. This ensures that if a tab is declared lazily it can\r\n\t\t// still receive initial selection.\r\n\t\tif ( initialTabName && ! initialTab ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif ( initialTab && ! initialTab.disabled ) {\r\n\t\t\t// Select the initial tab if it's not disabled.\r\n\t\t\tsetTabStoreSelectedId( initialTab.name );\r\n\t\t} else {\r\n\t\t\t// Fallback to the first enabled tab when the initial tab is\r\n\t\t\t// disabled or it can't be found.\r\n\t\t\tconst firstEnabledTab = tabs.find( ( tab ) => ! tab.disabled );\r\n\t\t\tif ( firstEnabledTab ) {\r\n\t\t\t\tsetTabStoreSelectedId( firstEnabledTab.name );\r\n\t\t\t}\r\n\t\t}\r\n\t}, [\r\n\t\ttabs,\r\n\t\tselectedTab,\r\n\t\tinitialTabName,\r\n\t\tinstanceId,\r\n\t\tsetTabStoreSelectedId,\r\n\t] );\r\n\r\n\t// Handle the currently selected tab becoming disabled.\r\n\tuseEffect( () => {\r\n\t\t// This effect only runs when the selected tab is defined and becomes disabled.\r\n\t\tif ( ! selectedTab?.disabled ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst firstEnabledTab = tabs.find( ( tab ) => ! tab.disabled );\r\n\t\t// If the currently selected tab becomes disabled, select the first enabled tab.\r\n\t\t// (if there is one).\r\n\t\tif ( firstEnabledTab ) {\r\n\t\t\tsetTabStoreSelectedId( firstEnabledTab.name );\r\n\t\t}\r\n\t}, [ tabs, selectedTab?.disabled, setTabStoreSelectedId, instanceId ] );\r\n\treturn (\r\n\t\t<div className={ className } ref={ ref }>\r\n\t\t\t<Ariakit.TabList\r\n\t\t\t\tstore={ tabStore }\r\n\t\t\t\tclassName=\"components-tab-panel__tabs\"\r\n\t\t\t>\r\n\t\t\t\t{ tabs.map( ( tab ) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Ariakit.Tab\r\n\t\t\t\t\t\t\tkey={ tab.name }\r\n\t\t\t\t\t\t\tid={ prependInstanceId( tab.name ) }\r\n\t\t\t\t\t\t\tclassName={ clsx(\r\n\t\t\t\t\t\t\t\t'components-tab-panel__tabs-item',\r\n\t\t\t\t\t\t\t\ttab.className,\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t[ activeClass ]:\r\n\t\t\t\t\t\t\t\t\t\ttab.name === selectedTabName,\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\tdisabled={ tab.disabled }\r\n\t\t\t\t\t\t\taria-controls={ `${ prependInstanceId(\r\n\t\t\t\t\t\t\t\ttab.name\r\n\t\t\t\t\t\t\t) }-view` }\r\n\t\t\t\t\t\t\trender={\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\ticon={ tab.icon }\r\n\t\t\t\t\t\t\t\t\tlabel={ tab.icon && tab.title }\r\n\t\t\t\t\t\t\t\t\tshowTooltip={ !! tab.icon }\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{ ! tab.icon && tab.title }\r\n\t\t\t\t\t\t</Ariakit.Tab>\r\n\t\t\t\t\t);\r\n\t\t\t\t} ) }\r\n\t\t\t</Ariakit.TabList>\r\n\t\t\t{ selectedTab && (\r\n\t\t\t\t<Ariakit.TabPanel\r\n\t\t\t\t\tid={ `${ prependInstanceId( selectedTab.name ) }-view` }\r\n\t\t\t\t\tstore={ tabStore }\r\n\t\t\t\t\ttabId={ prependInstanceId( selectedTab.name ) }\r\n\t\t\t\t\tclassName=\"components-tab-panel__tab-content\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{ children( selectedTab ) }\r\n\t\t\t\t</Ariakit.TabPanel>\r\n\t\t\t) }\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport const TabPanel = forwardRef( UnforwardedTabPanel );\r\nexport default TabPanel;\r\n"],"mappings":"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","ignoreList":[]}