{"version":3,"names":["useRef","forwardRef","useRovingTabIndexContext","jsx","_jsx","RovingTabIndexItem","UnforwardedRovingTabIndexItem","children","as","Component","props","forwardedRef","localRef","ref","lastFocusedElement","setLastFocusedElement","tabIndex","current","undefined","onFocus","event","target","allProps"],"sources":["@wordpress/components/src/tree-grid/roving-tab-index-item.tsx"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useRef, forwardRef } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { useRovingTabIndexContext } from './roving-tab-index-context';\r\nimport type { RovingTabIndexItemProps } from './types';\r\n\r\nexport const RovingTabIndexItem = forwardRef(\r\n\tfunction UnforwardedRovingTabIndexItem(\r\n\t\t{ children, as: Component, ...props }: RovingTabIndexItemProps,\r\n\t\tforwardedRef: React.ForwardedRef< any >\r\n\t) {\r\n\t\tconst localRef = useRef< any >();\r\n\t\tconst ref = forwardedRef || localRef;\r\n\t\t// @ts-expect-error - We actually want to throw an error if this is undefined.\r\n\t\tconst { lastFocusedElement, setLastFocusedElement } =\r\n\t\t\tuseRovingTabIndexContext();\r\n\t\tlet tabIndex;\r\n\r\n\t\tif ( lastFocusedElement ) {\r\n\t\t\ttabIndex =\r\n\t\t\t\tlastFocusedElement ===\r\n\t\t\t\t// TODO: The original implementation simply used `ref.current` here, assuming\r\n\t\t\t\t// that a forwarded ref would always be an object, which is not necessarily true.\r\n\t\t\t\t// This workaround maintains the original runtime behavior in a type-safe way,\r\n\t\t\t\t// but should be revisited.\r\n\t\t\t\t( 'current' in ref ? ref.current : undefined )\r\n\t\t\t\t\t? 0\r\n\t\t\t\t\t: -1;\r\n\t\t}\r\n\r\n\t\tconst onFocus: React.FocusEventHandler< HTMLElement > = ( event ) =>\r\n\t\t\tsetLastFocusedElement?.( event.target );\r\n\t\tconst allProps = { ref, tabIndex, onFocus, ...props };\r\n\r\n\t\tif ( typeof children === 'function' ) {\r\n\t\t\treturn children( allProps );\r\n\t\t}\r\n\r\n\t\tif ( ! Component ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn <Component { ...allProps }>{ children }</Component>;\r\n\t}\r\n);\r\n\r\nexport default RovingTabIndexItem;\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,MAAM,EAAEC,UAAU,QAAQ,oBAAoB;;AAEvD;AACA;AACA;AACA,SAASC,wBAAwB,QAAQ,4BAA4B;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAGtE,OAAO,MAAMC,kBAAkB,GAAGJ,UAAU,CAC3C,SAASK,6BAA6BA,CACrC;EAAEC,QAAQ;EAAEC,EAAE,EAAEC,SAAS;EAAE,GAAGC;AAA+B,CAAC,EAC9DC,YAAuC,EACtC;EACD,MAAMC,QAAQ,GAAGZ,MAAM,CAAQ,CAAC;EAChC,MAAMa,GAAG,GAAGF,YAAY,IAAIC,QAAQ;EACpC;EACA,MAAM;IAAEE,kBAAkB;IAAEC;EAAsB,CAAC,GAClDb,wBAAwB,CAAC,CAAC;EAC3B,IAAIc,QAAQ;EAEZ,IAAKF,kBAAkB,EAAG;IACzBE,QAAQ,GACPF,kBAAkB;IAClB;IACA;IACA;IACA;IACE,SAAS,IAAID,GAAG,GAAGA,GAAG,CAACI,OAAO,GAAGC,SAAS,CAAE,GAC3C,CAAC,GACD,CAAC,CAAC;EACP;EAEA,MAAMC,OAA+C,GAAKC,KAAK,IAC9DL,qBAAqB,GAAIK,KAAK,CAACC,MAAO,CAAC;EACxC,MAAMC,QAAQ,GAAG;IAAET,GAAG;IAAEG,QAAQ;IAAEG,OAAO;IAAE,GAAGT;EAAM,CAAC;EAErD,IAAK,OAAOH,QAAQ,KAAK,UAAU,EAAG;IACrC,OAAOA,QAAQ,CAAEe,QAAS,CAAC;EAC5B;EAEA,IAAK,CAAEb,SAAS,EAAG;IAClB,OAAO,IAAI;EACZ;EAEA,oBAAOL,IAAA,CAACK,SAAS;IAAA,GAAMa,QAAQ;IAAAf,QAAA,EAAKA;EAAQ,CAAa,CAAC;AAC3D,CACD,CAAC;AAED,eAAeF,kBAAkB","ignoreList":[]}