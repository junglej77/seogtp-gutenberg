{"version":3,"names":["useMemo","decodeEntities","SelectControl","useDeprecated36pxDefaultSizeProp","ContextSystemProvider","jsx","_jsx","CONTEXT_VALUE","BaseControl","_overrides","__associatedWPComponentName","getSelectOptions","tree","level","flatMap","treeNode","value","id","label","repeat","name","children","TreeSelect","props","noOptionLabel","onChange","selectedId","restProps","options","filter","option"],"sources":["@wordpress/components/src/tree-select/index.tsx"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useMemo } from '@wordpress/element';\r\nimport { decodeEntities } from '@wordpress/html-entities';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { SelectControl } from '../select-control';\r\nimport type { TreeSelectProps, Tree, Truthy } from './types';\r\nimport { useDeprecated36pxDefaultSizeProp } from '../utils/use-deprecated-props';\r\nimport { ContextSystemProvider } from '../context';\r\n\r\nconst CONTEXT_VALUE = {\r\n\tBaseControl: {\r\n\t\t// Temporary during deprecation grace period: Overrides the underlying `__associatedWPComponentName`\r\n\t\t// via the context system to override the value set by SelectControl.\r\n\t\t_overrides: { __associatedWPComponentName: 'TreeSelect' },\r\n\t},\r\n};\r\n\r\nfunction getSelectOptions(\r\n\ttree: Tree[],\r\n\tlevel = 0\r\n): NonNullable< TreeSelectProps[ 'options' ] > {\r\n\treturn tree.flatMap( ( treeNode ) => [\r\n\t\t{\r\n\t\t\tvalue: treeNode.id,\r\n\t\t\tlabel:\r\n\t\t\t\t'\\u00A0'.repeat( level * 3 ) + decodeEntities( treeNode.name ),\r\n\t\t},\r\n\t\t...getSelectOptions( treeNode.children || [], level + 1 ),\r\n\t] );\r\n}\r\n\r\n/**\r\n * TreeSelect component is used to generate select input fields.\r\n *\r\n * ```jsx\r\n * import { TreeSelect } from '@wordpress/components';\r\n * import { useState } from '@wordpress/element';\r\n *\r\n * const MyTreeSelect = () => {\r\n * \tconst [ page, setPage ] = useState( 'p21' );\r\n *\r\n * \treturn (\r\n * \t\t<TreeSelect\r\n * \t\t\t__nextHasNoMarginBottom\r\n * \t\t\tlabel=\"Parent page\"\r\n * \t\t\tnoOptionLabel=\"No parent page\"\r\n * \t\t\tonChange={ ( newPage ) => setPage( newPage ) }\r\n * \t\t\tselectedId={ page }\r\n * \t\t\ttree={ [\r\n * \t\t\t\t{\r\n * \t\t\t\t\tname: 'Page 1',\r\n * \t\t\t\t\tid: 'p1',\r\n * \t\t\t\t\tchildren: [\r\n * \t\t\t\t\t\t{ name: 'Descend 1 of page 1', id: 'p11' },\r\n * \t\t\t\t\t\t{ name: 'Descend 2 of page 1', id: 'p12' },\r\n * \t\t\t\t\t],\r\n * \t\t\t\t},\r\n * \t\t\t\t{\r\n * \t\t\t\t\tname: 'Page 2',\r\n * \t\t\t\t\tid: 'p2',\r\n * \t\t\t\t\tchildren: [\r\n * \t\t\t\t\t\t{\r\n * \t\t\t\t\t\t\tname: 'Descend 1 of page 2',\r\n * \t\t\t\t\t\t\tid: 'p21',\r\n * \t\t\t\t\t\t\tchildren: [\r\n * \t\t\t\t\t\t\t\t{\r\n * \t\t\t\t\t\t\t\t\tname: 'Descend 1 of Descend 1 of page 2',\r\n * \t\t\t\t\t\t\t\t\tid: 'p211',\r\n * \t\t\t\t\t\t\t\t},\r\n * \t\t\t\t\t\t\t],\r\n * \t\t\t\t\t\t},\r\n * \t\t\t\t\t],\r\n * \t\t\t\t},\r\n * \t\t\t] }\r\n * \t\t/>\r\n * \t);\r\n * }\r\n * ```\r\n */\r\nexport function TreeSelect( props: TreeSelectProps ) {\r\n\tconst {\r\n\t\tlabel,\r\n\t\tnoOptionLabel,\r\n\t\tonChange,\r\n\t\tselectedId,\r\n\t\ttree = [],\r\n\t\t...restProps\r\n\t} = useDeprecated36pxDefaultSizeProp( props );\r\n\r\n\tconst options = useMemo( () => {\r\n\t\treturn [\r\n\t\t\tnoOptionLabel && { value: '', label: noOptionLabel },\r\n\t\t\t...getSelectOptions( tree ),\r\n\t\t].filter( < T, >( option: T ): option is Truthy< T > => !! option );\r\n\t}, [ noOptionLabel, tree ] );\r\n\r\n\treturn (\r\n\t\t<ContextSystemProvider value={ CONTEXT_VALUE }>\r\n\t\t\t<SelectControl\r\n\t\t\t\t{ ...{ label, options, onChange } }\r\n\t\t\t\tvalue={ selectedId }\r\n\t\t\t\t{ ...restProps }\r\n\t\t\t/>\r\n\t\t</ContextSystemProvider>\r\n\t);\r\n}\r\n\r\nexport default TreeSelect;\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,OAAO,QAAQ,oBAAoB;AAC5C,SAASC,cAAc,QAAQ,0BAA0B;;AAEzD;AACA;AACA;AACA,SAASC,aAAa,QAAQ,mBAAmB;AAEjD,SAASC,gCAAgC,QAAQ,+BAA+B;AAChF,SAASC,qBAAqB,QAAQ,YAAY;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAEnD,MAAMC,aAAa,GAAG;EACrBC,WAAW,EAAE;IACZ;IACA;IACAC,UAAU,EAAE;MAAEC,2BAA2B,EAAE;IAAa;EACzD;AACD,CAAC;AAED,SAASC,gBAAgBA,CACxBC,IAAY,EACZC,KAAK,GAAG,CAAC,EACqC;EAC9C,OAAOD,IAAI,CAACE,OAAO,CAAIC,QAAQ,IAAM,CACpC;IACCC,KAAK,EAAED,QAAQ,CAACE,EAAE;IAClBC,KAAK,EACJ,QAAQ,CAACC,MAAM,CAAEN,KAAK,GAAG,CAAE,CAAC,GAAGZ,cAAc,CAAEc,QAAQ,CAACK,IAAK;EAC/D,CAAC,EACD,GAAGT,gBAAgB,CAAEI,QAAQ,CAACM,QAAQ,IAAI,EAAE,EAAER,KAAK,GAAG,CAAE,CAAC,CACxD,CAAC;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASS,UAAUA,CAAEC,KAAsB,EAAG;EACpD,MAAM;IACLL,KAAK;IACLM,aAAa;IACbC,QAAQ;IACRC,UAAU;IACVd,IAAI,GAAG,EAAE;IACT,GAAGe;EACJ,CAAC,GAAGxB,gCAAgC,CAAEoB,KAAM,CAAC;EAE7C,MAAMK,OAAO,GAAG5B,OAAO,CAAE,MAAM;IAC9B,OAAO,CACNwB,aAAa,IAAI;MAAER,KAAK,EAAE,EAAE;MAAEE,KAAK,EAAEM;IAAc,CAAC,EACpD,GAAGb,gBAAgB,CAAEC,IAAK,CAAC,CAC3B,CAACiB,MAAM,CAAUC,MAAS,IAA6B,CAAC,CAAEA,MAAO,CAAC;EACpE,CAAC,EAAE,CAAEN,aAAa,EAAEZ,IAAI,CAAG,CAAC;EAE5B,oBACCN,IAAA,CAACF,qBAAqB;IAACY,KAAK,EAAGT,aAAe;IAAAc,QAAA,eAC7Cf,IAAA,CAACJ,aAAa;MACNgB,KAAK;MAAEU,OAAO;MAAEH,QAAQ;MAC/BT,KAAK,EAAGU,UAAY;MAAA,GACfC;IAAS,CACd;EAAC,CACoB,CAAC;AAE1B;AAEA,eAAeL,UAAU","ignoreList":[]}