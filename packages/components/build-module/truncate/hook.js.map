{"version":3,"names":["css","useMemo","useContextSystem","styles","TRUNCATE_ELLIPSIS","TRUNCATE_TYPE","truncateContent","useCx","useTruncate","props","className","children","ellipsis","ellipsizeMode","auto","limit","numberOfLines","otherProps","cx","childrenAsText","toString","truncatedContent","shouldTruncate","classes","truncateLines","process","env","NODE_ENV","Truncate"],"sources":["@wordpress/components/src/truncate/hook.ts"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport { css } from '@emotion/react';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useMemo } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport type { WordPressComponentProps } from '../context';\r\nimport { useContextSystem } from '../context';\r\nimport * as styles from './styles';\r\nimport { TRUNCATE_ELLIPSIS, TRUNCATE_TYPE, truncateContent } from './utils';\r\nimport { useCx } from '../utils/hooks/use-cx';\r\nimport type { TruncateProps } from './types';\r\n\r\nexport default function useTruncate(\r\n\tprops: WordPressComponentProps< TruncateProps, 'span' >\r\n) {\r\n\tconst {\r\n\t\tclassName,\r\n\t\tchildren,\r\n\t\tellipsis = TRUNCATE_ELLIPSIS,\r\n\t\tellipsizeMode = TRUNCATE_TYPE.auto,\r\n\t\tlimit = 0,\r\n\t\tnumberOfLines = 0,\r\n\t\t...otherProps\r\n\t} = useContextSystem( props, 'Truncate' );\r\n\r\n\tconst cx = useCx();\r\n\r\n\tlet childrenAsText;\r\n\tif ( typeof children === 'string' ) {\r\n\t\tchildrenAsText = children;\r\n\t} else if ( typeof children === 'number' ) {\r\n\t\tchildrenAsText = children.toString();\r\n\t}\r\n\r\n\tconst truncatedContent = childrenAsText\r\n\t\t? truncateContent( childrenAsText, {\r\n\t\t\t\tellipsis,\r\n\t\t\t\tellipsizeMode,\r\n\t\t\t\tlimit,\r\n\t\t\t\tnumberOfLines,\r\n\t\t  } )\r\n\t\t: children;\r\n\r\n\tconst shouldTruncate =\r\n\t\t!! childrenAsText && ellipsizeMode === TRUNCATE_TYPE.auto;\r\n\r\n\tconst classes = useMemo( () => {\r\n\t\t// The `word-break: break-all` property first makes sure a text line\r\n\t\t// breaks even when it contains 'unbreakable' content such as long URLs.\r\n\t\t// See https://github.com/WordPress/gutenberg/issues/60860.\r\n\t\tconst truncateLines = css`\r\n\t\t\t${ numberOfLines === 1 ? 'word-break: break-all;' : '' }\r\n\t\t\t-webkit-box-orient: vertical;\r\n\t\t\t-webkit-line-clamp: ${ numberOfLines };\r\n\t\t\tdisplay: -webkit-box;\r\n\t\t\toverflow: hidden;\r\n\t\t`;\r\n\r\n\t\treturn cx(\r\n\t\t\tshouldTruncate && ! numberOfLines && styles.Truncate,\r\n\t\t\tshouldTruncate && !! numberOfLines && truncateLines,\r\n\t\t\tclassName\r\n\t\t);\r\n\t}, [ className, cx, numberOfLines, shouldTruncate ] );\r\n\r\n\treturn { ...otherProps, className: classes, children: truncatedContent };\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,GAAG,QAAQ,gBAAgB;;AAEpC;AACA;AACA;AACA,SAASC,OAAO,QAAQ,oBAAoB;;AAE5C;AACA;AACA;;AAEA,SAASC,gBAAgB,QAAQ,YAAY;AAC7C,OAAO,KAAKC,MAAM,MAAM,UAAU;AAClC,SAASC,iBAAiB,EAAEC,aAAa,EAAEC,eAAe,QAAQ,SAAS;AAC3E,SAASC,KAAK,QAAQ,uBAAuB;AAG7C,eAAe,SAASC,WAAWA,CAClCC,KAAuD,EACtD;EACD,MAAM;IACLC,SAAS;IACTC,QAAQ;IACRC,QAAQ,GAAGR,iBAAiB;IAC5BS,aAAa,GAAGR,aAAa,CAACS,IAAI;IAClCC,KAAK,GAAG,CAAC;IACTC,aAAa,GAAG,CAAC;IACjB,GAAGC;EACJ,CAAC,GAAGf,gBAAgB,CAAEO,KAAK,EAAE,UAAW,CAAC;EAEzC,MAAMS,EAAE,GAAGX,KAAK,CAAC,CAAC;EAElB,IAAIY,cAAc;EAClB,IAAK,OAAOR,QAAQ,KAAK,QAAQ,EAAG;IACnCQ,cAAc,GAAGR,QAAQ;EAC1B,CAAC,MAAM,IAAK,OAAOA,QAAQ,KAAK,QAAQ,EAAG;IAC1CQ,cAAc,GAAGR,QAAQ,CAACS,QAAQ,CAAC,CAAC;EACrC;EAEA,MAAMC,gBAAgB,GAAGF,cAAc,GACpCb,eAAe,CAAEa,cAAc,EAAE;IACjCP,QAAQ;IACRC,aAAa;IACbE,KAAK;IACLC;EACA,CAAE,CAAC,GACHL,QAAQ;EAEX,MAAMW,cAAc,GACnB,CAAC,CAAEH,cAAc,IAAIN,aAAa,KAAKR,aAAa,CAACS,IAAI;EAE1D,MAAMS,OAAO,GAAGtB,OAAO,CAAE,MAAM;IAC9B;IACA;IACA;IACA,MAAMuB,aAAa,gBAAGxB,GAAG,CACrBgB,aAAa,KAAK,CAAC,GAAG,wBAAwB,GAAG,EAAE,sDAE/BA,aAAa,6CAAAS,OAAA,CAAAC,GAAA,CAAAC,QAAA,mDAAAF,OAAA,CAAAC,GAAA,CAAAC,QAAA,20GAGpC;IAED,OAAOT,EAAE,CACRI,cAAc,IAAI,CAAEN,aAAa,IAAIb,MAAM,CAACyB,QAAQ,EACpDN,cAAc,IAAI,CAAC,CAAEN,aAAa,IAAIQ,aAAa,EACnDd,SACD,CAAC;EACF,CAAC,EAAE,CAAEA,SAAS,EAAEQ,EAAE,EAAEF,aAAa,EAAEM,cAAc,CAAG,CAAC;EAErD,OAAO;IAAE,GAAGL,UAAU;IAAEP,SAAS,EAAEa,OAAO;IAAEZ,QAAQ,EAAEU;EAAiB,CAAC;AACzE","ignoreList":[]}