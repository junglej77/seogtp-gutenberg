{"version":3,"names":["isValueDefined","TRUNCATE_ELLIPSIS","TRUNCATE_TYPE","auto","head","middle","tail","none","TRUNCATE_DEFAULT_PROPS","ellipsis","ellipsizeMode","limit","numberOfLines","truncateMiddle","word","headLength","tailLength","wordLength","length","frontLength","backLength","truncateStr","slice","truncateContent","words","props","mergedProps","truncateHead","truncateTail","Math","floor","truncatedContent"],"sources":["@wordpress/components/src/truncate/utils.ts"],"sourcesContent":["/**\r\n * Internal dependencies\r\n */\r\nimport { isValueDefined } from '../utils/values';\r\nimport type { TruncateProps } from './types';\r\n\r\nexport const TRUNCATE_ELLIPSIS = 'â€¦';\r\nexport const TRUNCATE_TYPE = {\r\n\tauto: 'auto',\r\n\thead: 'head',\r\n\tmiddle: 'middle',\r\n\ttail: 'tail',\r\n\tnone: 'none',\r\n} as const;\r\n\r\nexport const TRUNCATE_DEFAULT_PROPS = {\r\n\tellipsis: TRUNCATE_ELLIPSIS,\r\n\tellipsizeMode: TRUNCATE_TYPE.auto,\r\n\tlimit: 0,\r\n\tnumberOfLines: 0,\r\n};\r\n\r\n// Source\r\n// https://github.com/kahwee/truncate-middle\r\nexport function truncateMiddle(\r\n\tword: string,\r\n\theadLength: number,\r\n\ttailLength: number,\r\n\tellipsis: string\r\n) {\r\n\tif ( typeof word !== 'string' ) {\r\n\t\treturn '';\r\n\t}\r\n\tconst wordLength = word.length;\r\n\t// Setting default values\r\n\t// eslint-disable-next-line no-bitwise\r\n\tconst frontLength = ~~headLength; // Will cast to integer\r\n\t// eslint-disable-next-line no-bitwise\r\n\tconst backLength = ~~tailLength;\r\n\t/* istanbul ignore next */\r\n\tconst truncateStr = isValueDefined( ellipsis )\r\n\t\t? ellipsis\r\n\t\t: TRUNCATE_ELLIPSIS;\r\n\r\n\tif (\r\n\t\t( frontLength === 0 && backLength === 0 ) ||\r\n\t\tfrontLength >= wordLength ||\r\n\t\tbackLength >= wordLength ||\r\n\t\tfrontLength + backLength >= wordLength\r\n\t) {\r\n\t\treturn word;\r\n\t} else if ( backLength === 0 ) {\r\n\t\treturn word.slice( 0, frontLength ) + truncateStr;\r\n\t}\r\n\treturn (\r\n\t\tword.slice( 0, frontLength ) +\r\n\t\ttruncateStr +\r\n\t\tword.slice( wordLength - backLength )\r\n\t);\r\n}\r\n\r\nexport function truncateContent(\r\n\twords: string = '',\r\n\tprops: Omit< TruncateProps, 'children' >\r\n) {\r\n\tconst mergedProps = { ...TRUNCATE_DEFAULT_PROPS, ...props };\r\n\tconst { ellipsis, ellipsizeMode, limit } = mergedProps;\r\n\r\n\tif ( ellipsizeMode === TRUNCATE_TYPE.none ) {\r\n\t\treturn words;\r\n\t}\r\n\r\n\tlet truncateHead: number;\r\n\tlet truncateTail: number;\r\n\r\n\tswitch ( ellipsizeMode ) {\r\n\t\tcase TRUNCATE_TYPE.head:\r\n\t\t\ttruncateHead = 0;\r\n\t\t\ttruncateTail = limit;\r\n\t\t\tbreak;\r\n\t\tcase TRUNCATE_TYPE.middle:\r\n\t\t\ttruncateHead = Math.floor( limit / 2 );\r\n\t\t\ttruncateTail = Math.floor( limit / 2 );\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\ttruncateHead = limit;\r\n\t\t\ttruncateTail = 0;\r\n\t}\r\n\r\n\tconst truncatedContent =\r\n\t\tellipsizeMode !== TRUNCATE_TYPE.auto\r\n\t\t\t? truncateMiddle( words, truncateHead, truncateTail, ellipsis )\r\n\t\t\t: words;\r\n\r\n\treturn truncatedContent;\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,cAAc,QAAQ,iBAAiB;AAGhD,OAAO,MAAMC,iBAAiB,GAAG,GAAG;AACpC,OAAO,MAAMC,aAAa,GAAG;EAC5BC,IAAI,EAAE,MAAM;EACZC,IAAI,EAAE,MAAM;EACZC,MAAM,EAAE,QAAQ;EAChBC,IAAI,EAAE,MAAM;EACZC,IAAI,EAAE;AACP,CAAU;AAEV,OAAO,MAAMC,sBAAsB,GAAG;EACrCC,QAAQ,EAAER,iBAAiB;EAC3BS,aAAa,EAAER,aAAa,CAACC,IAAI;EACjCQ,KAAK,EAAE,CAAC;EACRC,aAAa,EAAE;AAChB,CAAC;;AAED;AACA;AACA,OAAO,SAASC,cAAcA,CAC7BC,IAAY,EACZC,UAAkB,EAClBC,UAAkB,EAClBP,QAAgB,EACf;EACD,IAAK,OAAOK,IAAI,KAAK,QAAQ,EAAG;IAC/B,OAAO,EAAE;EACV;EACA,MAAMG,UAAU,GAAGH,IAAI,CAACI,MAAM;EAC9B;EACA;EACA,MAAMC,WAAW,GAAG,CAAC,CAACJ,UAAU,CAAC,CAAC;EAClC;EACA,MAAMK,UAAU,GAAG,CAAC,CAACJ,UAAU;EAC/B;EACA,MAAMK,WAAW,GAAGrB,cAAc,CAAES,QAAS,CAAC,GAC3CA,QAAQ,GACRR,iBAAiB;EAEpB,IACGkB,WAAW,KAAK,CAAC,IAAIC,UAAU,KAAK,CAAC,IACvCD,WAAW,IAAIF,UAAU,IACzBG,UAAU,IAAIH,UAAU,IACxBE,WAAW,GAAGC,UAAU,IAAIH,UAAU,EACrC;IACD,OAAOH,IAAI;EACZ,CAAC,MAAM,IAAKM,UAAU,KAAK,CAAC,EAAG;IAC9B,OAAON,IAAI,CAACQ,KAAK,CAAE,CAAC,EAAEH,WAAY,CAAC,GAAGE,WAAW;EAClD;EACA,OACCP,IAAI,CAACQ,KAAK,CAAE,CAAC,EAAEH,WAAY,CAAC,GAC5BE,WAAW,GACXP,IAAI,CAACQ,KAAK,CAAEL,UAAU,GAAGG,UAAW,CAAC;AAEvC;AAEA,OAAO,SAASG,eAAeA,CAC9BC,KAAa,GAAG,EAAE,EAClBC,KAAwC,EACvC;EACD,MAAMC,WAAW,GAAG;IAAE,GAAGlB,sBAAsB;IAAE,GAAGiB;EAAM,CAAC;EAC3D,MAAM;IAAEhB,QAAQ;IAAEC,aAAa;IAAEC;EAAM,CAAC,GAAGe,WAAW;EAEtD,IAAKhB,aAAa,KAAKR,aAAa,CAACK,IAAI,EAAG;IAC3C,OAAOiB,KAAK;EACb;EAEA,IAAIG,YAAoB;EACxB,IAAIC,YAAoB;EAExB,QAASlB,aAAa;IACrB,KAAKR,aAAa,CAACE,IAAI;MACtBuB,YAAY,GAAG,CAAC;MAChBC,YAAY,GAAGjB,KAAK;MACpB;IACD,KAAKT,aAAa,CAACG,MAAM;MACxBsB,YAAY,GAAGE,IAAI,CAACC,KAAK,CAAEnB,KAAK,GAAG,CAAE,CAAC;MACtCiB,YAAY,GAAGC,IAAI,CAACC,KAAK,CAAEnB,KAAK,GAAG,CAAE,CAAC;MACtC;IACD;MACCgB,YAAY,GAAGhB,KAAK;MACpBiB,YAAY,GAAG,CAAC;EAClB;EAEA,MAAMG,gBAAgB,GACrBrB,aAAa,KAAKR,aAAa,CAACC,IAAI,GACjCU,cAAc,CAAEW,KAAK,EAAEG,YAAY,EAAEC,YAAY,EAAEnB,QAAS,CAAC,GAC7De,KAAK;EAET,OAAOO,gBAAgB;AACxB","ignoreList":[]}