{"version":3,"names":["useEffect","useState","breakpoints","useBreakpointIndex","options","defaultIndex","TypeError","length","RangeError","value","setValue","getIndex","filter","bp","window","matchMedia","matches","onResize","newValue","addEventListener","removeEventListener","useResponsiveValue","values","index","Array","isArray","array"],"sources":["@wordpress/components/src/utils/use-responsive-value.ts"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useEffect, useState } from '@wordpress/element';\r\n\r\nconst breakpoints = [ '40em', '52em', '64em' ];\r\n\r\nexport const useBreakpointIndex = (\r\n\toptions: { defaultIndex?: number } = {}\r\n) => {\r\n\tconst { defaultIndex = 0 } = options;\r\n\r\n\tif ( typeof defaultIndex !== 'number' ) {\r\n\t\tthrow new TypeError(\r\n\t\t\t`Default breakpoint index should be a number. Got: ${ defaultIndex }, ${ typeof defaultIndex }`\r\n\t\t);\r\n\t} else if ( defaultIndex < 0 || defaultIndex > breakpoints.length - 1 ) {\r\n\t\tthrow new RangeError(\r\n\t\t\t`Default breakpoint index out of range. Theme has ${ breakpoints.length } breakpoints, got index ${ defaultIndex }`\r\n\t\t);\r\n\t}\r\n\r\n\tconst [ value, setValue ] = useState( defaultIndex );\r\n\r\n\tuseEffect( () => {\r\n\t\tconst getIndex = () =>\r\n\t\t\tbreakpoints.filter( ( bp ) => {\r\n\t\t\t\treturn typeof window !== 'undefined'\r\n\t\t\t\t\t? window.matchMedia( `screen and (min-width: ${ bp })` )\r\n\t\t\t\t\t\t\t.matches\r\n\t\t\t\t\t: false;\r\n\t\t\t} ).length;\r\n\r\n\t\tconst onResize = () => {\r\n\t\t\tconst newValue = getIndex();\r\n\t\t\tif ( value !== newValue ) {\r\n\t\t\t\tsetValue( newValue );\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tonResize();\r\n\r\n\t\tif ( typeof window !== 'undefined' ) {\r\n\t\t\twindow.addEventListener( 'resize', onResize );\r\n\t\t}\r\n\t\treturn () => {\r\n\t\t\tif ( typeof window !== 'undefined' ) {\r\n\t\t\t\twindow.removeEventListener( 'resize', onResize );\r\n\t\t\t}\r\n\t\t};\r\n\t}, [ value ] );\r\n\r\n\treturn value;\r\n};\r\n\r\nexport function useResponsiveValue< T >(\r\n\tvalues: ( T | undefined )[],\r\n\toptions: Parameters< typeof useBreakpointIndex >[ 0 ] = {}\r\n): T | undefined {\r\n\tconst index = useBreakpointIndex( options );\r\n\r\n\t// Allow calling the function with a \"normal\" value without having to check on the outside.\r\n\tif ( ! Array.isArray( values ) && typeof values !== 'function' ) {\r\n\t\treturn values;\r\n\t}\r\n\r\n\tconst array = values || [];\r\n\r\n\t/* eslint-disable jsdoc/no-undefined-types */\r\n\treturn /** @type {T[]} */ array[\r\n\t\t/* eslint-enable jsdoc/no-undefined-types */\r\n\t\tindex >= array.length ? array.length - 1 : index\r\n\t];\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,oBAAoB;AAExD,MAAMC,WAAW,GAAG,CAAE,MAAM,EAAE,MAAM,EAAE,MAAM,CAAE;AAE9C,OAAO,MAAMC,kBAAkB,GAAGA,CACjCC,OAAkC,GAAG,CAAC,CAAC,KACnC;EACJ,MAAM;IAAEC,YAAY,GAAG;EAAE,CAAC,GAAGD,OAAO;EAEpC,IAAK,OAAOC,YAAY,KAAK,QAAQ,EAAG;IACvC,MAAM,IAAIC,SAAS,CACjB,qDAAqDD,YAAc,KAAK,OAAOA,YAAc,EAC/F,CAAC;EACF,CAAC,MAAM,IAAKA,YAAY,GAAG,CAAC,IAAIA,YAAY,GAAGH,WAAW,CAACK,MAAM,GAAG,CAAC,EAAG;IACvE,MAAM,IAAIC,UAAU,CAClB,oDAAoDN,WAAW,CAACK,MAAQ,2BAA2BF,YAAc,EACnH,CAAC;EACF;EAEA,MAAM,CAAEI,KAAK,EAAEC,QAAQ,CAAE,GAAGT,QAAQ,CAAEI,YAAa,CAAC;EAEpDL,SAAS,CAAE,MAAM;IAChB,MAAMW,QAAQ,GAAGA,CAAA,KAChBT,WAAW,CAACU,MAAM,CAAIC,EAAE,IAAM;MAC7B,OAAO,OAAOC,MAAM,KAAK,WAAW,GACjCA,MAAM,CAACC,UAAU,CAAG,0BAA0BF,EAAI,GAAG,CAAC,CACrDG,OAAO,GACR,KAAK;IACT,CAAE,CAAC,CAACT,MAAM;IAEX,MAAMU,QAAQ,GAAGA,CAAA,KAAM;MACtB,MAAMC,QAAQ,GAAGP,QAAQ,CAAC,CAAC;MAC3B,IAAKF,KAAK,KAAKS,QAAQ,EAAG;QACzBR,QAAQ,CAAEQ,QAAS,CAAC;MACrB;IACD,CAAC;IAEDD,QAAQ,CAAC,CAAC;IAEV,IAAK,OAAOH,MAAM,KAAK,WAAW,EAAG;MACpCA,MAAM,CAACK,gBAAgB,CAAE,QAAQ,EAAEF,QAAS,CAAC;IAC9C;IACA,OAAO,MAAM;MACZ,IAAK,OAAOH,MAAM,KAAK,WAAW,EAAG;QACpCA,MAAM,CAACM,mBAAmB,CAAE,QAAQ,EAAEH,QAAS,CAAC;MACjD;IACD,CAAC;EACF,CAAC,EAAE,CAAER,KAAK,CAAG,CAAC;EAEd,OAAOA,KAAK;AACb,CAAC;AAED,OAAO,SAASY,kBAAkBA,CACjCC,MAA2B,EAC3BlB,OAAqD,GAAG,CAAC,CAAC,EAC1C;EAChB,MAAMmB,KAAK,GAAGpB,kBAAkB,CAAEC,OAAQ,CAAC;;EAE3C;EACA,IAAK,CAAEoB,KAAK,CAACC,OAAO,CAAEH,MAAO,CAAC,IAAI,OAAOA,MAAM,KAAK,UAAU,EAAG;IAChE,OAAOA,MAAM;EACd;EAEA,MAAMI,KAAK,GAAGJ,MAAM,IAAI,EAAE;;EAE1B;EACA,OAAO,kBAAmBI,KAAK,CAC9B;EACAH,KAAK,IAAIG,KAAK,CAACnB,MAAM,GAAGmB,KAAK,CAACnB,MAAM,GAAG,CAAC,GAAGgB,KAAK,CAChD;AACF","ignoreList":[]}