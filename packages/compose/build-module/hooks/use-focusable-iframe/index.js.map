{"version":3,"names":["useRefEffect","useFocusableIframe","element","ownerDocument","defaultView","checkFocus","activeElement","focus","addEventListener","removeEventListener"],"sources":["@wordpress/compose/src/hooks/use-focusable-iframe/index.ts"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport type { RefCallback } from 'react';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport useRefEffect from '../use-ref-effect';\r\n\r\n/**\r\n * Dispatches a bubbling focus event when the iframe receives focus. Use\r\n * `onFocus` as usual on the iframe or a parent element.\r\n *\r\n * @return Ref to pass to the iframe.\r\n */\r\nexport default function useFocusableIframe(): RefCallback< HTMLIFrameElement > {\r\n\treturn useRefEffect( ( element ) => {\r\n\t\tconst { ownerDocument } = element;\r\n\t\tif ( ! ownerDocument ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst { defaultView } = ownerDocument;\r\n\t\tif ( ! defaultView ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Checks whether the iframe is the activeElement, inferring that it has\r\n\t\t * then received focus, and dispatches a focus event.\r\n\t\t */\r\n\t\tfunction checkFocus() {\r\n\t\t\tif ( ownerDocument && ownerDocument.activeElement === element ) {\r\n\t\t\t\t( element as HTMLElement ).focus();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tdefaultView.addEventListener( 'blur', checkFocus );\r\n\t\treturn () => {\r\n\t\t\tdefaultView.removeEventListener( 'blur', checkFocus );\r\n\t\t};\r\n\t}, [] );\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;;AAGA;AACA;AACA;AACA,OAAOA,YAAY,MAAM,mBAAmB;;AAE5C;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAASC,kBAAkBA,CAAA,EAAqC;EAC9E,OAAOD,YAAY,CAAIE,OAAO,IAAM;IACnC,MAAM;MAAEC;IAAc,CAAC,GAAGD,OAAO;IACjC,IAAK,CAAEC,aAAa,EAAG;MACtB;IACD;IACA,MAAM;MAAEC;IAAY,CAAC,GAAGD,aAAa;IACrC,IAAK,CAAEC,WAAW,EAAG;MACpB;IACD;;IAEA;AACF;AACA;AACA;IACE,SAASC,UAAUA,CAAA,EAAG;MACrB,IAAKF,aAAa,IAAIA,aAAa,CAACG,aAAa,KAAKJ,OAAO,EAAG;QAC7DA,OAAO,CAAkBK,KAAK,CAAC,CAAC;MACnC;IACD;IAEAH,WAAW,CAACI,gBAAgB,CAAE,MAAM,EAAEH,UAAW,CAAC;IAClD,OAAO,MAAM;MACZD,WAAW,CAACK,mBAAmB,CAAE,MAAM,EAAEJ,UAAW,CAAC;IACtD,CAAC;EACF,CAAC,EAAE,EAAG,CAAC;AACR","ignoreList":[]}