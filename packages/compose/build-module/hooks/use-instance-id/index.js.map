{"version":3,"names":["useMemo","instanceMap","WeakMap","createId","object","instances","get","set","useInstanceId","prefix","preferredId","id"],"sources":["@wordpress/compose/src/hooks/use-instance-id/index.ts"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useMemo } from '@wordpress/element';\r\n\r\nconst instanceMap = new WeakMap< object, number >();\r\n\r\n/**\r\n * Creates a new id for a given object.\r\n *\r\n * @param object Object reference to create an id for.\r\n * @return The instance id (index).\r\n */\r\nfunction createId( object: object ): number {\r\n\tconst instances = instanceMap.get( object ) || 0;\r\n\tinstanceMap.set( object, instances + 1 );\r\n\treturn instances;\r\n}\r\n\r\n/**\r\n * Specify the useInstanceId *function* signatures.\r\n *\r\n * More accurately, useInstanceId distinguishes between three different\r\n * signatures:\r\n *\r\n * 1. When only object is given, the returned value is a number\r\n * 2. When object and prefix is given, the returned value is a string\r\n * 3. When preferredId is given, the returned value is the type of preferredId\r\n *\r\n * @param object Object reference to create an id for.\r\n */\r\nfunction useInstanceId( object: object ): number;\r\nfunction useInstanceId( object: object, prefix: string ): string;\r\nfunction useInstanceId< T extends string | number >(\r\n\tobject: object,\r\n\tprefix: string,\r\n\tpreferredId?: T\r\n): T;\r\n\r\n/**\r\n * Provides a unique instance ID.\r\n *\r\n * @param object        Object reference to create an id for.\r\n * @param [prefix]      Prefix for the unique id.\r\n * @param [preferredId] Default ID to use.\r\n * @return The unique instance id.\r\n */\r\nfunction useInstanceId(\r\n\tobject: object,\r\n\tprefix?: string,\r\n\tpreferredId?: string | number\r\n): string | number {\r\n\treturn useMemo( () => {\r\n\t\tif ( preferredId ) {\r\n\t\t\treturn preferredId;\r\n\t\t}\r\n\t\tconst id = createId( object );\r\n\r\n\t\treturn prefix ? `${ prefix }-${ id }` : id;\r\n\t}, [ object, preferredId, prefix ] );\r\n}\r\n\r\nexport default useInstanceId;\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,OAAO,QAAQ,oBAAoB;AAE5C,MAAMC,WAAW,GAAG,IAAIC,OAAO,CAAmB,CAAC;;AAEnD;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,QAAQA,CAAEC,MAAc,EAAW;EAC3C,MAAMC,SAAS,GAAGJ,WAAW,CAACK,GAAG,CAAEF,MAAO,CAAC,IAAI,CAAC;EAChDH,WAAW,CAACM,GAAG,CAAEH,MAAM,EAAEC,SAAS,GAAG,CAAE,CAAC;EACxC,OAAOA,SAAS;AACjB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASG,aAAaA,CACrBJ,MAAc,EACdK,MAAe,EACfC,WAA6B,EACX;EAClB,OAAOV,OAAO,CAAE,MAAM;IACrB,IAAKU,WAAW,EAAG;MAClB,OAAOA,WAAW;IACnB;IACA,MAAMC,EAAE,GAAGR,QAAQ,CAAEC,MAAO,CAAC;IAE7B,OAAOK,MAAM,GAAI,GAAGA,MAAQ,IAAIE,EAAI,EAAC,GAAGA,EAAE;EAC3C,CAAC,EAAE,CAAEP,MAAM,EAAEM,WAAW,EAAED,MAAM,CAAG,CAAC;AACrC;AAEA,eAAeD,aAAa","ignoreList":[]}