{"version":3,"names":["useCallback","useRef","useRefEffect","callback","dependencies","cleanupRef","node","current"],"sources":["@wordpress/compose/src/hooks/use-ref-effect/index.ts"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport type { DependencyList, RefCallback } from 'react';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useCallback, useRef } from '@wordpress/element';\r\n\r\n/**\r\n * Effect-like ref callback. Just like with `useEffect`, this allows you to\r\n * return a cleanup function to be run if the ref changes or one of the\r\n * dependencies changes. The ref is provided as an argument to the callback\r\n * functions. The main difference between this and `useEffect` is that\r\n * the `useEffect` callback is not called when the ref changes, but this is.\r\n * Pass the returned ref callback as the component's ref and merge multiple refs\r\n * with `useMergeRefs`.\r\n *\r\n * It's worth noting that if the dependencies array is empty, there's not\r\n * strictly a need to clean up event handlers for example, because the node is\r\n * to be removed. It *is* necessary if you add dependencies because the ref\r\n * callback will be called multiple times for the same node.\r\n *\r\n * @param callback     Callback with ref as argument.\r\n * @param dependencies Dependencies of the callback.\r\n *\r\n * @return Ref callback.\r\n */\r\nexport default function useRefEffect< TElement = Node >(\r\n\tcallback: ( node: TElement ) => ( () => void ) | void,\r\n\tdependencies: DependencyList\r\n): RefCallback< TElement | null > {\r\n\tconst cleanupRef = useRef< ( () => void ) | void >();\r\n\treturn useCallback( ( node: TElement | null ) => {\r\n\t\tif ( node ) {\r\n\t\t\tcleanupRef.current = callback( node );\r\n\t\t} else if ( cleanupRef.current ) {\r\n\t\t\tcleanupRef.current();\r\n\t\t}\r\n\t}, dependencies );\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;;AAGA;AACA;AACA;AACA,SAASA,WAAW,EAAEC,MAAM,QAAQ,oBAAoB;;AAExD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAASC,YAAYA,CACnCC,QAAqD,EACrDC,YAA4B,EACK;EACjC,MAAMC,UAAU,GAAGJ,MAAM,CAA0B,CAAC;EACpD,OAAOD,WAAW,CAAIM,IAAqB,IAAM;IAChD,IAAKA,IAAI,EAAG;MACXD,UAAU,CAACE,OAAO,GAAGJ,QAAQ,CAAEG,IAAK,CAAC;IACtC,CAAC,MAAM,IAAKD,UAAU,CAACE,OAAO,EAAG;MAChCF,UAAU,CAACE,OAAO,CAAC,CAAC;IACrB;EACD,CAAC,EAAEH,YAAa,CAAC;AAClB","ignoreList":[]}