{"version":3,"names":["useCommandLoader","__","useMemo","useEffect","useState","useSelect","store","coreStore","post","page","layout","symbol","symbolFilled","styles","navigation","privateApis","routerPrivateApis","addQueryArgs","getPath","useDebounce","decodeEntities","unlock","orderEntityRecordsBySearch","useHistory","icons","wp_template","wp_template_part","useDebouncedValue","value","debouncedValue","setDebouncedValue","debounced","cancel","getNavigationCommandLoaderPerPostType","postType","useNavigationCommandLoader","search","history","isBlockBasedTheme","canCreateTemplate","select","getCurrentTheme","is_block_theme","canUser","kind","name","delayedSearch","records","isLoading","query","per_page","orderby","status","getEntityRecords","hasFinishedResolution","commands","map","record","command","id","searchLabel","title","rendered","label","icon","callback","close","args","action","targetUrl","document","location","isSiteEditor","window","href","includes","postId","canvas","push","getNavigationCommandLoaderPerTemplate","templateType","orderedRecords","slice","result","length","categoryId","usePageNavigationCommandLoader","usePostNavigationCommandLoader","useTemplateNavigationCommandLoader","useTemplatePartNavigationCommandLoader","useSiteEditorBasicNavigationCommands","path","useSiteEditorNavigationCommands","hook","context"],"sources":["@wordpress/core-commands/src/site-editor-navigation-commands.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useCommandLoader } from '@wordpress/commands';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useMemo, useEffect, useState } from '@wordpress/element';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { store as coreStore } from '@wordpress/core-data';\r\nimport {\r\n\tpost,\r\n\tpage,\r\n\tlayout,\r\n\tsymbol,\r\n\tsymbolFilled,\r\n\tstyles,\r\n\tnavigation,\r\n} from '@wordpress/icons';\r\nimport { privateApis as routerPrivateApis } from '@wordpress/router';\r\nimport { addQueryArgs, getPath } from '@wordpress/url';\r\nimport { useDebounce } from '@wordpress/compose';\r\nimport { decodeEntities } from '@wordpress/html-entities';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { unlock } from './lock-unlock';\r\nimport { orderEntityRecordsBySearch } from './utils/order-entity-records-by-search';\r\n\r\nconst { useHistory } = unlock( routerPrivateApis );\r\n\r\nconst icons = {\r\n\tpost,\r\n\tpage,\r\n\twp_template: layout,\r\n\twp_template_part: symbolFilled,\r\n};\r\n\r\nfunction useDebouncedValue( value ) {\r\n\tconst [ debouncedValue, setDebouncedValue ] = useState( '' );\r\n\tconst debounced = useDebounce( setDebouncedValue, 250 );\r\n\r\n\tuseEffect( () => {\r\n\t\tdebounced( value );\r\n\t\treturn () => debounced.cancel();\r\n\t}, [ debounced, value ] );\r\n\r\n\treturn debouncedValue;\r\n}\r\n\r\nconst getNavigationCommandLoaderPerPostType = ( postType ) =>\r\n\tfunction useNavigationCommandLoader( { search } ) {\r\n\t\tconst history = useHistory();\r\n\t\tconst { isBlockBasedTheme, canCreateTemplate } = useSelect(\r\n\t\t\t( select ) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tisBlockBasedTheme:\r\n\t\t\t\t\t\tselect( coreStore ).getCurrentTheme()?.is_block_theme,\r\n\t\t\t\t\tcanCreateTemplate: select( coreStore ).canUser( 'create', {\r\n\t\t\t\t\t\tkind: 'postType',\r\n\t\t\t\t\t\tname: 'wp_template',\r\n\t\t\t\t\t} ),\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\t[]\r\n\t\t);\r\n\t\tconst delayedSearch = useDebouncedValue( search );\r\n\t\tconst { records, isLoading } = useSelect(\r\n\t\t\t( select ) => {\r\n\t\t\t\tif ( ! delayedSearch ) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tisLoading: false,\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst query = {\r\n\t\t\t\t\tsearch: delayedSearch,\r\n\t\t\t\t\tper_page: 10,\r\n\t\t\t\t\torderby: 'relevance',\r\n\t\t\t\t\tstatus: [\r\n\t\t\t\t\t\t'publish',\r\n\t\t\t\t\t\t'future',\r\n\t\t\t\t\t\t'draft',\r\n\t\t\t\t\t\t'pending',\r\n\t\t\t\t\t\t'private',\r\n\t\t\t\t\t],\r\n\t\t\t\t};\r\n\t\t\t\treturn {\r\n\t\t\t\t\trecords: select( coreStore ).getEntityRecords(\r\n\t\t\t\t\t\t'postType',\r\n\t\t\t\t\t\tpostType,\r\n\t\t\t\t\t\tquery\r\n\t\t\t\t\t),\r\n\t\t\t\t\tisLoading: ! select( coreStore ).hasFinishedResolution(\r\n\t\t\t\t\t\t'getEntityRecords',\r\n\t\t\t\t\t\t[ 'postType', postType, query ]\r\n\t\t\t\t\t),\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\t[ delayedSearch ]\r\n\t\t);\r\n\r\n\t\tconst commands = useMemo( () => {\r\n\t\t\treturn ( records ?? [] ).map( ( record ) => {\r\n\t\t\t\tconst command = {\r\n\t\t\t\t\tname: postType + '-' + record.id,\r\n\t\t\t\t\tsearchLabel: record.title?.rendered + ' ' + record.id,\r\n\t\t\t\t\tlabel: record.title?.rendered\r\n\t\t\t\t\t\t? decodeEntities( record.title?.rendered )\r\n\t\t\t\t\t\t: __( '(no title)' ),\r\n\t\t\t\t\ticon: icons[ postType ],\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif (\r\n\t\t\t\t\t! canCreateTemplate ||\r\n\t\t\t\t\tpostType === 'post' ||\r\n\t\t\t\t\t( postType === 'page' && ! isBlockBasedTheme )\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t...command,\r\n\t\t\t\t\t\tcallback: ( { close } ) => {\r\n\t\t\t\t\t\t\tconst args = {\r\n\t\t\t\t\t\t\t\tpost: record.id,\r\n\t\t\t\t\t\t\t\taction: 'edit',\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tconst targetUrl = addQueryArgs( 'post.php', args );\r\n\t\t\t\t\t\t\tdocument.location = targetUrl;\r\n\t\t\t\t\t\t\tclose();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst isSiteEditor = getPath( window.location.href )?.includes(\r\n\t\t\t\t\t'site-editor.php'\r\n\t\t\t\t);\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...command,\r\n\t\t\t\t\tcallback: ( { close } ) => {\r\n\t\t\t\t\t\tconst args = {\r\n\t\t\t\t\t\t\tpostType,\r\n\t\t\t\t\t\t\tpostId: record.id,\r\n\t\t\t\t\t\t\tcanvas: 'edit',\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tconst targetUrl = addQueryArgs(\r\n\t\t\t\t\t\t\t'site-editor.php',\r\n\t\t\t\t\t\t\targs\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tif ( isSiteEditor ) {\r\n\t\t\t\t\t\t\thistory.push( args );\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tdocument.location = targetUrl;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tclose();\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\t\t\t} );\r\n\t\t}, [ canCreateTemplate, records, isBlockBasedTheme, history ] );\r\n\r\n\t\treturn {\r\n\t\t\tcommands,\r\n\t\t\tisLoading,\r\n\t\t};\r\n\t};\r\n\r\nconst getNavigationCommandLoaderPerTemplate = ( templateType ) =>\r\n\tfunction useNavigationCommandLoader( { search } ) {\r\n\t\tconst history = useHistory();\r\n\t\tconst { isBlockBasedTheme, canCreateTemplate } = useSelect(\r\n\t\t\t( select ) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tisBlockBasedTheme:\r\n\t\t\t\t\t\tselect( coreStore ).getCurrentTheme()?.is_block_theme,\r\n\t\t\t\t\tcanCreateTemplate: select( coreStore ).canUser( 'create', {\r\n\t\t\t\t\t\tkind: 'postType',\r\n\t\t\t\t\t\tname: templateType,\r\n\t\t\t\t\t} ),\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\t[]\r\n\t\t);\r\n\t\tconst { records, isLoading } = useSelect( ( select ) => {\r\n\t\t\tconst { getEntityRecords } = select( coreStore );\r\n\t\t\tconst query = { per_page: -1 };\r\n\t\t\treturn {\r\n\t\t\t\trecords: getEntityRecords( 'postType', templateType, query ),\r\n\t\t\t\tisLoading: ! select( coreStore ).hasFinishedResolution(\r\n\t\t\t\t\t'getEntityRecords',\r\n\t\t\t\t\t[ 'postType', templateType, query ]\r\n\t\t\t\t),\r\n\t\t\t};\r\n\t\t}, [] );\r\n\r\n\t\t/*\r\n\t\t * wp_template and wp_template_part endpoints do not support per_page or orderby parameters.\r\n\t\t * We need to sort the results based on the search query to avoid removing relevant\r\n\t\t * records below using .slice().\r\n\t\t */\r\n\t\tconst orderedRecords = useMemo( () => {\r\n\t\t\treturn orderEntityRecordsBySearch( records, search ).slice( 0, 10 );\r\n\t\t}, [ records, search ] );\r\n\r\n\t\tconst commands = useMemo( () => {\r\n\t\t\tif (\r\n\t\t\t\t! canCreateTemplate ||\r\n\t\t\t\t( ! isBlockBasedTheme && ! templateType === 'wp_template_part' )\r\n\t\t\t) {\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t\tconst isSiteEditor = getPath( window.location.href )?.includes(\r\n\t\t\t\t'site-editor.php'\r\n\t\t\t);\r\n\t\t\tconst result = [];\r\n\t\t\tresult.push(\r\n\t\t\t\t...orderedRecords.map( ( record ) => {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tname: templateType + '-' + record.id,\r\n\t\t\t\t\t\tsearchLabel: record.title?.rendered + ' ' + record.id,\r\n\t\t\t\t\t\tlabel: record.title?.rendered\r\n\t\t\t\t\t\t\t? record.title?.rendered\r\n\t\t\t\t\t\t\t: __( '(no title)' ),\r\n\t\t\t\t\t\ticon: icons[ templateType ],\r\n\t\t\t\t\t\tcallback: ( { close } ) => {\r\n\t\t\t\t\t\t\tconst args = {\r\n\t\t\t\t\t\t\t\tpostType: templateType,\r\n\t\t\t\t\t\t\t\tpostId: record.id,\r\n\t\t\t\t\t\t\t\tcanvas: 'edit',\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tconst targetUrl = addQueryArgs(\r\n\t\t\t\t\t\t\t\t'site-editor.php',\r\n\t\t\t\t\t\t\t\targs\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tif ( isSiteEditor ) {\r\n\t\t\t\t\t\t\t\thistory.push( args );\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdocument.location = targetUrl;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tclose();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t};\r\n\t\t\t\t} )\r\n\t\t\t);\r\n\r\n\t\t\tif (\r\n\t\t\t\torderedRecords?.length > 0 &&\r\n\t\t\t\ttemplateType === 'wp_template_part'\r\n\t\t\t) {\r\n\t\t\t\tresult.push( {\r\n\t\t\t\t\tname: 'core/edit-site/open-template-parts',\r\n\t\t\t\t\tlabel: __( 'Template parts' ),\r\n\t\t\t\t\ticon: symbolFilled,\r\n\t\t\t\t\tcallback: ( { close } ) => {\r\n\t\t\t\t\t\tconst args = {\r\n\t\t\t\t\t\t\tpostType: 'wp_template_part',\r\n\t\t\t\t\t\t\tcategoryId: 'all-parts',\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tconst targetUrl = addQueryArgs(\r\n\t\t\t\t\t\t\t'site-editor.php',\r\n\t\t\t\t\t\t\targs\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tif ( isSiteEditor ) {\r\n\t\t\t\t\t\t\thistory.push( args );\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tdocument.location = targetUrl;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tclose();\r\n\t\t\t\t\t},\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}, [ canCreateTemplate, isBlockBasedTheme, orderedRecords, history ] );\r\n\r\n\t\treturn {\r\n\t\t\tcommands,\r\n\t\t\tisLoading,\r\n\t\t};\r\n\t};\r\n\r\nconst usePageNavigationCommandLoader =\r\n\tgetNavigationCommandLoaderPerPostType( 'page' );\r\nconst usePostNavigationCommandLoader =\r\n\tgetNavigationCommandLoaderPerPostType( 'post' );\r\nconst useTemplateNavigationCommandLoader =\r\n\tgetNavigationCommandLoaderPerTemplate( 'wp_template' );\r\nconst useTemplatePartNavigationCommandLoader =\r\n\tgetNavigationCommandLoaderPerTemplate( 'wp_template_part' );\r\n\r\nfunction useSiteEditorBasicNavigationCommands() {\r\n\tconst history = useHistory();\r\n\tconst isSiteEditor = getPath( window.location.href )?.includes(\r\n\t\t'site-editor.php'\r\n\t);\r\n\tconst { isBlockBasedTheme, canCreateTemplate } = useSelect( ( select ) => {\r\n\t\treturn {\r\n\t\t\tisBlockBasedTheme:\r\n\t\t\t\tselect( coreStore ).getCurrentTheme()?.is_block_theme,\r\n\t\t\tcanCreateTemplate: select( coreStore ).canUser( 'create', {\r\n\t\t\t\tkind: 'postType',\r\n\t\t\t\tname: 'wp_template',\r\n\t\t\t} ),\r\n\t\t};\r\n\t}, [] );\r\n\tconst commands = useMemo( () => {\r\n\t\tconst result = [];\r\n\r\n\t\tif ( canCreateTemplate && isBlockBasedTheme ) {\r\n\t\t\tresult.push( {\r\n\t\t\t\tname: 'core/edit-site/open-navigation',\r\n\t\t\t\tlabel: __( 'Navigation' ),\r\n\t\t\t\ticon: navigation,\r\n\t\t\t\tcallback: ( { close } ) => {\r\n\t\t\t\t\tconst args = {\r\n\t\t\t\t\t\tpostType: 'wp_navigation',\r\n\t\t\t\t\t};\r\n\t\t\t\t\tconst targetUrl = addQueryArgs( 'site-editor.php', args );\r\n\t\t\t\t\tif ( isSiteEditor ) {\r\n\t\t\t\t\t\thistory.push( args );\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdocument.location = targetUrl;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tclose();\r\n\t\t\t\t},\r\n\t\t\t} );\r\n\r\n\t\t\tresult.push( {\r\n\t\t\t\tname: 'core/edit-site/open-styles',\r\n\t\t\t\tlabel: __( 'Styles' ),\r\n\t\t\t\ticon: styles,\r\n\t\t\t\tcallback: ( { close } ) => {\r\n\t\t\t\t\tconst args = {\r\n\t\t\t\t\t\tpath: '/wp_global_styles',\r\n\t\t\t\t\t};\r\n\t\t\t\t\tconst targetUrl = addQueryArgs( 'site-editor.php', args );\r\n\t\t\t\t\tif ( isSiteEditor ) {\r\n\t\t\t\t\t\thistory.push( args );\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdocument.location = targetUrl;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tclose();\r\n\t\t\t\t},\r\n\t\t\t} );\r\n\r\n\t\t\tresult.push( {\r\n\t\t\t\tname: 'core/edit-site/open-pages',\r\n\t\t\t\tlabel: __( 'Pages' ),\r\n\t\t\t\ticon: page,\r\n\t\t\t\tcallback: ( { close } ) => {\r\n\t\t\t\t\tconst args = {\r\n\t\t\t\t\t\tpostType: 'page',\r\n\t\t\t\t\t};\r\n\t\t\t\t\tconst targetUrl = addQueryArgs( 'site-editor.php', args );\r\n\t\t\t\t\tif ( isSiteEditor ) {\r\n\t\t\t\t\t\thistory.push( args );\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdocument.location = targetUrl;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tclose();\r\n\t\t\t\t},\r\n\t\t\t} );\r\n\r\n\t\t\tresult.push( {\r\n\t\t\t\tname: 'core/edit-site/open-templates',\r\n\t\t\t\tlabel: __( 'Templates' ),\r\n\t\t\t\ticon: layout,\r\n\t\t\t\tcallback: ( { close } ) => {\r\n\t\t\t\t\tconst args = {\r\n\t\t\t\t\t\tpostType: 'wp_template',\r\n\t\t\t\t\t};\r\n\t\t\t\t\tconst targetUrl = addQueryArgs( 'site-editor.php', args );\r\n\t\t\t\t\tif ( isSiteEditor ) {\r\n\t\t\t\t\t\thistory.push( args );\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdocument.location = targetUrl;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tclose();\r\n\t\t\t\t},\r\n\t\t\t} );\r\n\t\t}\r\n\r\n\t\tresult.push( {\r\n\t\t\tname: 'core/edit-site/open-patterns',\r\n\t\t\tlabel: __( 'Patterns' ),\r\n\t\t\ticon: symbol,\r\n\t\t\tcallback: ( { close } ) => {\r\n\t\t\t\tif ( canCreateTemplate ) {\r\n\t\t\t\t\tconst args = {\r\n\t\t\t\t\t\tpostType: 'wp_block',\r\n\t\t\t\t\t};\r\n\t\t\t\t\tconst targetUrl = addQueryArgs( 'site-editor.php', args );\r\n\t\t\t\t\tif ( isSiteEditor ) {\r\n\t\t\t\t\t\thistory.push( args );\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdocument.location = targetUrl;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tclose();\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// If a user cannot access the site editor\r\n\t\t\t\t\tdocument.location.href = 'edit.php?post_type=wp_block';\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t} );\r\n\r\n\t\treturn result;\r\n\t}, [ history, isSiteEditor, canCreateTemplate, isBlockBasedTheme ] );\r\n\r\n\treturn {\r\n\t\tcommands,\r\n\t\tisLoading: false,\r\n\t};\r\n}\r\n\r\nexport function useSiteEditorNavigationCommands() {\r\n\tuseCommandLoader( {\r\n\t\tname: 'core/edit-site/navigate-pages',\r\n\t\thook: usePageNavigationCommandLoader,\r\n\t} );\r\n\tuseCommandLoader( {\r\n\t\tname: 'core/edit-site/navigate-posts',\r\n\t\thook: usePostNavigationCommandLoader,\r\n\t} );\r\n\tuseCommandLoader( {\r\n\t\tname: 'core/edit-site/navigate-templates',\r\n\t\thook: useTemplateNavigationCommandLoader,\r\n\t} );\r\n\tuseCommandLoader( {\r\n\t\tname: 'core/edit-site/navigate-template-parts',\r\n\t\thook: useTemplatePartNavigationCommandLoader,\r\n\t} );\r\n\tuseCommandLoader( {\r\n\t\tname: 'core/edit-site/basic-navigation',\r\n\t\thook: useSiteEditorBasicNavigationCommands,\r\n\t\tcontext: 'site-editor',\r\n\t} );\r\n}\r\n"],"mappings":"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","ignoreList":[]}