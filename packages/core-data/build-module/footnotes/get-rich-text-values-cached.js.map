{"version":3,"names":["privateApis","blockEditorPrivateApis","unlock","unlockedApis","cache","WeakMap","getRichTextValuesCached","block","has","values","getRichTextValues","set","get"],"sources":["@wordpress/core-data/src/footnotes/get-rich-text-values-cached.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { privateApis as blockEditorPrivateApis } from '@wordpress/block-editor';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { unlock } from '../lock-unlock';\r\n\r\n// TODO: The following line should have been:\r\n//\r\n//   const unlockedApis = unlock( blockEditorPrivateApis );\r\n//\r\n// But there are hidden circular dependencies in RNMobile code, specifically in\r\n// certain native components in the `components` package that depend on\r\n// `block-editor`. What follows is a workaround that defers the `unlock` call\r\n// to prevent native code from failing.\r\n//\r\n// Fix once https://github.com/WordPress/gutenberg/issues/52692 is closed.\r\nlet unlockedApis;\r\n\r\nconst cache = new WeakMap();\r\n\r\nexport default function getRichTextValuesCached( block ) {\r\n\tif ( ! unlockedApis ) {\r\n\t\tunlockedApis = unlock( blockEditorPrivateApis );\r\n\t}\r\n\r\n\tif ( ! cache.has( block ) ) {\r\n\t\tconst values = unlockedApis.getRichTextValues( [ block ] );\r\n\t\tcache.set( block, values );\r\n\t}\r\n\treturn cache.get( block );\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,WAAW,IAAIC,sBAAsB,QAAQ,yBAAyB;;AAE/E;AACA;AACA;AACA,SAASC,MAAM,QAAQ,gBAAgB;;AAEvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIC,YAAY;AAEhB,MAAMC,KAAK,GAAG,IAAIC,OAAO,CAAC,CAAC;AAE3B,eAAe,SAASC,uBAAuBA,CAAEC,KAAK,EAAG;EACxD,IAAK,CAAEJ,YAAY,EAAG;IACrBA,YAAY,GAAGD,MAAM,CAAED,sBAAuB,CAAC;EAChD;EAEA,IAAK,CAAEG,KAAK,CAACI,GAAG,CAAED,KAAM,CAAC,EAAG;IAC3B,MAAME,MAAM,GAAGN,YAAY,CAACO,iBAAiB,CAAE,CAAEH,KAAK,CAAG,CAAC;IAC1DH,KAAK,CAACO,GAAG,CAAEJ,KAAK,EAAEE,MAAO,CAAC;EAC3B;EACA,OAAOL,KAAK,CAACQ,GAAG,CAAEL,KAAM,CAAC;AAC1B","ignoreList":[]}