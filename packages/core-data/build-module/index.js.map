{"version":3,"names":["createReduxStore","register","reducer","selectors","privateSelectors","actions","resolvers","createLocksActions","rootEntitiesConfig","additionalEntityConfigLoaders","getMethodName","STORE_NAME","unlock","entitiesConfig","filter","config","name","entitySelectors","reduce","result","entity","kind","plural","state","key","query","getEntityRecord","getEntityRecords","entityResolvers","pluralMethodName","args","shouldInvalidate","action","entityActions","record","options","saveEntityRecord","deleteEntityRecord","storeConfig","store","registerPrivateSelectors","default","EntityProvider"],"sources":["@wordpress/core-data/src/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { createReduxStore, register } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport reducer from './reducer';\r\nimport * as selectors from './selectors';\r\nimport * as privateSelectors from './private-selectors';\r\nimport * as actions from './actions';\r\nimport * as resolvers from './resolvers';\r\nimport createLocksActions from './locks/actions';\r\nimport {\r\n\trootEntitiesConfig,\r\n\tadditionalEntityConfigLoaders,\r\n\tgetMethodName,\r\n} from './entities';\r\nimport { STORE_NAME } from './name';\r\nimport { unlock } from './lock-unlock';\r\n\r\n// The entity selectors/resolvers and actions are shortcuts to their generic equivalents\r\n// (getEntityRecord, getEntityRecords, updateEntityRecord, updateEntityRecords)\r\n// Instead of getEntityRecord, the consumer could use more user-friendly named selector: getPostType, getTaxonomy...\r\n// The \"kind\" and the \"name\" of the entity are combined to generate these shortcuts.\r\nconst entitiesConfig = [\r\n\t...rootEntitiesConfig,\r\n\t...additionalEntityConfigLoaders.filter( ( config ) => !! config.name ),\r\n];\r\n\r\nconst entitySelectors = entitiesConfig.reduce( ( result, entity ) => {\r\n\tconst { kind, name, plural } = entity;\r\n\tresult[ getMethodName( kind, name ) ] = ( state, key, query ) =>\r\n\t\tselectors.getEntityRecord( state, kind, name, key, query );\r\n\r\n\tif ( plural ) {\r\n\t\tresult[ getMethodName( kind, plural, 'get' ) ] = ( state, query ) =>\r\n\t\t\tselectors.getEntityRecords( state, kind, name, query );\r\n\t}\r\n\treturn result;\r\n}, {} );\r\n\r\nconst entityResolvers = entitiesConfig.reduce( ( result, entity ) => {\r\n\tconst { kind, name, plural } = entity;\r\n\tresult[ getMethodName( kind, name ) ] = ( key, query ) =>\r\n\t\tresolvers.getEntityRecord( kind, name, key, query );\r\n\r\n\tif ( plural ) {\r\n\t\tconst pluralMethodName = getMethodName( kind, plural, 'get' );\r\n\t\tresult[ pluralMethodName ] = ( ...args ) =>\r\n\t\t\tresolvers.getEntityRecords( kind, name, ...args );\r\n\t\tresult[ pluralMethodName ].shouldInvalidate = ( action ) =>\r\n\t\t\tresolvers.getEntityRecords.shouldInvalidate( action, kind, name );\r\n\t}\r\n\treturn result;\r\n}, {} );\r\n\r\nconst entityActions = entitiesConfig.reduce( ( result, entity ) => {\r\n\tconst { kind, name } = entity;\r\n\tresult[ getMethodName( kind, name, 'save' ) ] = ( record, options ) =>\r\n\t\tactions.saveEntityRecord( kind, name, record, options );\r\n\tresult[ getMethodName( kind, name, 'delete' ) ] = ( key, query, options ) =>\r\n\t\tactions.deleteEntityRecord( kind, name, key, query, options );\r\n\treturn result;\r\n}, {} );\r\n\r\nconst storeConfig = () => ( {\r\n\treducer,\r\n\tactions: { ...actions, ...entityActions, ...createLocksActions() },\r\n\tselectors: { ...selectors, ...entitySelectors },\r\n\tresolvers: { ...resolvers, ...entityResolvers },\r\n} );\r\n\r\n/**\r\n * Store definition for the code data namespace.\r\n *\r\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/data/README.md#createReduxStore\r\n */\r\nexport const store = createReduxStore( STORE_NAME, storeConfig() );\r\nunlock( store ).registerPrivateSelectors( privateSelectors );\r\nregister( store ); // Register store after unlocking private selectors to allow resolvers to use them.\r\n\r\nexport { default as EntityProvider } from './entity-provider';\r\nexport * from './entity-provider';\r\nexport * from './entity-types';\r\nexport * from './fetch';\r\nexport * from './hooks';\r\nexport * from './private-apis';\r\n"],"mappings":"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","ignoreList":[]}