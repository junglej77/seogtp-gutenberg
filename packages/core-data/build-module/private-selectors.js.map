{"version":3,"names":["createSelector","createRegistrySelector","STORE_NAME","getUndoManager","state","undoManager","getNavigationFallbackId","navigationFallbackId","getBlockPatternsForPostType","select","postType","getBlockPatterns","filter","postTypes","Array","isArray","includes","getEntityRecordsPermissions","kind","name","ids","normalizedIds","map","id","delete","canUser","update","userPermissions","getEntityRecordPermissions"],"sources":["@wordpress/core-data/src/private-selectors.ts"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { createSelector, createRegistrySelector } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport type { State } from './selectors';\r\nimport { STORE_NAME } from './name';\r\n\r\ntype EntityRecordKey = string | number;\r\n\r\n/**\r\n * Returns the previous edit from the current undo offset\r\n * for the entity records edits history, if any.\r\n *\r\n * @param state State tree.\r\n *\r\n * @return The undo manager.\r\n */\r\nexport function getUndoManager( state: State ) {\r\n\treturn state.undoManager;\r\n}\r\n\r\n/**\r\n * Retrieve the fallback Navigation.\r\n *\r\n * @param state Data state.\r\n * @return The ID for the fallback Navigation post.\r\n */\r\nexport function getNavigationFallbackId(\r\n\tstate: State\r\n): EntityRecordKey | undefined {\r\n\treturn state.navigationFallbackId;\r\n}\r\n\r\nexport const getBlockPatternsForPostType = createRegistrySelector(\r\n\t( select: any ) =>\r\n\t\tcreateSelector(\r\n\t\t\t( state, postType ) =>\r\n\t\t\t\tselect( STORE_NAME )\r\n\t\t\t\t\t.getBlockPatterns()\r\n\t\t\t\t\t.filter(\r\n\t\t\t\t\t\t( { postTypes } ) =>\r\n\t\t\t\t\t\t\t! postTypes ||\r\n\t\t\t\t\t\t\t( Array.isArray( postTypes ) &&\r\n\t\t\t\t\t\t\t\tpostTypes.includes( postType ) )\r\n\t\t\t\t\t),\r\n\t\t\t() => [ select( STORE_NAME ).getBlockPatterns() ]\r\n\t\t)\r\n);\r\n\r\n/**\r\n * Returns the entity records permissions for the given entity record ids.\r\n */\r\nexport const getEntityRecordsPermissions = createRegistrySelector( ( select ) =>\r\n\tcreateSelector(\r\n\t\t( state: State, kind: string, name: string, ids: string[] ) => {\r\n\t\t\tconst normalizedIds = Array.isArray( ids ) ? ids : [ ids ];\r\n\t\t\treturn normalizedIds.map( ( id ) => ( {\r\n\t\t\t\tdelete: select( STORE_NAME ).canUser( 'delete', {\r\n\t\t\t\t\tkind,\r\n\t\t\t\t\tname,\r\n\t\t\t\t\tid,\r\n\t\t\t\t} ),\r\n\t\t\t\tupdate: select( STORE_NAME ).canUser( 'update', {\r\n\t\t\t\t\tkind,\r\n\t\t\t\t\tname,\r\n\t\t\t\t\tid,\r\n\t\t\t\t} ),\r\n\t\t\t} ) );\r\n\t\t},\r\n\t\t( state ) => [ state.userPermissions ]\r\n\t)\r\n);\r\n\r\n/**\r\n * Returns the entity record permissions for the given entity record id.\r\n *\r\n * @param state Data state.\r\n * @param kind  Entity kind.\r\n * @param name  Entity name.\r\n * @param id    Entity record id.\r\n *\r\n * @return The entity record permissions.\r\n */\r\nexport function getEntityRecordPermissions(\r\n\tstate: State,\r\n\tkind: string,\r\n\tname: string,\r\n\tid: string\r\n) {\r\n\treturn getEntityRecordsPermissions( state, kind, name, id )[ 0 ];\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,cAAc,EAAEC,sBAAsB,QAAQ,iBAAiB;;AAExE;AACA;AACA;;AAEA,SAASC,UAAU,QAAQ,QAAQ;AAInC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,cAAcA,CAAEC,KAAY,EAAG;EAC9C,OAAOA,KAAK,CAACC,WAAW;AACzB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,uBAAuBA,CACtCF,KAAY,EACkB;EAC9B,OAAOA,KAAK,CAACG,oBAAoB;AAClC;AAEA,OAAO,MAAMC,2BAA2B,GAAGP,sBAAsB,CAC9DQ,MAAW,IACZT,cAAc,CACb,CAAEI,KAAK,EAAEM,QAAQ,KAChBD,MAAM,CAAEP,UAAW,CAAC,CAClBS,gBAAgB,CAAC,CAAC,CAClBC,MAAM,CACN,CAAE;EAAEC;AAAU,CAAC,KACd,CAAEA,SAAS,IACTC,KAAK,CAACC,OAAO,CAAEF,SAAU,CAAC,IAC3BA,SAAS,CAACG,QAAQ,CAAEN,QAAS,CAChC,CAAC,EACH,MAAM,CAAED,MAAM,CAAEP,UAAW,CAAC,CAACS,gBAAgB,CAAC,CAAC,CAChD,CACF,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAMM,2BAA2B,GAAGhB,sBAAsB,CAAIQ,MAAM,IAC1ET,cAAc,CACb,CAAEI,KAAY,EAAEc,IAAY,EAAEC,IAAY,EAAEC,GAAa,KAAM;EAC9D,MAAMC,aAAa,GAAGP,KAAK,CAACC,OAAO,CAAEK,GAAI,CAAC,GAAGA,GAAG,GAAG,CAAEA,GAAG,CAAE;EAC1D,OAAOC,aAAa,CAACC,GAAG,CAAIC,EAAE,KAAQ;IACrCC,MAAM,EAAEf,MAAM,CAAEP,UAAW,CAAC,CAACuB,OAAO,CAAE,QAAQ,EAAE;MAC/CP,IAAI;MACJC,IAAI;MACJI;IACD,CAAE,CAAC;IACHG,MAAM,EAAEjB,MAAM,CAAEP,UAAW,CAAC,CAACuB,OAAO,CAAE,QAAQ,EAAE;MAC/CP,IAAI;MACJC,IAAI;MACJI;IACD,CAAE;EACH,CAAC,CAAG,CAAC;AACN,CAAC,EACCnB,KAAK,IAAM,CAAEA,KAAK,CAACuB,eAAe,CACrC,CACD,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,0BAA0BA,CACzCxB,KAAY,EACZc,IAAY,EACZC,IAAY,EACZI,EAAU,EACT;EACD,OAAON,2BAA2B,CAAEb,KAAK,EAAEc,IAAI,EAAEC,IAAI,EAAEI,EAAG,CAAC,CAAE,CAAC,CAAE;AACjE","ignoreList":[]}