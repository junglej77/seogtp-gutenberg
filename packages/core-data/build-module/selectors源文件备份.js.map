{"version":3,"names":["createSelector","createRegistrySelector","addQueryArgs","deprecated","STORE_NAME","getQueriedItems","getQueriedTotalItems","getQueriedTotalPages","DEFAULT_ENTITY_KEY","getNormalizedCommaSeparable","isRawAttribute","setNestedValue","isNumericID","getUserPermissionCacheKey","EMPTY_OBJECT","isRequestingEmbedPreview","select","state","url","isResolving","getAuthors","query","since","alternative","path","getUserQueryResults","getCurrentUser","currentUser","queryID","_state$users$queries$","queryResults","users","queries","map","id","byId","getEntitiesByKind","kind","getEntitiesConfig","entities","config","filter","entity","getEntity","name","getEntityConfig","find","getEntityRecord","key","_query$context","queriedState","records","queriedData","undefined","context","itemIsComplete","items","item","_fields","_getNormalizedCommaSe","filteredItem","fields","f","length","field","split","value","forEach","fieldName","recordId","_query$context2","__unstableNormalizeArgs","args","newArgs","recordKey","Number","__experimentalGetEntityRecordNoResolver","getRawEntityRecord","record","Object","keys","reduce","accumulator","_key","_record$_key$raw","raw","_query$context3","hasEntityRecords","Array","isArray","getEntityRecords","getEntityRecordsTotalItems","getEntityRecordsTotalPages","per_page","totalItems","Math","ceil","__experimentalGetDirtyEntityRecords","dirtyRecords","primaryKeys","edits","primaryKey","hasEditsForEntityRecord","entityConfig","entityRecord","getEditedEntityRecord","push","title","getTitle","__experimentalGetEntitiesBeingSaved","recordsBeingSaved","saving","isSavingEntityRecord","getEntityRecordEdits","getEntityRecordNonTransientEdits","transientEdits","acc","edited","_query$context4","isAutosavingEntityRecord","_state$entities$recor","pending","isAutosave","Boolean","_state$entities$recor2","isDeletingEntityRecord","_state$entities$recor3","deleting","getLastEntitySaveError","error","getLastEntityDeleteError","getUndoEdit","getRedoEdit","hasUndo","undoManager","hasRedo","getCurrentTheme","currentTheme","__experimentalGetCurrentGlobalStylesId","currentGlobalStylesId","getThemeSupports","_getCurrentTheme$them","theme_supports","getEmbedPreview","embedPreviews","isPreviewEmbedFallback","preview","oEmbedLinkCheck","html","canUser","action","resource","isEntity","userPermissions","canUserEditEntityRecord","getAutosaves","postType","postId","autosaves","getAutosave","authorId","autosave","author","hasFetchedAutosaves","hasFinishedResolution","getReferenceByDistinctEdits","editsReference","__experimentalGetTemplateForLink","link","__experimentalGetCurrentThemeBaseGlobalStyles","themeBaseGlobalStyles","stylesheet","__experimentalGetCurrentThemeGlobalStylesVariations","themeGlobalStyleVariations","getBlockPatterns","blockPatterns","getBlockPatternCategories","blockPatternCategories","getUserPatternCategories","userPatternCategories","getCurrentThemeGlobalStylesRevisions","themeGlobalStyleRevisions","getDefaultTemplateId","defaultTemplates","JSON","stringify","getRevisions","queriedStateRevisions","revisions","getRevision","revisionKey","_query$context5","_getNormalizedCommaSe2","_query$context6"],"sources":["@wordpress/core-data/src/selectors源文件备份.ts"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { createSelector, createRegistrySelector } from '@wordpress/data';\r\nimport { addQueryArgs } from '@wordpress/url';\r\nimport deprecated from '@wordpress/deprecated';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { STORE_NAME } from './name';\r\nimport {\r\n\tgetQueriedItems,\r\n\tgetQueriedTotalItems,\r\n\tgetQueriedTotalPages,\r\n} from './queried-data';\r\nimport { DEFAULT_ENTITY_KEY } from './entities';\r\nimport {\r\n\tgetNormalizedCommaSeparable,\r\n\tisRawAttribute,\r\n\tsetNestedValue,\r\n\tisNumericID,\r\n\tgetUserPermissionCacheKey,\r\n} from './utils';\r\nimport type * as ET from './entity-types';\r\nimport type { UndoManager } from '@wordpress/undo-manager';\r\n\r\n// This is an incomplete, high-level approximation of the State type.\r\n// It makes the selectors slightly more safe, but is intended to evolve\r\n// into a more detailed representation over time.\r\n// See https://github.com/WordPress/gutenberg/pull/40025#discussion_r865410589 for more context.\r\nexport interface State {\r\n\tautosaves: Record< string | number, Array< unknown > >;\r\n\tblockPatterns: Array< unknown >;\r\n\tblockPatternCategories: Array< unknown >;\r\n\tcurrentGlobalStylesId: string;\r\n\tcurrentTheme: string;\r\n\tcurrentUser: ET.User< 'edit' >;\r\n\tembedPreviews: Record< string, { html: string } >;\r\n\tentities: EntitiesState;\r\n\tthemeBaseGlobalStyles: Record< string, Object >;\r\n\tthemeGlobalStyleVariations: Record< string, string >;\r\n\tthemeGlobalStyleRevisions: Record< number, Object >;\r\n\tundoManager: UndoManager;\r\n\tuserPermissions: Record< string, boolean >;\r\n\tusers: UserState;\r\n\tnavigationFallbackId: EntityRecordKey;\r\n\tuserPatternCategories: Array< UserPatternCategory >;\r\n\tdefaultTemplates: Record< string, string >;\r\n}\r\n\r\ntype EntityRecordKey = string | number;\r\n\r\ninterface EntitiesState {\r\n\tconfig: EntityConfig[];\r\n\trecords: Record< string, Record< string, EntityState< ET.EntityRecord > > >;\r\n}\r\n\r\ninterface QueriedData {\r\n\titems: Record< ET.Context, Record< number, ET.EntityRecord > >;\r\n\titemIsComplete: Record< ET.Context, Record< number, boolean > >;\r\n\tqueries: Record< ET.Context, Record< string, Array< number > > >;\r\n}\r\n\r\ntype RevisionRecord =\r\n\t| Record< ET.Context, Record< number, ET.PostRevision > >\r\n\t| Record< ET.Context, Record< number, ET.GlobalStylesRevision > >;\r\n\r\ninterface RevisionsQueriedData {\r\n\titems: RevisionRecord;\r\n\titemIsComplete: Record< ET.Context, Record< number, boolean > >;\r\n\tqueries: Record< ET.Context, Record< string, Array< number > > >;\r\n}\r\n\r\ninterface EntityState< EntityRecord extends ET.EntityRecord > {\r\n\tedits: Record< string, Partial< EntityRecord > >;\r\n\tsaving: Record<\r\n\t\tstring,\r\n\t\tPartial< { pending: boolean; isAutosave: boolean; error: Error } >\r\n\t>;\r\n\tdeleting: Record< string, Partial< { pending: boolean; error: Error } > >;\r\n\tqueriedData: QueriedData;\r\n\trevisions?: RevisionsQueriedData;\r\n}\r\n\r\ninterface EntityConfig {\r\n\tname: string;\r\n\tkind: string;\r\n}\r\n\r\ninterface UserState {\r\n\tqueries: Record< string, EntityRecordKey[] >;\r\n\tbyId: Record< EntityRecordKey, ET.User< 'edit' > >;\r\n}\r\n\r\ntype TemplateQuery = {\r\n\tslug?: string;\r\n\tis_custom?: boolean;\r\n\tignore_empty?: boolean;\r\n};\r\n\r\nexport interface UserPatternCategory {\r\n\tid: number;\r\n\tname: string;\r\n\tlabel: string;\r\n\tslug: string;\r\n\tdescription: string;\r\n}\r\n\r\ntype Optional< T > = T | undefined;\r\n\r\n/**\r\n * HTTP Query parameters sent with the API request to fetch the entity records.\r\n */\r\ntype GetRecordsHttpQuery = Record< string, any >;\r\n\r\n/**\r\n * Arguments for EntityRecord selectors.\r\n */\r\ntype EntityRecordArgs =\r\n\t| [ string, string, EntityRecordKey ]\r\n\t| [ string, string, EntityRecordKey, GetRecordsHttpQuery ];\r\n\r\ntype EntityResource = { kind: string; name: string; id?: EntityRecordKey };\r\n\r\n/**\r\n * Shared reference to an empty object for cases where it is important to avoid\r\n * returning a new object reference on every invocation, as in a connected or\r\n * other pure component which performs `shouldComponentUpdate` check on props.\r\n * This should be used as a last resort, since the normalized data should be\r\n * maintained by the reducer result in state.\r\n */\r\nconst EMPTY_OBJECT = {};\r\n\r\n/**\r\n * Returns true if a request is in progress for embed preview data, or false\r\n * otherwise.\r\n *\r\n * @param state Data state.\r\n * @param url   URL the preview would be for.\r\n *\r\n * @return Whether a request is in progress for an embed preview.\r\n */\r\nexport const isRequestingEmbedPreview = createRegistrySelector(\r\n\t( select: any ) =>\r\n\t\t( state: State, url: string ): boolean => {\r\n\t\t\treturn select( STORE_NAME ).isResolving( 'getEmbedPreview', [\r\n\t\t\t\turl,\r\n\t\t\t] );\r\n\t\t}\r\n);\r\n\r\n/**\r\n * Returns all available authors.\r\n *\r\n * @deprecated since 11.3. Callers should use `select( 'core' ).getUsers({ who: 'authors' })` instead.\r\n *\r\n * @param      state Data state.\r\n * @param      query Optional object of query parameters to\r\n *                   include with request. For valid query parameters see the [Users page](https://developer.wordpress.org/rest-api/reference/users/) in the REST API Handbook and see the arguments for [List Users](https://developer.wordpress.org/rest-api/reference/users/#list-users) and [Retrieve a User](https://developer.wordpress.org/rest-api/reference/users/#retrieve-a-user).\r\n * @return Authors list.\r\n */\r\nexport function getAuthors(\r\n\tstate: State,\r\n\tquery?: GetRecordsHttpQuery\r\n): ET.User[] {\r\n\tdeprecated( \"select( 'core' ).getAuthors()\", {\r\n\t\tsince: '5.9',\r\n\t\talternative: \"select( 'core' ).getUsers({ who: 'authors' })\",\r\n\t} );\r\n\r\n\tconst path = addQueryArgs(\r\n\t\t'/wp/v2/users/?who=authors&per_page=100',\r\n\t\tquery\r\n\t);\r\n\treturn getUserQueryResults( state, path );\r\n}\r\n\r\n/**\r\n * Returns the current user.\r\n *\r\n * @param state Data state.\r\n *\r\n * @return Current user object.\r\n */\r\nexport function getCurrentUser( state: State ): ET.User< 'edit' > {\r\n\treturn state.currentUser;\r\n}\r\n\r\n/**\r\n * Returns all the users returned by a query ID.\r\n *\r\n * @param state   Data state.\r\n * @param queryID Query ID.\r\n *\r\n * @return Users list.\r\n */\r\nexport const getUserQueryResults = createSelector(\r\n\t( state: State, queryID: string ): ET.User< 'edit' >[] => {\r\n\t\tconst queryResults = state.users.queries[ queryID ] ?? [];\r\n\r\n\t\treturn queryResults.map( ( id ) => state.users.byId[ id ] );\r\n\t},\r\n\t( state: State, queryID: string ) => [\r\n\t\tstate.users.queries[ queryID ],\r\n\t\tstate.users.byId,\r\n\t]\r\n);\r\n\r\n/**\r\n * Returns the loaded entities for the given kind.\r\n *\r\n * @deprecated since WordPress 6.0. Use getEntitiesConfig instead\r\n * @param      state Data state.\r\n * @param      kind  Entity kind.\r\n *\r\n * @return Array of entities with config matching kind.\r\n */\r\nexport function getEntitiesByKind( state: State, kind: string ): Array< any > {\r\n\tdeprecated( \"wp.data.select( 'core' ).getEntitiesByKind()\", {\r\n\t\tsince: '6.0',\r\n\t\talternative: \"wp.data.select( 'core' ).getEntitiesConfig()\",\r\n\t} );\r\n\treturn getEntitiesConfig( state, kind );\r\n}\r\n\r\n/**\r\n * Returns the loaded entities for the given kind.\r\n *\r\n * @param state Data state.\r\n * @param kind  Entity kind.\r\n *\r\n * @return Array of entities with config matching kind.\r\n */\r\nexport const getEntitiesConfig = createSelector(\r\n\t( state: State, kind: string ): Array< any > =>\r\n\t\tstate.entities.config.filter( ( entity ) => entity.kind === kind ),\r\n\t/* eslint-disable @typescript-eslint/no-unused-vars */\r\n\t( state: State, kind: string ) => state.entities.config\r\n\t/* eslint-enable @typescript-eslint/no-unused-vars */\r\n);\r\n/**\r\n * Returns the entity config given its kind and name.\r\n *\r\n * @deprecated since WordPress 6.0. Use getEntityConfig instead\r\n * @param      state Data state.\r\n * @param      kind  Entity kind.\r\n * @param      name  Entity name.\r\n *\r\n * @return Entity config\r\n */\r\nexport function getEntity( state: State, kind: string, name: string ): any {\r\n\tdeprecated( \"wp.data.select( 'core' ).getEntity()\", {\r\n\t\tsince: '6.0',\r\n\t\talternative: \"wp.data.select( 'core' ).getEntityConfig()\",\r\n\t} );\r\n\treturn getEntityConfig( state, kind, name );\r\n}\r\n\r\n/**\r\n * Returns the entity config given its kind and name.\r\n *\r\n * @param state Data state.\r\n * @param kind  Entity kind.\r\n * @param name  Entity name.\r\n *\r\n * @return Entity config\r\n */\r\nexport function getEntityConfig(\r\n\tstate: State,\r\n\tkind: string,\r\n\tname: string\r\n): any {\r\n\treturn state.entities.config?.find(\r\n\t\t( config ) => config.kind === kind && config.name === name\r\n\t);\r\n}\r\n\r\n/**\r\n * GetEntityRecord is declared as a *callable interface* with\r\n * two signatures to work around the fact that TypeScript doesn't\r\n * allow currying generic functions:\r\n *\r\n * ```ts\r\n * \t\ttype CurriedState = F extends ( state: any, ...args: infer P ) => infer R\r\n * \t\t\t? ( ...args: P ) => R\r\n * \t\t\t: F;\r\n * \t\ttype Selector = <K extends string | number>(\r\n *         state: any,\r\n *         kind: K,\r\n *         key: K extends string ? 'string value' : false\r\n *    ) => K;\r\n * \t\ttype BadlyInferredSignature = CurriedState< Selector >\r\n *    // BadlyInferredSignature evaluates to:\r\n *    // (kind: string number, key: false | \"string value\") => string number\r\n * ```\r\n *\r\n * The signature without the state parameter shipped as CurriedSignature\r\n * is used in the return value of `select( coreStore )`.\r\n *\r\n * See https://github.com/WordPress/gutenberg/pull/41578 for more details.\r\n */\r\nexport interface GetEntityRecord {\r\n\t<\r\n\t\tEntityRecord extends\r\n\t\t\t| ET.EntityRecord< any >\r\n\t\t\t| Partial< ET.EntityRecord< any > >,\r\n\t>(\r\n\t\tstate: State,\r\n\t\tkind: string,\r\n\t\tname: string,\r\n\t\tkey: EntityRecordKey,\r\n\t\tquery?: GetRecordsHttpQuery\r\n\t): EntityRecord | undefined;\r\n\r\n\tCurriedSignature: <\r\n\t\tEntityRecord extends\r\n\t\t\t| ET.EntityRecord< any >\r\n\t\t\t| Partial< ET.EntityRecord< any > >,\r\n\t>(\r\n\t\tkind: string,\r\n\t\tname: string,\r\n\t\tkey: EntityRecordKey,\r\n\t\tquery?: GetRecordsHttpQuery\r\n\t) => EntityRecord | undefined;\r\n\t__unstableNormalizeArgs?: ( args: EntityRecordArgs ) => EntityRecordArgs;\r\n}\r\n\r\n/**\r\n * Returns the Entity's record object by key. Returns `null` if the value is not\r\n * yet received, undefined if the value entity is known to not exist, or the\r\n * entity object if it exists and is received.\r\n *\r\n * @param state State tree\r\n * @param kind  Entity kind.\r\n * @param name  Entity name.\r\n * @param key   Record's key\r\n * @param query Optional query. If requesting specific\r\n *              fields, fields must always include the ID. For valid query parameters see the [Reference](https://developer.wordpress.org/rest-api/reference/) in the REST API Handbook and select the entity kind. Then see the arguments available \"Retrieve a [Entity kind]\".\r\n *\r\n * @return Record.\r\n */\r\nexport const getEntityRecord = createSelector(\r\n\t( <\r\n\t\tEntityRecord extends\r\n\t\t\t| ET.EntityRecord< any >\r\n\t\t\t| Partial< ET.EntityRecord< any > >,\r\n\t>(\r\n\t\tstate: State,\r\n\t\tkind: string,\r\n\t\tname: string,\r\n\t\tkey: EntityRecordKey,\r\n\t\tquery?: GetRecordsHttpQuery\r\n\t): EntityRecord | undefined => {\r\n\t\tconst queriedState =\r\n\t\t\tstate.entities.records?.[ kind ]?.[ name ]?.queriedData;\r\n\t\tif ( ! queriedState ) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tconst context = query?.context ?? 'default';\r\n\r\n\t\tif ( query === undefined ) {\r\n\t\t\t// If expecting a complete item, validate that completeness.\r\n\t\t\tif ( ! queriedState.itemIsComplete[ context ]?.[ key ] ) {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\r\n\t\t\treturn queriedState.items[ context ][ key ];\r\n\t\t}\r\n\r\n\t\tconst item = queriedState.items[ context ]?.[ key ];\r\n\t\tif ( item && query._fields ) {\r\n\t\t\tconst filteredItem = {};\r\n\t\t\tconst fields = getNormalizedCommaSeparable( query._fields ) ?? [];\r\n\t\t\tfor ( let f = 0; f < fields.length; f++ ) {\r\n\t\t\t\tconst field = fields[ f ].split( '.' );\r\n\t\t\t\tlet value = item;\r\n\t\t\t\tfield.forEach( ( fieldName ) => {\r\n\t\t\t\t\tvalue = value?.[ fieldName ];\r\n\t\t\t\t} );\r\n\t\t\t\tsetNestedValue( filteredItem, field, value );\r\n\t\t\t}\r\n\t\t\treturn filteredItem as EntityRecord;\r\n\t\t}\r\n\r\n\t\treturn item;\r\n\t} ) as GetEntityRecord,\r\n\t( state: State, kind, name, recordId, query ) => {\r\n\t\tconst context = query?.context ?? 'default';\r\n\t\treturn [\r\n\t\t\tstate.entities.records?.[ kind ]?.[ name ]?.queriedData?.items[\r\n\t\t\t\tcontext\r\n\t\t\t]?.[ recordId ],\r\n\t\t\tstate.entities.records?.[ kind ]?.[ name ]?.queriedData\r\n\t\t\t\t?.itemIsComplete[ context ]?.[ recordId ],\r\n\t\t];\r\n\t}\r\n) as GetEntityRecord;\r\n\r\n/**\r\n * Normalizes `recordKey`s that look like numeric IDs to numbers.\r\n *\r\n * @param args EntityRecordArgs the selector arguments.\r\n * @return EntityRecordArgs the normalized arguments.\r\n */\r\ngetEntityRecord.__unstableNormalizeArgs = (\r\n\targs: EntityRecordArgs\r\n): EntityRecordArgs => {\r\n\tconst newArgs = [ ...args ] as EntityRecordArgs;\r\n\tconst recordKey = newArgs?.[ 2 ];\r\n\r\n\t// If recordKey looks to be a numeric ID then coerce to number.\r\n\tnewArgs[ 2 ] = isNumericID( recordKey ) ? Number( recordKey ) : recordKey;\r\n\r\n\treturn newArgs;\r\n};\r\n\r\n/**\r\n * Returns the Entity's record object by key. Doesn't trigger a resolver nor requests the entity records from the API if the entity record isn't available in the local state.\r\n *\r\n * @param state State tree\r\n * @param kind  Entity kind.\r\n * @param name  Entity name.\r\n * @param key   Record's key\r\n *\r\n * @return Record.\r\n */\r\nexport function __experimentalGetEntityRecordNoResolver<\r\n\tEntityRecord extends ET.EntityRecord< any >,\r\n>( state: State, kind: string, name: string, key: EntityRecordKey ) {\r\n\treturn getEntityRecord< EntityRecord >( state, kind, name, key );\r\n}\r\n\r\n/**\r\n * Returns the entity's record object by key,\r\n * with its attributes mapped to their raw values.\r\n *\r\n * @param state State tree.\r\n * @param kind  Entity kind.\r\n * @param name  Entity name.\r\n * @param key   Record's key.\r\n *\r\n * @return Object with the entity's raw attributes.\r\n */\r\nexport const getRawEntityRecord = createSelector(\r\n\t< EntityRecord extends ET.EntityRecord< any > >(\r\n\t\tstate: State,\r\n\t\tkind: string,\r\n\t\tname: string,\r\n\t\tkey: EntityRecordKey\r\n\t): EntityRecord | undefined => {\r\n\t\tconst record = getEntityRecord< EntityRecord >(\r\n\t\t\tstate,\r\n\t\t\tkind,\r\n\t\t\tname,\r\n\t\t\tkey\r\n\t\t);\r\n\t\treturn (\r\n\t\t\trecord &&\r\n\t\t\tObject.keys( record ).reduce( ( accumulator, _key ) => {\r\n\t\t\t\tif (\r\n\t\t\t\t\tisRawAttribute( getEntityConfig( state, kind, name ), _key )\r\n\t\t\t\t) {\r\n\t\t\t\t\t// Because edits are the \"raw\" attribute values,\r\n\t\t\t\t\t// we return those from record selectors to make rendering,\r\n\t\t\t\t\t// comparisons, and joins with edits easier.\r\n\t\t\t\t\taccumulator[ _key ] = record[ _key ]?.raw ?? record[ _key ];\r\n\t\t\t\t} else {\r\n\t\t\t\t\taccumulator[ _key ] = record[ _key ];\r\n\t\t\t\t}\r\n\t\t\t\treturn accumulator;\r\n\t\t\t}, {} as any )\r\n\t\t);\r\n\t},\r\n\t(\r\n\t\tstate: State,\r\n\t\tkind: string,\r\n\t\tname: string,\r\n\t\trecordId: EntityRecordKey,\r\n\t\tquery?: GetRecordsHttpQuery\r\n\t) => {\r\n\t\tconst context = query?.context ?? 'default';\r\n\t\treturn [\r\n\t\t\tstate.entities.config,\r\n\t\t\tstate.entities.records?.[ kind ]?.[ name ]?.queriedData?.items[\r\n\t\t\t\tcontext\r\n\t\t\t]?.[ recordId ],\r\n\t\t\tstate.entities.records?.[ kind ]?.[ name ]?.queriedData\r\n\t\t\t\t?.itemIsComplete[ context ]?.[ recordId ],\r\n\t\t];\r\n\t}\r\n);\r\n\r\n/**\r\n * Returns true if records have been received for the given set of parameters,\r\n * or false otherwise.\r\n *\r\n * @param state State tree\r\n * @param kind  Entity kind.\r\n * @param name  Entity name.\r\n * @param query Optional terms query. For valid query parameters see the [Reference](https://developer.wordpress.org/rest-api/reference/) in the REST API Handbook and select the entity kind. Then see the arguments available for \"List [Entity kind]s\".\r\n *\r\n * @return  Whether entity records have been received.\r\n */\r\nexport function hasEntityRecords(\r\n\tstate: State,\r\n\tkind: string,\r\n\tname: string,\r\n\tquery?: GetRecordsHttpQuery\r\n): boolean {\r\n\treturn Array.isArray( getEntityRecords( state, kind, name, query ) );\r\n}\r\n\r\n/**\r\n * GetEntityRecord is declared as a *callable interface* with\r\n * two signatures to work around the fact that TypeScript doesn't\r\n * allow currying generic functions.\r\n *\r\n * @see GetEntityRecord\r\n * @see https://github.com/WordPress/gutenberg/pull/41578\r\n */\r\nexport interface GetEntityRecords {\r\n\t<\r\n\t\tEntityRecord extends\r\n\t\t\t| ET.EntityRecord< any >\r\n\t\t\t| Partial< ET.EntityRecord< any > >,\r\n\t>(\r\n\t\tstate: State,\r\n\t\tkind: string,\r\n\t\tname: string,\r\n\t\tquery?: GetRecordsHttpQuery\r\n\t): EntityRecord[] | null;\r\n\r\n\tCurriedSignature: <\r\n\t\tEntityRecord extends\r\n\t\t\t| ET.EntityRecord< any >\r\n\t\t\t| Partial< ET.EntityRecord< any > >,\r\n\t>(\r\n\t\tkind: string,\r\n\t\tname: string,\r\n\t\tquery?: GetRecordsHttpQuery\r\n\t) => EntityRecord[] | null;\r\n}\r\n\r\n/**\r\n * Returns the Entity's records.\r\n *\r\n * @param state State tree\r\n * @param kind  Entity kind.\r\n * @param name  Entity name.\r\n * @param query Optional terms query. If requesting specific\r\n *              fields, fields must always include the ID. For valid query parameters see the [Reference](https://developer.wordpress.org/rest-api/reference/) in the REST API Handbook and select the entity kind. Then see the arguments available for \"List [Entity kind]s\".\r\n *\r\n * @return Records.\r\n */\r\nexport const getEntityRecords = ( <\r\n\tEntityRecord extends\r\n\t\t| ET.EntityRecord< any >\r\n\t\t| Partial< ET.EntityRecord< any > >,\r\n>(\r\n\tstate: State,\r\n\tkind: string,\r\n\tname: string,\r\n\tquery: GetRecordsHttpQuery\r\n): EntityRecord[] | null => {\r\n\t// Queried data state is prepopulated for all known entities. If this is not\r\n\t// assigned for the given parameters, then it is known to not exist.\r\n\tconst queriedState =\r\n\t\tstate.entities.records?.[ kind ]?.[ name ]?.queriedData;\r\n\tif ( ! queriedState ) {\r\n\t\treturn null;\r\n\t}\r\n\treturn getQueriedItems( queriedState, query );\r\n} ) as GetEntityRecords;\r\n\r\n/**\r\n * Returns the Entity's total available records for a given query (ignoring pagination).\r\n *\r\n * @param state State tree\r\n * @param kind  Entity kind.\r\n * @param name  Entity name.\r\n * @param query Optional terms query. If requesting specific\r\n *              fields, fields must always include the ID. For valid query parameters see the [Reference](https://developer.wordpress.org/rest-api/reference/) in the REST API Handbook and select the entity kind. Then see the arguments available for \"List [Entity kind]s\".\r\n *\r\n * @return number | null.\r\n */\r\nexport const getEntityRecordsTotalItems = (\r\n\tstate: State,\r\n\tkind: string,\r\n\tname: string,\r\n\tquery: GetRecordsHttpQuery\r\n): number | null => {\r\n\t// Queried data state is prepopulated for all known entities. If this is not\r\n\t// assigned for the given parameters, then it is known to not exist.\r\n\tconst queriedState =\r\n\t\tstate.entities.records?.[ kind ]?.[ name ]?.queriedData;\r\n\tif ( ! queriedState ) {\r\n\t\treturn null;\r\n\t}\r\n\treturn getQueriedTotalItems( queriedState, query );\r\n};\r\n\r\n/**\r\n * Returns the number of available pages for the given query.\r\n *\r\n * @param state State tree\r\n * @param kind  Entity kind.\r\n * @param name  Entity name.\r\n * @param query Optional terms query. If requesting specific\r\n *              fields, fields must always include the ID. For valid query parameters see the [Reference](https://developer.wordpress.org/rest-api/reference/) in the REST API Handbook and select the entity kind. Then see the arguments available for \"List [Entity kind]s\".\r\n *\r\n * @return number | null.\r\n */\r\nexport const getEntityRecordsTotalPages = (\r\n\tstate: State,\r\n\tkind: string,\r\n\tname: string,\r\n\tquery: GetRecordsHttpQuery\r\n): number | null => {\r\n\t// Queried data state is prepopulated for all known entities. If this is not\r\n\t// assigned for the given parameters, then it is known to not exist.\r\n\tconst queriedState =\r\n\t\tstate.entities.records?.[ kind ]?.[ name ]?.queriedData;\r\n\tif ( ! queriedState ) {\r\n\t\treturn null;\r\n\t}\r\n\tif ( query.per_page === -1 ) {\r\n\t\treturn 1;\r\n\t}\r\n\tconst totalItems = getQueriedTotalItems( queriedState, query );\r\n\tif ( ! totalItems ) {\r\n\t\treturn totalItems;\r\n\t}\r\n\t// If `per_page` is not set and the query relies on the defaults of the\r\n\t// REST endpoint, get the info from query's meta.\r\n\tif ( ! query.per_page ) {\r\n\t\treturn getQueriedTotalPages( queriedState, query );\r\n\t}\r\n\treturn Math.ceil( totalItems / query.per_page );\r\n};\r\n\r\ntype DirtyEntityRecord = {\r\n\ttitle: string;\r\n\tkey: EntityRecordKey;\r\n\tname: string;\r\n\tkind: string;\r\n};\r\n/**\r\n * Returns the list of dirty entity records.\r\n *\r\n * @param state State tree.\r\n *\r\n * @return The list of updated records\r\n */\r\nexport const __experimentalGetDirtyEntityRecords = createSelector(\r\n\t( state: State ): Array< DirtyEntityRecord > => {\r\n\t\tconst {\r\n\t\t\tentities: { records },\r\n\t\t} = state;\r\n\t\tconst dirtyRecords: DirtyEntityRecord[] = [];\r\n\t\tObject.keys( records ).forEach( ( kind ) => {\r\n\t\t\tObject.keys( records[ kind ] ).forEach( ( name ) => {\r\n\t\t\t\tconst primaryKeys = (\r\n\t\t\t\t\tObject.keys( records[ kind ][ name ].edits ) as string[]\r\n\t\t\t\t ).filter(\r\n\t\t\t\t\t( primaryKey ) =>\r\n\t\t\t\t\t\t// The entity record must exist (not be deleted),\r\n\t\t\t\t\t\t// and it must have edits.\r\n\t\t\t\t\t\tgetEntityRecord( state, kind, name, primaryKey ) &&\r\n\t\t\t\t\t\thasEditsForEntityRecord( state, kind, name, primaryKey )\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif ( primaryKeys.length ) {\r\n\t\t\t\t\tconst entityConfig = getEntityConfig( state, kind, name );\r\n\t\t\t\t\tprimaryKeys.forEach( ( primaryKey ) => {\r\n\t\t\t\t\t\tconst entityRecord = getEditedEntityRecord(\r\n\t\t\t\t\t\t\tstate,\r\n\t\t\t\t\t\t\tkind,\r\n\t\t\t\t\t\t\tname,\r\n\t\t\t\t\t\t\tprimaryKey\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tdirtyRecords.push( {\r\n\t\t\t\t\t\t\t// We avoid using primaryKey because it's transformed into a string\r\n\t\t\t\t\t\t\t// when it's used as an object key.\r\n\t\t\t\t\t\t\tkey: entityRecord\r\n\t\t\t\t\t\t\t\t? entityRecord[\r\n\t\t\t\t\t\t\t\t\t\tentityConfig.key || DEFAULT_ENTITY_KEY\r\n\t\t\t\t\t\t\t\t  ]\r\n\t\t\t\t\t\t\t\t: undefined,\r\n\t\t\t\t\t\t\ttitle:\r\n\t\t\t\t\t\t\t\tentityConfig?.getTitle?.( entityRecord ) || '',\r\n\t\t\t\t\t\t\tname,\r\n\t\t\t\t\t\t\tkind,\r\n\t\t\t\t\t\t} );\r\n\t\t\t\t\t} );\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t} );\r\n\r\n\t\treturn dirtyRecords;\r\n\t},\r\n\t( state ) => [ state.entities.records ]\r\n);\r\n\r\n/**\r\n * Returns the list of entities currently being saved.\r\n *\r\n * @param state State tree.\r\n *\r\n * @return The list of records being saved.\r\n */\r\nexport const __experimentalGetEntitiesBeingSaved = createSelector(\r\n\t( state: State ): Array< DirtyEntityRecord > => {\r\n\t\tconst {\r\n\t\t\tentities: { records },\r\n\t\t} = state;\r\n\t\tconst recordsBeingSaved: DirtyEntityRecord[] = [];\r\n\t\tObject.keys( records ).forEach( ( kind ) => {\r\n\t\t\tObject.keys( records[ kind ] ).forEach( ( name ) => {\r\n\t\t\t\tconst primaryKeys = (\r\n\t\t\t\t\tObject.keys( records[ kind ][ name ].saving ) as string[]\r\n\t\t\t\t ).filter( ( primaryKey ) =>\r\n\t\t\t\t\tisSavingEntityRecord( state, kind, name, primaryKey )\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif ( primaryKeys.length ) {\r\n\t\t\t\t\tconst entityConfig = getEntityConfig( state, kind, name );\r\n\t\t\t\t\tprimaryKeys.forEach( ( primaryKey ) => {\r\n\t\t\t\t\t\tconst entityRecord = getEditedEntityRecord(\r\n\t\t\t\t\t\t\tstate,\r\n\t\t\t\t\t\t\tkind,\r\n\t\t\t\t\t\t\tname,\r\n\t\t\t\t\t\t\tprimaryKey\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\trecordsBeingSaved.push( {\r\n\t\t\t\t\t\t\t// We avoid using primaryKey because it's transformed into a string\r\n\t\t\t\t\t\t\t// when it's used as an object key.\r\n\t\t\t\t\t\t\tkey: entityRecord\r\n\t\t\t\t\t\t\t\t? entityRecord[\r\n\t\t\t\t\t\t\t\t\t\tentityConfig.key || DEFAULT_ENTITY_KEY\r\n\t\t\t\t\t\t\t\t  ]\r\n\t\t\t\t\t\t\t\t: undefined,\r\n\t\t\t\t\t\t\ttitle:\r\n\t\t\t\t\t\t\t\tentityConfig?.getTitle?.( entityRecord ) || '',\r\n\t\t\t\t\t\t\tname,\r\n\t\t\t\t\t\t\tkind,\r\n\t\t\t\t\t\t} );\r\n\t\t\t\t\t} );\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t} );\r\n\t\treturn recordsBeingSaved;\r\n\t},\r\n\t( state ) => [ state.entities.records ]\r\n);\r\n\r\n/**\r\n * Returns the specified entity record's edits.\r\n *\r\n * @param state    State tree.\r\n * @param kind     Entity kind.\r\n * @param name     Entity name.\r\n * @param recordId Record ID.\r\n *\r\n * @return The entity record's edits.\r\n */\r\nexport function getEntityRecordEdits(\r\n\tstate: State,\r\n\tkind: string,\r\n\tname: string,\r\n\trecordId: EntityRecordKey\r\n): Optional< any > {\r\n\treturn state.entities.records?.[ kind ]?.[ name ]?.edits?.[\r\n\t\trecordId as string | number\r\n\t];\r\n}\r\n\r\n/**\r\n * Returns the specified entity record's non transient edits.\r\n *\r\n * Transient edits don't create an undo level, and\r\n * are not considered for change detection.\r\n * They are defined in the entity's config.\r\n *\r\n * @param state    State tree.\r\n * @param kind     Entity kind.\r\n * @param name     Entity name.\r\n * @param recordId Record ID.\r\n *\r\n * @return The entity record's non transient edits.\r\n */\r\nexport const getEntityRecordNonTransientEdits = createSelector(\r\n\t(\r\n\t\tstate: State,\r\n\t\tkind: string,\r\n\t\tname: string,\r\n\t\trecordId: EntityRecordKey\r\n\t): Optional< any > => {\r\n\t\tconst { transientEdits } = getEntityConfig( state, kind, name ) || {};\r\n\t\tconst edits = getEntityRecordEdits( state, kind, name, recordId ) || {};\r\n\t\tif ( ! transientEdits ) {\r\n\t\t\treturn edits;\r\n\t\t}\r\n\t\treturn Object.keys( edits ).reduce( ( acc, key ) => {\r\n\t\t\tif ( ! transientEdits[ key ] ) {\r\n\t\t\t\tacc[ key ] = edits[ key ];\r\n\t\t\t}\r\n\t\t\treturn acc;\r\n\t\t}, {} );\r\n\t},\r\n\t( state: State, kind: string, name: string, recordId: EntityRecordKey ) => [\r\n\t\tstate.entities.config,\r\n\t\tstate.entities.records?.[ kind ]?.[ name ]?.edits?.[ recordId ],\r\n\t]\r\n);\r\n\r\n/**\r\n * Returns true if the specified entity record has edits,\r\n * and false otherwise.\r\n *\r\n * @param state    State tree.\r\n * @param kind     Entity kind.\r\n * @param name     Entity name.\r\n * @param recordId Record ID.\r\n *\r\n * @return Whether the entity record has edits or not.\r\n */\r\nexport function hasEditsForEntityRecord(\r\n\tstate: State,\r\n\tkind: string,\r\n\tname: string,\r\n\trecordId: EntityRecordKey\r\n): boolean {\r\n\treturn (\r\n\t\tisSavingEntityRecord( state, kind, name, recordId ) ||\r\n\t\tObject.keys(\r\n\t\t\tgetEntityRecordNonTransientEdits( state, kind, name, recordId )\r\n\t\t).length > 0\r\n\t);\r\n}\r\n\r\n/**\r\n * Returns the specified entity record, merged with its edits.\r\n *\r\n * @param state    State tree.\r\n * @param kind     Entity kind.\r\n * @param name     Entity name.\r\n * @param recordId Record ID.\r\n *\r\n * @return The entity record, merged with its edits.\r\n */\r\nexport const getEditedEntityRecord = createSelector(\r\n\t< EntityRecord extends ET.EntityRecord< any > >(\r\n\t\tstate: State,\r\n\t\tkind: string,\r\n\t\tname: string,\r\n\t\trecordId: EntityRecordKey\r\n\t): ET.Updatable< EntityRecord > | false => {\r\n\t\tconst raw = getRawEntityRecord( state, kind, name, recordId );\r\n\t\tconst edited = getEntityRecordEdits( state, kind, name, recordId );\r\n\t\t// Never return a non-falsy empty object. Unfortunately we can't return\r\n\t\t// undefined or null because we were previously returning an empty\r\n\t\t// object, so trying to read properties from the result would throw.\r\n\t\t// Using false here is a workaround to avoid breaking changes.\r\n\t\tif ( ! raw && ! edited ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn {\r\n\t\t\t...raw,\r\n\t\t\t...edited,\r\n\t\t};\r\n\t},\r\n\t(\r\n\t\tstate: State,\r\n\t\tkind: string,\r\n\t\tname: string,\r\n\t\trecordId: EntityRecordKey,\r\n\t\tquery?: GetRecordsHttpQuery\r\n\t) => {\r\n\t\tconst context = query?.context ?? 'default';\r\n\t\treturn [\r\n\t\t\tstate.entities.config,\r\n\t\t\tstate.entities.records?.[ kind ]?.[ name ]?.queriedData.items[\r\n\t\t\t\tcontext\r\n\t\t\t]?.[ recordId ],\r\n\t\t\tstate.entities.records?.[ kind ]?.[ name ]?.queriedData\r\n\t\t\t\t.itemIsComplete[ context ]?.[ recordId ],\r\n\t\t\tstate.entities.records?.[ kind ]?.[ name ]?.edits?.[ recordId ],\r\n\t\t];\r\n\t}\r\n);\r\n\r\n/**\r\n * Returns true if the specified entity record is autosaving, and false otherwise.\r\n *\r\n * @param state    State tree.\r\n * @param kind     Entity kind.\r\n * @param name     Entity name.\r\n * @param recordId Record ID.\r\n *\r\n * @return Whether the entity record is autosaving or not.\r\n */\r\nexport function isAutosavingEntityRecord(\r\n\tstate: State,\r\n\tkind: string,\r\n\tname: string,\r\n\trecordId: EntityRecordKey\r\n): boolean {\r\n\tconst { pending, isAutosave } =\r\n\t\tstate.entities.records?.[ kind ]?.[ name ]?.saving?.[ recordId ] ?? {};\r\n\treturn Boolean( pending && isAutosave );\r\n}\r\n\r\n/**\r\n * Returns true if the specified entity record is saving, and false otherwise.\r\n *\r\n * @param state    State tree.\r\n * @param kind     Entity kind.\r\n * @param name     Entity name.\r\n * @param recordId Record ID.\r\n *\r\n * @return Whether the entity record is saving or not.\r\n */\r\nexport function isSavingEntityRecord(\r\n\tstate: State,\r\n\tkind: string,\r\n\tname: string,\r\n\trecordId: EntityRecordKey\r\n): boolean {\r\n\treturn (\r\n\t\tstate.entities.records?.[ kind ]?.[ name ]?.saving?.[\r\n\t\t\trecordId as EntityRecordKey\r\n\t\t]?.pending ?? false\r\n\t);\r\n}\r\n\r\n/**\r\n * Returns true if the specified entity record is deleting, and false otherwise.\r\n *\r\n * @param state    State tree.\r\n * @param kind     Entity kind.\r\n * @param name     Entity name.\r\n * @param recordId Record ID.\r\n *\r\n * @return Whether the entity record is deleting or not.\r\n */\r\nexport function isDeletingEntityRecord(\r\n\tstate: State,\r\n\tkind: string,\r\n\tname: string,\r\n\trecordId: EntityRecordKey\r\n): boolean {\r\n\treturn (\r\n\t\tstate.entities.records?.[ kind ]?.[ name ]?.deleting?.[\r\n\t\t\trecordId as EntityRecordKey\r\n\t\t]?.pending ?? false\r\n\t);\r\n}\r\n\r\n/**\r\n * Returns the specified entity record's last save error.\r\n *\r\n * @param state    State tree.\r\n * @param kind     Entity kind.\r\n * @param name     Entity name.\r\n * @param recordId Record ID.\r\n *\r\n * @return The entity record's save error.\r\n */\r\nexport function getLastEntitySaveError(\r\n\tstate: State,\r\n\tkind: string,\r\n\tname: string,\r\n\trecordId: EntityRecordKey\r\n): any {\r\n\treturn state.entities.records?.[ kind ]?.[ name ]?.saving?.[ recordId ]\r\n\t\t?.error;\r\n}\r\n\r\n/**\r\n * Returns the specified entity record's last delete error.\r\n *\r\n * @param state    State tree.\r\n * @param kind     Entity kind.\r\n * @param name     Entity name.\r\n * @param recordId Record ID.\r\n *\r\n * @return The entity record's save error.\r\n */\r\nexport function getLastEntityDeleteError(\r\n\tstate: State,\r\n\tkind: string,\r\n\tname: string,\r\n\trecordId: EntityRecordKey\r\n): any {\r\n\treturn state.entities.records?.[ kind ]?.[ name ]?.deleting?.[ recordId ]\r\n\t\t?.error;\r\n}\r\n\r\n/* eslint-disable @typescript-eslint/no-unused-vars */\r\n/**\r\n * Returns the previous edit from the current undo offset\r\n * for the entity records edits history, if any.\r\n *\r\n * @deprecated since 6.3\r\n *\r\n * @param      state State tree.\r\n *\r\n * @return The edit.\r\n */\r\nexport function getUndoEdit( state: State ): Optional< any > {\r\n\tdeprecated( \"select( 'core' ).getUndoEdit()\", {\r\n\t\tsince: '6.3',\r\n\t} );\r\n\treturn undefined;\r\n}\r\n/* eslint-enable @typescript-eslint/no-unused-vars */\r\n\r\n/* eslint-disable @typescript-eslint/no-unused-vars */\r\n/**\r\n * Returns the next edit from the current undo offset\r\n * for the entity records edits history, if any.\r\n *\r\n * @deprecated since 6.3\r\n *\r\n * @param      state State tree.\r\n *\r\n * @return The edit.\r\n */\r\nexport function getRedoEdit( state: State ): Optional< any > {\r\n\tdeprecated( \"select( 'core' ).getRedoEdit()\", {\r\n\t\tsince: '6.3',\r\n\t} );\r\n\treturn undefined;\r\n}\r\n/* eslint-enable @typescript-eslint/no-unused-vars */\r\n\r\n/**\r\n * Returns true if there is a previous edit from the current undo offset\r\n * for the entity records edits history, and false otherwise.\r\n *\r\n * @param state State tree.\r\n *\r\n * @return Whether there is a previous edit or not.\r\n */\r\nexport function hasUndo( state: State ): boolean {\r\n\treturn state.undoManager.hasUndo();\r\n}\r\n\r\n/**\r\n * Returns true if there is a next edit from the current undo offset\r\n * for the entity records edits history, and false otherwise.\r\n *\r\n * @param state State tree.\r\n *\r\n * @return Whether there is a next edit or not.\r\n */\r\nexport function hasRedo( state: State ): boolean {\r\n\treturn state.undoManager.hasRedo();\r\n}\r\n\r\n/**\r\n * Return the current theme.\r\n *\r\n * @param state Data state.\r\n *\r\n * @return The current theme.\r\n */\r\nexport function getCurrentTheme( state: State ): any {\r\n\tif ( ! state.currentTheme ) {\r\n\t\treturn null;\r\n\t}\r\n\treturn getEntityRecord( state, 'root', 'theme', state.currentTheme );\r\n}\r\n\r\n/**\r\n * Return the ID of the current global styles object.\r\n *\r\n * @param state Data state.\r\n *\r\n * @return The current global styles ID.\r\n */\r\nexport function __experimentalGetCurrentGlobalStylesId( state: State ): string {\r\n\treturn state.currentGlobalStylesId;\r\n}\r\n\r\n/**\r\n * Return theme supports data in the index.\r\n *\r\n * @param state Data state.\r\n *\r\n * @return Index data.\r\n */\r\nexport function getThemeSupports( state: State ): any {\r\n\treturn getCurrentTheme( state )?.theme_supports ?? EMPTY_OBJECT;\r\n}\r\n\r\n/**\r\n * Returns the embed preview for the given URL.\r\n *\r\n * @param state Data state.\r\n * @param url   Embedded URL.\r\n *\r\n * @return Undefined if the preview has not been fetched, otherwise, the preview fetched from the embed preview API.\r\n */\r\nexport function getEmbedPreview( state: State, url: string ): any {\r\n\treturn state.embedPreviews[ url ];\r\n}\r\n\r\n/**\r\n * Determines if the returned preview is an oEmbed link fallback.\r\n *\r\n * WordPress can be configured to return a simple link to a URL if it is not embeddable.\r\n * We need to be able to determine if a URL is embeddable or not, based on what we\r\n * get back from the oEmbed preview API.\r\n *\r\n * @param state Data state.\r\n * @param url   Embedded URL.\r\n *\r\n * @return Is the preview for the URL an oEmbed link fallback.\r\n */\r\nexport function isPreviewEmbedFallback( state: State, url: string ): boolean {\r\n\tconst preview = state.embedPreviews[ url ];\r\n\tconst oEmbedLinkCheck = '<a href=\"' + url + '\">' + url + '</a>';\r\n\tif ( ! preview ) {\r\n\t\treturn false;\r\n\t}\r\n\treturn preview.html === oEmbedLinkCheck;\r\n}\r\n\r\n/**\r\n * Returns whether the current user can perform the given action on the given\r\n * REST resource.\r\n *\r\n * Calling this may trigger an OPTIONS request to the REST API via the\r\n * `canUser()` resolver.\r\n *\r\n * https://developer.wordpress.org/rest-api/reference/\r\n *\r\n * @param state    Data state.\r\n * @param action   Action to check. One of: 'create', 'read', 'update', 'delete'.\r\n * @param resource Entity resource to check. Accepts entity object `{ kind: 'root', name: 'media', id: 1 }`\r\n *                 or REST base as a string - `media`.\r\n * @param id       Optional ID of the rest resource to check.\r\n *\r\n * @return Whether or not the user can perform the action,\r\n *                             or `undefined` if the OPTIONS request is still being made.\r\n */\r\nexport function canUser(\r\n\tstate: State,\r\n\taction: string,\r\n\tresource: string | EntityResource,\r\n\tid?: EntityRecordKey\r\n): boolean | undefined {\r\n\tconst isEntity = typeof resource === 'object';\r\n\tif ( isEntity && ( ! resource.kind || ! resource.name ) ) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tconst key = getUserPermissionCacheKey( action, resource, id );\r\n\r\n\treturn state.userPermissions[ key ];\r\n}\r\n\r\n/**\r\n * Returns whether the current user can edit the given entity.\r\n *\r\n * Calling this may trigger an OPTIONS request to the REST API via the\r\n * `canUser()` resolver.\r\n *\r\n * https://developer.wordpress.org/rest-api/reference/\r\n *\r\n * @param state    Data state.\r\n * @param kind     Entity kind.\r\n * @param name     Entity name.\r\n * @param recordId Record's id.\r\n * @return Whether or not the user can edit,\r\n * or `undefined` if the OPTIONS request is still being made.\r\n */\r\nexport function canUserEditEntityRecord(\r\n\tstate: State,\r\n\tkind: string,\r\n\tname: string,\r\n\trecordId: EntityRecordKey\r\n): boolean | undefined {\r\n\tdeprecated( `wp.data.select( 'core' ).canUserEditEntityRecord()`, {\r\n\t\tsince: '6.7',\r\n\t\talternative: `wp.data.select( 'core' ).canUser( 'update', { kind, name, id } )`,\r\n\t} );\r\n\r\n\treturn canUser( state, 'update', { kind, name, id: recordId } );\r\n}\r\n\r\n/**\r\n * Returns the latest autosaves for the post.\r\n *\r\n * May return multiple autosaves since the backend stores one autosave per\r\n * author for each post.\r\n *\r\n * @param state    State tree.\r\n * @param postType The type of the parent post.\r\n * @param postId   The id of the parent post.\r\n *\r\n * @return An array of autosaves for the post, or undefined if there is none.\r\n */\r\nexport function getAutosaves(\r\n\tstate: State,\r\n\tpostType: string,\r\n\tpostId: EntityRecordKey\r\n): Array< any > | undefined {\r\n\treturn state.autosaves[ postId ];\r\n}\r\n\r\n/**\r\n * Returns the autosave for the post and author.\r\n *\r\n * @param state    State tree.\r\n * @param postType The type of the parent post.\r\n * @param postId   The id of the parent post.\r\n * @param authorId The id of the author.\r\n *\r\n * @return The autosave for the post and author.\r\n */\r\nexport function getAutosave< EntityRecord extends ET.EntityRecord< any > >(\r\n\tstate: State,\r\n\tpostType: string,\r\n\tpostId: EntityRecordKey,\r\n\tauthorId: EntityRecordKey\r\n): EntityRecord | undefined {\r\n\tif ( authorId === undefined ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst autosaves = state.autosaves[ postId ];\r\n\r\n\treturn autosaves?.find(\r\n\t\t( autosave: any ) => autosave.author === authorId\r\n\t) as EntityRecord | undefined;\r\n}\r\n\r\n/**\r\n * Returns true if the REST request for autosaves has completed.\r\n *\r\n * @param state    State tree.\r\n * @param postType The type of the parent post.\r\n * @param postId   The id of the parent post.\r\n *\r\n * @return True if the REST request was completed. False otherwise.\r\n */\r\nexport const hasFetchedAutosaves = createRegistrySelector(\r\n\t( select ) =>\r\n\t\t(\r\n\t\t\tstate: State,\r\n\t\t\tpostType: string,\r\n\t\t\tpostId: EntityRecordKey\r\n\t\t): boolean => {\r\n\t\t\treturn select( STORE_NAME ).hasFinishedResolution( 'getAutosaves', [\r\n\t\t\t\tpostType,\r\n\t\t\t\tpostId,\r\n\t\t\t] );\r\n\t\t}\r\n);\r\n\r\n/**\r\n * Returns a new reference when edited values have changed. This is useful in\r\n * inferring where an edit has been made between states by comparison of the\r\n * return values using strict equality.\r\n *\r\n * @example\r\n *\r\n * ```\r\n * const hasEditOccurred = (\r\n *    getReferenceByDistinctEdits( beforeState ) !==\r\n *    getReferenceByDistinctEdits( afterState )\r\n * );\r\n * ```\r\n *\r\n * @param state Editor state.\r\n *\r\n * @return A value whose reference will change only when an edit occurs.\r\n */\r\nexport function getReferenceByDistinctEdits( state ) {\r\n\treturn state.editsReference;\r\n}\r\n\r\n/**\r\n * Retrieve the frontend template used for a given link.\r\n *\r\n * @param state Editor state.\r\n * @param link  Link.\r\n *\r\n * @return The template record.\r\n */\r\nexport function __experimentalGetTemplateForLink(\r\n\tstate: State,\r\n\tlink: string\r\n): Optional< ET.Updatable< ET.WpTemplate > > | null | false {\r\n\tconst records = getEntityRecords< ET.WpTemplate >(\r\n\t\tstate,\r\n\t\t'postType',\r\n\t\t'wp_template',\r\n\t\t{\r\n\t\t\t'find-template': link,\r\n\t\t}\r\n\t);\r\n\r\n\tif ( records?.length ) {\r\n\t\treturn getEditedEntityRecord< ET.WpTemplate >(\r\n\t\t\tstate,\r\n\t\t\t'postType',\r\n\t\t\t'wp_template',\r\n\t\t\trecords[ 0 ].id\r\n\t\t);\r\n\t}\r\n\treturn null;\r\n}\r\n\r\n/**\r\n * Retrieve the current theme's base global styles\r\n *\r\n * @param state Editor state.\r\n *\r\n * @return The Global Styles object.\r\n */\r\nexport function __experimentalGetCurrentThemeBaseGlobalStyles(\r\n\tstate: State\r\n): any {\r\n\tconst currentTheme = getCurrentTheme( state );\r\n\tif ( ! currentTheme ) {\r\n\t\treturn null;\r\n\t}\r\n\treturn state.themeBaseGlobalStyles[ currentTheme.stylesheet ];\r\n}\r\n\r\n/**\r\n * Return the ID of the current global styles object.\r\n *\r\n * @param state Data state.\r\n *\r\n * @return The current global styles ID.\r\n */\r\nexport function __experimentalGetCurrentThemeGlobalStylesVariations(\r\n\tstate: State\r\n): string | null {\r\n\tconst currentTheme = getCurrentTheme( state );\r\n\tif ( ! currentTheme ) {\r\n\t\treturn null;\r\n\t}\r\n\treturn state.themeGlobalStyleVariations[ currentTheme.stylesheet ];\r\n}\r\n\r\n/**\r\n * Retrieve the list of registered block patterns.\r\n *\r\n * @param state Data state.\r\n *\r\n * @return Block pattern list.\r\n */\r\nexport function getBlockPatterns( state: State ): Array< any > {\r\n\treturn state.blockPatterns;\r\n}\r\n\r\n/**\r\n * Retrieve the list of registered block pattern categories.\r\n *\r\n * @param state Data state.\r\n *\r\n * @return Block pattern category list.\r\n */\r\nexport function getBlockPatternCategories( state: State ): Array< any > {\r\n\treturn state.blockPatternCategories;\r\n}\r\n\r\n/**\r\n * Retrieve the registered user pattern categories.\r\n *\r\n * @param state Data state.\r\n *\r\n * @return User patterns category array.\r\n */\r\n\r\nexport function getUserPatternCategories(\r\n\tstate: State\r\n): Array< UserPatternCategory > {\r\n\treturn state.userPatternCategories;\r\n}\r\n\r\n/**\r\n * Returns the revisions of the current global styles theme.\r\n *\r\n * @deprecated since WordPress 6.5.0. Callers should use `select( 'core' ).getRevisions( 'root', 'globalStyles', ${ recordKey } )` instead, where `recordKey` is the id of the global styles parent post.\r\n *\r\n * @param      state Data state.\r\n *\r\n * @return The current global styles.\r\n */\r\nexport function getCurrentThemeGlobalStylesRevisions(\r\n\tstate: State\r\n): Array< object > | null {\r\n\tdeprecated( \"select( 'core' ).getCurrentThemeGlobalStylesRevisions()\", {\r\n\t\tsince: '6.5.0',\r\n\t\talternative:\r\n\t\t\t\"select( 'core' ).getRevisions( 'root', 'globalStyles', ${ recordKey } )\",\r\n\t} );\r\n\tconst currentGlobalStylesId =\r\n\t\t__experimentalGetCurrentGlobalStylesId( state );\r\n\r\n\tif ( ! currentGlobalStylesId ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn state.themeGlobalStyleRevisions[ currentGlobalStylesId ];\r\n}\r\n\r\n/**\r\n * Returns the default template use to render a given query.\r\n *\r\n * @param state Data state.\r\n * @param query Query.\r\n *\r\n * @return The default template id for the given query.\r\n */\r\nexport function getDefaultTemplateId(\r\n\tstate: State,\r\n\tquery: TemplateQuery\r\n): string {\r\n\treturn state.defaultTemplates[ JSON.stringify( query ) ];\r\n}\r\n\r\n/**\r\n * Returns an entity's revisions.\r\n *\r\n * @param state     State tree\r\n * @param kind      Entity kind.\r\n * @param name      Entity name.\r\n * @param recordKey The key of the entity record whose revisions you want to fetch.\r\n * @param query     Optional query. If requesting specific\r\n *                  fields, fields must always include the ID. For valid query parameters see revisions schema in [the REST API Handbook](https://developer.wordpress.org/rest-api/reference/). Then see the arguments available \"Retrieve a [Entity kind]\".\r\n *\r\n * @return Record.\r\n */\r\nexport const getRevisions = (\r\n\tstate: State,\r\n\tkind: string,\r\n\tname: string,\r\n\trecordKey: EntityRecordKey,\r\n\tquery?: GetRecordsHttpQuery\r\n): RevisionRecord[] | null => {\r\n\tconst queriedStateRevisions =\r\n\t\tstate.entities.records?.[ kind ]?.[ name ]?.revisions?.[ recordKey ];\r\n\tif ( ! queriedStateRevisions ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn getQueriedItems( queriedStateRevisions, query );\r\n};\r\n\r\n/**\r\n * Returns a single, specific revision of a parent entity.\r\n *\r\n * @param state       State tree\r\n * @param kind        Entity kind.\r\n * @param name        Entity name.\r\n * @param recordKey   The key of the entity record whose revisions you want to fetch.\r\n * @param revisionKey The revision's key.\r\n * @param query       Optional query. If requesting specific\r\n *                    fields, fields must always include the ID. For valid query parameters see revisions schema in [the REST API Handbook](https://developer.wordpress.org/rest-api/reference/). Then see the arguments available \"Retrieve a [entity kind]\".\r\n *\r\n * @return Record.\r\n */\r\nexport const getRevision = createSelector(\r\n\t(\r\n\t\tstate: State,\r\n\t\tkind: string,\r\n\t\tname: string,\r\n\t\trecordKey: EntityRecordKey,\r\n\t\trevisionKey: EntityRecordKey,\r\n\t\tquery?: GetRecordsHttpQuery\r\n\t): RevisionRecord | Record< PropertyKey, never > | undefined => {\r\n\t\tconst queriedState =\r\n\t\t\tstate.entities.records?.[ kind ]?.[ name ]?.revisions?.[\r\n\t\t\t\trecordKey\r\n\t\t\t];\r\n\r\n\t\tif ( ! queriedState ) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\r\n\t\tconst context = query?.context ?? 'default';\r\n\r\n\t\tif ( query === undefined ) {\r\n\t\t\t// If expecting a complete item, validate that completeness.\r\n\t\t\tif ( ! queriedState.itemIsComplete[ context ]?.[ revisionKey ] ) {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\r\n\t\t\treturn queriedState.items[ context ][ revisionKey ];\r\n\t\t}\r\n\r\n\t\tconst item = queriedState.items[ context ]?.[ revisionKey ];\r\n\t\tif ( item && query._fields ) {\r\n\t\t\tconst filteredItem = {};\r\n\t\t\tconst fields = getNormalizedCommaSeparable( query._fields ) ?? [];\r\n\r\n\t\t\tfor ( let f = 0; f < fields.length; f++ ) {\r\n\t\t\t\tconst field = fields[ f ].split( '.' );\r\n\t\t\t\tlet value = item;\r\n\t\t\t\tfield.forEach( ( fieldName ) => {\r\n\t\t\t\t\tvalue = value?.[ fieldName ];\r\n\t\t\t\t} );\r\n\t\t\t\tsetNestedValue( filteredItem, field, value );\r\n\t\t\t}\r\n\r\n\t\t\treturn filteredItem;\r\n\t\t}\r\n\r\n\t\treturn item;\r\n\t},\r\n\t( state: State, kind, name, recordKey, revisionKey, query ) => {\r\n\t\tconst context = query?.context ?? 'default';\r\n\t\treturn [\r\n\t\t\tstate.entities.records?.[ kind ]?.[ name ]?.revisions?.[ recordKey ]\r\n\t\t\t\t?.items?.[ context ]?.[ revisionKey ],\r\n\t\t\tstate.entities.records?.[ kind ]?.[ name ]?.revisions?.[ recordKey ]\r\n\t\t\t\t?.itemIsComplete?.[ context ]?.[ revisionKey ],\r\n\t\t];\r\n\t}\r\n);\r\n"],"mappings":"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","ignoreList":[]}