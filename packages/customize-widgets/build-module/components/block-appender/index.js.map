{"version":3,"names":["useRef","useEffect","ButtonBlockAppender","store","blockEditorStore","useSelect","jsx","_jsx","BlockAppender","props","ref","isBlocksListEmpty","select","getBlockCount","current","ownerDocument","activeElement","body","focus"],"sources":["@wordpress/customize-widgets/src/components/block-appender/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useRef, useEffect } from '@wordpress/element';\r\nimport {\r\n\tButtonBlockAppender,\r\n\tstore as blockEditorStore,\r\n} from '@wordpress/block-editor';\r\nimport { useSelect } from '@wordpress/data';\r\n\r\nexport default function BlockAppender( props ) {\r\n\tconst ref = useRef();\r\n\tconst isBlocksListEmpty = useSelect(\r\n\t\t( select ) => select( blockEditorStore ).getBlockCount() === 0\r\n\t);\r\n\r\n\t// Move the focus to the block appender to prevent focus from\r\n\t// being lost when emptying the widget area.\r\n\tuseEffect( () => {\r\n\t\tif ( isBlocksListEmpty && ref.current ) {\r\n\t\t\tconst { ownerDocument } = ref.current;\r\n\r\n\t\t\tif (\r\n\t\t\t\t! ownerDocument.activeElement ||\r\n\t\t\t\townerDocument.activeElement === ownerDocument.body\r\n\t\t\t) {\r\n\t\t\t\tref.current.focus();\r\n\t\t\t}\r\n\t\t}\r\n\t}, [ isBlocksListEmpty ] );\r\n\r\n\treturn <ButtonBlockAppender { ...props } ref={ ref } />;\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,MAAM,EAAEC,SAAS,QAAQ,oBAAoB;AACtD,SACCC,mBAAmB,EACnBC,KAAK,IAAIC,gBAAgB,QACnB,yBAAyB;AAChC,SAASC,SAAS,QAAQ,iBAAiB;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAE5C,eAAe,SAASC,aAAaA,CAAEC,KAAK,EAAG;EAC9C,MAAMC,GAAG,GAAGV,MAAM,CAAC,CAAC;EACpB,MAAMW,iBAAiB,GAAGN,SAAS,CAChCO,MAAM,IAAMA,MAAM,CAAER,gBAAiB,CAAC,CAACS,aAAa,CAAC,CAAC,KAAK,CAC9D,CAAC;;EAED;EACA;EACAZ,SAAS,CAAE,MAAM;IAChB,IAAKU,iBAAiB,IAAID,GAAG,CAACI,OAAO,EAAG;MACvC,MAAM;QAAEC;MAAc,CAAC,GAAGL,GAAG,CAACI,OAAO;MAErC,IACC,CAAEC,aAAa,CAACC,aAAa,IAC7BD,aAAa,CAACC,aAAa,KAAKD,aAAa,CAACE,IAAI,EACjD;QACDP,GAAG,CAACI,OAAO,CAACI,KAAK,CAAC,CAAC;MACpB;IACD;EACD,CAAC,EAAE,CAAEP,iBAAiB,CAAG,CAAC;EAE1B,oBAAOJ,IAAA,CAACL,mBAAmB;IAAA,GAAMO,KAAK;IAAGC,GAAG,EAAGA;EAAK,CAAE,CAAC;AACxD","ignoreList":[]}