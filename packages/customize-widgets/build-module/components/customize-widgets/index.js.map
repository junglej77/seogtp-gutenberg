{"version":3,"names":["useState","useEffect","useRef","createPortal","SlotFillProvider","Popover","ErrorBoundary","SidebarBlockEditor","FocusControl","SidebarControls","useClearSelectedBlock","jsx","_jsx","jsxs","_jsxs","CustomizeWidgets","api","sidebarControls","blockEditorSettings","activeSidebarControl","setActiveSidebarControl","parentContainer","document","getElementById","popoverRef","unsubscribers","map","sidebarControl","subscribe","expanded","forEach","unsubscriber","activeSidebar","children","sidebar","sidebarAdapter","inserter","inspector","id","container","popover","className","ref","Slot"],"sources":["@wordpress/customize-widgets/src/components/customize-widgets/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useState, useEffect, useRef, createPortal } from '@wordpress/element';\r\nimport { SlotFillProvider, Popover } from '@wordpress/components';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport ErrorBoundary from '../error-boundary';\r\nimport SidebarBlockEditor from '../sidebar-block-editor';\r\nimport FocusControl from '../focus-control';\r\nimport SidebarControls from '../sidebar-controls';\r\nimport useClearSelectedBlock from './use-clear-selected-block';\r\n\r\nexport default function CustomizeWidgets( {\r\n\tapi,\r\n\tsidebarControls,\r\n\tblockEditorSettings,\r\n} ) {\r\n\tconst [ activeSidebarControl, setActiveSidebarControl ] = useState( null );\r\n\tconst parentContainer = document.getElementById(\r\n\t\t'customize-theme-controls'\r\n\t);\r\n\tconst popoverRef = useRef();\r\n\r\n\tuseClearSelectedBlock( activeSidebarControl, popoverRef );\r\n\r\n\tuseEffect( () => {\r\n\t\tconst unsubscribers = sidebarControls.map( ( sidebarControl ) =>\r\n\t\t\tsidebarControl.subscribe( ( expanded ) => {\r\n\t\t\t\tif ( expanded ) {\r\n\t\t\t\t\tsetActiveSidebarControl( sidebarControl );\r\n\t\t\t\t}\r\n\t\t\t} )\r\n\t\t);\r\n\r\n\t\treturn () => {\r\n\t\t\tunsubscribers.forEach( ( unsubscriber ) => unsubscriber() );\r\n\t\t};\r\n\t}, [ sidebarControls ] );\r\n\r\n\tconst activeSidebar =\r\n\t\tactiveSidebarControl &&\r\n\t\tcreatePortal(\r\n\t\t\t<ErrorBoundary>\r\n\t\t\t\t<SidebarBlockEditor\r\n\t\t\t\t\tkey={ activeSidebarControl.id }\r\n\t\t\t\t\tblockEditorSettings={ blockEditorSettings }\r\n\t\t\t\t\tsidebar={ activeSidebarControl.sidebarAdapter }\r\n\t\t\t\t\tinserter={ activeSidebarControl.inserter }\r\n\t\t\t\t\tinspector={ activeSidebarControl.inspector }\r\n\t\t\t\t/>\r\n\t\t\t</ErrorBoundary>,\r\n\t\t\tactiveSidebarControl.container[ 0 ]\r\n\t\t);\r\n\r\n\t// We have to portal this to the parent of both the editor and the inspector,\r\n\t// so that the popovers will appear above both of them.\r\n\tconst popover =\r\n\t\tparentContainer &&\r\n\t\tcreatePortal(\r\n\t\t\t<div className=\"customize-widgets-popover\" ref={ popoverRef }>\r\n\t\t\t\t<Popover.Slot />\r\n\t\t\t</div>,\r\n\t\t\tparentContainer\r\n\t\t);\r\n\r\n\treturn (\r\n\t\t<SlotFillProvider>\r\n\t\t\t<SidebarControls\r\n\t\t\t\tsidebarControls={ sidebarControls }\r\n\t\t\t\tactiveSidebarControl={ activeSidebarControl }\r\n\t\t\t>\r\n\t\t\t\t<FocusControl api={ api } sidebarControls={ sidebarControls }>\r\n\t\t\t\t\t{ activeSidebar }\r\n\t\t\t\t\t{ popover }\r\n\t\t\t\t</FocusControl>\r\n\t\t\t</SidebarControls>\r\n\t\t</SlotFillProvider>\r\n\t);\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,QAAQ,EAAEC,SAAS,EAAEC,MAAM,EAAEC,YAAY,QAAQ,oBAAoB;AAC9E,SAASC,gBAAgB,EAAEC,OAAO,QAAQ,uBAAuB;;AAEjE;AACA;AACA;AACA,OAAOC,aAAa,MAAM,mBAAmB;AAC7C,OAAOC,kBAAkB,MAAM,yBAAyB;AACxD,OAAOC,YAAY,MAAM,kBAAkB;AAC3C,OAAOC,eAAe,MAAM,qBAAqB;AACjD,OAAOC,qBAAqB,MAAM,4BAA4B;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAE/D,eAAe,SAASC,gBAAgBA,CAAE;EACzCC,GAAG;EACHC,eAAe;EACfC;AACD,CAAC,EAAG;EACH,MAAM,CAAEC,oBAAoB,EAAEC,uBAAuB,CAAE,GAAGpB,QAAQ,CAAE,IAAK,CAAC;EAC1E,MAAMqB,eAAe,GAAGC,QAAQ,CAACC,cAAc,CAC9C,0BACD,CAAC;EACD,MAAMC,UAAU,GAAGtB,MAAM,CAAC,CAAC;EAE3BQ,qBAAqB,CAAES,oBAAoB,EAAEK,UAAW,CAAC;EAEzDvB,SAAS,CAAE,MAAM;IAChB,MAAMwB,aAAa,GAAGR,eAAe,CAACS,GAAG,CAAIC,cAAc,IAC1DA,cAAc,CAACC,SAAS,CAAIC,QAAQ,IAAM;MACzC,IAAKA,QAAQ,EAAG;QACfT,uBAAuB,CAAEO,cAAe,CAAC;MAC1C;IACD,CAAE,CACH,CAAC;IAED,OAAO,MAAM;MACZF,aAAa,CAACK,OAAO,CAAIC,YAAY,IAAMA,YAAY,CAAC,CAAE,CAAC;IAC5D,CAAC;EACF,CAAC,EAAE,CAAEd,eAAe,CAAG,CAAC;EAExB,MAAMe,aAAa,GAClBb,oBAAoB,IACpBhB,YAAY,eACXS,IAAA,CAACN,aAAa;IAAA2B,QAAA,eACbrB,IAAA,CAACL,kBAAkB;MAElBW,mBAAmB,EAAGA,mBAAqB;MAC3CgB,OAAO,EAAGf,oBAAoB,CAACgB,cAAgB;MAC/CC,QAAQ,EAAGjB,oBAAoB,CAACiB,QAAU;MAC1CC,SAAS,EAAGlB,oBAAoB,CAACkB;IAAW,GAJtClB,oBAAoB,CAACmB,EAK3B;EAAC,CACY,CAAC,EAChBnB,oBAAoB,CAACoB,SAAS,CAAE,CAAC,CAClC,CAAC;;EAEF;EACA;EACA,MAAMC,OAAO,GACZnB,eAAe,IACflB,YAAY,eACXS,IAAA;IAAK6B,SAAS,EAAC,2BAA2B;IAACC,GAAG,EAAGlB,UAAY;IAAAS,QAAA,eAC5DrB,IAAA,CAACP,OAAO,CAACsC,IAAI,IAAE;EAAC,CACZ,CAAC,EACNtB,eACD,CAAC;EAEF,oBACCT,IAAA,CAACR,gBAAgB;IAAA6B,QAAA,eAChBrB,IAAA,CAACH,eAAe;MACfQ,eAAe,EAAGA,eAAiB;MACnCE,oBAAoB,EAAGA,oBAAsB;MAAAc,QAAA,eAE7CnB,KAAA,CAACN,YAAY;QAACQ,GAAG,EAAGA,GAAK;QAACC,eAAe,EAAGA,eAAiB;QAAAgB,QAAA,GAC1DD,aAAa,EACbQ,OAAO;MAAA,CACI;IAAC,CACC;EAAC,CACD,CAAC;AAErB","ignoreList":[]}