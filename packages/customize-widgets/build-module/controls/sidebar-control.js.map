{"version":3,"names":["dispatch","SidebarAdapter","getInserterOuterSection","store","customizeWidgetsStore","getInserterId","controlId","getSidebarControl","wp","customize","window","SidebarControl","Control","constructor","args","subscribers","Set","ready","InserterOuterSection","inserter","id","section","add","sectionInstance","inspector","sidebarAdapter","setting","subscribe","callback","delete","onChangeSectionExpanded","expanded","unchanged","setIsInserterOpened","forEach","subscriber"],"sources":["@wordpress/customize-widgets/src/controls/sidebar-control.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { dispatch } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport SidebarAdapter from '../components/sidebar-block-editor/sidebar-adapter';\r\nimport getInserterOuterSection from './inserter-outer-section';\r\nimport { store as customizeWidgetsStore } from '../store';\r\n\r\nconst getInserterId = ( controlId ) => `widgets-inserter-${ controlId }`;\r\n\r\nexport default function getSidebarControl() {\r\n\tconst {\r\n\t\twp: { customize },\r\n\t} = window;\r\n\r\n\treturn class SidebarControl extends customize.Control {\r\n\t\tconstructor( ...args ) {\r\n\t\t\tsuper( ...args );\r\n\r\n\t\t\tthis.subscribers = new Set();\r\n\t\t}\r\n\r\n\t\tready() {\r\n\t\t\tconst InserterOuterSection = getInserterOuterSection();\r\n\t\t\tthis.inserter = new InserterOuterSection(\r\n\t\t\t\tgetInserterId( this.id ),\r\n\t\t\t\t{}\r\n\t\t\t);\r\n\t\t\tcustomize.section.add( this.inserter );\r\n\r\n\t\t\tthis.sectionInstance = customize.section( this.section() );\r\n\r\n\t\t\tthis.inspector = this.sectionInstance.inspector;\r\n\r\n\t\t\tthis.sidebarAdapter = new SidebarAdapter( this.setting, customize );\r\n\t\t}\r\n\r\n\t\tsubscribe( callback ) {\r\n\t\t\tthis.subscribers.add( callback );\r\n\r\n\t\t\treturn () => {\r\n\t\t\t\tthis.subscribers.delete( callback );\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tonChangeSectionExpanded( expanded, args ) {\r\n\t\t\tif ( ! args.unchanged ) {\r\n\t\t\t\t// Close the inserter when the section collapses.\r\n\t\t\t\tif ( ! expanded ) {\r\n\t\t\t\t\tdispatch( customizeWidgetsStore ).setIsInserterOpened(\r\n\t\t\t\t\t\tfalse\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.subscribers.forEach( ( subscriber ) =>\r\n\t\t\t\t\tsubscriber( expanded, args )\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,QAAQ,QAAQ,iBAAiB;;AAE1C;AACA;AACA;AACA,OAAOC,cAAc,MAAM,oDAAoD;AAC/E,OAAOC,uBAAuB,MAAM,0BAA0B;AAC9D,SAASC,KAAK,IAAIC,qBAAqB,QAAQ,UAAU;AAEzD,MAAMC,aAAa,GAAKC,SAAS,IAAO,oBAAoBA,SAAW,EAAC;AAExE,eAAe,SAASC,iBAAiBA,CAAA,EAAG;EAC3C,MAAM;IACLC,EAAE,EAAE;MAAEC;IAAU;EACjB,CAAC,GAAGC,MAAM;EAEV,OAAO,MAAMC,cAAc,SAASF,SAAS,CAACG,OAAO,CAAC;IACrDC,WAAWA,CAAE,GAAGC,IAAI,EAAG;MACtB,KAAK,CAAE,GAAGA,IAAK,CAAC;MAEhB,IAAI,CAACC,WAAW,GAAG,IAAIC,GAAG,CAAC,CAAC;IAC7B;IAEAC,KAAKA,CAAA,EAAG;MACP,MAAMC,oBAAoB,GAAGhB,uBAAuB,CAAC,CAAC;MACtD,IAAI,CAACiB,QAAQ,GAAG,IAAID,oBAAoB,CACvCb,aAAa,CAAE,IAAI,CAACe,EAAG,CAAC,EACxB,CAAC,CACF,CAAC;MACDX,SAAS,CAACY,OAAO,CAACC,GAAG,CAAE,IAAI,CAACH,QAAS,CAAC;MAEtC,IAAI,CAACI,eAAe,GAAGd,SAAS,CAACY,OAAO,CAAE,IAAI,CAACA,OAAO,CAAC,CAAE,CAAC;MAE1D,IAAI,CAACG,SAAS,GAAG,IAAI,CAACD,eAAe,CAACC,SAAS;MAE/C,IAAI,CAACC,cAAc,GAAG,IAAIxB,cAAc,CAAE,IAAI,CAACyB,OAAO,EAAEjB,SAAU,CAAC;IACpE;IAEAkB,SAASA,CAAEC,QAAQ,EAAG;MACrB,IAAI,CAACb,WAAW,CAACO,GAAG,CAAEM,QAAS,CAAC;MAEhC,OAAO,MAAM;QACZ,IAAI,CAACb,WAAW,CAACc,MAAM,CAAED,QAAS,CAAC;MACpC,CAAC;IACF;IAEAE,uBAAuBA,CAAEC,QAAQ,EAAEjB,IAAI,EAAG;MACzC,IAAK,CAAEA,IAAI,CAACkB,SAAS,EAAG;QACvB;QACA,IAAK,CAAED,QAAQ,EAAG;UACjB/B,QAAQ,CAAEI,qBAAsB,CAAC,CAAC6B,mBAAmB,CACpD,KACD,CAAC;QACF;QAEA,IAAI,CAAClB,WAAW,CAACmB,OAAO,CAAIC,UAAU,IACrCA,UAAU,CAAEJ,QAAQ,EAAEjB,IAAK,CAC5B,CAAC;MACF;IACD;EACD,CAAC;AACF","ignoreList":[]}