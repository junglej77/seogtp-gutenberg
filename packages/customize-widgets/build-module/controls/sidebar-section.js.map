{"version":3,"names":["__","getInspectorSection","getInspectorSectionId","sidebarId","getSidebarSection","wp","customize","window","reduceMotionMediaQuery","matchMedia","isReducedMotion","matches","addEventListener","event","SidebarSection","Section","ready","InspectorSection","inspector","id","title","parentSection","customizeAction","params","join","section","add","contentContainer","classList","hasSubSectionOpened","expanded","onChangeExpanded","_args","controls","args","completeCallback","forEach","control","onChangeSectionExpanded","manualTransition","addClass","removeClass","closest","handleTransitionEnd","one"],"sources":["@wordpress/customize-widgets/src/controls/sidebar-section.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport getInspectorSection from './inspector-section';\r\n\r\nconst getInspectorSectionId = ( sidebarId ) =>\r\n\t`widgets-inspector-${ sidebarId }`;\r\n\r\nexport default function getSidebarSection() {\r\n\tconst {\r\n\t\twp: { customize },\r\n\t} = window;\r\n\r\n\tconst reduceMotionMediaQuery = window.matchMedia(\r\n\t\t'(prefers-reduced-motion: reduce)'\r\n\t);\r\n\tlet isReducedMotion = reduceMotionMediaQuery.matches;\r\n\treduceMotionMediaQuery.addEventListener( 'change', ( event ) => {\r\n\t\tisReducedMotion = event.matches;\r\n\t} );\r\n\r\n\treturn class SidebarSection extends customize.Section {\r\n\t\tready() {\r\n\t\t\tconst InspectorSection = getInspectorSection();\r\n\t\t\tthis.inspector = new InspectorSection(\r\n\t\t\t\tgetInspectorSectionId( this.id ),\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: __( 'Block Settings' ),\r\n\t\t\t\t\tparentSection: this,\r\n\t\t\t\t\tcustomizeAction: [\r\n\t\t\t\t\t\t__( 'Customizing' ),\r\n\t\t\t\t\t\t__( 'Widgets' ),\r\n\t\t\t\t\t\tthis.params.title,\r\n\t\t\t\t\t].join( ' â–¸ ' ),\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t\tcustomize.section.add( this.inspector );\r\n\t\t\tthis.contentContainer[ 0 ].classList.add(\r\n\t\t\t\t'customize-widgets__sidebar-section'\r\n\t\t\t);\r\n\t\t}\r\n\t\thasSubSectionOpened() {\r\n\t\t\treturn this.inspector.expanded();\r\n\t\t}\r\n\t\tonChangeExpanded( expanded, _args ) {\r\n\t\t\tconst controls = this.controls();\r\n\t\t\tconst args = {\r\n\t\t\t\t..._args,\r\n\t\t\t\tcompleteCallback() {\r\n\t\t\t\t\tcontrols.forEach( ( control ) => {\r\n\t\t\t\t\t\tcontrol.onChangeSectionExpanded?.( expanded, args );\r\n\t\t\t\t\t} );\r\n\t\t\t\t\t_args.completeCallback?.();\r\n\t\t\t\t},\r\n\t\t\t};\r\n\r\n\t\t\tif ( args.manualTransition ) {\r\n\t\t\t\tif ( expanded ) {\r\n\t\t\t\t\tthis.contentContainer.addClass( [ 'busy', 'open' ] );\r\n\t\t\t\t\tthis.contentContainer.removeClass( 'is-sub-section-open' );\r\n\t\t\t\t\tthis.contentContainer\r\n\t\t\t\t\t\t.closest( '.wp-full-overlay' )\r\n\t\t\t\t\t\t.addClass( 'section-open' );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.contentContainer.addClass( [\r\n\t\t\t\t\t\t'busy',\r\n\t\t\t\t\t\t'is-sub-section-open',\r\n\t\t\t\t\t] );\r\n\t\t\t\t\tthis.contentContainer\r\n\t\t\t\t\t\t.closest( '.wp-full-overlay' )\r\n\t\t\t\t\t\t.addClass( 'section-open' );\r\n\t\t\t\t\tthis.contentContainer.removeClass( 'open' );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst handleTransitionEnd = () => {\r\n\t\t\t\t\tthis.contentContainer.removeClass( 'busy' );\r\n\t\t\t\t\targs.completeCallback();\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif ( isReducedMotion ) {\r\n\t\t\t\t\thandleTransitionEnd();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.contentContainer.one(\r\n\t\t\t\t\t\t'transitionend',\r\n\t\t\t\t\t\thandleTransitionEnd\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tsuper.onChangeExpanded( expanded, args );\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n"],"mappings":"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","ignoreList":[]}