{"version":3,"names":["createRoot","StrictMode","registerCoreBlocks","__experimentalGetCoreBlocks","__experimentalRegisterExperimentalCoreBlocks","registerLegacyWidgetBlock","registerLegacyWidgetVariations","registerWidgetGroupBlock","setFreeformContentHandlerName","store","blocksStore","dispatch","preferencesStore","CustomizeWidgets","getSidebarSection","getSidebarControl","jsx","_jsx","wp","window","DISABLED_BLOCKS","ENABLE_EXPERIMENTAL_FSE_BLOCKS","initialize","editorName","blockEditorSettings","setDefaults","fixedToolbar","welcomeGuide","reapplyBlockTypeFilters","coreBlocks","filter","block","includes","name","startsWith","globalThis","IS_GUTENBERG_PLUGIN","enableFSEBlocks","SidebarControl","customize","sectionConstructor","sidebar","controlConstructor","sidebar_block_editor","container","document","createElement","body","appendChild","bind","sidebarControls","control","each","push","render","children","api"],"sources":["@wordpress/customize-widgets/src/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { createRoot, StrictMode } from '@wordpress/element';\r\nimport {\r\n\tregisterCoreBlocks,\r\n\t__experimentalGetCoreBlocks,\r\n\t__experimentalRegisterExperimentalCoreBlocks,\r\n} from '@wordpress/block-library';\r\nimport {\r\n\tregisterLegacyWidgetBlock,\r\n\tregisterLegacyWidgetVariations,\r\n\tregisterWidgetGroupBlock,\r\n} from '@wordpress/widgets';\r\nimport {\r\n\tsetFreeformContentHandlerName,\r\n\tstore as blocksStore,\r\n} from '@wordpress/blocks';\r\nimport { dispatch } from '@wordpress/data';\r\nimport { store as preferencesStore } from '@wordpress/preferences';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport CustomizeWidgets from './components/customize-widgets';\r\nimport getSidebarSection from './controls/sidebar-section';\r\nimport getSidebarControl from './controls/sidebar-control';\r\nimport './filters';\r\n\r\nconst { wp } = window;\r\n\r\nconst DISABLED_BLOCKS = [\r\n\t'core/more',\r\n\t'core/block',\r\n\t'core/freeform',\r\n\t'core/template-part',\r\n];\r\nconst ENABLE_EXPERIMENTAL_FSE_BLOCKS = false;\r\n\r\n/**\r\n * Initializes the widgets block editor in the customizer.\r\n *\r\n * @param {string} editorName          The editor name.\r\n * @param {Object} blockEditorSettings Block editor settings.\r\n */\r\nexport function initialize( editorName, blockEditorSettings ) {\r\n\tdispatch( preferencesStore ).setDefaults( 'core/customize-widgets', {\r\n\t\tfixedToolbar: false,\r\n\t\twelcomeGuide: true,\r\n\t} );\r\n\r\n\tdispatch( blocksStore ).reapplyBlockTypeFilters();\r\n\tconst coreBlocks = __experimentalGetCoreBlocks().filter( ( block ) => {\r\n\t\treturn ! (\r\n\t\t\tDISABLED_BLOCKS.includes( block.name ) ||\r\n\t\t\tblock.name.startsWith( 'core/post' ) ||\r\n\t\t\tblock.name.startsWith( 'core/query' ) ||\r\n\t\t\tblock.name.startsWith( 'core/site' ) ||\r\n\t\t\tblock.name.startsWith( 'core/navigation' )\r\n\t\t);\r\n\t} );\r\n\tregisterCoreBlocks( coreBlocks );\r\n\tregisterLegacyWidgetBlock();\r\n\tif ( globalThis.IS_GUTENBERG_PLUGIN ) {\r\n\t\t__experimentalRegisterExperimentalCoreBlocks( {\r\n\t\t\tenableFSEBlocks: ENABLE_EXPERIMENTAL_FSE_BLOCKS,\r\n\t\t} );\r\n\t}\r\n\tregisterLegacyWidgetVariations( blockEditorSettings );\r\n\tregisterWidgetGroupBlock();\r\n\r\n\t// As we are unregistering `core/freeform` to avoid the Classic block, we must\r\n\t// replace it with something as the default freeform content handler. Failure to\r\n\t// do this will result in errors in the default block parser.\r\n\t// see: https://github.com/WordPress/gutenberg/issues/33097\r\n\tsetFreeformContentHandlerName( 'core/html' );\r\n\r\n\tconst SidebarControl = getSidebarControl( blockEditorSettings );\r\n\r\n\twp.customize.sectionConstructor.sidebar = getSidebarSection();\r\n\twp.customize.controlConstructor.sidebar_block_editor = SidebarControl;\r\n\r\n\tconst container = document.createElement( 'div' );\r\n\tdocument.body.appendChild( container );\r\n\r\n\twp.customize.bind( 'ready', () => {\r\n\t\tconst sidebarControls = [];\r\n\t\twp.customize.control.each( ( control ) => {\r\n\t\t\tif ( control instanceof SidebarControl ) {\r\n\t\t\t\tsidebarControls.push( control );\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\tcreateRoot( container ).render(\r\n\t\t\t<StrictMode>\r\n\t\t\t\t<CustomizeWidgets\r\n\t\t\t\t\tapi={ wp.customize }\r\n\t\t\t\t\tsidebarControls={ sidebarControls }\r\n\t\t\t\t\tblockEditorSettings={ blockEditorSettings }\r\n\t\t\t\t/>\r\n\t\t\t</StrictMode>\r\n\t\t);\r\n\t} );\r\n}\r\nexport { store } from './store';\r\n"],"mappings":"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","ignoreList":[]}