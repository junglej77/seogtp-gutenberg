{"version":3,"names":["useMemo","useRef","useIsomorphicLayoutEffect","useRegistry","useDispatchWithMap","dispatchMap","deps","registry","currentDispatchMapRef","current","currentDispatchProps","dispatch","Object","fromEntries","entries","map","propName","dispatcher","console","warn","args"],"sources":["@wordpress/data/src/components/use-dispatch/use-dispatch-with-map.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useMemo, useRef } from '@wordpress/element';\r\nimport { useIsomorphicLayoutEffect } from '@wordpress/compose';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport useRegistry from '../registry-provider/use-registry';\r\n\r\n/**\r\n * Custom react hook for returning aggregate dispatch actions using the provided\r\n * dispatchMap.\r\n *\r\n * Currently this is an internal api only and is implemented by `withDispatch`\r\n *\r\n * @param {Function} dispatchMap Receives the `registry.dispatch` function as\r\n *                               the first argument and the `registry` object\r\n *                               as the second argument.  Should return an\r\n *                               object mapping props to functions.\r\n * @param {Array}    deps        An array of dependencies for the hook.\r\n * @return {Object}  An object mapping props to functions created by the passed\r\n *                   in dispatchMap.\r\n */\r\nconst useDispatchWithMap = ( dispatchMap, deps ) => {\r\n\tconst registry = useRegistry();\r\n\tconst currentDispatchMapRef = useRef( dispatchMap );\r\n\r\n\tuseIsomorphicLayoutEffect( () => {\r\n\t\tcurrentDispatchMapRef.current = dispatchMap;\r\n\t} );\r\n\r\n\treturn useMemo( () => {\r\n\t\tconst currentDispatchProps = currentDispatchMapRef.current(\r\n\t\t\tregistry.dispatch,\r\n\t\t\tregistry\r\n\t\t);\r\n\t\treturn Object.fromEntries(\r\n\t\t\tObject.entries( currentDispatchProps ).map(\r\n\t\t\t\t( [ propName, dispatcher ] ) => {\r\n\t\t\t\t\tif ( typeof dispatcher !== 'function' ) {\r\n\t\t\t\t\t\t// eslint-disable-next-line no-console\r\n\t\t\t\t\t\tconsole.warn(\r\n\t\t\t\t\t\t\t`Property ${ propName } returned from dispatchMap in useDispatchWithMap must be a function.`\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn [\r\n\t\t\t\t\t\tpropName,\r\n\t\t\t\t\t\t( ...args ) =>\r\n\t\t\t\t\t\t\tcurrentDispatchMapRef\r\n\t\t\t\t\t\t\t\t.current( registry.dispatch, registry )\r\n\t\t\t\t\t\t\t\t[ propName ]( ...args ),\r\n\t\t\t\t\t];\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t);\r\n\t}, [ registry, ...deps ] );\r\n};\r\n\r\nexport default useDispatchWithMap;\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,OAAO,EAAEC,MAAM,QAAQ,oBAAoB;AACpD,SAASC,yBAAyB,QAAQ,oBAAoB;;AAE9D;AACA;AACA;AACA,OAAOC,WAAW,MAAM,mCAAmC;;AAE3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,kBAAkB,GAAGA,CAAEC,WAAW,EAAEC,IAAI,KAAM;EACnD,MAAMC,QAAQ,GAAGJ,WAAW,CAAC,CAAC;EAC9B,MAAMK,qBAAqB,GAAGP,MAAM,CAAEI,WAAY,CAAC;EAEnDH,yBAAyB,CAAE,MAAM;IAChCM,qBAAqB,CAACC,OAAO,GAAGJ,WAAW;EAC5C,CAAE,CAAC;EAEH,OAAOL,OAAO,CAAE,MAAM;IACrB,MAAMU,oBAAoB,GAAGF,qBAAqB,CAACC,OAAO,CACzDF,QAAQ,CAACI,QAAQ,EACjBJ,QACD,CAAC;IACD,OAAOK,MAAM,CAACC,WAAW,CACxBD,MAAM,CAACE,OAAO,CAAEJ,oBAAqB,CAAC,CAACK,GAAG,CACzC,CAAE,CAAEC,QAAQ,EAAEC,UAAU,CAAE,KAAM;MAC/B,IAAK,OAAOA,UAAU,KAAK,UAAU,EAAG;QACvC;QACAC,OAAO,CAACC,IAAI,CACV,YAAYH,QAAU,sEACxB,CAAC;MACF;MACA,OAAO,CACNA,QAAQ,EACR,CAAE,GAAGI,IAAI,KACRZ,qBAAqB,CACnBC,OAAO,CAAEF,QAAQ,CAACI,QAAQ,EAAEJ,QAAS,CAAC,CACrCS,QAAQ,CAAE,CAAE,GAAGI,IAAK,CAAC,CACzB;IACF,CACD,CACD,CAAC;EACF,CAAC,EAAE,CAAEb,QAAQ,EAAE,GAAGD,IAAI,CAAG,CAAC;AAC3B,CAAC;AAED,eAAeF,kBAAkB","ignoreList":[]}