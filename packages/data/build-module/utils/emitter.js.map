{"version":3,"names":["createEmitter","isPaused","isPending","listeners","Set","notifyListeners","Array","from","forEach","listener","subscribe","add","delete","pause","resume","emit"],"sources":["@wordpress/data/src/utils/emitter.js"],"sourcesContent":["/**\r\n * Create an event emitter.\r\n *\r\n * @return {import(\"../types\").DataEmitter} Emitter.\r\n */\r\nexport function createEmitter() {\r\n\tlet isPaused = false;\r\n\tlet isPending = false;\r\n\tconst listeners = new Set();\r\n\tconst notifyListeners = () =>\r\n\t\t// We use Array.from to clone the listeners Set\r\n\t\t// This ensures that we don't run a listener\r\n\t\t// that was added as a response to another listener.\r\n\t\tArray.from( listeners ).forEach( ( listener ) => listener() );\r\n\r\n\treturn {\r\n\t\tget isPaused() {\r\n\t\t\treturn isPaused;\r\n\t\t},\r\n\r\n\t\tsubscribe( listener ) {\r\n\t\t\tlisteners.add( listener );\r\n\t\t\treturn () => listeners.delete( listener );\r\n\t\t},\r\n\r\n\t\tpause() {\r\n\t\t\tisPaused = true;\r\n\t\t},\r\n\r\n\t\tresume() {\r\n\t\t\tisPaused = false;\r\n\t\t\tif ( isPending ) {\r\n\t\t\t\tisPending = false;\r\n\t\t\t\tnotifyListeners();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\temit() {\r\n\t\t\tif ( isPaused ) {\r\n\t\t\t\tisPending = true;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tnotifyListeners();\r\n\t\t},\r\n\t};\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASA,aAAaA,CAAA,EAAG;EAC/B,IAAIC,QAAQ,GAAG,KAAK;EACpB,IAAIC,SAAS,GAAG,KAAK;EACrB,MAAMC,SAAS,GAAG,IAAIC,GAAG,CAAC,CAAC;EAC3B,MAAMC,eAAe,GAAGA,CAAA;EACvB;EACA;EACA;EACAC,KAAK,CAACC,IAAI,CAAEJ,SAAU,CAAC,CAACK,OAAO,CAAIC,QAAQ,IAAMA,QAAQ,CAAC,CAAE,CAAC;EAE9D,OAAO;IACN,IAAIR,QAAQA,CAAA,EAAG;MACd,OAAOA,QAAQ;IAChB,CAAC;IAEDS,SAASA,CAAED,QAAQ,EAAG;MACrBN,SAAS,CAACQ,GAAG,CAAEF,QAAS,CAAC;MACzB,OAAO,MAAMN,SAAS,CAACS,MAAM,CAAEH,QAAS,CAAC;IAC1C,CAAC;IAEDI,KAAKA,CAAA,EAAG;MACPZ,QAAQ,GAAG,IAAI;IAChB,CAAC;IAEDa,MAAMA,CAAA,EAAG;MACRb,QAAQ,GAAG,KAAK;MAChB,IAAKC,SAAS,EAAG;QAChBA,SAAS,GAAG,KAAK;QACjBG,eAAe,CAAC,CAAC;MAClB;IACD,CAAC;IAEDU,IAAIA,CAAA,EAAG;MACN,IAAKd,QAAQ,EAAG;QACfC,SAAS,GAAG,IAAI;QAChB;MACD;MACAG,eAAe,CAAC,CAAC;IAClB;EACD,CAAC;AACF","ignoreList":[]}