{"version":3,"names":["privateApis","componentsPrivateApis","Button","__","forwardRef","unlock","jsx","_jsx","DropdownMenuV2","AddFilterDropdownMenu","filters","view","onChangeView","setOpenedFilter","trigger","inactiveFilters","filter","isVisible","children","map","Item","onClick","field","page","value","undefined","operator","operators","ItemLabel","name","AddFilter","ref","length","every","isPrimary","accessibleWhenDisabled","size","className","variant","disabled"],"sources":["@wordpress/dataviews/src/components/dataviews-filters/add-filter.tsx"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport type { Ref } from 'react';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tprivateApis as componentsPrivateApis,\r\n\tButton,\r\n} from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { forwardRef } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { unlock } from '../../lock-unlock';\r\nimport type { NormalizedFilter, View } from '../../types';\r\n\r\nconst { DropdownMenuV2 } = unlock( componentsPrivateApis );\r\n\r\ninterface AddFilterProps {\r\n\tfilters: NormalizedFilter[];\r\n\tview: View;\r\n\tonChangeView: ( view: View ) => void;\r\n\tsetOpenedFilter: ( filter: string | null ) => void;\r\n}\r\n\r\nexport function AddFilterDropdownMenu( {\r\n\tfilters,\r\n\tview,\r\n\tonChangeView,\r\n\tsetOpenedFilter,\r\n\ttrigger,\r\n}: AddFilterProps & {\r\n\ttrigger: React.ReactNode;\r\n} ) {\r\n\tconst inactiveFilters = filters.filter( ( filter ) => ! filter.isVisible );\r\n\treturn (\r\n\t\t<DropdownMenuV2 trigger={ trigger }>\r\n\t\t\t{ inactiveFilters.map( ( filter ) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<DropdownMenuV2.Item\r\n\t\t\t\t\t\tkey={ filter.field }\r\n\t\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\t\tsetOpenedFilter( filter.field );\r\n\t\t\t\t\t\t\tonChangeView( {\r\n\t\t\t\t\t\t\t\t...view,\r\n\t\t\t\t\t\t\t\tpage: 1,\r\n\t\t\t\t\t\t\t\tfilters: [\r\n\t\t\t\t\t\t\t\t\t...( view.filters || [] ),\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tfield: filter.field,\r\n\t\t\t\t\t\t\t\t\t\tvalue: undefined,\r\n\t\t\t\t\t\t\t\t\t\toperator: filter.operators[ 0 ],\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t} );\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<DropdownMenuV2.ItemLabel>\r\n\t\t\t\t\t\t\t{ filter.name }\r\n\t\t\t\t\t\t</DropdownMenuV2.ItemLabel>\r\n\t\t\t\t\t</DropdownMenuV2.Item>\r\n\t\t\t\t);\r\n\t\t\t} ) }\r\n\t\t</DropdownMenuV2>\r\n\t);\r\n}\r\n\r\nfunction AddFilter(\r\n\t{ filters, view, onChangeView, setOpenedFilter }: AddFilterProps,\r\n\tref: Ref< HTMLButtonElement >\r\n) {\r\n\tif ( ! filters.length || filters.every( ( { isPrimary } ) => isPrimary ) ) {\r\n\t\treturn null;\r\n\t}\r\n\tconst inactiveFilters = filters.filter( ( filter ) => ! filter.isVisible );\r\n\treturn (\r\n\t\t<AddFilterDropdownMenu\r\n\t\t\ttrigger={\r\n\t\t\t\t<Button\r\n\t\t\t\t\taccessibleWhenDisabled\r\n\t\t\t\t\tsize=\"compact\"\r\n\t\t\t\t\tclassName=\"dataviews-filters-button\"\r\n\t\t\t\t\tvariant=\"tertiary\"\r\n\t\t\t\t\tdisabled={ ! inactiveFilters.length }\r\n\t\t\t\t\tref={ ref }\r\n\t\t\t\t>\r\n\t\t\t\t\t{ __( 'Add filter' ) }\r\n\t\t\t\t</Button>\r\n\t\t\t}\r\n\t\t\t{ ...{ filters, view, onChangeView, setOpenedFilter } }\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default forwardRef( AddFilter );\r\n"],"mappings":"AAAA;AACA;AACA;;AAGA;AACA;AACA;AACA,SACCA,WAAW,IAAIC,qBAAqB,EACpCC,MAAM,QACA,uBAAuB;AAC9B,SAASC,EAAE,QAAQ,iBAAiB;AACpC,SAASC,UAAU,QAAQ,oBAAoB;;AAE/C;AACA;AACA;AACA,SAASC,MAAM,QAAQ,mBAAmB;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAG3C,MAAM;EAAEC;AAAe,CAAC,GAAGH,MAAM,CAAEJ,qBAAsB,CAAC;AAS1D,OAAO,SAASQ,qBAAqBA,CAAE;EACtCC,OAAO;EACPC,IAAI;EACJC,YAAY;EACZC,eAAe;EACfC;AAGD,CAAC,EAAG;EACH,MAAMC,eAAe,GAAGL,OAAO,CAACM,MAAM,CAAIA,MAAM,IAAM,CAAEA,MAAM,CAACC,SAAU,CAAC;EAC1E,oBACCV,IAAA,CAACC,cAAc;IAACM,OAAO,EAAGA,OAAS;IAAAI,QAAA,EAChCH,eAAe,CAACI,GAAG,CAAIH,MAAM,IAAM;MACpC,oBACCT,IAAA,CAACC,cAAc,CAACY,IAAI;QAEnBC,OAAO,EAAGA,CAAA,KAAM;UACfR,eAAe,CAAEG,MAAM,CAACM,KAAM,CAAC;UAC/BV,YAAY,CAAE;YACb,GAAGD,IAAI;YACPY,IAAI,EAAE,CAAC;YACPb,OAAO,EAAE,CACR,IAAKC,IAAI,CAACD,OAAO,IAAI,EAAE,CAAE,EACzB;cACCY,KAAK,EAAEN,MAAM,CAACM,KAAK;cACnBE,KAAK,EAAEC,SAAS;cAChBC,QAAQ,EAAEV,MAAM,CAACW,SAAS,CAAE,CAAC;YAC9B,CAAC;UAEH,CAAE,CAAC;QACJ,CAAG;QAAAT,QAAA,eAEHX,IAAA,CAACC,cAAc,CAACoB,SAAS;UAAAV,QAAA,EACtBF,MAAM,CAACa;QAAI,CACY;MAAC,GAnBrBb,MAAM,CAACM,KAoBO,CAAC;IAExB,CAAE;EAAC,CACY,CAAC;AAEnB;AAEA,SAASQ,SAASA,CACjB;EAAEpB,OAAO;EAAEC,IAAI;EAAEC,YAAY;EAAEC;AAAgC,CAAC,EAChEkB,GAA6B,EAC5B;EACD,IAAK,CAAErB,OAAO,CAACsB,MAAM,IAAItB,OAAO,CAACuB,KAAK,CAAE,CAAE;IAAEC;EAAU,CAAC,KAAMA,SAAU,CAAC,EAAG;IAC1E,OAAO,IAAI;EACZ;EACA,MAAMnB,eAAe,GAAGL,OAAO,CAACM,MAAM,CAAIA,MAAM,IAAM,CAAEA,MAAM,CAACC,SAAU,CAAC;EAC1E,oBACCV,IAAA,CAACE,qBAAqB;IACrBK,OAAO,eACNP,IAAA,CAACL,MAAM;MACNiC,sBAAsB;MACtBC,IAAI,EAAC,SAAS;MACdC,SAAS,EAAC,0BAA0B;MACpCC,OAAO,EAAC,UAAU;MAClBC,QAAQ,EAAG,CAAExB,eAAe,CAACiB,MAAQ;MACrCD,GAAG,EAAGA,GAAK;MAAAb,QAAA,EAETf,EAAE,CAAE,YAAa;IAAC,CACb,CACR;IACMO,OAAO;IAAEC,IAAI;IAAEC,YAAY;IAAEC;EAAe,CACnD,CAAC;AAEJ;AAEA,eAAeT,UAAU,CAAE0B,SAAU,CAAC","ignoreList":[]}