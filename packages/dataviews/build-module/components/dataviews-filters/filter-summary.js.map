{"version":3,"names":["clsx","Dropdown","__experimentalVStack","VStack","__experimentalHStack","HStack","FlexItem","SelectControl","Tooltip","Icon","__","sprintf","useRef","createInterpolateElement","closeSmall","ENTER","SPACE","SearchWidget","OPERATORS","OPERATOR_IS","OPERATOR_IS_NOT","OPERATOR_IS_ANY","OPERATOR_IS_NONE","OPERATOR_IS_ALL","OPERATOR_IS_NOT_ALL","jsx","_jsx","jsxs","_jsxs","FilterText","activeElements","filterInView","filter","undefined","length","name","filterTextWrappers","Name","className","Value","operator","map","element","label","join","OperatorSelector","view","onChangeView","operatorOptions","operators","value","currentFilter","filters","find","_filter","field","spacing","justify","children","options","onChange","newValue","_view$filters","_view$filters2","newFilters","page","size","__nextHasNoMarginBottom","hideLabelFromVision","FilterSummary","addFilterRef","openedFilter","commonProps","toggleRef","f","elements","singleSelection","includes","isPrimary","hasValues","canResetOrRemove","defaultOpen","contentClassName","popoverProps","placement","role","onClose","current","focus","renderToggle","isOpen","onToggle","text","toLowerCase","tabIndex","onClick","onKeyDown","event","key","preventDefault","ref","icon","renderContent"],"sources":["@wordpress/dataviews/src/components/dataviews-filters/filter-summary.tsx"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\nimport type { RefObject } from 'react';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tDropdown,\r\n\t__experimentalVStack as VStack,\r\n\t__experimentalHStack as HStack,\r\n\tFlexItem,\r\n\tSelectControl,\r\n\tTooltip,\r\n\tIcon,\r\n} from '@wordpress/components';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { useRef, createInterpolateElement } from '@wordpress/element';\r\nimport { closeSmall } from '@wordpress/icons';\r\n\r\nconst ENTER = 'Enter';\r\nconst SPACE = ' ';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport SearchWidget from './search-widget';\r\nimport {\r\n\tOPERATORS,\r\n\tOPERATOR_IS,\r\n\tOPERATOR_IS_NOT,\r\n\tOPERATOR_IS_ANY,\r\n\tOPERATOR_IS_NONE,\r\n\tOPERATOR_IS_ALL,\r\n\tOPERATOR_IS_NOT_ALL,\r\n} from '../../constants';\r\nimport type {\r\n\tFilter,\r\n\tNormalizedFilter,\r\n\tOperator,\r\n\tOption,\r\n\tView,\r\n} from '../../types';\r\n\r\ninterface FilterTextProps {\r\n\tactiveElements: Option[];\r\n\tfilterInView?: Filter;\r\n\tfilter: NormalizedFilter;\r\n}\r\n\r\ninterface OperatorSelectorProps {\r\n\tfilter: NormalizedFilter;\r\n\tview: View;\r\n\tonChangeView: ( view: View ) => void;\r\n}\r\n\r\ninterface FilterSummaryProps extends OperatorSelectorProps {\r\n\taddFilterRef: RefObject< HTMLButtonElement >;\r\n\topenedFilter: string | null;\r\n}\r\n\r\nconst FilterText = ( {\r\n\tactiveElements,\r\n\tfilterInView,\r\n\tfilter,\r\n}: FilterTextProps ) => {\r\n\tif ( activeElements === undefined || activeElements.length === 0 ) {\r\n\t\treturn filter.name;\r\n\t}\r\n\r\n\tconst filterTextWrappers = {\r\n\t\tName: <span className=\"dataviews-filters__summary-filter-text-name\" />,\r\n\t\tValue: (\r\n\t\t\t<span className=\"dataviews-filters__summary-filter-text-value\" />\r\n\t\t),\r\n\t};\r\n\r\n\tif ( filterInView?.operator === OPERATOR_IS_ANY ) {\r\n\t\treturn createInterpolateElement(\r\n\t\t\tsprintf(\r\n\t\t\t\t/* translators: 1: Filter name. 3: Filter value. e.g.: \"Author is any: Admin, Editor\". */\r\n\t\t\t\t__( '<Name>%1$s is any: </Name><Value>%2$s</Value>' ),\r\n\t\t\t\tfilter.name,\r\n\t\t\t\tactiveElements.map( ( element ) => element.label ).join( ', ' )\r\n\t\t\t),\r\n\t\t\tfilterTextWrappers\r\n\t\t);\r\n\t}\r\n\r\n\tif ( filterInView?.operator === OPERATOR_IS_NONE ) {\r\n\t\treturn createInterpolateElement(\r\n\t\t\tsprintf(\r\n\t\t\t\t/* translators: 1: Filter name. 3: Filter value. e.g.: \"Author is none: Admin, Editor\". */\r\n\t\t\t\t__( '<Name>%1$s is none: </Name><Value>%2$s</Value>' ),\r\n\t\t\t\tfilter.name,\r\n\t\t\t\tactiveElements.map( ( element ) => element.label ).join( ', ' )\r\n\t\t\t),\r\n\t\t\tfilterTextWrappers\r\n\t\t);\r\n\t}\r\n\r\n\tif ( filterInView?.operator === OPERATOR_IS_ALL ) {\r\n\t\treturn createInterpolateElement(\r\n\t\t\tsprintf(\r\n\t\t\t\t/* translators: 1: Filter name. 3: Filter value. e.g.: \"Author is all: Admin, Editor\". */\r\n\t\t\t\t__( '<Name>%1$s is all: </Name><Value>%2$s</Value>' ),\r\n\t\t\t\tfilter.name,\r\n\t\t\t\tactiveElements.map( ( element ) => element.label ).join( ', ' )\r\n\t\t\t),\r\n\t\t\tfilterTextWrappers\r\n\t\t);\r\n\t}\r\n\r\n\tif ( filterInView?.operator === OPERATOR_IS_NOT_ALL ) {\r\n\t\treturn createInterpolateElement(\r\n\t\t\tsprintf(\r\n\t\t\t\t/* translators: 1: Filter name. 3: Filter value. e.g.: \"Author is not all: Admin, Editor\". */\r\n\t\t\t\t__( '<Name>%1$s is not all: </Name><Value>%2$s</Value>' ),\r\n\t\t\t\tfilter.name,\r\n\t\t\t\tactiveElements.map( ( element ) => element.label ).join( ', ' )\r\n\t\t\t),\r\n\t\t\tfilterTextWrappers\r\n\t\t);\r\n\t}\r\n\r\n\tif ( filterInView?.operator === OPERATOR_IS ) {\r\n\t\treturn createInterpolateElement(\r\n\t\t\tsprintf(\r\n\t\t\t\t/* translators: 1: Filter name. 3: Filter value. e.g.: \"Author is: Admin\". */\r\n\t\t\t\t__( '<Name>%1$s is: </Name><Value>%2$s</Value>' ),\r\n\t\t\t\tfilter.name,\r\n\t\t\t\tactiveElements[ 0 ].label\r\n\t\t\t),\r\n\t\t\tfilterTextWrappers\r\n\t\t);\r\n\t}\r\n\r\n\tif ( filterInView?.operator === OPERATOR_IS_NOT ) {\r\n\t\treturn createInterpolateElement(\r\n\t\t\tsprintf(\r\n\t\t\t\t/* translators: 1: Filter name. 3: Filter value. e.g.: \"Author is not: Admin\". */\r\n\t\t\t\t__( '<Name>%1$s is not: </Name><Value>%2$s</Value>' ),\r\n\t\t\t\tfilter.name,\r\n\t\t\t\tactiveElements[ 0 ].label\r\n\t\t\t),\r\n\t\t\tfilterTextWrappers\r\n\t\t);\r\n\t}\r\n\r\n\treturn sprintf(\r\n\t\t/* translators: 1: Filter name e.g.: \"Unknown status for Author\". */\r\n\t\t__( 'Unknown status for %1$s' ),\r\n\t\tfilter.name\r\n\t);\r\n};\r\n\r\nfunction OperatorSelector( {\r\n\tfilter,\r\n\tview,\r\n\tonChangeView,\r\n}: OperatorSelectorProps ) {\r\n\tconst operatorOptions = filter.operators?.map( ( operator ) => ( {\r\n\t\tvalue: operator,\r\n\t\tlabel: OPERATORS[ operator ]?.label,\r\n\t} ) );\r\n\tconst currentFilter = view.filters?.find(\r\n\t\t( _filter ) => _filter.field === filter.field\r\n\t);\r\n\tconst value = currentFilter?.operator || filter.operators[ 0 ];\r\n\treturn (\r\n\t\toperatorOptions.length > 1 && (\r\n\t\t\t<HStack\r\n\t\t\t\tspacing={ 2 }\r\n\t\t\t\tjustify=\"flex-start\"\r\n\t\t\t\tclassName=\"dataviews-filters__summary-operators-container\"\r\n\t\t\t>\r\n\t\t\t\t<FlexItem className=\"dataviews-filters__summary-operators-filter-name\">\r\n\t\t\t\t\t{ filter.name }\r\n\t\t\t\t</FlexItem>\r\n\r\n\t\t\t\t<SelectControl\r\n\t\t\t\t\tlabel={ __( 'Conditions' ) }\r\n\t\t\t\t\tvalue={ value }\r\n\t\t\t\t\toptions={ operatorOptions }\r\n\t\t\t\t\tonChange={ ( newValue ) => {\r\n\t\t\t\t\t\tconst operator = newValue as Operator;\r\n\t\t\t\t\t\tconst newFilters = currentFilter\r\n\t\t\t\t\t\t\t? [\r\n\t\t\t\t\t\t\t\t\t...( view.filters ?? [] ).map(\r\n\t\t\t\t\t\t\t\t\t\t( _filter ) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\t\t\t_filter.field === filter.field\r\n\t\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t..._filter,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\toperator,\r\n\t\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\treturn _filter;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t  ]\r\n\t\t\t\t\t\t\t: [\r\n\t\t\t\t\t\t\t\t\t...( view.filters ?? [] ),\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tfield: filter.field,\r\n\t\t\t\t\t\t\t\t\t\toperator,\r\n\t\t\t\t\t\t\t\t\t\tvalue: undefined,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t  ];\r\n\t\t\t\t\t\tonChangeView( {\r\n\t\t\t\t\t\t\t...view,\r\n\t\t\t\t\t\t\tpage: 1,\r\n\t\t\t\t\t\t\tfilters: newFilters,\r\n\t\t\t\t\t\t} );\r\n\t\t\t\t\t} }\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\thideLabelFromVision\r\n\t\t\t\t/>\r\n\t\t\t</HStack>\r\n\t\t)\r\n\t);\r\n}\r\n\r\nexport default function FilterSummary( {\r\n\taddFilterRef,\r\n\topenedFilter,\r\n\t...commonProps\r\n}: FilterSummaryProps ) {\r\n\tconst toggleRef = useRef< HTMLDivElement >( null );\r\n\tconst { filter, view, onChangeView } = commonProps;\r\n\tconst filterInView = view.filters?.find(\r\n\t\t( f ) => f.field === filter.field\r\n\t);\r\n\tconst activeElements = filter.elements.filter( ( element ) => {\r\n\t\tif ( filter.singleSelection ) {\r\n\t\t\treturn element.value === filterInView?.value;\r\n\t\t}\r\n\t\treturn filterInView?.value?.includes( element.value );\r\n\t} );\r\n\tconst isPrimary = filter.isPrimary;\r\n\tconst hasValues = filterInView?.value !== undefined;\r\n\tconst canResetOrRemove = ! isPrimary || hasValues;\r\n\treturn (\r\n\t\t<Dropdown\r\n\t\t\tdefaultOpen={ openedFilter === filter.field }\r\n\t\t\tcontentClassName=\"dataviews-filters__summary-popover\"\r\n\t\t\tpopoverProps={ { placement: 'bottom-start', role: 'dialog' } }\r\n\t\t\tonClose={ () => {\r\n\t\t\t\ttoggleRef.current?.focus();\r\n\t\t\t} }\r\n\t\t\trenderToggle={ ( { isOpen, onToggle } ) => (\r\n\t\t\t\t<div className=\"dataviews-filters__summary-chip-container\">\r\n\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\ttext={ sprintf(\r\n\t\t\t\t\t\t\t/* translators: 1: Filter name. */\r\n\t\t\t\t\t\t\t__( 'Filter by: %1$s' ),\r\n\t\t\t\t\t\t\tfilter.name.toLowerCase()\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t\tplacement=\"top\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName={ clsx(\r\n\t\t\t\t\t\t\t\t'dataviews-filters__summary-chip',\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'has-reset': canResetOrRemove,\r\n\t\t\t\t\t\t\t\t\t'has-values': hasValues,\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\trole=\"button\"\r\n\t\t\t\t\t\t\ttabIndex={ 0 }\r\n\t\t\t\t\t\t\tonClick={ onToggle }\r\n\t\t\t\t\t\t\tonKeyDown={ ( event ) => {\r\n\t\t\t\t\t\t\t\tif ( [ ENTER, SPACE ].includes( event.key ) ) {\r\n\t\t\t\t\t\t\t\t\tonToggle();\r\n\t\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\taria-pressed={ isOpen }\r\n\t\t\t\t\t\t\taria-expanded={ isOpen }\r\n\t\t\t\t\t\t\tref={ toggleRef }\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<FilterText\r\n\t\t\t\t\t\t\t\tactiveElements={ activeElements }\r\n\t\t\t\t\t\t\t\tfilterInView={ filterInView }\r\n\t\t\t\t\t\t\t\tfilter={ filter }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t{ canResetOrRemove && (\r\n\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\ttext={ isPrimary ? __( 'Reset' ) : __( 'Remove' ) }\r\n\t\t\t\t\t\t\tplacement=\"top\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName={ clsx(\r\n\t\t\t\t\t\t\t\t\t'dataviews-filters__summary-chip-remove',\r\n\t\t\t\t\t\t\t\t\t{ 'has-values': hasValues }\r\n\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\t\t\t\tonChangeView( {\r\n\t\t\t\t\t\t\t\t\t\t...view,\r\n\t\t\t\t\t\t\t\t\t\tpage: 1,\r\n\t\t\t\t\t\t\t\t\t\tfilters: view.filters?.filter(\r\n\t\t\t\t\t\t\t\t\t\t\t( _filter ) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t_filter.field !== filter.field\r\n\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t} );\r\n\t\t\t\t\t\t\t\t\t// If the filter is not primary and can be removed, it will be added\r\n\t\t\t\t\t\t\t\t\t// back to the available filters from `Add filter` component.\r\n\t\t\t\t\t\t\t\t\tif ( ! isPrimary ) {\r\n\t\t\t\t\t\t\t\t\t\taddFilterRef.current?.focus();\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t// If is primary, focus the toggle button.\r\n\t\t\t\t\t\t\t\t\t\ttoggleRef.current?.focus();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Icon icon={ closeSmall } />\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t) }\r\n\t\t\t\t</div>\r\n\t\t\t) }\r\n\t\t\trenderContent={ () => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<VStack spacing={ 0 } justify=\"flex-start\">\r\n\t\t\t\t\t\t<OperatorSelector { ...commonProps } />\r\n\t\t\t\t\t\t<SearchWidget { ...commonProps } />\r\n\t\t\t\t\t</VStack>\r\n\t\t\t\t);\r\n\t\t\t} }\r\n\t\t/>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}