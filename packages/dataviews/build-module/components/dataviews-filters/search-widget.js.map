{"version":3,"names":["Ariakit","removeAccents","useInstanceId","__","sprintf","useState","useMemo","useDeferredValue","VisuallyHidden","Icon","Composite","search","check","SVG","Circle","jsx","_jsx","jsxs","_jsxs","radioCheck","xmlns","viewBox","children","cx","cy","r","normalizeSearchInput","input","trim","toLowerCase","EMPTY_ARRAY","getCurrentValue","filterDefinition","currentFilter","singleSelection","value","Array","isArray","getNewValue","includes","filter","v","generateFilterElementCompositeItemId","prefix","filterElementValue","ListBox","view","onChangeView","baseId","activeCompositeId","setActiveCompositeId","operators","length","undefined","filters","find","f","field","currentValue","virtualFocus","focusLoop","activeId","setActiveId","role","className","name","onFocusVisible","elements","render","Typeahead","map","element","Hover","Item","id","label","onClick","_view$filters","_view$filters2","newFilters","_filter","operator","page","icon","ComboboxList","searchValue","setSearchValue","deferredSearchValue","matches","normalizedSearch","item","ComboboxProvider","selectedValue","setSelectedValue","_view$filters3","_view$filters4","setValue","ComboboxLabel","Combobox","autoSelect","placeholder","alwaysVisible","ComboboxItem","resetValueOnSelect","hideOnClick","setValueOnClick","focusOnHover","ComboboxItemValue","description","SearchWidget","props","Widget"],"sources":["@wordpress/dataviews/src/components/dataviews-filters/search-widget.tsx"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\n// eslint-disable-next-line no-restricted-imports\r\nimport * as Ariakit from '@ariakit/react';\r\nimport removeAccents from 'remove-accents';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useInstanceId } from '@wordpress/compose';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { useState, useMemo, useDeferredValue } from '@wordpress/element';\r\nimport { VisuallyHidden, Icon, Composite } from '@wordpress/components';\r\nimport { search, check } from '@wordpress/icons';\r\nimport { SVG, Circle } from '@wordpress/primitives';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport type { Filter, NormalizedFilter, View } from '../../types';\r\n\r\ninterface SearchWidgetProps {\r\n\tview: View;\r\n\tfilter: NormalizedFilter;\r\n\tonChangeView: ( view: View ) => void;\r\n}\r\n\r\nconst radioCheck = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Circle cx={ 12 } cy={ 12 } r={ 3 }></Circle>\r\n\t</SVG>\r\n);\r\n\r\nfunction normalizeSearchInput( input = '' ) {\r\n\treturn removeAccents( input.trim().toLowerCase() );\r\n}\r\n\r\nconst EMPTY_ARRAY: [] = [];\r\nconst getCurrentValue = (\r\n\tfilterDefinition: NormalizedFilter,\r\n\tcurrentFilter?: Filter\r\n) => {\r\n\tif ( filterDefinition.singleSelection ) {\r\n\t\treturn currentFilter?.value;\r\n\t}\r\n\r\n\tif ( Array.isArray( currentFilter?.value ) ) {\r\n\t\treturn currentFilter.value;\r\n\t}\r\n\r\n\tif ( ! Array.isArray( currentFilter?.value ) && !! currentFilter?.value ) {\r\n\t\treturn [ currentFilter.value ];\r\n\t}\r\n\r\n\treturn EMPTY_ARRAY;\r\n};\r\n\r\nconst getNewValue = (\r\n\tfilterDefinition: NormalizedFilter,\r\n\tcurrentFilter: Filter | undefined,\r\n\tvalue: any\r\n) => {\r\n\tif ( filterDefinition.singleSelection ) {\r\n\t\treturn value;\r\n\t}\r\n\r\n\tif ( Array.isArray( currentFilter?.value ) ) {\r\n\t\treturn currentFilter.value.includes( value )\r\n\t\t\t? currentFilter.value.filter( ( v ) => v !== value )\r\n\t\t\t: [ ...currentFilter.value, value ];\r\n\t}\r\n\r\n\treturn [ value ];\r\n};\r\n\r\nfunction generateFilterElementCompositeItemId(\r\n\tprefix: string,\r\n\tfilterElementValue: string\r\n) {\r\n\treturn `${ prefix }-${ filterElementValue }`;\r\n}\r\n\r\nfunction ListBox( { view, filter, onChangeView }: SearchWidgetProps ) {\r\n\tconst baseId = useInstanceId( ListBox, 'dataviews-filter-list-box' );\r\n\r\n\tconst [ activeCompositeId, setActiveCompositeId ] = useState<\r\n\t\tstring | null | undefined\r\n\t>(\r\n\t\t// When there are one or less operators, the first item is set as active\r\n\t\t// (by setting the initial `activeId` to `undefined`).\r\n\t\t// With 2 or more operators, the focus is moved on the operators control\r\n\t\t// (by setting the initial `activeId` to `null`), meaning that there won't\r\n\t\t// be an active item initially. Focus is then managed via the\r\n\t\t// `onFocusVisible` callback.\r\n\t\tfilter.operators?.length === 1 ? undefined : null\r\n\t);\r\n\tconst currentFilter = view.filters?.find(\r\n\t\t( f ) => f.field === filter.field\r\n\t);\r\n\tconst currentValue = getCurrentValue( filter, currentFilter );\r\n\treturn (\r\n\t\t<Composite\r\n\t\t\tvirtualFocus\r\n\t\t\tfocusLoop\r\n\t\t\tactiveId={ activeCompositeId }\r\n\t\t\tsetActiveId={ setActiveCompositeId }\r\n\t\t\trole=\"listbox\"\r\n\t\t\tclassName=\"dataviews-filters__search-widget-listbox\"\r\n\t\t\taria-label={ sprintf(\r\n\t\t\t\t/* translators: List of items for a filter. 1: Filter name. e.g.: \"List of: Author\". */\r\n\t\t\t\t__( 'List of: %1$s' ),\r\n\t\t\t\tfilter.name\r\n\t\t\t) }\r\n\t\t\tonFocusVisible={ () => {\r\n\t\t\t\t// `onFocusVisible` needs the `Composite` component to be focusable,\r\n\t\t\t\t// which is implicitly achieved via the `virtualFocus` prop.\r\n\t\t\t\tif ( ! activeCompositeId && filter.elements.length ) {\r\n\t\t\t\t\tsetActiveCompositeId(\r\n\t\t\t\t\t\tgenerateFilterElementCompositeItemId(\r\n\t\t\t\t\t\t\tbaseId,\r\n\t\t\t\t\t\t\tfilter.elements[ 0 ].value\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t} }\r\n\t\t\trender={ <Composite.Typeahead /> }\r\n\t\t>\r\n\t\t\t{ filter.elements.map( ( element ) => (\r\n\t\t\t\t<Composite.Hover\r\n\t\t\t\t\tkey={ element.value }\r\n\t\t\t\t\trender={\r\n\t\t\t\t\t\t<Composite.Item\r\n\t\t\t\t\t\t\tid={ generateFilterElementCompositeItemId(\r\n\t\t\t\t\t\t\t\tbaseId,\r\n\t\t\t\t\t\t\t\telement.value\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\trender={\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\taria-label={ element.label }\r\n\t\t\t\t\t\t\t\t\trole=\"option\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"dataviews-filters__search-widget-listitem\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\t\t\tconst newFilters = currentFilter\r\n\t\t\t\t\t\t\t\t\t? [\r\n\t\t\t\t\t\t\t\t\t\t\t...( view.filters ?? [] ).map(\r\n\t\t\t\t\t\t\t\t\t\t\t\t( _filter ) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t_filter.field ===\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfilter.field\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t..._filter,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toperator:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentFilter.operator ||\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfilter\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.operators[ 0 ],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: getNewValue(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfilter,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentFilter,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\telement.value\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn _filter;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t  ]\r\n\t\t\t\t\t\t\t\t\t: [\r\n\t\t\t\t\t\t\t\t\t\t\t...( view.filters ?? [] ),\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tfield: filter.field,\r\n\t\t\t\t\t\t\t\t\t\t\t\toperator: filter.operators[ 0 ],\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: getNewValue(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfilter,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentFilter,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\telement.value\r\n\t\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t  ];\r\n\t\t\t\t\t\t\t\tonChangeView( {\r\n\t\t\t\t\t\t\t\t\t...view,\r\n\t\t\t\t\t\t\t\t\tpage: 1,\r\n\t\t\t\t\t\t\t\t\tfilters: newFilters,\r\n\t\t\t\t\t\t\t\t} );\r\n\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t}\r\n\t\t\t\t>\r\n\t\t\t\t\t<span className=\"dataviews-filters__search-widget-listitem-check\">\r\n\t\t\t\t\t\t{ filter.singleSelection &&\r\n\t\t\t\t\t\t\tcurrentValue === element.value && (\r\n\t\t\t\t\t\t\t\t<Icon icon={ radioCheck } />\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t{ ! filter.singleSelection &&\r\n\t\t\t\t\t\t\tcurrentValue.includes( element.value ) && (\r\n\t\t\t\t\t\t\t\t<Icon icon={ check } />\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<span>{ element.label }</span>\r\n\t\t\t\t</Composite.Hover>\r\n\t\t\t) ) }\r\n\t\t</Composite>\r\n\t);\r\n}\r\n\r\nfunction ComboboxList( { view, filter, onChangeView }: SearchWidgetProps ) {\r\n\tconst [ searchValue, setSearchValue ] = useState( '' );\r\n\tconst deferredSearchValue = useDeferredValue( searchValue );\r\n\tconst currentFilter = view.filters?.find(\r\n\t\t( _filter ) => _filter.field === filter.field\r\n\t);\r\n\tconst currentValue = getCurrentValue( filter, currentFilter );\r\n\tconst matches = useMemo( () => {\r\n\t\tconst normalizedSearch = normalizeSearchInput( deferredSearchValue );\r\n\t\treturn filter.elements.filter( ( item ) =>\r\n\t\t\tnormalizeSearchInput( item.label ).includes( normalizedSearch )\r\n\t\t);\r\n\t}, [ filter.elements, deferredSearchValue ] );\r\n\treturn (\r\n\t\t<Ariakit.ComboboxProvider\r\n\t\t\tselectedValue={ currentValue }\r\n\t\t\tsetSelectedValue={ ( value ) => {\r\n\t\t\t\tconst newFilters = currentFilter\r\n\t\t\t\t\t? [\r\n\t\t\t\t\t\t\t...( view.filters ?? [] ).map( ( _filter ) => {\r\n\t\t\t\t\t\t\t\tif ( _filter.field === filter.field ) {\r\n\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t..._filter,\r\n\t\t\t\t\t\t\t\t\t\toperator:\r\n\t\t\t\t\t\t\t\t\t\t\tcurrentFilter.operator ||\r\n\t\t\t\t\t\t\t\t\t\t\tfilter.operators[ 0 ],\r\n\t\t\t\t\t\t\t\t\t\tvalue,\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn _filter;\r\n\t\t\t\t\t\t\t} ),\r\n\t\t\t\t\t  ]\r\n\t\t\t\t\t: [\r\n\t\t\t\t\t\t\t...( view.filters ?? [] ),\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tfield: filter.field,\r\n\t\t\t\t\t\t\t\toperator: filter.operators[ 0 ],\r\n\t\t\t\t\t\t\t\tvalue,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t  ];\r\n\t\t\t\tonChangeView( {\r\n\t\t\t\t\t...view,\r\n\t\t\t\t\tpage: 1,\r\n\t\t\t\t\tfilters: newFilters,\r\n\t\t\t\t} );\r\n\t\t\t} }\r\n\t\t\tsetValue={ setSearchValue }\r\n\t\t>\r\n\t\t\t<div className=\"dataviews-filters__search-widget-filter-combobox__wrapper\">\r\n\t\t\t\t<Ariakit.ComboboxLabel\r\n\t\t\t\t\trender={\r\n\t\t\t\t\t\t<VisuallyHidden>\r\n\t\t\t\t\t\t\t{ __( 'Search items' ) }\r\n\t\t\t\t\t\t</VisuallyHidden>\r\n\t\t\t\t\t}\r\n\t\t\t\t>\r\n\t\t\t\t\t{ __( 'Search items' ) }\r\n\t\t\t\t</Ariakit.ComboboxLabel>\r\n\t\t\t\t<Ariakit.Combobox\r\n\t\t\t\t\tautoSelect=\"always\"\r\n\t\t\t\t\tplaceholder={ __( 'Search' ) }\r\n\t\t\t\t\tclassName=\"dataviews-filters__search-widget-filter-combobox__input\"\r\n\t\t\t\t/>\r\n\t\t\t\t<div className=\"dataviews-filters__search-widget-filter-combobox__icon\">\r\n\t\t\t\t\t<Icon icon={ search } />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<Ariakit.ComboboxList\r\n\t\t\t\tclassName=\"dataviews-filters__search-widget-filter-combobox-list\"\r\n\t\t\t\talwaysVisible\r\n\t\t\t>\r\n\t\t\t\t{ matches.map( ( element ) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Ariakit.ComboboxItem\r\n\t\t\t\t\t\t\tresetValueOnSelect={ false }\r\n\t\t\t\t\t\t\tkey={ element.value }\r\n\t\t\t\t\t\t\tvalue={ element.value }\r\n\t\t\t\t\t\t\tclassName=\"dataviews-filters__search-widget-listitem\"\r\n\t\t\t\t\t\t\thideOnClick={ false }\r\n\t\t\t\t\t\t\tsetValueOnClick={ false }\r\n\t\t\t\t\t\t\tfocusOnHover\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<span className=\"dataviews-filters__search-widget-listitem-check\">\r\n\t\t\t\t\t\t\t\t{ filter.singleSelection &&\r\n\t\t\t\t\t\t\t\t\tcurrentValue === element.value && (\r\n\t\t\t\t\t\t\t\t\t\t<Icon icon={ radioCheck } />\r\n\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t{ ! filter.singleSelection &&\r\n\t\t\t\t\t\t\t\t\tcurrentValue.includes( element.value ) && (\r\n\t\t\t\t\t\t\t\t\t\t<Icon icon={ check } />\r\n\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t<Ariakit.ComboboxItemValue\r\n\t\t\t\t\t\t\t\t\tclassName=\"dataviews-filters__search-widget-filter-combobox-item-value\"\r\n\t\t\t\t\t\t\t\t\tvalue={ element.label }\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t{ !! element.description && (\r\n\t\t\t\t\t\t\t\t\t<span className=\"dataviews-filters__search-widget-listitem-description\">\r\n\t\t\t\t\t\t\t\t\t\t{ element.description }\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</Ariakit.ComboboxItem>\r\n\t\t\t\t\t);\r\n\t\t\t\t} ) }\r\n\t\t\t\t{ ! matches.length && <p>{ __( 'No results found' ) }</p> }\r\n\t\t\t</Ariakit.ComboboxList>\r\n\t\t</Ariakit.ComboboxProvider>\r\n\t);\r\n}\r\n\r\nexport default function SearchWidget( props: SearchWidgetProps ) {\r\n\tconst Widget = props.filter.elements.length > 10 ? ComboboxList : ListBox;\r\n\treturn <Widget { ...props } />;\r\n}\r\n"],"mappings":"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","ignoreList":[]}