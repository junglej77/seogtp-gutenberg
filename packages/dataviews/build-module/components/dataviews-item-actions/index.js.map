{"version":3,"names":["Button","Modal","__experimentalHStack","HStack","privateApis","componentsPrivateApis","__","useMemo","useState","moreVertical","useRegistry","unlock","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","DropdownMenuV2","kebabCase","ButtonTrigger","action","onClick","items","label","icon","isDestructive","size","DropdownMenuItemTrigger","Item","hideOnClick","children","ItemLabel","ActionModal","closeModal","title","modalHeader","__experimentalHideHeader","hideModalHeader","onRequestClose","focusOnMount","overlayClassName","id","RenderModal","ActionWithModal","ActionTrigger","isBusy","isModalOpen","setIsModalOpen","actionTriggerProps","ActionsDropdownMenuGroup","actions","item","registry","Group","map","callback","ItemActions","isCompact","primaryActions","eligibleActions","_eligibleActions","filter","isEligible","_primaryActions","isPrimary","CompactItemActions","spacing","justify","className","style","flexShrink","width","length","trigger","accessibleWhenDisabled","disabled","placement"],"sources":["@wordpress/dataviews/src/components/dataviews-item-actions/index.tsx"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport type { MouseEventHandler, ReactElement } from 'react';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tButton,\r\n\tModal,\r\n\t__experimentalHStack as HStack,\r\n\tprivateApis as componentsPrivateApis,\r\n} from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useMemo, useState } from '@wordpress/element';\r\nimport { moreVertical } from '@wordpress/icons';\r\nimport { useRegistry } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { unlock } from '../../lock-unlock';\r\nimport type { Action, ActionModal as ActionModalType } from '../../types';\r\n\r\nconst { DropdownMenuV2, kebabCase } = unlock( componentsPrivateApis );\r\n\r\nexport interface ActionTriggerProps< Item > {\r\n\taction: Action< Item >;\r\n\tonClick: MouseEventHandler;\r\n\tisBusy?: boolean;\r\n\titems: Item[];\r\n}\r\n\r\ninterface ActionModalProps< Item > {\r\n\taction: ActionModalType< Item >;\r\n\titems: Item[];\r\n\tcloseModal?: () => void;\r\n}\r\n\r\ninterface ActionWithModalProps< Item > extends ActionModalProps< Item > {\r\n\tActionTrigger: ( props: ActionTriggerProps< Item > ) => ReactElement;\r\n\tisBusy?: boolean;\r\n}\r\n\r\ninterface ActionsDropdownMenuGroupProps< Item > {\r\n\tactions: Action< Item >[];\r\n\titem: Item;\r\n}\r\n\r\ninterface ItemActionsProps< Item > {\r\n\titem: Item;\r\n\tactions: Action< Item >[];\r\n\tisCompact?: boolean;\r\n}\r\n\r\ninterface CompactItemActionsProps< Item > {\r\n\titem: Item;\r\n\tactions: Action< Item >[];\r\n}\r\n\r\nfunction ButtonTrigger< Item >( {\r\n\taction,\r\n\tonClick,\r\n\titems,\r\n}: ActionTriggerProps< Item > ) {\r\n\tconst label =\r\n\t\ttypeof action.label === 'string' ? action.label : action.label( items );\r\n\treturn (\r\n\t\t<Button\r\n\t\t\tlabel={ label }\r\n\t\t\ticon={ action.icon }\r\n\t\t\tisDestructive={ action.isDestructive }\r\n\t\t\tsize=\"compact\"\r\n\t\t\tonClick={ onClick }\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nfunction DropdownMenuItemTrigger< Item >( {\r\n\taction,\r\n\tonClick,\r\n\titems,\r\n}: ActionTriggerProps< Item > ) {\r\n\tconst label =\r\n\t\ttypeof action.label === 'string' ? action.label : action.label( items );\r\n\treturn (\r\n\t\t<DropdownMenuV2.Item\r\n\t\t\tonClick={ onClick }\r\n\t\t\thideOnClick={ ! ( 'RenderModal' in action ) }\r\n\t\t>\r\n\t\t\t<DropdownMenuV2.ItemLabel>{ label }</DropdownMenuV2.ItemLabel>\r\n\t\t</DropdownMenuV2.Item>\r\n\t);\r\n}\r\n\r\nexport function ActionModal< Item >( {\r\n\taction,\r\n\titems,\r\n\tcloseModal,\r\n}: ActionModalProps< Item > ) {\r\n\tconst label =\r\n\t\ttypeof action.label === 'string' ? action.label : action.label( items );\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\ttitle={ action.modalHeader || label }\r\n\t\t\t__experimentalHideHeader={ !! action.hideModalHeader }\r\n\t\t\tonRequestClose={ closeModal ?? ( () => {} ) }\r\n\t\t\tfocusOnMount=\"firstContentElement\"\r\n\t\t\tsize=\"small\"\r\n\t\t\toverlayClassName={ `dataviews-action-modal dataviews-action-modal__${ kebabCase(\r\n\t\t\t\taction.id\r\n\t\t\t) }` }\r\n\t\t>\r\n\t\t\t<action.RenderModal items={ items } closeModal={ closeModal } />\r\n\t\t</Modal>\r\n\t);\r\n}\r\n\r\nexport function ActionWithModal< Item >( {\r\n\taction,\r\n\titems,\r\n\tActionTrigger,\r\n\tisBusy,\r\n}: ActionWithModalProps< Item > ) {\r\n\tconst [ isModalOpen, setIsModalOpen ] = useState( false );\r\n\tconst actionTriggerProps = {\r\n\t\taction,\r\n\t\tonClick: () => {\r\n\t\t\tsetIsModalOpen( true );\r\n\t\t},\r\n\t\titems,\r\n\t\tisBusy,\r\n\t};\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<ActionTrigger { ...actionTriggerProps } />\r\n\t\t\t{ isModalOpen && (\r\n\t\t\t\t<ActionModal\r\n\t\t\t\t\taction={ action }\r\n\t\t\t\t\titems={ items }\r\n\t\t\t\t\tcloseModal={ () => setIsModalOpen( false ) }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport function ActionsDropdownMenuGroup< Item >( {\r\n\tactions,\r\n\titem,\r\n}: ActionsDropdownMenuGroupProps< Item > ) {\r\n\tconst registry = useRegistry();\r\n\treturn (\r\n\t\t<DropdownMenuV2.Group>\r\n\t\t\t{ actions.map( ( action ) => {\r\n\t\t\t\tif ( 'RenderModal' in action ) {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<ActionWithModal\r\n\t\t\t\t\t\t\tkey={ action.id }\r\n\t\t\t\t\t\t\taction={ action }\r\n\t\t\t\t\t\t\titems={ [ item ] }\r\n\t\t\t\t\t\t\tActionTrigger={ DropdownMenuItemTrigger }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<DropdownMenuItemTrigger\r\n\t\t\t\t\t\tkey={ action.id }\r\n\t\t\t\t\t\taction={ action }\r\n\t\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\t\taction.callback( [ item ], { registry } );\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t\titems={ [ item ] }\r\n\t\t\t\t\t/>\r\n\t\t\t\t);\r\n\t\t\t} ) }\r\n\t\t</DropdownMenuV2.Group>\r\n\t);\r\n}\r\n\r\nexport default function ItemActions< Item >( {\r\n\titem,\r\n\tactions,\r\n\tisCompact,\r\n}: ItemActionsProps< Item > ) {\r\n\tconst registry = useRegistry();\r\n\tconst { primaryActions, eligibleActions } = useMemo( () => {\r\n\t\t// If an action is eligible for all items, doesn't need\r\n\t\t// to provide the `isEligible` function.\r\n\t\tconst _eligibleActions = actions.filter(\r\n\t\t\t( action ) => ! action.isEligible || action.isEligible( item )\r\n\t\t);\r\n\t\tconst _primaryActions = _eligibleActions.filter(\r\n\t\t\t( action ) => action.isPrimary && !! action.icon\r\n\t\t);\r\n\t\treturn {\r\n\t\t\tprimaryActions: _primaryActions,\r\n\t\t\teligibleActions: _eligibleActions,\r\n\t\t};\r\n\t}, [ actions, item ] );\r\n\tif ( isCompact ) {\r\n\t\treturn <CompactItemActions item={ item } actions={ eligibleActions } />;\r\n\t}\r\n\treturn (\r\n\t\t<HStack\r\n\t\t\tspacing={ 1 }\r\n\t\t\tjustify=\"flex-end\"\r\n\t\t\tclassName=\"dataviews-item-actions\"\r\n\t\t\tstyle={ {\r\n\t\t\t\tflexShrink: '0',\r\n\t\t\t\twidth: 'auto',\r\n\t\t\t} }\r\n\t\t>\r\n\t\t\t{ !! primaryActions.length &&\r\n\t\t\t\tprimaryActions.map( ( action ) => {\r\n\t\t\t\t\tif ( 'RenderModal' in action ) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<ActionWithModal\r\n\t\t\t\t\t\t\t\tkey={ action.id }\r\n\t\t\t\t\t\t\t\taction={ action }\r\n\t\t\t\t\t\t\t\titems={ [ item ] }\r\n\t\t\t\t\t\t\t\tActionTrigger={ ButtonTrigger }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<ButtonTrigger\r\n\t\t\t\t\t\t\tkey={ action.id }\r\n\t\t\t\t\t\t\taction={ action }\r\n\t\t\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\t\t\taction.callback( [ item ], { registry } );\r\n\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\titems={ [ item ] }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t} ) }\r\n\t\t\t<CompactItemActions item={ item } actions={ eligibleActions } />\r\n\t\t</HStack>\r\n\t);\r\n}\r\n\r\nfunction CompactItemActions< Item >( {\r\n\titem,\r\n\tactions,\r\n}: CompactItemActionsProps< Item > ) {\r\n\treturn (\r\n\t\t<DropdownMenuV2\r\n\t\t\ttrigger={\r\n\t\t\t\t<Button\r\n\t\t\t\t\tsize=\"compact\"\r\n\t\t\t\t\ticon={ moreVertical }\r\n\t\t\t\t\tlabel={ __( 'Actions' ) }\r\n\t\t\t\t\taccessibleWhenDisabled\r\n\t\t\t\t\tdisabled={ ! actions.length }\r\n\t\t\t\t\tclassName=\"dataviews-all-actions-button\"\r\n\t\t\t\t/>\r\n\t\t\t}\r\n\t\t\tplacement=\"bottom-end\"\r\n\t\t>\r\n\t\t\t<ActionsDropdownMenuGroup actions={ actions } item={ item } />\r\n\t\t</DropdownMenuV2>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}