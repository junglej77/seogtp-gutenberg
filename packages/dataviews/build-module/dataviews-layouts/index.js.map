{"version":3,"names":["__","isRTL","blockTable","category","formatListBullets","formatListBulletsRTL","ViewTable","ViewGrid","ViewList","LAYOUT_GRID","LAYOUT_LIST","LAYOUT_TABLE","VIEW_LAYOUTS","type","label","component","icon","getNotHidableFieldIds","view","_view$layout$combined","layout","primaryField","concat","combinedFields","flatMap","field","children","filter","item","mediaField","getCombinedFieldIds","forEach","combination","push","getVisibleFieldIds","fields","fieldsToExclude","id","includes","visibleFields","map","getHiddenFieldIds","enableHiding"],"sources":["@wordpress/dataviews/src/dataviews-layouts/index.ts"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { __, isRTL } from '@wordpress/i18n';\r\nimport {\r\n\tblockTable,\r\n\tcategory,\r\n\tformatListBullets,\r\n\tformatListBulletsRTL,\r\n} from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport ViewTable from './table';\r\nimport ViewGrid from './grid';\r\nimport ViewList from './list';\r\nimport { LAYOUT_GRID, LAYOUT_LIST, LAYOUT_TABLE } from '../constants';\r\nimport type { View, Field } from '../types';\r\n\r\nexport const VIEW_LAYOUTS = [\r\n\t{\r\n\t\ttype: LAYOUT_TABLE,\r\n\t\tlabel: __( 'Table' ),\r\n\t\tcomponent: ViewTable,\r\n\t\ticon: blockTable,\r\n\t},\r\n\t{\r\n\t\ttype: LAYOUT_GRID,\r\n\t\tlabel: __( 'Grid' ),\r\n\t\tcomponent: ViewGrid,\r\n\t\ticon: category,\r\n\t},\r\n\t{\r\n\t\ttype: LAYOUT_LIST,\r\n\t\tlabel: __( 'List' ),\r\n\t\tcomponent: ViewList,\r\n\t\ticon: isRTL() ? formatListBulletsRTL : formatListBullets,\r\n\t},\r\n];\r\n\r\nexport function getNotHidableFieldIds( view: View ): string[] {\r\n\tif ( view.type === 'table' ) {\r\n\t\treturn [ view.layout?.primaryField ]\r\n\t\t\t.concat(\r\n\t\t\t\tview.layout?.combinedFields?.flatMap(\r\n\t\t\t\t\t( field ) => field.children\r\n\t\t\t\t) ?? []\r\n\t\t\t)\r\n\t\t\t.filter( ( item ): item is string => !! item );\r\n\t}\r\n\r\n\tif ( view.type === 'grid' ) {\r\n\t\treturn [ view.layout?.primaryField, view.layout?.mediaField ].filter(\r\n\t\t\t( item ): item is string => !! item\r\n\t\t);\r\n\t}\r\n\r\n\tif ( view.type === 'list' ) {\r\n\t\treturn [ view.layout?.primaryField, view.layout?.mediaField ].filter(\r\n\t\t\t( item ): item is string => !! item\r\n\t\t);\r\n\t}\r\n\r\n\treturn [];\r\n}\r\n\r\nfunction getCombinedFieldIds( view: View ): string[] {\r\n\tconst combinedFields: string[] = [];\r\n\tif ( view.type === LAYOUT_TABLE && view.layout?.combinedFields ) {\r\n\t\tview.layout.combinedFields.forEach( ( combination ) => {\r\n\t\t\tcombinedFields.push( ...combination.children );\r\n\t\t} );\r\n\t}\r\n\treturn combinedFields;\r\n}\r\n\r\nexport function getVisibleFieldIds(\r\n\tview: View,\r\n\tfields: Field< any >[]\r\n): string[] {\r\n\tconst fieldsToExclude = getCombinedFieldIds( view );\r\n\r\n\tif ( view.fields ) {\r\n\t\treturn view.fields.filter( ( id ) => ! fieldsToExclude.includes( id ) );\r\n\t}\r\n\r\n\tconst visibleFields = [];\r\n\tif ( view.type === LAYOUT_TABLE && view.layout?.combinedFields ) {\r\n\t\tvisibleFields.push(\r\n\t\t\t...view.layout.combinedFields.map( ( { id } ) => id )\r\n\t\t);\r\n\t}\r\n\tvisibleFields.push(\r\n\t\t...fields\r\n\t\t\t.filter( ( { id } ) => ! fieldsToExclude.includes( id ) )\r\n\t\t\t.map( ( { id } ) => id )\r\n\t);\r\n\r\n\treturn visibleFields;\r\n}\r\n\r\nexport function getHiddenFieldIds(\r\n\tview: View,\r\n\tfields: Field< any >[]\r\n): string[] {\r\n\tconst fieldsToExclude = [\r\n\t\t...getCombinedFieldIds( view ),\r\n\t\t...getVisibleFieldIds( view, fields ),\r\n\t];\r\n\r\n\t// The media field does not need to be in the view.fields to be displayed.\r\n\tif ( view.type === LAYOUT_GRID && view.layout?.mediaField ) {\r\n\t\tfieldsToExclude.push( view.layout?.mediaField );\r\n\t}\r\n\r\n\tif ( view.type === LAYOUT_LIST && view.layout?.mediaField ) {\r\n\t\tfieldsToExclude.push( view.layout?.mediaField );\r\n\t}\r\n\r\n\treturn fields\r\n\t\t.filter(\r\n\t\t\t( { id, enableHiding } ) =>\r\n\t\t\t\t! fieldsToExclude.includes( id ) && enableHiding\r\n\t\t)\r\n\t\t.map( ( { id } ) => id );\r\n}\r\n"],"mappings":"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","ignoreList":[]}