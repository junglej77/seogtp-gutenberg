{"version":3,"names":["clsx","__","Spinner","__experimentalHStack","HStack","__experimentalVStack","VStack","useEffect","useId","useRef","useState","SingleSelectionCheckbox","ItemActions","sortValues","useSomeItemHasAPossibleBulkAction","useHasAPossibleBulkAction","BulkSelectionCheckbox","ColumnHeaderMenu","getVisibleFieldIds","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TableColumn","column","fields","view","props","field","find","f","id","TableColumnField","combinedField","layout","combinedFields","TableColumnCombined","primaryField","item","className","children","render","map","child","direction","spacing","TableRow","hasBulkActions","actions","selection","getItemId","onChangeSelection","hasPossibleBulkAction","isSelected","includes","isHovered","setIsHovered","handleMouseEnter","handleMouseLeave","isTouchDeviceRef","columns","onMouseEnter","onMouseLeave","onTouchStart","current","onClick","document","getSelection","type","filter","itemId","style","width","disabled","_view$layout$styles$c","maxWidth","minWidth","styles","length","e","stopPropagation","ViewTable","data","isLoading","onChangeView","setOpenedFilter","headerMenuRefs","Map","headerMenuToFocusRef","nextHeaderMenuToFocus","setNextHeaderMenuToFocus","focus","undefined","tableNoticeId","onHide","hidden","get","fallback","node","hasData","scope","index","_view$layout$styles$c2","sort","ref","set","delete","fieldId","toString"],"sources":["@wordpress/dataviews/src/dataviews-layouts/table/index.tsx"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport {\r\n\tSpinner,\r\n\t__experimentalHStack as HStack,\r\n\t__experimentalVStack as VStack,\r\n} from '@wordpress/components';\r\nimport { useEffect, useId, useRef, useState } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport SingleSelectionCheckbox from '../../components/dataviews-selection-checkbox';\r\nimport ItemActions from '../../components/dataviews-item-actions';\r\nimport { sortValues } from '../../constants';\r\nimport {\r\n\tuseSomeItemHasAPossibleBulkAction,\r\n\tuseHasAPossibleBulkAction,\r\n\tBulkSelectionCheckbox,\r\n} from '../../components/dataviews-bulk-actions';\r\nimport type {\r\n\tAction,\r\n\tNormalizedField,\r\n\tViewTable as ViewTableType,\r\n\tViewTableProps,\r\n\tCombinedField,\r\n} from '../../types';\r\nimport type { SetSelection } from '../../private-types';\r\nimport ColumnHeaderMenu from './column-header-menu';\r\nimport { getVisibleFieldIds } from '../index';\r\n\r\ninterface TableColumnFieldProps< Item > {\r\n\tprimaryField?: NormalizedField< Item >;\r\n\tfield: NormalizedField< Item >;\r\n\titem: Item;\r\n}\r\n\r\ninterface TableColumnCombinedProps< Item > {\r\n\tprimaryField?: NormalizedField< Item >;\r\n\tfields: NormalizedField< Item >[];\r\n\tfield: CombinedField;\r\n\titem: Item;\r\n\tview: ViewTableType;\r\n}\r\n\r\ninterface TableColumnProps< Item > {\r\n\tprimaryField?: NormalizedField< Item >;\r\n\tfields: NormalizedField< Item >[];\r\n\titem: Item;\r\n\tcolumn: string;\r\n\tview: ViewTableType;\r\n}\r\n\r\ninterface TableRowProps< Item > {\r\n\thasBulkActions: boolean;\r\n\titem: Item;\r\n\tactions: Action< Item >[];\r\n\tfields: NormalizedField< Item >[];\r\n\tid: string;\r\n\tview: ViewTableType;\r\n\tprimaryField?: NormalizedField< Item >;\r\n\tselection: string[];\r\n\tgetItemId: ( item: Item ) => string;\r\n\tonChangeSelection: SetSelection;\r\n}\r\n\r\nfunction TableColumn< Item >( {\r\n\tcolumn,\r\n\tfields,\r\n\tview,\r\n\t...props\r\n}: TableColumnProps< Item > ) {\r\n\tconst field = fields.find( ( f ) => f.id === column );\r\n\tif ( !! field ) {\r\n\t\treturn <TableColumnField { ...props } field={ field } />;\r\n\t}\r\n\tconst combinedField = view.layout?.combinedFields?.find(\r\n\t\t( f ) => f.id === column\r\n\t);\r\n\tif ( !! combinedField ) {\r\n\t\treturn (\r\n\t\t\t<TableColumnCombined\r\n\t\t\t\t{ ...props }\r\n\t\t\t\tfields={ fields }\r\n\t\t\t\tview={ view }\r\n\t\t\t\tfield={ combinedField }\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\treturn null;\r\n}\r\n\r\nfunction TableColumnField< Item >( {\r\n\tprimaryField,\r\n\titem,\r\n\tfield,\r\n}: TableColumnFieldProps< Item > ) {\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={ clsx( 'dataviews-view-table__cell-content-wrapper', {\r\n\t\t\t\t'dataviews-view-table__primary-field':\r\n\t\t\t\t\tprimaryField?.id === field.id,\r\n\t\t\t} ) }\r\n\t\t>\r\n\t\t\t<field.render { ...{ item } } />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction TableColumnCombined< Item >( {\r\n\tfield,\r\n\t...props\r\n}: TableColumnCombinedProps< Item > ) {\r\n\tconst children = field.children.map( ( child ) => (\r\n\t\t<TableColumn key={ child } { ...props } column={ child } />\r\n\t) );\r\n\r\n\tif ( field.direction === 'horizontal' ) {\r\n\t\treturn <HStack spacing={ 3 }>{ children }</HStack>;\r\n\t}\r\n\treturn <VStack spacing={ 0 }>{ children }</VStack>;\r\n}\r\n\r\nfunction TableRow< Item >( {\r\n\thasBulkActions,\r\n\titem,\r\n\tactions,\r\n\tfields,\r\n\tid,\r\n\tview,\r\n\tprimaryField,\r\n\tselection,\r\n\tgetItemId,\r\n\tonChangeSelection,\r\n}: TableRowProps< Item > ) {\r\n\tconst hasPossibleBulkAction = useHasAPossibleBulkAction( actions, item );\r\n\tconst isSelected = hasPossibleBulkAction && selection.includes( id );\r\n\tconst [ isHovered, setIsHovered ] = useState( false );\r\n\r\n\tconst handleMouseEnter = () => {\r\n\t\tsetIsHovered( true );\r\n\t};\r\n\tconst handleMouseLeave = () => {\r\n\t\tsetIsHovered( false );\r\n\t};\r\n\r\n\t// Will be set to true if `onTouchStart` fires. This happens before\r\n\t// `onClick` and can be used to exclude touchscreen devices from certain\r\n\t// behaviours.\r\n\tconst isTouchDeviceRef = useRef( false );\r\n\tconst columns = getVisibleFieldIds( view, fields );\r\n\r\n\treturn (\r\n\t\t<tr\r\n\t\t\tclassName={ clsx( 'dataviews-view-table__row', {\r\n\t\t\t\t'is-selected': hasPossibleBulkAction && isSelected,\r\n\t\t\t\t'is-hovered': isHovered,\r\n\t\t\t\t'has-bulk-actions': hasPossibleBulkAction,\r\n\t\t\t} ) }\r\n\t\t\tonMouseEnter={ handleMouseEnter }\r\n\t\t\tonMouseLeave={ handleMouseLeave }\r\n\t\t\tonTouchStart={ () => {\r\n\t\t\t\tisTouchDeviceRef.current = true;\r\n\t\t\t} }\r\n\t\t\tonClick={ () => {\r\n\t\t\t\tif ( ! hasPossibleBulkAction ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (\r\n\t\t\t\t\t! isTouchDeviceRef.current &&\r\n\t\t\t\t\tdocument.getSelection()?.type !== 'Range'\r\n\t\t\t\t) {\r\n\t\t\t\t\tonChangeSelection(\r\n\t\t\t\t\t\tselection.includes( id )\r\n\t\t\t\t\t\t\t? selection.filter( ( itemId ) => id !== itemId )\r\n\t\t\t\t\t\t\t: [ id ]\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t} }\r\n\t\t>\r\n\t\t\t{ hasBulkActions && (\r\n\t\t\t\t<td\r\n\t\t\t\t\tclassName=\"dataviews-view-table__checkbox-column\"\r\n\t\t\t\t\tstyle={ {\r\n\t\t\t\t\t\twidth: '1%',\r\n\t\t\t\t\t} }\r\n\t\t\t\t>\r\n\t\t\t\t\t<div className=\"dataviews-view-table__cell-content-wrapper\">\r\n\t\t\t\t\t\t<SingleSelectionCheckbox\r\n\t\t\t\t\t\t\titem={ item }\r\n\t\t\t\t\t\t\tselection={ selection }\r\n\t\t\t\t\t\t\tonChangeSelection={ onChangeSelection }\r\n\t\t\t\t\t\t\tgetItemId={ getItemId }\r\n\t\t\t\t\t\t\tprimaryField={ primaryField }\r\n\t\t\t\t\t\t\tdisabled={ ! hasPossibleBulkAction }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</td>\r\n\t\t\t) }\r\n\t\t\t{ columns.map( ( column: string ) => {\r\n\t\t\t\t// Explicits picks the supported styles.\r\n\t\t\t\tconst { width, maxWidth, minWidth } =\r\n\t\t\t\t\tview.layout?.styles?.[ column ] ?? {};\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<td key={ column } style={ { width, maxWidth, minWidth } }>\r\n\t\t\t\t\t\t<TableColumn\r\n\t\t\t\t\t\t\tprimaryField={ primaryField }\r\n\t\t\t\t\t\t\tfields={ fields }\r\n\t\t\t\t\t\t\titem={ item }\r\n\t\t\t\t\t\t\tcolumn={ column }\r\n\t\t\t\t\t\t\tview={ view }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t);\r\n\t\t\t} ) }\r\n\t\t\t{ !! actions?.length && (\r\n\t\t\t\t// Disable reason: we are not making the element interactive,\r\n\t\t\t\t// but preventing any click events from bubbling up to the\r\n\t\t\t\t// table row. This allows us to add a click handler to the row\r\n\t\t\t\t// itself (to toggle row selection) without erroneously\r\n\t\t\t\t// intercepting click events from ItemActions.\r\n\r\n\t\t\t\t/* eslint-disable jsx-a11y/no-noninteractive-element-interactions, jsx-a11y/click-events-have-key-events */\r\n\t\t\t\t<td\r\n\t\t\t\t\tclassName=\"dataviews-view-table__actions-column\"\r\n\t\t\t\t\tonClick={ ( e ) => e.stopPropagation() }\r\n\t\t\t\t>\r\n\t\t\t\t\t<ItemActions item={ item } actions={ actions } />\r\n\t\t\t\t</td>\r\n\t\t\t\t/* eslint-enable jsx-a11y/no-noninteractive-element-interactions, jsx-a11y/click-events-have-key-events */\r\n\t\t\t) }\r\n\t\t</tr>\r\n\t);\r\n}\r\n\r\nfunction ViewTable< Item >( {\r\n\tactions,\r\n\tdata,\r\n\tfields,\r\n\tgetItemId,\r\n\tisLoading = false,\r\n\tonChangeView,\r\n\tonChangeSelection,\r\n\tselection,\r\n\tsetOpenedFilter,\r\n\tview,\r\n}: ViewTableProps< Item > ) {\r\n\tconst headerMenuRefs = useRef<\r\n\t\tMap< string, { node: HTMLButtonElement; fallback: string } >\r\n\t>( new Map() );\r\n\tconst headerMenuToFocusRef = useRef< HTMLButtonElement >();\r\n\tconst [ nextHeaderMenuToFocus, setNextHeaderMenuToFocus ] =\r\n\t\tuseState< HTMLButtonElement >();\r\n\tconst hasBulkActions = useSomeItemHasAPossibleBulkAction( actions, data );\r\n\r\n\tuseEffect( () => {\r\n\t\tif ( headerMenuToFocusRef.current ) {\r\n\t\t\theaderMenuToFocusRef.current.focus();\r\n\t\t\theaderMenuToFocusRef.current = undefined;\r\n\t\t}\r\n\t} );\r\n\r\n\tconst tableNoticeId = useId();\r\n\r\n\tif ( nextHeaderMenuToFocus ) {\r\n\t\t// If we need to force focus, we short-circuit rendering here\r\n\t\t// to prevent any additional work while we handle that.\r\n\t\t// Clearing out the focus directive is necessary to make sure\r\n\t\t// future renders don't cause unexpected focus jumps.\r\n\t\theaderMenuToFocusRef.current = nextHeaderMenuToFocus;\r\n\t\tsetNextHeaderMenuToFocus( undefined );\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst onHide = ( field: NormalizedField< Item > ) => {\r\n\t\tconst hidden = headerMenuRefs.current.get( field.id );\r\n\t\tconst fallback = hidden\r\n\t\t\t? headerMenuRefs.current.get( hidden.fallback )\r\n\t\t\t: undefined;\r\n\t\tsetNextHeaderMenuToFocus( fallback?.node );\r\n\t};\r\n\r\n\tconst columns = getVisibleFieldIds( view, fields );\r\n\tconst hasData = !! data?.length;\r\n\r\n\tconst primaryField = fields.find(\r\n\t\t( field ) => field.id === view.layout?.primaryField\r\n\t);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<table\r\n\t\t\t\tclassName=\"dataviews-view-table\"\r\n\t\t\t\taria-busy={ isLoading }\r\n\t\t\t\taria-describedby={ tableNoticeId }\r\n\t\t\t>\r\n\t\t\t\t<thead>\r\n\t\t\t\t\t<tr className=\"dataviews-view-table__row\">\r\n\t\t\t\t\t\t{ hasBulkActions && (\r\n\t\t\t\t\t\t\t<th\r\n\t\t\t\t\t\t\t\tclassName=\"dataviews-view-table__checkbox-column\"\r\n\t\t\t\t\t\t\t\tstyle={ {\r\n\t\t\t\t\t\t\t\t\twidth: '1%',\r\n\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t\tscope=\"col\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<BulkSelectionCheckbox\r\n\t\t\t\t\t\t\t\t\tselection={ selection }\r\n\t\t\t\t\t\t\t\t\tonChangeSelection={ onChangeSelection }\r\n\t\t\t\t\t\t\t\t\tdata={ data }\r\n\t\t\t\t\t\t\t\t\tactions={ actions }\r\n\t\t\t\t\t\t\t\t\tgetItemId={ getItemId }\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t{ columns.map( ( column, index ) => {\r\n\t\t\t\t\t\t\t// Explicits picks the supported styles.\r\n\t\t\t\t\t\t\tconst { width, maxWidth, minWidth } =\r\n\t\t\t\t\t\t\t\tview.layout?.styles?.[ column ] ?? {};\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<th\r\n\t\t\t\t\t\t\t\t\tkey={ column }\r\n\t\t\t\t\t\t\t\t\tstyle={ { width, maxWidth, minWidth } }\r\n\t\t\t\t\t\t\t\t\taria-sort={\r\n\t\t\t\t\t\t\t\t\t\tview.sort?.field === column\r\n\t\t\t\t\t\t\t\t\t\t\t? sortValues[ view.sort.direction ]\r\n\t\t\t\t\t\t\t\t\t\t\t: undefined\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tscope=\"col\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<ColumnHeaderMenu\r\n\t\t\t\t\t\t\t\t\t\tref={ ( node ) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif ( node ) {\r\n\t\t\t\t\t\t\t\t\t\t\t\theaderMenuRefs.current.set(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolumn,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnode,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfallback:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolumns[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tindex > 0\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? index - 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\theaderMenuRefs.current.delete(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolumn\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t\t\t\tfieldId={ column }\r\n\t\t\t\t\t\t\t\t\t\tview={ view }\r\n\t\t\t\t\t\t\t\t\t\tfields={ fields }\r\n\t\t\t\t\t\t\t\t\t\tonChangeView={ onChangeView }\r\n\t\t\t\t\t\t\t\t\t\tonHide={ onHide }\r\n\t\t\t\t\t\t\t\t\t\tsetOpenedFilter={ setOpenedFilter }\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t} ) }\r\n\t\t\t\t\t\t{ !! actions?.length && (\r\n\t\t\t\t\t\t\t<th className=\"dataviews-view-table__actions-column\">\r\n\t\t\t\t\t\t\t\t<span className=\"dataviews-view-table-header\">\r\n\t\t\t\t\t\t\t\t\t{ __( 'Actions' ) }\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t{ hasData &&\r\n\t\t\t\t\t\tdata.map( ( item, index ) => (\r\n\t\t\t\t\t\t\t<TableRow\r\n\t\t\t\t\t\t\t\tkey={ getItemId( item ) }\r\n\t\t\t\t\t\t\t\titem={ item }\r\n\t\t\t\t\t\t\t\thasBulkActions={ hasBulkActions }\r\n\t\t\t\t\t\t\t\tactions={ actions }\r\n\t\t\t\t\t\t\t\tfields={ fields }\r\n\t\t\t\t\t\t\t\tid={ getItemId( item ) || index.toString() }\r\n\t\t\t\t\t\t\t\tview={ view }\r\n\t\t\t\t\t\t\t\tprimaryField={ primaryField }\r\n\t\t\t\t\t\t\t\tselection={ selection }\r\n\t\t\t\t\t\t\t\tgetItemId={ getItemId }\r\n\t\t\t\t\t\t\t\tonChangeSelection={ onChangeSelection }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) ) }\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\t\t\t<div\r\n\t\t\t\tclassName={ clsx( {\r\n\t\t\t\t\t'dataviews-loading': isLoading,\r\n\t\t\t\t\t'dataviews-no-results': ! hasData && ! isLoading,\r\n\t\t\t\t} ) }\r\n\t\t\t\tid={ tableNoticeId }\r\n\t\t\t>\r\n\t\t\t\t{ ! hasData && (\r\n\t\t\t\t\t<p>{ isLoading ? <Spinner /> : __( 'No results' ) }</p>\r\n\t\t\t\t) }\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default ViewTable;\r\n"],"mappings":"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","ignoreList":[]}