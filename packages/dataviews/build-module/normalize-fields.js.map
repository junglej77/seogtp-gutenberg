{"version":3,"names":["getFieldTypeDefinition","getControl","normalizeFields","fields","map","field","_field$sort","_field$isValid","_field$enableHiding","_field$enableSorting","fieldTypeDefinition","type","getValue","item","id","sort","a","b","direction","isValid","context","Edit","renderFromElements","value","elements","find","element","label","render","header","enableHiding","enableSorting"],"sources":["@wordpress/dataviews/src/normalize-fields.ts"],"sourcesContent":["/**\r\n * Internal dependencies\r\n */\r\nimport getFieldTypeDefinition from './field-types';\r\nimport type { Field, NormalizedField } from './types';\r\nimport { getControl } from './dataform-controls';\r\n\r\n/**\r\n * Apply default values and normalize the fields config.\r\n *\r\n * @param fields Fields config.\r\n * @return Normalized fields config.\r\n */\r\nexport function normalizeFields< Item >(\r\n\tfields: Field< Item >[]\r\n): NormalizedField< Item >[] {\r\n\treturn fields.map( ( field ) => {\r\n\t\tconst fieldTypeDefinition = getFieldTypeDefinition( field.type );\r\n\r\n\t\tconst getValue =\r\n\t\t\tfield.getValue || ( ( { item } ) => ( item as any )[ field.id ] );\r\n\r\n\t\tconst sort =\r\n\t\t\tfield.sort ??\r\n\t\t\tfunction sort( a, b, direction ) {\r\n\t\t\t\treturn fieldTypeDefinition.sort(\r\n\t\t\t\t\tgetValue( { item: a } ),\r\n\t\t\t\t\tgetValue( { item: b } ),\r\n\t\t\t\t\tdirection\r\n\t\t\t\t);\r\n\t\t\t};\r\n\r\n\t\tconst isValid =\r\n\t\t\tfield.isValid ??\r\n\t\t\tfunction isValid( item, context ) {\r\n\t\t\t\treturn fieldTypeDefinition.isValid(\r\n\t\t\t\t\tgetValue( { item } ),\r\n\t\t\t\t\tcontext\r\n\t\t\t\t);\r\n\t\t\t};\r\n\r\n\t\tconst Edit = getControl( field, fieldTypeDefinition );\r\n\r\n\t\tconst renderFromElements = ( { item }: { item: Item } ) => {\r\n\t\t\tconst value = getValue( { item } );\r\n\t\t\treturn (\r\n\t\t\t\tfield?.elements?.find( ( element ) => element.value === value )\r\n\t\t\t\t\t?.label || getValue( { item } )\r\n\t\t\t);\r\n\t\t};\r\n\r\n\t\tconst render =\r\n\t\t\tfield.render || ( field.elements ? renderFromElements : getValue );\r\n\r\n\t\treturn {\r\n\t\t\t...field,\r\n\t\t\tlabel: field.label || field.id,\r\n\t\t\theader: field.header || field.label || field.id,\r\n\t\t\tgetValue,\r\n\t\t\trender,\r\n\t\t\tsort,\r\n\t\t\tisValid,\r\n\t\t\tEdit,\r\n\t\t\tenableHiding: field.enableHiding ?? true,\r\n\t\t\tenableSorting: field.enableSorting ?? true,\r\n\t\t};\r\n\t} );\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,OAAOA,sBAAsB,MAAM,eAAe;AAElD,SAASC,UAAU,QAAQ,qBAAqB;;AAEhD;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,eAAeA,CAC9BC,MAAuB,EACK;EAC5B,OAAOA,MAAM,CAACC,GAAG,CAAIC,KAAK,IAAM;IAAA,IAAAC,WAAA,EAAAC,cAAA,EAAAC,mBAAA,EAAAC,oBAAA;IAC/B,MAAMC,mBAAmB,GAAGV,sBAAsB,CAAEK,KAAK,CAACM,IAAK,CAAC;IAEhE,MAAMC,QAAQ,GACbP,KAAK,CAACO,QAAQ,KAAM,CAAE;MAAEC;IAAK,CAAC,KAAQA,IAAI,CAAWR,KAAK,CAACS,EAAE,CAAE,CAAE;IAElE,MAAMC,IAAI,IAAAT,WAAA,GACTD,KAAK,CAACU,IAAI,cAAAT,WAAA,cAAAA,WAAA,GACV,SAASS,IAAIA,CAAEC,CAAC,EAAEC,CAAC,EAAEC,SAAS,EAAG;MAChC,OAAOR,mBAAmB,CAACK,IAAI,CAC9BH,QAAQ,CAAE;QAAEC,IAAI,EAAEG;MAAE,CAAE,CAAC,EACvBJ,QAAQ,CAAE;QAAEC,IAAI,EAAEI;MAAE,CAAE,CAAC,EACvBC,SACD,CAAC;IACF,CAAC;IAEF,MAAMC,OAAO,IAAAZ,cAAA,GACZF,KAAK,CAACc,OAAO,cAAAZ,cAAA,cAAAA,cAAA,GACb,SAASY,OAAOA,CAAEN,IAAI,EAAEO,OAAO,EAAG;MACjC,OAAOV,mBAAmB,CAACS,OAAO,CACjCP,QAAQ,CAAE;QAAEC;MAAK,CAAE,CAAC,EACpBO,OACD,CAAC;IACF,CAAC;IAEF,MAAMC,IAAI,GAAGpB,UAAU,CAAEI,KAAK,EAAEK,mBAAoB,CAAC;IAErD,MAAMY,kBAAkB,GAAGA,CAAE;MAAET;IAAqB,CAAC,KAAM;MAC1D,MAAMU,KAAK,GAAGX,QAAQ,CAAE;QAAEC;MAAK,CAAE,CAAC;MAClC,OACCR,KAAK,EAAEmB,QAAQ,EAAEC,IAAI,CAAIC,OAAO,IAAMA,OAAO,CAACH,KAAK,KAAKA,KAAM,CAAC,EAC5DI,KAAK,IAAIf,QAAQ,CAAE;QAAEC;MAAK,CAAE,CAAC;IAElC,CAAC;IAED,MAAMe,MAAM,GACXvB,KAAK,CAACuB,MAAM,KAAMvB,KAAK,CAACmB,QAAQ,GAAGF,kBAAkB,GAAGV,QAAQ,CAAE;IAEnE,OAAO;MACN,GAAGP,KAAK;MACRsB,KAAK,EAAEtB,KAAK,CAACsB,KAAK,IAAItB,KAAK,CAACS,EAAE;MAC9Be,MAAM,EAAExB,KAAK,CAACwB,MAAM,IAAIxB,KAAK,CAACsB,KAAK,IAAItB,KAAK,CAACS,EAAE;MAC/CF,QAAQ;MACRgB,MAAM;MACNb,IAAI;MACJI,OAAO;MACPE,IAAI;MACJS,YAAY,GAAAtB,mBAAA,GAAEH,KAAK,CAACyB,YAAY,cAAAtB,mBAAA,cAAAA,mBAAA,GAAI,IAAI;MACxCuB,aAAa,GAAAtB,oBAAA,GAAEJ,KAAK,CAAC0B,aAAa,cAAAtB,oBAAA,cAAAA,oBAAA,GAAI;IACvC,CAAC;EACF,CAAE,CAAC;AACJ","ignoreList":[]}