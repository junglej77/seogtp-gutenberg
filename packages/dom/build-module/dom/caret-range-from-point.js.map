{"version":3,"names":["caretRangeFromPoint","doc","x","y","caretPositionFromPoint","point","range","createRange","setStart","offsetNode","offset","collapse"],"sources":["@wordpress/dom/src/dom/caret-range-from-point.js"],"sourcesContent":["/**\r\n * Polyfill.\r\n * Get a collapsed range for a given point.\r\n *\r\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/caretRangeFromPoint\r\n *\r\n * @param {DocumentMaybeWithCaretPositionFromPoint} doc The document of the range.\r\n * @param {number}                                  x   Horizontal position within the current viewport.\r\n * @param {number}                                  y   Vertical position within the current viewport.\r\n *\r\n * @return {Range | null} The best range for the given point.\r\n */\r\nexport default function caretRangeFromPoint( doc, x, y ) {\r\n\tif ( doc.caretRangeFromPoint ) {\r\n\t\treturn doc.caretRangeFromPoint( x, y );\r\n\t}\r\n\r\n\tif ( ! doc.caretPositionFromPoint ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst point = doc.caretPositionFromPoint( x, y );\r\n\r\n\t// If x or y are negative, outside viewport, or there is no text entry node.\r\n\t// https://developer.mozilla.org/en-US/docs/Web/API/Document/caretRangeFromPoint\r\n\tif ( ! point ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst range = doc.createRange();\r\n\r\n\trange.setStart( point.offsetNode, point.offset );\r\n\trange.collapse( true );\r\n\r\n\treturn range;\r\n}\r\n\r\n/**\r\n * @typedef {{caretPositionFromPoint?: (x: number, y: number)=> CaretPosition | null} & Document } DocumentMaybeWithCaretPositionFromPoint\r\n * @typedef {{ readonly offset: number; readonly offsetNode: Node; getClientRect(): DOMRect | null; }} CaretPosition\r\n */\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAASA,mBAAmBA,CAAEC,GAAG,EAAEC,CAAC,EAAEC,CAAC,EAAG;EACxD,IAAKF,GAAG,CAACD,mBAAmB,EAAG;IAC9B,OAAOC,GAAG,CAACD,mBAAmB,CAAEE,CAAC,EAAEC,CAAE,CAAC;EACvC;EAEA,IAAK,CAAEF,GAAG,CAACG,sBAAsB,EAAG;IACnC,OAAO,IAAI;EACZ;EAEA,MAAMC,KAAK,GAAGJ,GAAG,CAACG,sBAAsB,CAAEF,CAAC,EAAEC,CAAE,CAAC;;EAEhD;EACA;EACA,IAAK,CAAEE,KAAK,EAAG;IACd,OAAO,IAAI;EACZ;EAEA,MAAMC,KAAK,GAAGL,GAAG,CAACM,WAAW,CAAC,CAAC;EAE/BD,KAAK,CAACE,QAAQ,CAAEH,KAAK,CAACI,UAAU,EAAEJ,KAAK,CAACK,MAAO,CAAC;EAChDJ,KAAK,CAACK,QAAQ,CAAE,IAAK,CAAC;EAEtB,OAAOL,KAAK;AACb;;AAEA;AACA;AACA;AACA","ignoreList":[]}