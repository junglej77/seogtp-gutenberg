{"version":3,"names":["assertIsDefined","isInputOrTextArea","isEntirelySelected","element","selectionStart","value","length","selectionEnd","isContentEditable","ownerDocument","defaultView","selection","getSelection","range","rangeCount","getRangeAt","startContainer","endContainer","startOffset","endOffset","childNodes","lastChild","endContainerContentLength","nodeType","TEXT_NODE","data","isDeepChild","query","container","propName","candidate"],"sources":["@wordpress/dom/src/dom/is-entirely-selected.js"],"sourcesContent":["/**\r\n * Internal dependencies\r\n */\r\nimport { assertIsDefined } from '../utils/assert-is-defined';\r\nimport isInputOrTextArea from './is-input-or-text-area';\r\n\r\n/**\r\n * Check whether the contents of the element have been entirely selected.\r\n * Returns true if there is no possibility of selection.\r\n *\r\n * @param {HTMLElement} element The element to check.\r\n *\r\n * @return {boolean} True if entirely selected, false if not.\r\n */\r\nexport default function isEntirelySelected( element ) {\r\n\tif ( isInputOrTextArea( element ) ) {\r\n\t\treturn (\r\n\t\t\telement.selectionStart === 0 &&\r\n\t\t\telement.value.length === element.selectionEnd\r\n\t\t);\r\n\t}\r\n\r\n\tif ( ! element.isContentEditable ) {\r\n\t\treturn true;\r\n\t}\r\n\r\n\tconst { ownerDocument } = element;\r\n\tconst { defaultView } = ownerDocument;\r\n\tassertIsDefined( defaultView, 'defaultView' );\r\n\tconst selection = defaultView.getSelection();\r\n\tassertIsDefined( selection, 'selection' );\r\n\tconst range = selection.rangeCount ? selection.getRangeAt( 0 ) : null;\r\n\r\n\tif ( ! range ) {\r\n\t\treturn true;\r\n\t}\r\n\r\n\tconst { startContainer, endContainer, startOffset, endOffset } = range;\r\n\r\n\tif (\r\n\t\tstartContainer === element &&\r\n\t\tendContainer === element &&\r\n\t\tstartOffset === 0 &&\r\n\t\tendOffset === element.childNodes.length\r\n\t) {\r\n\t\treturn true;\r\n\t}\r\n\r\n\tconst lastChild = element.lastChild;\r\n\tassertIsDefined( lastChild, 'lastChild' );\r\n\tconst endContainerContentLength =\r\n\t\tendContainer.nodeType === endContainer.TEXT_NODE\r\n\t\t\t? /** @type {Text} */ ( endContainer ).data.length\r\n\t\t\t: endContainer.childNodes.length;\r\n\r\n\treturn (\r\n\t\tisDeepChild( startContainer, element, 'firstChild' ) &&\r\n\t\tisDeepChild( endContainer, element, 'lastChild' ) &&\r\n\t\tstartOffset === 0 &&\r\n\t\tendOffset === endContainerContentLength\r\n\t);\r\n}\r\n\r\n/**\r\n * Check whether the contents of the element have been entirely selected.\r\n * Returns true if there is no possibility of selection.\r\n *\r\n * @param {HTMLElement|Node}         query     The element to check.\r\n * @param {HTMLElement}              container The container that we suspect \"query\" may be a first or last child of.\r\n * @param {\"firstChild\"|\"lastChild\"} propName  \"firstChild\" or \"lastChild\"\r\n *\r\n * @return {boolean} True if query is a deep first/last child of container, false otherwise.\r\n */\r\nfunction isDeepChild( query, container, propName ) {\r\n\t/** @type {HTMLElement | ChildNode | null} */\r\n\tlet candidate = container;\r\n\tdo {\r\n\t\tif ( query === candidate ) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tcandidate = candidate[ propName ];\r\n\t} while ( candidate );\r\n\treturn false;\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,eAAe,QAAQ,4BAA4B;AAC5D,OAAOC,iBAAiB,MAAM,yBAAyB;;AAEvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAASC,kBAAkBA,CAAEC,OAAO,EAAG;EACrD,IAAKF,iBAAiB,CAAEE,OAAQ,CAAC,EAAG;IACnC,OACCA,OAAO,CAACC,cAAc,KAAK,CAAC,IAC5BD,OAAO,CAACE,KAAK,CAACC,MAAM,KAAKH,OAAO,CAACI,YAAY;EAE/C;EAEA,IAAK,CAAEJ,OAAO,CAACK,iBAAiB,EAAG;IAClC,OAAO,IAAI;EACZ;EAEA,MAAM;IAAEC;EAAc,CAAC,GAAGN,OAAO;EACjC,MAAM;IAAEO;EAAY,CAAC,GAAGD,aAAa;EACrCT,eAAe,CAAEU,WAAW,EAAE,aAAc,CAAC;EAC7C,MAAMC,SAAS,GAAGD,WAAW,CAACE,YAAY,CAAC,CAAC;EAC5CZ,eAAe,CAAEW,SAAS,EAAE,WAAY,CAAC;EACzC,MAAME,KAAK,GAAGF,SAAS,CAACG,UAAU,GAAGH,SAAS,CAACI,UAAU,CAAE,CAAE,CAAC,GAAG,IAAI;EAErE,IAAK,CAAEF,KAAK,EAAG;IACd,OAAO,IAAI;EACZ;EAEA,MAAM;IAAEG,cAAc;IAAEC,YAAY;IAAEC,WAAW;IAAEC;EAAU,CAAC,GAAGN,KAAK;EAEtE,IACCG,cAAc,KAAKb,OAAO,IAC1Bc,YAAY,KAAKd,OAAO,IACxBe,WAAW,KAAK,CAAC,IACjBC,SAAS,KAAKhB,OAAO,CAACiB,UAAU,CAACd,MAAM,EACtC;IACD,OAAO,IAAI;EACZ;EAEA,MAAMe,SAAS,GAAGlB,OAAO,CAACkB,SAAS;EACnCrB,eAAe,CAAEqB,SAAS,EAAE,WAAY,CAAC;EACzC,MAAMC,yBAAyB,GAC9BL,YAAY,CAACM,QAAQ,KAAKN,YAAY,CAACO,SAAS,GAC7C,mBAAsBP,YAAY,CAAGQ,IAAI,CAACnB,MAAM,GAChDW,YAAY,CAACG,UAAU,CAACd,MAAM;EAElC,OACCoB,WAAW,CAAEV,cAAc,EAAEb,OAAO,EAAE,YAAa,CAAC,IACpDuB,WAAW,CAAET,YAAY,EAAEd,OAAO,EAAE,WAAY,CAAC,IACjDe,WAAW,KAAK,CAAC,IACjBC,SAAS,KAAKG,yBAAyB;AAEzC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASI,WAAWA,CAAEC,KAAK,EAAEC,SAAS,EAAEC,QAAQ,EAAG;EAClD;EACA,IAAIC,SAAS,GAAGF,SAAS;EACzB,GAAG;IACF,IAAKD,KAAK,KAAKG,SAAS,EAAG;MAC1B,OAAO,IAAI;IACZ;IACAA,SAAS,GAAGA,SAAS,CAAED,QAAQ,CAAE;EAClC,CAAC,QAASC,SAAS;EACnB,OAAO,KAAK;AACb","ignoreList":[]}