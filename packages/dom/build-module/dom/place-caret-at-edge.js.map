{"version":3,"names":["hiddenCaretRangeFromPoint","assertIsDefined","isInputOrTextArea","isRTL","scrollIfNoRange","getRange","container","isReverse","x","ownerDocument","isReverseDir","containerRect","getBoundingClientRect","undefined","right","left","y","bottom","top","placeCaretAtEdge","focus","selectionStart","value","length","selectionEnd","defaultView","selection","getSelection","isContentEditable","removeAllRanges","range","addRange"],"sources":["@wordpress/dom/src/dom/place-caret-at-edge.js"],"sourcesContent":["/**\r\n * Internal dependencies\r\n */\r\nimport hiddenCaretRangeFromPoint from './hidden-caret-range-from-point';\r\nimport { assertIsDefined } from '../utils/assert-is-defined';\r\nimport isInputOrTextArea from './is-input-or-text-area';\r\nimport isRTL from './is-rtl';\r\nimport { scrollIfNoRange } from './scroll-if-no-range';\r\n\r\n/**\r\n * Gets the range to place.\r\n *\r\n * @param {HTMLElement}      container Focusable element.\r\n * @param {boolean}          isReverse True for end, false for start.\r\n * @param {number|undefined} x         X coordinate to vertically position.\r\n *\r\n * @return {Range|null} The range to place.\r\n */\r\nfunction getRange( container, isReverse, x ) {\r\n\tconst { ownerDocument } = container;\r\n\t// In the case of RTL scripts, the horizontal edge is at the opposite side.\r\n\tconst isReverseDir = isRTL( container ) ? ! isReverse : isReverse;\r\n\tconst containerRect = container.getBoundingClientRect();\r\n\t// When placing at the end (isReverse), find the closest range to the bottom\r\n\t// right corner. When placing at the start, to the top left corner.\r\n\t// Ensure x is defined and within the container's boundaries. When it's\r\n\t// exactly at the boundary, it's not considered within the boundaries.\r\n\tif ( x === undefined ) {\r\n\t\tx = isReverse ? containerRect.right - 1 : containerRect.left + 1;\r\n\t} else if ( x <= containerRect.left ) {\r\n\t\tx = containerRect.left + 1;\r\n\t} else if ( x >= containerRect.right ) {\r\n\t\tx = containerRect.right - 1;\r\n\t}\r\n\tconst y = isReverseDir ? containerRect.bottom - 1 : containerRect.top + 1;\r\n\treturn hiddenCaretRangeFromPoint( ownerDocument, x, y, container );\r\n}\r\n\r\n/**\r\n * Places the caret at start or end of a given element.\r\n *\r\n * @param {HTMLElement}      container Focusable element.\r\n * @param {boolean}          isReverse True for end, false for start.\r\n * @param {number|undefined} x         X coordinate to vertically position.\r\n */\r\nexport default function placeCaretAtEdge( container, isReverse, x ) {\r\n\tif ( ! container ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tcontainer.focus();\r\n\r\n\tif ( isInputOrTextArea( container ) ) {\r\n\t\t// The element may not support selection setting.\r\n\t\tif ( typeof container.selectionStart !== 'number' ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( isReverse ) {\r\n\t\t\tcontainer.selectionStart = container.value.length;\r\n\t\t\tcontainer.selectionEnd = container.value.length;\r\n\t\t} else {\r\n\t\t\tcontainer.selectionStart = 0;\r\n\t\t\tcontainer.selectionEnd = 0;\r\n\t\t}\r\n\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst { ownerDocument } = container;\r\n\tconst { defaultView } = ownerDocument;\r\n\tassertIsDefined( defaultView, 'defaultView' );\r\n\tconst selection = defaultView.getSelection();\r\n\tassertIsDefined( selection, 'selection' );\r\n\r\n\tif ( ! container.isContentEditable ) {\r\n\t\tselection.removeAllRanges();\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst range = scrollIfNoRange( container, isReverse, () =>\r\n\t\tgetRange( container, isReverse, x )\r\n\t);\r\n\r\n\tif ( ! range ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tselection.removeAllRanges();\r\n\tselection.addRange( range );\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,OAAOA,yBAAyB,MAAM,iCAAiC;AACvE,SAASC,eAAe,QAAQ,4BAA4B;AAC5D,OAAOC,iBAAiB,MAAM,yBAAyB;AACvD,OAAOC,KAAK,MAAM,UAAU;AAC5B,SAASC,eAAe,QAAQ,sBAAsB;;AAEtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,QAAQA,CAAEC,SAAS,EAAEC,SAAS,EAAEC,CAAC,EAAG;EAC5C,MAAM;IAAEC;EAAc,CAAC,GAAGH,SAAS;EACnC;EACA,MAAMI,YAAY,GAAGP,KAAK,CAAEG,SAAU,CAAC,GAAG,CAAEC,SAAS,GAAGA,SAAS;EACjE,MAAMI,aAAa,GAAGL,SAAS,CAACM,qBAAqB,CAAC,CAAC;EACvD;EACA;EACA;EACA;EACA,IAAKJ,CAAC,KAAKK,SAAS,EAAG;IACtBL,CAAC,GAAGD,SAAS,GAAGI,aAAa,CAACG,KAAK,GAAG,CAAC,GAAGH,aAAa,CAACI,IAAI,GAAG,CAAC;EACjE,CAAC,MAAM,IAAKP,CAAC,IAAIG,aAAa,CAACI,IAAI,EAAG;IACrCP,CAAC,GAAGG,aAAa,CAACI,IAAI,GAAG,CAAC;EAC3B,CAAC,MAAM,IAAKP,CAAC,IAAIG,aAAa,CAACG,KAAK,EAAG;IACtCN,CAAC,GAAGG,aAAa,CAACG,KAAK,GAAG,CAAC;EAC5B;EACA,MAAME,CAAC,GAAGN,YAAY,GAAGC,aAAa,CAACM,MAAM,GAAG,CAAC,GAAGN,aAAa,CAACO,GAAG,GAAG,CAAC;EACzE,OAAOlB,yBAAyB,CAAES,aAAa,EAAED,CAAC,EAAEQ,CAAC,EAAEV,SAAU,CAAC;AACnE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAASa,gBAAgBA,CAAEb,SAAS,EAAEC,SAAS,EAAEC,CAAC,EAAG;EACnE,IAAK,CAAEF,SAAS,EAAG;IAClB;EACD;EAEAA,SAAS,CAACc,KAAK,CAAC,CAAC;EAEjB,IAAKlB,iBAAiB,CAAEI,SAAU,CAAC,EAAG;IACrC;IACA,IAAK,OAAOA,SAAS,CAACe,cAAc,KAAK,QAAQ,EAAG;MACnD;IACD;IAEA,IAAKd,SAAS,EAAG;MAChBD,SAAS,CAACe,cAAc,GAAGf,SAAS,CAACgB,KAAK,CAACC,MAAM;MACjDjB,SAAS,CAACkB,YAAY,GAAGlB,SAAS,CAACgB,KAAK,CAACC,MAAM;IAChD,CAAC,MAAM;MACNjB,SAAS,CAACe,cAAc,GAAG,CAAC;MAC5Bf,SAAS,CAACkB,YAAY,GAAG,CAAC;IAC3B;IAEA;EACD;EAEA,MAAM;IAAEf;EAAc,CAAC,GAAGH,SAAS;EACnC,MAAM;IAAEmB;EAAY,CAAC,GAAGhB,aAAa;EACrCR,eAAe,CAAEwB,WAAW,EAAE,aAAc,CAAC;EAC7C,MAAMC,SAAS,GAAGD,WAAW,CAACE,YAAY,CAAC,CAAC;EAC5C1B,eAAe,CAAEyB,SAAS,EAAE,WAAY,CAAC;EAEzC,IAAK,CAAEpB,SAAS,CAACsB,iBAAiB,EAAG;IACpCF,SAAS,CAACG,eAAe,CAAC,CAAC;IAC3B;EACD;EAEA,MAAMC,KAAK,GAAG1B,eAAe,CAAEE,SAAS,EAAEC,SAAS,EAAE,MACpDF,QAAQ,CAAEC,SAAS,EAAEC,SAAS,EAAEC,CAAE,CACnC,CAAC;EAED,IAAK,CAAEsB,KAAK,EAAG;IACd;EACD;EAEAJ,SAAS,CAACG,eAAe,CAAC,CAAC;EAC3BH,SAAS,CAACK,QAAQ,CAAED,KAAM,CAAC;AAC5B","ignoreList":[]}