{"version":3,"names":["textContentSchema","strong","em","s","del","ins","a","attributes","code","abbr","sub","sup","br","small","q","dfn","data","time","var","samp","kbd","i","b","u","mark","ruby","rt","rp","bdi","bdo","wbr","excludedElements","Object","keys","filter","element","includes","forEach","tag","removedTag","restSchema","children","embeddedContentSchema","audio","canvas","embed","img","object","video","phrasingContentSchema","getPhrasingContentSchema","context","remainingContentSchema","isPhrasingContent","node","nodeName","toLowerCase","hasOwnProperty","isTextContent"],"sources":["@wordpress/dom/src/phrasing-content.js"],"sourcesContent":["/**\r\n * All phrasing content elements.\r\n *\r\n * @see https://www.w3.org/TR/2011/WD-html5-20110525/content-models.html#phrasing-content-0\r\n */\r\n\r\n/**\r\n * @typedef {Record<string,SemanticElementDefinition>} ContentSchema\r\n */\r\n\r\n/**\r\n * @typedef SemanticElementDefinition\r\n * @property {string[]}      [attributes] Content attributes\r\n * @property {ContentSchema} [children]   Content attributes\r\n */\r\n\r\n/**\r\n * All text-level semantic elements.\r\n *\r\n * @see https://html.spec.whatwg.org/multipage/text-level-semantics.html\r\n *\r\n * @type {ContentSchema}\r\n */\r\nconst textContentSchema = {\r\n\tstrong: {},\r\n\tem: {},\r\n\ts: {},\r\n\tdel: {},\r\n\tins: {},\r\n\ta: { attributes: [ 'href', 'target', 'rel', 'id' ] },\r\n\tcode: {},\r\n\tabbr: { attributes: [ 'title' ] },\r\n\tsub: {},\r\n\tsup: {},\r\n\tbr: {},\r\n\tsmall: {},\r\n\t// To do: fix blockquote.\r\n\t// cite: {},\r\n\tq: { attributes: [ 'cite' ] },\r\n\tdfn: { attributes: [ 'title' ] },\r\n\tdata: { attributes: [ 'value' ] },\r\n\ttime: { attributes: [ 'datetime' ] },\r\n\tvar: {},\r\n\tsamp: {},\r\n\tkbd: {},\r\n\ti: {},\r\n\tb: {},\r\n\tu: {},\r\n\tmark: {},\r\n\truby: {},\r\n\trt: {},\r\n\trp: {},\r\n\tbdi: { attributes: [ 'dir' ] },\r\n\tbdo: { attributes: [ 'dir' ] },\r\n\twbr: {},\r\n\t'#text': {},\r\n};\r\n\r\n// Recursion is needed.\r\n// Possible: strong > em > strong.\r\n// Impossible: strong > strong.\r\nconst excludedElements = [ '#text', 'br' ];\r\nObject.keys( textContentSchema )\r\n\t.filter( ( element ) => ! excludedElements.includes( element ) )\r\n\t.forEach( ( tag ) => {\r\n\t\tconst { [ tag ]: removedTag, ...restSchema } = textContentSchema;\r\n\t\ttextContentSchema[ tag ].children = restSchema;\r\n\t} );\r\n\r\n/**\r\n * Embedded content elements.\r\n *\r\n * @see https://www.w3.org/TR/2011/WD-html5-20110525/content-models.html#embedded-content-0\r\n *\r\n * @type {ContentSchema}\r\n */\r\nconst embeddedContentSchema = {\r\n\taudio: {\r\n\t\tattributes: [\r\n\t\t\t'src',\r\n\t\t\t'preload',\r\n\t\t\t'autoplay',\r\n\t\t\t'mediagroup',\r\n\t\t\t'loop',\r\n\t\t\t'muted',\r\n\t\t],\r\n\t},\r\n\tcanvas: { attributes: [ 'width', 'height' ] },\r\n\tembed: { attributes: [ 'src', 'type', 'width', 'height' ] },\r\n\timg: {\r\n\t\tattributes: [\r\n\t\t\t'alt',\r\n\t\t\t'src',\r\n\t\t\t'srcset',\r\n\t\t\t'usemap',\r\n\t\t\t'ismap',\r\n\t\t\t'width',\r\n\t\t\t'height',\r\n\t\t],\r\n\t},\r\n\tobject: {\r\n\t\tattributes: [\r\n\t\t\t'data',\r\n\t\t\t'type',\r\n\t\t\t'name',\r\n\t\t\t'usemap',\r\n\t\t\t'form',\r\n\t\t\t'width',\r\n\t\t\t'height',\r\n\t\t],\r\n\t},\r\n\tvideo: {\r\n\t\tattributes: [\r\n\t\t\t'src',\r\n\t\t\t'poster',\r\n\t\t\t'preload',\r\n\t\t\t'playsinline',\r\n\t\t\t'autoplay',\r\n\t\t\t'mediagroup',\r\n\t\t\t'loop',\r\n\t\t\t'muted',\r\n\t\t\t'controls',\r\n\t\t\t'width',\r\n\t\t\t'height',\r\n\t\t],\r\n\t},\r\n};\r\n\r\n/**\r\n * Phrasing content elements.\r\n *\r\n * @see https://www.w3.org/TR/2011/WD-html5-20110525/content-models.html#phrasing-content-0\r\n */\r\nconst phrasingContentSchema = {\r\n\t...textContentSchema,\r\n\t...embeddedContentSchema,\r\n};\r\n\r\n/**\r\n * Get schema of possible paths for phrasing content.\r\n *\r\n * @see https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Content_categories#Phrasing_content\r\n *\r\n * @param {string} [context] Set to \"paste\" to exclude invisible elements and\r\n *                           sensitive data.\r\n *\r\n * @return {Partial<ContentSchema>} Schema.\r\n */\r\nexport function getPhrasingContentSchema( context ) {\r\n\tif ( context !== 'paste' ) {\r\n\t\treturn phrasingContentSchema;\r\n\t}\r\n\r\n\t/**\r\n\t * @type {Partial<ContentSchema>}\r\n\t */\r\n\tconst {\r\n\t\tu, // Used to mark misspelling. Shouldn't be pasted.\r\n\t\tabbr, // Invisible.\r\n\t\tdata, // Invisible.\r\n\t\ttime, // Invisible.\r\n\t\twbr, // Invisible.\r\n\t\tbdi, // Invisible.\r\n\t\tbdo, // Invisible.\r\n\t\t...remainingContentSchema\r\n\t} = {\r\n\t\t...phrasingContentSchema,\r\n\t\t// We shouldn't paste potentially sensitive information which is not\r\n\t\t// visible to the user when pasted, so strip the attributes.\r\n\t\tins: { children: phrasingContentSchema.ins.children },\r\n\t\tdel: { children: phrasingContentSchema.del.children },\r\n\t};\r\n\r\n\treturn remainingContentSchema;\r\n}\r\n\r\n/**\r\n * Find out whether or not the given node is phrasing content.\r\n *\r\n * @see https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Content_categories#Phrasing_content\r\n *\r\n * @param {Node} node The node to test.\r\n *\r\n * @return {boolean} True if phrasing content, false if not.\r\n */\r\nexport function isPhrasingContent( node ) {\r\n\tconst tag = node.nodeName.toLowerCase();\r\n\treturn getPhrasingContentSchema().hasOwnProperty( tag ) || tag === 'span';\r\n}\r\n\r\n/**\r\n * @param {Node} node\r\n * @return {boolean} Node is text content\r\n */\r\nexport function isTextContent( node ) {\r\n\tconst tag = node.nodeName.toLowerCase();\r\n\treturn textContentSchema.hasOwnProperty( tag ) || tag === 'span';\r\n}\r\n"],"mappings":"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","ignoreList":[]}