{"version":3,"names":["addQueryArgs","visitAdminPage","createNewPost","postType","title","content","excerpt","showWelcomeGuide","query","post_type","post_title","slice","page","waitForSelector","isWelcomeGuideActive","evaluate","wp","data","select","isFeatureActive","isFullscreenMode","dispatch","toggleFeature","reload"],"sources":["@wordpress/e2e-test-utils/src/create-new-post.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { addQueryArgs } from '@wordpress/url';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { visitAdminPage } from './visit-admin-page';\r\n\r\n/**\r\n * Creates new post.\r\n *\r\n * @param {Object}  object                    Object to create new post, along with tips enabling option.\r\n * @param {string}  [object.postType]         Post type of the new post.\r\n * @param {string}  [object.title]            Title of the new post.\r\n * @param {string}  [object.content]          Content of the new post.\r\n * @param {string}  [object.excerpt]          Excerpt of the new post.\r\n * @param {boolean} [object.showWelcomeGuide] Whether to show the welcome guide.\r\n */\r\nexport async function createNewPost( {\r\n\tpostType,\r\n\ttitle,\r\n\tcontent,\r\n\texcerpt,\r\n\tshowWelcomeGuide = false,\r\n} = {} ) {\r\n\tconst query = addQueryArgs( '', {\r\n\t\tpost_type: postType,\r\n\t\tpost_title: title,\r\n\t\tcontent,\r\n\t\texcerpt,\r\n\t} ).slice( 1 );\r\n\r\n\tawait visitAdminPage( 'post-new.php', query );\r\n\r\n\tawait page.waitForSelector( '.edit-post-layout' );\r\n\r\n\tconst isWelcomeGuideActive = await page.evaluate( () =>\r\n\t\twp.data.select( 'core/edit-post' ).isFeatureActive( 'welcomeGuide' )\r\n\t);\r\n\tconst isFullscreenMode = await page.evaluate( () =>\r\n\t\twp.data.select( 'core/edit-post' ).isFeatureActive( 'fullscreenMode' )\r\n\t);\r\n\r\n\tif ( showWelcomeGuide !== isWelcomeGuideActive ) {\r\n\t\tawait page.evaluate( () =>\r\n\t\t\twp.data.dispatch( 'core/edit-post' ).toggleFeature( 'welcomeGuide' )\r\n\t\t);\r\n\r\n\t\tawait page.reload();\r\n\t\tawait page.waitForSelector( '.edit-post-layout' );\r\n\t}\r\n\r\n\tif ( isFullscreenMode ) {\r\n\t\tawait page.evaluate( () =>\r\n\t\t\twp.data\r\n\t\t\t\t.dispatch( 'core/edit-post' )\r\n\t\t\t\t.toggleFeature( 'fullscreenMode' )\r\n\t\t);\r\n\r\n\t\tawait page.waitForSelector( 'body:not(.is-fullscreen-mode)' );\r\n\t}\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,YAAY,QAAQ,gBAAgB;;AAE7C;AACA;AACA;AACA,SAASC,cAAc,QAAQ,oBAAoB;;AAEnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,eAAeC,aAAaA,CAAE;EACpCC,QAAQ;EACRC,KAAK;EACLC,OAAO;EACPC,OAAO;EACPC,gBAAgB,GAAG;AACpB,CAAC,GAAG,CAAC,CAAC,EAAG;EACR,MAAMC,KAAK,GAAGR,YAAY,CAAE,EAAE,EAAE;IAC/BS,SAAS,EAAEN,QAAQ;IACnBO,UAAU,EAAEN,KAAK;IACjBC,OAAO;IACPC;EACD,CAAE,CAAC,CAACK,KAAK,CAAE,CAAE,CAAC;EAEd,MAAMV,cAAc,CAAE,cAAc,EAAEO,KAAM,CAAC;EAE7C,MAAMI,IAAI,CAACC,eAAe,CAAE,mBAAoB,CAAC;EAEjD,MAAMC,oBAAoB,GAAG,MAAMF,IAAI,CAACG,QAAQ,CAAE,MACjDC,EAAE,CAACC,IAAI,CAACC,MAAM,CAAE,gBAAiB,CAAC,CAACC,eAAe,CAAE,cAAe,CACpE,CAAC;EACD,MAAMC,gBAAgB,GAAG,MAAMR,IAAI,CAACG,QAAQ,CAAE,MAC7CC,EAAE,CAACC,IAAI,CAACC,MAAM,CAAE,gBAAiB,CAAC,CAACC,eAAe,CAAE,gBAAiB,CACtE,CAAC;EAED,IAAKZ,gBAAgB,KAAKO,oBAAoB,EAAG;IAChD,MAAMF,IAAI,CAACG,QAAQ,CAAE,MACpBC,EAAE,CAACC,IAAI,CAACI,QAAQ,CAAE,gBAAiB,CAAC,CAACC,aAAa,CAAE,cAAe,CACpE,CAAC;IAED,MAAMV,IAAI,CAACW,MAAM,CAAC,CAAC;IACnB,MAAMX,IAAI,CAACC,eAAe,CAAE,mBAAoB,CAAC;EAClD;EAEA,IAAKO,gBAAgB,EAAG;IACvB,MAAMR,IAAI,CAACG,QAAQ,CAAE,MACpBC,EAAE,CAACC,IAAI,CACLI,QAAQ,CAAE,gBAAiB,CAAC,CAC5BC,aAAa,CAAE,gBAAiB,CACnC,CAAC;IAED,MAAMV,IAAI,CAACC,eAAe,CAAE,+BAAgC,CAAC;EAC9D;AACD","ignoreList":[]}