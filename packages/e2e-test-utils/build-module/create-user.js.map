{"version":3,"names":["snakeCase","switchUserToAdmin","switchUserToTest","visitAdminPage","createUser","username","firstName","lastName","role","page","waitForSelector","visible","$eval","el","value","select","click","password","element","Promise","all","waitForNavigation","waitUntil"],"sources":["@wordpress/e2e-test-utils/src/create-user.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport { snakeCase } from 'change-case';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { switchUserToAdmin } from './switch-user-to-admin';\r\nimport { switchUserToTest } from './switch-user-to-test';\r\nimport { visitAdminPage } from './visit-admin-page';\r\n\r\n/**\r\n * Create a new user account.\r\n *\r\n * @param {string}  username           User name.\r\n * @param {Object?} object             Optional Settings for the new user account.\r\n * @param {string}  [object.firstName] First name.\r\n * @param {string}  [object.lastName]  Last name.\r\n * @param {string}  [object.role]      Role. Defaults to Administrator.\r\n *\r\n * @return {string} Password for the newly created user account.\r\n */\r\nexport async function createUser(\r\n\tusername,\r\n\t{ firstName, lastName, role } = {}\r\n) {\r\n\tawait switchUserToAdmin();\r\n\tawait visitAdminPage( 'user-new.php' );\r\n\tawait page.waitForSelector( '#user_login', { visible: true } );\r\n\tawait page.$eval(\r\n\t\t'#user_login',\r\n\t\t( el, value ) => ( el.value = value ),\r\n\t\tusername\r\n\t);\r\n\tawait page.$eval(\r\n\t\t'#email',\r\n\t\t( el, value ) => ( el.value = value ),\r\n\t\tsnakeCase( username ) + '@example.com'\r\n\t);\r\n\tif ( firstName ) {\r\n\t\tawait page.$eval(\r\n\t\t\t'#first_name',\r\n\t\t\t( el, value ) => ( el.value = value ),\r\n\t\t\tfirstName\r\n\t\t);\r\n\t}\r\n\tif ( lastName ) {\r\n\t\tawait page.$eval(\r\n\t\t\t'#last_name',\r\n\t\t\t( el, value ) => ( el.value = value ),\r\n\t\t\tlastName\r\n\t\t);\r\n\t}\r\n\tif ( role ) {\r\n\t\tawait page.select( '#role', role );\r\n\t}\r\n\r\n\tawait page.click( '#send_user_notification' );\r\n\r\n\tconst password = await page.$eval( `#pass1`, ( element ) => element.value );\r\n\r\n\tawait Promise.all( [\r\n\t\tpage.click( '#createusersub' ),\r\n\t\tpage.waitForNavigation( { waitUntil: 'networkidle0' } ),\r\n\t] );\r\n\tawait switchUserToTest();\r\n\treturn password;\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,SAAS,QAAQ,aAAa;;AAEvC;AACA;AACA;AACA,SAASC,iBAAiB,QAAQ,wBAAwB;AAC1D,SAASC,gBAAgB,QAAQ,uBAAuB;AACxD,SAASC,cAAc,QAAQ,oBAAoB;;AAEnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,eAAeC,UAAUA,CAC/BC,QAAQ,EACR;EAAEC,SAAS;EAAEC,QAAQ;EAAEC;AAAK,CAAC,GAAG,CAAC,CAAC,EACjC;EACD,MAAMP,iBAAiB,CAAC,CAAC;EACzB,MAAME,cAAc,CAAE,cAAe,CAAC;EACtC,MAAMM,IAAI,CAACC,eAAe,CAAE,aAAa,EAAE;IAAEC,OAAO,EAAE;EAAK,CAAE,CAAC;EAC9D,MAAMF,IAAI,CAACG,KAAK,CACf,aAAa,EACb,CAAEC,EAAE,EAAEC,KAAK,KAAQD,EAAE,CAACC,KAAK,GAAGA,KAAO,EACrCT,QACD,CAAC;EACD,MAAMI,IAAI,CAACG,KAAK,CACf,QAAQ,EACR,CAAEC,EAAE,EAAEC,KAAK,KAAQD,EAAE,CAACC,KAAK,GAAGA,KAAO,EACrCd,SAAS,CAAEK,QAAS,CAAC,GAAG,cACzB,CAAC;EACD,IAAKC,SAAS,EAAG;IAChB,MAAMG,IAAI,CAACG,KAAK,CACf,aAAa,EACb,CAAEC,EAAE,EAAEC,KAAK,KAAQD,EAAE,CAACC,KAAK,GAAGA,KAAO,EACrCR,SACD,CAAC;EACF;EACA,IAAKC,QAAQ,EAAG;IACf,MAAME,IAAI,CAACG,KAAK,CACf,YAAY,EACZ,CAAEC,EAAE,EAAEC,KAAK,KAAQD,EAAE,CAACC,KAAK,GAAGA,KAAO,EACrCP,QACD,CAAC;EACF;EACA,IAAKC,IAAI,EAAG;IACX,MAAMC,IAAI,CAACM,MAAM,CAAE,OAAO,EAAEP,IAAK,CAAC;EACnC;EAEA,MAAMC,IAAI,CAACO,KAAK,CAAE,yBAA0B,CAAC;EAE7C,MAAMC,QAAQ,GAAG,MAAMR,IAAI,CAACG,KAAK,CAAG,QAAO,EAAIM,OAAO,IAAMA,OAAO,CAACJ,KAAM,CAAC;EAE3E,MAAMK,OAAO,CAACC,GAAG,CAAE,CAClBX,IAAI,CAACO,KAAK,CAAE,gBAAiB,CAAC,EAC9BP,IAAI,CAACY,iBAAiB,CAAE;IAAEC,SAAS,EAAE;EAAe,CAAE,CAAC,CACtD,CAAC;EACH,MAAMpB,gBAAgB,CAAC,CAAC;EACxB,OAAOe,QAAQ;AAChB","ignoreList":[]}