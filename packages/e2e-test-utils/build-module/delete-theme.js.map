{"version":3,"names":["activateTheme","installTheme","switchUserToAdmin","switchUserToTest","visitAdminPage","isThemeInstalled","deleteTheme","slug","newThemeSlug","newThemeSearchTerm","page","click","waitForSelector","waitForFunction","themeSlug","document","querySelector"],"sources":["@wordpress/e2e-test-utils/src/delete-theme.js"],"sourcesContent":["/**\r\n * Internal dependencies\r\n */\r\nimport { activateTheme } from './activate-theme';\r\nimport { installTheme } from './install-theme';\r\nimport { switchUserToAdmin } from './switch-user-to-admin';\r\nimport { switchUserToTest } from './switch-user-to-test';\r\nimport { visitAdminPage } from './visit-admin-page';\r\nimport { isThemeInstalled } from './theme-installed';\r\n\r\n/**\r\n * Deletes a theme from the site, activating another theme if necessary.\r\n *\r\n * @param {string}  slug                        Theme slug.\r\n * @param {Object?} settings                    Optional settings object.\r\n * @param {string?} settings.newThemeSlug       A theme to switch to if the theme to delete is active. Required if the theme to delete is active.\r\n * @param {string?} settings.newThemeSearchTerm A search term to use if the new theme is not findable by its slug.\r\n */\r\nexport async function deleteTheme(\r\n\tslug,\r\n\t{ newThemeSlug, newThemeSearchTerm } = {}\r\n) {\r\n\tawait switchUserToAdmin();\r\n\r\n\tif ( newThemeSlug ) {\r\n\t\tawait installTheme( newThemeSlug, newThemeSearchTerm );\r\n\t\tawait activateTheme( newThemeSlug );\r\n\t} else {\r\n\t\tawait visitAdminPage( 'themes.php' );\r\n\t}\r\n\r\n\tif ( ! ( await isThemeInstalled( slug ) ) ) {\r\n\t\tawait switchUserToTest();\r\n\t\treturn;\r\n\t}\r\n\r\n\tawait page.click( `[data-slug=\"${ slug }\"]` );\r\n\tawait page.waitForSelector( '.theme-actions .delete-theme' );\r\n\tawait page.click( '.theme-actions .delete-theme' );\r\n\tawait page.waitForSelector( 'body:not(.modal-open)' );\r\n\r\n\t// Wait for the theme to be removed from the page.\r\n\t// eslint-disable-next-line no-restricted-syntax\r\n\tawait page.waitForFunction(\r\n\t\t( themeSlug ) =>\r\n\t\t\t! document.querySelector( `[data-slug=\"${ themeSlug }\"]` ),\r\n\t\tslug\r\n\t);\r\n\r\n\tawait switchUserToTest();\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,aAAa,QAAQ,kBAAkB;AAChD,SAASC,YAAY,QAAQ,iBAAiB;AAC9C,SAASC,iBAAiB,QAAQ,wBAAwB;AAC1D,SAASC,gBAAgB,QAAQ,uBAAuB;AACxD,SAASC,cAAc,QAAQ,oBAAoB;AACnD,SAASC,gBAAgB,QAAQ,mBAAmB;;AAEpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,eAAeC,WAAWA,CAChCC,IAAI,EACJ;EAAEC,YAAY;EAAEC;AAAmB,CAAC,GAAG,CAAC,CAAC,EACxC;EACD,MAAMP,iBAAiB,CAAC,CAAC;EAEzB,IAAKM,YAAY,EAAG;IACnB,MAAMP,YAAY,CAAEO,YAAY,EAAEC,kBAAmB,CAAC;IACtD,MAAMT,aAAa,CAAEQ,YAAa,CAAC;EACpC,CAAC,MAAM;IACN,MAAMJ,cAAc,CAAE,YAAa,CAAC;EACrC;EAEA,IAAK,EAAI,MAAMC,gBAAgB,CAAEE,IAAK,CAAC,CAAE,EAAG;IAC3C,MAAMJ,gBAAgB,CAAC,CAAC;IACxB;EACD;EAEA,MAAMO,IAAI,CAACC,KAAK,CAAG,eAAeJ,IAAM,IAAI,CAAC;EAC7C,MAAMG,IAAI,CAACE,eAAe,CAAE,8BAA+B,CAAC;EAC5D,MAAMF,IAAI,CAACC,KAAK,CAAE,8BAA+B,CAAC;EAClD,MAAMD,IAAI,CAACE,eAAe,CAAE,uBAAwB,CAAC;;EAErD;EACA;EACA,MAAMF,IAAI,CAACG,eAAe,CACvBC,SAAS,IACV,CAAEC,QAAQ,CAACC,aAAa,CAAG,eAAeF,SAAW,IAAI,CAAC,EAC3DP,IACD,CAAC;EAED,MAAMJ,gBAAgB,CAAC,CAAC;AACzB","ignoreList":[]}