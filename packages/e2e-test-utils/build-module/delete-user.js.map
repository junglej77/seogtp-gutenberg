{"version":3,"names":["switchUserToAdmin","switchUserToTest","visitAdminPage","deleteUser","username","userLink","page","$x","focus","keyboard","press","Promise","all","waitForNavigation","waitUntil","deleteContentRadioButton","$","click"],"sources":["@wordpress/e2e-test-utils/src/delete-user.js"],"sourcesContent":["/**\r\n * Internal dependencies\r\n */\r\nimport { switchUserToAdmin } from './switch-user-to-admin';\r\nimport { switchUserToTest } from './switch-user-to-test';\r\nimport { visitAdminPage } from './visit-admin-page';\r\n\r\n/**\r\n * Delete a user account.\r\n *\r\n * @param {string} username User name.\r\n */\r\nexport async function deleteUser( username ) {\r\n\tawait switchUserToAdmin();\r\n\tawait visitAdminPage( 'users.php' );\r\n\r\n\tconst [ userLink ] = await page.$x(\r\n\t\t`//td[@data-colname=\"Username\"]//a[contains(text(), \"${ username }\")]`\r\n\t);\r\n\r\n\tif ( ! userLink ) {\r\n\t\tawait switchUserToTest();\r\n\t\treturn;\r\n\t}\r\n\r\n\t// Focus to unveil actions.\r\n\tawait userLink.focus();\r\n\r\n\t// Tab twice to focus 'Delete'\r\n\tawait page.keyboard.press( 'Tab' );\r\n\tawait page.keyboard.press( 'Tab' );\r\n\r\n\tawait Promise.all( [\r\n\t\tpage.keyboard.press( 'Enter' ),\r\n\t\tpage.waitForNavigation( { waitUntil: 'networkidle0' } ),\r\n\t] );\r\n\r\n\t// If there's content owned by this user, delete it.\r\n\tconst deleteContentRadioButton = await page.$(\r\n\t\t'input[type=\"radio\"][name=\"delete_option\"][value=\"delete\"]'\r\n\t);\r\n\tif ( deleteContentRadioButton ) {\r\n\t\tawait deleteContentRadioButton.click();\r\n\t}\r\n\r\n\t// Confirm.\r\n\tawait Promise.all( [\r\n\t\tpage.click( 'input#submit' ),\r\n\t\tpage.waitForNavigation( { waitUntil: 'networkidle0' } ),\r\n\t] );\r\n\tawait switchUserToTest();\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,iBAAiB,QAAQ,wBAAwB;AAC1D,SAASC,gBAAgB,QAAQ,uBAAuB;AACxD,SAASC,cAAc,QAAQ,oBAAoB;;AAEnD;AACA;AACA;AACA;AACA;AACA,OAAO,eAAeC,UAAUA,CAAEC,QAAQ,EAAG;EAC5C,MAAMJ,iBAAiB,CAAC,CAAC;EACzB,MAAME,cAAc,CAAE,WAAY,CAAC;EAEnC,MAAM,CAAEG,QAAQ,CAAE,GAAG,MAAMC,IAAI,CAACC,EAAE,CAChC,uDAAuDH,QAAU,KACnE,CAAC;EAED,IAAK,CAAEC,QAAQ,EAAG;IACjB,MAAMJ,gBAAgB,CAAC,CAAC;IACxB;EACD;;EAEA;EACA,MAAMI,QAAQ,CAACG,KAAK,CAAC,CAAC;;EAEtB;EACA,MAAMF,IAAI,CAACG,QAAQ,CAACC,KAAK,CAAE,KAAM,CAAC;EAClC,MAAMJ,IAAI,CAACG,QAAQ,CAACC,KAAK,CAAE,KAAM,CAAC;EAElC,MAAMC,OAAO,CAACC,GAAG,CAAE,CAClBN,IAAI,CAACG,QAAQ,CAACC,KAAK,CAAE,OAAQ,CAAC,EAC9BJ,IAAI,CAACO,iBAAiB,CAAE;IAAEC,SAAS,EAAE;EAAe,CAAE,CAAC,CACtD,CAAC;;EAEH;EACA,MAAMC,wBAAwB,GAAG,MAAMT,IAAI,CAACU,CAAC,CAC5C,2DACD,CAAC;EACD,IAAKD,wBAAwB,EAAG;IAC/B,MAAMA,wBAAwB,CAACE,KAAK,CAAC,CAAC;EACvC;;EAEA;EACA,MAAMN,OAAO,CAACC,GAAG,CAAE,CAClBN,IAAI,CAACW,KAAK,CAAE,cAAe,CAAC,EAC5BX,IAAI,CAACO,iBAAiB,CAAE;IAAEC,SAAS,EAAE;EAAe,CAAE,CAAC,CACtD,CAAC;EACH,MAAMb,gBAAgB,CAAC,CAAC;AACzB","ignoreList":[]}