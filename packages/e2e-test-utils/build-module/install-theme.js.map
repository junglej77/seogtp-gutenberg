{"version":3,"names":["switchUserToAdmin","switchUserToTest","visitAdminPage","isThemeInstalled","installTheme","slug","searchTerm","installed","encodeURIComponent","page","waitForSelector","activateLink","$","click","timeout"],"sources":["@wordpress/e2e-test-utils/src/install-theme.js"],"sourcesContent":["/**\r\n * Internal dependencies\r\n */\r\nimport { switchUserToAdmin } from './switch-user-to-admin';\r\nimport { switchUserToTest } from './switch-user-to-test';\r\nimport { visitAdminPage } from './visit-admin-page';\r\nimport { isThemeInstalled } from './theme-installed';\r\n\r\n/**\r\n * Installs a theme from the WP.org repository.\r\n *\r\n * @param {string}  slug                Theme slug.\r\n * @param {Object?} settings            Optional settings object.\r\n * @param {string?} settings.searchTerm Search term to use if the theme is not findable by its slug.\r\n */\r\nexport async function installTheme( slug, { searchTerm } = {} ) {\r\n\tawait switchUserToAdmin();\r\n\r\n\tconst installed = await isThemeInstalled( slug );\r\n\tif ( installed ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tawait visitAdminPage(\r\n\t\t'theme-install.php',\r\n\t\t`search=${ encodeURIComponent( searchTerm || slug ) }`\r\n\t);\r\n\tawait page.waitForSelector( `div[data-slug=\"${ slug }\"]` );\r\n\r\n\tconst activateLink = await page.$(\r\n\t\t`div[data-slug=\"${ slug }\"] .button.activate`\r\n\t);\r\n\tif ( activateLink ) {\r\n\t\tawait switchUserToTest();\r\n\t\treturn;\r\n\t}\r\n\r\n\tawait page.waitForSelector( `.theme-install[data-slug=\"${ slug }\"]` );\r\n\tawait page.click( `.theme-install[data-slug=\"${ slug }\"]` );\r\n\tawait page.waitForSelector( `.theme[data-slug=\"${ slug }\"] .activate`, {\r\n\t\ttimeout: 60000,\r\n\t} );\r\n\tawait switchUserToTest();\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,iBAAiB,QAAQ,wBAAwB;AAC1D,SAASC,gBAAgB,QAAQ,uBAAuB;AACxD,SAASC,cAAc,QAAQ,oBAAoB;AACnD,SAASC,gBAAgB,QAAQ,mBAAmB;;AAEpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,eAAeC,YAAYA,CAAEC,IAAI,EAAE;EAAEC;AAAW,CAAC,GAAG,CAAC,CAAC,EAAG;EAC/D,MAAMN,iBAAiB,CAAC,CAAC;EAEzB,MAAMO,SAAS,GAAG,MAAMJ,gBAAgB,CAAEE,IAAK,CAAC;EAChD,IAAKE,SAAS,EAAG;IAChB;EACD;EAEA,MAAML,cAAc,CACnB,mBAAmB,EAClB,UAAUM,kBAAkB,CAAEF,UAAU,IAAID,IAAK,CAAG,EACtD,CAAC;EACD,MAAMI,IAAI,CAACC,eAAe,CAAG,kBAAkBL,IAAM,IAAI,CAAC;EAE1D,MAAMM,YAAY,GAAG,MAAMF,IAAI,CAACG,CAAC,CAC/B,kBAAkBP,IAAM,qBAC1B,CAAC;EACD,IAAKM,YAAY,EAAG;IACnB,MAAMV,gBAAgB,CAAC,CAAC;IACxB;EACD;EAEA,MAAMQ,IAAI,CAACC,eAAe,CAAG,6BAA6BL,IAAM,IAAI,CAAC;EACrE,MAAMI,IAAI,CAACI,KAAK,CAAG,6BAA6BR,IAAM,IAAI,CAAC;EAC3D,MAAMI,IAAI,CAACC,eAAe,CAAG,qBAAqBL,IAAM,cAAa,EAAE;IACtES,OAAO,EAAE;EACV,CAAE,CAAC;EACH,MAAMb,gBAAgB,CAAC,CAAC;AACzB","ignoreList":[]}