{"version":3,"names":["enableFocusLossObservation","page","evaluate","window","_detectFocusLoss","document","body","removeEventListener","event","relatedTarget","Error","addEventListener","disableFocusLossObservation"],"sources":["@wordpress/e2e-test-utils/src/observe-focus-loss.js"],"sourcesContent":["/**\r\n * Adds an event listener to the document which throws an error if there is a\r\n * loss of focus.\r\n */\r\nexport async function enableFocusLossObservation() {\r\n\tawait page.evaluate( () => {\r\n\t\tif ( window._detectFocusLoss ) {\r\n\t\t\tdocument.body.removeEventListener(\r\n\t\t\t\t'focusout',\r\n\t\t\t\twindow._detectFocusLoss\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\twindow._detectFocusLoss = ( event ) => {\r\n\t\t\tif ( ! event.relatedTarget ) {\r\n\t\t\t\tthrow new Error( 'Unexpected focus loss' );\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tdocument.body.addEventListener( 'focusout', window._detectFocusLoss );\r\n\t} );\r\n}\r\n\r\n/**\r\n * Removes the focus loss listener that `enableFocusLossObservation()` adds.\r\n */\r\nexport async function disableFocusLossObservation() {\r\n\tawait page.evaluate( () => {\r\n\t\tif ( window._detectFocusLoss ) {\r\n\t\t\tdocument.body.removeEventListener(\r\n\t\t\t\t'focusout',\r\n\t\t\t\twindow._detectFocusLoss\r\n\t\t\t);\r\n\t\t}\r\n\t} );\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,OAAO,eAAeA,0BAA0BA,CAAA,EAAG;EAClD,MAAMC,IAAI,CAACC,QAAQ,CAAE,MAAM;IAC1B,IAAKC,MAAM,CAACC,gBAAgB,EAAG;MAC9BC,QAAQ,CAACC,IAAI,CAACC,mBAAmB,CAChC,UAAU,EACVJ,MAAM,CAACC,gBACR,CAAC;IACF;IAEAD,MAAM,CAACC,gBAAgB,GAAKI,KAAK,IAAM;MACtC,IAAK,CAAEA,KAAK,CAACC,aAAa,EAAG;QAC5B,MAAM,IAAIC,KAAK,CAAE,uBAAwB,CAAC;MAC3C;IACD,CAAC;IAEDL,QAAQ,CAACC,IAAI,CAACK,gBAAgB,CAAE,UAAU,EAAER,MAAM,CAACC,gBAAiB,CAAC;EACtE,CAAE,CAAC;AACJ;;AAEA;AACA;AACA;AACA,OAAO,eAAeQ,2BAA2BA,CAAA,EAAG;EACnD,MAAMX,IAAI,CAACC,QAAQ,CAAE,MAAM;IAC1B,IAAKC,MAAM,CAACC,gBAAgB,EAAG;MAC9BC,QAAQ,CAACC,IAAI,CAACC,mBAAmB,CAChC,UAAU,EACVJ,MAAM,CAACC,gBACR,CAAC;IACF;EACD,CAAE,CAAC;AACJ","ignoreList":[]}