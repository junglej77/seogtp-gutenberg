{"version":3,"names":["paramCase","kebabCase","rest","pluginsMapPromise","getPluginsMap","plugins","path","map","plugin","name","activatePlugin","slug","pluginsMap","method","data","status","deactivatePlugin"],"sources":["@wordpress/e2e-test-utils/src/plugins.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport { paramCase as kebabCase } from 'change-case';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { rest } from './rest-api';\r\n\r\nconst pluginsMapPromise = ( async function getPluginsMap() {\r\n\tconst plugins = await rest( { path: '/wp/v2/plugins' } );\r\n\tconst map = {};\r\n\tfor ( const plugin of plugins ) {\r\n\t\t// Ideally, we should be using sanitize_title() in PHP rather than kebabCase(),\r\n\t\t// but we don't have the exact port of it in JS.\r\n\t\tmap[ kebabCase( plugin.name ) ] = plugin.plugin;\r\n\t}\r\n\treturn map;\r\n} )();\r\n\r\n/**\r\n * Activates an installed plugin.\r\n *\r\n * @param {string} slug Plugin slug.\r\n */\r\nasync function activatePlugin( slug ) {\r\n\tconst pluginsMap = await pluginsMapPromise;\r\n\tconst plugin = pluginsMap[ slug ];\r\n\r\n\tawait rest( {\r\n\t\tmethod: 'PUT',\r\n\t\tpath: `/wp/v2/plugins/${ plugin }`,\r\n\t\tdata: { status: 'active' },\r\n\t} );\r\n}\r\n\r\n/**\r\n * Deactivates an active plugin.\r\n *\r\n * @param {string} slug Plugin slug.\r\n */\r\nasync function deactivatePlugin( slug ) {\r\n\tconst pluginsMap = await pluginsMapPromise;\r\n\tconst plugin = pluginsMap[ slug ];\r\n\r\n\tawait rest( {\r\n\t\tmethod: 'PUT',\r\n\t\tpath: `/wp/v2/plugins/${ plugin }`,\r\n\t\tdata: { status: 'inactive' },\r\n\t} );\r\n}\r\n\r\nexport { activatePlugin, deactivatePlugin };\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,SAAS,IAAIC,SAAS,QAAQ,aAAa;;AAEpD;AACA;AACA;AACA,SAASC,IAAI,QAAQ,YAAY;AAEjC,MAAMC,iBAAiB,GAAK,eAAeC,aAAaA,CAAA,EAAG;EAC1D,MAAMC,OAAO,GAAG,MAAMH,IAAI,CAAE;IAAEI,IAAI,EAAE;EAAiB,CAAE,CAAC;EACxD,MAAMC,GAAG,GAAG,CAAC,CAAC;EACd,KAAM,MAAMC,MAAM,IAAIH,OAAO,EAAG;IAC/B;IACA;IACAE,GAAG,CAAEN,SAAS,CAAEO,MAAM,CAACC,IAAK,CAAC,CAAE,GAAGD,MAAM,CAACA,MAAM;EAChD;EACA,OAAOD,GAAG;AACX,CAAC,CAAG,CAAC;;AAEL;AACA;AACA;AACA;AACA;AACA,eAAeG,cAAcA,CAAEC,IAAI,EAAG;EACrC,MAAMC,UAAU,GAAG,MAAMT,iBAAiB;EAC1C,MAAMK,MAAM,GAAGI,UAAU,CAAED,IAAI,CAAE;EAEjC,MAAMT,IAAI,CAAE;IACXW,MAAM,EAAE,KAAK;IACbP,IAAI,EAAG,kBAAkBE,MAAQ,EAAC;IAClCM,IAAI,EAAE;MAAEC,MAAM,EAAE;IAAS;EAC1B,CAAE,CAAC;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAeC,gBAAgBA,CAAEL,IAAI,EAAG;EACvC,MAAMC,UAAU,GAAG,MAAMT,iBAAiB;EAC1C,MAAMK,MAAM,GAAGI,UAAU,CAAED,IAAI,CAAE;EAEjC,MAAMT,IAAI,CAAE;IACXW,MAAM,EAAE,KAAK;IACbP,IAAI,EAAG,kBAAkBE,MAAQ,EAAC;IAClCM,IAAI,EAAE;MAAEC,MAAM,EAAE;IAAW;EAC5B,CAAE,CAAC;AACJ;AAEA,SAASL,cAAc,EAAEM,gBAAgB","ignoreList":[]}