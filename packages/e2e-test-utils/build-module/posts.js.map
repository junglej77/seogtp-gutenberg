{"version":3,"names":["addQueryArgs","switchUserToAdmin","switchUserToTest","visitAdminPage","trashAllPosts","postType","postStatus","query","post_type","post_status","slice","bulkSelector","page","$","waitForSelector","click","select","waitForXPath"],"sources":["@wordpress/e2e-test-utils/src/posts.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { addQueryArgs } from '@wordpress/url';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { switchUserToAdmin } from './switch-user-to-admin';\r\nimport { switchUserToTest } from './switch-user-to-test';\r\nimport { visitAdminPage } from './visit-admin-page';\r\n\r\n/**\r\n * Navigates to the post listing screen and bulk-trashes any posts which exist.\r\n *\r\n * @param {string} postType   - String slug for type of post to trash.\r\n * @param {string} postStatus - String status of posts to trash.\r\n *\r\n * @return {Promise} Promise resolving once posts have been trashed.\r\n */\r\nexport async function trashAllPosts( postType = 'post', postStatus ) {\r\n\tawait switchUserToAdmin();\r\n\t// Visit `/wp-admin/edit.php` so we can see a list of posts and delete them.\r\n\tconst query = addQueryArgs( '', {\r\n\t\tpost_type: postType,\r\n\t\tpost_status: postStatus,\r\n\t} ).slice( 1 );\r\n\tawait visitAdminPage( 'edit.php', query );\r\n\r\n\t// If this selector doesn't exist there are no posts for us to delete.\r\n\tconst bulkSelector = await page.$( '#bulk-action-selector-top' );\r\n\tif ( ! bulkSelector ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\t// Select all posts.\r\n\tawait page.waitForSelector( '[id^=cb-select-all-]' );\r\n\tawait page.click( '[id^=cb-select-all-]' );\r\n\t// Select the \"bulk actions\" > \"trash\" option.\r\n\tawait page.select( '#bulk-action-selector-top', 'trash' );\r\n\t// Submit the form to send all draft/scheduled/published posts to the trash.\r\n\tawait page.click( '#doaction' );\r\n\tawait page.waitForXPath(\r\n\t\t'//*[contains(@class, \"notice\")]/p[contains(text(), \"moved to the Trash.\")]'\r\n\t);\r\n\tawait switchUserToTest();\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,YAAY,QAAQ,gBAAgB;;AAE7C;AACA;AACA;AACA,SAASC,iBAAiB,QAAQ,wBAAwB;AAC1D,SAASC,gBAAgB,QAAQ,uBAAuB;AACxD,SAASC,cAAc,QAAQ,oBAAoB;;AAEnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,eAAeC,aAAaA,CAAEC,QAAQ,GAAG,MAAM,EAAEC,UAAU,EAAG;EACpE,MAAML,iBAAiB,CAAC,CAAC;EACzB;EACA,MAAMM,KAAK,GAAGP,YAAY,CAAE,EAAE,EAAE;IAC/BQ,SAAS,EAAEH,QAAQ;IACnBI,WAAW,EAAEH;EACd,CAAE,CAAC,CAACI,KAAK,CAAE,CAAE,CAAC;EACd,MAAMP,cAAc,CAAE,UAAU,EAAEI,KAAM,CAAC;;EAEzC;EACA,MAAMI,YAAY,GAAG,MAAMC,IAAI,CAACC,CAAC,CAAE,2BAA4B,CAAC;EAChE,IAAK,CAAEF,YAAY,EAAG;IACrB;EACD;;EAEA;EACA,MAAMC,IAAI,CAACE,eAAe,CAAE,sBAAuB,CAAC;EACpD,MAAMF,IAAI,CAACG,KAAK,CAAE,sBAAuB,CAAC;EAC1C;EACA,MAAMH,IAAI,CAACI,MAAM,CAAE,2BAA2B,EAAE,OAAQ,CAAC;EACzD;EACA,MAAMJ,IAAI,CAACG,KAAK,CAAE,WAAY,CAAC;EAC/B,MAAMH,IAAI,CAACK,YAAY,CACtB,4EACD,CAAC;EACD,MAAMf,gBAAgB,CAAC,CAAC;AACzB","ignoreList":[]}