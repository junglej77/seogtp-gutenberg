{"version":3,"names":["openPreviewPage","editorPage","page","openTabs","browser","pages","expectedTabsCount","length","waitForSelector","click","waitForTimeout","previewPage"],"sources":["@wordpress/e2e-test-utils/src/preview.js"],"sourcesContent":["/** @typedef {import('puppeteer-core').Page} Page */\r\n\r\n/**\r\n * Opens the preview page of an edited post.\r\n *\r\n * @param {Page} editorPage puppeteer editor page.\r\n * @return {Page} preview page.\r\n */\r\nexport async function openPreviewPage( editorPage = page ) {\r\n\tlet openTabs = await browser.pages();\r\n\tconst expectedTabsCount = openTabs.length + 1;\r\n\tawait page.waitForSelector(\r\n\t\t'.editor-preview-dropdown__toggle:not([disabled])'\r\n\t);\r\n\tawait editorPage.click( '.editor-preview-dropdown__toggle' );\r\n\tawait editorPage.waitForSelector(\r\n\t\t'.editor-preview-dropdown__button-external'\r\n\t);\r\n\tawait editorPage.click( '.editor-preview-dropdown__button-external' );\r\n\r\n\t// Wait for the new tab to open.\r\n\twhile ( openTabs.length < expectedTabsCount ) {\r\n\t\tawait editorPage.waitForTimeout( 1 );\r\n\t\topenTabs = await browser.pages();\r\n\t}\r\n\r\n\tconst previewPage = openTabs[ openTabs.length - 1 ];\r\n\treturn previewPage;\r\n}\r\n"],"mappings":"AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,eAAeA,eAAeA,CAAEC,UAAU,GAAGC,IAAI,EAAG;EAC1D,IAAIC,QAAQ,GAAG,MAAMC,OAAO,CAACC,KAAK,CAAC,CAAC;EACpC,MAAMC,iBAAiB,GAAGH,QAAQ,CAACI,MAAM,GAAG,CAAC;EAC7C,MAAML,IAAI,CAACM,eAAe,CACzB,kDACD,CAAC;EACD,MAAMP,UAAU,CAACQ,KAAK,CAAE,kCAAmC,CAAC;EAC5D,MAAMR,UAAU,CAACO,eAAe,CAC/B,2CACD,CAAC;EACD,MAAMP,UAAU,CAACQ,KAAK,CAAE,2CAA4C,CAAC;;EAErE;EACA,OAAQN,QAAQ,CAACI,MAAM,GAAGD,iBAAiB,EAAG;IAC7C,MAAML,UAAU,CAACS,cAAc,CAAE,CAAE,CAAC;IACpCP,QAAQ,GAAG,MAAMC,OAAO,CAACC,KAAK,CAAC,CAAC;EACjC;EAEA,MAAMM,WAAW,GAAGR,QAAQ,CAAEA,QAAQ,CAACI,MAAM,GAAG,CAAC,CAAE;EACnD,OAAOI,WAAW;AACnB","ignoreList":[]}