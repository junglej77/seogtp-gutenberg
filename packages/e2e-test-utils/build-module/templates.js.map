{"version":3,"names":["rest","PATH_MAPPING","wp_template","wp_template_part","deleteAllTemplates","type","path","Error","templates","length","template","wp_id","id","method","responseError","console","warn"],"sources":["@wordpress/e2e-test-utils/src/templates.js"],"sourcesContent":["/**\r\n * Internal dependencies\r\n */\r\nimport { rest } from './rest-api';\r\n\r\nconst PATH_MAPPING = {\r\n\twp_template: '/wp/v2/templates',\r\n\twp_template_part: '/wp/v2/template-parts',\r\n};\r\n\r\n/**\r\n * Delete all the templates of given type.\r\n *\r\n * @param {('wp_template'|'wp_template_part')} type - Template type to delete.\r\n */\r\nexport async function deleteAllTemplates( type ) {\r\n\tconst path = PATH_MAPPING[ type ];\r\n\r\n\tif ( ! path ) {\r\n\t\tthrow new Error( `Unsupported template type: ${ type }.` );\r\n\t}\r\n\r\n\tconst templates = await rest( { path } );\r\n\r\n\tif ( ! templates?.length ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tfor ( const template of templates ) {\r\n\t\tif ( ! template?.wp_id ) {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tawait rest( {\r\n\t\t\t\tpath: `${ path }/${ template.id }?force=true`,\r\n\t\t\t\tmethod: 'DELETE',\r\n\t\t\t} );\r\n\t\t} catch ( responseError ) {\r\n\t\t\t// Disable reason - the error provides valuable feedback about issues with tests.\r\n\t\t\t// eslint-disable-next-line no-console\r\n\t\t\tconsole.warn(\r\n\t\t\t\t`deleteAllTemplates failed to delete template (id: ${ template.wp_id }) with the following error`,\r\n\t\t\t\tresponseError\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,IAAI,QAAQ,YAAY;AAEjC,MAAMC,YAAY,GAAG;EACpBC,WAAW,EAAE,kBAAkB;EAC/BC,gBAAgB,EAAE;AACnB,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,OAAO,eAAeC,kBAAkBA,CAAEC,IAAI,EAAG;EAChD,MAAMC,IAAI,GAAGL,YAAY,CAAEI,IAAI,CAAE;EAEjC,IAAK,CAAEC,IAAI,EAAG;IACb,MAAM,IAAIC,KAAK,CAAG,8BAA8BF,IAAM,GAAG,CAAC;EAC3D;EAEA,MAAMG,SAAS,GAAG,MAAMR,IAAI,CAAE;IAAEM;EAAK,CAAE,CAAC;EAExC,IAAK,CAAEE,SAAS,EAAEC,MAAM,EAAG;IAC1B;EACD;EAEA,KAAM,MAAMC,QAAQ,IAAIF,SAAS,EAAG;IACnC,IAAK,CAAEE,QAAQ,EAAEC,KAAK,EAAG;MACxB;IACD;IAEA,IAAI;MACH,MAAMX,IAAI,CAAE;QACXM,IAAI,EAAG,GAAGA,IAAM,IAAII,QAAQ,CAACE,EAAI,aAAY;QAC7CC,MAAM,EAAE;MACT,CAAE,CAAC;IACJ,CAAC,CAAC,OAAQC,aAAa,EAAG;MACzB;MACA;MACAC,OAAO,CAACC,IAAI,CACV,qDAAqDN,QAAQ,CAACC,KAAO,4BAA2B,EACjGG,aACD,CAAC;IACF;EACD;AACD","ignoreList":[]}