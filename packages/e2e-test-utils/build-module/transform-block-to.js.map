{"version":3,"names":["showBlockToolbar","transformBlockTo","name","switcherToggle","page","waitForSelector","evaluate","element","scrollIntoView","visible","click","xpath","insertButton","waitForXPath","Promise","requestIdleCallback"],"sources":["@wordpress/e2e-test-utils/src/transform-block-to.js"],"sourcesContent":["/**\r\n * Internal dependencies\r\n */\r\nimport { showBlockToolbar } from './show-block-toolbar';\r\n\r\n/**\r\n * Converts editor's block type.\r\n *\r\n * @param {string} name Block name.\r\n */\r\nexport async function transformBlockTo( name ) {\r\n\tawait showBlockToolbar();\r\n\r\n\tconst switcherToggle = await page.waitForSelector(\r\n\t\t'.block-editor-block-switcher__toggle'\r\n\t);\r\n\tawait switcherToggle.evaluate( ( element ) => element.scrollIntoView() );\r\n\tawait page.waitForSelector( '.block-editor-block-switcher__toggle', {\r\n\t\tvisible: true,\r\n\t} );\r\n\tawait switcherToggle.click();\r\n\tawait page.waitForSelector( '.block-editor-block-switcher__container', {\r\n\t\tvisible: true,\r\n\t} );\r\n\r\n\t// Find the block button option within the switcher popover.\r\n\tconst xpath = `//*[contains(@class, \"block-editor-block-switcher__popover\")]//button[.='${ name }']`;\r\n\tconst insertButton = await page.waitForXPath( xpath, { visible: true } );\r\n\t// Clicks may fail if the button is out of view. Assure it is before click.\r\n\tawait insertButton.evaluate( ( element ) => element.scrollIntoView() );\r\n\tawait insertButton.click();\r\n\r\n\tawait page.evaluate( () => new Promise( requestIdleCallback ) );\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,gBAAgB,QAAQ,sBAAsB;;AAEvD;AACA;AACA;AACA;AACA;AACA,OAAO,eAAeC,gBAAgBA,CAAEC,IAAI,EAAG;EAC9C,MAAMF,gBAAgB,CAAC,CAAC;EAExB,MAAMG,cAAc,GAAG,MAAMC,IAAI,CAACC,eAAe,CAChD,sCACD,CAAC;EACD,MAAMF,cAAc,CAACG,QAAQ,CAAIC,OAAO,IAAMA,OAAO,CAACC,cAAc,CAAC,CAAE,CAAC;EACxE,MAAMJ,IAAI,CAACC,eAAe,CAAE,sCAAsC,EAAE;IACnEI,OAAO,EAAE;EACV,CAAE,CAAC;EACH,MAAMN,cAAc,CAACO,KAAK,CAAC,CAAC;EAC5B,MAAMN,IAAI,CAACC,eAAe,CAAE,yCAAyC,EAAE;IACtEI,OAAO,EAAE;EACV,CAAE,CAAC;;EAEH;EACA,MAAME,KAAK,GAAI,4EAA4ET,IAAM,IAAG;EACpG,MAAMU,YAAY,GAAG,MAAMR,IAAI,CAACS,YAAY,CAAEF,KAAK,EAAE;IAAEF,OAAO,EAAE;EAAK,CAAE,CAAC;EACxE;EACA,MAAMG,YAAY,CAACN,QAAQ,CAAIC,OAAO,IAAMA,OAAO,CAACC,cAAc,CAAC,CAAE,CAAC;EACtE,MAAMI,YAAY,CAACF,KAAK,CAAC,CAAC;EAE1B,MAAMN,IAAI,CAACE,QAAQ,CAAE,MAAM,IAAIQ,OAAO,CAAEC,mBAAoB,CAAE,CAAC;AAChE","ignoreList":[]}