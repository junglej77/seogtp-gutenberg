{"version":3,"names":["switchUserToAdmin","switchUserToTest","visitAdminPage","uninstallPlugin","slug","confirmPromise","Promise","resolve","page","once","all","click","waitForSelector"],"sources":["@wordpress/e2e-test-utils/src/uninstall-plugin.js"],"sourcesContent":["/**\r\n * Internal dependencies\r\n */\r\nimport { switchUserToAdmin } from './switch-user-to-admin';\r\nimport { switchUserToTest } from './switch-user-to-test';\r\nimport { visitAdminPage } from './visit-admin-page';\r\n\r\n/**\r\n * Uninstalls a plugin.\r\n *\r\n * @param {string} slug Plugin slug.\r\n */\r\nexport async function uninstallPlugin( slug ) {\r\n\tawait switchUserToAdmin();\r\n\tawait visitAdminPage( 'plugins.php' );\r\n\tconst confirmPromise = new Promise( ( resolve ) => {\r\n\t\tpage.once( 'dialog', () => resolve() );\r\n\t} );\r\n\tawait Promise.all( [\r\n\t\tconfirmPromise,\r\n\t\tpage.click( `tr[data-slug=\"${ slug }\"] .delete a` ),\r\n\t] );\r\n\tawait page.waitForSelector( `tr[data-slug=\"${ slug }\"].deleted` );\r\n\tawait switchUserToTest();\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,iBAAiB,QAAQ,wBAAwB;AAC1D,SAASC,gBAAgB,QAAQ,uBAAuB;AACxD,SAASC,cAAc,QAAQ,oBAAoB;;AAEnD;AACA;AACA;AACA;AACA;AACA,OAAO,eAAeC,eAAeA,CAAEC,IAAI,EAAG;EAC7C,MAAMJ,iBAAiB,CAAC,CAAC;EACzB,MAAME,cAAc,CAAE,aAAc,CAAC;EACrC,MAAMG,cAAc,GAAG,IAAIC,OAAO,CAAIC,OAAO,IAAM;IAClDC,IAAI,CAACC,IAAI,CAAE,QAAQ,EAAE,MAAMF,OAAO,CAAC,CAAE,CAAC;EACvC,CAAE,CAAC;EACH,MAAMD,OAAO,CAACI,GAAG,CAAE,CAClBL,cAAc,EACdG,IAAI,CAACG,KAAK,CAAG,iBAAiBP,IAAM,cAAc,CAAC,CAClD,CAAC;EACH,MAAMI,IAAI,CAACI,eAAe,CAAG,iBAAiBR,IAAM,YAAY,CAAC;EACjE,MAAMH,gBAAgB,CAAC,CAAC;AACzB","ignoreList":[]}