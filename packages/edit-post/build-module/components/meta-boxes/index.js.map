{"version":3,"names":["useSelect","useRegistry","useEffect","store","editorStore","MetaBoxesArea","MetaBoxVisibility","editPostStore","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","MetaBoxes","location","registry","metaBoxes","areMetaBoxesInitialized","isEditorReady","select","__unstableIsEditorReady","getMetaBoxesPerLocation","_areMetaBoxesInitialized","hasMetaBoxes","length","dispatch","initializeMetaBoxes","children","map","id"],"sources":["@wordpress/edit-post/src/components/meta-boxes/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect, useRegistry } from '@wordpress/data';\r\nimport { useEffect } from '@wordpress/element';\r\nimport { store as editorStore } from '@wordpress/editor';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport MetaBoxesArea from './meta-boxes-area';\r\nimport MetaBoxVisibility from './meta-box-visibility';\r\nimport { store as editPostStore } from '../../store';\r\n\r\nexport default function MetaBoxes( { location } ) {\r\n\tconst registry = useRegistry();\r\n\tconst { metaBoxes, areMetaBoxesInitialized, isEditorReady } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst { __unstableIsEditorReady } = select( editorStore );\r\n\t\t\tconst {\r\n\t\t\t\tgetMetaBoxesPerLocation,\r\n\t\t\t\tareMetaBoxesInitialized: _areMetaBoxesInitialized,\r\n\t\t\t} = select( editPostStore );\r\n\t\t\treturn {\r\n\t\t\t\tmetaBoxes: getMetaBoxesPerLocation( location ),\r\n\t\t\t\tareMetaBoxesInitialized: _areMetaBoxesInitialized(),\r\n\t\t\t\tisEditorReady: __unstableIsEditorReady(),\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ location ]\r\n\t);\r\n\r\n\tconst hasMetaBoxes = !! metaBoxes?.length;\r\n\r\n\t// When editor is ready, initialize postboxes (wp core script) and metabox\r\n\t// saving. This initializes all meta box locations, not just this specific\r\n\t// one.\r\n\tuseEffect( () => {\r\n\t\tif ( isEditorReady && hasMetaBoxes && ! areMetaBoxesInitialized ) {\r\n\t\t\tregistry.dispatch( editPostStore ).initializeMetaBoxes();\r\n\t\t}\r\n\t}, [ isEditorReady, hasMetaBoxes, areMetaBoxesInitialized ] );\r\n\r\n\tif ( ! areMetaBoxesInitialized ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ ( metaBoxes ?? [] ).map( ( { id } ) => (\r\n\t\t\t\t<MetaBoxVisibility key={ id } id={ id } />\r\n\t\t\t) ) }\r\n\t\t\t<MetaBoxesArea location={ location } />\r\n\t\t</>\r\n\t);\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,SAAS,EAAEC,WAAW,QAAQ,iBAAiB;AACxD,SAASC,SAAS,QAAQ,oBAAoB;AAC9C,SAASC,KAAK,IAAIC,WAAW,QAAQ,mBAAmB;;AAExD;AACA;AACA;AACA,OAAOC,aAAa,MAAM,mBAAmB;AAC7C,OAAOC,iBAAiB,MAAM,uBAAuB;AACrD,SAASH,KAAK,IAAII,aAAa,QAAQ,aAAa;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAErD,eAAe,SAASC,SAASA,CAAE;EAAEC;AAAS,CAAC,EAAG;EACjD,MAAMC,QAAQ,GAAGf,WAAW,CAAC,CAAC;EAC9B,MAAM;IAAEgB,SAAS;IAAEC,uBAAuB;IAAEC;EAAc,CAAC,GAAGnB,SAAS,CACpEoB,MAAM,IAAM;IACb,MAAM;MAAEC;IAAwB,CAAC,GAAGD,MAAM,CAAEhB,WAAY,CAAC;IACzD,MAAM;MACLkB,uBAAuB;MACvBJ,uBAAuB,EAAEK;IAC1B,CAAC,GAAGH,MAAM,CAAEb,aAAc,CAAC;IAC3B,OAAO;MACNU,SAAS,EAAEK,uBAAuB,CAAEP,QAAS,CAAC;MAC9CG,uBAAuB,EAAEK,wBAAwB,CAAC,CAAC;MACnDJ,aAAa,EAAEE,uBAAuB,CAAC;IACxC,CAAC;EACF,CAAC,EACD,CAAEN,QAAQ,CACX,CAAC;EAED,MAAMS,YAAY,GAAG,CAAC,CAAEP,SAAS,EAAEQ,MAAM;;EAEzC;EACA;EACA;EACAvB,SAAS,CAAE,MAAM;IAChB,IAAKiB,aAAa,IAAIK,YAAY,IAAI,CAAEN,uBAAuB,EAAG;MACjEF,QAAQ,CAACU,QAAQ,CAAEnB,aAAc,CAAC,CAACoB,mBAAmB,CAAC,CAAC;IACzD;EACD,CAAC,EAAE,CAAER,aAAa,EAAEK,YAAY,EAAEN,uBAAuB,CAAG,CAAC;EAE7D,IAAK,CAAEA,uBAAuB,EAAG;IAChC,OAAO,IAAI;EACZ;EAEA,oBACCL,KAAA,CAAAF,SAAA;IAAAiB,QAAA,GACG,CAAEX,SAAS,aAATA,SAAS,cAATA,SAAS,GAAI,EAAE,EAAGY,GAAG,CAAE,CAAE;MAAEC;IAAG,CAAC,kBAClCrB,IAAA,CAACH,iBAAiB;MAAYwB,EAAE,EAAGA;IAAI,GAAdA,EAAgB,CACxC,CAAC,eACHrB,IAAA,CAACJ,aAAa;MAACU,QAAQ,EAAGA;IAAU,CAAE,CAAC;EAAA,CACtC,CAAC;AAEL","ignoreList":[]}