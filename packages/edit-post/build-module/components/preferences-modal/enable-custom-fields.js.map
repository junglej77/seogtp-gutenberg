{"version":3,"names":["useState","__","Button","withSelect","store","editorStore","privateApis","preferencesPrivateApis","getPathAndQueryString","unlock","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","PreferenceBaseOption","submitCustomFieldsForm","customFieldsForm","document","getElementById","querySelector","setAttribute","window","location","href","submit","CustomFieldsConfirmation","willEnable","isReloading","setIsReloading","children","className","__next40pxDefaultSize","variant","isBusy","accessibleWhenDisabled","disabled","onClick","EnableCustomFieldsOption","label","areCustomFieldsEnabled","isChecked","setIsChecked","onChange","select","getEditorSettings","enableCustomFields"],"sources":["@wordpress/edit-post/src/components/preferences-modal/enable-custom-fields.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useState } from '@wordpress/element';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { Button } from '@wordpress/components';\r\nimport { withSelect } from '@wordpress/data';\r\nimport { store as editorStore } from '@wordpress/editor';\r\nimport { privateApis as preferencesPrivateApis } from '@wordpress/preferences';\r\nimport { getPathAndQueryString } from '@wordpress/url';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { unlock } from '../../lock-unlock';\r\n\r\nconst { PreferenceBaseOption } = unlock( preferencesPrivateApis );\r\n\r\nfunction submitCustomFieldsForm() {\r\n\tconst customFieldsForm = document.getElementById(\r\n\t\t'toggle-custom-fields-form'\r\n\t);\r\n\r\n\t// Ensure the referrer values is up to update with any\r\n\tcustomFieldsForm\r\n\t\t.querySelector( '[name=\"_wp_http_referer\"]' )\r\n\t\t.setAttribute( 'value', getPathAndQueryString( window.location.href ) );\r\n\r\n\tcustomFieldsForm.submit();\r\n}\r\n\r\nexport function CustomFieldsConfirmation( { willEnable } ) {\r\n\tconst [ isReloading, setIsReloading ] = useState( false );\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<p className=\"edit-post-preferences-modal__custom-fields-confirmation-message\">\r\n\t\t\t\t{ __(\r\n\t\t\t\t\t'A page reload is required for this change. Make sure your content is saved before reloading.'\r\n\t\t\t\t) }\r\n\t\t\t</p>\r\n\t\t\t<Button\r\n\t\t\t\t// TODO: Switch to `true` (40px size) if possible\r\n\t\t\t\t__next40pxDefaultSize={ false }\r\n\t\t\t\tclassName=\"edit-post-preferences-modal__custom-fields-confirmation-button\"\r\n\t\t\t\tvariant=\"secondary\"\r\n\t\t\t\tisBusy={ isReloading }\r\n\t\t\t\taccessibleWhenDisabled\r\n\t\t\t\tdisabled={ isReloading }\r\n\t\t\t\tonClick={ () => {\r\n\t\t\t\t\tsetIsReloading( true );\r\n\t\t\t\t\tsubmitCustomFieldsForm();\r\n\t\t\t\t} }\r\n\t\t\t>\r\n\t\t\t\t{ willEnable\r\n\t\t\t\t\t? __( 'Show & Reload Page' )\r\n\t\t\t\t\t: __( 'Hide & Reload Page' ) }\r\n\t\t\t</Button>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport function EnableCustomFieldsOption( { label, areCustomFieldsEnabled } ) {\r\n\tconst [ isChecked, setIsChecked ] = useState( areCustomFieldsEnabled );\r\n\r\n\treturn (\r\n\t\t<PreferenceBaseOption\r\n\t\t\tlabel={ label }\r\n\t\t\tisChecked={ isChecked }\r\n\t\t\tonChange={ setIsChecked }\r\n\t\t>\r\n\t\t\t{ isChecked !== areCustomFieldsEnabled && (\r\n\t\t\t\t<CustomFieldsConfirmation willEnable={ isChecked } />\r\n\t\t\t) }\r\n\t\t</PreferenceBaseOption>\r\n\t);\r\n}\r\n\r\nexport default withSelect( ( select ) => ( {\r\n\tareCustomFieldsEnabled:\r\n\t\t!! select( editorStore ).getEditorSettings().enableCustomFields,\r\n} ) )( EnableCustomFieldsOption );\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,QAAQ,QAAQ,oBAAoB;AAC7C,SAASC,EAAE,QAAQ,iBAAiB;AACpC,SAASC,MAAM,QAAQ,uBAAuB;AAC9C,SAASC,UAAU,QAAQ,iBAAiB;AAC5C,SAASC,KAAK,IAAIC,WAAW,QAAQ,mBAAmB;AACxD,SAASC,WAAW,IAAIC,sBAAsB,QAAQ,wBAAwB;AAC9E,SAASC,qBAAqB,QAAQ,gBAAgB;;AAEtD;AACA;AACA;AACA,SAASC,MAAM,QAAQ,mBAAmB;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAE3C,MAAM;EAAEC;AAAqB,CAAC,GAAGP,MAAM,CAAEF,sBAAuB,CAAC;AAEjE,SAASU,sBAAsBA,CAAA,EAAG;EACjC,MAAMC,gBAAgB,GAAGC,QAAQ,CAACC,cAAc,CAC/C,2BACD,CAAC;;EAED;EACAF,gBAAgB,CACdG,aAAa,CAAE,2BAA4B,CAAC,CAC5CC,YAAY,CAAE,OAAO,EAAEd,qBAAqB,CAAEe,MAAM,CAACC,QAAQ,CAACC,IAAK,CAAE,CAAC;EAExEP,gBAAgB,CAACQ,MAAM,CAAC,CAAC;AAC1B;AAEA,OAAO,SAASC,wBAAwBA,CAAE;EAAEC;AAAW,CAAC,EAAG;EAC1D,MAAM,CAAEC,WAAW,EAAEC,cAAc,CAAE,GAAG9B,QAAQ,CAAE,KAAM,CAAC;EACzD,oBACCe,KAAA,CAAAF,SAAA;IAAAkB,QAAA,gBACCpB,IAAA;MAAGqB,SAAS,EAAC,iEAAiE;MAAAD,QAAA,EAC3E9B,EAAE,CACH,8FACD;IAAC,CACC,CAAC,eACJU,IAAA,CAACT;IACA;IAAA;MACA+B,qBAAqB,EAAG,KAAO;MAC/BD,SAAS,EAAC,gEAAgE;MAC1EE,OAAO,EAAC,WAAW;MACnBC,MAAM,EAAGN,WAAa;MACtBO,sBAAsB;MACtBC,QAAQ,EAAGR,WAAa;MACxBS,OAAO,EAAGA,CAAA,KAAM;QACfR,cAAc,CAAE,IAAK,CAAC;QACtBb,sBAAsB,CAAC,CAAC;MACzB,CAAG;MAAAc,QAAA,EAEDH,UAAU,GACT3B,EAAE,CAAE,oBAAqB,CAAC,GAC1BA,EAAE,CAAE,oBAAqB;IAAC,CACtB,CAAC;EAAA,CACR,CAAC;AAEL;AAEA,OAAO,SAASsC,wBAAwBA,CAAE;EAAEC,KAAK;EAAEC;AAAuB,CAAC,EAAG;EAC7E,MAAM,CAAEC,SAAS,EAAEC,YAAY,CAAE,GAAG3C,QAAQ,CAAEyC,sBAAuB,CAAC;EAEtE,oBACC9B,IAAA,CAACK,oBAAoB;IACpBwB,KAAK,EAAGA,KAAO;IACfE,SAAS,EAAGA,SAAW;IACvBE,QAAQ,EAAGD,YAAc;IAAAZ,QAAA,EAEvBW,SAAS,KAAKD,sBAAsB,iBACrC9B,IAAA,CAACgB,wBAAwB;MAACC,UAAU,EAAGc;IAAW,CAAE;EACpD,CACoB,CAAC;AAEzB;AAEA,eAAevC,UAAU,CAAI0C,MAAM,KAAQ;EAC1CJ,sBAAsB,EACrB,CAAC,CAAEI,MAAM,CAAExC,WAAY,CAAC,CAACyC,iBAAiB,CAAC,CAAC,CAACC;AAC/C,CAAC,CAAG,CAAC,CAAER,wBAAyB,CAAC","ignoreList":[]}