{"version":3,"names":["combineReducers","isSavingMetaBoxes","state","action","type","mergeMetaboxes","metaboxes","newMetaboxes","mergedMetaboxes","metabox","existing","findIndex","box","id","push","metaBoxLocations","newState","location","Object","entries","metaBoxesPerLocation","metaBoxesInitialized","metaBoxes","isSaving","locations","initialized"],"sources":["@wordpress/edit-post/src/store/reducer.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { combineReducers } from '@wordpress/data';\r\n\r\n/**\r\n * Reducer keeping track of the meta boxes isSaving state.\r\n * A \"true\" value means the meta boxes saving request is in-flight.\r\n *\r\n *\r\n * @param {boolean} state  Previous state.\r\n * @param {Object}  action Action Object.\r\n *\r\n * @return {Object} Updated state.\r\n */\r\nexport function isSavingMetaBoxes( state = false, action ) {\r\n\tswitch ( action.type ) {\r\n\t\tcase 'REQUEST_META_BOX_UPDATES':\r\n\t\t\treturn true;\r\n\t\tcase 'META_BOX_UPDATES_SUCCESS':\r\n\t\tcase 'META_BOX_UPDATES_FAILURE':\r\n\t\t\treturn false;\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\nfunction mergeMetaboxes( metaboxes = [], newMetaboxes ) {\r\n\tconst mergedMetaboxes = [ ...metaboxes ];\r\n\tfor ( const metabox of newMetaboxes ) {\r\n\t\tconst existing = mergedMetaboxes.findIndex(\r\n\t\t\t( box ) => box.id === metabox.id\r\n\t\t);\r\n\t\tif ( existing !== -1 ) {\r\n\t\t\tmergedMetaboxes[ existing ] = metabox;\r\n\t\t} else {\r\n\t\t\tmergedMetaboxes.push( metabox );\r\n\t\t}\r\n\t}\r\n\treturn mergedMetaboxes;\r\n}\r\n\r\n/**\r\n * Reducer keeping track of the meta boxes per location.\r\n *\r\n * @param {boolean} state  Previous state.\r\n * @param {Object}  action Action Object.\r\n *\r\n * @return {Object} Updated state.\r\n */\r\nexport function metaBoxLocations( state = {}, action ) {\r\n\tswitch ( action.type ) {\r\n\t\tcase 'SET_META_BOXES_PER_LOCATIONS': {\r\n\t\t\tconst newState = { ...state };\r\n\t\t\tfor ( const [ location, metaboxes ] of Object.entries(\r\n\t\t\t\taction.metaBoxesPerLocation\r\n\t\t\t) ) {\r\n\t\t\t\tnewState[ location ] = mergeMetaboxes(\r\n\t\t\t\t\tnewState[ location ],\r\n\t\t\t\t\tmetaboxes\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\treturn newState;\r\n\t\t}\r\n\t}\r\n\r\n\treturn state;\r\n}\r\n\r\n/**\r\n * Reducer tracking whether meta boxes are initialized.\r\n *\r\n * @param {boolean} state\r\n * @param {Object}  action\r\n *\r\n * @return {boolean} Updated state.\r\n */\r\nfunction metaBoxesInitialized( state = false, action ) {\r\n\tswitch ( action.type ) {\r\n\t\tcase 'META_BOXES_INITIALIZED':\r\n\t\t\treturn true;\r\n\t}\r\n\treturn state;\r\n}\r\n\r\nconst metaBoxes = combineReducers( {\r\n\tisSaving: isSavingMetaBoxes,\r\n\tlocations: metaBoxLocations,\r\n\tinitialized: metaBoxesInitialized,\r\n} );\r\n\r\nexport default combineReducers( {\r\n\tmetaBoxes,\r\n} );\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,eAAe,QAAQ,iBAAiB;;AAEjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,iBAAiBA,CAAEC,KAAK,GAAG,KAAK,EAAEC,MAAM,EAAG;EAC1D,QAASA,MAAM,CAACC,IAAI;IACnB,KAAK,0BAA0B;MAC9B,OAAO,IAAI;IACZ,KAAK,0BAA0B;IAC/B,KAAK,0BAA0B;MAC9B,OAAO,KAAK;IACb;MACC,OAAOF,KAAK;EACd;AACD;AAEA,SAASG,cAAcA,CAAEC,SAAS,GAAG,EAAE,EAAEC,YAAY,EAAG;EACvD,MAAMC,eAAe,GAAG,CAAE,GAAGF,SAAS,CAAE;EACxC,KAAM,MAAMG,OAAO,IAAIF,YAAY,EAAG;IACrC,MAAMG,QAAQ,GAAGF,eAAe,CAACG,SAAS,CACvCC,GAAG,IAAMA,GAAG,CAACC,EAAE,KAAKJ,OAAO,CAACI,EAC/B,CAAC;IACD,IAAKH,QAAQ,KAAK,CAAC,CAAC,EAAG;MACtBF,eAAe,CAAEE,QAAQ,CAAE,GAAGD,OAAO;IACtC,CAAC,MAAM;MACND,eAAe,CAACM,IAAI,CAAEL,OAAQ,CAAC;IAChC;EACD;EACA,OAAOD,eAAe;AACvB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASO,gBAAgBA,CAAEb,KAAK,GAAG,CAAC,CAAC,EAAEC,MAAM,EAAG;EACtD,QAASA,MAAM,CAACC,IAAI;IACnB,KAAK,8BAA8B;MAAE;QACpC,MAAMY,QAAQ,GAAG;UAAE,GAAGd;QAAM,CAAC;QAC7B,KAAM,MAAM,CAAEe,QAAQ,EAAEX,SAAS,CAAE,IAAIY,MAAM,CAACC,OAAO,CACpDhB,MAAM,CAACiB,oBACR,CAAC,EAAG;UACHJ,QAAQ,CAAEC,QAAQ,CAAE,GAAGZ,cAAc,CACpCW,QAAQ,CAAEC,QAAQ,CAAE,EACpBX,SACD,CAAC;QACF;QACA,OAAOU,QAAQ;MAChB;EACD;EAEA,OAAOd,KAAK;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASmB,oBAAoBA,CAAEnB,KAAK,GAAG,KAAK,EAAEC,MAAM,EAAG;EACtD,QAASA,MAAM,CAACC,IAAI;IACnB,KAAK,wBAAwB;MAC5B,OAAO,IAAI;EACb;EACA,OAAOF,KAAK;AACb;AAEA,MAAMoB,SAAS,GAAGtB,eAAe,CAAE;EAClCuB,QAAQ,EAAEtB,iBAAiB;EAC3BuB,SAAS,EAAET,gBAAgB;EAC3BU,WAAW,EAAEJ;AACd,CAAE,CAAC;AAEH,eAAerB,eAAe,CAAE;EAC/BsB;AACD,CAAE,CAAC","ignoreList":[]}