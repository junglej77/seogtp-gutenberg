{"version":3,"names":["clsx","Button","Modal","__experimentalGrid","Grid","__experimentalText","Text","__experimentalVStack","VStack","Flex","Icon","decodeEntities","useState","memo","useSelect","useDispatch","store","coreStore","useViewportMatch","archive","blockMeta","calendar","category","commentAuthorAvatar","edit","home","layout","list","media","notFound","page","pin","verse","search","tag","__","sprintf","noticesStore","privateApis","routerPrivateApis","TEMPLATE_POST_TYPE","AddCustomTemplateModalContent","useExistingTemplates","useDefaultTemplateTypes","useTaxonomiesMenuItems","usePostTypeMenuItems","useAuthorMenuItem","usePostTypeArchiveMenuItems","AddCustomGenericTemplateModalContent","unlock","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","useHistory","DEFAULT_TEMPLATE_SLUGS","TEMPLATE_ICONS","single","index","author","taxonomy","date","attachment","TemplateListItem","title","direction","className","description","icon","onClick","children","__next40pxDefaultSize","label","showTooltip","as","spacing","align","justify","style","width","alignment","weight","lineHeight","modalContentMap","templatesList","customTemplate","customGenericTemplate","NewTemplateModal","onClose","modalContent","setModalContent","entityForSuggestions","setEntityForSuggestions","isSubmitting","setIsSubmitting","missingTemplates","useMissingTemplates","history","saveEntityRecord","createErrorNotice","createSuccessNotice","isMobile","homeUrl","select","getEntityRecord","TEMPLATE_SHORT_DESCRIPTIONS","Date","getFullYear","createTemplate","template","isWPSuggestion","slug","newTemplate","toString","status","is_wp_suggestion","throwOnError","push","postId","id","postType","canvas","rendered","type","error","errorMessage","message","code","onModalClose","modalTitle","labels","singular_name","onRequestClose","overlayClassName","undefined","columns","gap","map","onSelect","NewTemplate","showModal","setShowModal","getPostType","variant","add_new_item","existingTemplates","defaultTemplateTypes","existingTemplateSlugs","missingDefaultTemplates","filter","includes","onClickMenuItem","_entityForSuggestions","enhancedMissingDefaultTemplateTypes","defaultTaxonomiesMenuItems","taxonomiesMenuItems","defaultPostTypesMenuItems","postTypesMenuItems","authorMenuItem","forEach","menuItem","matchIndex","findIndex","sort","template1","template2","indexOf"],"sources":["@wordpress/edit-site/src/components/add-new-template/index.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tButton,\r\n\tModal,\r\n\t__experimentalGrid as Grid,\r\n\t__experimentalText as Text,\r\n\t__experimentalVStack as VStack,\r\n\tFlex,\r\n\tIcon,\r\n} from '@wordpress/components';\r\nimport { decodeEntities } from '@wordpress/html-entities';\r\nimport { useState, memo } from '@wordpress/element';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { store as coreStore } from '@wordpress/core-data';\r\nimport { useViewportMatch } from '@wordpress/compose';\r\nimport {\r\n\tarchive,\r\n\tblockMeta,\r\n\tcalendar,\r\n\tcategory,\r\n\tcommentAuthorAvatar,\r\n\tedit,\r\n\thome,\r\n\tlayout,\r\n\tlist,\r\n\tmedia,\r\n\tnotFound,\r\n\tpage,\r\n\tpin,\r\n\tverse,\r\n\tsearch,\r\n\ttag,\r\n} from '@wordpress/icons';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { store as noticesStore } from '@wordpress/notices';\r\nimport { privateApis as routerPrivateApis } from '@wordpress/router';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { TEMPLATE_POST_TYPE } from '../../utils/constants';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport AddCustomTemplateModalContent from './add-custom-template-modal-content';\r\nimport {\r\n\tuseExistingTemplates,\r\n\tuseDefaultTemplateTypes,\r\n\tuseTaxonomiesMenuItems,\r\n\tusePostTypeMenuItems,\r\n\tuseAuthorMenuItem,\r\n\tusePostTypeArchiveMenuItems,\r\n} from './utils';\r\nimport AddCustomGenericTemplateModalContent from './add-custom-generic-template-modal-content';\r\nimport { unlock } from '../../lock-unlock';\r\n\r\nconst { useHistory } = unlock( routerPrivateApis );\r\n\r\nconst DEFAULT_TEMPLATE_SLUGS = [\r\n\t'front-page',\r\n\t'home',\r\n\t'single',\r\n\t'page',\r\n\t'index',\r\n\t'archive',\r\n\t'author',\r\n\t'category',\r\n\t'date',\r\n\t'tag',\r\n\t'search',\r\n\t'404',\r\n];\r\n\r\nconst TEMPLATE_ICONS = {\r\n\t'front-page': home,\r\n\thome: verse,\r\n\tsingle: pin,\r\n\tpage,\r\n\tarchive,\r\n\tsearch,\r\n\t404: notFound,\r\n\tindex: list,\r\n\tcategory,\r\n\tauthor: commentAuthorAvatar,\r\n\ttaxonomy: blockMeta,\r\n\tdate: calendar,\r\n\ttag,\r\n\tattachment: media,\r\n};\r\n\r\nfunction TemplateListItem( {\r\n\ttitle,\r\n\tdirection,\r\n\tclassName,\r\n\tdescription,\r\n\ticon,\r\n\tonClick,\r\n\tchildren,\r\n} ) {\r\n\treturn (\r\n\t\t<Button\r\n\t\t\t// TODO: Switch to `true` (40px size) if possible\r\n\t\t\t__next40pxDefaultSize={ false }\r\n\t\t\tclassName={ className }\r\n\t\t\tonClick={ onClick }\r\n\t\t\tlabel={ description }\r\n\t\t\tshowTooltip={ !! description }\r\n\t\t>\r\n\t\t\t<Flex\r\n\t\t\t\tas=\"span\"\r\n\t\t\t\tspacing={ 2 }\r\n\t\t\t\talign=\"center\"\r\n\t\t\t\tjustify=\"center\"\r\n\t\t\t\tstyle={ { width: '100%' } }\r\n\t\t\t\tdirection={ direction }\r\n\t\t\t>\r\n\t\t\t\t<div className=\"edit-site-add-new-template__template-icon\">\r\n\t\t\t\t\t<Icon icon={ icon } />\r\n\t\t\t\t</div>\r\n\t\t\t\t<VStack\r\n\t\t\t\t\tclassName=\"edit-site-add-new-template__template-name\"\r\n\t\t\t\t\talignment=\"center\"\r\n\t\t\t\t\tspacing={ 0 }\r\n\t\t\t\t>\r\n\t\t\t\t\t<Text\r\n\t\t\t\t\t\talign=\"center\"\r\n\t\t\t\t\t\tweight={ 500 }\r\n\t\t\t\t\t\tlineHeight={ 1.53846153846 } // 20px\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ title }\r\n\t\t\t\t\t</Text>\r\n\t\t\t\t\t{ children }\r\n\t\t\t\t</VStack>\r\n\t\t\t</Flex>\r\n\t\t</Button>\r\n\t);\r\n}\r\n\r\nconst modalContentMap = {\r\n\ttemplatesList: 1,\r\n\tcustomTemplate: 2,\r\n\tcustomGenericTemplate: 3,\r\n};\r\n\r\nfunction NewTemplateModal( { onClose } ) {\r\n\tconst [ modalContent, setModalContent ] = useState(\r\n\t\tmodalContentMap.templatesList\r\n\t);\r\n\tconst [ entityForSuggestions, setEntityForSuggestions ] = useState( {} );\r\n\tconst [ isSubmitting, setIsSubmitting ] = useState( false );\r\n\tconst missingTemplates = useMissingTemplates( setEntityForSuggestions, () =>\r\n\t\tsetModalContent( modalContentMap.customTemplate )\r\n\t);\r\n\tconst history = useHistory();\r\n\tconst { saveEntityRecord } = useDispatch( coreStore );\r\n\tconst { createErrorNotice, createSuccessNotice } =\r\n\t\tuseDispatch( noticesStore );\r\n\r\n\tconst isMobile = useViewportMatch( 'medium', '<' );\r\n\r\n\tconst homeUrl = useSelect( ( select ) => {\r\n\t\t// Site index.\r\n\t\treturn select( coreStore ).getEntityRecord( 'root', '__unstableBase' )\r\n\t\t\t?.home;\r\n\t}, [] );\r\n\r\n\tconst TEMPLATE_SHORT_DESCRIPTIONS = {\r\n\t\t'front-page': homeUrl,\r\n\t\tdate: sprintf(\r\n\t\t\t// translators: %s: The homepage url.\r\n\t\t\t__( 'E.g. %s' ),\r\n\t\t\thomeUrl + '/' + new Date().getFullYear()\r\n\t\t),\r\n\t};\r\n\r\n\tasync function createTemplate( template, isWPSuggestion = true ) {\r\n\t\tif ( isSubmitting ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetIsSubmitting( true );\r\n\t\ttry {\r\n\t\t\tconst { title, description, slug } = template;\r\n\t\t\tconst newTemplate = await saveEntityRecord(\r\n\t\t\t\t'postType',\r\n\t\t\t\tTEMPLATE_POST_TYPE,\r\n\t\t\t\t{\r\n\t\t\t\t\tdescription,\r\n\t\t\t\t\t// Slugs need to be strings, so this is for template `404`\r\n\t\t\t\t\tslug: slug.toString(),\r\n\t\t\t\t\tstatus: 'publish',\r\n\t\t\t\t\ttitle,\r\n\t\t\t\t\t// This adds a post meta field in template that is part of `is_custom` value calculation.\r\n\t\t\t\t\tis_wp_suggestion: isWPSuggestion,\r\n\t\t\t\t},\r\n\t\t\t\t{ throwOnError: true }\r\n\t\t\t);\r\n\r\n\t\t\t// Navigate to the created template editor.\r\n\t\t\thistory.push( {\r\n\t\t\t\tpostId: newTemplate.id,\r\n\t\t\t\tpostType: TEMPLATE_POST_TYPE,\r\n\t\t\t\tcanvas: 'edit',\r\n\t\t\t} );\r\n\r\n\t\t\tcreateSuccessNotice(\r\n\t\t\t\tsprintf(\r\n\t\t\t\t\t// translators: %s: Title of the created template e.g: \"Category\".\r\n\t\t\t\t\t__( '\"%s\" successfully created.' ),\r\n\t\t\t\t\tdecodeEntities( newTemplate.title?.rendered || title )\r\n\t\t\t\t),\r\n\t\t\t\t{\r\n\t\t\t\t\ttype: 'snackbar',\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t} catch ( error ) {\r\n\t\t\tconst errorMessage =\r\n\t\t\t\terror.message && error.code !== 'unknown_error'\r\n\t\t\t\t\t? error.message\r\n\t\t\t\t\t: __( 'An error occurred while creating the template.' );\r\n\r\n\t\t\tcreateErrorNotice( errorMessage, {\r\n\t\t\t\ttype: 'snackbar',\r\n\t\t\t} );\r\n\t\t} finally {\r\n\t\t\tsetIsSubmitting( false );\r\n\t\t}\r\n\t}\r\n\tconst onModalClose = () => {\r\n\t\tonClose();\r\n\t\tsetModalContent( modalContentMap.templatesList );\r\n\t};\r\n\r\n\tlet modalTitle = __( 'Add template' );\r\n\tif ( modalContent === modalContentMap.customTemplate ) {\r\n\t\tmodalTitle = sprintf(\r\n\t\t\t// translators: %s: Name of the post type e.g: \"Post\".\r\n\t\t\t__( 'Add template: %s' ),\r\n\t\t\tentityForSuggestions.labels.singular_name\r\n\t\t);\r\n\t} else if ( modalContent === modalContentMap.customGenericTemplate ) {\r\n\t\tmodalTitle = __( 'Create custom template' );\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\ttitle={ modalTitle }\r\n\t\t\tclassName={ clsx( 'edit-site-add-new-template__modal', {\r\n\t\t\t\t'edit-site-add-new-template__modal_template_list':\r\n\t\t\t\t\tmodalContent === modalContentMap.templatesList,\r\n\t\t\t\t'edit-site-custom-template-modal':\r\n\t\t\t\t\tmodalContent === modalContentMap.customTemplate,\r\n\t\t\t} ) }\r\n\t\t\tonRequestClose={ onModalClose }\r\n\t\t\toverlayClassName={\r\n\t\t\t\tmodalContent === modalContentMap.customGenericTemplate\r\n\t\t\t\t\t? 'edit-site-custom-generic-template__modal'\r\n\t\t\t\t\t: undefined\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t{ modalContent === modalContentMap.templatesList && (\r\n\t\t\t\t<Grid\r\n\t\t\t\t\tcolumns={ isMobile ? 2 : 3 }\r\n\t\t\t\t\tgap={ 4 }\r\n\t\t\t\t\talign=\"flex-start\"\r\n\t\t\t\t\tjustify=\"center\"\r\n\t\t\t\t\tclassName=\"edit-site-add-new-template__template-list__contents\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<Flex className=\"edit-site-add-new-template__template-list__prompt\">\r\n\t\t\t\t\t\t{ __(\r\n\t\t\t\t\t\t\t'Select what the new template should apply to:'\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t</Flex>\r\n\t\t\t\t\t{ missingTemplates.map( ( template ) => {\r\n\t\t\t\t\t\tconst { title, slug, onClick } = template;\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<TemplateListItem\r\n\t\t\t\t\t\t\t\tkey={ slug }\r\n\t\t\t\t\t\t\t\ttitle={ title }\r\n\t\t\t\t\t\t\t\tdirection=\"column\"\r\n\t\t\t\t\t\t\t\tclassName=\"edit-site-add-new-template__template-button\"\r\n\t\t\t\t\t\t\t\tdescription={\r\n\t\t\t\t\t\t\t\t\tTEMPLATE_SHORT_DESCRIPTIONS[ slug ]\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ticon={ TEMPLATE_ICONS[ slug ] || layout }\r\n\t\t\t\t\t\t\t\tonClick={ () =>\r\n\t\t\t\t\t\t\t\t\tonClick\r\n\t\t\t\t\t\t\t\t\t\t? onClick( template )\r\n\t\t\t\t\t\t\t\t\t\t: createTemplate( template )\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} ) }\r\n\t\t\t\t\t<TemplateListItem\r\n\t\t\t\t\t\ttitle={ __( 'Custom template' ) }\r\n\t\t\t\t\t\tdirection=\"row\"\r\n\t\t\t\t\t\tclassName=\"edit-site-add-new-template__custom-template-button\"\r\n\t\t\t\t\t\ticon={ edit }\r\n\t\t\t\t\t\tonClick={ () =>\r\n\t\t\t\t\t\t\tsetModalContent(\r\n\t\t\t\t\t\t\t\tmodalContentMap.customGenericTemplate\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Text\r\n\t\t\t\t\t\t\tlineHeight={ 1.53846153846 } // 20px\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{ __(\r\n\t\t\t\t\t\t\t\t'A custom template can be manually applied to any post or page.'\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t</Text>\r\n\t\t\t\t\t</TemplateListItem>\r\n\t\t\t\t</Grid>\r\n\t\t\t) }\r\n\t\t\t{ modalContent === modalContentMap.customTemplate && (\r\n\t\t\t\t<AddCustomTemplateModalContent\r\n\t\t\t\t\tonSelect={ createTemplate }\r\n\t\t\t\t\tentityForSuggestions={ entityForSuggestions }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t\t{ modalContent === modalContentMap.customGenericTemplate && (\r\n\t\t\t\t<AddCustomGenericTemplateModalContent\r\n\t\t\t\t\tonClose={ onModalClose }\r\n\t\t\t\t\tcreateTemplate={ createTemplate }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t</Modal>\r\n\t);\r\n}\r\n\r\nfunction NewTemplate() {\r\n\tconst [ showModal, setShowModal ] = useState( false );\r\n\r\n\tconst { postType } = useSelect( ( select ) => {\r\n\t\tconst { getPostType } = select( coreStore );\r\n\r\n\t\treturn {\r\n\t\t\tpostType: getPostType( TEMPLATE_POST_TYPE ),\r\n\t\t};\r\n\t}, [] );\r\n\r\n\tif ( ! postType ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Button\r\n\t\t\t\tvariant=\"primary\"\r\n\t\t\t\tonClick={ () => setShowModal( true ) }\r\n\t\t\t\tlabel={ postType.labels.add_new_item }\r\n\t\t\t\t__next40pxDefaultSize\r\n\t\t\t>\r\n\t\t\t\t{ postType.labels.add_new_item }\r\n\t\t\t</Button>\r\n\t\t\t{ showModal && (\r\n\t\t\t\t<NewTemplateModal onClose={ () => setShowModal( false ) } />\r\n\t\t\t) }\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nfunction useMissingTemplates( setEntityForSuggestions, onClick ) {\r\n\tconst existingTemplates = useExistingTemplates();\r\n\tconst defaultTemplateTypes = useDefaultTemplateTypes();\r\n\tconst existingTemplateSlugs = ( existingTemplates || [] ).map(\r\n\t\t( { slug } ) => slug\r\n\t);\r\n\tconst missingDefaultTemplates = ( defaultTemplateTypes || [] ).filter(\r\n\t\t( template ) =>\r\n\t\t\tDEFAULT_TEMPLATE_SLUGS.includes( template.slug ) &&\r\n\t\t\t! existingTemplateSlugs.includes( template.slug )\r\n\t);\r\n\tconst onClickMenuItem = ( _entityForSuggestions ) => {\r\n\t\tonClick?.();\r\n\t\tsetEntityForSuggestions( _entityForSuggestions );\r\n\t};\r\n\t// We need to replace existing default template types with\r\n\t// the create specific template functionality. The original\r\n\t// info (title, description, etc.) is preserved in the\r\n\t// used hooks.\r\n\tconst enhancedMissingDefaultTemplateTypes = [ ...missingDefaultTemplates ];\r\n\tconst { defaultTaxonomiesMenuItems, taxonomiesMenuItems } =\r\n\t\tuseTaxonomiesMenuItems( onClickMenuItem );\r\n\tconst { defaultPostTypesMenuItems, postTypesMenuItems } =\r\n\t\tusePostTypeMenuItems( onClickMenuItem );\r\n\r\n\tconst authorMenuItem = useAuthorMenuItem( onClickMenuItem );\r\n\t[\r\n\t\t...defaultTaxonomiesMenuItems,\r\n\t\t...defaultPostTypesMenuItems,\r\n\t\tauthorMenuItem,\r\n\t].forEach( ( menuItem ) => {\r\n\t\tif ( ! menuItem ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst matchIndex = enhancedMissingDefaultTemplateTypes.findIndex(\r\n\t\t\t( template ) => template.slug === menuItem.slug\r\n\t\t);\r\n\t\t// Some default template types might have been filtered above from\r\n\t\t// `missingDefaultTemplates` because they only check for the general\r\n\t\t// template. So here we either replace or append the item, augmented\r\n\t\t// with the check if it has available specific item to create a\r\n\t\t// template for.\r\n\t\tif ( matchIndex > -1 ) {\r\n\t\t\tenhancedMissingDefaultTemplateTypes[ matchIndex ] = menuItem;\r\n\t\t} else {\r\n\t\t\tenhancedMissingDefaultTemplateTypes.push( menuItem );\r\n\t\t}\r\n\t} );\r\n\t// Update the sort order to match the DEFAULT_TEMPLATE_SLUGS order.\r\n\tenhancedMissingDefaultTemplateTypes?.sort( ( template1, template2 ) => {\r\n\t\treturn (\r\n\t\t\tDEFAULT_TEMPLATE_SLUGS.indexOf( template1.slug ) -\r\n\t\t\tDEFAULT_TEMPLATE_SLUGS.indexOf( template2.slug )\r\n\t\t);\r\n\t} );\r\n\tconst missingTemplates = [\r\n\t\t...enhancedMissingDefaultTemplateTypes,\r\n\t\t...usePostTypeArchiveMenuItems(),\r\n\t\t...postTypesMenuItems,\r\n\t\t...taxonomiesMenuItems,\r\n\t];\r\n\treturn missingTemplates;\r\n}\r\n\r\nexport default memo( NewTemplate );\r\n"],"mappings":"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","ignoreList":[]}