{"version":3,"names":["clsx","useSelect","useDispatch","ENTER","SPACE","useState","useEffect","__","store","editorStore","unlock","editSiteStore","useEditorIframeProps","canvasMode","currentPostIsTrashed","select","getCanvasMode","getCurrentPostAttribute","setCanvasMode","isFocused","setIsFocused","viewModeIframeProps","title","role","tabIndex","onFocus","onBlur","onKeyDown","event","keyCode","preventDefault","onClick","onClickCapture","stopPropagation","readonly","className"],"sources":["@wordpress/edit-site/src/components/block-editor/use-editor-iframe-props.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { ENTER, SPACE } from '@wordpress/keycodes';\r\nimport { useState, useEffect } from '@wordpress/element';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { store as editorStore } from '@wordpress/editor';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { unlock } from '../../lock-unlock';\r\nimport { store as editSiteStore } from '../../store';\r\n\r\nexport default function useEditorIframeProps() {\r\n\tconst { canvasMode, currentPostIsTrashed } = useSelect( ( select ) => {\r\n\t\tconst { getCanvasMode } = unlock( select( editSiteStore ) );\r\n\r\n\t\treturn {\r\n\t\t\tcanvasMode: getCanvasMode(),\r\n\t\t\tcurrentPostIsTrashed:\r\n\t\t\t\tselect( editorStore ).getCurrentPostAttribute( 'status' ) ===\r\n\t\t\t\t'trash',\r\n\t\t};\r\n\t}, [] );\r\n\tconst { setCanvasMode } = unlock( useDispatch( editSiteStore ) );\r\n\tconst [ isFocused, setIsFocused ] = useState( false );\r\n\r\n\tuseEffect( () => {\r\n\t\tif ( canvasMode === 'edit' ) {\r\n\t\t\tsetIsFocused( false );\r\n\t\t}\r\n\t}, [ canvasMode ] );\r\n\r\n\t// In view mode, make the canvas iframe be perceived and behave as a button\r\n\t// to switch to edit mode, with a meaningful label and no title attribute.\r\n\tconst viewModeIframeProps = {\r\n\t\t'aria-label': __( 'Edit' ),\r\n\t\t'aria-disabled': currentPostIsTrashed,\r\n\t\ttitle: null,\r\n\t\trole: 'button',\r\n\t\ttabIndex: 0,\r\n\t\tonFocus: () => setIsFocused( true ),\r\n\t\tonBlur: () => setIsFocused( false ),\r\n\t\tonKeyDown: ( event ) => {\r\n\t\t\tconst { keyCode } = event;\r\n\t\t\tif (\r\n\t\t\t\t( keyCode === ENTER || keyCode === SPACE ) &&\r\n\t\t\t\t! currentPostIsTrashed\r\n\t\t\t) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tsetCanvasMode( 'edit' );\r\n\t\t\t}\r\n\t\t},\r\n\t\tonClick: () => {\r\n\t\t\tsetCanvasMode( 'edit' );\r\n\t\t},\r\n\t\tonClickCapture: ( event ) => {\r\n\t\t\tif ( currentPostIsTrashed ) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t}\r\n\t\t},\r\n\t\treadonly: true,\r\n\t};\r\n\r\n\treturn {\r\n\t\tclassName: clsx( 'edit-site-visual-editor__editor-canvas', {\r\n\t\t\t'is-focused': isFocused && canvasMode === 'view',\r\n\t\t} ),\r\n\t\t...( canvasMode === 'view' ? viewModeIframeProps : {} ),\r\n\t};\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,OAAOA,IAAI,MAAM,MAAM;;AAEvB;AACA;AACA;AACA,SAASC,SAAS,EAAEC,WAAW,QAAQ,iBAAiB;AACxD,SAASC,KAAK,EAAEC,KAAK,QAAQ,qBAAqB;AAClD,SAASC,QAAQ,EAAEC,SAAS,QAAQ,oBAAoB;AACxD,SAASC,EAAE,QAAQ,iBAAiB;AACpC,SAASC,KAAK,IAAIC,WAAW,QAAQ,mBAAmB;;AAExD;AACA;AACA;AACA,SAASC,MAAM,QAAQ,mBAAmB;AAC1C,SAASF,KAAK,IAAIG,aAAa,QAAQ,aAAa;AAEpD,eAAe,SAASC,oBAAoBA,CAAA,EAAG;EAC9C,MAAM;IAAEC,UAAU;IAAEC;EAAqB,CAAC,GAAGb,SAAS,CAAIc,MAAM,IAAM;IACrE,MAAM;MAAEC;IAAc,CAAC,GAAGN,MAAM,CAAEK,MAAM,CAAEJ,aAAc,CAAE,CAAC;IAE3D,OAAO;MACNE,UAAU,EAAEG,aAAa,CAAC,CAAC;MAC3BF,oBAAoB,EACnBC,MAAM,CAAEN,WAAY,CAAC,CAACQ,uBAAuB,CAAE,QAAS,CAAC,KACzD;IACF,CAAC;EACF,CAAC,EAAE,EAAG,CAAC;EACP,MAAM;IAAEC;EAAc,CAAC,GAAGR,MAAM,CAAER,WAAW,CAAES,aAAc,CAAE,CAAC;EAChE,MAAM,CAAEQ,SAAS,EAAEC,YAAY,CAAE,GAAGf,QAAQ,CAAE,KAAM,CAAC;EAErDC,SAAS,CAAE,MAAM;IAChB,IAAKO,UAAU,KAAK,MAAM,EAAG;MAC5BO,YAAY,CAAE,KAAM,CAAC;IACtB;EACD,CAAC,EAAE,CAAEP,UAAU,CAAG,CAAC;;EAEnB;EACA;EACA,MAAMQ,mBAAmB,GAAG;IAC3B,YAAY,EAAEd,EAAE,CAAE,MAAO,CAAC;IAC1B,eAAe,EAAEO,oBAAoB;IACrCQ,KAAK,EAAE,IAAI;IACXC,IAAI,EAAE,QAAQ;IACdC,QAAQ,EAAE,CAAC;IACXC,OAAO,EAAEA,CAAA,KAAML,YAAY,CAAE,IAAK,CAAC;IACnCM,MAAM,EAAEA,CAAA,KAAMN,YAAY,CAAE,KAAM,CAAC;IACnCO,SAAS,EAAIC,KAAK,IAAM;MACvB,MAAM;QAAEC;MAAQ,CAAC,GAAGD,KAAK;MACzB,IACC,CAAEC,OAAO,KAAK1B,KAAK,IAAI0B,OAAO,KAAKzB,KAAK,KACxC,CAAEU,oBAAoB,EACrB;QACDc,KAAK,CAACE,cAAc,CAAC,CAAC;QACtBZ,aAAa,CAAE,MAAO,CAAC;MACxB;IACD,CAAC;IACDa,OAAO,EAAEA,CAAA,KAAM;MACdb,aAAa,CAAE,MAAO,CAAC;IACxB,CAAC;IACDc,cAAc,EAAIJ,KAAK,IAAM;MAC5B,IAAKd,oBAAoB,EAAG;QAC3Bc,KAAK,CAACE,cAAc,CAAC,CAAC;QACtBF,KAAK,CAACK,eAAe,CAAC,CAAC;MACxB;IACD,CAAC;IACDC,QAAQ,EAAE;EACX,CAAC;EAED,OAAO;IACNC,SAAS,EAAEnC,IAAI,CAAE,wCAAwC,EAAE;MAC1D,YAAY,EAAEmB,SAAS,IAAIN,UAAU,KAAK;IAC3C,CAAE,CAAC;IACH,IAAKA,UAAU,KAAK,MAAM,GAAGQ,mBAAmB,GAAG,CAAC,CAAC;EACtD,CAAC;AACF","ignoreList":[]}