{"version":3,"names":["Children","cloneElement","useState","Button","__experimentalUseSlotFills","useSlotFills","ESCAPE","__","useDispatch","useSelect","backup","closeSmall","seen","useFocusOnMount","useFocusReturn","store","preferencesStore","editorStore","privateApis","editorPrivateApis","unlock","editSiteStore","jsx","_jsx","jsxs","_jsxs","EditorContentSlotFill","ResizableEditor","getEditorCanvasContainerTitleAndIcon","view","title","icon","EditorCanvasContainer","children","closeButtonLabel","onClose","enableResizing","editorCanvasContainerView","showListViewByDefault","select","_editorCanvasContainerView","getEditorCanvasContainerView","_showListViewByDefault","get","isClosed","setIsClosed","setEditorCanvasContainerView","setIsListViewOpened","focusOnMountRef","sectionFocusReturnRef","onCloseContainer","undefined","closeOnEscape","event","keyCode","defaultPrevented","preventDefault","childrenWithProps","Array","isArray","map","child","index","ref","shouldShowCloseButton","Fill","className","onKeyDown","__next40pxDefaultSize","label","onClick","useHasEditorCanvasContainer","fills","privateKey","length"],"sources":["@wordpress/edit-site/src/components/editor-canvas-container/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { Children, cloneElement, useState } from '@wordpress/element';\r\nimport {\r\n\tButton,\r\n\t__experimentalUseSlotFills as useSlotFills,\r\n} from '@wordpress/components';\r\nimport { ESCAPE } from '@wordpress/keycodes';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\nimport { backup, closeSmall, seen } from '@wordpress/icons';\r\nimport { useFocusOnMount, useFocusReturn } from '@wordpress/compose';\r\nimport { store as preferencesStore } from '@wordpress/preferences';\r\nimport {\r\n\tstore as editorStore,\r\n\tprivateApis as editorPrivateApis,\r\n} from '@wordpress/editor';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { unlock } from '../../lock-unlock';\r\nimport { store as editSiteStore } from '../../store';\r\n\r\nconst { EditorContentSlotFill, ResizableEditor } = unlock( editorPrivateApis );\r\n\r\n/**\r\n * Returns a translated string for the title of the editor canvas container.\r\n *\r\n * @param {string} view Editor canvas container view.\r\n *\r\n * @return {Object} Translated string for the view title and associated icon, both defaulting to ''.\r\n */\r\nfunction getEditorCanvasContainerTitleAndIcon( view ) {\r\n\tswitch ( view ) {\r\n\t\tcase 'style-book':\r\n\t\t\treturn {\r\n\t\t\t\ttitle: __( 'Style Book' ),\r\n\t\t\t\ticon: seen,\r\n\t\t\t};\r\n\t\tcase 'global-styles-revisions':\r\n\t\tcase 'global-styles-revisions:style-book':\r\n\t\t\treturn {\r\n\t\t\t\ttitle: __( 'Style Revisions' ),\r\n\t\t\t\ticon: backup,\r\n\t\t\t};\r\n\t\tdefault:\r\n\t\t\treturn {\r\n\t\t\t\ttitle: '',\r\n\t\t\t\ticon: '',\r\n\t\t\t};\r\n\t}\r\n}\r\n\r\nfunction EditorCanvasContainer( {\r\n\tchildren,\r\n\tcloseButtonLabel,\r\n\tonClose,\r\n\tenableResizing = false,\r\n} ) {\r\n\tconst { editorCanvasContainerView, showListViewByDefault } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst _editorCanvasContainerView = unlock(\r\n\t\t\t\tselect( editSiteStore )\r\n\t\t\t).getEditorCanvasContainerView();\r\n\r\n\t\t\tconst _showListViewByDefault = select( preferencesStore ).get(\r\n\t\t\t\t'core',\r\n\t\t\t\t'showListViewByDefault'\r\n\t\t\t);\r\n\r\n\t\t\treturn {\r\n\t\t\t\teditorCanvasContainerView: _editorCanvasContainerView,\r\n\t\t\t\tshowListViewByDefault: _showListViewByDefault,\r\n\t\t\t};\r\n\t\t},\r\n\t\t[]\r\n\t);\r\n\tconst [ isClosed, setIsClosed ] = useState( false );\r\n\tconst { setEditorCanvasContainerView } = unlock(\r\n\t\tuseDispatch( editSiteStore )\r\n\t);\r\n\tconst { setIsListViewOpened } = useDispatch( editorStore );\r\n\r\n\tconst focusOnMountRef = useFocusOnMount( 'firstElement' );\r\n\tconst sectionFocusReturnRef = useFocusReturn();\r\n\r\n\tfunction onCloseContainer() {\r\n\t\tsetIsListViewOpened( showListViewByDefault );\r\n\t\tsetEditorCanvasContainerView( undefined );\r\n\t\tsetIsClosed( true );\r\n\t\tif ( typeof onClose === 'function' ) {\r\n\t\t\tonClose();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction closeOnEscape( event ) {\r\n\t\tif ( event.keyCode === ESCAPE && ! event.defaultPrevented ) {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tonCloseContainer();\r\n\t\t}\r\n\t}\r\n\r\n\tconst childrenWithProps = Array.isArray( children )\r\n\t\t? Children.map( children, ( child, index ) =>\r\n\t\t\t\tindex === 0\r\n\t\t\t\t\t? cloneElement( child, {\r\n\t\t\t\t\t\t\tref: sectionFocusReturnRef,\r\n\t\t\t\t\t  } )\r\n\t\t\t\t\t: child\r\n\t\t  )\r\n\t\t: cloneElement( children, {\r\n\t\t\t\tref: sectionFocusReturnRef,\r\n\t\t  } );\r\n\r\n\tif ( isClosed ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst { title } = getEditorCanvasContainerTitleAndIcon(\r\n\t\teditorCanvasContainerView\r\n\t);\r\n\tconst shouldShowCloseButton = onClose || closeButtonLabel;\r\n\r\n\treturn (\r\n\t\t<EditorContentSlotFill.Fill>\r\n\t\t\t<div className=\"edit-site-editor-canvas-container\">\r\n\t\t\t\t<ResizableEditor enableResizing={ enableResizing }>\r\n\t\t\t\t\t{ /* eslint-disable-next-line jsx-a11y/no-noninteractive-element-interactions */ }\r\n\t\t\t\t\t<section\r\n\t\t\t\t\t\tclassName=\"edit-site-editor-canvas-container__section\"\r\n\t\t\t\t\t\tref={ shouldShowCloseButton ? focusOnMountRef : null }\r\n\t\t\t\t\t\tonKeyDown={ closeOnEscape }\r\n\t\t\t\t\t\taria-label={ title }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ shouldShowCloseButton && (\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t// TODO: Switch to `true` (40px size) if possible\r\n\t\t\t\t\t\t\t\t__next40pxDefaultSize={ false }\r\n\t\t\t\t\t\t\t\tclassName=\"edit-site-editor-canvas-container__close-button\"\r\n\t\t\t\t\t\t\t\ticon={ closeSmall }\r\n\t\t\t\t\t\t\t\tlabel={ closeButtonLabel || __( 'Close' ) }\r\n\t\t\t\t\t\t\t\tonClick={ onCloseContainer }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t{ childrenWithProps }\r\n\t\t\t\t\t</section>\r\n\t\t\t\t</ResizableEditor>\r\n\t\t\t</div>\r\n\t\t</EditorContentSlotFill.Fill>\r\n\t);\r\n}\r\n\r\nfunction useHasEditorCanvasContainer() {\r\n\tconst fills = useSlotFills( EditorContentSlotFill.privateKey );\r\n\treturn !! fills?.length;\r\n}\r\n\r\nexport default EditorCanvasContainer;\r\nexport { useHasEditorCanvasContainer, getEditorCanvasContainerTitleAndIcon };\r\n"],"mappings":"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","ignoreList":[]}