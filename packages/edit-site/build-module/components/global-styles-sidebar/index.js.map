{"version":3,"names":["FlexItem","FlexBlock","Flex","Button","__experimentalUseNavigator","useNavigator","__","styles","seen","backup","useSelect","useDispatch","useEffect","store","preferencesStore","editorStore","privateApis","editorPrivateApis","GlobalStylesUI","editSiteStore","GlobalStylesMenuSlot","unlock","coreStore","DefaultSidebar","jsx","_jsx","jsxs","_jsxs","interfaceStore","GlobalStylesSidebar","shouldClearCanvasContainerView","isStyleBookOpened","showListViewByDefault","hasRevisions","isRevisionsOpened","isRevisionsStyleBookOpened","select","getActiveComplementaryArea","getEditorCanvasContainerView","getCanvasMode","canvasContainerView","_isVisualEditorMode","getEditorMode","_isEditCanvasMode","_showListViewByDefault","get","getEntityRecord","__experimentalGetCurrentGlobalStylesId","globalStylesId","globalStyles","undefined","_links","count","setEditorCanvasContainerView","setIsListViewOpened","goTo","toggleRevisions","toggleStyleBook","className","identifier","title","icon","closeLabel","panelClassName","header","gap","children","style","minWidth","label","isPressed","accessibleWhenDisabled","disabled","onClick","size"],"sources":["@wordpress/edit-site/src/components/global-styles-sidebar/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tFlexItem,\r\n\tFlexBlock,\r\n\tFlex,\r\n\tButton,\r\n\t__experimentalUseNavigator as useNavigator,\r\n} from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { styles, seen, backup } from '@wordpress/icons';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { useEffect } from '@wordpress/element';\r\nimport { store as preferencesStore } from '@wordpress/preferences';\r\nimport {\r\n\tstore as editorStore,\r\n\tprivateApis as editorPrivateApis,\r\n} from '@wordpress/editor';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { GlobalStylesUI } from '../global-styles';\r\nimport { store as editSiteStore } from '../../store';\r\nimport { GlobalStylesMenuSlot } from '../global-styles/ui';\r\nimport { unlock } from '../../lock-unlock';\r\nimport { store as coreStore } from '@wordpress/core-data';\r\nimport DefaultSidebar from './default-sidebar';\r\n\r\nconst { interfaceStore } = unlock( editorPrivateApis );\r\n\r\nexport default function GlobalStylesSidebar() {\r\n\tconst {\r\n\t\tshouldClearCanvasContainerView,\r\n\t\tisStyleBookOpened,\r\n\t\tshowListViewByDefault,\r\n\t\thasRevisions,\r\n\t\tisRevisionsOpened,\r\n\t\tisRevisionsStyleBookOpened,\r\n\t} = useSelect( ( select ) => {\r\n\t\tconst { getActiveComplementaryArea } = select( interfaceStore );\r\n\t\tconst { getEditorCanvasContainerView, getCanvasMode } = unlock(\r\n\t\t\tselect( editSiteStore )\r\n\t\t);\r\n\t\tconst canvasContainerView = getEditorCanvasContainerView();\r\n\t\tconst _isVisualEditorMode =\r\n\t\t\t'visual' === select( editorStore ).getEditorMode();\r\n\t\tconst _isEditCanvasMode = 'edit' === getCanvasMode();\r\n\t\tconst _showListViewByDefault = select( preferencesStore ).get(\r\n\t\t\t'core',\r\n\t\t\t'showListViewByDefault'\r\n\t\t);\r\n\t\tconst { getEntityRecord, __experimentalGetCurrentGlobalStylesId } =\r\n\t\t\tselect( coreStore );\r\n\r\n\t\tconst globalStylesId = __experimentalGetCurrentGlobalStylesId();\r\n\t\tconst globalStyles = globalStylesId\r\n\t\t\t? getEntityRecord( 'root', 'globalStyles', globalStylesId )\r\n\t\t\t: undefined;\r\n\r\n\t\treturn {\r\n\t\t\tisStyleBookOpened: 'style-book' === canvasContainerView,\r\n\t\t\tshouldClearCanvasContainerView:\r\n\t\t\t\t'edit-site/global-styles' !==\r\n\t\t\t\t\tgetActiveComplementaryArea( 'core' ) ||\r\n\t\t\t\t! _isVisualEditorMode ||\r\n\t\t\t\t! _isEditCanvasMode,\r\n\t\t\tshowListViewByDefault: _showListViewByDefault,\r\n\t\t\thasRevisions:\r\n\t\t\t\t!! globalStyles?._links?.[ 'version-history' ]?.[ 0 ]?.count,\r\n\t\t\tisRevisionsStyleBookOpened:\r\n\t\t\t\t'global-styles-revisions:style-book' === canvasContainerView,\r\n\t\t\tisRevisionsOpened:\r\n\t\t\t\t'global-styles-revisions' === canvasContainerView,\r\n\t\t};\r\n\t}, [] );\r\n\tconst { setEditorCanvasContainerView } = unlock(\r\n\t\tuseDispatch( editSiteStore )\r\n\t);\r\n\r\n\tuseEffect( () => {\r\n\t\tif ( shouldClearCanvasContainerView ) {\r\n\t\t\tsetEditorCanvasContainerView( undefined );\r\n\t\t}\r\n\t}, [ shouldClearCanvasContainerView ] );\r\n\r\n\tconst { setIsListViewOpened } = useDispatch( editorStore );\r\n\tconst { goTo } = useNavigator();\r\n\r\n\tconst toggleRevisions = () => {\r\n\t\tsetIsListViewOpened( false );\r\n\t\tif ( isRevisionsStyleBookOpened ) {\r\n\t\t\tgoTo( '/' );\r\n\t\t\tsetEditorCanvasContainerView( 'style-book' );\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif ( isRevisionsOpened ) {\r\n\t\t\tgoTo( '/' );\r\n\t\t\tsetEditorCanvasContainerView( undefined );\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tgoTo( '/revisions' );\r\n\r\n\t\tif ( isStyleBookOpened ) {\r\n\t\t\tsetEditorCanvasContainerView(\r\n\t\t\t\t'global-styles-revisions:style-book'\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tsetEditorCanvasContainerView( 'global-styles-revisions' );\r\n\t\t}\r\n\t};\r\n\tconst toggleStyleBook = () => {\r\n\t\tif ( isRevisionsOpened ) {\r\n\t\t\tsetEditorCanvasContainerView(\r\n\t\t\t\t'global-styles-revisions:style-book'\r\n\t\t\t);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif ( isRevisionsStyleBookOpened ) {\r\n\t\t\tsetEditorCanvasContainerView( 'global-styles-revisions' );\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetIsListViewOpened( isStyleBookOpened && showListViewByDefault );\r\n\t\tsetEditorCanvasContainerView(\r\n\t\t\tisStyleBookOpened ? undefined : 'style-book'\r\n\t\t);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<DefaultSidebar\r\n\t\t\tclassName=\"edit-site-global-styles-sidebar\"\r\n\t\t\tidentifier=\"edit-site/global-styles\"\r\n\t\t\ttitle={ __( 'Styles' ) }\r\n\t\t\ticon={ styles }\r\n\t\t\tcloseLabel={ __( 'Close Styles' ) }\r\n\t\t\tpanelClassName=\"edit-site-global-styles-sidebar__panel\"\r\n\t\t\theader={\r\n\t\t\t\t<Flex\r\n\t\t\t\t\tclassName=\"edit-site-global-styles-sidebar__header\"\r\n\t\t\t\t\tgap={ 1 }\r\n\t\t\t\t>\r\n\t\t\t\t\t<FlexBlock style={ { minWidth: 'min-content' } }>\r\n\t\t\t\t\t\t<h2 className=\"edit-site-global-styles-sidebar__header-title\">\r\n\t\t\t\t\t\t\t{ __( 'Styles' ) }\r\n\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t</FlexBlock>\r\n\t\t\t\t\t<FlexItem>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\ticon={ seen }\r\n\t\t\t\t\t\t\tlabel={ __( 'Style Book' ) }\r\n\t\t\t\t\t\t\tisPressed={\r\n\t\t\t\t\t\t\t\tisStyleBookOpened || isRevisionsStyleBookOpened\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\taccessibleWhenDisabled\r\n\t\t\t\t\t\t\tdisabled={ shouldClearCanvasContainerView }\r\n\t\t\t\t\t\t\tonClick={ toggleStyleBook }\r\n\t\t\t\t\t\t\tsize=\"compact\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</FlexItem>\r\n\t\t\t\t\t<FlexItem>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tlabel={ __( 'Revisions' ) }\r\n\t\t\t\t\t\t\ticon={ backup }\r\n\t\t\t\t\t\t\tonClick={ toggleRevisions }\r\n\t\t\t\t\t\t\taccessibleWhenDisabled\r\n\t\t\t\t\t\t\tdisabled={ ! hasRevisions }\r\n\t\t\t\t\t\t\tisPressed={\r\n\t\t\t\t\t\t\t\tisRevisionsOpened || isRevisionsStyleBookOpened\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tsize=\"compact\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</FlexItem>\r\n\t\t\t\t\t<GlobalStylesMenuSlot />\r\n\t\t\t\t</Flex>\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t<GlobalStylesUI />\r\n\t\t</DefaultSidebar>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}