{"version":3,"names":["privateApis","blockEditorPrivateApis","useMemo","unlock","jsx","_jsx","useGlobalStyle","useGlobalSetting","useSettingsForBlockElement","DimensionsPanel","StylesDimensionsPanel","DEFAULT_CONTROLS","contentSize","wideSize","padding","margin","blockGap","minHeight","childLayout","style","undefined","shouldDecodeEncode","inheritedStyle","setStyle","userSettings","rawSettings","setSettings","settings","inheritedStyleWithLayout","layout","styleWithLayout","onChange","newStyle","updatedStyle","updatedSettings","definitions","inheritedValue","value","includeLayoutControls","defaultControls"],"sources":["@wordpress/edit-site/src/components/global-styles/dimensions-panel.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { privateApis as blockEditorPrivateApis } from '@wordpress/block-editor';\r\nimport { useMemo } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { unlock } from '../../lock-unlock';\r\n\r\nconst {\r\n\tuseGlobalStyle,\r\n\tuseGlobalSetting,\r\n\tuseSettingsForBlockElement,\r\n\tDimensionsPanel: StylesDimensionsPanel,\r\n} = unlock( blockEditorPrivateApis );\r\n\r\nconst DEFAULT_CONTROLS = {\r\n\tcontentSize: true,\r\n\twideSize: true,\r\n\tpadding: true,\r\n\tmargin: true,\r\n\tblockGap: true,\r\n\tminHeight: true,\r\n\tchildLayout: false,\r\n};\r\n\r\nexport default function DimensionsPanel() {\r\n\tconst [ style ] = useGlobalStyle( '', undefined, 'user', {\r\n\t\tshouldDecodeEncode: false,\r\n\t} );\r\n\tconst [ inheritedStyle, setStyle ] = useGlobalStyle( '', undefined, 'all', {\r\n\t\tshouldDecodeEncode: false,\r\n\t} );\r\n\tconst [ userSettings ] = useGlobalSetting( '', undefined, 'user' );\r\n\tconst [ rawSettings, setSettings ] = useGlobalSetting( '' );\r\n\tconst settings = useSettingsForBlockElement( rawSettings );\r\n\r\n\t// These intermediary objects are needed because the \"layout\" property is stored\r\n\t// in settings rather than styles.\r\n\tconst inheritedStyleWithLayout = useMemo( () => {\r\n\t\treturn {\r\n\t\t\t...inheritedStyle,\r\n\t\t\tlayout: settings.layout,\r\n\t\t};\r\n\t}, [ inheritedStyle, settings.layout ] );\r\n\r\n\tconst styleWithLayout = useMemo( () => {\r\n\t\treturn {\r\n\t\t\t...style,\r\n\t\t\tlayout: userSettings.layout,\r\n\t\t};\r\n\t}, [ style, userSettings.layout ] );\r\n\r\n\tconst onChange = ( newStyle ) => {\r\n\t\tconst updatedStyle = { ...newStyle };\r\n\t\tdelete updatedStyle.layout;\r\n\t\tsetStyle( updatedStyle );\r\n\r\n\t\tif ( newStyle.layout !== userSettings.layout ) {\r\n\t\t\tconst updatedSettings = {\r\n\t\t\t\t...userSettings,\r\n\t\t\t\tlayout: newStyle.layout,\r\n\t\t\t};\r\n\r\n\t\t\t// Ensure any changes to layout definitions are not persisted.\r\n\t\t\tif ( updatedSettings.layout?.definitions ) {\r\n\t\t\t\tdelete updatedSettings.layout.definitions;\r\n\t\t\t}\r\n\r\n\t\t\tsetSettings( updatedSettings );\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<StylesDimensionsPanel\r\n\t\t\tinheritedValue={ inheritedStyleWithLayout }\r\n\t\t\tvalue={ styleWithLayout }\r\n\t\t\tonChange={ onChange }\r\n\t\t\tsettings={ settings }\r\n\t\t\tincludeLayoutControls\r\n\t\t\tdefaultControls={ DEFAULT_CONTROLS }\r\n\t\t/>\r\n\t);\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,WAAW,IAAIC,sBAAsB,QAAQ,yBAAyB;AAC/E,SAASC,OAAO,QAAQ,oBAAoB;;AAE5C;AACA;AACA;AACA,SAASC,MAAM,QAAQ,mBAAmB;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAE3C,MAAM;EACLC,cAAc;EACdC,gBAAgB;EAChBC,0BAA0B;EAC1BC,eAAe,EAAEC;AAClB,CAAC,GAAGP,MAAM,CAAEF,sBAAuB,CAAC;AAEpC,MAAMU,gBAAgB,GAAG;EACxBC,WAAW,EAAE,IAAI;EACjBC,QAAQ,EAAE,IAAI;EACdC,OAAO,EAAE,IAAI;EACbC,MAAM,EAAE,IAAI;EACZC,QAAQ,EAAE,IAAI;EACdC,SAAS,EAAE,IAAI;EACfC,WAAW,EAAE;AACd,CAAC;AAED,eAAe,SAAST,eAAeA,CAAA,EAAG;EACzC,MAAM,CAAEU,KAAK,CAAE,GAAGb,cAAc,CAAE,EAAE,EAAEc,SAAS,EAAE,MAAM,EAAE;IACxDC,kBAAkB,EAAE;EACrB,CAAE,CAAC;EACH,MAAM,CAAEC,cAAc,EAAEC,QAAQ,CAAE,GAAGjB,cAAc,CAAE,EAAE,EAAEc,SAAS,EAAE,KAAK,EAAE;IAC1EC,kBAAkB,EAAE;EACrB,CAAE,CAAC;EACH,MAAM,CAAEG,YAAY,CAAE,GAAGjB,gBAAgB,CAAE,EAAE,EAAEa,SAAS,EAAE,MAAO,CAAC;EAClE,MAAM,CAAEK,WAAW,EAAEC,WAAW,CAAE,GAAGnB,gBAAgB,CAAE,EAAG,CAAC;EAC3D,MAAMoB,QAAQ,GAAGnB,0BAA0B,CAAEiB,WAAY,CAAC;;EAE1D;EACA;EACA,MAAMG,wBAAwB,GAAG1B,OAAO,CAAE,MAAM;IAC/C,OAAO;MACN,GAAGoB,cAAc;MACjBO,MAAM,EAAEF,QAAQ,CAACE;IAClB,CAAC;EACF,CAAC,EAAE,CAAEP,cAAc,EAAEK,QAAQ,CAACE,MAAM,CAAG,CAAC;EAExC,MAAMC,eAAe,GAAG5B,OAAO,CAAE,MAAM;IACtC,OAAO;MACN,GAAGiB,KAAK;MACRU,MAAM,EAAEL,YAAY,CAACK;IACtB,CAAC;EACF,CAAC,EAAE,CAAEV,KAAK,EAAEK,YAAY,CAACK,MAAM,CAAG,CAAC;EAEnC,MAAME,QAAQ,GAAKC,QAAQ,IAAM;IAChC,MAAMC,YAAY,GAAG;MAAE,GAAGD;IAAS,CAAC;IACpC,OAAOC,YAAY,CAACJ,MAAM;IAC1BN,QAAQ,CAAEU,YAAa,CAAC;IAExB,IAAKD,QAAQ,CAACH,MAAM,KAAKL,YAAY,CAACK,MAAM,EAAG;MAC9C,MAAMK,eAAe,GAAG;QACvB,GAAGV,YAAY;QACfK,MAAM,EAAEG,QAAQ,CAACH;MAClB,CAAC;;MAED;MACA,IAAKK,eAAe,CAACL,MAAM,EAAEM,WAAW,EAAG;QAC1C,OAAOD,eAAe,CAACL,MAAM,CAACM,WAAW;MAC1C;MAEAT,WAAW,CAAEQ,eAAgB,CAAC;IAC/B;EACD,CAAC;EAED,oBACC7B,IAAA,CAACK,qBAAqB;IACrB0B,cAAc,EAAGR,wBAA0B;IAC3CS,KAAK,EAAGP,eAAiB;IACzBC,QAAQ,EAAGA,QAAU;IACrBJ,QAAQ,EAAGA,QAAU;IACrBW,qBAAqB;IACrBC,eAAe,EAAG5B;EAAkB,CACpC,CAAC;AAEJ","ignoreList":[]}