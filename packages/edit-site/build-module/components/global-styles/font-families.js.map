{"version":3,"names":["__","_x","__experimentalText","Text","__experimentalItemGroup","ItemGroup","__experimentalVStack","VStack","Button","privateApis","blockEditorPrivateApis","useContext","FontLibraryProvider","FontLibraryContext","FontLibraryModal","FontFamilyItem","Subtitle","setUIValuesNeeded","unlock","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","useGlobalSetting","FontFamilies","baseCustomFonts","modalTabOpen","setModalTabOpen","fontFamilies","baseFontFamilies","undefined","themeFonts","theme","map","f","source","sort","a","b","name","localeCompare","customFonts","custom","hasFonts","length","hasInstalledFonts","children","onRequestClose","defaultTabId","spacing","level","size","isBordered","isSeparated","font","slug","as","className","variant","__next40pxDefaultSize","onClick","props"],"sources":["@wordpress/edit-site/src/components/global-styles/font-families.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { __, _x } from '@wordpress/i18n';\r\nimport {\r\n\t__experimentalText as Text,\r\n\t__experimentalItemGroup as ItemGroup,\r\n\t__experimentalVStack as VStack,\r\n\tButton,\r\n} from '@wordpress/components';\r\nimport { privateApis as blockEditorPrivateApis } from '@wordpress/block-editor';\r\nimport { useContext } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport FontLibraryProvider, {\r\n\tFontLibraryContext,\r\n} from './font-library-modal/context';\r\nimport FontLibraryModal from './font-library-modal';\r\nimport FontFamilyItem from './font-family-item';\r\nimport Subtitle from './subtitle';\r\nimport { setUIValuesNeeded } from './font-library-modal/utils';\r\nimport { unlock } from '../../lock-unlock';\r\n\r\nconst { useGlobalSetting } = unlock( blockEditorPrivateApis );\r\n\r\nfunction FontFamilies() {\r\n\tconst { baseCustomFonts, modalTabOpen, setModalTabOpen } =\r\n\t\tuseContext( FontLibraryContext );\r\n\tconst [ fontFamilies ] = useGlobalSetting( 'typography.fontFamilies' );\r\n\tconst [ baseFontFamilies ] = useGlobalSetting(\r\n\t\t'typography.fontFamilies',\r\n\t\tundefined,\r\n\t\t'base'\r\n\t);\r\n\tconst themeFonts = fontFamilies?.theme\r\n\t\t? fontFamilies.theme\r\n\t\t\t\t.map( ( f ) => setUIValuesNeeded( f, { source: 'theme' } ) )\r\n\t\t\t\t.sort( ( a, b ) => a.name.localeCompare( b.name ) )\r\n\t\t: [];\r\n\tconst customFonts = fontFamilies?.custom\r\n\t\t? fontFamilies.custom\r\n\t\t\t\t.map( ( f ) => setUIValuesNeeded( f, { source: 'custom' } ) )\r\n\t\t\t\t.sort( ( a, b ) => a.name.localeCompare( b.name ) )\r\n\t\t: [];\r\n\tconst hasFonts = 0 < customFonts.length || 0 < themeFonts.length;\r\n\r\n\tconst hasInstalledFonts =\r\n\t\thasFonts ||\r\n\t\tbaseFontFamilies?.theme?.length > 0 ||\r\n\t\tbaseCustomFonts?.length > 0;\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ !! modalTabOpen && (\r\n\t\t\t\t<FontLibraryModal\r\n\t\t\t\t\tonRequestClose={ () => setModalTabOpen( null ) }\r\n\t\t\t\t\tdefaultTabId={ modalTabOpen }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\r\n\t\t\t<VStack spacing={ 4 }>\r\n\t\t\t\t{ themeFonts.length > 0 && (\r\n\t\t\t\t\t<VStack>\r\n\t\t\t\t\t\t<Subtitle level={ 3 }>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t/* translators: Heading for a list of fonts provided by the theme. */\r\n\t\t\t\t\t\t\t\t_x( 'Theme', 'font source' )\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Subtitle>\r\n\t\t\t\t\t\t<ItemGroup size=\"large\" isBordered isSeparated>\r\n\t\t\t\t\t\t\t{ themeFonts.map( ( font ) => (\r\n\t\t\t\t\t\t\t\t<FontFamilyItem\r\n\t\t\t\t\t\t\t\t\tkey={ font.slug }\r\n\t\t\t\t\t\t\t\t\tfont={ font }\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t) ) }\r\n\t\t\t\t\t\t</ItemGroup>\r\n\t\t\t\t\t</VStack>\r\n\t\t\t\t) }\r\n\t\t\t\t{ customFonts.length > 0 && (\r\n\t\t\t\t\t<VStack>\r\n\t\t\t\t\t\t<Subtitle level={ 3 }>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t/* translators: Heading for a list of fonts installed by the user. */\r\n\t\t\t\t\t\t\t\t_x( 'Custom', 'font source' )\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Subtitle>\r\n\t\t\t\t\t\t<ItemGroup size=\"large\" isBordered isSeparated>\r\n\t\t\t\t\t\t\t{ customFonts.map( ( font ) => (\r\n\t\t\t\t\t\t\t\t<FontFamilyItem\r\n\t\t\t\t\t\t\t\t\tkey={ font.slug }\r\n\t\t\t\t\t\t\t\t\tfont={ font }\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t) ) }\r\n\t\t\t\t\t\t</ItemGroup>\r\n\t\t\t\t\t</VStack>\r\n\t\t\t\t) }\r\n\t\t\t\t{ ! hasFonts && (\r\n\t\t\t\t\t<VStack>\r\n\t\t\t\t\t\t<Subtitle level={ 3 }>{ __( 'Fonts' ) }</Subtitle>\r\n\t\t\t\t\t\t<Text as=\"p\">\r\n\t\t\t\t\t\t\t{ hasInstalledFonts\r\n\t\t\t\t\t\t\t\t? __( 'No fonts activated.' )\r\n\t\t\t\t\t\t\t\t: __( 'No fonts installed.' ) }\r\n\t\t\t\t\t\t</Text>\r\n\t\t\t\t\t</VStack>\r\n\t\t\t\t) }\r\n\t\t\t\t<Button\r\n\t\t\t\t\tclassName=\"edit-site-global-styles-font-families__manage-fonts\"\r\n\t\t\t\t\tvariant=\"secondary\"\r\n\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\tsetModalTabOpen(\r\n\t\t\t\t\t\t\thasInstalledFonts\r\n\t\t\t\t\t\t\t\t? 'installed-fonts'\r\n\t\t\t\t\t\t\t\t: 'upload-fonts'\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} }\r\n\t\t\t\t>\r\n\t\t\t\t\t{ hasInstalledFonts\r\n\t\t\t\t\t\t? __( 'Manage fonts' )\r\n\t\t\t\t\t\t: __( 'Add fonts' ) }\r\n\t\t\t\t</Button>\r\n\t\t\t</VStack>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default ( { ...props } ) => (\r\n\t<FontLibraryProvider>\r\n\t\t<FontFamilies { ...props } />\r\n\t</FontLibraryProvider>\r\n);\r\n"],"mappings":"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","ignoreList":[]}