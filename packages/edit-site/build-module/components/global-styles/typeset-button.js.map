{"version":3,"names":["isRTL","__","__experimentalItemGroup","ItemGroup","__experimentalVStack","VStack","__experimentalHStack","HStack","FlexItem","store","coreStore","useSelect","privateApis","blockEditorPrivateApis","editorPrivateApis","useMemo","useContext","Icon","chevronLeft","chevronRight","FontLibraryProvider","getFontFamilies","NavigationButtonAsItem","Subtitle","unlock","filterObjectByProperties","useCurrentMergeThemeStyleVariationsWithUserConfig","jsx","_jsx","jsxs","_jsxs","GlobalStylesContext","mergeBaseAndUserConfigs","TypesetButton","propertiesToFilter","typographyVariations","hasTypographyVariations","length","base","user","userConfig","config","allFontFamilies","hasFonts","filter","font","variations","select","__experimentalGetCurrentThemeGlobalStylesVariations","userTypographyConfig","title","Object","keys","activeVariation","find","variation","JSON","stringify","map","name","join","spacing","children","justify","level","isBordered","isSeparated","path","direction","icon","props"],"sources":["@wordpress/edit-site/src/components/global-styles/typeset-button.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { isRTL, __ } from '@wordpress/i18n';\r\nimport {\r\n\t__experimentalItemGroup as ItemGroup,\r\n\t__experimentalVStack as VStack,\r\n\t__experimentalHStack as HStack,\r\n\tFlexItem,\r\n} from '@wordpress/components';\r\nimport { store as coreStore } from '@wordpress/core-data';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { privateApis as blockEditorPrivateApis } from '@wordpress/block-editor';\r\nimport { privateApis as editorPrivateApis } from '@wordpress/editor';\r\nimport { useMemo, useContext } from '@wordpress/element';\r\nimport { Icon, chevronLeft, chevronRight } from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport FontLibraryProvider from './font-library-modal/context';\r\nimport { getFontFamilies } from './utils';\r\nimport { NavigationButtonAsItem } from './navigation-button';\r\nimport Subtitle from './subtitle';\r\nimport { unlock } from '../../lock-unlock';\r\nimport {\r\n\tfilterObjectByProperties,\r\n\tuseCurrentMergeThemeStyleVariationsWithUserConfig,\r\n} from '../../hooks/use-theme-style-variations/use-theme-style-variations-by-property';\r\n\r\nconst { GlobalStylesContext } = unlock( blockEditorPrivateApis );\r\nconst { mergeBaseAndUserConfigs } = unlock( editorPrivateApis );\r\n\r\nfunction TypesetButton() {\r\n\tconst propertiesToFilter = [ 'typography' ];\r\n\tconst typographyVariations =\r\n\t\tuseCurrentMergeThemeStyleVariationsWithUserConfig( propertiesToFilter );\r\n\tconst hasTypographyVariations = typographyVariations?.length > 1;\r\n\tconst { base, user: userConfig } = useContext( GlobalStylesContext );\r\n\tconst config = mergeBaseAndUserConfigs( base, userConfig );\r\n\tconst allFontFamilies = getFontFamilies( config );\r\n\tconst hasFonts =\r\n\t\tallFontFamilies.filter( ( font ) => font !== null ).length > 0;\r\n\tconst variations = useSelect( ( select ) => {\r\n\t\treturn select(\r\n\t\t\tcoreStore\r\n\t\t).__experimentalGetCurrentThemeGlobalStylesVariations();\r\n\t}, [] );\r\n\tconst userTypographyConfig = filterObjectByProperties(\r\n\t\tuserConfig,\r\n\t\t'typography'\r\n\t);\r\n\r\n\tconst title = useMemo( () => {\r\n\t\tif ( Object.keys( userTypographyConfig ).length === 0 ) {\r\n\t\t\treturn __( 'Default' );\r\n\t\t}\r\n\t\tconst activeVariation = variations?.find( ( variation ) => {\r\n\t\t\treturn (\r\n\t\t\t\tJSON.stringify(\r\n\t\t\t\t\tfilterObjectByProperties( variation, 'typography' )\r\n\t\t\t\t) === JSON.stringify( userTypographyConfig )\r\n\t\t\t);\r\n\t\t} );\r\n\t\tif ( activeVariation ) {\r\n\t\t\treturn activeVariation.title;\r\n\t\t}\r\n\t\treturn allFontFamilies.map( ( font ) => font?.name ).join( ', ' );\r\n\t}, [ allFontFamilies, userTypographyConfig, variations ] );\r\n\r\n\treturn (\r\n\t\thasTypographyVariations &&\r\n\t\thasFonts && (\r\n\t\t\t<VStack spacing={ 2 }>\r\n\t\t\t\t<HStack justify=\"space-between\">\r\n\t\t\t\t\t<Subtitle level={ 3 }>{ __( 'Typeset' ) }</Subtitle>\r\n\t\t\t\t</HStack>\r\n\t\t\t\t<ItemGroup isBordered isSeparated>\r\n\t\t\t\t\t<NavigationButtonAsItem\r\n\t\t\t\t\t\tpath=\"/typography/typeset\"\r\n\t\t\t\t\t\taria-label={ __( 'Typeset' ) }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<HStack direction=\"row\">\r\n\t\t\t\t\t\t\t<FlexItem>{ title }</FlexItem>\r\n\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\ticon={ isRTL() ? chevronLeft : chevronRight }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</HStack>\r\n\t\t\t\t\t</NavigationButtonAsItem>\r\n\t\t\t\t</ItemGroup>\r\n\t\t\t</VStack>\r\n\t\t)\r\n\t);\r\n}\r\n\r\nexport default ( { ...props } ) => (\r\n\t<FontLibraryProvider>\r\n\t\t<TypesetButton { ...props } />\r\n\t</FontLibraryProvider>\r\n);\r\n"],"mappings":"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","ignoreList":[]}