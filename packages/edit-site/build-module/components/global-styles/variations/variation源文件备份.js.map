{"version":3,"names":["clsx","Tooltip","useMemo","useContext","useState","ENTER","__","sprintf","privateApis","blockEditorPrivateApis","editorPrivateApis","filterObjectByProperties","unlock","jsx","_jsx","mergeBaseAndUserConfigs","GlobalStylesContext","areGlobalStyleConfigsEqual","Variation","variation","children","isPill","properties","showTooltip","isFocused","setIsFocused","base","user","setUserConfig","context","merged","selectVariation","selectOnEnter","event","keyCode","preventDefault","isActive","label","title","description","content","className","role","onClick","onKeyDown","tabIndex","onFocus","onBlur","Provider","value","text"],"sources":["@wordpress/edit-site/src/components/global-styles/variations/variation源文件备份.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { Tooltip } from '@wordpress/components';\r\nimport { useMemo, useContext, useState } from '@wordpress/element';\r\nimport { ENTER } from '@wordpress/keycodes';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { privateApis as blockEditorPrivateApis } from '@wordpress/block-editor';\r\nimport { privateApis as editorPrivateApis } from '@wordpress/editor';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { filterObjectByProperties } from '../../../hooks/use-theme-style-variations/use-theme-style-variations-by-property';\r\nimport { unlock } from '../../../lock-unlock';\r\n\r\nconst { mergeBaseAndUserConfigs } = unlock( editorPrivateApis );\r\nconst { GlobalStylesContext, areGlobalStyleConfigsEqual } = unlock(\r\n\tblockEditorPrivateApis\r\n);\r\n\r\nexport default function Variation( {\r\n\tvariation,\r\n\tchildren,\r\n\tisPill,\r\n\tproperties,\r\n\tshowTooltip,\r\n} ) {\r\n\tconst [ isFocused, setIsFocused ] = useState( false );\r\n\tconst { base, user, setUserConfig } = useContext( GlobalStylesContext );\r\n\r\n\tconst context = useMemo( () => {\r\n\t\tlet merged = mergeBaseAndUserConfigs( base, variation );\r\n\t\tif ( properties ) {\r\n\t\t\tmerged = filterObjectByProperties( merged, properties );\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tuser: variation,\r\n\t\t\tbase,\r\n\t\t\tmerged,\r\n\t\t\tsetUserConfig: () => {},\r\n\t\t};\r\n\t}, [ variation, base, properties ] );\r\n\r\n\tconst selectVariation = () => setUserConfig( variation );\r\n\r\n\tconst selectOnEnter = ( event ) => {\r\n\t\tif ( event.keyCode === ENTER ) {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tselectVariation();\r\n\t\t}\r\n\t};\r\n\r\n\tconst isActive = useMemo(\r\n\t\t() => areGlobalStyleConfigsEqual( user, variation ),\r\n\t\t[ user, variation ]\r\n\t);\r\n\r\n\tlet label = variation?.title;\r\n\tif ( variation?.description ) {\r\n\t\tlabel = sprintf(\r\n\t\t\t/* translators: %1$s: variation title. %2$s variation description. */\r\n\t\t\t__( '%1$s (%2$s)' ),\r\n\t\t\tvariation?.title,\r\n\t\t\tvariation?.description\r\n\t\t);\r\n\t}\r\n\r\n\tconst content = (\r\n\t\t<div\r\n\t\t\tclassName={ clsx( 'edit-site-global-styles-variations_item', {\r\n\t\t\t\t'is-active': isActive,\r\n\t\t\t} ) }\r\n\t\t\trole=\"button\"\r\n\t\t\tonClick={ selectVariation }\r\n\t\t\tonKeyDown={ selectOnEnter }\r\n\t\t\ttabIndex=\"0\"\r\n\t\t\taria-label={ label }\r\n\t\t\taria-current={ isActive }\r\n\t\t\tonFocus={ () => setIsFocused( true ) }\r\n\t\t\tonBlur={ () => setIsFocused( false ) }\r\n\t\t>\r\n\t\t\t<div\r\n\t\t\t\tclassName={ clsx(\r\n\t\t\t\t\t'edit-site-global-styles-variations_item-preview',\r\n\t\t\t\t\t{ 'is-pill': isPill }\r\n\t\t\t\t) }\r\n\t\t\t>\r\n\t\t\t\t{ children( isFocused ) }\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n\r\n\treturn (\r\n\t\t<GlobalStylesContext.Provider value={ context }>\r\n\t\t\t{ showTooltip ? (\r\n\t\t\t\t<Tooltip text={ variation?.title }>{ content }</Tooltip>\r\n\t\t\t) : (\r\n\t\t\t\tcontent\r\n\t\t\t) }\r\n\t\t</GlobalStylesContext.Provider>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}