{"version":3,"names":["privateApis","routerPrivateApis","__","useEffect","unlock","Editor","PostList","PagePatterns","PageTemplates","SidebarNavigationScreen","SidebarNavigationScreenGlobalStyles","SidebarNavigationScreenMain","SidebarNavigationScreenNavigationMenus","SidebarNavigationScreenTemplatesBrowse","SidebarNavigationScreenPatterns","SidebarNavigationScreenNavigationMenu","DataViewsSidebarContent","NAVIGATION_POST_TYPE","PATTERN_TYPES","TEMPLATE_PART_POST_TYPE","TEMPLATE_POST_TYPE","PostEdit","jsx","_jsx","useLocation","useHistory","useRedirectOldPaths","history","params","postType","path","categoryType","rest","replace","user","useLayoutAreas","postId","layout","isCustom","canvas","quickEdit","hasEditCanvasMode","isListLayout","showQuickEdit","key","areas","sidebar","title","backPath","content","preview","mobile","edit","widths","undefined","includes"],"sources":["@wordpress/edit-site/src/components/layout/router.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { privateApis as routerPrivateApis } from '@wordpress/router';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useEffect } from '@wordpress/element';\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { unlock } from '../../lock-unlock';\r\nimport Editor from '../editor';\r\nimport PostList from '../post-list';\r\nimport PagePatterns from '../page-patterns';\r\nimport PageTemplates from '../page-templates';\r\nimport SidebarNavigationScreen from '../sidebar-navigation-screen';\r\nimport SidebarNavigationScreenGlobalStyles from '../sidebar-navigation-screen-global-styles';\r\nimport SidebarNavigationScreenMain from '../sidebar-navigation-screen-main';\r\nimport SidebarNavigationScreenNavigationMenus from '../sidebar-navigation-screen-navigation-menus';\r\nimport SidebarNavigationScreenTemplatesBrowse from '../sidebar-navigation-screen-templates-browse';\r\nimport SidebarNavigationScreenPatterns from '../sidebar-navigation-screen-patterns';\r\nimport SidebarNavigationScreenNavigationMenu from '../sidebar-navigation-screen-navigation-menu';\r\nimport DataViewsSidebarContent from '../sidebar-dataviews';\r\nimport {\r\n\tNAVIGATION_POST_TYPE,\r\n\tPATTERN_TYPES,\r\n\tTEMPLATE_PART_POST_TYPE,\r\n\tTEMPLATE_POST_TYPE,\r\n} from '../../utils/constants';\r\nimport { PostEdit } from '../post-edit';\r\n\r\nconst { useLocation, useHistory } = unlock( routerPrivateApis );\r\n\r\nfunction useRedirectOldPaths() {\r\n\tconst history = useHistory();\r\n\tconst { params } = useLocation();\r\n\tuseEffect( () => {\r\n\t\tconst { postType, path, categoryType, ...rest } = params;\r\n\r\n\t\tif ( path === '/wp_template_part/all' ) {\r\n\t\t\thistory.replace( { postType: TEMPLATE_PART_POST_TYPE } );\r\n\t\t}\r\n\r\n\t\tif ( path === '/page' ) {\r\n\t\t\thistory.replace( {\r\n\t\t\t\tpostType: 'page',\r\n\t\t\t\t...rest,\r\n\t\t\t} );\r\n\t\t}\r\n\r\n\t\tif ( path === '/wp_template' ) {\r\n\t\t\thistory.replace( {\r\n\t\t\t\tpostType: TEMPLATE_POST_TYPE,\r\n\t\t\t\t...rest,\r\n\t\t\t} );\r\n\t\t}\r\n\r\n\t\tif ( path === '/patterns' ) {\r\n\t\t\thistory.replace( {\r\n\t\t\t\tpostType:\r\n\t\t\t\t\tcategoryType === TEMPLATE_PART_POST_TYPE\r\n\t\t\t\t\t\t? TEMPLATE_PART_POST_TYPE\r\n\t\t\t\t\t\t: PATTERN_TYPES.user,\r\n\t\t\t\t...rest,\r\n\t\t\t} );\r\n\t\t}\r\n\r\n\t\tif ( path === '/navigation' ) {\r\n\t\t\thistory.replace( {\r\n\t\t\t\tpostType: NAVIGATION_POST_TYPE,\r\n\t\t\t\t...rest,\r\n\t\t\t} );\r\n\t\t}\r\n\t}, [ history, params ] );\r\n}\r\n\r\nexport default function useLayoutAreas() {\r\n\tconst { params } = useLocation();\r\n\tconst { postType, postId, path, layout, isCustom, canvas, quickEdit } =\r\n\t\tparams;\r\n\tconst hasEditCanvasMode = canvas === 'edit';\r\n\tuseRedirectOldPaths();\r\n\r\n\t// Page list\r\n\tif ( postType === 'page' ) {\r\n\t\tconst isListLayout = layout === 'list' || ! layout;\r\n\t\tconst showQuickEdit = quickEdit && ! isListLayout;\r\n\t\treturn {\r\n\t\t\tkey: 'pages',\r\n\t\t\tareas: {\r\n\t\t\t\tsidebar: (\r\n\t\t\t\t\t<SidebarNavigationScreen\r\n\t\t\t\t\t\ttitle={ __( 'Pages' ) }\r\n\t\t\t\t\t\tbackPath={ {} }\r\n\t\t\t\t\t\tcontent={ <DataViewsSidebarContent /> }\r\n\t\t\t\t\t/>\r\n\t\t\t\t),\r\n\t\t\t\tcontent: <PostList postType={ postType } />,\r\n\t\t\t\tpreview: ! showQuickEdit &&\r\n\t\t\t\t\t( isListLayout || hasEditCanvasMode ) && <Editor />,\r\n\t\t\t\tmobile: hasEditCanvasMode ? (\r\n\t\t\t\t\t<Editor />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<PostList postType={ postType } />\r\n\t\t\t\t),\r\n\t\t\t\tedit: showQuickEdit && (\r\n\t\t\t\t\t<PostEdit postType={ postType } postId={ postId } />\r\n\t\t\t\t),\r\n\t\t\t},\r\n\t\t\twidths: {\r\n\t\t\t\tcontent: isListLayout ? 380 : undefined,\r\n\t\t\t\tedit: showQuickEdit ? 380 : undefined,\r\n\t\t\t},\r\n\t\t};\r\n\t}\r\n\r\n\t// Templates\r\n\tif ( postType === TEMPLATE_POST_TYPE ) {\r\n\t\tconst isListLayout = isCustom !== 'true' && layout === 'list';\r\n\t\treturn {\r\n\t\t\tkey: 'templates',\r\n\t\t\tareas: {\r\n\t\t\t\tsidebar: (\r\n\t\t\t\t\t<SidebarNavigationScreenTemplatesBrowse backPath={ {} } />\r\n\t\t\t\t),\r\n\t\t\t\tcontent: <PageTemplates />,\r\n\t\t\t\tpreview: ( isListLayout || hasEditCanvasMode ) && <Editor />,\r\n\t\t\t\tmobile: hasEditCanvasMode ? <Editor /> : <PageTemplates />,\r\n\t\t\t},\r\n\t\t\twidths: {\r\n\t\t\t\tcontent: isListLayout ? 380 : undefined,\r\n\t\t\t},\r\n\t\t};\r\n\t}\r\n\r\n\t// Patterns\r\n\tif (\r\n\t\t[ TEMPLATE_PART_POST_TYPE, PATTERN_TYPES.user ].includes( postType )\r\n\t) {\r\n\t\treturn {\r\n\t\t\tkey: 'patterns',\r\n\t\t\tareas: {\r\n\t\t\t\tsidebar: <SidebarNavigationScreenPatterns backPath={ {} } />,\r\n\t\t\t\tcontent: <PagePatterns />,\r\n\t\t\t\tmobile: hasEditCanvasMode ? <Editor /> : <PagePatterns />,\r\n\t\t\t\tpreview: hasEditCanvasMode && <Editor />,\r\n\t\t\t},\r\n\t\t};\r\n\t}\r\n\r\n\t// Styles\r\n\tif ( path === '/wp_global_styles' ) {\r\n\t\treturn {\r\n\t\t\tkey: 'styles',\r\n\t\t\tareas: {\r\n\t\t\t\tsidebar: (\r\n\t\t\t\t\t<SidebarNavigationScreenGlobalStyles backPath={ {} } />\r\n\t\t\t\t),\r\n\t\t\t\tpreview: <Editor />,\r\n\t\t\t\tmobile: hasEditCanvasMode && <Editor />,\r\n\t\t\t},\r\n\t\t};\r\n\t}\r\n\r\n\t// Navigation\r\n\tif ( postType === NAVIGATION_POST_TYPE ) {\r\n\t\tif ( postId ) {\r\n\t\t\treturn {\r\n\t\t\t\tkey: 'navigation',\r\n\t\t\t\tareas: {\r\n\t\t\t\t\tsidebar: (\r\n\t\t\t\t\t\t<SidebarNavigationScreenNavigationMenu\r\n\t\t\t\t\t\t\tbackPath={ { postType: NAVIGATION_POST_TYPE } }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t),\r\n\t\t\t\t\tpreview: <Editor />,\r\n\t\t\t\t\tmobile: hasEditCanvasMode && <Editor />,\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tkey: 'navigation',\r\n\t\t\tareas: {\r\n\t\t\t\tsidebar: (\r\n\t\t\t\t\t<SidebarNavigationScreenNavigationMenus backPath={ {} } />\r\n\t\t\t\t),\r\n\t\t\t\tpreview: <Editor />,\r\n\t\t\t\tmobile: hasEditCanvasMode && <Editor />,\r\n\t\t\t},\r\n\t\t};\r\n\t}\r\n\r\n\t// Fallback shows the home page preview\r\n\treturn {\r\n\t\tkey: 'default',\r\n\t\tareas: {\r\n\t\t\tsidebar: <SidebarNavigationScreenMain />,\r\n\t\t\tpreview: <Editor />,\r\n\t\t\tmobile: hasEditCanvasMode && <Editor />,\r\n\t\t},\r\n\t};\r\n}\r\n"],"mappings":"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","ignoreList":[]}