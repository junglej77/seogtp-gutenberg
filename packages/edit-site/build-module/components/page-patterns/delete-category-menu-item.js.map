{"version":3,"names":["MenuItem","__experimentalConfirmDialog","ConfirmDialog","store","coreStore","useDispatch","useState","decodeEntities","__","sprintf","noticesStore","privateApis","routerPrivateApis","unlock","PATTERN_TYPES","PATTERN_DEFAULT_CATEGORY","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","useHistory","DeleteCategoryMenuItem","category","onClose","isModalOpen","setIsModalOpen","history","createSuccessNotice","createErrorNotice","deleteEntityRecord","invalidateResolution","onDelete","id","force","throwOnError","user","per_page","label","type","push","postType","categoryId","error","errorMessage","message","code","children","isDestructive","onClick","isOpen","onConfirm","onCancel","confirmButtonText","className","title","size","__experimentalHideHeader"],"sources":["@wordpress/edit-site/src/components/page-patterns/delete-category-menu-item.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tMenuItem,\r\n\t__experimentalConfirmDialog as ConfirmDialog,\r\n} from '@wordpress/components';\r\nimport { store as coreStore } from '@wordpress/core-data';\r\nimport { useDispatch } from '@wordpress/data';\r\nimport { useState } from '@wordpress/element';\r\nimport { decodeEntities } from '@wordpress/html-entities';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { store as noticesStore } from '@wordpress/notices';\r\nimport { privateApis as routerPrivateApis } from '@wordpress/router';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { unlock } from '../../lock-unlock';\r\nimport { PATTERN_TYPES, PATTERN_DEFAULT_CATEGORY } from '../../utils/constants';\r\n\r\nconst { useHistory } = unlock( routerPrivateApis );\r\n\r\nexport default function DeleteCategoryMenuItem( { category, onClose } ) {\r\n\tconst [ isModalOpen, setIsModalOpen ] = useState( false );\r\n\tconst history = useHistory();\r\n\r\n\tconst { createSuccessNotice, createErrorNotice } =\r\n\t\tuseDispatch( noticesStore );\r\n\tconst { deleteEntityRecord, invalidateResolution } =\r\n\t\tuseDispatch( coreStore );\r\n\r\n\tconst onDelete = async () => {\r\n\t\ttry {\r\n\t\t\tawait deleteEntityRecord(\r\n\t\t\t\t'taxonomy',\r\n\t\t\t\t'wp_pattern_category',\r\n\t\t\t\tcategory.id,\r\n\t\t\t\t{ force: true },\r\n\t\t\t\t{ throwOnError: true }\r\n\t\t\t);\r\n\r\n\t\t\t// Prevent the need to refresh the page to get up-to-date categories\r\n\t\t\t// and pattern categorization.\r\n\t\t\tinvalidateResolution( 'getUserPatternCategories' );\r\n\t\t\tinvalidateResolution( 'getEntityRecords', [\r\n\t\t\t\t'postType',\r\n\t\t\t\tPATTERN_TYPES.user,\r\n\t\t\t\t{ per_page: -1 },\r\n\t\t\t] );\r\n\r\n\t\t\tcreateSuccessNotice(\r\n\t\t\t\tsprintf(\r\n\t\t\t\t\t/* translators: The pattern category's name */\r\n\t\t\t\t\t__( '\"%s\" deleted.' ),\r\n\t\t\t\t\tcategory.label\r\n\t\t\t\t),\r\n\t\t\t\t{ type: 'snackbar', id: 'pattern-category-delete' }\r\n\t\t\t);\r\n\r\n\t\t\tonClose?.();\r\n\t\t\thistory.push( {\r\n\t\t\t\tpostType: PATTERN_TYPES.user,\r\n\t\t\t\tcategoryId: PATTERN_DEFAULT_CATEGORY,\r\n\t\t\t} );\r\n\t\t} catch ( error ) {\r\n\t\t\tconst errorMessage =\r\n\t\t\t\terror.message && error.code !== 'unknown_error'\r\n\t\t\t\t\t? error.message\r\n\t\t\t\t\t: __(\r\n\t\t\t\t\t\t\t'An error occurred while deleting the pattern category.'\r\n\t\t\t\t\t  );\r\n\r\n\t\t\tcreateErrorNotice( errorMessage, {\r\n\t\t\t\ttype: 'snackbar',\r\n\t\t\t\tid: 'pattern-category-delete',\r\n\t\t\t} );\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<MenuItem isDestructive onClick={ () => setIsModalOpen( true ) }>\r\n\t\t\t\t{ __( 'Delete' ) }\r\n\t\t\t</MenuItem>\r\n\t\t\t<ConfirmDialog\r\n\t\t\t\tisOpen={ isModalOpen }\r\n\t\t\t\tonConfirm={ onDelete }\r\n\t\t\t\tonCancel={ () => setIsModalOpen( false ) }\r\n\t\t\t\tconfirmButtonText={ __( 'Delete' ) }\r\n\t\t\t\tclassName=\"edit-site-patterns__delete-modal\"\r\n\t\t\t\ttitle={ sprintf(\r\n\t\t\t\t\t// translators: %s: The pattern category's name.\r\n\t\t\t\t\t__( 'Delete \"%s\"?' ),\r\n\t\t\t\t\tdecodeEntities( category.label )\r\n\t\t\t\t) }\r\n\t\t\t\tsize=\"medium\"\r\n\t\t\t\t__experimentalHideHeader={ false }\r\n\t\t\t>\r\n\t\t\t\t{ sprintf(\r\n\t\t\t\t\t// translators: %s: The pattern category's name.\r\n\t\t\t\t\t__(\r\n\t\t\t\t\t\t'Are you sure you want to delete the category \"%s\"? The patterns will not be deleted.'\r\n\t\t\t\t\t),\r\n\t\t\t\t\tdecodeEntities( category.label )\r\n\t\t\t\t) }\r\n\t\t\t</ConfirmDialog>\r\n\t\t</>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}