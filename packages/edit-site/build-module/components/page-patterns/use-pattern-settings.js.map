{"version":3,"names":["store","coreStore","useSelect","useMemo","unlock","editSiteStore","filterOutDuplicatesByName","usePatternSettings","_storedSettings$__exp","storedSettings","select","getSettings","settingsBlockPatterns","__experimentalAdditionalBlockPatterns","__experimentalBlockPatterns","restBlockPatterns","getBlockPatterns","blockPatterns","filter","settings","restStoredSettings","__unstableIsPreviewMode"],"sources":["@wordpress/edit-site/src/components/page-patterns/use-pattern-settings.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { store as coreStore } from '@wordpress/core-data';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { useMemo } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { unlock } from '../../lock-unlock';\r\nimport { store as editSiteStore } from '../../store';\r\nimport { filterOutDuplicatesByName } from './utils';\r\n\r\nexport default function usePatternSettings() {\r\n\tconst storedSettings = useSelect( ( select ) => {\r\n\t\tconst { getSettings } = unlock( select( editSiteStore ) );\r\n\t\treturn getSettings();\r\n\t}, [] );\r\n\r\n\tconst settingsBlockPatterns =\r\n\t\tstoredSettings.__experimentalAdditionalBlockPatterns ?? // WP 6.0\r\n\t\tstoredSettings.__experimentalBlockPatterns; // WP 5.9\r\n\r\n\tconst restBlockPatterns = useSelect(\r\n\t\t( select ) => select( coreStore ).getBlockPatterns(),\r\n\t\t[]\r\n\t);\r\n\r\n\tconst blockPatterns = useMemo(\r\n\t\t() =>\r\n\t\t\t[\r\n\t\t\t\t...( settingsBlockPatterns || [] ),\r\n\t\t\t\t...( restBlockPatterns || [] ),\r\n\t\t\t].filter( filterOutDuplicatesByName ),\r\n\t\t[ settingsBlockPatterns, restBlockPatterns ]\r\n\t);\r\n\r\n\tconst settings = useMemo( () => {\r\n\t\tconst { __experimentalAdditionalBlockPatterns, ...restStoredSettings } =\r\n\t\t\tstoredSettings;\r\n\r\n\t\treturn {\r\n\t\t\t...restStoredSettings,\r\n\t\t\t__experimentalBlockPatterns: blockPatterns,\r\n\t\t\t__unstableIsPreviewMode: true,\r\n\t\t};\r\n\t}, [ storedSettings, blockPatterns ] );\r\n\r\n\treturn settings;\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,KAAK,IAAIC,SAAS,QAAQ,sBAAsB;AACzD,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,OAAO,QAAQ,oBAAoB;;AAE5C;AACA;AACA;AACA,SAASC,MAAM,QAAQ,mBAAmB;AAC1C,SAASJ,KAAK,IAAIK,aAAa,QAAQ,aAAa;AACpD,SAASC,yBAAyB,QAAQ,SAAS;AAEnD,eAAe,SAASC,kBAAkBA,CAAA,EAAG;EAAA,IAAAC,qBAAA;EAC5C,MAAMC,cAAc,GAAGP,SAAS,CAAIQ,MAAM,IAAM;IAC/C,MAAM;MAAEC;IAAY,CAAC,GAAGP,MAAM,CAAEM,MAAM,CAAEL,aAAc,CAAE,CAAC;IACzD,OAAOM,WAAW,CAAC,CAAC;EACrB,CAAC,EAAE,EAAG,CAAC;EAEP,MAAMC,qBAAqB,IAAAJ,qBAAA,GAC1BC,cAAc,CAACI,qCAAqC,cAAAL,qBAAA,cAAAA,qBAAA;EAAI;EACxDC,cAAc,CAACK,2BAA2B,CAAC,CAAC;;EAE7C,MAAMC,iBAAiB,GAAGb,SAAS,CAChCQ,MAAM,IAAMA,MAAM,CAAET,SAAU,CAAC,CAACe,gBAAgB,CAAC,CAAC,EACpD,EACD,CAAC;EAED,MAAMC,aAAa,GAAGd,OAAO,CAC5B,MACC,CACC,IAAKS,qBAAqB,IAAI,EAAE,CAAE,EAClC,IAAKG,iBAAiB,IAAI,EAAE,CAAE,CAC9B,CAACG,MAAM,CAAEZ,yBAA0B,CAAC,EACtC,CAAEM,qBAAqB,EAAEG,iBAAiB,CAC3C,CAAC;EAED,MAAMI,QAAQ,GAAGhB,OAAO,CAAE,MAAM;IAC/B,MAAM;MAAEU,qCAAqC;MAAE,GAAGO;IAAmB,CAAC,GACrEX,cAAc;IAEf,OAAO;MACN,GAAGW,kBAAkB;MACrBN,2BAA2B,EAAEG,aAAa;MAC1CI,uBAAuB,EAAE;IAC1B,CAAC;EACF,CAAC,EAAE,CAAEZ,cAAc,EAAEQ,aAAa,CAAG,CAAC;EAEtC,OAAOE,QAAQ;AAChB","ignoreList":[]}