{"version":3,"names":["Button","store","coreStore","privateApis","coreDataPrivateApis","useState","useMemo","useCallback","useEffect","routerPrivateApis","useSelect","useDispatch","DataViews","filterSortAndPaginate","editorPrivateApis","__","drawerRight","Page","useDefaultViews","defaultLayouts","OPERATOR_IS_ANY","OPERATOR_IS_NONE","LAYOUT_LIST","AddNewPostModal","unlock","useEditPostAction","usePrevious","usePostFields","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","usePostActions","useLocation","useHistory","useEntityRecordsWithPermissions","EMPTY_ARRAY","getDefaultView","defaultViews","activeView","find","slug","view","getCustomView","editedEntityRecord","content","undefined","JSON","parse","layout","type","useView","postType","params","isCustom","history","editEntityRecord","select","getEditedEntityRecord","Number","setView","initialView","_getCustomView","_getDefaultView","setViewWithUrlUpdate","newView","getLocationWithParams","push","id","stringify","prevView","DEFAULT_STATUSES","getItemId","item","toString","PostList","_postId$split","_data$map","_usePrevious","location","postId","quickEdit","selection","setSelection","split","onChangeSelection","items","_params$isCustom","join","isLoading","isLoadingFields","fields","queryArgs","filters","forEach","filter","field","operator","status","value","author","author_exclude","per_page","perPage","page","_embed","order","sort","direction","orderby","search","records","isResolving","isLoadingData","totalItems","totalPages","data","ids","map","record","prevIds","deletedIds","includes","postIdWasDeleted","paginationInfo","labels","canCreateRecord","getPostType","canUser","kind","name","postTypeActions","context","editAction","actions","showAddPostModal","setShowAddPostModal","openModal","closeModal","handleNewPage","canvas","title","add_new_item","children","variant","onClick","__next40pxDefaultSize","onSave","onClose","onChangeView","header","window","__experimentalQuickEditDataViews","size","isPressed","icon","label"],"sources":["@wordpress/edit-site/src/components/post-list/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { Button } from '@wordpress/components';\r\nimport {\r\n\tstore as coreStore,\r\n\tprivateApis as coreDataPrivateApis,\r\n} from '@wordpress/core-data';\r\nimport { useState, useMemo, useCallback, useEffect } from '@wordpress/element';\r\nimport { privateApis as routerPrivateApis } from '@wordpress/router';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { DataViews, filterSortAndPaginate } from '@wordpress/dataviews';\r\nimport { privateApis as editorPrivateApis } from '@wordpress/editor';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { drawerRight } from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport Page from '../page';\r\nimport {\r\n\tuseDefaultViews,\r\n\tdefaultLayouts,\r\n} from '../sidebar-dataviews/default-views';\r\nimport {\r\n\tOPERATOR_IS_ANY,\r\n\tOPERATOR_IS_NONE,\r\n\tLAYOUT_LIST,\r\n} from '../../utils/constants';\r\n\r\nimport AddNewPostModal from '../add-new-post';\r\nimport { unlock } from '../../lock-unlock';\r\nimport { useEditPostAction } from '../dataviews-actions';\r\nimport { usePrevious } from '@wordpress/compose';\r\nimport usePostFields from '../post-fields';\r\n\r\nconst { usePostActions } = unlock( editorPrivateApis );\r\nconst { useLocation, useHistory } = unlock( routerPrivateApis );\r\nconst { useEntityRecordsWithPermissions } = unlock( coreDataPrivateApis );\r\nconst EMPTY_ARRAY = [];\r\n\r\nconst getDefaultView = ( defaultViews, activeView ) => {\r\n\treturn defaultViews.find( ( { slug } ) => slug === activeView )?.view;\r\n};\r\n\r\nconst getCustomView = ( editedEntityRecord ) => {\r\n\tif ( ! editedEntityRecord?.content ) {\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tconst content = JSON.parse( editedEntityRecord.content );\r\n\tif ( ! content ) {\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\treturn {\r\n\t\t...content,\r\n\t\tlayout: defaultLayouts[ content.type ]?.layout,\r\n\t};\r\n};\r\n\r\n/**\r\n * This function abstracts working with default & custom views by\r\n * providing a [ state, setState ] tuple based on the URL parameters.\r\n *\r\n * Consumers use the provided tuple to work with state\r\n * and don't have to deal with the specifics of default & custom views.\r\n *\r\n * @param {string} postType Post type to retrieve default views for.\r\n * @return {Array} The [ state, setState ] tuple.\r\n */\r\nfunction useView( postType ) {\r\n\tconst {\r\n\t\tparams: { activeView = 'all', isCustom = 'false', layout },\r\n\t} = useLocation();\r\n\tconst history = useHistory();\r\n\r\n\tconst defaultViews = useDefaultViews( { postType } );\r\n\tconst { editEntityRecord } = useDispatch( coreStore );\r\n\tconst editedEntityRecord = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tif ( isCustom !== 'true' ) {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\r\n\t\t\tconst { getEditedEntityRecord } = select( coreStore );\r\n\t\t\treturn getEditedEntityRecord(\r\n\t\t\t\t'postType',\r\n\t\t\t\t'wp_dataviews',\r\n\t\t\t\tNumber( activeView )\r\n\t\t\t);\r\n\t\t},\r\n\t\t[ activeView, isCustom ]\r\n\t);\r\n\tconst [ view, setView ] = useState( () => {\r\n\t\tlet initialView;\r\n\t\tif ( isCustom === 'true' ) {\r\n\t\t\tinitialView = getCustomView( editedEntityRecord ) ?? {\r\n\t\t\t\ttype: layout ?? LAYOUT_LIST,\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tinitialView = getDefaultView( defaultViews, activeView ) ?? {\r\n\t\t\t\ttype: layout ?? LAYOUT_LIST,\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tconst type = layout ?? initialView.type;\r\n\t\treturn {\r\n\t\t\t...initialView,\r\n\t\t\ttype,\r\n\t\t};\r\n\t} );\r\n\r\n\tconst setViewWithUrlUpdate = useCallback(\r\n\t\t( newView ) => {\r\n\t\t\tconst { params } = history.getLocationWithParams();\r\n\r\n\t\t\tif ( newView.type === LAYOUT_LIST && ! params?.layout ) {\r\n\t\t\t\t// Skip updating the layout URL param if\r\n\t\t\t\t// it is not present and the newView.type is LAYOUT_LIST.\r\n\t\t\t} else if ( newView.type !== params?.layout ) {\r\n\t\t\t\thistory.push( {\r\n\t\t\t\t\t...params,\r\n\t\t\t\t\tlayout: newView.type,\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\r\n\t\t\tsetView( newView );\r\n\r\n\t\t\tif ( isCustom === 'true' && editedEntityRecord?.id ) {\r\n\t\t\t\teditEntityRecord(\r\n\t\t\t\t\t'postType',\r\n\t\t\t\t\t'wp_dataviews',\r\n\t\t\t\t\teditedEntityRecord?.id,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcontent: JSON.stringify( newView ),\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t},\r\n\t\t[ history, isCustom, editEntityRecord, editedEntityRecord?.id ]\r\n\t);\r\n\r\n\t// When layout URL param changes, update the view type\r\n\t// without affecting any other config.\r\n\tuseEffect( () => {\r\n\t\tsetView( ( prevView ) => ( {\r\n\t\t\t...prevView,\r\n\t\t\ttype: layout ?? LAYOUT_LIST,\r\n\t\t} ) );\r\n\t}, [ layout ] );\r\n\r\n\t// When activeView or isCustom URL parameters change, reset the view.\r\n\tuseEffect( () => {\r\n\t\tlet newView;\r\n\t\tif ( isCustom === 'true' ) {\r\n\t\t\tnewView = getCustomView( editedEntityRecord );\r\n\t\t} else {\r\n\t\t\tnewView = getDefaultView( defaultViews, activeView );\r\n\t\t}\r\n\r\n\t\tif ( newView ) {\r\n\t\t\tconst type = layout ?? newView.type;\r\n\t\t\tsetView( {\r\n\t\t\t\t...newView,\r\n\t\t\t\ttype,\r\n\t\t\t} );\r\n\t\t}\r\n\t}, [ activeView, isCustom, layout, defaultViews, editedEntityRecord ] );\r\n\r\n\treturn [ view, setViewWithUrlUpdate, setViewWithUrlUpdate ];\r\n}\r\n\r\nconst DEFAULT_STATUSES = 'draft,future,pending,private,publish'; // All but 'trash'.\r\n\r\nfunction getItemId( item ) {\r\n\treturn item.id.toString();\r\n}\r\n\r\nexport default function PostList( { postType } ) {\r\n\tconst [ view, setView ] = useView( postType );\r\n\tconst history = useHistory();\r\n\tconst location = useLocation();\r\n\tconst {\r\n\t\tpostId,\r\n\t\tquickEdit = false,\r\n\t\tisCustom,\r\n\t\tactiveView = 'all',\r\n\t} = location.params;\r\n\tconst [ selection, setSelection ] = useState( postId?.split( ',' ) ?? [] );\r\n\tconst onChangeSelection = useCallback(\r\n\t\t( items ) => {\r\n\t\t\tsetSelection( items );\r\n\t\t\tconst { params } = history.getLocationWithParams();\r\n\t\t\tif ( ( params.isCustom ?? 'false' ) === 'false' ) {\r\n\t\t\t\thistory.push( {\r\n\t\t\t\t\t...params,\r\n\t\t\t\t\tpostId: items.join( ',' ),\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\t\t},\r\n\t\t[ history ]\r\n\t);\r\n\r\n\tconst { isLoading: isLoadingFields, fields } = usePostFields( view.type );\r\n\r\n\tconst queryArgs = useMemo( () => {\r\n\t\tconst filters = {};\r\n\t\tview.filters?.forEach( ( filter ) => {\r\n\t\t\tif (\r\n\t\t\t\tfilter.field === 'status' &&\r\n\t\t\t\tfilter.operator === OPERATOR_IS_ANY\r\n\t\t\t) {\r\n\t\t\t\tfilters.status = filter.value;\r\n\t\t\t}\r\n\t\t\tif (\r\n\t\t\t\tfilter.field === 'author' &&\r\n\t\t\t\tfilter.operator === OPERATOR_IS_ANY\r\n\t\t\t) {\r\n\t\t\t\tfilters.author = filter.value;\r\n\t\t\t} else if (\r\n\t\t\t\tfilter.field === 'author' &&\r\n\t\t\t\tfilter.operator === OPERATOR_IS_NONE\r\n\t\t\t) {\r\n\t\t\t\tfilters.author_exclude = filter.value;\r\n\t\t\t}\r\n\t\t} );\r\n\t\t// We want to provide a different default item for the status filter\r\n\t\t// than the REST API provides.\r\n\t\tif ( ! filters.status || filters.status === '' ) {\r\n\t\t\tfilters.status = DEFAULT_STATUSES;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tper_page: view.perPage,\r\n\t\t\tpage: view.page,\r\n\t\t\t_embed: 'author',\r\n\t\t\torder: view.sort?.direction,\r\n\t\t\torderby: view.sort?.field,\r\n\t\t\tsearch: view.search,\r\n\t\t\t...filters,\r\n\t\t};\r\n\t}, [ view ] );\r\n\tconst {\r\n\t\trecords,\r\n\t\tisResolving: isLoadingData,\r\n\t\ttotalItems,\r\n\t\ttotalPages,\r\n\t} = useEntityRecordsWithPermissions( 'postType', postType, queryArgs );\r\n\r\n\t// The REST API sort the authors by ID, but we want to sort them by name.\r\n\tconst data = useMemo( () => {\r\n\t\tif ( ! isLoadingFields && view?.sort?.field === 'author' ) {\r\n\t\t\treturn filterSortAndPaginate(\r\n\t\t\t\trecords,\r\n\t\t\t\t{ sort: { ...view.sort } },\r\n\t\t\t\tfields\r\n\t\t\t).data;\r\n\t\t}\r\n\r\n\t\treturn records;\r\n\t}, [ records, fields, isLoadingFields, view?.sort ] );\r\n\r\n\tconst ids = data?.map( ( record ) => getItemId( record ) ) ?? [];\r\n\tconst prevIds = usePrevious( ids ) ?? [];\r\n\tconst deletedIds = prevIds.filter( ( id ) => ! ids.includes( id ) );\r\n\tconst postIdWasDeleted = deletedIds.includes( postId );\r\n\r\n\tuseEffect( () => {\r\n\t\tif ( postIdWasDeleted ) {\r\n\t\t\thistory.push( {\r\n\t\t\t\t...history.getLocationWithParams().params,\r\n\t\t\t\tpostId: undefined,\r\n\t\t\t} );\r\n\t\t}\r\n\t}, [ postIdWasDeleted, history ] );\r\n\r\n\tconst paginationInfo = useMemo(\r\n\t\t() => ( {\r\n\t\t\ttotalItems,\r\n\t\t\ttotalPages,\r\n\t\t} ),\r\n\t\t[ totalItems, totalPages ]\r\n\t);\r\n\r\n\tconst { labels, canCreateRecord } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst { getPostType, canUser } = select( coreStore );\r\n\t\t\treturn {\r\n\t\t\t\tlabels: getPostType( postType )?.labels,\r\n\t\t\t\tcanCreateRecord: canUser( 'create', {\r\n\t\t\t\t\tkind: 'postType',\r\n\t\t\t\t\tname: postType,\r\n\t\t\t\t} ),\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ postType ]\r\n\t);\r\n\r\n\tconst postTypeActions = usePostActions( {\r\n\t\tpostType,\r\n\t\tcontext: 'list',\r\n\t} );\r\n\tconst editAction = useEditPostAction();\r\n\tconst actions = useMemo(\r\n\t\t() => [ editAction, ...postTypeActions ],\r\n\t\t[ postTypeActions, editAction ]\r\n\t);\r\n\r\n\tconst [ showAddPostModal, setShowAddPostModal ] = useState( false );\r\n\r\n\tconst openModal = () => setShowAddPostModal( true );\r\n\tconst closeModal = () => setShowAddPostModal( false );\r\n\tconst handleNewPage = ( { type, id } ) => {\r\n\t\thistory.push( {\r\n\t\t\tpostId: id,\r\n\t\t\tpostType: type,\r\n\t\t\tcanvas: 'edit',\r\n\t\t} );\r\n\t\tcloseModal();\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Page\r\n\t\t\ttitle={ labels?.name }\r\n\t\t\tactions={\r\n\t\t\t\tlabels?.add_new_item &&\r\n\t\t\t\tcanCreateRecord && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\t\tonClick={ openModal }\r\n\t\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{ labels.add_new_item }\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t{ showAddPostModal && (\r\n\t\t\t\t\t\t\t<AddNewPostModal\r\n\t\t\t\t\t\t\t\tpostType={ postType }\r\n\t\t\t\t\t\t\t\tonSave={ handleNewPage }\r\n\t\t\t\t\t\t\t\tonClose={ closeModal }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t</>\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t<DataViews\r\n\t\t\t\tkey={ activeView + isCustom }\r\n\t\t\t\tpaginationInfo={ paginationInfo }\r\n\t\t\t\tfields={ fields }\r\n\t\t\t\tactions={ actions }\r\n\t\t\t\tdata={ data || EMPTY_ARRAY }\r\n\t\t\t\tisLoading={ isLoadingData || isLoadingFields }\r\n\t\t\t\tview={ view }\r\n\t\t\t\tonChangeView={ setView }\r\n\t\t\t\tselection={ selection }\r\n\t\t\t\tonChangeSelection={ onChangeSelection }\r\n\t\t\t\tgetItemId={ getItemId }\r\n\t\t\t\tdefaultLayouts={ defaultLayouts }\r\n\t\t\t\theader={\r\n\t\t\t\t\twindow.__experimentalQuickEditDataViews &&\r\n\t\t\t\t\tview.type !== LAYOUT_LIST &&\r\n\t\t\t\t\tpostType === 'page' && (\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tsize=\"compact\"\r\n\t\t\t\t\t\t\tisPressed={ quickEdit }\r\n\t\t\t\t\t\t\ticon={ drawerRight }\r\n\t\t\t\t\t\t\tlabel={ __( 'Toggle details panel' ) }\r\n\t\t\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\t\t\thistory.push( {\r\n\t\t\t\t\t\t\t\t\t...location.params,\r\n\t\t\t\t\t\t\t\t\tquickEdit: quickEdit ? undefined : true,\r\n\t\t\t\t\t\t\t\t} );\r\n\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\t\t</Page>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}