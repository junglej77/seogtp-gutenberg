{"version":3,"names":["Disabled","__","BlockList","privateApis","blockEditorPrivateApis","store","blockEditorStore","__unstableEditorStyles","EditorStyles","__unstableIframe","Iframe","editorPrivateApis","useSelect","useContext","useMemo","unlock","EditorCanvasContainer","jsx","_jsx","jsxs","_jsxs","ExperimentalBlockEditorProvider","GlobalStylesContext","useGlobalStylesOutputWithConfig","__unstableBlockStyleVariationOverridesWithConfig","mergeBaseAndUserConfigs","isObjectEmpty","object","Object","keys","length","Revisions","userConfig","blocks","base","baseConfig","mergedConfig","renderedBlocksArray","Array","isArray","originalSettings","select","getSettings","settings","__unstableIsPreviewMode","globalStyles","editorStyles","styles","title","closeButtonLabel","enableResizing","children","className","name","tabIndex","value","renderAppender","config"],"sources":["@wordpress/edit-site/src/components/revisions/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { Disabled } from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\nimport {\r\n\tBlockList,\r\n\tprivateApis as blockEditorPrivateApis,\r\n\tstore as blockEditorStore,\r\n\t__unstableEditorStyles as EditorStyles,\r\n\t__unstableIframe as Iframe,\r\n} from '@wordpress/block-editor';\r\nimport { privateApis as editorPrivateApis } from '@wordpress/editor';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { useContext, useMemo } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\n\r\nimport { unlock } from '../../lock-unlock';\r\nimport EditorCanvasContainer from '../editor-canvas-container';\r\n\r\nconst {\r\n\tExperimentalBlockEditorProvider,\r\n\tGlobalStylesContext,\r\n\tuseGlobalStylesOutputWithConfig,\r\n\t__unstableBlockStyleVariationOverridesWithConfig,\r\n} = unlock( blockEditorPrivateApis );\r\nconst { mergeBaseAndUserConfigs } = unlock( editorPrivateApis );\r\n\r\nfunction isObjectEmpty( object ) {\r\n\treturn ! object || Object.keys( object ).length === 0;\r\n}\r\n\r\nfunction Revisions( { userConfig, blocks } ) {\r\n\tconst { base: baseConfig } = useContext( GlobalStylesContext );\r\n\r\n\tconst mergedConfig = useMemo( () => {\r\n\t\tif ( ! isObjectEmpty( userConfig ) && ! isObjectEmpty( baseConfig ) ) {\r\n\t\t\treturn mergeBaseAndUserConfigs( baseConfig, userConfig );\r\n\t\t}\r\n\t\treturn {};\r\n\t}, [ baseConfig, userConfig ] );\r\n\r\n\tconst renderedBlocksArray = useMemo(\r\n\t\t() => ( Array.isArray( blocks ) ? blocks : [ blocks ] ),\r\n\t\t[ blocks ]\r\n\t);\r\n\r\n\tconst originalSettings = useSelect(\r\n\t\t( select ) => select( blockEditorStore ).getSettings(),\r\n\t\t[]\r\n\t);\r\n\tconst settings = useMemo(\r\n\t\t() => ( { ...originalSettings, __unstableIsPreviewMode: true } ),\r\n\t\t[ originalSettings ]\r\n\t);\r\n\r\n\tconst [ globalStyles ] = useGlobalStylesOutputWithConfig( mergedConfig );\r\n\r\n\tconst editorStyles =\r\n\t\t! isObjectEmpty( globalStyles ) && ! isObjectEmpty( userConfig )\r\n\t\t\t? globalStyles\r\n\t\t\t: settings.styles;\r\n\r\n\treturn (\r\n\t\t<EditorCanvasContainer\r\n\t\t\ttitle={ __( 'Revisions' ) }\r\n\t\t\tcloseButtonLabel={ __( 'Close revisions' ) }\r\n\t\t\tenableResizing\r\n\t\t>\r\n\t\t\t<Iframe\r\n\t\t\t\tclassName=\"edit-site-revisions__iframe\"\r\n\t\t\t\tname=\"revisions\"\r\n\t\t\t\ttabIndex={ 0 }\r\n\t\t\t>\r\n\t\t\t\t<style>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// Forming a \"block formatting context\" to prevent margin collapsing.\r\n\t\t\t\t\t\t// @see https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Block_formatting_context\r\n\t\t\t\t\t\t`.is-root-container { display: flow-root; }`\r\n\t\t\t\t\t}\r\n\t\t\t\t</style>\r\n\t\t\t\t<Disabled className=\"edit-site-revisions__example-preview__content\">\r\n\t\t\t\t\t<ExperimentalBlockEditorProvider\r\n\t\t\t\t\t\tvalue={ renderedBlocksArray }\r\n\t\t\t\t\t\tsettings={ settings }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<BlockList renderAppender={ false } />\r\n\t\t\t\t\t\t{ /*\r\n\t\t\t\t\t\t * Styles are printed inside the block editor provider,\r\n\t\t\t\t\t\t * so they can access any registered style overrides.\r\n\t\t\t\t\t\t */ }\r\n\t\t\t\t\t\t<EditorStyles styles={ editorStyles } />\r\n\t\t\t\t\t\t<__unstableBlockStyleVariationOverridesWithConfig\r\n\t\t\t\t\t\t\tconfig={ mergedConfig }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</ExperimentalBlockEditorProvider>\r\n\t\t\t\t</Disabled>\r\n\t\t\t</Iframe>\r\n\t\t</EditorCanvasContainer>\r\n\t);\r\n}\r\n\r\nexport default Revisions;\r\n"],"mappings":"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","ignoreList":[]}