{"version":3,"names":["useEffect","useRef","useSelect","store","coreStore","__","sprintf","speak","decodeEntities","privateApis","routerPrivateApis","unlock","useLocation","useTitle","title","location","siteTitle","select","getEntityRecord","isInitialLocationRef","current","formattedTitle","document"],"sources":["@wordpress/edit-site/src/components/routes/use-title.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useEffect, useRef } from '@wordpress/element';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { store as coreStore } from '@wordpress/core-data';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { speak } from '@wordpress/a11y';\r\nimport { decodeEntities } from '@wordpress/html-entities';\r\nimport { privateApis as routerPrivateApis } from '@wordpress/router';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { unlock } from '../../lock-unlock';\r\n\r\nconst { useLocation } = unlock( routerPrivateApis );\r\n\r\nexport default function useTitle( title ) {\r\n\tconst location = useLocation();\r\n\tconst siteTitle = useSelect(\r\n\t\t( select ) =>\r\n\t\t\tselect( coreStore ).getEntityRecord( 'root', 'site' )?.title,\r\n\t\t[]\r\n\t);\r\n\tconst isInitialLocationRef = useRef( true );\r\n\r\n\tuseEffect( () => {\r\n\t\tisInitialLocationRef.current = false;\r\n\t}, [ location ] );\r\n\r\n\tuseEffect( () => {\r\n\t\t// Don't update or announce the title for initial page load.\r\n\t\tif ( isInitialLocationRef.current ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( title && siteTitle ) {\r\n\t\t\t// @see https://github.com/WordPress/wordpress-develop/blob/94849898192d271d533e09756007e176feb80697/src/wp-admin/admin-header.php#L67-L68\r\n\t\t\tconst formattedTitle = sprintf(\r\n\t\t\t\t/* translators: Admin document title. 1: Admin screen name, 2: Network or site name. */\r\n\t\t\t\t__( '%1$s ‹ %2$s ‹ Editor — WordPress' ),\r\n\t\t\t\tdecodeEntities( title ),\r\n\t\t\t\tdecodeEntities( siteTitle )\r\n\t\t\t);\r\n\r\n\t\t\tdocument.title = formattedTitle;\r\n\r\n\t\t\t// Announce title on route change for screen readers.\r\n\t\t\tspeak( title, 'assertive' );\r\n\t\t}\r\n\t}, [ title, siteTitle, location ] );\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,SAAS,EAAEC,MAAM,QAAQ,oBAAoB;AACtD,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,KAAK,IAAIC,SAAS,QAAQ,sBAAsB;AACzD,SAASC,EAAE,EAAEC,OAAO,QAAQ,iBAAiB;AAC7C,SAASC,KAAK,QAAQ,iBAAiB;AACvC,SAASC,cAAc,QAAQ,0BAA0B;AACzD,SAASC,WAAW,IAAIC,iBAAiB,QAAQ,mBAAmB;;AAEpE;AACA;AACA;AACA,SAASC,MAAM,QAAQ,mBAAmB;AAE1C,MAAM;EAAEC;AAAY,CAAC,GAAGD,MAAM,CAAED,iBAAkB,CAAC;AAEnD,eAAe,SAASG,QAAQA,CAAEC,KAAK,EAAG;EACzC,MAAMC,QAAQ,GAAGH,WAAW,CAAC,CAAC;EAC9B,MAAMI,SAAS,GAAGd,SAAS,CACxBe,MAAM,IACPA,MAAM,CAAEb,SAAU,CAAC,CAACc,eAAe,CAAE,MAAM,EAAE,MAAO,CAAC,EAAEJ,KAAK,EAC7D,EACD,CAAC;EACD,MAAMK,oBAAoB,GAAGlB,MAAM,CAAE,IAAK,CAAC;EAE3CD,SAAS,CAAE,MAAM;IAChBmB,oBAAoB,CAACC,OAAO,GAAG,KAAK;EACrC,CAAC,EAAE,CAAEL,QAAQ,CAAG,CAAC;EAEjBf,SAAS,CAAE,MAAM;IAChB;IACA,IAAKmB,oBAAoB,CAACC,OAAO,EAAG;MACnC;IACD;IAEA,IAAKN,KAAK,IAAIE,SAAS,EAAG;MACzB;MACA,MAAMK,cAAc,GAAGf,OAAO,EAC7B;MACAD,EAAE,CAAE,kCAAmC,CAAC,EACxCG,cAAc,CAAEM,KAAM,CAAC,EACvBN,cAAc,CAAEQ,SAAU,CAC3B,CAAC;MAEDM,QAAQ,CAACR,KAAK,GAAGO,cAAc;;MAE/B;MACAd,KAAK,CAAEO,KAAK,EAAE,WAAY,CAAC;IAC5B;EACD,CAAC,EAAE,CAAEA,KAAK,EAAEE,SAAS,EAAED,QAAQ,CAAG,CAAC;AACpC","ignoreList":[]}