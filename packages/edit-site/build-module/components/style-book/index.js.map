{"version":3,"names":["clsx","Disabled","Composite","privateApis","componentsPrivateApis","__","sprintf","getCategories","getBlockType","getBlockTypes","getBlockFromExample","createBlock","BlockList","blockEditorPrivateApis","store","blockEditorStore","__unstableEditorStyles","EditorStyles","__unstableIframe","Iframe","editorPrivateApis","useSelect","useResizeObserver","useMemo","useState","memo","useContext","ENTER","SPACE","unlock","EditorCanvasContainer","jsx","_jsx","jsxs","_jsxs","ExperimentalBlockEditorProvider","useGlobalStyle","GlobalStylesContext","useGlobalStylesOutputWithConfig","mergeBaseAndUserConfigs","Tabs","STYLE_BOOK_IFRAME_STYLES","isObjectEmpty","object","Object","keys","length","getExamples","nonHeadingBlockExamples","filter","blockType","name","example","supports","inserter","map","title","category","blocks","isHeadingBlockRegistered","headingsExample","level","content","StyleBook","enableResizing","isSelected","onClick","onSelect","showCloseButton","onClose","showTabs","userConfig","resizeObserver","sizes","textColor","backgroundColor","examples","tabs","some","slug","icon","base","baseConfig","mergedConfig","originalSettings","select","getSettings","settings","__unstableIsPreviewMode","globalStyles","styles","closeButtonLabel","children","className","width","style","color","background","TabList","tab","Tab","tabId","TabPanel","focusable","StyleBookBody","isFocused","setIsFocused","buttonModeProps","role","onFocus","onBlur","onKeyDown","event","defaultPrevented","keyCode","preventDefault","readonly","buttonModeStyles","tabIndex","Examples","label","orientation","Example","id","focusMode","renderedBlocks","Array","isArray","Item","render","value","renderAppender"],"sources":["@wordpress/edit-site/src/components/style-book/index.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tDisabled,\r\n\tComposite,\r\n\tprivateApis as componentsPrivateApis,\r\n} from '@wordpress/components';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport {\r\n\tgetCategories,\r\n\tgetBlockType,\r\n\tgetBlockTypes,\r\n\tgetBlockFromExample,\r\n\tcreateBlock,\r\n} from '@wordpress/blocks';\r\nimport {\r\n\tBlockList,\r\n\tprivateApis as blockEditorPrivateApis,\r\n\tstore as blockEditorStore,\r\n\t__unstableEditorStyles as EditorStyles,\r\n\t__unstableIframe as Iframe,\r\n} from '@wordpress/block-editor';\r\nimport { privateApis as editorPrivateApis } from '@wordpress/editor';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { useResizeObserver } from '@wordpress/compose';\r\nimport { useMemo, useState, memo, useContext } from '@wordpress/element';\r\nimport { ENTER, SPACE } from '@wordpress/keycodes';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { unlock } from '../../lock-unlock';\r\nimport EditorCanvasContainer from '../editor-canvas-container';\r\n\r\nconst {\r\n\tExperimentalBlockEditorProvider,\r\n\tuseGlobalStyle,\r\n\tGlobalStylesContext,\r\n\tuseGlobalStylesOutputWithConfig,\r\n} = unlock( blockEditorPrivateApis );\r\nconst { mergeBaseAndUserConfigs } = unlock( editorPrivateApis );\r\n\r\nconst { Tabs } = unlock( componentsPrivateApis );\r\n\r\n// The content area of the Style Book is rendered within an iframe so that global styles\r\n// are applied to elements within the entire content area. To support elements that are\r\n// not part of the block previews, such as headings and layout for the block previews,\r\n// additional CSS rules need to be passed into the iframe. These are hard-coded below.\r\n// Note that button styles are unset, and then focus rules from the `Button` component are\r\n// applied to the `button` element, targeted via `.edit-site-style-book__example`.\r\n// This is to ensure that browser default styles for buttons are not applied to the previews.\r\nconst STYLE_BOOK_IFRAME_STYLES = `\r\n\t.edit-site-style-book__examples {\r\n\t\tmax-width: 900px;\r\n\t\tmargin: 0 auto;\r\n\t}\r\n\r\n\t.edit-site-style-book__example {\r\n\t\tborder-radius: 2px;\r\n\t\tcursor: pointer;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 40px;\r\n\t\tmargin-bottom: 40px;\r\n\t\tpadding: 16px;\r\n\t\twidth: 100%;\r\n\t\tbox-sizing: border-box;\r\n\t\tscroll-margin-top: 32px;\r\n\t\tscroll-margin-bottom: 32px;\r\n\t}\r\n\r\n\t.edit-site-style-book__example.is-selected {\r\n\t\tbox-shadow: 0 0 0 1px var(--wp-components-color-accent, var(--wp-admin-theme-color, #007cba));\r\n\t}\r\n\r\n\t.edit-site-style-book__example:focus:not(:disabled) {\r\n\t\tbox-shadow: 0 0 0 var(--wp-admin-border-width-focus) var(--wp-components-color-accent, var(--wp-admin-theme-color, #007cba));\r\n\t\toutline: 3px solid transparent;\r\n\t}\r\n\r\n\t.edit-site-style-book__examples.is-wide .edit-site-style-book__example {\r\n\t\tflex-direction: row;\r\n\t}\r\n\r\n\t.edit-site-style-book__example-title {\r\n\t\tfont-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen-Sans, Ubuntu, Cantarell, \"Helvetica Neue\", sans-serif;\r\n\t\tfont-size: 11px;\r\n\t\tfont-weight: 500;\r\n\t\tline-height: normal;\r\n\t\tmargin: 0;\r\n\t\ttext-align: left;\r\n\t\ttext-transform: uppercase;\r\n\t}\r\n\r\n\t.edit-site-style-book__examples.is-wide .edit-site-style-book__example-title {\r\n\t\ttext-align: right;\r\n\t\twidth: 120px;\r\n\t}\r\n\r\n\t.edit-site-style-book__example-preview {\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.edit-site-style-book__example-preview .block-editor-block-list__insertion-point,\r\n\t.edit-site-style-book__example-preview .block-list-appender {\r\n\t\tdisplay: none;\r\n\t}\r\n\r\n\t.edit-site-style-book__example-preview .is-root-container > .wp-block:first-child {\r\n\t\tmargin-top: 0;\r\n\t}\r\n\t.edit-site-style-book__example-preview .is-root-container > .wp-block:last-child {\r\n\t\tmargin-bottom: 0;\r\n\t}\r\n`;\r\n\r\nfunction isObjectEmpty( object ) {\r\n\treturn ! object || Object.keys( object ).length === 0;\r\n}\r\n\r\nfunction getExamples() {\r\n\tconst nonHeadingBlockExamples = getBlockTypes()\r\n\t\t.filter( ( blockType ) => {\r\n\t\t\tconst { name, example, supports } = blockType;\r\n\t\t\treturn (\r\n\t\t\t\tname !== 'core/heading' &&\r\n\t\t\t\t!! example &&\r\n\t\t\t\tsupports.inserter !== false\r\n\t\t\t);\r\n\t\t} )\r\n\t\t.map( ( blockType ) => ( {\r\n\t\t\tname: blockType.name,\r\n\t\t\ttitle: blockType.title,\r\n\t\t\tcategory: blockType.category,\r\n\t\t\tblocks: getBlockFromExample( blockType.name, blockType.example ),\r\n\t\t} ) );\r\n\r\n\tconst isHeadingBlockRegistered = !! getBlockType( 'core/heading' );\r\n\r\n\tif ( ! isHeadingBlockRegistered ) {\r\n\t\treturn nonHeadingBlockExamples;\r\n\t}\r\n\r\n\t// Use our own example for the Heading block so that we can show multiple\r\n\t// heading levels.\r\n\tconst headingsExample = {\r\n\t\tname: 'core/heading',\r\n\t\ttitle: __( 'Headings' ),\r\n\t\tcategory: 'text',\r\n\t\tblocks: [ 1, 2, 3, 4, 5, 6 ].map( ( level ) => {\r\n\t\t\treturn createBlock( 'core/heading', {\r\n\t\t\t\tcontent: sprintf(\r\n\t\t\t\t\t// translators: %d: heading level e.g: \"1\", \"2\", \"3\"\r\n\t\t\t\t\t__( 'Heading %d' ),\r\n\t\t\t\t\tlevel\r\n\t\t\t\t),\r\n\t\t\t\tlevel,\r\n\t\t\t} );\r\n\t\t} ),\r\n\t};\r\n\r\n\treturn [ headingsExample, ...nonHeadingBlockExamples ];\r\n}\r\n\r\nfunction StyleBook( {\r\n\tenableResizing = true,\r\n\tisSelected,\r\n\tonClick,\r\n\tonSelect,\r\n\tshowCloseButton = true,\r\n\tonClose,\r\n\tshowTabs = true,\r\n\tuserConfig = {},\r\n} ) {\r\n\tconst [ resizeObserver, sizes ] = useResizeObserver();\r\n\tconst [ textColor ] = useGlobalStyle( 'color.text' );\r\n\tconst [ backgroundColor ] = useGlobalStyle( 'color.background' );\r\n\tconst [ examples ] = useState( getExamples );\r\n\tconst tabs = useMemo(\r\n\t\t() =>\r\n\t\t\tgetCategories()\r\n\t\t\t\t.filter( ( category ) =>\r\n\t\t\t\t\texamples.some(\r\n\t\t\t\t\t\t( example ) => example.category === category.slug\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t\t.map( ( category ) => ( {\r\n\t\t\t\t\tname: category.slug,\r\n\t\t\t\t\ttitle: category.title,\r\n\t\t\t\t\ticon: category.icon,\r\n\t\t\t\t} ) ),\r\n\t\t[ examples ]\r\n\t);\r\n\tconst { base: baseConfig } = useContext( GlobalStylesContext );\r\n\r\n\tconst mergedConfig = useMemo( () => {\r\n\t\tif ( ! isObjectEmpty( userConfig ) && ! isObjectEmpty( baseConfig ) ) {\r\n\t\t\treturn mergeBaseAndUserConfigs( baseConfig, userConfig );\r\n\t\t}\r\n\t\treturn {};\r\n\t}, [ baseConfig, userConfig ] );\r\n\r\n\t// Copied from packages/edit-site/src/components/revisions/index.js\r\n\t// could we create a shared hook?\r\n\tconst originalSettings = useSelect(\r\n\t\t( select ) => select( blockEditorStore ).getSettings(),\r\n\t\t[]\r\n\t);\r\n\r\n\tconst settings = useMemo(\r\n\t\t() => ( { ...originalSettings, __unstableIsPreviewMode: true } ),\r\n\t\t[ originalSettings ]\r\n\t);\r\n\r\n\tconst [ globalStyles ] = useGlobalStylesOutputWithConfig( mergedConfig );\r\n\r\n\tsettings.styles =\r\n\t\t! isObjectEmpty( globalStyles ) && ! isObjectEmpty( userConfig )\r\n\t\t\t? globalStyles\r\n\t\t\t: settings.styles;\r\n\r\n\treturn (\r\n\t\t<EditorCanvasContainer\r\n\t\t\tonClose={ onClose }\r\n\t\t\tenableResizing={ enableResizing }\r\n\t\t\tcloseButtonLabel={ showCloseButton ? __( 'Close' ) : null }\r\n\t\t>\r\n\t\t\t<div\r\n\t\t\t\tclassName={ clsx( 'edit-site-style-book', {\r\n\t\t\t\t\t'is-wide': sizes.width > 600,\r\n\t\t\t\t\t'is-button': !! onClick,\r\n\t\t\t\t} ) }\r\n\t\t\t\tstyle={ {\r\n\t\t\t\t\tcolor: textColor,\r\n\t\t\t\t\tbackground: backgroundColor,\r\n\t\t\t\t} }\r\n\t\t\t>\r\n\t\t\t\t{ resizeObserver }\r\n\t\t\t\t{ showTabs ? (\r\n\t\t\t\t\t<div className=\"edit-site-style-book__tabs\">\r\n\t\t\t\t\t\t<Tabs>\r\n\t\t\t\t\t\t\t<Tabs.TabList>\r\n\t\t\t\t\t\t\t\t{ tabs.map( ( tab ) => (\r\n\t\t\t\t\t\t\t\t\t<Tabs.Tab\r\n\t\t\t\t\t\t\t\t\t\ttabId={ tab.name }\r\n\t\t\t\t\t\t\t\t\t\tkey={ tab.name }\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{ tab.title }\r\n\t\t\t\t\t\t\t\t\t</Tabs.Tab>\r\n\t\t\t\t\t\t\t\t) ) }\r\n\t\t\t\t\t\t\t</Tabs.TabList>\r\n\t\t\t\t\t\t\t{ tabs.map( ( tab ) => (\r\n\t\t\t\t\t\t\t\t<Tabs.TabPanel\r\n\t\t\t\t\t\t\t\t\tkey={ tab.name }\r\n\t\t\t\t\t\t\t\t\ttabId={ tab.name }\r\n\t\t\t\t\t\t\t\t\tfocusable={ false }\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<StyleBookBody\r\n\t\t\t\t\t\t\t\t\t\tcategory={ tab.name }\r\n\t\t\t\t\t\t\t\t\t\texamples={ examples }\r\n\t\t\t\t\t\t\t\t\t\tisSelected={ isSelected }\r\n\t\t\t\t\t\t\t\t\t\tonSelect={ onSelect }\r\n\t\t\t\t\t\t\t\t\t\tsettings={ settings }\r\n\t\t\t\t\t\t\t\t\t\tsizes={ sizes }\r\n\t\t\t\t\t\t\t\t\t\ttitle={ tab.title }\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Tabs.TabPanel>\r\n\t\t\t\t\t\t\t) ) }\r\n\t\t\t\t\t\t</Tabs>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<StyleBookBody\r\n\t\t\t\t\t\texamples={ examples }\r\n\t\t\t\t\t\tisSelected={ isSelected }\r\n\t\t\t\t\t\tonClick={ onClick }\r\n\t\t\t\t\t\tonSelect={ onSelect }\r\n\t\t\t\t\t\tsettings={ settings }\r\n\t\t\t\t\t\tsizes={ sizes }\r\n\t\t\t\t\t/>\r\n\t\t\t\t) }\r\n\t\t\t</div>\r\n\t\t</EditorCanvasContainer>\r\n\t);\r\n}\r\n\r\nconst StyleBookBody = ( {\r\n\tcategory,\r\n\texamples,\r\n\tisSelected,\r\n\tonClick,\r\n\tonSelect,\r\n\tsettings,\r\n\tsizes,\r\n\ttitle,\r\n} ) => {\r\n\tconst [ isFocused, setIsFocused ] = useState( false );\r\n\r\n\t// The presence of an `onClick` prop indicates that the Style Book is being used as a button.\r\n\t// In this case, add additional props to the iframe to make it behave like a button.\r\n\tconst buttonModeProps = {\r\n\t\trole: 'button',\r\n\t\tonFocus: () => setIsFocused( true ),\r\n\t\tonBlur: () => setIsFocused( false ),\r\n\t\tonKeyDown: ( event ) => {\r\n\t\t\tif ( event.defaultPrevented ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst { keyCode } = event;\r\n\t\t\tif ( onClick && ( keyCode === ENTER || keyCode === SPACE ) ) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tonClick( event );\r\n\t\t\t}\r\n\t\t},\r\n\t\tonClick: ( event ) => {\r\n\t\t\tif ( event.defaultPrevented ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif ( onClick ) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tonClick( event );\r\n\t\t\t}\r\n\t\t},\r\n\t\treadonly: true,\r\n\t};\r\n\r\n\tconst buttonModeStyles = onClick\r\n\t\t? 'body { cursor: pointer; } body * { pointer-events: none; }'\r\n\t\t: '';\r\n\r\n\treturn (\r\n\t\t<Iframe\r\n\t\t\tclassName={ clsx( 'edit-site-style-book__iframe', {\r\n\t\t\t\t'is-focused': isFocused && !! onClick,\r\n\t\t\t\t'is-button': !! onClick,\r\n\t\t\t} ) }\r\n\t\t\tname=\"style-book-canvas\"\r\n\t\t\ttabIndex={ 0 }\r\n\t\t\t{ ...( onClick ? buttonModeProps : {} ) }\r\n\t\t>\r\n\t\t\t<EditorStyles styles={ settings.styles } />\r\n\t\t\t<style>\r\n\t\t\t\t{\r\n\t\t\t\t\t// Forming a \"block formatting context\" to prevent margin collapsing.\r\n\t\t\t\t\t// @see https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Block_formatting_context\r\n\t\t\t\t\t`.is-root-container { display: flow-root; }\r\n\t\t\t\t\t\tbody { position: relative; padding: 32px !important; }` +\r\n\t\t\t\t\t\tSTYLE_BOOK_IFRAME_STYLES +\r\n\t\t\t\t\t\tbuttonModeStyles\r\n\t\t\t\t}\r\n\t\t\t</style>\r\n\t\t\t<Examples\r\n\t\t\t\tclassName={ clsx( 'edit-site-style-book__examples', {\r\n\t\t\t\t\t'is-wide': sizes.width > 600,\r\n\t\t\t\t} ) }\r\n\t\t\t\texamples={ examples }\r\n\t\t\t\tcategory={ category }\r\n\t\t\t\tlabel={\r\n\t\t\t\t\ttitle\r\n\t\t\t\t\t\t? sprintf(\r\n\t\t\t\t\t\t\t\t// translators: %s: Category of blocks, e.g. Text.\r\n\t\t\t\t\t\t\t\t__( 'Examples of blocks in the %s category' ),\r\n\t\t\t\t\t\t\t\ttitle\r\n\t\t\t\t\t\t  )\r\n\t\t\t\t\t\t: __( 'Examples of blocks' )\r\n\t\t\t\t}\r\n\t\t\t\tisSelected={ isSelected }\r\n\t\t\t\tonSelect={ onSelect }\r\n\t\t\t\tkey={ category }\r\n\t\t\t/>\r\n\t\t</Iframe>\r\n\t);\r\n};\r\n\r\nconst Examples = memo(\r\n\t( { className, examples, category, label, isSelected, onSelect } ) => {\r\n\t\treturn (\r\n\t\t\t<Composite\r\n\t\t\t\torientation=\"vertical\"\r\n\t\t\t\tclassName={ className }\r\n\t\t\t\taria-label={ label }\r\n\t\t\t\trole=\"grid\"\r\n\t\t\t>\r\n\t\t\t\t{ examples\r\n\t\t\t\t\t.filter( ( example ) =>\r\n\t\t\t\t\t\tcategory ? example.category === category : true\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.map( ( example ) => (\r\n\t\t\t\t\t\t<Example\r\n\t\t\t\t\t\t\tkey={ example.name }\r\n\t\t\t\t\t\t\tid={ `example-${ example.name }` }\r\n\t\t\t\t\t\t\ttitle={ example.title }\r\n\t\t\t\t\t\t\tblocks={ example.blocks }\r\n\t\t\t\t\t\t\tisSelected={ isSelected( example.name ) }\r\n\t\t\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\t\t\tonSelect?.( example.name );\r\n\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) ) }\r\n\t\t\t</Composite>\r\n\t\t);\r\n\t}\r\n);\r\n\r\nconst Example = ( { id, title, blocks, isSelected, onClick } ) => {\r\n\tconst originalSettings = useSelect(\r\n\t\t( select ) => select( blockEditorStore ).getSettings(),\r\n\t\t[]\r\n\t);\r\n\tconst settings = useMemo(\r\n\t\t() => ( {\r\n\t\t\t...originalSettings,\r\n\t\t\tfocusMode: false, // Disable \"Spotlight mode\".\r\n\t\t\t__unstableIsPreviewMode: true,\r\n\t\t} ),\r\n\t\t[ originalSettings ]\r\n\t);\r\n\r\n\t// Cache the list of blocks to avoid additional processing when the component is re-rendered.\r\n\tconst renderedBlocks = useMemo(\r\n\t\t() => ( Array.isArray( blocks ) ? blocks : [ blocks ] ),\r\n\t\t[ blocks ]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div role=\"row\">\r\n\t\t\t<div role=\"gridcell\">\r\n\t\t\t\t<Composite.Item\r\n\t\t\t\t\tclassName={ clsx( 'edit-site-style-book__example', {\r\n\t\t\t\t\t\t'is-selected': isSelected,\r\n\t\t\t\t\t} ) }\r\n\t\t\t\t\tid={ id }\r\n\t\t\t\t\taria-label={ sprintf(\r\n\t\t\t\t\t\t// translators: %s: Title of a block, e.g. Heading.\r\n\t\t\t\t\t\t__( 'Open %s styles in Styles panel' ),\r\n\t\t\t\t\t\ttitle\r\n\t\t\t\t\t) }\r\n\t\t\t\t\trender={ <div /> }\r\n\t\t\t\t\trole=\"button\"\r\n\t\t\t\t\tonClick={ onClick }\r\n\t\t\t\t>\r\n\t\t\t\t\t<span className=\"edit-site-style-book__example-title\">\r\n\t\t\t\t\t\t{ title }\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"edit-site-style-book__example-preview\"\r\n\t\t\t\t\t\taria-hidden\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Disabled className=\"edit-site-style-book__example-preview__content\">\r\n\t\t\t\t\t\t\t<ExperimentalBlockEditorProvider\r\n\t\t\t\t\t\t\t\tvalue={ renderedBlocks }\r\n\t\t\t\t\t\t\t\tsettings={ settings }\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<BlockList renderAppender={ false } />\r\n\t\t\t\t\t\t\t</ExperimentalBlockEditorProvider>\r\n\t\t\t\t\t\t</Disabled>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Composite.Item>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default StyleBook;\r\n"],"mappings":"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","ignoreList":[]}