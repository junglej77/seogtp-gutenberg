{"version":3,"names":["useMemo","useDispatch","useSelect","__","isRTL","rotateLeft","rotateRight","backup","help","styles","external","brush","useCommandLoader","useCommand","privateApis","blockEditorPrivateApis","routerPrivateApis","store","preferencesStore","coreStore","unlock","editSiteStore","useGlobalStylesReset","useHistory","useLocation","useGlobalStylesOpenStylesCommands","openGeneralSidebar","setCanvasMode","params","getCanvasMode","history","isBlockBasedTheme","select","getCurrentTheme","is_block_theme","commands","name","label","callback","close","postId","push","path","canvas","icon","isLoading","useGlobalStylesToggleWelcomeGuideCommands","set","setTimeout","useGlobalStylesResetCommands","canReset","onReset","useGlobalStylesOpenCssCommands","setEditorCanvasContainerView","canEditCSS","getEntityRecord","__experimentalGetCurrentGlobalStylesId","globalStylesId","globalStyles","undefined","_links","useGlobalStylesOpenRevisionsCommands","hasRevisions","count","useCommonCommands","homeUrl","home","window","open","hook"],"sources":["@wordpress/edit-site/src/hooks/commands/use-common-commands.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useMemo } from '@wordpress/element';\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\nimport { __, isRTL } from '@wordpress/i18n';\r\nimport {\r\n\trotateLeft,\r\n\trotateRight,\r\n\tbackup,\r\n\thelp,\r\n\tstyles,\r\n\texternal,\r\n\tbrush,\r\n} from '@wordpress/icons';\r\nimport { useCommandLoader, useCommand } from '@wordpress/commands';\r\nimport { privateApis as blockEditorPrivateApis } from '@wordpress/block-editor';\r\nimport { privateApis as routerPrivateApis } from '@wordpress/router';\r\nimport { store as preferencesStore } from '@wordpress/preferences';\r\nimport { store as coreStore } from '@wordpress/core-data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { unlock } from '../../lock-unlock';\r\nimport { store as editSiteStore } from '../../store';\r\n\r\nconst { useGlobalStylesReset } = unlock( blockEditorPrivateApis );\r\nconst { useHistory, useLocation } = unlock( routerPrivateApis );\r\n\r\nfunction useGlobalStylesOpenStylesCommands() {\r\n\tconst { openGeneralSidebar, setCanvasMode } = unlock(\r\n\t\tuseDispatch( editSiteStore )\r\n\t);\r\n\tconst { params } = useLocation();\r\n\tconst { getCanvasMode } = unlock( useSelect( editSiteStore ) );\r\n\tconst history = useHistory();\r\n\r\n\tconst isBlockBasedTheme = useSelect( ( select ) => {\r\n\t\treturn select( coreStore ).getCurrentTheme().is_block_theme;\r\n\t}, [] );\r\n\r\n\tconst commands = useMemo( () => {\r\n\t\tif ( ! isBlockBasedTheme ) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\r\n\t\treturn [\r\n\t\t\t{\r\n\t\t\t\tname: 'core/edit-site/open-styles',\r\n\t\t\t\tlabel: __( 'Open styles' ),\r\n\t\t\t\tcallback: ( { close } ) => {\r\n\t\t\t\t\tclose();\r\n\t\t\t\t\tif ( ! params.postId ) {\r\n\t\t\t\t\t\thistory.push( {\r\n\t\t\t\t\t\t\tpath: '/wp_global_styles',\r\n\t\t\t\t\t\t\tcanvas: 'edit',\r\n\t\t\t\t\t\t} );\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( params.postId && getCanvasMode() !== 'edit' ) {\r\n\t\t\t\t\t\tsetCanvasMode( 'edit' );\r\n\t\t\t\t\t}\r\n\t\t\t\t\topenGeneralSidebar( 'edit-site/global-styles' );\r\n\t\t\t\t},\r\n\t\t\t\ticon: styles,\r\n\t\t\t},\r\n\t\t];\r\n\t}, [\r\n\t\thistory,\r\n\t\topenGeneralSidebar,\r\n\t\tsetCanvasMode,\r\n\t\tgetCanvasMode,\r\n\t\tisBlockBasedTheme,\r\n\t\tparams.postId,\r\n\t] );\r\n\r\n\treturn {\r\n\t\tisLoading: false,\r\n\t\tcommands,\r\n\t};\r\n}\r\n\r\nfunction useGlobalStylesToggleWelcomeGuideCommands() {\r\n\tconst { openGeneralSidebar, setCanvasMode } = unlock(\r\n\t\tuseDispatch( editSiteStore )\r\n\t);\r\n\tconst { params } = useLocation();\r\n\tconst { getCanvasMode } = unlock( useSelect( editSiteStore ) );\r\n\tconst { set } = useDispatch( preferencesStore );\r\n\r\n\tconst history = useHistory();\r\n\tconst isBlockBasedTheme = useSelect( ( select ) => {\r\n\t\treturn select( coreStore ).getCurrentTheme().is_block_theme;\r\n\t}, [] );\r\n\r\n\tconst commands = useMemo( () => {\r\n\t\tif ( ! isBlockBasedTheme ) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\r\n\t\treturn [\r\n\t\t\t{\r\n\t\t\t\tname: 'core/edit-site/toggle-styles-welcome-guide',\r\n\t\t\t\tlabel: __( 'Learn about styles' ),\r\n\t\t\t\tcallback: ( { close } ) => {\r\n\t\t\t\t\tclose();\r\n\t\t\t\t\tif ( ! params.postId ) {\r\n\t\t\t\t\t\thistory.push( {\r\n\t\t\t\t\t\t\tpath: '/wp_global_styles',\r\n\t\t\t\t\t\t\tcanvas: 'edit',\r\n\t\t\t\t\t\t} );\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( params.postId && getCanvasMode() !== 'edit' ) {\r\n\t\t\t\t\t\tsetCanvasMode( 'edit' );\r\n\t\t\t\t\t}\r\n\t\t\t\t\topenGeneralSidebar( 'edit-site/global-styles' );\r\n\t\t\t\t\tset( 'core/edit-site', 'welcomeGuideStyles', true );\r\n\t\t\t\t\t// sometimes there's a focus loss that happens after some time\r\n\t\t\t\t\t// that closes the modal, we need to force reopening it.\r\n\t\t\t\t\tsetTimeout( () => {\r\n\t\t\t\t\t\tset( 'core/edit-site', 'welcomeGuideStyles', true );\r\n\t\t\t\t\t}, 500 );\r\n\t\t\t\t},\r\n\t\t\t\ticon: help,\r\n\t\t\t},\r\n\t\t];\r\n\t}, [\r\n\t\thistory,\r\n\t\topenGeneralSidebar,\r\n\t\tsetCanvasMode,\r\n\t\tgetCanvasMode,\r\n\t\tisBlockBasedTheme,\r\n\t\tset,\r\n\t\tparams.postId,\r\n\t] );\r\n\r\n\treturn {\r\n\t\tisLoading: false,\r\n\t\tcommands,\r\n\t};\r\n}\r\n\r\nfunction useGlobalStylesResetCommands() {\r\n\tconst [ canReset, onReset ] = useGlobalStylesReset();\r\n\tconst commands = useMemo( () => {\r\n\t\tif ( ! canReset ) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\r\n\t\treturn [\r\n\t\t\t{\r\n\t\t\t\tname: 'core/edit-site/reset-global-styles',\r\n\t\t\t\tlabel: __( 'Reset styles' ),\r\n\t\t\t\ticon: isRTL() ? rotateRight : rotateLeft,\r\n\t\t\t\tcallback: ( { close } ) => {\r\n\t\t\t\t\tclose();\r\n\t\t\t\t\tonReset();\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t];\r\n\t}, [ canReset, onReset ] );\r\n\r\n\treturn {\r\n\t\tisLoading: false,\r\n\t\tcommands,\r\n\t};\r\n}\r\n\r\nfunction useGlobalStylesOpenCssCommands() {\r\n\tconst { openGeneralSidebar, setEditorCanvasContainerView, setCanvasMode } =\r\n\t\tunlock( useDispatch( editSiteStore ) );\r\n\tconst { params } = useLocation();\r\n\tconst history = useHistory();\r\n\tconst { canEditCSS } = useSelect( ( select ) => {\r\n\t\tconst { getEntityRecord, __experimentalGetCurrentGlobalStylesId } =\r\n\t\t\tselect( coreStore );\r\n\r\n\t\tconst globalStylesId = __experimentalGetCurrentGlobalStylesId();\r\n\t\tconst globalStyles = globalStylesId\r\n\t\t\t? getEntityRecord( 'root', 'globalStyles', globalStylesId )\r\n\t\t\t: undefined;\r\n\r\n\t\treturn {\r\n\t\t\tcanEditCSS: !! globalStyles?._links?.[ 'wp:action-edit-css' ],\r\n\t\t};\r\n\t}, [] );\r\n\tconst { getCanvasMode } = unlock( useSelect( editSiteStore ) );\r\n\r\n\tconst commands = useMemo( () => {\r\n\t\tif ( ! canEditCSS ) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\r\n\t\treturn [\r\n\t\t\t{\r\n\t\t\t\tname: 'core/edit-site/open-styles-css',\r\n\t\t\t\tlabel: __( 'Customize CSS' ),\r\n\t\t\t\ticon: brush,\r\n\t\t\t\tcallback: ( { close } ) => {\r\n\t\t\t\t\tclose();\r\n\t\t\t\t\tif ( ! params.postId ) {\r\n\t\t\t\t\t\thistory.push( {\r\n\t\t\t\t\t\t\tpath: '/wp_global_styles',\r\n\t\t\t\t\t\t\tcanvas: 'edit',\r\n\t\t\t\t\t\t} );\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( params.postId && getCanvasMode() !== 'edit' ) {\r\n\t\t\t\t\t\tsetCanvasMode( 'edit' );\r\n\t\t\t\t\t}\r\n\t\t\t\t\topenGeneralSidebar( 'edit-site/global-styles' );\r\n\t\t\t\t\tsetEditorCanvasContainerView( 'global-styles-css' );\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t];\r\n\t}, [\r\n\t\thistory,\r\n\t\topenGeneralSidebar,\r\n\t\tsetEditorCanvasContainerView,\r\n\t\tcanEditCSS,\r\n\t\tgetCanvasMode,\r\n\t\tsetCanvasMode,\r\n\t\tparams.postId,\r\n\t] );\r\n\treturn {\r\n\t\tisLoading: false,\r\n\t\tcommands,\r\n\t};\r\n}\r\n\r\nfunction useGlobalStylesOpenRevisionsCommands() {\r\n\tconst { openGeneralSidebar, setEditorCanvasContainerView, setCanvasMode } =\r\n\t\tunlock( useDispatch( editSiteStore ) );\r\n\tconst { getCanvasMode } = unlock( useSelect( editSiteStore ) );\r\n\tconst { params } = useLocation();\r\n\tconst history = useHistory();\r\n\tconst hasRevisions = useSelect( ( select ) => {\r\n\t\tconst { getEntityRecord, __experimentalGetCurrentGlobalStylesId } =\r\n\t\t\tselect( coreStore );\r\n\t\tconst globalStylesId = __experimentalGetCurrentGlobalStylesId();\r\n\t\tconst globalStyles = globalStylesId\r\n\t\t\t? getEntityRecord( 'root', 'globalStyles', globalStylesId )\r\n\t\t\t: undefined;\r\n\t\treturn !! globalStyles?._links?.[ 'version-history' ]?.[ 0 ]?.count;\r\n\t}, [] );\r\n\r\n\tconst commands = useMemo( () => {\r\n\t\tif ( ! hasRevisions ) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\r\n\t\treturn [\r\n\t\t\t{\r\n\t\t\t\tname: 'core/edit-site/open-global-styles-revisions',\r\n\t\t\t\tlabel: __( 'Style revisions' ),\r\n\t\t\t\ticon: backup,\r\n\t\t\t\tcallback: ( { close } ) => {\r\n\t\t\t\t\tclose();\r\n\t\t\t\t\tif ( ! params.postId ) {\r\n\t\t\t\t\t\thistory.push( {\r\n\t\t\t\t\t\t\tpath: '/wp_global_styles',\r\n\t\t\t\t\t\t\tcanvas: 'edit',\r\n\t\t\t\t\t\t} );\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( params.postId && getCanvasMode() !== 'edit' ) {\r\n\t\t\t\t\t\tsetCanvasMode( 'edit' );\r\n\t\t\t\t\t}\r\n\t\t\t\t\topenGeneralSidebar( 'edit-site/global-styles' );\r\n\t\t\t\t\tsetEditorCanvasContainerView( 'global-styles-revisions' );\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t];\r\n\t}, [\r\n\t\thasRevisions,\r\n\t\thistory,\r\n\t\topenGeneralSidebar,\r\n\t\tsetEditorCanvasContainerView,\r\n\t\tgetCanvasMode,\r\n\t\tsetCanvasMode,\r\n\t\tparams.postId,\r\n\t] );\r\n\r\n\treturn {\r\n\t\tisLoading: false,\r\n\t\tcommands,\r\n\t};\r\n}\r\n\r\nexport function useCommonCommands() {\r\n\tconst homeUrl = useSelect( ( select ) => {\r\n\t\t// Site index.\r\n\t\treturn select( coreStore ).getEntityRecord( 'root', '__unstableBase' )\r\n\t\t\t?.home;\r\n\t}, [] );\r\n\r\n\tuseCommand( {\r\n\t\tname: 'core/edit-site/view-site',\r\n\t\tlabel: __( 'View site' ),\r\n\t\tcallback: ( { close } ) => {\r\n\t\t\tclose();\r\n\t\t\twindow.open( homeUrl, '_blank' );\r\n\t\t},\r\n\t\ticon: external,\r\n\t} );\r\n\r\n\tuseCommandLoader( {\r\n\t\tname: 'core/edit-site/open-styles',\r\n\t\thook: useGlobalStylesOpenStylesCommands,\r\n\t} );\r\n\r\n\tuseCommandLoader( {\r\n\t\tname: 'core/edit-site/toggle-styles-welcome-guide',\r\n\t\thook: useGlobalStylesToggleWelcomeGuideCommands,\r\n\t} );\r\n\r\n\tuseCommandLoader( {\r\n\t\tname: 'core/edit-site/reset-global-styles',\r\n\t\thook: useGlobalStylesResetCommands,\r\n\t} );\r\n\r\n\tuseCommandLoader( {\r\n\t\tname: 'core/edit-site/open-styles-css',\r\n\t\thook: useGlobalStylesOpenCssCommands,\r\n\t} );\r\n\r\n\tuseCommandLoader( {\r\n\t\tname: 'core/edit-site/open-styles-revisions',\r\n\t\thook: useGlobalStylesOpenRevisionsCommands,\r\n\t} );\r\n}\r\n"],"mappings":"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","ignoreList":[]}