{"version":3,"names":["useSelect","privateApis","commandsPrivateApis","store","blockEditorStore","editSiteStore","unlock","useHasEditorCanvasContainer","useCommandContext","useSetCommandContext","hasBlockSelected","canvasMode","select","getCanvasMode","getBlockSelectionStart","hasEditorCanvasContainer","commandContext"],"sources":["@wordpress/edit-site/src/hooks/commands/use-set-command-context.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect } from '@wordpress/data';\r\nimport { privateApis as commandsPrivateApis } from '@wordpress/commands';\r\nimport { store as blockEditorStore } from '@wordpress/block-editor';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as editSiteStore } from '../../store';\r\nimport { unlock } from '../../lock-unlock';\r\nimport { useHasEditorCanvasContainer } from '../../components/editor-canvas-container';\r\n\r\nconst { useCommandContext } = unlock( commandsPrivateApis );\r\n\r\n/**\r\n * React hook used to set the correct command context based on the current state.\r\n */\r\nexport default function useSetCommandContext() {\r\n\tconst { hasBlockSelected, canvasMode } = useSelect( ( select ) => {\r\n\t\tconst { getCanvasMode } = unlock( select( editSiteStore ) );\r\n\t\tconst { getBlockSelectionStart } = select( blockEditorStore );\r\n\t\treturn {\r\n\t\t\tcanvasMode: getCanvasMode(),\r\n\t\t\thasBlockSelected: getBlockSelectionStart(),\r\n\t\t};\r\n\t}, [] );\r\n\r\n\tconst hasEditorCanvasContainer = useHasEditorCanvasContainer();\r\n\r\n\t// Sets the right context for the command palette\r\n\tlet commandContext = 'site-editor';\r\n\tif ( canvasMode === 'edit' ) {\r\n\t\tcommandContext = 'entity-edit';\r\n\t}\r\n\tif ( hasBlockSelected ) {\r\n\t\tcommandContext = 'block-selection-edit';\r\n\t}\r\n\tif ( hasEditorCanvasContainer ) {\r\n\t\t/*\r\n\t\t * The editor canvas overlay will likely be deprecated in the future, so for now we clear the command context\r\n\t\t * to remove the suggested commands that may not make sense with Style Book or Style Revisions open.\r\n\t\t * See https://github.com/WordPress/gutenberg/issues/62216.\r\n\t\t */\r\n\t\tcommandContext = '';\r\n\t}\r\n\tuseCommandContext( commandContext );\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,WAAW,IAAIC,mBAAmB,QAAQ,qBAAqB;AACxE,SAASC,KAAK,IAAIC,gBAAgB,QAAQ,yBAAyB;;AAEnE;AACA;AACA;AACA,SAASD,KAAK,IAAIE,aAAa,QAAQ,aAAa;AACpD,SAASC,MAAM,QAAQ,mBAAmB;AAC1C,SAASC,2BAA2B,QAAQ,0CAA0C;AAEtF,MAAM;EAAEC;AAAkB,CAAC,GAAGF,MAAM,CAAEJ,mBAAoB,CAAC;;AAE3D;AACA;AACA;AACA,eAAe,SAASO,oBAAoBA,CAAA,EAAG;EAC9C,MAAM;IAAEC,gBAAgB;IAAEC;EAAW,CAAC,GAAGX,SAAS,CAAIY,MAAM,IAAM;IACjE,MAAM;MAAEC;IAAc,CAAC,GAAGP,MAAM,CAAEM,MAAM,CAAEP,aAAc,CAAE,CAAC;IAC3D,MAAM;MAAES;IAAuB,CAAC,GAAGF,MAAM,CAAER,gBAAiB,CAAC;IAC7D,OAAO;MACNO,UAAU,EAAEE,aAAa,CAAC,CAAC;MAC3BH,gBAAgB,EAAEI,sBAAsB,CAAC;IAC1C,CAAC;EACF,CAAC,EAAE,EAAG,CAAC;EAEP,MAAMC,wBAAwB,GAAGR,2BAA2B,CAAC,CAAC;;EAE9D;EACA,IAAIS,cAAc,GAAG,aAAa;EAClC,IAAKL,UAAU,KAAK,MAAM,EAAG;IAC5BK,cAAc,GAAG,aAAa;EAC/B;EACA,IAAKN,gBAAgB,EAAG;IACvBM,cAAc,GAAG,sBAAsB;EACxC;EACA,IAAKD,wBAAwB,EAAG;IAC/B;AACF;AACA;AACA;AACA;IACEC,cAAc,GAAG,EAAE;EACpB;EACAR,iBAAiB,CAAEQ,cAAe,CAAC;AACpC","ignoreList":[]}