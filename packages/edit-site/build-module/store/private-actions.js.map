{"version":3,"names":["store","blockEditorStore","preferencesStore","editorStore","setCanvasMode","mode","registry","dispatch","isMediumOrBigger","window","matchMedia","matches","switchCanvasMode","batch","clearSelectedBlock","setDeviceType","__unstableSetEditorMode","isPublishSidebarOpened","select","type","isEditMode","closePublishSidebar","get","setIsListViewOpened","setIsInserterOpened","document","startViewTransition","documentElement","classList","add","transition","finished","finally","remove","setEditorCanvasContainerView","view"],"sources":["@wordpress/edit-site/src/store/private-actions.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { store as blockEditorStore } from '@wordpress/block-editor';\r\nimport { store as preferencesStore } from '@wordpress/preferences';\r\nimport { store as editorStore } from '@wordpress/editor';\r\n\r\n/**\r\n * Action that switches the canvas mode.\r\n *\r\n * @param {?string} mode Canvas mode.\r\n */\r\nexport const setCanvasMode =\r\n\t( mode ) =>\r\n\t( { registry, dispatch } ) => {\r\n\t\tconst isMediumOrBigger =\r\n\t\t\twindow.matchMedia( '(min-width: 782px)' ).matches;\r\n\t\tconst switchCanvasMode = () => {\r\n\t\t\tregistry.batch( () => {\r\n\t\t\t\tregistry.dispatch( blockEditorStore ).clearSelectedBlock();\r\n\t\t\t\tregistry.dispatch( editorStore ).setDeviceType( 'Desktop' );\r\n\t\t\t\tregistry\r\n\t\t\t\t\t.dispatch( blockEditorStore )\r\n\t\t\t\t\t.__unstableSetEditorMode( 'edit' );\r\n\t\t\t\tconst isPublishSidebarOpened = registry\r\n\t\t\t\t\t.select( editorStore )\r\n\t\t\t\t\t.isPublishSidebarOpened();\r\n\t\t\t\tdispatch( {\r\n\t\t\t\t\ttype: 'SET_CANVAS_MODE',\r\n\t\t\t\t\tmode,\r\n\t\t\t\t} );\r\n\t\t\t\tconst isEditMode = mode === 'edit';\r\n\t\t\t\tif ( isPublishSidebarOpened && ! isEditMode ) {\r\n\t\t\t\t\tregistry.dispatch( editorStore ).closePublishSidebar();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Check if the block list view should be open by default.\r\n\t\t\t\t// If `distractionFree` mode is enabled, the block list view should not be open.\r\n\t\t\t\t// This behavior is disabled for small viewports.\r\n\t\t\t\tif (\r\n\t\t\t\t\tisMediumOrBigger &&\r\n\t\t\t\t\tisEditMode &&\r\n\t\t\t\t\tregistry\r\n\t\t\t\t\t\t.select( preferencesStore )\r\n\t\t\t\t\t\t.get( 'core', 'showListViewByDefault' ) &&\r\n\t\t\t\t\t! registry\r\n\t\t\t\t\t\t.select( preferencesStore )\r\n\t\t\t\t\t\t.get( 'core', 'distractionFree' )\r\n\t\t\t\t) {\r\n\t\t\t\t\tregistry\r\n\t\t\t\t\t\t.dispatch( editorStore )\r\n\t\t\t\t\t\t.setIsListViewOpened( true );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tregistry\r\n\t\t\t\t\t\t.dispatch( editorStore )\r\n\t\t\t\t\t\t.setIsListViewOpened( false );\r\n\t\t\t\t}\r\n\t\t\t\tregistry.dispatch( editorStore ).setIsInserterOpened( false );\r\n\t\t\t} );\r\n\t\t};\r\n\r\n\t\t/*\r\n\t\t * Skip transition in mobile, otherwise it crashes the browser.\r\n\t\t * See: https://github.com/WordPress/gutenberg/pull/63002.\r\n\t\t */\r\n\t\tif ( ! isMediumOrBigger || ! document.startViewTransition ) {\r\n\t\t\tswitchCanvasMode();\r\n\t\t} else {\r\n\t\t\tdocument.documentElement.classList.add(\r\n\t\t\t\t`canvas-mode-${ mode }-transition`\r\n\t\t\t);\r\n\t\t\tconst transition = document.startViewTransition( () =>\r\n\t\t\t\tswitchCanvasMode()\r\n\t\t\t);\r\n\t\t\ttransition.finished.finally( () => {\r\n\t\t\t\tdocument.documentElement.classList.remove(\r\n\t\t\t\t\t`canvas-mode-${ mode }-transition`\r\n\t\t\t\t);\r\n\t\t\t} );\r\n\t\t}\r\n\t};\r\n\r\n/**\r\n * Action that switches the editor canvas container view.\r\n *\r\n * @param {?string} view Editor canvas container view.\r\n */\r\nexport const setEditorCanvasContainerView =\r\n\t( view ) =>\r\n\t( { dispatch } ) => {\r\n\t\tdispatch( {\r\n\t\t\ttype: 'SET_EDITOR_CANVAS_CONTAINER_VIEW',\r\n\t\t\tview,\r\n\t\t} );\r\n\t};\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,KAAK,IAAIC,gBAAgB,QAAQ,yBAAyB;AACnE,SAASD,KAAK,IAAIE,gBAAgB,QAAQ,wBAAwB;AAClE,SAASF,KAAK,IAAIG,WAAW,QAAQ,mBAAmB;;AAExD;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,aAAa,GACvBC,IAAI,IACN,CAAE;EAAEC,QAAQ;EAAEC;AAAS,CAAC,KAAM;EAC7B,MAAMC,gBAAgB,GACrBC,MAAM,CAACC,UAAU,CAAE,oBAAqB,CAAC,CAACC,OAAO;EAClD,MAAMC,gBAAgB,GAAGA,CAAA,KAAM;IAC9BN,QAAQ,CAACO,KAAK,CAAE,MAAM;MACrBP,QAAQ,CAACC,QAAQ,CAAEN,gBAAiB,CAAC,CAACa,kBAAkB,CAAC,CAAC;MAC1DR,QAAQ,CAACC,QAAQ,CAAEJ,WAAY,CAAC,CAACY,aAAa,CAAE,SAAU,CAAC;MAC3DT,QAAQ,CACNC,QAAQ,CAAEN,gBAAiB,CAAC,CAC5Be,uBAAuB,CAAE,MAAO,CAAC;MACnC,MAAMC,sBAAsB,GAAGX,QAAQ,CACrCY,MAAM,CAAEf,WAAY,CAAC,CACrBc,sBAAsB,CAAC,CAAC;MAC1BV,QAAQ,CAAE;QACTY,IAAI,EAAE,iBAAiB;QACvBd;MACD,CAAE,CAAC;MACH,MAAMe,UAAU,GAAGf,IAAI,KAAK,MAAM;MAClC,IAAKY,sBAAsB,IAAI,CAAEG,UAAU,EAAG;QAC7Cd,QAAQ,CAACC,QAAQ,CAAEJ,WAAY,CAAC,CAACkB,mBAAmB,CAAC,CAAC;MACvD;;MAEA;MACA;MACA;MACA,IACCb,gBAAgB,IAChBY,UAAU,IACVd,QAAQ,CACNY,MAAM,CAAEhB,gBAAiB,CAAC,CAC1BoB,GAAG,CAAE,MAAM,EAAE,uBAAwB,CAAC,IACxC,CAAEhB,QAAQ,CACRY,MAAM,CAAEhB,gBAAiB,CAAC,CAC1BoB,GAAG,CAAE,MAAM,EAAE,iBAAkB,CAAC,EACjC;QACDhB,QAAQ,CACNC,QAAQ,CAAEJ,WAAY,CAAC,CACvBoB,mBAAmB,CAAE,IAAK,CAAC;MAC9B,CAAC,MAAM;QACNjB,QAAQ,CACNC,QAAQ,CAAEJ,WAAY,CAAC,CACvBoB,mBAAmB,CAAE,KAAM,CAAC;MAC/B;MACAjB,QAAQ,CAACC,QAAQ,CAAEJ,WAAY,CAAC,CAACqB,mBAAmB,CAAE,KAAM,CAAC;IAC9D,CAAE,CAAC;EACJ,CAAC;;EAED;AACF;AACA;AACA;EACE,IAAK,CAAEhB,gBAAgB,IAAI,CAAEiB,QAAQ,CAACC,mBAAmB,EAAG;IAC3Dd,gBAAgB,CAAC,CAAC;EACnB,CAAC,MAAM;IACNa,QAAQ,CAACE,eAAe,CAACC,SAAS,CAACC,GAAG,CACpC,eAAexB,IAAM,aACvB,CAAC;IACD,MAAMyB,UAAU,GAAGL,QAAQ,CAACC,mBAAmB,CAAE,MAChDd,gBAAgB,CAAC,CAClB,CAAC;IACDkB,UAAU,CAACC,QAAQ,CAACC,OAAO,CAAE,MAAM;MAClCP,QAAQ,CAACE,eAAe,CAACC,SAAS,CAACK,MAAM,CACvC,eAAe5B,IAAM,aACvB,CAAC;IACF,CAAE,CAAC;EACJ;AACD,CAAC;;AAEF;AACA;AACA;AACA;AACA;AACA,OAAO,MAAM6B,4BAA4B,GACtCC,IAAI,IACN,CAAE;EAAE5B;AAAS,CAAC,KAAM;EACnBA,QAAQ,CAAE;IACTY,IAAI,EAAE,kCAAkC;IACxCgB;EACD,CAAE,CAAC;AACJ,CAAC","ignoreList":[]}