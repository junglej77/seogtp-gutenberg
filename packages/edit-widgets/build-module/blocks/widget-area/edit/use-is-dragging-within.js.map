{"version":3,"names":["useState","useEffect","useIsDraggingWithin","elementRef","isDraggingWithin","setIsDraggingWithin","ownerDocument","current","handleDragStart","event","handleDragEnter","handleDragEnd","contains","target","addEventListener","removeEventListener"],"sources":["@wordpress/edit-widgets/src/blocks/widget-area/edit/use-is-dragging-within.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useState, useEffect } from '@wordpress/element';\r\n\r\n/** @typedef {import('@wordpress/element').RefObject} RefObject */\r\n\r\n/**\r\n * A React hook to determine if it's dragging within the target element.\r\n *\r\n * @param {RefObject<HTMLElement>} elementRef The target elementRef object.\r\n *\r\n * @return {boolean} Is dragging within the target element.\r\n */\r\nconst useIsDraggingWithin = ( elementRef ) => {\r\n\tconst [ isDraggingWithin, setIsDraggingWithin ] = useState( false );\r\n\r\n\tuseEffect( () => {\r\n\t\tconst { ownerDocument } = elementRef.current;\r\n\r\n\t\tfunction handleDragStart( event ) {\r\n\t\t\t// Check the first time when the dragging starts.\r\n\t\t\thandleDragEnter( event );\r\n\t\t}\r\n\r\n\t\t// Set to false whenever the user cancel the drag event by either releasing the mouse or press Escape.\r\n\t\tfunction handleDragEnd() {\r\n\t\t\tsetIsDraggingWithin( false );\r\n\t\t}\r\n\r\n\t\tfunction handleDragEnter( event ) {\r\n\t\t\t// Check if the current target is inside the item element.\r\n\t\t\tif ( elementRef.current.contains( event.target ) ) {\r\n\t\t\t\tsetIsDraggingWithin( true );\r\n\t\t\t} else {\r\n\t\t\t\tsetIsDraggingWithin( false );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Bind these events to the document to catch all drag events.\r\n\t\t// Ideally, we can also use `event.relatedTarget`, but sadly that doesn't work in Safari.\r\n\t\townerDocument.addEventListener( 'dragstart', handleDragStart );\r\n\t\townerDocument.addEventListener( 'dragend', handleDragEnd );\r\n\t\townerDocument.addEventListener( 'dragenter', handleDragEnter );\r\n\r\n\t\treturn () => {\r\n\t\t\townerDocument.removeEventListener( 'dragstart', handleDragStart );\r\n\t\t\townerDocument.removeEventListener( 'dragend', handleDragEnd );\r\n\t\t\townerDocument.removeEventListener( 'dragenter', handleDragEnter );\r\n\t\t};\r\n\t}, [] );\r\n\r\n\treturn isDraggingWithin;\r\n};\r\n\r\nexport default useIsDraggingWithin;\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,oBAAoB;;AAExD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,mBAAmB,GAAKC,UAAU,IAAM;EAC7C,MAAM,CAAEC,gBAAgB,EAAEC,mBAAmB,CAAE,GAAGL,QAAQ,CAAE,KAAM,CAAC;EAEnEC,SAAS,CAAE,MAAM;IAChB,MAAM;MAAEK;IAAc,CAAC,GAAGH,UAAU,CAACI,OAAO;IAE5C,SAASC,eAAeA,CAAEC,KAAK,EAAG;MACjC;MACAC,eAAe,CAAED,KAAM,CAAC;IACzB;;IAEA;IACA,SAASE,aAAaA,CAAA,EAAG;MACxBN,mBAAmB,CAAE,KAAM,CAAC;IAC7B;IAEA,SAASK,eAAeA,CAAED,KAAK,EAAG;MACjC;MACA,IAAKN,UAAU,CAACI,OAAO,CAACK,QAAQ,CAAEH,KAAK,CAACI,MAAO,CAAC,EAAG;QAClDR,mBAAmB,CAAE,IAAK,CAAC;MAC5B,CAAC,MAAM;QACNA,mBAAmB,CAAE,KAAM,CAAC;MAC7B;IACD;;IAEA;IACA;IACAC,aAAa,CAACQ,gBAAgB,CAAE,WAAW,EAAEN,eAAgB,CAAC;IAC9DF,aAAa,CAACQ,gBAAgB,CAAE,SAAS,EAAEH,aAAc,CAAC;IAC1DL,aAAa,CAACQ,gBAAgB,CAAE,WAAW,EAAEJ,eAAgB,CAAC;IAE9D,OAAO,MAAM;MACZJ,aAAa,CAACS,mBAAmB,CAAE,WAAW,EAAEP,eAAgB,CAAC;MACjEF,aAAa,CAACS,mBAAmB,CAAE,SAAS,EAAEJ,aAAc,CAAC;MAC7DL,aAAa,CAACS,mBAAmB,CAAE,WAAW,EAAEL,eAAgB,CAAC;IAClE,CAAC;EACF,CAAC,EAAE,EAAG,CAAC;EAEP,OAAON,gBAAgB;AACxB,CAAC;AAED,eAAeF,mBAAmB","ignoreList":[]}