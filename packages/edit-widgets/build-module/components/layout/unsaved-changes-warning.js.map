{"version":3,"names":["__","useEffect","useSelect","store","editWidgetsStore","UnsavedChangesWarning","isDirty","select","getEditedWidgetAreas","editedWidgetAreas","length","warnIfUnsavedChanges","event","returnValue","window","addEventListener","removeEventListener"],"sources":["@wordpress/edit-widgets/src/components/layout/unsaved-changes-warning.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useEffect } from '@wordpress/element';\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as editWidgetsStore } from '../../store';\r\n\r\n/**\r\n * Warns the user if there are unsaved changes before leaving the editor.\r\n *\r\n * This is a duplicate of the component implemented in the editor package.\r\n * Duplicated here as edit-widgets doesn't depend on editor.\r\n *\r\n * @return {Component} The component.\r\n */\r\nexport default function UnsavedChangesWarning() {\r\n\tconst isDirty = useSelect( ( select ) => {\r\n\t\tconst { getEditedWidgetAreas } = select( editWidgetsStore );\r\n\t\tconst editedWidgetAreas = getEditedWidgetAreas();\r\n\r\n\t\treturn editedWidgetAreas?.length > 0;\r\n\t}, [] );\r\n\r\n\tuseEffect( () => {\r\n\t\t/**\r\n\t\t * Warns the user if there are unsaved changes before leaving the editor.\r\n\t\t *\r\n\t\t * @param {Event} event `beforeunload` event.\r\n\t\t *\r\n\t\t * @return {string | undefined} Warning prompt message, if unsaved changes exist.\r\n\t\t */\r\n\t\tconst warnIfUnsavedChanges = ( event ) => {\r\n\t\t\tif ( isDirty ) {\r\n\t\t\t\tevent.returnValue = __(\r\n\t\t\t\t\t'You have unsaved changes. If you proceed, they will be lost.'\r\n\t\t\t\t);\r\n\t\t\t\treturn event.returnValue;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\twindow.addEventListener( 'beforeunload', warnIfUnsavedChanges );\r\n\r\n\t\treturn () => {\r\n\t\t\twindow.removeEventListener( 'beforeunload', warnIfUnsavedChanges );\r\n\t\t};\r\n\t}, [ isDirty ] );\r\n\r\n\treturn null;\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,EAAE,QAAQ,iBAAiB;AACpC,SAASC,SAAS,QAAQ,oBAAoB;AAC9C,SAASC,SAAS,QAAQ,iBAAiB;;AAE3C;AACA;AACA;AACA,SAASC,KAAK,IAAIC,gBAAgB,QAAQ,aAAa;;AAEvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAASC,qBAAqBA,CAAA,EAAG;EAC/C,MAAMC,OAAO,GAAGJ,SAAS,CAAIK,MAAM,IAAM;IACxC,MAAM;MAAEC;IAAqB,CAAC,GAAGD,MAAM,CAAEH,gBAAiB,CAAC;IAC3D,MAAMK,iBAAiB,GAAGD,oBAAoB,CAAC,CAAC;IAEhD,OAAOC,iBAAiB,EAAEC,MAAM,GAAG,CAAC;EACrC,CAAC,EAAE,EAAG,CAAC;EAEPT,SAAS,CAAE,MAAM;IAChB;AACF;AACA;AACA;AACA;AACA;AACA;IACE,MAAMU,oBAAoB,GAAKC,KAAK,IAAM;MACzC,IAAKN,OAAO,EAAG;QACdM,KAAK,CAACC,WAAW,GAAGb,EAAE,CACrB,8DACD,CAAC;QACD,OAAOY,KAAK,CAACC,WAAW;MACzB;IACD,CAAC;IAEDC,MAAM,CAACC,gBAAgB,CAAE,cAAc,EAAEJ,oBAAqB,CAAC;IAE/D,OAAO,MAAM;MACZG,MAAM,CAACE,mBAAmB,CAAE,cAAc,EAAEL,oBAAqB,CAAC;IACnE,CAAC;EACF,CAAC,EAAE,CAAEL,OAAO,CAAG,CAAC;EAEhB,OAAO,IAAI;AACZ","ignoreList":[]}