{"version":3,"names":["registerBlockType","unstable__bootstrapServerSideBlockDefinitions","setFreeformContentHandlerName","store","blocksStore","dispatch","deprecated","StrictMode","createRoot","registerCoreBlocks","__experimentalGetCoreBlocks","__experimentalRegisterExperimentalCoreBlocks","__experimentalFetchLinkSuggestions","fetchLinkSuggestions","registerLegacyWidgetBlock","registerLegacyWidgetVariations","registerWidgetGroupBlock","preferencesStore","widgetArea","Layout","ALLOW_REUSABLE_BLOCKS","ENABLE_EXPERIMENTAL_FSE_BLOCKS","jsx","_jsx","disabledBlocks","initializeEditor","id","settings","target","document","getElementById","root","coreBlocks","filter","block","includes","name","startsWith","setDefaults","fixedToolbar","welcomeGuide","showBlockBreadcrumbs","themeStyles","reapplyBlockTypeFilters","globalThis","IS_GUTENBERG_PLUGIN","enableFSEBlocks","registerBlock","search","searchOptions","render","children","blockEditorSettings","initialize","reinitializeEditor","since","version","metadata"],"sources":["@wordpress/edit-widgets/src/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tregisterBlockType,\r\n\tunstable__bootstrapServerSideBlockDefinitions, // eslint-disable-line camelcase\r\n\tsetFreeformContentHandlerName,\r\n\tstore as blocksStore,\r\n} from '@wordpress/blocks';\r\nimport { dispatch } from '@wordpress/data';\r\nimport deprecated from '@wordpress/deprecated';\r\nimport { StrictMode, createRoot } from '@wordpress/element';\r\nimport {\r\n\tregisterCoreBlocks,\r\n\t__experimentalGetCoreBlocks,\r\n\t__experimentalRegisterExperimentalCoreBlocks,\r\n} from '@wordpress/block-library';\r\nimport { __experimentalFetchLinkSuggestions as fetchLinkSuggestions } from '@wordpress/core-data';\r\nimport {\r\n\tregisterLegacyWidgetBlock,\r\n\tregisterLegacyWidgetVariations,\r\n\tregisterWidgetGroupBlock,\r\n} from '@wordpress/widgets';\r\nimport { store as preferencesStore } from '@wordpress/preferences';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport './store';\r\nimport './filters';\r\nimport * as widgetArea from './blocks/widget-area';\r\n\r\nimport Layout from './components/layout';\r\nimport {\r\n\tALLOW_REUSABLE_BLOCKS,\r\n\tENABLE_EXPERIMENTAL_FSE_BLOCKS,\r\n} from './constants';\r\n\r\nconst disabledBlocks = [\r\n\t'core/more',\r\n\t'core/freeform',\r\n\t'core/template-part',\r\n\t...( ALLOW_REUSABLE_BLOCKS ? [] : [ 'core/block' ] ),\r\n];\r\n\r\n/**\r\n * Initializes the block editor in the widgets screen.\r\n *\r\n * @param {string} id       ID of the root element to render the screen in.\r\n * @param {Object} settings Block editor settings.\r\n */\r\nexport function initializeEditor( id, settings ) {\r\n\tconst target = document.getElementById( id );\r\n\tconst root = createRoot( target );\r\n\r\n\tconst coreBlocks = __experimentalGetCoreBlocks().filter( ( block ) => {\r\n\t\treturn ! (\r\n\t\t\tdisabledBlocks.includes( block.name ) ||\r\n\t\t\tblock.name.startsWith( 'core/post' ) ||\r\n\t\t\tblock.name.startsWith( 'core/query' ) ||\r\n\t\t\tblock.name.startsWith( 'core/site' ) ||\r\n\t\t\tblock.name.startsWith( 'core/navigation' )\r\n\t\t);\r\n\t} );\r\n\r\n\tdispatch( preferencesStore ).setDefaults( 'core/edit-widgets', {\r\n\t\tfixedToolbar: false,\r\n\t\twelcomeGuide: true,\r\n\t\tshowBlockBreadcrumbs: true,\r\n\t\tthemeStyles: true,\r\n\t} );\r\n\r\n\tdispatch( blocksStore ).reapplyBlockTypeFilters();\r\n\tregisterCoreBlocks( coreBlocks );\r\n\tregisterLegacyWidgetBlock();\r\n\tif ( globalThis.IS_GUTENBERG_PLUGIN ) {\r\n\t\t__experimentalRegisterExperimentalCoreBlocks( {\r\n\t\t\tenableFSEBlocks: ENABLE_EXPERIMENTAL_FSE_BLOCKS,\r\n\t\t} );\r\n\t}\r\n\tregisterLegacyWidgetVariations( settings );\r\n\tregisterBlock( widgetArea );\r\n\tregisterWidgetGroupBlock();\r\n\r\n\tsettings.__experimentalFetchLinkSuggestions = ( search, searchOptions ) =>\r\n\t\tfetchLinkSuggestions( search, searchOptions, settings );\r\n\r\n\t// As we are unregistering `core/freeform` to avoid the Classic block, we must\r\n\t// replace it with something as the default freeform content handler. Failure to\r\n\t// do this will result in errors in the default block parser.\r\n\t// see: https://github.com/WordPress/gutenberg/issues/33097\r\n\tsetFreeformContentHandlerName( 'core/html' );\r\n\r\n\troot.render(\r\n\t\t<StrictMode>\r\n\t\t\t<Layout blockEditorSettings={ settings } />\r\n\t\t</StrictMode>\r\n\t);\r\n\r\n\treturn root;\r\n}\r\n\r\n/**\r\n * Compatibility export under the old `initialize` name.\r\n */\r\nexport const initialize = initializeEditor;\r\n\r\nexport function reinitializeEditor() {\r\n\tdeprecated( 'wp.editWidgets.reinitializeEditor', {\r\n\t\tsince: '6.2',\r\n\t\tversion: '6.3',\r\n\t} );\r\n}\r\n\r\n/**\r\n * Function to register an individual block.\r\n *\r\n * @param {Object} block The block to be registered.\r\n */\r\nconst registerBlock = ( block ) => {\r\n\tif ( ! block ) {\r\n\t\treturn;\r\n\t}\r\n\tconst { metadata, settings, name } = block;\r\n\tif ( metadata ) {\r\n\t\tunstable__bootstrapServerSideBlockDefinitions( { [ name ]: metadata } );\r\n\t}\r\n\tregisterBlockType( name, settings );\r\n};\r\n\r\nexport { store } from './store';\r\n"],"mappings":"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","ignoreList":[]}