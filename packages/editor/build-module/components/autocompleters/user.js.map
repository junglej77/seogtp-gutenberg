{"version":3,"names":["useMemo","useSelect","store","coreStore","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","getUserLabel","user","avatar","avatar_urls","className","alt","src","children","name","slug","triggerPrefix","useItems","filterValue","users","select","getUsers","context","search","encodeURIComponent","options","map","key","value","label","getOptionCompletion"],"sources":["@wordpress/editor/src/components/autocompleters/user.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useMemo } from '@wordpress/element';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { store as coreStore } from '@wordpress/core-data';\r\n\r\n/** @typedef {import('@wordpress/components').WPCompleter} WPCompleter */\r\n\r\nexport function getUserLabel( user ) {\r\n\tconst avatar =\r\n\t\tuser.avatar_urls && user.avatar_urls[ 24 ] ? (\r\n\t\t\t<img\r\n\t\t\t\tclassName=\"editor-autocompleters__user-avatar\"\r\n\t\t\t\talt=\"\"\r\n\t\t\t\tsrc={ user.avatar_urls[ 24 ] }\r\n\t\t\t/>\r\n\t\t) : (\r\n\t\t\t<span className=\"editor-autocompleters__no-avatar\"></span>\r\n\t\t);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ avatar }\r\n\t\t\t<span className=\"editor-autocompleters__user-name\">\r\n\t\t\t\t{ user.name }\r\n\t\t\t</span>\r\n\t\t\t<span className=\"editor-autocompleters__user-slug\">\r\n\t\t\t\t{ user.slug }\r\n\t\t\t</span>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\n/**\r\n * A user mentions completer.\r\n *\r\n * @type {WPCompleter}\r\n */\r\nexport default {\r\n\tname: 'users',\r\n\tclassName: 'editor-autocompleters__user',\r\n\ttriggerPrefix: '@',\r\n\r\n\tuseItems( filterValue ) {\r\n\t\tconst users = useSelect(\r\n\t\t\t( select ) => {\r\n\t\t\t\tconst { getUsers } = select( coreStore );\r\n\t\t\t\treturn getUsers( {\r\n\t\t\t\t\tcontext: 'view',\r\n\t\t\t\t\tsearch: encodeURIComponent( filterValue ),\r\n\t\t\t\t} );\r\n\t\t\t},\r\n\t\t\t[ filterValue ]\r\n\t\t);\r\n\r\n\t\tconst options = useMemo(\r\n\t\t\t() =>\r\n\t\t\t\tusers\r\n\t\t\t\t\t? users.map( ( user ) => ( {\r\n\t\t\t\t\t\t\tkey: `user-${ user.slug }`,\r\n\t\t\t\t\t\t\tvalue: user,\r\n\t\t\t\t\t\t\tlabel: getUserLabel( user ),\r\n\t\t\t\t\t  } ) )\r\n\t\t\t\t\t: [],\r\n\t\t\t[ users ]\r\n\t\t);\r\n\r\n\t\treturn [ options ];\r\n\t},\r\n\r\n\tgetOptionCompletion( user ) {\r\n\t\treturn `@${ user.slug }`;\r\n\t},\r\n};\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,OAAO,QAAQ,oBAAoB;AAC5C,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,KAAK,IAAIC,SAAS,QAAQ,sBAAsB;;AAEzD;AAAA,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAEA,OAAO,SAASC,YAAYA,CAAEC,IAAI,EAAG;EACpC,MAAMC,MAAM,GACXD,IAAI,CAACE,WAAW,IAAIF,IAAI,CAACE,WAAW,CAAE,EAAE,CAAE,gBACzCR,IAAA;IACCS,SAAS,EAAC,oCAAoC;IAC9CC,GAAG,EAAC,EAAE;IACNC,GAAG,EAAGL,IAAI,CAACE,WAAW,CAAE,EAAE;EAAI,CAC9B,CAAC,gBAEFR,IAAA;IAAMS,SAAS,EAAC;EAAkC,CAAO,CACzD;EAEF,oBACCL,KAAA,CAAAF,SAAA;IAAAU,QAAA,GACGL,MAAM,eACRP,IAAA;MAAMS,SAAS,EAAC,kCAAkC;MAAAG,QAAA,EAC/CN,IAAI,CAACO;IAAI,CACN,CAAC,eACPb,IAAA;MAAMS,SAAS,EAAC,kCAAkC;MAAAG,QAAA,EAC/CN,IAAI,CAACQ;IAAI,CACN,CAAC;EAAA,CACN,CAAC;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;EACdD,IAAI,EAAE,OAAO;EACbJ,SAAS,EAAE,6BAA6B;EACxCM,aAAa,EAAE,GAAG;EAElBC,QAAQA,CAAEC,WAAW,EAAG;IACvB,MAAMC,KAAK,GAAGtB,SAAS,CACpBuB,MAAM,IAAM;MACb,MAAM;QAAEC;MAAS,CAAC,GAAGD,MAAM,CAAErB,SAAU,CAAC;MACxC,OAAOsB,QAAQ,CAAE;QAChBC,OAAO,EAAE,MAAM;QACfC,MAAM,EAAEC,kBAAkB,CAAEN,WAAY;MACzC,CAAE,CAAC;IACJ,CAAC,EACD,CAAEA,WAAW,CACd,CAAC;IAED,MAAMO,OAAO,GAAG7B,OAAO,CACtB,MACCuB,KAAK,GACFA,KAAK,CAACO,GAAG,CAAInB,IAAI,KAAQ;MACzBoB,GAAG,EAAG,QAAQpB,IAAI,CAACQ,IAAM,EAAC;MAC1Ba,KAAK,EAAErB,IAAI;MACXsB,KAAK,EAAEvB,YAAY,CAAEC,IAAK;IAC1B,CAAC,CAAG,CAAC,GACL,EAAE,EACN,CAAEY,KAAK,CACR,CAAC;IAED,OAAO,CAAEM,OAAO,CAAE;EACnB,CAAC;EAEDK,mBAAmBA,CAAEvB,IAAI,EAAG;IAC3B,OAAQ,IAAIA,IAAI,CAACQ,IAAM,EAAC;EACzB;AACD,CAAC","ignoreList":[]}