{"version":3,"names":["__","sprintf","debounce","useSelect","useDispatch","store","coreStore","decodeEntities","Button","Dropdown","__experimentalInputControl","InputControl","useState","useMemo","__experimentalInspectorPopoverHeader","InspectorPopoverHeader","TEMPLATE_POST_TYPE","PostPanelRow","editorStore","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","EMPTY_OBJECT","BlogTitle","editEntityRecord","postsPageTitle","postsPageId","isTemplate","postSlug","select","getEntityRecord","getEditedEntityRecord","canUser","siteSettings","kind","name","undefined","_postsPageRecord","page_for_posts","getEditedPostAttribute","getCurrentPostType","id","title","popoverAnchor","setPopoverAnchor","popoverProps","anchor","placement","offset","shift","includes","setPostsPageTitle","newValue","decodedTitle","label","ref","children","contentClassName","focusOnMount","renderToggle","isOpen","onToggle","size","variant","onClick","renderContent","onClose","placeholder","value","onChange","help","hideLabelFromVision"],"sources":["@wordpress/editor/src/components/blog-title/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { debounce } from '@wordpress/compose';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { store as coreStore } from '@wordpress/core-data';\r\nimport { decodeEntities } from '@wordpress/html-entities';\r\nimport {\r\n\tButton,\r\n\tDropdown,\r\n\t__experimentalInputControl as InputControl,\r\n} from '@wordpress/components';\r\nimport { useState, useMemo } from '@wordpress/element';\r\nimport { __experimentalInspectorPopoverHeader as InspectorPopoverHeader } from '@wordpress/block-editor';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { TEMPLATE_POST_TYPE } from '../../store/constants';\r\nimport PostPanelRow from '../post-panel-row';\r\nimport { store as editorStore } from '../../store';\r\n\r\nconst EMPTY_OBJECT = {};\r\n\r\nexport default function BlogTitle() {\r\n\tconst { editEntityRecord } = useDispatch( coreStore );\r\n\tconst { postsPageTitle, postsPageId, isTemplate, postSlug } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst { getEntityRecord, getEditedEntityRecord, canUser } =\r\n\t\t\t\tselect( coreStore );\r\n\t\t\tconst siteSettings = canUser( 'read', {\r\n\t\t\t\tkind: 'root',\r\n\t\t\t\tname: 'site',\r\n\t\t\t} )\r\n\t\t\t\t? getEntityRecord( 'root', 'site' )\r\n\t\t\t\t: undefined;\r\n\t\t\tconst _postsPageRecord = siteSettings?.page_for_posts\r\n\t\t\t\t? getEditedEntityRecord(\r\n\t\t\t\t\t\t'postType',\r\n\t\t\t\t\t\t'page',\r\n\t\t\t\t\t\tsiteSettings?.page_for_posts\r\n\t\t\t\t  )\r\n\t\t\t\t: EMPTY_OBJECT;\r\n\t\t\tconst { getEditedPostAttribute, getCurrentPostType } =\r\n\t\t\t\tselect( editorStore );\r\n\t\t\treturn {\r\n\t\t\t\tpostsPageId: _postsPageRecord?.id,\r\n\t\t\t\tpostsPageTitle: _postsPageRecord?.title,\r\n\t\t\t\tisTemplate: getCurrentPostType() === TEMPLATE_POST_TYPE,\r\n\t\t\t\tpostSlug: getEditedPostAttribute( 'slug' ),\r\n\t\t\t};\r\n\t\t},\r\n\t\t[]\r\n\t);\r\n\t// Use internal state instead of a ref to make sure that the component\r\n\t// re-renders when the popover's anchor updates.\r\n\tconst [ popoverAnchor, setPopoverAnchor ] = useState( null );\r\n\t// Memoize popoverProps to avoid returning a new object every time.\r\n\tconst popoverProps = useMemo(\r\n\t\t() => ( {\r\n\t\t\t// Anchor the popover to the middle of the entire row so that it doesn't\r\n\t\t\t// move around when the label changes.\r\n\t\t\tanchor: popoverAnchor,\r\n\t\t\tplacement: 'left-start',\r\n\t\t\toffset: 36,\r\n\t\t\tshift: true,\r\n\t\t} ),\r\n\t\t[ popoverAnchor ]\r\n\t);\r\n\r\n\tif (\r\n\t\t! isTemplate ||\r\n\t\t! [ 'home', 'index' ].includes( postSlug ) ||\r\n\t\t! postsPageId\r\n\t) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst setPostsPageTitle = ( newValue ) => {\r\n\t\teditEntityRecord( 'postType', 'page', postsPageId, {\r\n\t\t\ttitle: newValue,\r\n\t\t} );\r\n\t};\r\n\tconst decodedTitle = decodeEntities( postsPageTitle );\r\n\treturn (\r\n\t\t<PostPanelRow label={ __( 'Blog title' ) } ref={ setPopoverAnchor }>\r\n\t\t\t<Dropdown\r\n\t\t\t\tpopoverProps={ popoverProps }\r\n\t\t\t\tcontentClassName=\"editor-blog-title-dropdown__content\"\r\n\t\t\t\tfocusOnMount\r\n\t\t\t\trenderToggle={ ( { isOpen, onToggle } ) => (\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tsize=\"compact\"\r\n\t\t\t\t\t\tvariant=\"tertiary\"\r\n\t\t\t\t\t\taria-expanded={ isOpen }\r\n\t\t\t\t\t\taria-label={ sprintf(\r\n\t\t\t\t\t\t\t// translators: %s: Current post link.\r\n\t\t\t\t\t\t\t__( 'Change blog title: %s' ),\r\n\t\t\t\t\t\t\tdecodedTitle\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t\tonClick={ onToggle }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ decodedTitle }\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t) }\r\n\t\t\t\trenderContent={ ( { onClose } ) => (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<InspectorPopoverHeader\r\n\t\t\t\t\t\t\ttitle={ __( 'Blog title' ) }\r\n\t\t\t\t\t\t\tonClose={ onClose }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<InputControl\r\n\t\t\t\t\t\t\tplaceholder={ __( 'No title' ) }\r\n\t\t\t\t\t\t\tsize=\"__unstable-large\"\r\n\t\t\t\t\t\t\tvalue={ postsPageTitle }\r\n\t\t\t\t\t\t\tonChange={ debounce( setPostsPageTitle, 300 ) }\r\n\t\t\t\t\t\t\tlabel={ __( 'Blog title' ) }\r\n\t\t\t\t\t\t\thelp={ __(\r\n\t\t\t\t\t\t\t\t'Set the Posts Page title. Appears in search results, and when the page is shared on social media.'\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\thideLabelFromVision\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</>\r\n\t\t\t\t) }\r\n\t\t\t/>\r\n\t\t</PostPanelRow>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}