{"version":3,"names":["useSelect","useDispatch","Icon","BaseControl","TextControl","Flex","FlexItem","FlexBlock","Button","Modal","__experimentalRadioGroup","RadioGroup","__experimentalRadio","Radio","__experimentalHStack","HStack","__experimentalVStack","VStack","__","useState","useInstanceId","store","noticesStore","coreStore","check","serialize","editorStore","TEMPLATE_PART_POST_TYPE","TEMPLATE_PART_AREA_DEFAULT_CATEGORY","useExistingTemplateParts","getUniqueTemplatePartTitle","getCleanTemplatePartSlug","jsx","_jsx","jsxs","_jsxs","CreateTemplatePartModal","modalTitle","restProps","defaultModalTitle","select","getPostType","labels","add_new_item","title","onRequestClose","closeModal","overlayClassName","focusOnMount","size","children","CreateTemplatePartModalContents","defaultArea","blocks","confirmLabel","onCreate","onError","defaultTitle","createErrorNotice","saveEntityRecord","existingTemplateParts","setTitle","area","setArea","isSubmitting","setIsSubmitting","instanceId","templatePartAreas","__experimentalGetDefaultTemplatePartAreas","createTemplatePart","uniqueTitle","cleanSlug","templatePart","slug","content","throwOnError","error","errorMessage","message","code","type","onSubmit","event","preventDefault","spacing","__next40pxDefaultSize","__nextHasNoMarginBottom","label","value","onChange","required","id","className","checked","map","icon","description","align","justify","variant","onClick","isBusy"],"sources":["@wordpress/editor/src/components/create-template-part-modal/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport {\r\n\tIcon,\r\n\tBaseControl,\r\n\tTextControl,\r\n\tFlex,\r\n\tFlexItem,\r\n\tFlexBlock,\r\n\tButton,\r\n\tModal,\r\n\t__experimentalRadioGroup as RadioGroup,\r\n\t__experimentalRadio as Radio,\r\n\t__experimentalHStack as HStack,\r\n\t__experimentalVStack as VStack,\r\n} from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useState } from '@wordpress/element';\r\nimport { useInstanceId } from '@wordpress/compose';\r\nimport { store as noticesStore } from '@wordpress/notices';\r\nimport { store as coreStore } from '@wordpress/core-data';\r\nimport { check } from '@wordpress/icons';\r\nimport { serialize } from '@wordpress/blocks';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as editorStore } from '../../store';\r\nimport {\r\n\tTEMPLATE_PART_POST_TYPE,\r\n\tTEMPLATE_PART_AREA_DEFAULT_CATEGORY,\r\n} from '../../store/constants';\r\nimport {\r\n\tuseExistingTemplateParts,\r\n\tgetUniqueTemplatePartTitle,\r\n\tgetCleanTemplatePartSlug,\r\n} from './utils';\r\n\r\nexport default function CreateTemplatePartModal( {\r\n\tmodalTitle,\r\n\t...restProps\r\n} ) {\r\n\tconst defaultModalTitle = useSelect(\r\n\t\t( select ) =>\r\n\t\t\tselect( coreStore ).getPostType( TEMPLATE_PART_POST_TYPE )?.labels\r\n\t\t\t\t?.add_new_item,\r\n\t\t[]\r\n\t);\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\ttitle={ modalTitle || defaultModalTitle }\r\n\t\t\tonRequestClose={ restProps.closeModal }\r\n\t\t\toverlayClassName=\"editor-create-template-part-modal\"\r\n\t\t\tfocusOnMount=\"firstContentElement\"\r\n\t\t\tsize=\"medium\"\r\n\t\t>\r\n\t\t\t<CreateTemplatePartModalContents { ...restProps } />\r\n\t\t</Modal>\r\n\t);\r\n}\r\n\r\nexport function CreateTemplatePartModalContents( {\r\n\tdefaultArea = TEMPLATE_PART_AREA_DEFAULT_CATEGORY,\r\n\tblocks = [],\r\n\tconfirmLabel = __( 'Add' ),\r\n\tcloseModal,\r\n\tonCreate,\r\n\tonError,\r\n\tdefaultTitle = '',\r\n} ) {\r\n\tconst { createErrorNotice } = useDispatch( noticesStore );\r\n\tconst { saveEntityRecord } = useDispatch( coreStore );\r\n\tconst existingTemplateParts = useExistingTemplateParts();\r\n\r\n\tconst [ title, setTitle ] = useState( defaultTitle );\r\n\tconst [ area, setArea ] = useState( defaultArea );\r\n\tconst [ isSubmitting, setIsSubmitting ] = useState( false );\r\n\tconst instanceId = useInstanceId( CreateTemplatePartModal );\r\n\r\n\tconst templatePartAreas = useSelect(\r\n\t\t( select ) =>\r\n\t\t\tselect( editorStore ).__experimentalGetDefaultTemplatePartAreas(),\r\n\t\t[]\r\n\t);\r\n\tasync function createTemplatePart() {\r\n\t\tif ( ! title || isSubmitting ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tsetIsSubmitting( true );\r\n\t\t\tconst uniqueTitle = getUniqueTemplatePartTitle(\r\n\t\t\t\ttitle,\r\n\t\t\t\texistingTemplateParts\r\n\t\t\t);\r\n\t\t\tconst cleanSlug = getCleanTemplatePartSlug( uniqueTitle );\r\n\r\n\t\t\tconst templatePart = await saveEntityRecord(\r\n\t\t\t\t'postType',\r\n\t\t\t\tTEMPLATE_PART_POST_TYPE,\r\n\t\t\t\t{\r\n\t\t\t\t\tslug: cleanSlug,\r\n\t\t\t\t\ttitle: uniqueTitle,\r\n\t\t\t\t\tcontent: serialize( blocks ),\r\n\t\t\t\t\tarea,\r\n\t\t\t\t},\r\n\t\t\t\t{ throwOnError: true }\r\n\t\t\t);\r\n\t\t\tawait onCreate( templatePart );\r\n\r\n\t\t\t// TODO: Add a success notice?\r\n\t\t} catch ( error ) {\r\n\t\t\tconst errorMessage =\r\n\t\t\t\terror.message && error.code !== 'unknown_error'\r\n\t\t\t\t\t? error.message\r\n\t\t\t\t\t: __(\r\n\t\t\t\t\t\t\t'An error occurred while creating the template part.'\r\n\t\t\t\t\t  );\r\n\r\n\t\t\tcreateErrorNotice( errorMessage, { type: 'snackbar' } );\r\n\r\n\t\t\tonError?.();\r\n\t\t} finally {\r\n\t\t\tsetIsSubmitting( false );\r\n\t\t}\r\n\t}\r\n\treturn (\r\n\t\t<form\r\n\t\t\tonSubmit={ async ( event ) => {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tawait createTemplatePart();\r\n\t\t\t} }\r\n\t\t>\r\n\t\t\t<VStack spacing=\"4\">\r\n\t\t\t\t<TextControl\r\n\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\tlabel={ __( 'Name' ) }\r\n\t\t\t\t\tvalue={ title }\r\n\t\t\t\t\tonChange={ setTitle }\r\n\t\t\t\t\trequired\r\n\t\t\t\t/>\r\n\t\t\t\t<BaseControl\r\n\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\tlabel={ __( 'Area' ) }\r\n\t\t\t\t\tid={ `editor-create-template-part-modal__area-selection-${ instanceId }` }\r\n\t\t\t\t\tclassName=\"editor-create-template-part-modal__area-base-control\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<RadioGroup\r\n\t\t\t\t\t\tlabel={ __( 'Area' ) }\r\n\t\t\t\t\t\tclassName=\"editor-create-template-part-modal__area-radio-group\"\r\n\t\t\t\t\t\tid={ `editor-create-template-part-modal__area-selection-${ instanceId }` }\r\n\t\t\t\t\t\tonChange={ setArea }\r\n\t\t\t\t\t\tchecked={ area }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ templatePartAreas.map(\r\n\t\t\t\t\t\t\t( { icon, label, area: value, description } ) => (\r\n\t\t\t\t\t\t\t\t<Radio\r\n\t\t\t\t\t\t\t\t\tkey={ label }\r\n\t\t\t\t\t\t\t\t\tvalue={ value }\r\n\t\t\t\t\t\t\t\t\tclassName=\"editor-create-template-part-modal__area-radio\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Flex align=\"start\" justify=\"start\">\r\n\t\t\t\t\t\t\t\t\t\t<FlexItem>\r\n\t\t\t\t\t\t\t\t\t\t\t<Icon icon={ icon } />\r\n\t\t\t\t\t\t\t\t\t\t</FlexItem>\r\n\t\t\t\t\t\t\t\t\t\t<FlexBlock className=\"editor-create-template-part-modal__option-label\">\r\n\t\t\t\t\t\t\t\t\t\t\t{ label }\r\n\t\t\t\t\t\t\t\t\t\t\t<div>{ description }</div>\r\n\t\t\t\t\t\t\t\t\t\t</FlexBlock>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<FlexItem className=\"editor-create-template-part-modal__checkbox\">\r\n\t\t\t\t\t\t\t\t\t\t\t{ area === value && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Icon icon={ check } />\r\n\t\t\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t\t\t</FlexItem>\r\n\t\t\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t\t\t</Radio>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t</RadioGroup>\r\n\t\t\t\t</BaseControl>\r\n\t\t\t\t<HStack justify=\"right\">\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\tvariant=\"tertiary\"\r\n\t\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\t\tcloseModal();\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ __( 'Cancel' ) }\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\taria-disabled={ ! title || isSubmitting }\r\n\t\t\t\t\t\tisBusy={ isSubmitting }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ confirmLabel }\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</HStack>\r\n\t\t\t</VStack>\r\n\t\t</form>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}