{"version":3,"names":["paramCase","kebabCase","useSelect","store","coreStore","TEMPLATE_PART_POST_TYPE","useExistingTemplateParts","select","getEntityRecords","per_page","getUniqueTemplatePartTitle","title","templateParts","lowercaseTitle","toLowerCase","existingTitles","map","templatePart","rendered","includes","suffix","getCleanTemplatePartSlug","replace"],"sources":["@wordpress/editor/src/components/create-template-part-modal/utils.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport { paramCase as kebabCase } from 'change-case';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect } from '@wordpress/data';\r\nimport { store as coreStore } from '@wordpress/core-data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { TEMPLATE_PART_POST_TYPE } from '../../store/constants';\r\n\r\nexport const useExistingTemplateParts = () => {\r\n\treturn useSelect(\r\n\t\t( select ) =>\r\n\t\t\tselect( coreStore ).getEntityRecords(\r\n\t\t\t\t'postType',\r\n\t\t\t\tTEMPLATE_PART_POST_TYPE,\r\n\t\t\t\t{\r\n\t\t\t\t\tper_page: -1,\r\n\t\t\t\t}\r\n\t\t\t),\r\n\t\t[]\r\n\t);\r\n};\r\n\r\n/**\r\n * Return a unique template part title based on\r\n * the given title and existing template parts.\r\n *\r\n * @param {string} title         The original template part title.\r\n * @param {Object} templateParts The array of template part entities.\r\n * @return {string} A unique template part title.\r\n */\r\nexport const getUniqueTemplatePartTitle = ( title, templateParts ) => {\r\n\tconst lowercaseTitle = title.toLowerCase();\r\n\tconst existingTitles = templateParts.map( ( templatePart ) =>\r\n\t\ttemplatePart.title.rendered.toLowerCase()\r\n\t);\r\n\r\n\tif ( ! existingTitles.includes( lowercaseTitle ) ) {\r\n\t\treturn title;\r\n\t}\r\n\r\n\tlet suffix = 2;\r\n\twhile ( existingTitles.includes( `${ lowercaseTitle } ${ suffix }` ) ) {\r\n\t\tsuffix++;\r\n\t}\r\n\r\n\treturn `${ title } ${ suffix }`;\r\n};\r\n\r\n/**\r\n * Get a valid slug for a template part.\r\n * Currently template parts only allow latin chars.\r\n * The fallback slug will receive suffix by default.\r\n *\r\n * @param {string} title The template part title.\r\n * @return {string} A valid template part slug.\r\n */\r\nexport const getCleanTemplatePartSlug = ( title ) => {\r\n\treturn kebabCase( title ).replace( /[^\\w-]+/g, '' ) || 'wp-custom-part';\r\n};\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,SAAS,IAAIC,SAAS,QAAQ,aAAa;;AAEpD;AACA;AACA;AACA,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,KAAK,IAAIC,SAAS,QAAQ,sBAAsB;;AAEzD;AACA;AACA;AACA,SAASC,uBAAuB,QAAQ,uBAAuB;AAE/D,OAAO,MAAMC,wBAAwB,GAAGA,CAAA,KAAM;EAC7C,OAAOJ,SAAS,CACbK,MAAM,IACPA,MAAM,CAAEH,SAAU,CAAC,CAACI,gBAAgB,CACnC,UAAU,EACVH,uBAAuB,EACvB;IACCI,QAAQ,EAAE,CAAC;EACZ,CACD,CAAC,EACF,EACD,CAAC;AACF,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,0BAA0B,GAAGA,CAAEC,KAAK,EAAEC,aAAa,KAAM;EACrE,MAAMC,cAAc,GAAGF,KAAK,CAACG,WAAW,CAAC,CAAC;EAC1C,MAAMC,cAAc,GAAGH,aAAa,CAACI,GAAG,CAAIC,YAAY,IACvDA,YAAY,CAACN,KAAK,CAACO,QAAQ,CAACJ,WAAW,CAAC,CACzC,CAAC;EAED,IAAK,CAAEC,cAAc,CAACI,QAAQ,CAAEN,cAAe,CAAC,EAAG;IAClD,OAAOF,KAAK;EACb;EAEA,IAAIS,MAAM,GAAG,CAAC;EACd,OAAQL,cAAc,CAACI,QAAQ,CAAG,GAAGN,cAAgB,IAAIO,MAAQ,EAAE,CAAC,EAAG;IACtEA,MAAM,EAAE;EACT;EAEA,OAAQ,GAAGT,KAAO,IAAIS,MAAQ,EAAC;AAChC,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,wBAAwB,GAAKV,KAAK,IAAM;EACpD,OAAOV,SAAS,CAAEU,KAAM,CAAC,CAACW,OAAO,CAAE,UAAU,EAAE,EAAG,CAAC,IAAI,gBAAgB;AACxE,CAAC","ignoreList":[]}