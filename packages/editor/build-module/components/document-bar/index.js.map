{"version":3,"names":["clsx","__","isRTL","sprintf","useSelect","useDispatch","Button","__experimentalText","Text","__unstableMotion","motion","__unstableAnimatePresence","AnimatePresence","BlockIcon","chevronLeftSmall","chevronRightSmall","displayShortcut","store","coreStore","commandsStore","useRef","useEffect","useReducedMotion","decodeEntities","TEMPLATE_POST_TYPES","GLOBAL_POST_TYPES","editorStore","unlock","jsx","_jsx","jsxs","_jsxs","TYPE_LABELS","wp_pattern","wp_navigation","wp_template","wp_template_part","MotionButton","DocumentBar","props","postType","documentTitle","isNotFound","isUnsyncedPattern","templateIcon","templateTitle","onNavigateToPreviousEntityRecord","select","getCurrentPostType","getCurrentPostId","getEditorSettings","__experimentalGetTemplateInfo","getTemplateInfo","getEditedEntityRecord","isResolving","isResolvingSelector","_postType","_postId","_document","_templateInfo","title","wp_pattern_sync_status","getPostIcon","area","open","openCommandCenter","isReducedMotion","isTemplate","includes","isGlobalEntity","hasBackButton","entityTitle","icon","mountedRef","current","className","children","onClick","event","stopPropagation","size","initial","opacity","transform","animate","exit","transition","duration","undefined","div","as","primary"],"sources":["@wordpress/editor/src/components/document-bar/index.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { __, isRTL, sprintf } from '@wordpress/i18n';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport {\r\n\tButton,\r\n\t__experimentalText as Text,\r\n\t__unstableMotion as motion,\r\n\t__unstableAnimatePresence as AnimatePresence,\r\n} from '@wordpress/components';\r\nimport { BlockIcon } from '@wordpress/block-editor';\r\nimport { chevronLeftSmall, chevronRightSmall } from '@wordpress/icons';\r\nimport { displayShortcut } from '@wordpress/keycodes';\r\nimport { store as coreStore } from '@wordpress/core-data';\r\nimport { store as commandsStore } from '@wordpress/commands';\r\nimport { useRef, useEffect } from '@wordpress/element';\r\nimport { useReducedMotion } from '@wordpress/compose';\r\nimport { decodeEntities } from '@wordpress/html-entities';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { TEMPLATE_POST_TYPES, GLOBAL_POST_TYPES } from '../../store/constants';\r\nimport { store as editorStore } from '../../store';\r\nimport { unlock } from '../../lock-unlock';\r\n\r\nconst TYPE_LABELS = {\r\n\t// translators: 1: Pattern title.\r\n\twp_pattern: __( 'Editing pattern: %s' ),\r\n\t// translators: 1: Navigation menu title.\r\n\twp_navigation: __( 'Editing navigation menu: %s' ),\r\n\t// translators: 1: Template title.\r\n\twp_template: __( 'Editing template: %s' ),\r\n\t// translators: 1: Template part title.\r\n\twp_template_part: __( 'Editing template part: %s' ),\r\n};\r\n\r\nconst MotionButton = motion( Button );\r\n\r\n/**\r\n * This component renders a navigation bar at the top of the editor. It displays the title of the current document,\r\n * a back button (if applicable), and a command center button. It also handles different states of the document,\r\n * such as \"not found\" or \"unsynced\".\r\n *\r\n * @example\r\n * ```jsx\r\n * <DocumentBar />\r\n * ```\r\n * @param {Object}                                   props       The component props.\r\n * @param {string}                                   props.title A title for the document, defaulting to the document or\r\n *                                                               template title currently being edited.\r\n * @param {import(\"@wordpress/components\").IconType} props.icon  An icon for the document, defaulting to an icon for document\r\n *                                                               or template currently being edited.\r\n *\r\n * @return {JSX.Element} The rendered DocumentBar component.\r\n */\r\nexport default function DocumentBar( props ) {\r\n\tconst {\r\n\t\tpostType,\r\n\t\tdocumentTitle,\r\n\t\tisNotFound,\r\n\t\tisUnsyncedPattern,\r\n\t\ttemplateIcon,\r\n\t\ttemplateTitle,\r\n\t\tonNavigateToPreviousEntityRecord,\r\n\t} = useSelect( ( select ) => {\r\n\t\tconst {\r\n\t\t\tgetCurrentPostType,\r\n\t\t\tgetCurrentPostId,\r\n\t\t\tgetEditorSettings,\r\n\t\t\t__experimentalGetTemplateInfo: getTemplateInfo,\r\n\t\t} = select( editorStore );\r\n\t\tconst { getEditedEntityRecord, isResolving: isResolvingSelector } =\r\n\t\t\tselect( coreStore );\r\n\t\tconst _postType = getCurrentPostType();\r\n\t\tconst _postId = getCurrentPostId();\r\n\t\tconst _document = getEditedEntityRecord(\r\n\t\t\t'postType',\r\n\t\t\t_postType,\r\n\t\t\t_postId\r\n\t\t);\r\n\t\tconst _templateInfo = getTemplateInfo( _document );\r\n\t\treturn {\r\n\t\t\tpostType: _postType,\r\n\t\t\tdocumentTitle: _document.title,\r\n\t\t\tisNotFound:\r\n\t\t\t\t! _document &&\r\n\t\t\t\t! isResolvingSelector(\r\n\t\t\t\t\t'getEditedEntityRecord',\r\n\t\t\t\t\t'postType',\r\n\t\t\t\t\t_postType,\r\n\t\t\t\t\t_postId\r\n\t\t\t\t),\r\n\t\t\tisUnsyncedPattern: _document?.wp_pattern_sync_status === 'unsynced',\r\n\t\t\ttemplateIcon: unlock( select( editorStore ) ).getPostIcon(\r\n\t\t\t\t_postType,\r\n\t\t\t\t{\r\n\t\t\t\t\tarea: _document?.area,\r\n\t\t\t\t}\r\n\t\t\t),\r\n\t\t\ttemplateTitle: _templateInfo.title,\r\n\t\t\tonNavigateToPreviousEntityRecord:\r\n\t\t\t\tgetEditorSettings().onNavigateToPreviousEntityRecord,\r\n\t\t};\r\n\t}, [] );\r\n\r\n\tconst { open: openCommandCenter } = useDispatch( commandsStore );\r\n\tconst isReducedMotion = useReducedMotion();\r\n\r\n\tconst isTemplate = TEMPLATE_POST_TYPES.includes( postType );\r\n\tconst isGlobalEntity = GLOBAL_POST_TYPES.includes( postType );\r\n\tconst hasBackButton = !! onNavigateToPreviousEntityRecord;\r\n\tconst entityTitle = isTemplate ? templateTitle : documentTitle;\r\n\tconst title = props.title || entityTitle;\r\n\tconst icon = props.icon || templateIcon;\r\n\r\n\tconst mountedRef = useRef( false );\r\n\tuseEffect( () => {\r\n\t\tmountedRef.current = true;\r\n\t}, [] );\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={ clsx( 'editor-document-bar', {\r\n\t\t\t\t'has-back-button': hasBackButton,\r\n\t\t\t\t'is-global': isGlobalEntity && ! isUnsyncedPattern,\r\n\t\t\t} ) }\r\n\t\t>\r\n\t\t\t<AnimatePresence>\r\n\t\t\t\t{ hasBackButton && (\r\n\t\t\t\t\t<MotionButton\r\n\t\t\t\t\t\tclassName=\"editor-document-bar__back\"\r\n\t\t\t\t\t\ticon={ isRTL() ? chevronRightSmall : chevronLeftSmall }\r\n\t\t\t\t\t\tonClick={ ( event ) => {\r\n\t\t\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\t\t\tonNavigateToPreviousEntityRecord();\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t\tsize=\"compact\"\r\n\t\t\t\t\t\tinitial={\r\n\t\t\t\t\t\t\tmountedRef.current\r\n\t\t\t\t\t\t\t\t? { opacity: 0, transform: 'translateX(15%)' }\r\n\t\t\t\t\t\t\t\t: false // Don't show entry animation when DocumentBar mounts.\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tanimate={ { opacity: 1, transform: 'translateX(0%)' } }\r\n\t\t\t\t\t\texit={ { opacity: 0, transform: 'translateX(15%)' } }\r\n\t\t\t\t\t\ttransition={\r\n\t\t\t\t\t\t\tisReducedMotion ? { duration: 0 } : undefined\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ __( 'Back' ) }\r\n\t\t\t\t\t</MotionButton>\r\n\t\t\t\t) }\r\n\t\t\t</AnimatePresence>\r\n\t\t\t{ isNotFound ? (\r\n\t\t\t\t<Text>{ __( 'Document not found' ) }</Text>\r\n\t\t\t) : (\r\n\t\t\t\t<Button\r\n\t\t\t\t\tclassName=\"editor-document-bar__command\"\r\n\t\t\t\t\tonClick={ () => openCommandCenter() }\r\n\t\t\t\t\tsize=\"compact\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<motion.div\r\n\t\t\t\t\t\tclassName=\"editor-document-bar__title\"\r\n\t\t\t\t\t\t// Force entry animation when the back button is added or removed.\r\n\t\t\t\t\t\tkey={ hasBackButton }\r\n\t\t\t\t\t\tinitial={\r\n\t\t\t\t\t\t\tmountedRef.current\r\n\t\t\t\t\t\t\t\t? {\r\n\t\t\t\t\t\t\t\t\t\topacity: 0,\r\n\t\t\t\t\t\t\t\t\t\ttransform: hasBackButton\r\n\t\t\t\t\t\t\t\t\t\t\t? 'translateX(15%)'\r\n\t\t\t\t\t\t\t\t\t\t\t: 'translateX(-15%)',\r\n\t\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t\t: false // Don't show entry animation when DocumentBar mounts.\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tanimate={ {\r\n\t\t\t\t\t\t\topacity: 1,\r\n\t\t\t\t\t\t\ttransform: 'translateX(0%)',\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t\ttransition={\r\n\t\t\t\t\t\t\tisReducedMotion ? { duration: 0 } : undefined\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<BlockIcon icon={ icon } />\r\n\t\t\t\t\t\t<Text\r\n\t\t\t\t\t\t\tsize=\"body\"\r\n\t\t\t\t\t\t\tas=\"h1\"\r\n\t\t\t\t\t\t\taria-label={\r\n\t\t\t\t\t\t\t\t! props.title && TYPE_LABELS[ postType ]\r\n\t\t\t\t\t\t\t\t\t? // eslint-disable-next-line @wordpress/valid-sprintf\r\n\t\t\t\t\t\t\t\t\t  sprintf( TYPE_LABELS[ postType ], title )\r\n\t\t\t\t\t\t\t\t\t: undefined\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{ title\r\n\t\t\t\t\t\t\t\t? decodeEntities( title )\r\n\t\t\t\t\t\t\t\t: __( 'No title' ) }\r\n\t\t\t\t\t\t</Text>\r\n\t\t\t\t\t</motion.div>\r\n\t\t\t\t\t<span className=\"editor-document-bar__shortcut\">\r\n\t\t\t\t\t\t{ displayShortcut.primary( 'k' ) }\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</Button>\r\n\t\t\t) }\r\n\t\t</div>\r\n\t);\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,OAAOA,IAAI,MAAM,MAAM;;AAEvB;AACA;AACA;AACA,SAASC,EAAE,EAAEC,KAAK,EAAEC,OAAO,QAAQ,iBAAiB;AACpD,SAASC,SAAS,EAAEC,WAAW,QAAQ,iBAAiB;AACxD,SACCC,MAAM,EACNC,kBAAkB,IAAIC,IAAI,EAC1BC,gBAAgB,IAAIC,MAAM,EAC1BC,yBAAyB,IAAIC,eAAe,QACtC,uBAAuB;AAC9B,SAASC,SAAS,QAAQ,yBAAyB;AACnD,SAASC,gBAAgB,EAAEC,iBAAiB,QAAQ,kBAAkB;AACtE,SAASC,eAAe,QAAQ,qBAAqB;AACrD,SAASC,KAAK,IAAIC,SAAS,QAAQ,sBAAsB;AACzD,SAASD,KAAK,IAAIE,aAAa,QAAQ,qBAAqB;AAC5D,SAASC,MAAM,EAAEC,SAAS,QAAQ,oBAAoB;AACtD,SAASC,gBAAgB,QAAQ,oBAAoB;AACrD,SAASC,cAAc,QAAQ,0BAA0B;;AAEzD;AACA;AACA;AACA,SAASC,mBAAmB,EAAEC,iBAAiB,QAAQ,uBAAuB;AAC9E,SAASR,KAAK,IAAIS,WAAW,QAAQ,aAAa;AAClD,SAASC,MAAM,QAAQ,mBAAmB;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAE3C,MAAMC,WAAW,GAAG;EACnB;EACAC,UAAU,EAAEhC,EAAE,CAAE,qBAAsB,CAAC;EACvC;EACAiC,aAAa,EAAEjC,EAAE,CAAE,6BAA8B,CAAC;EAClD;EACAkC,WAAW,EAAElC,EAAE,CAAE,sBAAuB,CAAC;EACzC;EACAmC,gBAAgB,EAAEnC,EAAE,CAAE,2BAA4B;AACnD,CAAC;AAED,MAAMoC,YAAY,GAAG3B,MAAM,CAAEJ,MAAO,CAAC;;AAErC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAASgC,WAAWA,CAAEC,KAAK,EAAG;EAC5C,MAAM;IACLC,QAAQ;IACRC,aAAa;IACbC,UAAU;IACVC,iBAAiB;IACjBC,YAAY;IACZC,aAAa;IACbC;EACD,CAAC,GAAG1C,SAAS,CAAI2C,MAAM,IAAM;IAC5B,MAAM;MACLC,kBAAkB;MAClBC,gBAAgB;MAChBC,iBAAiB;MACjBC,6BAA6B,EAAEC;IAChC,CAAC,GAAGL,MAAM,CAAErB,WAAY,CAAC;IACzB,MAAM;MAAE2B,qBAAqB;MAAEC,WAAW,EAAEC;IAAoB,CAAC,GAChER,MAAM,CAAE7B,SAAU,CAAC;IACpB,MAAMsC,SAAS,GAAGR,kBAAkB,CAAC,CAAC;IACtC,MAAMS,OAAO,GAAGR,gBAAgB,CAAC,CAAC;IAClC,MAAMS,SAAS,GAAGL,qBAAqB,CACtC,UAAU,EACVG,SAAS,EACTC,OACD,CAAC;IACD,MAAME,aAAa,GAAGP,eAAe,CAAEM,SAAU,CAAC;IAClD,OAAO;MACNlB,QAAQ,EAAEgB,SAAS;MACnBf,aAAa,EAAEiB,SAAS,CAACE,KAAK;MAC9BlB,UAAU,EACT,CAAEgB,SAAS,IACX,CAAEH,mBAAmB,CACpB,uBAAuB,EACvB,UAAU,EACVC,SAAS,EACTC,OACD,CAAC;MACFd,iBAAiB,EAAEe,SAAS,EAAEG,sBAAsB,KAAK,UAAU;MACnEjB,YAAY,EAAEjB,MAAM,CAAEoB,MAAM,CAAErB,WAAY,CAAE,CAAC,CAACoC,WAAW,CACxDN,SAAS,EACT;QACCO,IAAI,EAAEL,SAAS,EAAEK;MAClB,CACD,CAAC;MACDlB,aAAa,EAAEc,aAAa,CAACC,KAAK;MAClCd,gCAAgC,EAC/BI,iBAAiB,CAAC,CAAC,CAACJ;IACtB,CAAC;EACF,CAAC,EAAE,EAAG,CAAC;EAEP,MAAM;IAAEkB,IAAI,EAAEC;EAAkB,CAAC,GAAG5D,WAAW,CAAEc,aAAc,CAAC;EAChE,MAAM+C,eAAe,GAAG5C,gBAAgB,CAAC,CAAC;EAE1C,MAAM6C,UAAU,GAAG3C,mBAAmB,CAAC4C,QAAQ,CAAE5B,QAAS,CAAC;EAC3D,MAAM6B,cAAc,GAAG5C,iBAAiB,CAAC2C,QAAQ,CAAE5B,QAAS,CAAC;EAC7D,MAAM8B,aAAa,GAAG,CAAC,CAAExB,gCAAgC;EACzD,MAAMyB,WAAW,GAAGJ,UAAU,GAAGtB,aAAa,GAAGJ,aAAa;EAC9D,MAAMmB,KAAK,GAAGrB,KAAK,CAACqB,KAAK,IAAIW,WAAW;EACxC,MAAMC,IAAI,GAAGjC,KAAK,CAACiC,IAAI,IAAI5B,YAAY;EAEvC,MAAM6B,UAAU,GAAGrD,MAAM,CAAE,KAAM,CAAC;EAClCC,SAAS,CAAE,MAAM;IAChBoD,UAAU,CAACC,OAAO,GAAG,IAAI;EAC1B,CAAC,EAAE,EAAG,CAAC;EAEP,oBACC3C,KAAA;IACC4C,SAAS,EAAG3E,IAAI,CAAE,qBAAqB,EAAE;MACxC,iBAAiB,EAAEsE,aAAa;MAChC,WAAW,EAAED,cAAc,IAAI,CAAE1B;IAClC,CAAE,CAAG;IAAAiC,QAAA,gBAEL/C,IAAA,CAACjB,eAAe;MAAAgE,QAAA,EACbN,aAAa,iBACdzC,IAAA,CAACQ,YAAY;QACZsC,SAAS,EAAC,2BAA2B;QACrCH,IAAI,EAAGtE,KAAK,CAAC,CAAC,GAAGa,iBAAiB,GAAGD,gBAAkB;QACvD+D,OAAO,EAAKC,KAAK,IAAM;UACtBA,KAAK,CAACC,eAAe,CAAC,CAAC;UACvBjC,gCAAgC,CAAC,CAAC;QACnC,CAAG;QACHkC,IAAI,EAAC,SAAS;QACdC,OAAO,EACNR,UAAU,CAACC,OAAO,GACf;UAAEQ,OAAO,EAAE,CAAC;UAAEC,SAAS,EAAE;QAAkB,CAAC,GAC5C,KAAK,CAAC;QACT;QACDC,OAAO,EAAG;UAAEF,OAAO,EAAE,CAAC;UAAEC,SAAS,EAAE;QAAiB,CAAG;QACvDE,IAAI,EAAG;UAAEH,OAAO,EAAE,CAAC;UAAEC,SAAS,EAAE;QAAkB,CAAG;QACrDG,UAAU,EACTpB,eAAe,GAAG;UAAEqB,QAAQ,EAAE;QAAE,CAAC,GAAGC,SACpC;QAAAZ,QAAA,EAEC3E,EAAE,CAAE,MAAO;MAAC,CACD;IACd,CACe,CAAC,EAChByC,UAAU,gBACXb,IAAA,CAACrB,IAAI;MAAAoE,QAAA,EAAG3E,EAAE,CAAE,oBAAqB;IAAC,CAAQ,CAAC,gBAE3C8B,KAAA,CAACzB,MAAM;MACNqE,SAAS,EAAC,8BAA8B;MACxCE,OAAO,EAAGA,CAAA,KAAMZ,iBAAiB,CAAC,CAAG;MACrCe,IAAI,EAAC,SAAS;MAAAJ,QAAA,gBAEd7C,KAAA,CAACrB,MAAM,CAAC+E,GAAG;QACVd,SAAS,EAAC;QACV;QAAA;;QAEAM,OAAO,EACNR,UAAU,CAACC,OAAO,GACf;UACAQ,OAAO,EAAE,CAAC;UACVC,SAAS,EAAEb,aAAa,GACrB,iBAAiB,GACjB;QACH,CAAC,GACD,KAAK,CAAC;QACT;QACDc,OAAO,EAAG;UACTF,OAAO,EAAE,CAAC;UACVC,SAAS,EAAE;QACZ,CAAG;QACHG,UAAU,EACTpB,eAAe,GAAG;UAAEqB,QAAQ,EAAE;QAAE,CAAC,GAAGC,SACpC;QAAAZ,QAAA,gBAED/C,IAAA,CAAChB,SAAS;UAAC2D,IAAI,EAAGA;QAAM,CAAE,CAAC,eAC3B3C,IAAA,CAACrB,IAAI;UACJwE,IAAI,EAAC,MAAM;UACXU,EAAE,EAAC,IAAI;UACP,cACC,CAAEnD,KAAK,CAACqB,KAAK,IAAI5B,WAAW,CAAEQ,QAAQ,CAAE;UACrC;UACArC,OAAO,CAAE6B,WAAW,CAAEQ,QAAQ,CAAE,EAAEoB,KAAM,CAAC,GACzC4B,SACH;UAAAZ,QAAA,EAEChB,KAAK,GACJrC,cAAc,CAAEqC,KAAM,CAAC,GACvB3D,EAAE,CAAE,UAAW;QAAC,CACd,CAAC;MAAA,GAjCDqE,aAkCK,CAAC,eACbzC,IAAA;QAAM8C,SAAS,EAAC,+BAA+B;QAAAC,QAAA,EAC5C5D,eAAe,CAAC2E,OAAO,CAAE,GAAI;MAAC,CAC3B,CAAC;IAAA,CACA,CACR;EAAA,CACG,CAAC;AAER","ignoreList":[]}