{"version":3,"names":["clsx","useViewportMatch","useSelect","useDispatch","__","_x","NavigableToolbar","ToolSelector","store","blockEditorStore","Button","ToolbarItem","listView","plus","useCallback","keyboardShortcutsStore","preferencesStore","unlock","editorStore","EditorHistoryRedo","EditorHistoryUndo","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","DocumentTools","className","disableBlockTools","setIsInserterOpened","setIsListViewOpened","isDistractionFree","isInserterOpened","isListViewOpen","listViewShortcut","inserterSidebarToggleRef","listViewToggleRef","hasFixedToolbar","showIconLabels","select","getSettings","get","isListViewOpened","getEditorMode","getInserterSidebarToggleRef","getListViewToggleRef","getShortcutRepresentation","__unstableGetEditorMode","isVisualMode","isZoomedOutView","preventDefault","event","isLargeViewport","isWideViewport","toolbarAriaLabel","toggleListView","toggleInserter","longLabel","shortLabel","variant","children","ref","as","isPressed","onMouseDown","onClick","disabled","icon","label","showTooltip","undefined","size","shortcut"],"sources":["@wordpress/editor/src/components/document-tools/index.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useViewportMatch } from '@wordpress/compose';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { __, _x } from '@wordpress/i18n';\r\nimport {\r\n\tNavigableToolbar,\r\n\tToolSelector,\r\n\tstore as blockEditorStore,\r\n} from '@wordpress/block-editor';\r\nimport { Button, ToolbarItem } from '@wordpress/components';\r\nimport { listView, plus } from '@wordpress/icons';\r\nimport { useCallback } from '@wordpress/element';\r\nimport { store as keyboardShortcutsStore } from '@wordpress/keyboard-shortcuts';\r\nimport { store as preferencesStore } from '@wordpress/preferences';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { unlock } from '../../lock-unlock';\r\nimport { store as editorStore } from '../../store';\r\nimport EditorHistoryRedo from '../editor-history/redo';\r\nimport EditorHistoryUndo from '../editor-history/undo';\r\n\r\nfunction DocumentTools( { className, disableBlockTools = false } ) {\r\n\tconst { setIsInserterOpened, setIsListViewOpened } =\r\n\t\tuseDispatch( editorStore );\r\n\tconst {\r\n\t\tisDistractionFree,\r\n\t\tisInserterOpened,\r\n\t\tisListViewOpen,\r\n\t\tlistViewShortcut,\r\n\t\tinserterSidebarToggleRef,\r\n\t\tlistViewToggleRef,\r\n\t\thasFixedToolbar,\r\n\t\tshowIconLabels,\r\n\t} = useSelect( ( select ) => {\r\n\t\tconst { getSettings } = select( blockEditorStore );\r\n\t\tconst { get } = select( preferencesStore );\r\n\t\tconst {\r\n\t\t\tisListViewOpened,\r\n\t\t\tgetEditorMode,\r\n\t\t\tgetInserterSidebarToggleRef,\r\n\t\t\tgetListViewToggleRef,\r\n\t\t} = unlock( select( editorStore ) );\r\n\t\tconst { getShortcutRepresentation } = select( keyboardShortcutsStore );\r\n\t\tconst { __unstableGetEditorMode } = select( blockEditorStore );\r\n\r\n\t\treturn {\r\n\t\t\tisInserterOpened: select( editorStore ).isInserterOpened(),\r\n\t\t\tisListViewOpen: isListViewOpened(),\r\n\t\t\tlistViewShortcut: getShortcutRepresentation(\r\n\t\t\t\t'core/editor/toggle-list-view'\r\n\t\t\t),\r\n\t\t\tinserterSidebarToggleRef: getInserterSidebarToggleRef(),\r\n\t\t\tlistViewToggleRef: getListViewToggleRef(),\r\n\t\t\thasFixedToolbar: getSettings().hasFixedToolbar,\r\n\t\t\tshowIconLabels: get( 'core', 'showIconLabels' ),\r\n\t\t\tisDistractionFree: get( 'core', 'distractionFree' ),\r\n\t\t\tisVisualMode: getEditorMode() === 'visual',\r\n\t\t\tisZoomedOutView: __unstableGetEditorMode() === 'zoom-out',\r\n\t\t};\r\n\t}, [] );\r\n\r\n\tconst preventDefault = ( event ) => {\r\n\t\t// Because the inserter behaves like a dialog,\r\n\t\t// if the inserter is opened already then when we click on the toggle button\r\n\t\t// then the initial click event will close the inserter and then be propagated\r\n\t\t// to the inserter toggle and it will open it again.\r\n\t\t// To prevent this we need to stop the propagation of the event.\r\n\t\t// This won't be necessary when the inserter no longer behaves like a dialog.\r\n\r\n\t\tif ( isInserterOpened ) {\r\n\t\t\tevent.preventDefault();\r\n\t\t}\r\n\t};\r\n\r\n\tconst isLargeViewport = useViewportMatch( 'medium' );\r\n\tconst isWideViewport = useViewportMatch( 'wide' );\r\n\r\n\t/* translators: accessibility text for the editor toolbar */\r\n\tconst toolbarAriaLabel = __( 'Document tools' );\r\n\r\n\tconst toggleListView = useCallback(\r\n\t\t() => setIsListViewOpened( ! isListViewOpen ),\r\n\t\t[ setIsListViewOpened, isListViewOpen ]\r\n\t);\r\n\r\n\tconst toggleInserter = useCallback(\r\n\t\t() => setIsInserterOpened( ! isInserterOpened ),\r\n\t\t[ isInserterOpened, setIsInserterOpened ]\r\n\t);\r\n\r\n\t/* translators: button label text should, if possible, be under 16 characters. */\r\n\tconst longLabel = _x(\r\n\t\t'Toggle block inserter',\r\n\t\t'Generic label for block inserter button'\r\n\t);\r\n\tconst shortLabel = ! isInserterOpened ? __( 'Add' ) : __( 'Close' );\r\n\r\n\treturn (\r\n\t\t// Some plugins expect and use the `edit-post-header-toolbar` CSS class to\r\n\t\t// find the toolbar and inject UI elements into it. This is not officially\r\n\t\t// supported, but we're keeping it in the list of class names for backwards\r\n\t\t// compatibility.\r\n\t\t<NavigableToolbar\r\n\t\t\tclassName={ clsx(\r\n\t\t\t\t'editor-document-tools',\r\n\t\t\t\t'edit-post-header-toolbar',\r\n\t\t\t\tclassName\r\n\t\t\t) }\r\n\t\t\taria-label={ toolbarAriaLabel }\r\n\t\t\tvariant=\"unstyled\"\r\n\t\t>\r\n\t\t\t<div className=\"editor-document-tools__left\">\r\n\t\t\t\t{ ! isDistractionFree && (\r\n\t\t\t\t\t<ToolbarItem\r\n\t\t\t\t\t\tref={ inserterSidebarToggleRef }\r\n\t\t\t\t\t\tas={ Button }\r\n\t\t\t\t\t\tclassName=\"editor-document-tools__inserter-toggle\"\r\n\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\tisPressed={ isInserterOpened }\r\n\t\t\t\t\t\tonMouseDown={ preventDefault }\r\n\t\t\t\t\t\tonClick={ toggleInserter }\r\n\t\t\t\t\t\tdisabled={ disableBlockTools }\r\n\t\t\t\t\t\ticon={ plus }\r\n\t\t\t\t\t\tlabel={ showIconLabels ? shortLabel : longLabel }\r\n\t\t\t\t\t\tshowTooltip={ ! showIconLabels }\r\n\t\t\t\t\t\taria-expanded={ isInserterOpened }\r\n\t\t\t\t\t/>\r\n\t\t\t\t) }\r\n\t\t\t\t{ ( isWideViewport || ! showIconLabels ) && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t{ isLargeViewport && ! hasFixedToolbar && (\r\n\t\t\t\t\t\t\t<ToolbarItem\r\n\t\t\t\t\t\t\t\tas={ ToolSelector }\r\n\t\t\t\t\t\t\t\tshowTooltip={ ! showIconLabels }\r\n\t\t\t\t\t\t\t\tvariant={\r\n\t\t\t\t\t\t\t\t\tshowIconLabels ? 'tertiary' : undefined\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tdisabled={ disableBlockTools }\r\n\t\t\t\t\t\t\t\tsize=\"compact\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t<ToolbarItem\r\n\t\t\t\t\t\t\tas={ EditorHistoryUndo }\r\n\t\t\t\t\t\t\tshowTooltip={ ! showIconLabels }\r\n\t\t\t\t\t\t\tvariant={ showIconLabels ? 'tertiary' : undefined }\r\n\t\t\t\t\t\t\tsize=\"compact\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<ToolbarItem\r\n\t\t\t\t\t\t\tas={ EditorHistoryRedo }\r\n\t\t\t\t\t\t\tshowTooltip={ ! showIconLabels }\r\n\t\t\t\t\t\t\tvariant={ showIconLabels ? 'tertiary' : undefined }\r\n\t\t\t\t\t\t\tsize=\"compact\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{ ! isDistractionFree && (\r\n\t\t\t\t\t\t\t<ToolbarItem\r\n\t\t\t\t\t\t\t\tas={ Button }\r\n\t\t\t\t\t\t\t\tclassName=\"editor-document-tools__document-overview-toggle\"\r\n\t\t\t\t\t\t\t\ticon={ listView }\r\n\t\t\t\t\t\t\t\tdisabled={ disableBlockTools }\r\n\t\t\t\t\t\t\t\tisPressed={ isListViewOpen }\r\n\t\t\t\t\t\t\t\t/* translators: button label text should, if possible, be under 16 characters. */\r\n\t\t\t\t\t\t\t\tlabel={ __( 'Document Overview' ) }\r\n\t\t\t\t\t\t\t\tonClick={ toggleListView }\r\n\t\t\t\t\t\t\t\tshortcut={ listViewShortcut }\r\n\t\t\t\t\t\t\t\tshowTooltip={ ! showIconLabels }\r\n\t\t\t\t\t\t\t\tvariant={\r\n\t\t\t\t\t\t\t\t\tshowIconLabels ? 'tertiary' : undefined\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\taria-expanded={ isListViewOpen }\r\n\t\t\t\t\t\t\t\tref={ listViewToggleRef }\r\n\t\t\t\t\t\t\t\tsize=\"compact\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t</>\r\n\t\t\t\t) }\r\n\t\t\t</div>\r\n\t\t</NavigableToolbar>\r\n\t);\r\n}\r\n\r\nexport default DocumentTools;\r\n"],"mappings":"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","ignoreList":[]}