{"version":3,"names":["__","useSelect","PanelBody","PanelRow","store","coreStore","privateApis","blockEditorPrivateApis","useContext","EntityRecordItem","unlock","jsx","_jsx","jsxs","_jsxs","getGlobalStylesChanges","GlobalStylesContext","getEntityDescription","entity","count","GlobalStylesDescription","record","user","currentEditorGlobalStyles","savedRecord","select","getEntityRecord","kind","name","key","globalStylesChanges","maxResults","length","className","children","map","change","EntityDescription","description","EntityTypeList","list","unselectedEntities","setUnselectedEntities","firstRecord","entityConfig","getEntityConfig","entityLabel","label","title","initialOpen","checked","some","elt","property","onChange","value"],"sources":["@wordpress/editor/src/components/entities-saved-states/entity-type-list.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { PanelBody, PanelRow } from '@wordpress/components';\r\nimport { store as coreStore } from '@wordpress/core-data';\r\nimport { privateApis as blockEditorPrivateApis } from '@wordpress/block-editor';\r\nimport { useContext } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport EntityRecordItem from './entity-record-item';\r\nimport { unlock } from '../../lock-unlock';\r\n\r\nconst { getGlobalStylesChanges, GlobalStylesContext } = unlock(\r\n\tblockEditorPrivateApis\r\n);\r\n\r\nfunction getEntityDescription( entity, count ) {\r\n\tswitch ( entity ) {\r\n\t\tcase 'site':\r\n\t\t\treturn 1 === count\r\n\t\t\t\t? __( 'This change will affect your whole site.' )\r\n\t\t\t\t: __( 'These changes will affect your whole site.' );\r\n\t\tcase 'wp_template':\r\n\t\t\treturn __(\r\n\t\t\t\t'This change will affect pages and posts that use this template.'\r\n\t\t\t);\r\n\t\tcase 'page':\r\n\t\tcase 'post':\r\n\t\t\treturn __( 'The following has been modified.' );\r\n\t}\r\n}\r\n\r\nfunction GlobalStylesDescription( { record } ) {\r\n\tconst { user: currentEditorGlobalStyles } =\r\n\t\tuseContext( GlobalStylesContext );\r\n\tconst savedRecord = useSelect(\r\n\t\t( select ) =>\r\n\t\t\tselect( coreStore ).getEntityRecord(\r\n\t\t\t\trecord.kind,\r\n\t\t\t\trecord.name,\r\n\t\t\t\trecord.key\r\n\t\t\t),\r\n\t\t[ record.kind, record.name, record.key ]\r\n\t);\r\n\r\n\tconst globalStylesChanges = getGlobalStylesChanges(\r\n\t\tcurrentEditorGlobalStyles,\r\n\t\tsavedRecord,\r\n\t\t{\r\n\t\t\tmaxResults: 10,\r\n\t\t}\r\n\t);\r\n\treturn globalStylesChanges.length ? (\r\n\t\t<ul className=\"entities-saved-states__changes\">\r\n\t\t\t{ globalStylesChanges.map( ( change ) => (\r\n\t\t\t\t<li key={ change }>{ change }</li>\r\n\t\t\t) ) }\r\n\t\t</ul>\r\n\t) : null;\r\n}\r\n\r\nfunction EntityDescription( { record, count } ) {\r\n\tif ( 'globalStyles' === record?.name ) {\r\n\t\treturn null;\r\n\t}\r\n\tconst description = getEntityDescription( record?.name, count );\r\n\treturn description ? <PanelRow>{ description }</PanelRow> : null;\r\n}\r\n\r\nexport default function EntityTypeList( {\r\n\tlist,\r\n\tunselectedEntities,\r\n\tsetUnselectedEntities,\r\n} ) {\r\n\tconst count = list.length;\r\n\tconst firstRecord = list[ 0 ];\r\n\tconst entityConfig = useSelect(\r\n\t\t( select ) =>\r\n\t\t\tselect( coreStore ).getEntityConfig(\r\n\t\t\t\tfirstRecord.kind,\r\n\t\t\t\tfirstRecord.name\r\n\t\t\t),\r\n\t\t[ firstRecord.kind, firstRecord.name ]\r\n\t);\r\n\r\n\tlet entityLabel = entityConfig.label;\r\n\tif ( firstRecord?.name === 'wp_template_part' ) {\r\n\t\tentityLabel =\r\n\t\t\t1 === count ? __( 'Template Part' ) : __( 'Template Parts' );\r\n\t}\r\n\r\n\treturn (\r\n\t\t<PanelBody title={ entityLabel } initialOpen>\r\n\t\t\t<EntityDescription record={ firstRecord } count={ count } />\r\n\t\t\t{ list.map( ( record ) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<EntityRecordItem\r\n\t\t\t\t\t\tkey={ record.key || record.property }\r\n\t\t\t\t\t\trecord={ record }\r\n\t\t\t\t\t\tchecked={\r\n\t\t\t\t\t\t\t! unselectedEntities.some(\r\n\t\t\t\t\t\t\t\t( elt ) =>\r\n\t\t\t\t\t\t\t\t\telt.kind === record.kind &&\r\n\t\t\t\t\t\t\t\t\telt.name === record.name &&\r\n\t\t\t\t\t\t\t\t\telt.key === record.key &&\r\n\t\t\t\t\t\t\t\t\telt.property === record.property\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonChange={ ( value ) =>\r\n\t\t\t\t\t\t\tsetUnselectedEntities( record, value )\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t);\r\n\t\t\t} ) }\r\n\t\t\t{ 'globalStyles' === firstRecord?.name && (\r\n\t\t\t\t<GlobalStylesDescription record={ firstRecord } />\r\n\t\t\t) }\r\n\t\t</PanelBody>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}