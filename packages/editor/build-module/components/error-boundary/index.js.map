{"version":3,"names":["Component","__","Button","select","Warning","useCopyToClipboard","doAction","store","editorStore","jsx","_jsx","getContent","getEditedPostContent","error","CopyButton","text","children","ref","__next40pxDefaultSize","variant","ErrorBoundary","constructor","arguments","state","componentDidCatch","getDerivedStateFromError","render","props","actions","stack","className"],"sources":["@wordpress/editor/src/components/error-boundary/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { Component } from '@wordpress/element';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { Button } from '@wordpress/components';\r\nimport { select } from '@wordpress/data';\r\nimport { Warning } from '@wordpress/block-editor';\r\nimport { useCopyToClipboard } from '@wordpress/compose';\r\nimport { doAction } from '@wordpress/hooks';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as editorStore } from '../../store';\r\n\r\nfunction getContent() {\r\n\ttry {\r\n\t\t// While `select` in a component is generally discouraged, it is\r\n\t\t// used here because it (a) reduces the chance of data loss in the\r\n\t\t// case of additional errors by performing a direct retrieval and\r\n\t\t// (b) avoids the performance cost associated with unnecessary\r\n\t\t// content serialization throughout the lifetime of a non-erroring\r\n\t\t// application.\r\n\t\treturn select( editorStore ).getEditedPostContent();\r\n\t} catch ( error ) {}\r\n}\r\n\r\nfunction CopyButton( { text, children } ) {\r\n\tconst ref = useCopyToClipboard( text );\r\n\treturn (\r\n\t\t<Button\r\n\t\t\t// TODO: Switch to `true` (40px size) if possible\r\n\t\t\t__next40pxDefaultSize={ false }\r\n\t\t\tvariant=\"secondary\"\r\n\t\t\tref={ ref }\r\n\t\t>\r\n\t\t\t{ children }\r\n\t\t</Button>\r\n\t);\r\n}\r\n\r\nclass ErrorBoundary extends Component {\r\n\tconstructor() {\r\n\t\tsuper( ...arguments );\r\n\r\n\t\tthis.state = {\r\n\t\t\terror: null,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidCatch( error ) {\r\n\t\tdoAction( 'editor.ErrorBoundary.errorLogged', error );\r\n\t}\r\n\r\n\tstatic getDerivedStateFromError( error ) {\r\n\t\treturn { error };\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { error } = this.state;\r\n\t\tif ( ! error ) {\r\n\t\t\treturn this.props.children;\r\n\t\t}\r\n\r\n\t\tconst actions = [\r\n\t\t\t<CopyButton key=\"copy-post\" text={ getContent }>\r\n\t\t\t\t{ __( 'Copy Post Text' ) }\r\n\t\t\t</CopyButton>,\r\n\t\t\t<CopyButton key=\"copy-error\" text={ error.stack }>\r\n\t\t\t\t{ __( 'Copy Error' ) }\r\n\t\t\t</CopyButton>,\r\n\t\t];\r\n\r\n\t\treturn (\r\n\t\t\t<Warning className=\"editor-error-boundary\" actions={ actions }>\r\n\t\t\t\t{ __( 'The editor has encountered an unexpected error.' ) }\r\n\t\t\t</Warning>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n/**\r\n * ErrorBoundary is used to catch JavaScript errors anywhere in a child component tree, log those errors, and display a fallback UI.\r\n *\r\n * It uses the lifecycle methods getDerivedStateFromError and componentDidCatch to catch errors in a child component tree.\r\n *\r\n * getDerivedStateFromError is used to render a fallback UI after an error has been thrown, and componentDidCatch is used to log error information.\r\n *\r\n * @class ErrorBoundary\r\n * @augments Component\r\n */\r\nexport default ErrorBoundary;\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,SAAS,QAAQ,oBAAoB;AAC9C,SAASC,EAAE,QAAQ,iBAAiB;AACpC,SAASC,MAAM,QAAQ,uBAAuB;AAC9C,SAASC,MAAM,QAAQ,iBAAiB;AACxC,SAASC,OAAO,QAAQ,yBAAyB;AACjD,SAASC,kBAAkB,QAAQ,oBAAoB;AACvD,SAASC,QAAQ,QAAQ,kBAAkB;;AAE3C;AACA;AACA;AACA,SAASC,KAAK,IAAIC,WAAW,QAAQ,aAAa;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAEnD,SAASC,UAAUA,CAAA,EAAG;EACrB,IAAI;IACH;IACA;IACA;IACA;IACA;IACA;IACA,OAAOR,MAAM,CAAEK,WAAY,CAAC,CAACI,oBAAoB,CAAC,CAAC;EACpD,CAAC,CAAC,OAAQC,KAAK,EAAG,CAAC;AACpB;AAEA,SAASC,UAAUA,CAAE;EAAEC,IAAI;EAAEC;AAAS,CAAC,EAAG;EACzC,MAAMC,GAAG,GAAGZ,kBAAkB,CAAEU,IAAK,CAAC;EACtC,oBACCL,IAAA,CAACR;EACA;EAAA;IACAgB,qBAAqB,EAAG,KAAO;IAC/BC,OAAO,EAAC,WAAW;IACnBF,GAAG,EAAGA,GAAK;IAAAD,QAAA,EAETA;EAAQ,CACH,CAAC;AAEX;AAEA,MAAMI,aAAa,SAASpB,SAAS,CAAC;EACrCqB,WAAWA,CAAA,EAAG;IACb,KAAK,CAAE,GAAGC,SAAU,CAAC;IAErB,IAAI,CAACC,KAAK,GAAG;MACZV,KAAK,EAAE;IACR,CAAC;EACF;EAEAW,iBAAiBA,CAAEX,KAAK,EAAG;IAC1BP,QAAQ,CAAE,kCAAkC,EAAEO,KAAM,CAAC;EACtD;EAEA,OAAOY,wBAAwBA,CAAEZ,KAAK,EAAG;IACxC,OAAO;MAAEA;IAAM,CAAC;EACjB;EAEAa,MAAMA,CAAA,EAAG;IACR,MAAM;MAAEb;IAAM,CAAC,GAAG,IAAI,CAACU,KAAK;IAC5B,IAAK,CAAEV,KAAK,EAAG;MACd,OAAO,IAAI,CAACc,KAAK,CAACX,QAAQ;IAC3B;IAEA,MAAMY,OAAO,GAAG,cACflB,IAAA,CAACI,UAAU;MAAiBC,IAAI,EAAGJ,UAAY;MAAAK,QAAA,EAC5Cf,EAAE,CAAE,gBAAiB;IAAC,GADT,WAEJ,CAAC,eACbS,IAAA,CAACI,UAAU;MAAkBC,IAAI,EAAGF,KAAK,CAACgB,KAAO;MAAAb,QAAA,EAC9Cf,EAAE,CAAE,YAAa;IAAC,GADL,YAEJ,CAAC,CACb;IAED,oBACCS,IAAA,CAACN,OAAO;MAAC0B,SAAS,EAAC,uBAAuB;MAACF,OAAO,EAAGA,OAAS;MAAAZ,QAAA,EAC3Df,EAAE,CAAE,iDAAkD;IAAC,CACjD,CAAC;EAEZ;AACD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAemB,aAAa","ignoreList":[]}