{"version":3,"names":["useShortcut","useDispatch","useSelect","store","interfaceStore","blockEditorStore","editorStore","EditorKeyboardShortcuts","isModeToggleDisabled","select","richEditingEnabled","codeEditingEnabled","getEditorSettings","getBlockSelectionStart","getActiveComplementaryArea","enableComplementaryArea","disableComplementaryArea","redo","undo","savePost","setIsListViewOpened","switchEditorMode","toggleDistractionFree","isEditedPostDirty","isPostSavingLocked","isListViewOpened","getEditorMode","isDisabled","event","preventDefault","isEditorSidebarOpened","includes","sidebarToOpen"],"sources":["@wordpress/editor/src/components/global-keyboard-shortcuts/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useShortcut } from '@wordpress/keyboard-shortcuts';\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\nimport { store as interfaceStore } from '@wordpress/interface';\r\nimport { store as blockEditorStore } from '@wordpress/block-editor';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as editorStore } from '../../store';\r\n\r\n/**\r\n * Handles the keyboard shortcuts for the editor.\r\n *\r\n * It provides functionality for various keyboard shortcuts such as toggling editor mode,\r\n * toggling distraction-free mode, undo/redo, saving the post, toggling list view,\r\n * and toggling the sidebar.\r\n */\r\nexport default function EditorKeyboardShortcuts() {\r\n\tconst isModeToggleDisabled = useSelect( ( select ) => {\r\n\t\tconst { richEditingEnabled, codeEditingEnabled } =\r\n\t\t\tselect( editorStore ).getEditorSettings();\r\n\t\treturn ! richEditingEnabled || ! codeEditingEnabled;\r\n\t}, [] );\r\n\tconst { getBlockSelectionStart } = useSelect( blockEditorStore );\r\n\tconst { getActiveComplementaryArea } = useSelect( interfaceStore );\r\n\tconst { enableComplementaryArea, disableComplementaryArea } =\r\n\t\tuseDispatch( interfaceStore );\r\n\tconst {\r\n\t\tredo,\r\n\t\tundo,\r\n\t\tsavePost,\r\n\t\tsetIsListViewOpened,\r\n\t\tswitchEditorMode,\r\n\t\ttoggleDistractionFree,\r\n\t} = useDispatch( editorStore );\r\n\tconst {\r\n\t\tisEditedPostDirty,\r\n\t\tisPostSavingLocked,\r\n\t\tisListViewOpened,\r\n\t\tgetEditorMode,\r\n\t} = useSelect( editorStore );\r\n\r\n\tuseShortcut(\r\n\t\t'core/editor/toggle-mode',\r\n\t\t() => {\r\n\t\t\tswitchEditorMode(\r\n\t\t\t\tgetEditorMode() === 'visual' ? 'text' : 'visual'\r\n\t\t\t);\r\n\t\t},\r\n\t\t{\r\n\t\t\tisDisabled: isModeToggleDisabled,\r\n\t\t}\r\n\t);\r\n\r\n\tuseShortcut( 'core/editor/toggle-distraction-free', () => {\r\n\t\ttoggleDistractionFree();\r\n\t} );\r\n\r\n\tuseShortcut( 'core/editor/undo', ( event ) => {\r\n\t\tundo();\r\n\t\tevent.preventDefault();\r\n\t} );\r\n\r\n\tuseShortcut( 'core/editor/redo', ( event ) => {\r\n\t\tredo();\r\n\t\tevent.preventDefault();\r\n\t} );\r\n\r\n\tuseShortcut( 'core/editor/save', ( event ) => {\r\n\t\tevent.preventDefault();\r\n\r\n\t\t/**\r\n\t\t * Do not save the post if post saving is locked.\r\n\t\t */\r\n\t\tif ( isPostSavingLocked() ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// TODO: This should be handled in the `savePost` effect in\r\n\t\t// considering `isSaveable`. See note on `isEditedPostSaveable`\r\n\t\t// selector about dirtiness and meta-boxes.\r\n\t\t//\r\n\t\t// See: `isEditedPostSaveable`\r\n\t\tif ( ! isEditedPostDirty() ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsavePost();\r\n\t} );\r\n\r\n\t// Only opens the list view. Other functionality for this shortcut happens in the rendered sidebar.\r\n\tuseShortcut( 'core/editor/toggle-list-view', ( event ) => {\r\n\t\tif ( ! isListViewOpened() ) {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tsetIsListViewOpened( true );\r\n\t\t}\r\n\t} );\r\n\r\n\tuseShortcut( 'core/editor/toggle-sidebar', ( event ) => {\r\n\t\t// This shortcut has no known clashes, but use preventDefault to prevent any\r\n\t\t// obscure shortcuts from triggering.\r\n\t\tevent.preventDefault();\r\n\t\tconst isEditorSidebarOpened = [\r\n\t\t\t'edit-post/document',\r\n\t\t\t'edit-post/block',\r\n\t\t].includes( getActiveComplementaryArea( 'core' ) );\r\n\r\n\t\tif ( isEditorSidebarOpened ) {\r\n\t\t\tdisableComplementaryArea( 'core' );\r\n\t\t} else {\r\n\t\t\tconst sidebarToOpen = getBlockSelectionStart()\r\n\t\t\t\t? 'edit-post/block'\r\n\t\t\t\t: 'edit-post/document';\r\n\t\t\tenableComplementaryArea( 'core', sidebarToOpen );\r\n\t\t}\r\n\t} );\r\n\r\n\treturn null;\r\n}\r\n"],"mappings":"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","ignoreList":[]}