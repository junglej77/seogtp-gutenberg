{"version":3,"names":["useSelect","useMediaQuery","useViewportMatch","__unstableMotion","motion","store","preferencesStore","useState","PinnedItems","blockEditorStore","BackButton","useHasBackButton","CollapsibleBlockToolbar","DocumentBar","DocumentTools","MoreMenu","PostPreviewButton","PostPublishButtonOrToggle","PostSavedState","PostViewLink","PreviewDropdown","editorStore","jsx","_jsx","jsxs","_jsxs","toolbarVariations","distractionFreeDisabled","y","distractionFreeHover","distractionFreeHidden","visible","hidden","backButtonVariations","x","Header","customSaveButton","forceIsDirty","forceDisableBlockTools","setEntitiesSavedStatesCallback","title","icon","isWideViewport","isLargeViewport","isTooNarrowForDocumentBar","isTextEditor","isPublishSidebarOpened","showIconLabels","hasFixedToolbar","isNestedEntity","select","get","getPreference","getEditorMode","getEditorSettings","_isPublishSidebarOpened","__unstableGetEditorMode","onNavigateToPreviousEntityRecord","isZoomedOutView","isBlockToolsCollapsed","setIsBlockToolsCollapsed","hasCenter","hasBackButton","className","children","div","variants","transition","type","Slot","disableBlockTools","isCollapsed","onToggle","forceIsAutosaveable","disabled","scope"],"sources":["@wordpress/editor/src/components/header/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect } from '@wordpress/data';\r\nimport { useMediaQuery, useViewportMatch } from '@wordpress/compose';\r\nimport { __unstableMotion as motion } from '@wordpress/components';\r\nimport { store as preferencesStore } from '@wordpress/preferences';\r\nimport { useState } from '@wordpress/element';\r\nimport { PinnedItems } from '@wordpress/interface';\r\nimport { store as blockEditorStore } from '@wordpress/block-editor';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BackButton, { useHasBackButton } from './back-button';\r\nimport CollapsibleBlockToolbar from '../collapsible-block-toolbar';\r\nimport DocumentBar from '../document-bar';\r\nimport DocumentTools from '../document-tools';\r\nimport MoreMenu from '../more-menu';\r\nimport PostPreviewButton from '../post-preview-button';\r\nimport PostPublishButtonOrToggle from '../post-publish-button/post-publish-button-or-toggle';\r\nimport PostSavedState from '../post-saved-state';\r\nimport PostViewLink from '../post-view-link';\r\nimport PreviewDropdown from '../preview-dropdown';\r\nimport { store as editorStore } from '../../store';\r\n\r\nconst toolbarVariations = {\r\n\tdistractionFreeDisabled: { y: '-50px' },\r\n\tdistractionFreeHover: { y: 0 },\r\n\tdistractionFreeHidden: { y: '-50px' },\r\n\tvisible: { y: 0 },\r\n\thidden: { y: 0 },\r\n};\r\n\r\nconst backButtonVariations = {\r\n\tdistractionFreeDisabled: { x: '-100%' },\r\n\tdistractionFreeHover: { x: 0 },\r\n\tdistractionFreeHidden: { x: '-100%' },\r\n\tvisible: { x: 0 },\r\n\thidden: { x: 0 },\r\n};\r\n\r\nfunction Header( {\r\n\tcustomSaveButton,\r\n\tforceIsDirty,\r\n\tforceDisableBlockTools,\r\n\tsetEntitiesSavedStatesCallback,\r\n\ttitle,\r\n\ticon,\r\n} ) {\r\n\tconst isWideViewport = useViewportMatch( 'large' );\r\n\tconst isLargeViewport = useViewportMatch( 'medium' );\r\n\tconst isTooNarrowForDocumentBar = useMediaQuery( '(max-width: 403px)' );\r\n\tconst {\r\n\t\tisTextEditor,\r\n\t\tisPublishSidebarOpened,\r\n\t\tshowIconLabels,\r\n\t\thasFixedToolbar,\r\n\t\tisNestedEntity,\r\n\t} = useSelect( ( select ) => {\r\n\t\tconst { get: getPreference } = select( preferencesStore );\r\n\t\tconst {\r\n\t\t\tgetEditorMode,\r\n\t\t\tgetEditorSettings,\r\n\t\t\tisPublishSidebarOpened: _isPublishSidebarOpened,\r\n\t\t} = select( editorStore );\r\n\t\tconst { __unstableGetEditorMode } = select( blockEditorStore );\r\n\r\n\t\treturn {\r\n\t\t\tisTextEditor: getEditorMode() === 'text',\r\n\t\t\tisPublishSidebarOpened: _isPublishSidebarOpened(),\r\n\t\t\tshowIconLabels: getPreference( 'core', 'showIconLabels' ),\r\n\t\t\thasFixedToolbar: getPreference( 'core', 'fixedToolbar' ),\r\n\t\t\tisNestedEntity:\r\n\t\t\t\t!! getEditorSettings().onNavigateToPreviousEntityRecord,\r\n\t\t\tisZoomedOutView: __unstableGetEditorMode() === 'zoom-out',\r\n\t\t};\r\n\t}, [] );\r\n\r\n\tconst [ isBlockToolsCollapsed, setIsBlockToolsCollapsed ] =\r\n\t\tuseState( true );\r\n\r\n\tconst hasCenter = isBlockToolsCollapsed && ! isTooNarrowForDocumentBar;\r\n\tconst hasBackButton = useHasBackButton();\r\n\r\n\t// The edit-post-header classname is only kept for backward compatibilty\r\n\t// as some plugins might be relying on its presence.\r\n\treturn (\r\n\t\t<div className=\"editor-header edit-post-header\">\r\n\t\t\t{ hasBackButton && (\r\n\t\t\t\t<motion.div\r\n\t\t\t\t\tclassName=\"editor-header__back-button\"\r\n\t\t\t\t\tvariants={ backButtonVariations }\r\n\t\t\t\t\ttransition={ { type: 'tween' } }\r\n\t\t\t\t>\r\n\t\t\t\t\t<BackButton.Slot />\r\n\t\t\t\t</motion.div>\r\n\t\t\t) }\r\n\t\t\t<motion.div\r\n\t\t\t\tvariants={ toolbarVariations }\r\n\t\t\t\tclassName=\"editor-header__toolbar\"\r\n\t\t\t\ttransition={ { type: 'tween' } }\r\n\t\t\t>\r\n\t\t\t\t<DocumentTools\r\n\t\t\t\t\tdisableBlockTools={ forceDisableBlockTools || isTextEditor }\r\n\t\t\t\t/>\r\n\t\t\t\t{ hasFixedToolbar && isLargeViewport && (\r\n\t\t\t\t\t<CollapsibleBlockToolbar\r\n\t\t\t\t\t\tisCollapsed={ isBlockToolsCollapsed }\r\n\t\t\t\t\t\tonToggle={ setIsBlockToolsCollapsed }\r\n\t\t\t\t\t/>\r\n\t\t\t\t) }\r\n\t\t\t</motion.div>\r\n\t\t\t{ hasCenter && (\r\n\t\t\t\t<motion.div\r\n\t\t\t\t\tclassName=\"editor-header__center\"\r\n\t\t\t\t\tvariants={ toolbarVariations }\r\n\t\t\t\t\ttransition={ { type: 'tween' } }\r\n\t\t\t\t>\r\n\t\t\t\t\t<DocumentBar title={ title } icon={ icon } />\r\n\t\t\t\t</motion.div>\r\n\t\t\t) }\r\n\t\t\t<motion.div\r\n\t\t\t\tvariants={ toolbarVariations }\r\n\t\t\t\ttransition={ { type: 'tween' } }\r\n\t\t\t\tclassName=\"editor-header__settings\"\r\n\t\t\t>\r\n\t\t\t\t{ ! customSaveButton && ! isPublishSidebarOpened && (\r\n\t\t\t\t\t// This button isn't completely hidden by the publish sidebar.\r\n\t\t\t\t\t// We can't hide the whole toolbar when the publish sidebar is open because\r\n\t\t\t\t\t// we want to prevent mounting/unmounting the PostPublishButtonOrToggle DOM node.\r\n\t\t\t\t\t// We track that DOM node to return focus to the PostPublishButtonOrToggle\r\n\t\t\t\t\t// when the publish sidebar has been closed.\r\n\t\t\t\t\t<PostSavedState forceIsDirty={ forceIsDirty } />\r\n\t\t\t\t) }\r\n\t\t\t\t<PreviewDropdown\r\n\t\t\t\t\tforceIsAutosaveable={ forceIsDirty }\r\n\t\t\t\t\tdisabled={ isNestedEntity }\r\n\t\t\t\t/>\r\n\t\t\t\t<PostPreviewButton\r\n\t\t\t\t\tclassName=\"editor-header__post-preview-button\"\r\n\t\t\t\t\tforceIsAutosaveable={ forceIsDirty }\r\n\t\t\t\t/>\r\n\t\t\t\t<PostViewLink />\r\n\t\t\t\t{ ( isWideViewport || ! showIconLabels ) && (\r\n\t\t\t\t\t<PinnedItems.Slot scope=\"core\" />\r\n\t\t\t\t) }\r\n\t\t\t\t{ ! customSaveButton && (\r\n\t\t\t\t\t<PostPublishButtonOrToggle\r\n\t\t\t\t\t\tforceIsDirty={ forceIsDirty }\r\n\t\t\t\t\t\tsetEntitiesSavedStatesCallback={\r\n\t\t\t\t\t\t\tsetEntitiesSavedStatesCallback\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t) }\r\n\t\t\t\t{ customSaveButton }\r\n\t\t\t\t<MoreMenu />\r\n\t\t\t</motion.div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Header;\r\n"],"mappings":"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","ignoreList":[]}