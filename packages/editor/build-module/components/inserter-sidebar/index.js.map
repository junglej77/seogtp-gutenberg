{"version":3,"names":["useDispatch","useSelect","store","blockEditorStore","privateApis","blockEditorPrivateApis","useViewportMatch","useCallback","useRef","preferencesStore","ESCAPE","interfaceStore","unlock","editorStore","jsx","_jsx","PrivateInserterLibrary","InserterSidebar","blockInsertionPoint","blockSectionRootClientId","inserterSidebarToggleRef","insertionPoint","showMostUsedBlocks","sidebarIsOpened","select","getInserterSidebarToggleRef","getInsertionPoint","isPublishSidebarOpened","getBlockInsertionPoint","getBlockRootClientId","__unstableGetEditorMode","getSectionRootClientId","get","getActiveComplementaryArea","getBlockSectionRootClientId","sectionRootClientId","setIsInserterOpened","disableComplementaryArea","isMobileViewport","libraryRef","closeInserterSidebar","current","focus","closeOnEscape","event","keyCode","defaultPrevented","preventDefault","inserterContents","className","children","showInserterHelpPanel","shouldFocusBlock","rootClientId","__experimentalInsertionIndex","index","onSelect","__experimentalInitialTab","tab","__experimentalInitialCategory","category","__experimentalFilterValue","filterValue","onPatternCategorySelection","undefined","ref","onClose","onKeyDown"],"sources":["@wordpress/editor/src/components/inserter-sidebar/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\nimport {\r\n\tstore as blockEditorStore,\r\n\tprivateApis as blockEditorPrivateApis,\r\n} from '@wordpress/block-editor';\r\nimport { useViewportMatch } from '@wordpress/compose';\r\nimport { useCallback, useRef } from '@wordpress/element';\r\nimport { store as preferencesStore } from '@wordpress/preferences';\r\nimport { ESCAPE } from '@wordpress/keycodes';\r\nimport { store as interfaceStore } from '@wordpress/interface';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { unlock } from '../../lock-unlock';\r\nimport { store as editorStore } from '../../store';\r\n\r\nconst { PrivateInserterLibrary } = unlock( blockEditorPrivateApis );\r\n\r\nexport default function InserterSidebar() {\r\n\tconst {\r\n\t\tblockInsertionPoint,\r\n\t\tblockSectionRootClientId,\r\n\t\tinserterSidebarToggleRef,\r\n\t\tinsertionPoint,\r\n\t\tshowMostUsedBlocks,\r\n\t\tsidebarIsOpened,\r\n\t} = useSelect( ( select ) => {\r\n\t\tconst {\r\n\t\t\tgetInserterSidebarToggleRef,\r\n\t\t\tgetInsertionPoint,\r\n\t\t\tisPublishSidebarOpened,\r\n\t\t} = unlock( select( editorStore ) );\r\n\t\tconst {\r\n\t\t\tgetBlockInsertionPoint,\r\n\t\t\tgetBlockRootClientId,\r\n\t\t\t__unstableGetEditorMode,\r\n\t\t\tgetSectionRootClientId,\r\n\t\t} = unlock( select( blockEditorStore ) );\r\n\t\tconst { get } = select( preferencesStore );\r\n\t\tconst { getActiveComplementaryArea } = select( interfaceStore );\r\n\t\tconst getBlockSectionRootClientId = () => {\r\n\t\t\tif ( __unstableGetEditorMode() === 'zoom-out' ) {\r\n\t\t\t\tconst sectionRootClientId = getSectionRootClientId();\r\n\r\n\t\t\t\tif ( sectionRootClientId ) {\r\n\t\t\t\t\treturn sectionRootClientId;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn getBlockRootClientId();\r\n\t\t};\r\n\t\treturn {\r\n\t\t\tblockInsertionPoint: getBlockInsertionPoint(),\r\n\t\t\tinserterSidebarToggleRef: getInserterSidebarToggleRef(),\r\n\t\t\tinsertionPoint: getInsertionPoint(),\r\n\t\t\tshowMostUsedBlocks: get( 'core', 'mostUsedBlocks' ),\r\n\t\t\tblockSectionRootClientId: getBlockSectionRootClientId(),\r\n\t\t\tsidebarIsOpened: !! (\r\n\t\t\t\tgetActiveComplementaryArea( 'core' ) || isPublishSidebarOpened()\r\n\t\t\t),\r\n\t\t};\r\n\t}, [] );\r\n\tconst { setIsInserterOpened } = useDispatch( editorStore );\r\n\tconst { disableComplementaryArea } = useDispatch( interfaceStore );\r\n\r\n\tconst isMobileViewport = useViewportMatch( 'medium', '<' );\r\n\tconst libraryRef = useRef();\r\n\r\n\t// When closing the inserter, focus should return to the toggle button.\r\n\tconst closeInserterSidebar = useCallback( () => {\r\n\t\tsetIsInserterOpened( false );\r\n\t\tinserterSidebarToggleRef.current?.focus();\r\n\t}, [ inserterSidebarToggleRef, setIsInserterOpened ] );\r\n\r\n\tconst closeOnEscape = useCallback(\r\n\t\t( event ) => {\r\n\t\t\tif ( event.keyCode === ESCAPE && ! event.defaultPrevented ) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tcloseInserterSidebar();\r\n\t\t\t}\r\n\t\t},\r\n\t\t[ closeInserterSidebar ]\r\n\t);\r\n\r\n\tconst inserterContents = (\r\n\t\t<div className=\"editor-inserter-sidebar__content\">\r\n\t\t\t<PrivateInserterLibrary\r\n\t\t\t\tshowMostUsedBlocks={ showMostUsedBlocks }\r\n\t\t\t\tshowInserterHelpPanel\r\n\t\t\t\tshouldFocusBlock={ isMobileViewport }\r\n\t\t\t\trootClientId={\r\n\t\t\t\t\tblockSectionRootClientId ?? blockInsertionPoint.rootClientId\r\n\t\t\t\t}\r\n\t\t\t\t__experimentalInsertionIndex={ blockInsertionPoint.index }\r\n\t\t\t\tonSelect={ insertionPoint.onSelect }\r\n\t\t\t\t__experimentalInitialTab={ insertionPoint.tab }\r\n\t\t\t\t__experimentalInitialCategory={ insertionPoint.category }\r\n\t\t\t\t__experimentalFilterValue={ insertionPoint.filterValue }\r\n\t\t\t\tonPatternCategorySelection={\r\n\t\t\t\t\tsidebarIsOpened\r\n\t\t\t\t\t\t? () => disableComplementaryArea( 'core' )\r\n\t\t\t\t\t\t: undefined\r\n\t\t\t\t}\r\n\t\t\t\tref={ libraryRef }\r\n\t\t\t\tonClose={ closeInserterSidebar }\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n\r\n\treturn (\r\n\t\t// eslint-disable-next-line jsx-a11y/no-static-element-interactions\r\n\t\t<div onKeyDown={ closeOnEscape } className=\"editor-inserter-sidebar\">\r\n\t\t\t{ inserterContents }\r\n\t\t</div>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}