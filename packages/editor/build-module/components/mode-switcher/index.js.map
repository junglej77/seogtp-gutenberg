{"version":3,"names":["__","MenuItemsChoice","MenuGroup","useSelect","useDispatch","store","keyboardShortcutsStore","editorStore","jsx","_jsx","MODES","value","label","ModeSwitcher","shortcut","isRichEditingEnabled","isCodeEditingEnabled","mode","select","getShortcutRepresentation","getEditorSettings","richEditingEnabled","codeEditingEnabled","getEditorMode","switchEditorMode","selectedMode","choices","map","choice","disabled","info","children","onSelect"],"sources":["@wordpress/editor/src/components/mode-switcher/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { MenuItemsChoice, MenuGroup } from '@wordpress/components';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { store as keyboardShortcutsStore } from '@wordpress/keyboard-shortcuts';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as editorStore } from '../../store';\r\n\r\n/**\r\n * Set of available mode options.\r\n *\r\n * @type {Array}\r\n */\r\nconst MODES = [\r\n\t{\r\n\t\tvalue: 'visual',\r\n\t\tlabel: __( 'Visual editor' ),\r\n\t},\r\n\t{\r\n\t\tvalue: 'text',\r\n\t\tlabel: __( 'Code editor' ),\r\n\t},\r\n];\r\n\r\nfunction ModeSwitcher() {\r\n\tconst { shortcut, isRichEditingEnabled, isCodeEditingEnabled, mode } =\r\n\t\tuseSelect(\r\n\t\t\t( select ) => ( {\r\n\t\t\t\tshortcut: select(\r\n\t\t\t\t\tkeyboardShortcutsStore\r\n\t\t\t\t).getShortcutRepresentation( 'core/editor/toggle-mode' ),\r\n\t\t\t\tisRichEditingEnabled:\r\n\t\t\t\t\tselect( editorStore ).getEditorSettings()\r\n\t\t\t\t\t\t.richEditingEnabled,\r\n\t\t\t\tisCodeEditingEnabled:\r\n\t\t\t\t\tselect( editorStore ).getEditorSettings()\r\n\t\t\t\t\t\t.codeEditingEnabled,\r\n\t\t\t\tmode: select( editorStore ).getEditorMode(),\r\n\t\t\t} ),\r\n\t\t\t[]\r\n\t\t);\r\n\tconst { switchEditorMode } = useDispatch( editorStore );\r\n\r\n\tlet selectedMode = mode;\r\n\tif ( ! isRichEditingEnabled && mode === 'visual' ) {\r\n\t\tselectedMode = 'text';\r\n\t}\r\n\tif ( ! isCodeEditingEnabled && mode === 'text' ) {\r\n\t\tselectedMode = 'visual';\r\n\t}\r\n\r\n\tconst choices = MODES.map( ( choice ) => {\r\n\t\tif ( ! isCodeEditingEnabled && choice.value === 'text' ) {\r\n\t\t\tchoice = {\r\n\t\t\t\t...choice,\r\n\t\t\t\tdisabled: true,\r\n\t\t\t};\r\n\t\t}\r\n\t\tif ( ! isRichEditingEnabled && choice.value === 'visual' ) {\r\n\t\t\tchoice = {\r\n\t\t\t\t...choice,\r\n\t\t\t\tdisabled: true,\r\n\t\t\t\tinfo: __(\r\n\t\t\t\t\t'You can enable the visual editor in your profile settings.'\r\n\t\t\t\t),\r\n\t\t\t};\r\n\t\t}\r\n\t\tif ( choice.value !== selectedMode && ! choice.disabled ) {\r\n\t\t\treturn { ...choice, shortcut };\r\n\t\t}\r\n\t\treturn choice;\r\n\t} );\r\n\r\n\treturn (\r\n\t\t<MenuGroup label={ __( 'Editor' ) }>\r\n\t\t\t<MenuItemsChoice\r\n\t\t\t\tchoices={ choices }\r\n\t\t\t\tvalue={ selectedMode }\r\n\t\t\t\tonSelect={ switchEditorMode }\r\n\t\t\t/>\r\n\t\t</MenuGroup>\r\n\t);\r\n}\r\n\r\nexport default ModeSwitcher;\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,EAAE,QAAQ,iBAAiB;AACpC,SAASC,eAAe,EAAEC,SAAS,QAAQ,uBAAuB;AAClE,SAASC,SAAS,EAAEC,WAAW,QAAQ,iBAAiB;AACxD,SAASC,KAAK,IAAIC,sBAAsB,QAAQ,+BAA+B;;AAE/E;AACA;AACA;AACA,SAASD,KAAK,IAAIE,WAAW,QAAQ,aAAa;;AAElD;AACA;AACA;AACA;AACA;AAJA,SAAAC,GAAA,IAAAC,IAAA;AAKA,MAAMC,KAAK,GAAG,CACb;EACCC,KAAK,EAAE,QAAQ;EACfC,KAAK,EAAEZ,EAAE,CAAE,eAAgB;AAC5B,CAAC,EACD;EACCW,KAAK,EAAE,MAAM;EACbC,KAAK,EAAEZ,EAAE,CAAE,aAAc;AAC1B,CAAC,CACD;AAED,SAASa,YAAYA,CAAA,EAAG;EACvB,MAAM;IAAEC,QAAQ;IAAEC,oBAAoB;IAAEC,oBAAoB;IAAEC;EAAK,CAAC,GACnEd,SAAS,CACNe,MAAM,KAAQ;IACfJ,QAAQ,EAAEI,MAAM,CACfZ,sBACD,CAAC,CAACa,yBAAyB,CAAE,yBAA0B,CAAC;IACxDJ,oBAAoB,EACnBG,MAAM,CAAEX,WAAY,CAAC,CAACa,iBAAiB,CAAC,CAAC,CACvCC,kBAAkB;IACrBL,oBAAoB,EACnBE,MAAM,CAAEX,WAAY,CAAC,CAACa,iBAAiB,CAAC,CAAC,CACvCE,kBAAkB;IACrBL,IAAI,EAAEC,MAAM,CAAEX,WAAY,CAAC,CAACgB,aAAa,CAAC;EAC3C,CAAC,CAAE,EACH,EACD,CAAC;EACF,MAAM;IAAEC;EAAiB,CAAC,GAAGpB,WAAW,CAAEG,WAAY,CAAC;EAEvD,IAAIkB,YAAY,GAAGR,IAAI;EACvB,IAAK,CAAEF,oBAAoB,IAAIE,IAAI,KAAK,QAAQ,EAAG;IAClDQ,YAAY,GAAG,MAAM;EACtB;EACA,IAAK,CAAET,oBAAoB,IAAIC,IAAI,KAAK,MAAM,EAAG;IAChDQ,YAAY,GAAG,QAAQ;EACxB;EAEA,MAAMC,OAAO,GAAGhB,KAAK,CAACiB,GAAG,CAAIC,MAAM,IAAM;IACxC,IAAK,CAAEZ,oBAAoB,IAAIY,MAAM,CAACjB,KAAK,KAAK,MAAM,EAAG;MACxDiB,MAAM,GAAG;QACR,GAAGA,MAAM;QACTC,QAAQ,EAAE;MACX,CAAC;IACF;IACA,IAAK,CAAEd,oBAAoB,IAAIa,MAAM,CAACjB,KAAK,KAAK,QAAQ,EAAG;MAC1DiB,MAAM,GAAG;QACR,GAAGA,MAAM;QACTC,QAAQ,EAAE,IAAI;QACdC,IAAI,EAAE9B,EAAE,CACP,4DACD;MACD,CAAC;IACF;IACA,IAAK4B,MAAM,CAACjB,KAAK,KAAKc,YAAY,IAAI,CAAEG,MAAM,CAACC,QAAQ,EAAG;MACzD,OAAO;QAAE,GAAGD,MAAM;QAAEd;MAAS,CAAC;IAC/B;IACA,OAAOc,MAAM;EACd,CAAE,CAAC;EAEH,oBACCnB,IAAA,CAACP,SAAS;IAACU,KAAK,EAAGZ,EAAE,CAAE,QAAS,CAAG;IAAA+B,QAAA,eAClCtB,IAAA,CAACR,eAAe;MACfyB,OAAO,EAAGA,OAAS;MACnBf,KAAK,EAAGc,YAAc;MACtBO,QAAQ,EAAGR;IAAkB,CAC7B;EAAC,CACQ,CAAC;AAEd;AAEA,eAAeX,YAAY","ignoreList":[]}