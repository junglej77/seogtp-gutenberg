{"version":3,"names":["useDispatch","useSelect","useMemo","useEffect","store","editorStore","unlock","jsx","_jsx","usePostActions","postType","onActionPerformed","context","defaultActions","select","getEntityActions","registerPostTypeActions","actions","filter","action","i","length","callback","existingCallback","items","argsObject","_items","id","RenderModal","ExistingRenderModal","props"],"sources":["@wordpress/editor/src/components/post-actions/actions.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\nimport { useMemo, useEffect } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as editorStore } from '../../store';\r\nimport { unlock } from '../../lock-unlock';\r\n\r\nexport function usePostActions( { postType, onActionPerformed, context } ) {\r\n\tconst { defaultActions } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst { getEntityActions } = unlock( select( editorStore ) );\r\n\t\t\treturn {\r\n\t\t\t\tdefaultActions: getEntityActions( 'postType', postType ),\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ postType ]\r\n\t);\r\n\r\n\tconst { registerPostTypeActions } = unlock( useDispatch( editorStore ) );\r\n\tuseEffect( () => {\r\n\t\tregisterPostTypeActions( postType );\r\n\t}, [ registerPostTypeActions, postType ] );\r\n\r\n\treturn useMemo( () => {\r\n\t\t// Filter actions based on provided context. If not provided\r\n\t\t// all actions are returned. We'll have a single entry for getting the actions\r\n\t\t// and the consumer should provide the context to filter the actions, if needed.\r\n\t\t// Actions should also provide the `context` they support, if it's specific, to\r\n\t\t// compare with the provided context to get all the actions.\r\n\t\t// Right now the only supported context is `list`.\r\n\t\tconst actions = defaultActions.filter( ( action ) => {\r\n\t\t\tif ( ! action.context ) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn action.context === context;\r\n\t\t} );\r\n\r\n\t\tif ( onActionPerformed ) {\r\n\t\t\tfor ( let i = 0; i < actions.length; ++i ) {\r\n\t\t\t\tif ( actions[ i ].callback ) {\r\n\t\t\t\t\tconst existingCallback = actions[ i ].callback;\r\n\t\t\t\t\tactions[ i ] = {\r\n\t\t\t\t\t\t...actions[ i ],\r\n\t\t\t\t\t\tcallback: ( items, argsObject ) => {\r\n\t\t\t\t\t\t\texistingCallback( items, {\r\n\t\t\t\t\t\t\t\t...argsObject,\r\n\t\t\t\t\t\t\t\tonActionPerformed: ( _items ) => {\r\n\t\t\t\t\t\t\t\t\tif ( argsObject?.onActionPerformed ) {\r\n\t\t\t\t\t\t\t\t\t\targsObject.onActionPerformed( _items );\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tonActionPerformed(\r\n\t\t\t\t\t\t\t\t\t\tactions[ i ].id,\r\n\t\t\t\t\t\t\t\t\t\t_items\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t} );\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tif ( actions[ i ].RenderModal ) {\r\n\t\t\t\t\tconst ExistingRenderModal = actions[ i ].RenderModal;\r\n\t\t\t\t\tactions[ i ] = {\r\n\t\t\t\t\t\t...actions[ i ],\r\n\t\t\t\t\t\tRenderModal: ( props ) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<ExistingRenderModal\r\n\t\t\t\t\t\t\t\t\t{ ...props }\r\n\t\t\t\t\t\t\t\t\tonActionPerformed={ ( _items ) => {\r\n\t\t\t\t\t\t\t\t\t\tif ( props.onActionPerformed ) {\r\n\t\t\t\t\t\t\t\t\t\t\tprops.onActionPerformed( _items );\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tonActionPerformed(\r\n\t\t\t\t\t\t\t\t\t\t\tactions[ i ].id,\r\n\t\t\t\t\t\t\t\t\t\t\t_items\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn actions;\r\n\t}, [ defaultActions, onActionPerformed, context ] );\r\n}\r\n"],"mappings":"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","ignoreList":[]}