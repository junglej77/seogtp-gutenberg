{"version":3,"names":["clsx","Icon","__experimentalHStack","HStack","__experimentalText","Text","store","coreStore","useSelect","__","decodeEntities","editorStore","TEMPLATE_POST_TYPE","TEMPLATE_PART_POST_TYPE","PATTERN_POST_TYPE","GLOBAL_POST_TYPES","unlock","PostActions","jsx","_jsx","jsxs","_jsxs","PostCardPanel","postType","postId","onActionPerformed","isFrontPage","isPostsPage","title","icon","isSync","select","__experimentalGetTemplateInfo","canUser","getEditedEntityRecord","siteSettings","kind","name","undefined","_record","_templateInfo","includes","_isSync","currentSyncStatus","meta","wp_pattern_sync_status","getPostIcon","area","page_on_front","page_for_posts","className","children","spacing","align","numberOfLines","truncate","weight","as","lineHeight"],"sources":["@wordpress/editor/src/components/post-card-panel/index.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport clsx from 'clsx';\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tIcon,\r\n\t__experimentalHStack as HStack,\r\n\t__experimentalText as Text,\r\n} from '@wordpress/components';\r\nimport { store as coreStore } from '@wordpress/core-data';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { decodeEntities } from '@wordpress/html-entities';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as editorStore } from '../../store';\r\nimport {\r\n\tTEMPLATE_POST_TYPE,\r\n\tTEMPLATE_PART_POST_TYPE,\r\n\tPATTERN_POST_TYPE,\r\n\tGLOBAL_POST_TYPES,\r\n} from '../../store/constants';\r\nimport { unlock } from '../../lock-unlock';\r\nimport PostActions from '../post-actions';\r\n\r\nexport default function PostCardPanel( {\r\n\tpostType,\r\n\tpostId,\r\n\tonActionPerformed,\r\n} ) {\r\n\tconst { isFrontPage, isPostsPage, title, icon, isSync } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst { __experimentalGetTemplateInfo } = select( editorStore );\r\n\t\t\tconst { canUser, getEditedEntityRecord } = select( coreStore );\r\n\t\t\tconst siteSettings = canUser( 'read', {\r\n\t\t\t\tkind: 'root',\r\n\t\t\t\tname: 'site',\r\n\t\t\t} )\r\n\t\t\t\t? getEditedEntityRecord( 'root', 'site' )\r\n\t\t\t\t: undefined;\r\n\t\t\tconst _record = getEditedEntityRecord(\r\n\t\t\t\t'postType',\r\n\t\t\t\tpostType,\r\n\t\t\t\tpostId\r\n\t\t\t);\r\n\t\t\tconst _templateInfo =\r\n\t\t\t\t[ TEMPLATE_POST_TYPE, TEMPLATE_PART_POST_TYPE ].includes(\r\n\t\t\t\t\tpostType\r\n\t\t\t\t) && __experimentalGetTemplateInfo( _record );\r\n\t\t\tlet _isSync = false;\r\n\t\t\tif ( GLOBAL_POST_TYPES.includes( postType ) ) {\r\n\t\t\t\tif ( PATTERN_POST_TYPE === postType ) {\r\n\t\t\t\t\t// When the post is first created, the top level wp_pattern_sync_status is not set so get meta value instead.\r\n\t\t\t\t\tconst currentSyncStatus =\r\n\t\t\t\t\t\t_record?.meta?.wp_pattern_sync_status === 'unsynced'\r\n\t\t\t\t\t\t\t? 'unsynced'\r\n\t\t\t\t\t\t\t: _record?.wp_pattern_sync_status;\r\n\t\t\t\t\t_isSync = currentSyncStatus !== 'unsynced';\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_isSync = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\ttitle: _templateInfo?.title || _record?.title,\r\n\t\t\t\ticon: unlock( select( editorStore ) ).getPostIcon( postType, {\r\n\t\t\t\t\tarea: _record?.area,\r\n\t\t\t\t} ),\r\n\t\t\t\tisSync: _isSync,\r\n\t\t\t\tisFrontPage: siteSettings?.page_on_front === postId,\r\n\t\t\t\tisPostsPage: siteSettings?.page_for_posts === postId,\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ postId, postType ]\r\n\t);\r\n\treturn (\r\n\t\t<div className=\"editor-post-card-panel\">\r\n\t\t\t<HStack\r\n\t\t\t\tspacing={ 2 }\r\n\t\t\t\tclassName=\"editor-post-card-panel__header\"\r\n\t\t\t\talign=\"flex-start\"\r\n\t\t\t>\r\n\t\t\t\t<Icon\r\n\t\t\t\t\tclassName={ clsx( 'editor-post-card-panel__icon', {\r\n\t\t\t\t\t\t'is-sync': isSync,\r\n\t\t\t\t\t} ) }\r\n\t\t\t\t\ticon={ icon }\r\n\t\t\t\t/>\r\n\t\t\t\t<Text\r\n\t\t\t\t\tnumberOfLines={ 2 }\r\n\t\t\t\t\ttruncate\r\n\t\t\t\t\tclassName=\"editor-post-card-panel__title\"\r\n\t\t\t\t\tweight={ 500 }\r\n\t\t\t\t\tas=\"h2\"\r\n\t\t\t\t\tlineHeight=\"20px\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{ title ? decodeEntities( title ) : __( 'No title' ) }\r\n\t\t\t\t\t{ isFrontPage && (\r\n\t\t\t\t\t\t<span className=\"editor-post-card-panel__title-badge\">\r\n\t\t\t\t\t\t\t{ __( 'Homepage' ) }\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t) }\r\n\t\t\t\t\t{ isPostsPage && (\r\n\t\t\t\t\t\t<span className=\"editor-post-card-panel__title-badge\">\r\n\t\t\t\t\t\t\t{ __( 'Posts Page' ) }\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t) }\r\n\t\t\t\t</Text>\r\n\t\t\t\t<PostActions\r\n\t\t\t\t\tpostType={ postType }\r\n\t\t\t\t\tpostId={ postId }\r\n\t\t\t\t\tonActionPerformed={ onActionPerformed }\r\n\t\t\t\t/>\r\n\t\t\t</HStack>\r\n\t\t</div>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}