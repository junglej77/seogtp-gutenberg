{"version":3,"names":["__","useSelect","PanelBody","store","coreStore","useState","useEffect","HierarchicalTermSelector","editorStore","jsx","_jsx","jsxs","_jsxs","MaybeCategoryPanel","hasNoCategory","select","postType","getCurrentPostType","canUser","getEntityRecord","getTaxonomy","categoriesTaxonomy","defaultCategoryId","kind","name","default_category","undefined","defaultCategory","postTypeSupportsCategories","types","some","type","categories","getEditedPostAttribute","rest_base","length","id","shouldShowPanel","setShouldShowPanel","panelBodyTitle","className","children","initialOpen","title","slug"],"sources":["@wordpress/editor/src/components/post-publish-panel/maybe-category-panel.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { PanelBody } from '@wordpress/components';\r\nimport { store as coreStore } from '@wordpress/core-data';\r\nimport { useState, useEffect } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport HierarchicalTermSelector from '../post-taxonomies/hierarchical-term-selector';\r\nimport { store as editorStore } from '../../store';\r\n\r\nfunction MaybeCategoryPanel() {\r\n\tconst hasNoCategory = useSelect( ( select ) => {\r\n\t\tconst postType = select( editorStore ).getCurrentPostType();\r\n\t\tconst { canUser, getEntityRecord, getTaxonomy } = select( coreStore );\r\n\t\tconst categoriesTaxonomy = getTaxonomy( 'category' );\r\n\t\tconst defaultCategoryId = canUser( 'read', {\r\n\t\t\tkind: 'root',\r\n\t\t\tname: 'site',\r\n\t\t} )\r\n\t\t\t? getEntityRecord( 'root', 'site' )?.default_category\r\n\t\t\t: undefined;\r\n\t\tconst defaultCategory = defaultCategoryId\r\n\t\t\t? getEntityRecord( 'taxonomy', 'category', defaultCategoryId )\r\n\t\t\t: undefined;\r\n\t\tconst postTypeSupportsCategories =\r\n\t\t\tcategoriesTaxonomy &&\r\n\t\t\tcategoriesTaxonomy.types.some( ( type ) => type === postType );\r\n\t\tconst categories =\r\n\t\t\tcategoriesTaxonomy &&\r\n\t\t\tselect( editorStore ).getEditedPostAttribute(\r\n\t\t\t\tcategoriesTaxonomy.rest_base\r\n\t\t\t);\r\n\r\n\t\t// This boolean should return true if everything is loaded\r\n\t\t// ( categoriesTaxonomy, defaultCategory )\r\n\t\t// and the post has not been assigned a category different than \"uncategorized\".\r\n\t\treturn (\r\n\t\t\t!! categoriesTaxonomy &&\r\n\t\t\t!! defaultCategory &&\r\n\t\t\tpostTypeSupportsCategories &&\r\n\t\t\t( categories?.length === 0 ||\r\n\t\t\t\t( categories?.length === 1 &&\r\n\t\t\t\t\tdefaultCategory?.id === categories[ 0 ] ) )\r\n\t\t);\r\n\t}, [] );\r\n\tconst [ shouldShowPanel, setShouldShowPanel ] = useState( false );\r\n\tuseEffect( () => {\r\n\t\t// We use state to avoid hiding the panel if the user edits the categories\r\n\t\t// and adds one within the panel itself (while visible).\r\n\t\tif ( hasNoCategory ) {\r\n\t\t\tsetShouldShowPanel( true );\r\n\t\t}\r\n\t}, [ hasNoCategory ] );\r\n\r\n\tif ( ! shouldShowPanel ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst panelBodyTitle = [\r\n\t\t__( 'Suggestion:' ),\r\n\t\t<span className=\"editor-post-publish-panel__link\" key=\"label\">\r\n\t\t\t{ __( 'Assign a category' ) }\r\n\t\t</span>,\r\n\t];\r\n\r\n\treturn (\r\n\t\t<PanelBody initialOpen={ false } title={ panelBodyTitle }>\r\n\t\t\t<p>\r\n\t\t\t\t{ __(\r\n\t\t\t\t\t'Categories provide a helpful way to group related posts together and to quickly tell readers what a post is about.'\r\n\t\t\t\t) }\r\n\t\t\t</p>\r\n\t\t\t<HierarchicalTermSelector slug=\"category\" />\r\n\t\t</PanelBody>\r\n\t);\r\n}\r\n\r\nexport default MaybeCategoryPanel;\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,EAAE,QAAQ,iBAAiB;AACpC,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,SAAS,QAAQ,uBAAuB;AACjD,SAASC,KAAK,IAAIC,SAAS,QAAQ,sBAAsB;AACzD,SAASC,QAAQ,EAAEC,SAAS,QAAQ,oBAAoB;;AAExD;AACA;AACA;AACA,OAAOC,wBAAwB,MAAM,+CAA+C;AACpF,SAASJ,KAAK,IAAIK,WAAW,QAAQ,aAAa;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAEnD,SAASC,kBAAkBA,CAAA,EAAG;EAC7B,MAAMC,aAAa,GAAGb,SAAS,CAAIc,MAAM,IAAM;IAC9C,MAAMC,QAAQ,GAAGD,MAAM,CAAEP,WAAY,CAAC,CAACS,kBAAkB,CAAC,CAAC;IAC3D,MAAM;MAAEC,OAAO;MAAEC,eAAe;MAAEC;IAAY,CAAC,GAAGL,MAAM,CAAEX,SAAU,CAAC;IACrE,MAAMiB,kBAAkB,GAAGD,WAAW,CAAE,UAAW,CAAC;IACpD,MAAME,iBAAiB,GAAGJ,OAAO,CAAE,MAAM,EAAE;MAC1CK,IAAI,EAAE,MAAM;MACZC,IAAI,EAAE;IACP,CAAE,CAAC,GACAL,eAAe,CAAE,MAAM,EAAE,MAAO,CAAC,EAAEM,gBAAgB,GACnDC,SAAS;IACZ,MAAMC,eAAe,GAAGL,iBAAiB,GACtCH,eAAe,CAAE,UAAU,EAAE,UAAU,EAAEG,iBAAkB,CAAC,GAC5DI,SAAS;IACZ,MAAME,0BAA0B,GAC/BP,kBAAkB,IAClBA,kBAAkB,CAACQ,KAAK,CAACC,IAAI,CAAIC,IAAI,IAAMA,IAAI,KAAKf,QAAS,CAAC;IAC/D,MAAMgB,UAAU,GACfX,kBAAkB,IAClBN,MAAM,CAAEP,WAAY,CAAC,CAACyB,sBAAsB,CAC3CZ,kBAAkB,CAACa,SACpB,CAAC;;IAEF;IACA;IACA;IACA,OACC,CAAC,CAAEb,kBAAkB,IACrB,CAAC,CAAEM,eAAe,IAClBC,0BAA0B,KACxBI,UAAU,EAAEG,MAAM,KAAK,CAAC,IACvBH,UAAU,EAAEG,MAAM,KAAK,CAAC,IACzBR,eAAe,EAAES,EAAE,KAAKJ,UAAU,CAAE,CAAC,CAAI,CAAE;EAE/C,CAAC,EAAE,EAAG,CAAC;EACP,MAAM,CAAEK,eAAe,EAAEC,kBAAkB,CAAE,GAAGjC,QAAQ,CAAE,KAAM,CAAC;EACjEC,SAAS,CAAE,MAAM;IAChB;IACA;IACA,IAAKQ,aAAa,EAAG;MACpBwB,kBAAkB,CAAE,IAAK,CAAC;IAC3B;EACD,CAAC,EAAE,CAAExB,aAAa,CAAG,CAAC;EAEtB,IAAK,CAAEuB,eAAe,EAAG;IACxB,OAAO,IAAI;EACZ;EAEA,MAAME,cAAc,GAAG,CACtBvC,EAAE,CAAE,aAAc,CAAC,eACnBU,IAAA;IAAM8B,SAAS,EAAC,iCAAiC;IAAAC,QAAA,EAC9CzC,EAAE,CAAE,mBAAoB;EAAC,GAD0B,OAEhD,CAAC,CACP;EAED,oBACCY,KAAA,CAACV,SAAS;IAACwC,WAAW,EAAG,KAAO;IAACC,KAAK,EAAGJ,cAAgB;IAAAE,QAAA,gBACxD/B,IAAA;MAAA+B,QAAA,EACGzC,EAAE,CACH,oHACD;IAAC,CACC,CAAC,eACJU,IAAA,CAACH,wBAAwB;MAACqC,IAAI,EAAC;IAAU,CAAE,CAAC;EAAA,CAClC,CAAC;AAEd;AAEA,eAAe/B,kBAAkB","ignoreList":[]}