{"version":3,"names":["__","useState","useSelect","PanelBody","store","coreStore","FlatTermSelector","editorStore","jsx","_jsx","jsxs","_jsxs","TagsPanel","panelBodyTitle","className","children","initialOpen","title","slug","__nextHasNoMarginBottom","MaybeTagsPanel","hasTags","isPostTypeSupported","select","postType","getCurrentPostType","tagsTaxonomy","getTaxonomy","_isPostTypeSupported","types","includes","areTagsFetched","undefined","tags","getEditedPostAttribute","rest_base","length","hadTagsWhenOpeningThePanel"],"sources":["@wordpress/editor/src/components/post-publish-panel/maybe-tags-panel.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useState } from '@wordpress/element';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { PanelBody } from '@wordpress/components';\r\nimport { store as coreStore } from '@wordpress/core-data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport FlatTermSelector from '../post-taxonomies/flat-term-selector';\r\nimport { store as editorStore } from '../../store';\r\n\r\nconst TagsPanel = () => {\r\n\tconst panelBodyTitle = [\r\n\t\t__( 'Suggestion:' ),\r\n\t\t<span className=\"editor-post-publish-panel__link\" key=\"label\">\r\n\t\t\t{ __( 'Add tags' ) }\r\n\t\t</span>,\r\n\t];\r\n\r\n\treturn (\r\n\t\t<PanelBody initialOpen={ false } title={ panelBodyTitle }>\r\n\t\t\t<p>\r\n\t\t\t\t{ __(\r\n\t\t\t\t\t'Tags help users and search engines navigate your site and find your content. Add a few keywords to describe your post.'\r\n\t\t\t\t) }\r\n\t\t\t</p>\r\n\t\t\t<FlatTermSelector slug=\"post_tag\" __nextHasNoMarginBottom />\r\n\t\t</PanelBody>\r\n\t);\r\n};\r\n\r\nconst MaybeTagsPanel = () => {\r\n\tconst { hasTags, isPostTypeSupported } = useSelect( ( select ) => {\r\n\t\tconst postType = select( editorStore ).getCurrentPostType();\r\n\t\tconst tagsTaxonomy = select( coreStore ).getTaxonomy( 'post_tag' );\r\n\t\tconst _isPostTypeSupported = tagsTaxonomy?.types?.includes( postType );\r\n\t\tconst areTagsFetched = tagsTaxonomy !== undefined;\r\n\t\tconst tags =\r\n\t\t\ttagsTaxonomy &&\r\n\t\t\tselect( editorStore ).getEditedPostAttribute(\r\n\t\t\t\ttagsTaxonomy.rest_base\r\n\t\t\t);\r\n\t\treturn {\r\n\t\t\thasTags: !! tags?.length,\r\n\t\t\tisPostTypeSupported: areTagsFetched && _isPostTypeSupported,\r\n\t\t};\r\n\t}, [] );\r\n\tconst [ hadTagsWhenOpeningThePanel ] = useState( hasTags );\r\n\r\n\tif ( ! isPostTypeSupported ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\t/*\r\n\t * We only want to show the tag panel if the post didn't have\r\n\t * any tags when the user hit the Publish button.\r\n\t *\r\n\t * We can't use the prop.hasTags because it'll change to true\r\n\t * if the user adds a new tag within the pre-publish panel.\r\n\t * This would force a re-render and a new prop.hasTags check,\r\n\t * hiding this panel and keeping the user from adding\r\n\t * more than one tag.\r\n\t */\r\n\tif ( ! hadTagsWhenOpeningThePanel ) {\r\n\t\treturn <TagsPanel />;\r\n\t}\r\n\r\n\treturn null;\r\n};\r\n\r\nexport default MaybeTagsPanel;\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,EAAE,QAAQ,iBAAiB;AACpC,SAASC,QAAQ,QAAQ,oBAAoB;AAC7C,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,SAAS,QAAQ,uBAAuB;AACjD,SAASC,KAAK,IAAIC,SAAS,QAAQ,sBAAsB;;AAEzD;AACA;AACA;AACA,OAAOC,gBAAgB,MAAM,uCAAuC;AACpE,SAASF,KAAK,IAAIG,WAAW,QAAQ,aAAa;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAEnD,MAAMC,SAAS,GAAGA,CAAA,KAAM;EACvB,MAAMC,cAAc,GAAG,CACtBb,EAAE,CAAE,aAAc,CAAC,eACnBS,IAAA;IAAMK,SAAS,EAAC,iCAAiC;IAAAC,QAAA,EAC9Cf,EAAE,CAAE,UAAW;EAAC,GADmC,OAEhD,CAAC,CACP;EAED,oBACCW,KAAA,CAACR,SAAS;IAACa,WAAW,EAAG,KAAO;IAACC,KAAK,EAAGJ,cAAgB;IAAAE,QAAA,gBACxDN,IAAA;MAAAM,QAAA,EACGf,EAAE,CACH,wHACD;IAAC,CACC,CAAC,eACJS,IAAA,CAACH,gBAAgB;MAACY,IAAI,EAAC,UAAU;MAACC,uBAAuB;IAAA,CAAE,CAAC;EAAA,CAClD,CAAC;AAEd,CAAC;AAED,MAAMC,cAAc,GAAGA,CAAA,KAAM;EAC5B,MAAM;IAAEC,OAAO;IAAEC;EAAoB,CAAC,GAAGpB,SAAS,CAAIqB,MAAM,IAAM;IACjE,MAAMC,QAAQ,GAAGD,MAAM,CAAEhB,WAAY,CAAC,CAACkB,kBAAkB,CAAC,CAAC;IAC3D,MAAMC,YAAY,GAAGH,MAAM,CAAElB,SAAU,CAAC,CAACsB,WAAW,CAAE,UAAW,CAAC;IAClE,MAAMC,oBAAoB,GAAGF,YAAY,EAAEG,KAAK,EAAEC,QAAQ,CAAEN,QAAS,CAAC;IACtE,MAAMO,cAAc,GAAGL,YAAY,KAAKM,SAAS;IACjD,MAAMC,IAAI,GACTP,YAAY,IACZH,MAAM,CAAEhB,WAAY,CAAC,CAAC2B,sBAAsB,CAC3CR,YAAY,CAACS,SACd,CAAC;IACF,OAAO;MACNd,OAAO,EAAE,CAAC,CAAEY,IAAI,EAAEG,MAAM;MACxBd,mBAAmB,EAAES,cAAc,IAAIH;IACxC,CAAC;EACF,CAAC,EAAE,EAAG,CAAC;EACP,MAAM,CAAES,0BAA0B,CAAE,GAAGpC,QAAQ,CAAEoB,OAAQ,CAAC;EAE1D,IAAK,CAAEC,mBAAmB,EAAG;IAC5B,OAAO,IAAI;EACZ;;EAEA;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC,IAAK,CAAEe,0BAA0B,EAAG;IACnC,oBAAO5B,IAAA,CAACG,SAAS,IAAE,CAAC;EACrB;EAEA,OAAO,IAAI;AACZ,CAAC;AAED,eAAeQ,cAAc","ignoreList":[]}