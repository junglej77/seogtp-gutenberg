{"version":3,"names":["PanelBody","Button","TextControl","__","sprintf","Component","createRef","withSelect","addQueryArgs","safeDecodeURIComponent","decodeEntities","useCopyToClipboard","store","coreStore","PostScheduleLabel","editorStore","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","POSTNAME","PAGENAME","getFuturePostUrl","post","slug","permalink_template","includes","replace","CopyButton","text","onCopy","children","ref","__next40pxDefaultSize","variant","PostPublishPanelPostpublish","constructor","arguments","state","showCopyConfirmation","bind","onSelectInput","postLink","componentDidMount","props","focusOnMount","current","focus","componentWillUnmount","clearTimeout","dismissCopyConfirmation","setState","setTimeout","event","target","select","render","isScheduled","postType","postLabel","labels","singular_name","viewPostLabel","view_item","addNewPostLabel","add_new_item","link","status","addLink","post_type","type","postPublishNonLinkHeader","className","href","title","__nextHasNoMarginBottom","readOnly","label","value","onFocus","getEditedPostAttribute","getCurrentPost","isCurrentPostScheduled","getPostType"],"sources":["@wordpress/editor/src/components/post-publish-panel/postpublish.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { PanelBody, Button, TextControl } from '@wordpress/components';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { Component, createRef } from '@wordpress/element';\r\nimport { withSelect } from '@wordpress/data';\r\nimport { addQueryArgs, safeDecodeURIComponent } from '@wordpress/url';\r\nimport { decodeEntities } from '@wordpress/html-entities';\r\nimport { useCopyToClipboard } from '@wordpress/compose';\r\nimport { store as coreStore } from '@wordpress/core-data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport PostScheduleLabel from '../post-schedule/label';\r\nimport { store as editorStore } from '../../store';\r\n\r\nconst POSTNAME = '%postname%';\r\nconst PAGENAME = '%pagename%';\r\n\r\n/**\r\n * Returns URL for a future post.\r\n *\r\n * @param {Object} post Post object.\r\n *\r\n * @return {string} PostPublish URL.\r\n */\r\n\r\nconst getFuturePostUrl = ( post ) => {\r\n\tconst { slug } = post;\r\n\r\n\tif ( post.permalink_template.includes( POSTNAME ) ) {\r\n\t\treturn post.permalink_template.replace( POSTNAME, slug );\r\n\t}\r\n\r\n\tif ( post.permalink_template.includes( PAGENAME ) ) {\r\n\t\treturn post.permalink_template.replace( PAGENAME, slug );\r\n\t}\r\n\r\n\treturn post.permalink_template;\r\n};\r\n\r\nfunction CopyButton( { text, onCopy, children } ) {\r\n\tconst ref = useCopyToClipboard( text, onCopy );\r\n\treturn (\r\n\t\t<Button __next40pxDefaultSize variant=\"secondary\" ref={ ref }>\r\n\t\t\t{ children }\r\n\t\t</Button>\r\n\t);\r\n}\r\n\r\nclass PostPublishPanelPostpublish extends Component {\r\n\tconstructor() {\r\n\t\tsuper( ...arguments );\r\n\t\tthis.state = {\r\n\t\t\tshowCopyConfirmation: false,\r\n\t\t};\r\n\t\tthis.onCopy = this.onCopy.bind( this );\r\n\t\tthis.onSelectInput = this.onSelectInput.bind( this );\r\n\t\tthis.postLink = createRef();\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tif ( this.props.focusOnMount ) {\r\n\t\t\tthis.postLink.current.focus();\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tclearTimeout( this.dismissCopyConfirmation );\r\n\t}\r\n\r\n\tonCopy() {\r\n\t\tthis.setState( {\r\n\t\t\tshowCopyConfirmation: true,\r\n\t\t} );\r\n\r\n\t\tclearTimeout( this.dismissCopyConfirmation );\r\n\t\tthis.dismissCopyConfirmation = setTimeout( () => {\r\n\t\t\tthis.setState( {\r\n\t\t\t\tshowCopyConfirmation: false,\r\n\t\t\t} );\r\n\t\t}, 4000 );\r\n\t}\r\n\r\n\tonSelectInput( event ) {\r\n\t\tevent.target.select();\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { children, isScheduled, post, postType } = this.props;\r\n\t\tconst postLabel = postType?.labels?.singular_name;\r\n\t\tconst viewPostLabel = postType?.labels?.view_item;\r\n\t\tconst addNewPostLabel = postType?.labels?.add_new_item;\r\n\t\tconst link =\r\n\t\t\tpost.status === 'future' ? getFuturePostUrl( post ) : post.link;\r\n\t\tconst addLink = addQueryArgs( 'post-new.php', {\r\n\t\t\tpost_type: post.type,\r\n\t\t} );\r\n\r\n\t\tconst postPublishNonLinkHeader = isScheduled ? (\r\n\t\t\t<>\r\n\t\t\t\t{ __( 'is now scheduled. It will go live on' ) }{ ' ' }\r\n\t\t\t\t<PostScheduleLabel />.\r\n\t\t\t</>\r\n\t\t) : (\r\n\t\t\t__( 'is now live.' )\r\n\t\t);\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"post-publish-panel__postpublish\">\r\n\t\t\t\t<PanelBody className=\"post-publish-panel__postpublish-header\">\r\n\t\t\t\t\t<a ref={ this.postLink } href={ link }>\r\n\t\t\t\t\t\t{ decodeEntities( post.title ) || __( '(no title)' ) }\r\n\t\t\t\t\t</a>{ ' ' }\r\n\t\t\t\t\t{ postPublishNonLinkHeader }\r\n\t\t\t\t</PanelBody>\r\n\t\t\t\t<PanelBody>\r\n\t\t\t\t\t<p className=\"post-publish-panel__postpublish-subheader\">\r\n\t\t\t\t\t\t<strong>{ __( 'Whatâ€™s next?' ) }</strong>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<div className=\"post-publish-panel__postpublish-post-address-container\">\r\n\t\t\t\t\t\t<TextControl\r\n\t\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\t\t\tclassName=\"post-publish-panel__postpublish-post-address\"\r\n\t\t\t\t\t\t\treadOnly\r\n\t\t\t\t\t\t\tlabel={ sprintf(\r\n\t\t\t\t\t\t\t\t/* translators: %s: post type singular name */\r\n\t\t\t\t\t\t\t\t__( '%s address' ),\r\n\t\t\t\t\t\t\t\tpostLabel\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\tvalue={ safeDecodeURIComponent( link ) }\r\n\t\t\t\t\t\t\tonFocus={ this.onSelectInput }\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<div className=\"post-publish-panel__postpublish-post-address__copy-button-wrap\">\r\n\t\t\t\t\t\t\t<CopyButton text={ link } onCopy={ this.onCopy }>\r\n\t\t\t\t\t\t\t\t{ this.state.showCopyConfirmation\r\n\t\t\t\t\t\t\t\t\t? __( 'Copied!' )\r\n\t\t\t\t\t\t\t\t\t: __( 'Copy' ) }\r\n\t\t\t\t\t\t\t</CopyButton>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"post-publish-panel__postpublish-buttons\">\r\n\t\t\t\t\t\t{ ! isScheduled && (\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\t\t\thref={ link }\r\n\t\t\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{ viewPostLabel }\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tvariant={ isScheduled ? 'primary' : 'secondary' }\r\n\t\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\t\thref={ addLink }\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{ addNewPostLabel }\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</PanelBody>\r\n\t\t\t\t{ children }\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withSelect( ( select ) => {\r\n\tconst { getEditedPostAttribute, getCurrentPost, isCurrentPostScheduled } =\r\n\t\tselect( editorStore );\r\n\tconst { getPostType } = select( coreStore );\r\n\r\n\treturn {\r\n\t\tpost: getCurrentPost(),\r\n\t\tpostType: getPostType( getEditedPostAttribute( 'type' ) ),\r\n\t\tisScheduled: isCurrentPostScheduled(),\r\n\t};\r\n} )( PostPublishPanelPostpublish );\r\n"],"mappings":"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","ignoreList":[]}