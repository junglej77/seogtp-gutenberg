{"version":3,"names":["__","_x","sprintf","isRTL","getSettings","getDate","dateI18n","useSelect","store","editorStore","PostScheduleLabel","props","usePostScheduleLabel","full","date","isFloating","select","getEditedPostAttribute","isEditedPostDateFloating","getFullPostScheduleLabel","getPostScheduleLabel","dateAttribute","timezoneAbbreviation","getTimezoneAbbreviation","formattedDate","now","Date","isTimezoneSameAsSiteTimezone","isSameDay","tomorrow","setDate","getFullYear","timezone","abbr","isNaN","Number","symbol","offset","offsetFormatted","siteOffset","dateOffset","getTimezoneOffset","left","right","getMonth"],"sources":["@wordpress/editor/src/components/post-schedule/label.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { __, _x, sprintf, isRTL } from '@wordpress/i18n';\r\nimport { getSettings, getDate, dateI18n } from '@wordpress/date';\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as editorStore } from '../../store';\r\n\r\n/**\r\n * Renders the PostScheduleLabel component.\r\n *\r\n * @param {Object} props Props.\r\n *\r\n * @return {Component} The component to be rendered.\r\n */\r\nexport default function PostScheduleLabel( props ) {\r\n\treturn usePostScheduleLabel( props );\r\n}\r\n\r\n/**\r\n * Custom hook to get the label for post schedule.\r\n *\r\n * @param {Object}  options      Options for the hook.\r\n * @param {boolean} options.full Whether to get the full label or not. Default is false.\r\n *\r\n * @return {string} The label for post schedule.\r\n */\r\nexport function usePostScheduleLabel( { full = false } = {} ) {\r\n\tconst { date, isFloating } = useSelect(\r\n\t\t( select ) => ( {\r\n\t\t\tdate: select( editorStore ).getEditedPostAttribute( 'date' ),\r\n\t\t\tisFloating: select( editorStore ).isEditedPostDateFloating(),\r\n\t\t} ),\r\n\t\t[]\r\n\t);\r\n\r\n\treturn full\r\n\t\t? getFullPostScheduleLabel( date )\r\n\t\t: getPostScheduleLabel( date, { isFloating } );\r\n}\r\n\r\nexport function getFullPostScheduleLabel( dateAttribute ) {\r\n\tconst date = getDate( dateAttribute );\r\n\r\n\tconst timezoneAbbreviation = getTimezoneAbbreviation();\r\n\tconst formattedDate = dateI18n(\r\n\t\t// translators: If using a space between 'g:i' and 'a', use a non-breaking space.\r\n\t\t_x( 'F j, Y g:i\\xa0a', 'post schedule full date format' ),\r\n\t\tdate\r\n\t);\r\n\treturn isRTL()\r\n\t\t? `${ timezoneAbbreviation } ${ formattedDate }`\r\n\t\t: `${ formattedDate } ${ timezoneAbbreviation }`;\r\n}\r\n\r\nexport function getPostScheduleLabel(\r\n\tdateAttribute,\r\n\t{ isFloating = false, now = new Date() } = {}\r\n) {\r\n\tif ( ! dateAttribute || isFloating ) {\r\n\t\treturn __( 'Immediately' );\r\n\t}\r\n\r\n\t// If the user timezone does not equal the site timezone then using words\r\n\t// like 'tomorrow' is confusing, so show the full date.\r\n\tif ( ! isTimezoneSameAsSiteTimezone( now ) ) {\r\n\t\treturn getFullPostScheduleLabel( dateAttribute );\r\n\t}\r\n\r\n\tconst date = getDate( dateAttribute );\r\n\r\n\tif ( isSameDay( date, now ) ) {\r\n\t\treturn sprintf(\r\n\t\t\t// translators: %s: Time of day the post is scheduled for.\r\n\t\t\t__( 'Today at %s' ),\r\n\t\t\t// translators: If using a space between 'g:i' and 'a', use a non-breaking space.\r\n\t\t\tdateI18n( _x( 'g:i\\xa0a', 'post schedule time format' ), date )\r\n\t\t);\r\n\t}\r\n\r\n\tconst tomorrow = new Date( now );\r\n\ttomorrow.setDate( tomorrow.getDate() + 1 );\r\n\r\n\tif ( isSameDay( date, tomorrow ) ) {\r\n\t\treturn sprintf(\r\n\t\t\t// translators: %s: Time of day the post is scheduled for.\r\n\t\t\t__( 'Tomorrow at %s' ),\r\n\t\t\t// translators: If using a space between 'g:i' and 'a', use a non-breaking space.\r\n\t\t\tdateI18n( _x( 'g:i\\xa0a', 'post schedule time format' ), date )\r\n\t\t);\r\n\t}\r\n\r\n\tif ( date.getFullYear() === now.getFullYear() ) {\r\n\t\treturn dateI18n(\r\n\t\t\t// translators: If using a space between 'g:i' and 'a', use a non-breaking space.\r\n\t\t\t_x( 'F j g:i\\xa0a', 'post schedule date format without year' ),\r\n\t\t\tdate\r\n\t\t);\r\n\t}\r\n\r\n\treturn dateI18n(\r\n\t\t// translators: Use a non-breaking space between 'g:i' and 'a' if appropriate.\r\n\t\t_x( 'F j, Y g:i\\xa0a', 'post schedule full date format' ),\r\n\t\tdate\r\n\t);\r\n}\r\n\r\nfunction getTimezoneAbbreviation() {\r\n\tconst { timezone } = getSettings();\r\n\r\n\tif ( timezone.abbr && isNaN( Number( timezone.abbr ) ) ) {\r\n\t\treturn timezone.abbr;\r\n\t}\r\n\r\n\tconst symbol = timezone.offset < 0 ? '' : '+';\r\n\treturn `UTC${ symbol }${ timezone.offsetFormatted }`;\r\n}\r\n\r\nfunction isTimezoneSameAsSiteTimezone( date ) {\r\n\tconst { timezone } = getSettings();\r\n\r\n\tconst siteOffset = Number( timezone.offset );\r\n\tconst dateOffset = -1 * ( date.getTimezoneOffset() / 60 );\r\n\treturn siteOffset === dateOffset;\r\n}\r\n\r\nfunction isSameDay( left, right ) {\r\n\treturn (\r\n\t\tleft.getDate() === right.getDate() &&\r\n\t\tleft.getMonth() === right.getMonth() &&\r\n\t\tleft.getFullYear() === right.getFullYear()\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}