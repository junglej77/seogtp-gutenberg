{"version":3,"names":["Button","__experimentalConfirmDialog","ConfirmDialog","__","useDispatch","useSelect","useState","deprecated","store","editorStore","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","PostSwitchToDraftButton","since","version","showConfirmDialog","setShowConfirmDialog","editPost","savePost","isSaving","isPublished","isScheduled","select","isSavingPost","isCurrentPostPublished","isCurrentPostScheduled","isDisabled","alertMessage","confirmButtonText","handleConfirm","status","children","__next40pxDefaultSize","className","onClick","variant","style","flexGrow","justifyContent","isOpen","onConfirm","onCancel"],"sources":["@wordpress/editor/src/components/post-switch-to-draft-button/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tButton,\r\n\t__experimentalConfirmDialog as ConfirmDialog,\r\n} from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\nimport { useState } from '@wordpress/element';\r\nimport deprecated from '@wordpress/deprecated';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as editorStore } from '../../store';\r\n\r\n/**\r\n * Renders a button component that allows the user to switch a post to draft status.\r\n *\r\n * @return {JSX.Element} The rendered component.\r\n */\r\nexport default function PostSwitchToDraftButton() {\r\n\tdeprecated( 'wp.editor.PostSwitchToDraftButton', {\r\n\t\tsince: '6.7',\r\n\t\tversion: '6.9',\r\n\t} );\r\n\tconst [ showConfirmDialog, setShowConfirmDialog ] = useState( false );\r\n\r\n\tconst { editPost, savePost } = useDispatch( editorStore );\r\n\tconst { isSaving, isPublished, isScheduled } = useSelect( ( select ) => {\r\n\t\tconst { isSavingPost, isCurrentPostPublished, isCurrentPostScheduled } =\r\n\t\t\tselect( editorStore );\r\n\t\treturn {\r\n\t\t\tisSaving: isSavingPost(),\r\n\t\t\tisPublished: isCurrentPostPublished(),\r\n\t\t\tisScheduled: isCurrentPostScheduled(),\r\n\t\t};\r\n\t}, [] );\r\n\r\n\tconst isDisabled = isSaving || ( ! isPublished && ! isScheduled );\r\n\r\n\tlet alertMessage;\r\n\tlet confirmButtonText;\r\n\tif ( isPublished ) {\r\n\t\talertMessage = __( 'Are you sure you want to unpublish this post?' );\r\n\t\tconfirmButtonText = __( 'Unpublish' );\r\n\t} else if ( isScheduled ) {\r\n\t\talertMessage = __( 'Are you sure you want to unschedule this post?' );\r\n\t\tconfirmButtonText = __( 'Unschedule' );\r\n\t}\r\n\r\n\tconst handleConfirm = () => {\r\n\t\tsetShowConfirmDialog( false );\r\n\t\teditPost( { status: 'draft' } );\r\n\t\tsavePost();\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Button\r\n\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\tclassName=\"editor-post-switch-to-draft\"\r\n\t\t\t\tonClick={ () => {\r\n\t\t\t\t\tif ( ! isDisabled ) {\r\n\t\t\t\t\t\tsetShowConfirmDialog( true );\r\n\t\t\t\t\t}\r\n\t\t\t\t} }\r\n\t\t\t\taria-disabled={ isDisabled }\r\n\t\t\t\tvariant=\"secondary\"\r\n\t\t\t\tstyle={ { flexGrow: '1', justifyContent: 'center' } }\r\n\t\t\t>\r\n\t\t\t\t{ __( 'Switch to draft' ) }\r\n\t\t\t</Button>\r\n\t\t\t<ConfirmDialog\r\n\t\t\t\tisOpen={ showConfirmDialog }\r\n\t\t\t\tonConfirm={ handleConfirm }\r\n\t\t\t\tonCancel={ () => setShowConfirmDialog( false ) }\r\n\t\t\t\tconfirmButtonText={ confirmButtonText }\r\n\t\t\t>\r\n\t\t\t\t{ alertMessage }\r\n\t\t\t</ConfirmDialog>\r\n\t\t</>\r\n\t);\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SACCA,MAAM,EACNC,2BAA2B,IAAIC,aAAa,QACtC,uBAAuB;AAC9B,SAASC,EAAE,QAAQ,iBAAiB;AACpC,SAASC,WAAW,EAAEC,SAAS,QAAQ,iBAAiB;AACxD,SAASC,QAAQ,QAAQ,oBAAoB;AAC7C,OAAOC,UAAU,MAAM,uBAAuB;;AAE9C;AACA;AACA;AACA,SAASC,KAAK,IAAIC,WAAW,QAAQ,aAAa;;AAElD;AACA;AACA;AACA;AACA;AAJA,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAKA,eAAe,SAASC,uBAAuBA,CAAA,EAAG;EACjDT,UAAU,CAAE,mCAAmC,EAAE;IAChDU,KAAK,EAAE,KAAK;IACZC,OAAO,EAAE;EACV,CAAE,CAAC;EACH,MAAM,CAAEC,iBAAiB,EAAEC,oBAAoB,CAAE,GAAGd,QAAQ,CAAE,KAAM,CAAC;EAErE,MAAM;IAAEe,QAAQ;IAAEC;EAAS,CAAC,GAAGlB,WAAW,CAAEK,WAAY,CAAC;EACzD,MAAM;IAAEc,QAAQ;IAAEC,WAAW;IAAEC;EAAY,CAAC,GAAGpB,SAAS,CAAIqB,MAAM,IAAM;IACvE,MAAM;MAAEC,YAAY;MAAEC,sBAAsB;MAAEC;IAAuB,CAAC,GACrEH,MAAM,CAAEjB,WAAY,CAAC;IACtB,OAAO;MACNc,QAAQ,EAAEI,YAAY,CAAC,CAAC;MACxBH,WAAW,EAAEI,sBAAsB,CAAC,CAAC;MACrCH,WAAW,EAAEI,sBAAsB,CAAC;IACrC,CAAC;EACF,CAAC,EAAE,EAAG,CAAC;EAEP,MAAMC,UAAU,GAAGP,QAAQ,IAAM,CAAEC,WAAW,IAAI,CAAEC,WAAa;EAEjE,IAAIM,YAAY;EAChB,IAAIC,iBAAiB;EACrB,IAAKR,WAAW,EAAG;IAClBO,YAAY,GAAG5B,EAAE,CAAE,+CAAgD,CAAC;IACpE6B,iBAAiB,GAAG7B,EAAE,CAAE,WAAY,CAAC;EACtC,CAAC,MAAM,IAAKsB,WAAW,EAAG;IACzBM,YAAY,GAAG5B,EAAE,CAAE,gDAAiD,CAAC;IACrE6B,iBAAiB,GAAG7B,EAAE,CAAE,YAAa,CAAC;EACvC;EAEA,MAAM8B,aAAa,GAAGA,CAAA,KAAM;IAC3Bb,oBAAoB,CAAE,KAAM,CAAC;IAC7BC,QAAQ,CAAE;MAAEa,MAAM,EAAE;IAAQ,CAAE,CAAC;IAC/BZ,QAAQ,CAAC,CAAC;EACX,CAAC;EAED,oBACCP,KAAA,CAAAF,SAAA;IAAAsB,QAAA,gBACCxB,IAAA,CAACX,MAAM;MACNoC,qBAAqB;MACrBC,SAAS,EAAC,6BAA6B;MACvCC,OAAO,EAAGA,CAAA,KAAM;QACf,IAAK,CAAER,UAAU,EAAG;UACnBV,oBAAoB,CAAE,IAAK,CAAC;QAC7B;MACD,CAAG;MACH,iBAAgBU,UAAY;MAC5BS,OAAO,EAAC,WAAW;MACnBC,KAAK,EAAG;QAAEC,QAAQ,EAAE,GAAG;QAAEC,cAAc,EAAE;MAAS,CAAG;MAAAP,QAAA,EAEnDhC,EAAE,CAAE,iBAAkB;IAAC,CAClB,CAAC,eACTQ,IAAA,CAACT,aAAa;MACbyC,MAAM,EAAGxB,iBAAmB;MAC5ByB,SAAS,EAAGX,aAAe;MAC3BY,QAAQ,EAAGA,CAAA,KAAMzB,oBAAoB,CAAE,KAAM,CAAG;MAChDY,iBAAiB,EAAGA,iBAAmB;MAAAG,QAAA,EAErCJ;IAAY,CACA,CAAC;EAAA,CACf,CAAC;AAEL","ignoreList":[]}