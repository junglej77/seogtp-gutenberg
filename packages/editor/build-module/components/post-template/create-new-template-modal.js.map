{"version":3,"names":["useSelect","useDispatch","useState","serialize","createBlock","Modal","TextControl","Button","__experimentalHStack","HStack","__experimentalVStack","VStack","__","cleanForSlug","unlock","store","editorStore","jsx","_jsx","jsxs","_jsxs","DEFAULT_TITLE","CreateNewTemplateModal","onClose","defaultBlockTemplate","onNavigateToEntityRecord","select","getEditorSettings","getCurrentTemplateId","getTemplateId","createTemplate","title","setTitle","isBusy","setIsBusy","cancel","submit","event","preventDefault","newTemplateContent","tagName","layout","inherit","newTemplate","slug","content","postId","id","postType","onRequestClose","focusOnMount","size","children","className","onSubmit","spacing","__next40pxDefaultSize","__nextHasNoMarginBottom","label","value","onChange","placeholder","disabled","help","justify","variant","onClick","type"],"sources":["@wordpress/editor/src/components/post-template/create-new-template-modal.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { useState } from '@wordpress/element';\r\nimport { serialize, createBlock } from '@wordpress/blocks';\r\nimport {\r\n\tModal,\r\n\tTextControl,\r\n\tButton,\r\n\t__experimentalHStack as HStack,\r\n\t__experimentalVStack as VStack,\r\n} from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { cleanForSlug } from '@wordpress/url';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { unlock } from '../../lock-unlock';\r\nimport { store as editorStore } from '../../store';\r\n\r\nconst DEFAULT_TITLE = __( 'Custom Template' );\r\n\r\nexport default function CreateNewTemplateModal( { onClose } ) {\r\n\tconst { defaultBlockTemplate, onNavigateToEntityRecord } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst { getEditorSettings, getCurrentTemplateId } =\r\n\t\t\t\tselect( editorStore );\r\n\t\t\treturn {\r\n\t\t\t\tdefaultBlockTemplate: getEditorSettings().defaultBlockTemplate,\r\n\t\t\t\tonNavigateToEntityRecord:\r\n\t\t\t\t\tgetEditorSettings().onNavigateToEntityRecord,\r\n\t\t\t\tgetTemplateId: getCurrentTemplateId,\r\n\t\t\t};\r\n\t\t}\r\n\t);\r\n\r\n\tconst { createTemplate } = unlock( useDispatch( editorStore ) );\r\n\r\n\tconst [ title, setTitle ] = useState( '' );\r\n\r\n\tconst [ isBusy, setIsBusy ] = useState( false );\r\n\r\n\tconst cancel = () => {\r\n\t\tsetTitle( '' );\r\n\t\tonClose();\r\n\t};\r\n\r\n\tconst submit = async ( event ) => {\r\n\t\tevent.preventDefault();\r\n\r\n\t\tif ( isBusy ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetIsBusy( true );\r\n\r\n\t\tconst newTemplateContent =\r\n\t\t\tdefaultBlockTemplate ??\r\n\t\t\tserialize( [\r\n\t\t\t\tcreateBlock(\r\n\t\t\t\t\t'core/group',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttagName: 'header',\r\n\t\t\t\t\t\tlayout: { inherit: true },\r\n\t\t\t\t\t},\r\n\t\t\t\t\t[\r\n\t\t\t\t\t\tcreateBlock( 'core/site-title' ),\r\n\t\t\t\t\t\tcreateBlock( 'core/site-tagline' ),\r\n\t\t\t\t\t]\r\n\t\t\t\t),\r\n\t\t\t\tcreateBlock( 'core/separator' ),\r\n\t\t\t\tcreateBlock(\r\n\t\t\t\t\t'core/group',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttagName: 'main',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t[\r\n\t\t\t\t\t\tcreateBlock(\r\n\t\t\t\t\t\t\t'core/group',\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlayout: { inherit: true },\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t[ createBlock( 'core/post-title' ) ]\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\tcreateBlock( 'core/post-content', {\r\n\t\t\t\t\t\t\tlayout: { inherit: true },\r\n\t\t\t\t\t\t} ),\r\n\t\t\t\t\t]\r\n\t\t\t\t),\r\n\t\t\t] );\r\n\r\n\t\tconst newTemplate = await createTemplate( {\r\n\t\t\tslug: cleanForSlug( title || DEFAULT_TITLE ),\r\n\t\t\tcontent: newTemplateContent,\r\n\t\t\ttitle: title || DEFAULT_TITLE,\r\n\t\t} );\r\n\r\n\t\tsetIsBusy( false );\r\n\t\tonNavigateToEntityRecord( {\r\n\t\t\tpostId: newTemplate.id,\r\n\t\t\tpostType: 'wp_template',\r\n\t\t} );\r\n\t\tcancel();\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\ttitle={ __( 'Create custom template' ) }\r\n\t\t\tonRequestClose={ cancel }\r\n\t\t\tfocusOnMount=\"firstContentElement\"\r\n\t\t\tsize=\"small\"\r\n\t\t>\r\n\t\t\t<form\r\n\t\t\t\tclassName=\"editor-post-template__create-form\"\r\n\t\t\t\tonSubmit={ submit }\r\n\t\t\t>\r\n\t\t\t\t<VStack spacing=\"3\">\r\n\t\t\t\t\t<TextControl\r\n\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\t\tlabel={ __( 'Name' ) }\r\n\t\t\t\t\t\tvalue={ title }\r\n\t\t\t\t\t\tonChange={ setTitle }\r\n\t\t\t\t\t\tplaceholder={ DEFAULT_TITLE }\r\n\t\t\t\t\t\tdisabled={ isBusy }\r\n\t\t\t\t\t\thelp={ __(\r\n\t\t\t\t\t\t\t'Describe the template, e.g. \"Post with sidebar\". A custom template can be manually applied to any post or page.'\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<HStack justify=\"right\">\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\t\tvariant=\"tertiary\"\r\n\t\t\t\t\t\t\tonClick={ cancel }\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{ __( 'Cancel' ) }\r\n\t\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\tisBusy={ isBusy }\r\n\t\t\t\t\t\t\taria-disabled={ isBusy }\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{ __( 'Create' ) }\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</HStack>\r\n\t\t\t\t</VStack>\r\n\t\t\t</form>\r\n\t\t</Modal>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}