{"version":3,"names":["useSelect","__","store","coreStore","editorStore","ClassicThemeControl","BlockThemeControl","PostPanelRow","jsx","_jsx","PostTemplatePanel","templateId","isBlockTheme","select","getCurrentTemplateId","getEditorSettings","__unstableIsBlockBasedTheme","isVisible","_select$canUser","postTypeSlug","getCurrentPostType","postType","getPostType","viewable","settings","hasTemplates","availableTemplates","Object","keys","length","supportsTemplateMode","canCreateTemplates","canUser","kind","name","canViewTemplates","_select$canUser2","label","children","id"],"sources":["@wordpress/editor/src/components/post-template/panel.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect } from '@wordpress/data';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { store as coreStore } from '@wordpress/core-data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as editorStore } from '../../store';\r\nimport ClassicThemeControl from './classic-theme';\r\nimport BlockThemeControl from './block-theme';\r\nimport PostPanelRow from '../post-panel-row';\r\n\r\n/**\r\n * Displays the template controls based on the current editor settings and user permissions.\r\n *\r\n * @return {JSX.Element|null} The rendered PostTemplatePanel component.\r\n */\r\nexport default function PostTemplatePanel() {\r\n\tconst { templateId, isBlockTheme } = useSelect( ( select ) => {\r\n\t\tconst { getCurrentTemplateId, getEditorSettings } =\r\n\t\t\tselect( editorStore );\r\n\t\treturn {\r\n\t\t\ttemplateId: getCurrentTemplateId(),\r\n\t\t\tisBlockTheme: getEditorSettings().__unstableIsBlockBasedTheme,\r\n\t\t};\r\n\t}, [] );\r\n\r\n\tconst isVisible = useSelect( ( select ) => {\r\n\t\tconst postTypeSlug = select( editorStore ).getCurrentPostType();\r\n\t\tconst postType = select( coreStore ).getPostType( postTypeSlug );\r\n\t\tif ( ! postType?.viewable ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tconst settings = select( editorStore ).getEditorSettings();\r\n\t\tconst hasTemplates =\r\n\t\t\t!! settings.availableTemplates &&\r\n\t\t\tObject.keys( settings.availableTemplates ).length > 0;\r\n\t\tif ( hasTemplates ) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tif ( ! settings.supportsTemplateMode ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tconst canCreateTemplates =\r\n\t\t\tselect( coreStore ).canUser( 'create', {\r\n\t\t\t\tkind: 'postType',\r\n\t\t\t\tname: 'wp_template',\r\n\t\t\t} ) ?? false;\r\n\t\treturn canCreateTemplates;\r\n\t}, [] );\r\n\r\n\tconst canViewTemplates = useSelect( ( select ) => {\r\n\t\treturn (\r\n\t\t\tselect( coreStore ).canUser( 'read', {\r\n\t\t\t\tkind: 'postType',\r\n\t\t\t\tname: 'wp_template',\r\n\t\t\t} ) ?? false\r\n\t\t);\r\n\t}, [] );\r\n\r\n\tif ( ( ! isBlockTheme || ! canViewTemplates ) && isVisible ) {\r\n\t\treturn (\r\n\t\t\t<PostPanelRow label={ __( 'Template' ) }>\r\n\t\t\t\t<ClassicThemeControl />\r\n\t\t\t</PostPanelRow>\r\n\t\t);\r\n\t}\r\n\r\n\tif ( isBlockTheme && !! templateId ) {\r\n\t\treturn (\r\n\t\t\t<PostPanelRow label={ __( 'Template' ) }>\r\n\t\t\t\t<BlockThemeControl id={ templateId } />\r\n\t\t\t</PostPanelRow>\r\n\t\t);\r\n\t}\r\n\treturn null;\r\n}\r\n"],"mappings":"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","ignoreList":[]}