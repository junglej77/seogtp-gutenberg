{"version":3,"names":["useMemo","useState","decodeEntities","__experimentalBlockPatternsList","BlockPatternsList","MenuItem","Modal","__","useDispatch","store","coreStore","parse","useAsyncList","useAvailableTemplates","useEditedPostContext","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","SwapTemplateButton","onClick","showModal","setShowModal","postType","postId","availableTemplates","editEntityRecord","length","onTemplateSelect","template","name","undoIgnore","children","title","onRequestClose","overlayClassName","isFullScreen","className","TemplatesList","onSelect","templatesAsPatterns","map","slug","blocks","content","raw","rendered","id","shownTemplates","label","blockPatterns","shownPatterns","onClickPattern"],"sources":["@wordpress/editor/src/components/post-template/swap-template-button.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useMemo, useState } from '@wordpress/element';\r\nimport { decodeEntities } from '@wordpress/html-entities';\r\nimport { __experimentalBlockPatternsList as BlockPatternsList } from '@wordpress/block-editor';\r\nimport { MenuItem, Modal } from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useDispatch } from '@wordpress/data';\r\nimport { store as coreStore } from '@wordpress/core-data';\r\nimport { parse } from '@wordpress/blocks';\r\nimport { useAsyncList } from '@wordpress/compose';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { useAvailableTemplates, useEditedPostContext } from './hooks';\r\n\r\nexport default function SwapTemplateButton( { onClick } ) {\r\n\tconst [ showModal, setShowModal ] = useState( false );\r\n\tconst { postType, postId } = useEditedPostContext();\r\n\tconst availableTemplates = useAvailableTemplates( postType );\r\n\tconst { editEntityRecord } = useDispatch( coreStore );\r\n\tif ( ! availableTemplates?.length ) {\r\n\t\treturn null;\r\n\t}\r\n\tconst onTemplateSelect = async ( template ) => {\r\n\t\teditEntityRecord(\r\n\t\t\t'postType',\r\n\t\t\tpostType,\r\n\t\t\tpostId,\r\n\t\t\t{ template: template.name },\r\n\t\t\t{ undoIgnore: true }\r\n\t\t);\r\n\t\tsetShowModal( false ); // Close the template suggestions modal first.\r\n\t\tonClick();\r\n\t};\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<MenuItem onClick={ () => setShowModal( true ) }>\r\n\t\t\t\t{ __( 'Swap template' ) }\r\n\t\t\t</MenuItem>\r\n\t\t\t{ showModal && (\r\n\t\t\t\t<Modal\r\n\t\t\t\t\ttitle={ __( 'Choose a template' ) }\r\n\t\t\t\t\tonRequestClose={ () => setShowModal( false ) }\r\n\t\t\t\t\toverlayClassName=\"editor-post-template__swap-template-modal\"\r\n\t\t\t\t\tisFullScreen\r\n\t\t\t\t>\r\n\t\t\t\t\t<div className=\"editor-post-template__swap-template-modal-content\">\r\n\t\t\t\t\t\t<TemplatesList\r\n\t\t\t\t\t\t\tpostType={ postType }\r\n\t\t\t\t\t\t\tonSelect={ onTemplateSelect }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Modal>\r\n\t\t\t) }\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nfunction TemplatesList( { postType, onSelect } ) {\r\n\tconst availableTemplates = useAvailableTemplates( postType );\r\n\tconst templatesAsPatterns = useMemo(\r\n\t\t() =>\r\n\t\t\tavailableTemplates.map( ( template ) => ( {\r\n\t\t\t\tname: template.slug,\r\n\t\t\t\tblocks: parse( template.content.raw ),\r\n\t\t\t\ttitle: decodeEntities( template.title.rendered ),\r\n\t\t\t\tid: template.id,\r\n\t\t\t} ) ),\r\n\t\t[ availableTemplates ]\r\n\t);\r\n\tconst shownTemplates = useAsyncList( templatesAsPatterns );\r\n\treturn (\r\n\t\t<BlockPatternsList\r\n\t\t\tlabel={ __( 'Templates' ) }\r\n\t\t\tblockPatterns={ templatesAsPatterns }\r\n\t\t\tshownPatterns={ shownTemplates }\r\n\t\t\tonClickPattern={ onSelect }\r\n\t\t/>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}