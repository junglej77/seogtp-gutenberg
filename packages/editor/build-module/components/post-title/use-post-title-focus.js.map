{"version":3,"names":["useEffect","useImperativeHandle","useRef","useSelect","store","editorStore","usePostTitleFocus","forwardedRef","ref","isCleanNewPost","select","_isCleanNewPost","focus","current","defaultView","ownerDocument","name","parent","document","activeElement","body"],"sources":["@wordpress/editor/src/components/post-title/use-post-title-focus.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useEffect, useImperativeHandle, useRef } from '@wordpress/element';\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as editorStore } from '../../store';\r\n\r\n/**\r\n * Custom hook that manages the focus behavior of the post title input field.\r\n *\r\n * @param {Element} forwardedRef - The forwarded ref for the input field.\r\n *\r\n * @return {Object} - The ref object.\r\n */\r\nexport default function usePostTitleFocus( forwardedRef ) {\r\n\tconst ref = useRef();\r\n\r\n\tconst { isCleanNewPost } = useSelect( ( select ) => {\r\n\t\tconst { isCleanNewPost: _isCleanNewPost } = select( editorStore );\r\n\r\n\t\treturn {\r\n\t\t\tisCleanNewPost: _isCleanNewPost(),\r\n\t\t};\r\n\t}, [] );\r\n\r\n\tuseImperativeHandle( forwardedRef, () => ( {\r\n\t\tfocus: () => {\r\n\t\t\tref?.current?.focus();\r\n\t\t},\r\n\t} ) );\r\n\r\n\tuseEffect( () => {\r\n\t\tif ( ! ref.current ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst { defaultView } = ref.current.ownerDocument;\r\n\t\tconst { name, parent } = defaultView;\r\n\t\tconst ownerDocument =\r\n\t\t\tname === 'editor-canvas' ? parent.document : defaultView.document;\r\n\t\tconst { activeElement, body } = ownerDocument;\r\n\r\n\t\t// Only autofocus the title when the post is entirely empty. This should\r\n\t\t// only happen for a new post, which means we focus the title on new\r\n\t\t// post so the author can start typing right away, without needing to\r\n\t\t// click anything.\r\n\t\tif ( isCleanNewPost && ( ! activeElement || body === activeElement ) ) {\r\n\t\t\tref.current.focus();\r\n\t\t}\r\n\t}, [ isCleanNewPost ] );\r\n\r\n\treturn { ref };\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,SAAS,EAAEC,mBAAmB,EAAEC,MAAM,QAAQ,oBAAoB;AAC3E,SAASC,SAAS,QAAQ,iBAAiB;;AAE3C;AACA;AACA;AACA,SAASC,KAAK,IAAIC,WAAW,QAAQ,aAAa;;AAElD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAASC,iBAAiBA,CAAEC,YAAY,EAAG;EACzD,MAAMC,GAAG,GAAGN,MAAM,CAAC,CAAC;EAEpB,MAAM;IAAEO;EAAe,CAAC,GAAGN,SAAS,CAAIO,MAAM,IAAM;IACnD,MAAM;MAAED,cAAc,EAAEE;IAAgB,CAAC,GAAGD,MAAM,CAAEL,WAAY,CAAC;IAEjE,OAAO;MACNI,cAAc,EAAEE,eAAe,CAAC;IACjC,CAAC;EACF,CAAC,EAAE,EAAG,CAAC;EAEPV,mBAAmB,CAAEM,YAAY,EAAE,OAAQ;IAC1CK,KAAK,EAAEA,CAAA,KAAM;MACZJ,GAAG,EAAEK,OAAO,EAAED,KAAK,CAAC,CAAC;IACtB;EACD,CAAC,CAAG,CAAC;EAELZ,SAAS,CAAE,MAAM;IAChB,IAAK,CAAEQ,GAAG,CAACK,OAAO,EAAG;MACpB;IACD;IAEA,MAAM;MAAEC;IAAY,CAAC,GAAGN,GAAG,CAACK,OAAO,CAACE,aAAa;IACjD,MAAM;MAAEC,IAAI;MAAEC;IAAO,CAAC,GAAGH,WAAW;IACpC,MAAMC,aAAa,GAClBC,IAAI,KAAK,eAAe,GAAGC,MAAM,CAACC,QAAQ,GAAGJ,WAAW,CAACI,QAAQ;IAClE,MAAM;MAAEC,aAAa;MAAEC;IAAK,CAAC,GAAGL,aAAa;;IAE7C;IACA;IACA;IACA;IACA,IAAKN,cAAc,KAAM,CAAEU,aAAa,IAAIC,IAAI,KAAKD,aAAa,CAAE,EAAG;MACtEX,GAAG,CAACK,OAAO,CAACD,KAAK,CAAC,CAAC;IACpB;EACD,CAAC,EAAE,CAAEH,cAAc,CAAG,CAAC;EAEvB,OAAO;IAAED;EAAI,CAAC;AACf","ignoreList":[]}