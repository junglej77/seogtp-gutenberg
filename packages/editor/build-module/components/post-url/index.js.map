{"version":3,"names":["useSelect","useDispatch","safeDecodeURIComponent","cleanForSlug","useState","createInterpolateElement","__experimentalInspectorPopoverHeader","InspectorPopoverHeader","__","ExternalLink","Button","__experimentalInputControl","InputControl","__experimentalInputControlPrefixWrapper","InputControlPrefixWrapper","__experimentalVStack","VStack","store","noticesStore","copySmall","coreStore","useCopyToClipboard","editorStore","jsx","_jsx","jsxs","_jsxs","PostURL","onClose","isEditable","postSlug","postLink","permalinkPrefix","permalinkSuffix","permalink","select","_post$_links$wpActio","post","getCurrentPost","postTypeSlug","getCurrentPostType","postType","getPostType","permalinkParts","getPermalinkParts","hasPublishAction","_links","isPermalinkEditable","getEditedPostSlug","viewPostLabel","labels","view_item","link","prefix","suffix","getPermalink","editPost","createNotice","forceEmptyField","setForceEmptyField","copyButtonRef","isDismissible","type","className","children","title","spacing","a","href","__next40pxDefaultSize","icon","ref","label","hideLabelFromVision","value","autoComplete","spellCheck","onChange","newValue","slug","onBlur","event","target","help"],"sources":["@wordpress/editor/src/components/post-url/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { safeDecodeURIComponent, cleanForSlug } from '@wordpress/url';\r\nimport { useState, createInterpolateElement } from '@wordpress/element';\r\nimport { __experimentalInspectorPopoverHeader as InspectorPopoverHeader } from '@wordpress/block-editor';\r\nimport { __ } from '@wordpress/i18n';\r\nimport {\r\n\tExternalLink,\r\n\tButton,\r\n\t__experimentalInputControl as InputControl,\r\n\t__experimentalInputControlPrefixWrapper as InputControlPrefixWrapper,\r\n\t__experimentalVStack as VStack,\r\n} from '@wordpress/components';\r\nimport { store as noticesStore } from '@wordpress/notices';\r\nimport { copySmall } from '@wordpress/icons';\r\nimport { store as coreStore } from '@wordpress/core-data';\r\nimport { useCopyToClipboard } from '@wordpress/compose';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as editorStore } from '../../store';\r\n\r\n/**\r\n * Renders the `PostURL` component.\r\n *\r\n * @example\r\n * ```jsx\r\n * <PostURL />\r\n * ```\r\n *\r\n * @param {Function} onClose Callback function to be executed when the popover is closed.\r\n *\r\n * @return {Component} The rendered PostURL component.\r\n */\r\nexport default function PostURL( { onClose } ) {\r\n\tconst {\r\n\t\tisEditable,\r\n\t\tpostSlug,\r\n\t\tpostLink,\r\n\t\tpermalinkPrefix,\r\n\t\tpermalinkSuffix,\r\n\t\tpermalink,\r\n\t} = useSelect( ( select ) => {\r\n\t\tconst post = select( editorStore ).getCurrentPost();\r\n\t\tconst postTypeSlug = select( editorStore ).getCurrentPostType();\r\n\t\tconst postType = select( coreStore ).getPostType( postTypeSlug );\r\n\t\tconst permalinkParts = select( editorStore ).getPermalinkParts();\r\n\t\tconst hasPublishAction = post?._links?.[ 'wp:action-publish' ] ?? false;\r\n\r\n\t\treturn {\r\n\t\t\tisEditable:\r\n\t\t\t\tselect( editorStore ).isPermalinkEditable() && hasPublishAction,\r\n\t\t\tpostSlug: safeDecodeURIComponent(\r\n\t\t\t\tselect( editorStore ).getEditedPostSlug()\r\n\t\t\t),\r\n\t\t\tviewPostLabel: postType?.labels.view_item,\r\n\t\t\tpostLink: post.link,\r\n\t\t\tpermalinkPrefix: permalinkParts?.prefix,\r\n\t\t\tpermalinkSuffix: permalinkParts?.suffix,\r\n\t\t\tpermalink: safeDecodeURIComponent(\r\n\t\t\t\tselect( editorStore ).getPermalink()\r\n\t\t\t),\r\n\t\t};\r\n\t}, [] );\r\n\tconst { editPost } = useDispatch( editorStore );\r\n\tconst { createNotice } = useDispatch( noticesStore );\r\n\tconst [ forceEmptyField, setForceEmptyField ] = useState( false );\r\n\tconst copyButtonRef = useCopyToClipboard( permalink, () => {\r\n\t\tcreateNotice( 'info', __( 'Copied URL to clipboard.' ), {\r\n\t\t\tisDismissible: true,\r\n\t\t\ttype: 'snackbar',\r\n\t\t} );\r\n\t} );\r\n\treturn (\r\n\t\t<div className=\"editor-post-url\">\r\n\t\t\t<InspectorPopoverHeader\r\n\t\t\t\ttitle={ __( 'Link' ) }\r\n\t\t\t\tonClose={ onClose }\r\n\t\t\t/>\r\n\t\t\t<VStack spacing={ 3 }>\r\n\t\t\t\t{ isEditable && (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{ createInterpolateElement(\r\n\t\t\t\t\t\t\t__(\r\n\t\t\t\t\t\t\t\t'Customize the last part of the URL. <a>Learn more.</a>'\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ta: (\r\n\t\t\t\t\t\t\t\t\t<ExternalLink\r\n\t\t\t\t\t\t\t\t\t\thref={ __(\r\n\t\t\t\t\t\t\t\t\t\t\t'https://wordpress.org/documentation/article/page-post-settings-sidebar/#permalink'\r\n\t\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) }\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{ isEditable && (\r\n\t\t\t\t\t\t<InputControl\r\n\t\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\t\tprefix={\r\n\t\t\t\t\t\t\t\t<InputControlPrefixWrapper>\r\n\t\t\t\t\t\t\t\t\t/\r\n\t\t\t\t\t\t\t\t</InputControlPrefixWrapper>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tsuffix={\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t// TODO: Switch to `true` (40px size) if possible\r\n\t\t\t\t\t\t\t\t\t__next40pxDefaultSize={ false }\r\n\t\t\t\t\t\t\t\t\ticon={ copySmall }\r\n\t\t\t\t\t\t\t\t\tref={ copyButtonRef }\r\n\t\t\t\t\t\t\t\t\tlabel={ __( 'Copy' ) }\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlabel={ __( 'Link' ) }\r\n\t\t\t\t\t\t\thideLabelFromVision\r\n\t\t\t\t\t\t\tvalue={ forceEmptyField ? '' : postSlug }\r\n\t\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\t\tspellCheck=\"false\"\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tclassName=\"editor-post-url__input\"\r\n\t\t\t\t\t\t\tonChange={ ( newValue ) => {\r\n\t\t\t\t\t\t\t\teditPost( { slug: newValue } );\r\n\t\t\t\t\t\t\t\t// When we delete the field the permalink gets\r\n\t\t\t\t\t\t\t\t// reverted to the original value.\r\n\t\t\t\t\t\t\t\t// The forceEmptyField logic allows the user to have\r\n\t\t\t\t\t\t\t\t// the field temporarily empty while typing.\r\n\t\t\t\t\t\t\t\tif ( ! newValue ) {\r\n\t\t\t\t\t\t\t\t\tif ( ! forceEmptyField ) {\r\n\t\t\t\t\t\t\t\t\t\tsetForceEmptyField( true );\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif ( forceEmptyField ) {\r\n\t\t\t\t\t\t\t\t\tsetForceEmptyField( false );\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\tonBlur={ ( event ) => {\r\n\t\t\t\t\t\t\t\teditPost( {\r\n\t\t\t\t\t\t\t\t\tslug: cleanForSlug( event.target.value ),\r\n\t\t\t\t\t\t\t\t} );\r\n\t\t\t\t\t\t\t\tif ( forceEmptyField ) {\r\n\t\t\t\t\t\t\t\t\tsetForceEmptyField( false );\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\thelp={\r\n\t\t\t\t\t\t\t\t<ExternalLink\r\n\t\t\t\t\t\t\t\t\tclassName=\"editor-post-url__link\"\r\n\t\t\t\t\t\t\t\t\thref={ postLink }\r\n\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<span className=\"editor-post-url__link-prefix\">\r\n\t\t\t\t\t\t\t\t\t\t{ permalinkPrefix }\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"editor-post-url__link-slug\">\r\n\t\t\t\t\t\t\t\t\t\t{ postSlug }\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"editor-post-url__link-suffix\">\r\n\t\t\t\t\t\t\t\t\t\t{ permalinkSuffix }\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</ExternalLink>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) }\r\n\t\t\t\t\t{ ! isEditable && (\r\n\t\t\t\t\t\t<ExternalLink\r\n\t\t\t\t\t\t\tclassName=\"editor-post-url__link\"\r\n\t\t\t\t\t\t\thref={ postLink }\r\n\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{ postLink }\r\n\t\t\t\t\t\t</ExternalLink>\r\n\t\t\t\t\t) }\r\n\t\t\t\t</div>\r\n\t\t\t</VStack>\r\n\t\t</div>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}