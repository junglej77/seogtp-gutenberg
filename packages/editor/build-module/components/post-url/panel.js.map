{"version":3,"names":["useMemo","useState","useSelect","Dropdown","Button","__experimentalTruncate","Truncate","__","sprintf","safeDecodeURIComponent","store","coreStore","PostURLCheck","PostURL","PostPanelRow","editorStore","jsx","_jsx","PostURLPanel","popoverAnchor","setPopoverAnchor","popoverProps","anchor","placement","offset","shift","children","label","ref","className","contentClassName","focusOnMount","renderToggle","isOpen","onToggle","PostURLToggle","onClick","renderContent","onClose","slug","isFrontPage","postLink","select","getCurrentPostId","getCurrentPost","getEditedEntityRecord","canUser","siteSettings","kind","name","undefined","_id","getEditedPostSlug","page_on_front","link","decodedSlug","size","variant","numberOfLines"],"sources":["@wordpress/editor/src/components/post-url/panel.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useMemo, useState } from '@wordpress/element';\r\nimport { useSelect } from '@wordpress/data';\r\nimport {\r\n\tDropdown,\r\n\tButton,\r\n\t__experimentalTruncate as Truncate,\r\n} from '@wordpress/components';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { safeDecodeURIComponent } from '@wordpress/url';\r\nimport { store as coreStore } from '@wordpress/core-data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport PostURLCheck from './check';\r\nimport PostURL from './index';\r\nimport PostPanelRow from '../post-panel-row';\r\nimport { store as editorStore } from '../../store';\r\n\r\n/**\r\n * Renders the `PostURLPanel` component.\r\n *\r\n * @return {JSX.Element} The rendered PostURLPanel component.\r\n */\r\nexport default function PostURLPanel() {\r\n\t// Use internal state instead of a ref to make sure that the component\r\n\t// re-renders when the popover's anchor updates.\r\n\tconst [ popoverAnchor, setPopoverAnchor ] = useState( null );\r\n\t// Memoize popoverProps to avoid returning a new object every time.\r\n\tconst popoverProps = useMemo(\r\n\t\t() => ( {\r\n\t\t\t// Anchor the popover to the middle of the entire row so that it doesn't\r\n\t\t\t// move around when the label changes.\r\n\t\t\tanchor: popoverAnchor,\r\n\t\t\tplacement: 'left-start',\r\n\t\t\toffset: 36,\r\n\t\t\tshift: true,\r\n\t\t} ),\r\n\t\t[ popoverAnchor ]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<PostURLCheck>\r\n\t\t\t<PostPanelRow label={ __( 'Link' ) } ref={ setPopoverAnchor }>\r\n\t\t\t\t<Dropdown\r\n\t\t\t\t\tpopoverProps={ popoverProps }\r\n\t\t\t\t\tclassName=\"editor-post-url__panel-dropdown\"\r\n\t\t\t\t\tcontentClassName=\"editor-post-url__panel-dialog\"\r\n\t\t\t\t\tfocusOnMount\r\n\t\t\t\t\trenderToggle={ ( { isOpen, onToggle } ) => (\r\n\t\t\t\t\t\t<PostURLToggle isOpen={ isOpen } onClick={ onToggle } />\r\n\t\t\t\t\t) }\r\n\t\t\t\t\trenderContent={ ( { onClose } ) => (\r\n\t\t\t\t\t\t<PostURL onClose={ onClose } />\r\n\t\t\t\t\t) }\r\n\t\t\t\t/>\r\n\t\t\t</PostPanelRow>\r\n\t\t</PostURLCheck>\r\n\t);\r\n}\r\n\r\nfunction PostURLToggle( { isOpen, onClick } ) {\r\n\tconst { slug, isFrontPage, postLink } = useSelect( ( select ) => {\r\n\t\tconst { getCurrentPostId, getCurrentPost } = select( editorStore );\r\n\t\tconst { getEditedEntityRecord, canUser } = select( coreStore );\r\n\t\tconst siteSettings = canUser( 'read', {\r\n\t\t\tkind: 'root',\r\n\t\t\tname: 'site',\r\n\t\t} )\r\n\t\t\t? getEditedEntityRecord( 'root', 'site' )\r\n\t\t\t: undefined;\r\n\t\tconst _id = getCurrentPostId();\r\n\t\treturn {\r\n\t\t\tslug: select( editorStore ).getEditedPostSlug(),\r\n\t\t\tisFrontPage: siteSettings?.page_on_front === _id,\r\n\t\t\tpostLink: getCurrentPost()?.link,\r\n\t\t};\r\n\t}, [] );\r\n\tconst decodedSlug = safeDecodeURIComponent( slug );\r\n\treturn (\r\n\t\t<Button\r\n\t\t\tsize=\"compact\"\r\n\t\t\tclassName=\"editor-post-url__panel-toggle\"\r\n\t\t\tvariant=\"tertiary\"\r\n\t\t\taria-expanded={ isOpen }\r\n\t\t\t// translators: %s: Current post link.\r\n\t\t\taria-label={ sprintf( __( 'Change link: %s' ), decodedSlug ) }\r\n\t\t\tonClick={ onClick }\r\n\t\t>\r\n\t\t\t<Truncate numberOfLines={ 1 }>\r\n\t\t\t\t{ isFrontPage ? postLink : `/${ decodedSlug }` }\r\n\t\t\t</Truncate>\r\n\t\t</Button>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}