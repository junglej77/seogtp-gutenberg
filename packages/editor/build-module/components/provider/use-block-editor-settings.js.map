{"version":3,"names":["useMemo","useCallback","useDispatch","useSelect","store","coreStore","__experimentalFetchLinkSuggestions","fetchLinkSuggestions","__experimentalFetchUrlData","fetchUrlData","__","preferencesStore","useViewportMatch","blocksStore","privateApis","blockEditorStore","inserterMediaCategories","mediaUpload","editorStore","unlock","useGlobalStylesContext","EMPTY_BLOCKS_LIST","EMPTY_OBJECT","__experimentalReusableBlocksSelect","select","_select$getEntityReco","getEntityRecords","per_page","BLOCK_EDITOR_SETTINGS","globalStylesDataKey","globalStylesLinksDataKey","selectBlockPatternsKey","reusableBlocksSelectKey","sectionRootClientIdKey","useBlockEditorSettings","settings","postType","postId","renderingMode","_mergedGlobalStyles$s","_mergedGlobalStyles$_","_settings$__experimen","_settings$__experimen2","isLargeViewport","allowRightClickOverrides","blockTypes","focusMode","hasFixedToolbar","isDistractionFree","keepCaretInsideBlock","hasUploadPermissions","hiddenBlockTypes","canUseUnfilteredHTML","userCanCreatePages","pageOnFront","pageForPosts","userPatternCategories","restBlockPatternCategories","sectionRootClientId","_canUser","canUser","getRawEntityRecord","getEntityRecord","getUserPatternCategories","getBlockPatternCategories","get","getBlockTypes","getBlocksByName","getBlockAttributes","siteSettings","kind","name","undefined","getSectionRootBlock","_getBlocksByName$find","_getBlocksByName$","find","clientId","tagName","_links","hasOwnProperty","page_on_front","page_for_posts","merged","mergedGlobalStyles","globalStylesData","styles","globalStylesLinksData","settingsBlockPatterns","__experimentalAdditionalBlockPatterns","__experimentalBlockPatterns","settingsBlockPatternCategories","__experimentalAdditionalBlockPatternCategories","__experimentalBlockPatternCategories","blockPatterns","filter","postTypes","Array","isArray","includes","blockPatternCategories","x","index","arr","findIndex","y","undo","setIsInserterOpened","saveEntityRecord","createPageEntity","options","Promise","reject","message","allowedBlockTypes","length","defaultAllowedBlockTypes","map","type","forceDisableFocusMode","blockEditorSettings","Object","fromEntries","entries","key","hasFinishedResolution","getBlockPatternsForPostType","patterns","__experimentalUserPatternCategories","search","searchOptions","__experimentalFetchRichUrlData","__experimentalCanUserUseUnfilteredHTML","__experimentalUndo","outlineMode","__experimentalCreatePageEntity","__experimentalUserCanCreatePages","__experimentalPreferPatternsOnRoot","templateLock","template","__experimentalSetIsInserterOpened"],"sources":["@wordpress/editor/src/components/provider/use-block-editor-settings.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useMemo, useCallback } from '@wordpress/element';\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\nimport {\r\n\tstore as coreStore,\r\n\t__experimentalFetchLinkSuggestions as fetchLinkSuggestions,\r\n\t__experimentalFetchUrlData as fetchUrlData,\r\n} from '@wordpress/core-data';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { store as preferencesStore } from '@wordpress/preferences';\r\nimport { useViewportMatch } from '@wordpress/compose';\r\nimport { store as blocksStore } from '@wordpress/blocks';\r\nimport {\r\n\tprivateApis,\r\n\tstore as blockEditorStore,\r\n} from '@wordpress/block-editor';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport inserterMediaCategories from '../media-categories';\r\nimport { mediaUpload } from '../../utils';\r\nimport { store as editorStore } from '../../store';\r\nimport { unlock } from '../../lock-unlock';\r\nimport { useGlobalStylesContext } from '../global-styles-provider';\r\n\r\nconst EMPTY_BLOCKS_LIST = [];\r\nconst EMPTY_OBJECT = {};\r\n\r\nfunction __experimentalReusableBlocksSelect( select ) {\r\n\treturn (\r\n\t\tselect( coreStore ).getEntityRecords( 'postType', 'wp_block', {\r\n\t\t\tper_page: -1,\r\n\t\t} ) ?? EMPTY_BLOCKS_LIST\r\n\t);\r\n}\r\n\r\nconst BLOCK_EDITOR_SETTINGS = [\r\n\t'__experimentalBlockDirectory',\r\n\t'__experimentalDiscussionSettings',\r\n\t'__experimentalFeatures',\r\n\t'__experimentalGlobalStylesBaseStyles',\r\n\t'alignWide',\r\n\t'blockInspectorTabs',\r\n\t'allowedMimeTypes',\r\n\t'bodyPlaceholder',\r\n\t'canLockBlocks',\r\n\t'canUpdateBlockBindings',\r\n\t'capabilities',\r\n\t'clearBlockSelection',\r\n\t'codeEditingEnabled',\r\n\t'colors',\r\n\t'disableCustomColors',\r\n\t'disableCustomFontSizes',\r\n\t'disableCustomSpacingSizes',\r\n\t'disableCustomGradients',\r\n\t'disableLayoutStyles',\r\n\t'enableCustomLineHeight',\r\n\t'enableCustomSpacing',\r\n\t'enableCustomUnits',\r\n\t'enableOpenverseMediaCategory',\r\n\t'fontSizes',\r\n\t'gradients',\r\n\t'generateAnchors',\r\n\t'onNavigateToEntityRecord',\r\n\t'imageDefaultSize',\r\n\t'imageDimensions',\r\n\t'imageEditing',\r\n\t'imageSizes',\r\n\t'isRTL',\r\n\t'locale',\r\n\t'maxWidth',\r\n\t'postContentAttributes',\r\n\t'postsPerPage',\r\n\t'readOnly',\r\n\t'styles',\r\n\t'titlePlaceholder',\r\n\t'supportsLayout',\r\n\t'widgetTypesToHideFromLegacyWidgetBlock',\r\n\t'__unstableHasCustomAppender',\r\n\t'__unstableIsPreviewMode',\r\n\t'__unstableResolvedAssets',\r\n\t'__unstableIsBlockBasedTheme',\r\n];\r\n\r\nconst {\r\n\tglobalStylesDataKey,\r\n\tglobalStylesLinksDataKey,\r\n\tselectBlockPatternsKey,\r\n\treusableBlocksSelectKey,\r\n\tsectionRootClientIdKey,\r\n} = unlock( privateApis );\r\n\r\n/**\r\n * React hook used to compute the block editor settings to use for the post editor.\r\n *\r\n * @param {Object} settings      EditorProvider settings prop.\r\n * @param {string} postType      Editor root level post type.\r\n * @param {string} postId        Editor root level post ID.\r\n * @param {string} renderingMode Editor rendering mode.\r\n *\r\n * @return {Object} Block Editor Settings.\r\n */\r\nfunction useBlockEditorSettings( settings, postType, postId, renderingMode ) {\r\n\tconst isLargeViewport = useViewportMatch( 'medium' );\r\n\tconst {\r\n\t\tallowRightClickOverrides,\r\n\t\tblockTypes,\r\n\t\tfocusMode,\r\n\t\thasFixedToolbar,\r\n\t\tisDistractionFree,\r\n\t\tkeepCaretInsideBlock,\r\n\t\thasUploadPermissions,\r\n\t\thiddenBlockTypes,\r\n\t\tcanUseUnfilteredHTML,\r\n\t\tuserCanCreatePages,\r\n\t\tpageOnFront,\r\n\t\tpageForPosts,\r\n\t\tuserPatternCategories,\r\n\t\trestBlockPatternCategories,\r\n\t\tsectionRootClientId,\r\n\t} = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst {\r\n\t\t\t\tcanUser,\r\n\t\t\t\tgetRawEntityRecord,\r\n\t\t\t\tgetEntityRecord,\r\n\t\t\t\tgetUserPatternCategories,\r\n\t\t\t\tgetBlockPatternCategories,\r\n\t\t\t} = select( coreStore );\r\n\t\t\tconst { get } = select( preferencesStore );\r\n\t\t\tconst { getBlockTypes } = select( blocksStore );\r\n\t\t\tconst { getBlocksByName, getBlockAttributes } =\r\n\t\t\t\tselect( blockEditorStore );\r\n\t\t\tconst siteSettings = canUser( 'read', {\r\n\t\t\t\tkind: 'root',\r\n\t\t\t\tname: 'site',\r\n\t\t\t} )\r\n\t\t\t\t? getEntityRecord( 'root', 'site' )\r\n\t\t\t\t: undefined;\r\n\r\n\t\t\tfunction getSectionRootBlock() {\r\n\t\t\t\tif ( renderingMode === 'template-locked' ) {\r\n\t\t\t\t\treturn getBlocksByName( 'core/post-content' )?.[ 0 ] ?? '';\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\tgetBlocksByName( 'core/group' ).find(\r\n\t\t\t\t\t\t( clientId ) =>\r\n\t\t\t\t\t\t\tgetBlockAttributes( clientId )?.tagName === 'main'\r\n\t\t\t\t\t) ?? ''\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tallowRightClickOverrides: get(\r\n\t\t\t\t\t'core',\r\n\t\t\t\t\t'allowRightClickOverrides'\r\n\t\t\t\t),\r\n\t\t\t\tblockTypes: getBlockTypes(),\r\n\t\t\t\tcanUseUnfilteredHTML: getRawEntityRecord(\r\n\t\t\t\t\t'postType',\r\n\t\t\t\t\tpostType,\r\n\t\t\t\t\tpostId\r\n\t\t\t\t)?._links?.hasOwnProperty( 'wp:action-unfiltered-html' ),\r\n\t\t\t\tfocusMode: get( 'core', 'focusMode' ),\r\n\t\t\t\thasFixedToolbar:\r\n\t\t\t\t\tget( 'core', 'fixedToolbar' ) || ! isLargeViewport,\r\n\t\t\t\thiddenBlockTypes: get( 'core', 'hiddenBlockTypes' ),\r\n\t\t\t\tisDistractionFree: get( 'core', 'distractionFree' ),\r\n\t\t\t\tkeepCaretInsideBlock: get( 'core', 'keepCaretInsideBlock' ),\r\n\t\t\t\thasUploadPermissions:\r\n\t\t\t\t\tcanUser( 'create', {\r\n\t\t\t\t\t\tkind: 'root',\r\n\t\t\t\t\t\tname: 'media',\r\n\t\t\t\t\t} ) ?? true,\r\n\t\t\t\tuserCanCreatePages: canUser( 'create', {\r\n\t\t\t\t\tkind: 'postType',\r\n\t\t\t\t\tname: 'page',\r\n\t\t\t\t} ),\r\n\t\t\t\tpageOnFront: siteSettings?.page_on_front,\r\n\t\t\t\tpageForPosts: siteSettings?.page_for_posts,\r\n\t\t\t\tuserPatternCategories: getUserPatternCategories(),\r\n\t\t\t\trestBlockPatternCategories: getBlockPatternCategories(),\r\n\t\t\t\tsectionRootClientId: getSectionRootBlock(),\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ postType, postId, isLargeViewport, renderingMode ]\r\n\t);\r\n\r\n\tconst { merged: mergedGlobalStyles } = useGlobalStylesContext();\r\n\tconst globalStylesData = mergedGlobalStyles.styles ?? EMPTY_OBJECT;\r\n\tconst globalStylesLinksData = mergedGlobalStyles._links ?? EMPTY_OBJECT;\r\n\r\n\tconst settingsBlockPatterns =\r\n\t\tsettings.__experimentalAdditionalBlockPatterns ?? // WP 6.0\r\n\t\tsettings.__experimentalBlockPatterns; // WP 5.9\r\n\tconst settingsBlockPatternCategories =\r\n\t\tsettings.__experimentalAdditionalBlockPatternCategories ?? // WP 6.0\r\n\t\tsettings.__experimentalBlockPatternCategories; // WP 5.9\r\n\r\n\tconst blockPatterns = useMemo(\r\n\t\t() =>\r\n\t\t\t[ ...( settingsBlockPatterns || [] ) ].filter(\r\n\t\t\t\t( { postTypes } ) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t! postTypes ||\r\n\t\t\t\t\t\t( Array.isArray( postTypes ) &&\r\n\t\t\t\t\t\t\tpostTypes.includes( postType ) )\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t),\r\n\t\t[ settingsBlockPatterns, postType ]\r\n\t);\r\n\r\n\tconst blockPatternCategories = useMemo(\r\n\t\t() =>\r\n\t\t\t[\r\n\t\t\t\t...( settingsBlockPatternCategories || [] ),\r\n\t\t\t\t...( restBlockPatternCategories || [] ),\r\n\t\t\t].filter(\r\n\t\t\t\t( x, index, arr ) =>\r\n\t\t\t\t\tindex === arr.findIndex( ( y ) => x.name === y.name )\r\n\t\t\t),\r\n\t\t[ settingsBlockPatternCategories, restBlockPatternCategories ]\r\n\t);\r\n\r\n\tconst { undo, setIsInserterOpened } = useDispatch( editorStore );\r\n\r\n\tconst { saveEntityRecord } = useDispatch( coreStore );\r\n\r\n\t/**\r\n\t * Creates a Post entity.\r\n\t * This is utilised by the Link UI to allow for on-the-fly creation of Posts/Pages.\r\n\t *\r\n\t * @param {Object} options parameters for the post being created. These mirror those used on 3rd param of saveEntityRecord.\r\n\t * @return {Object} the post type object that was created.\r\n\t */\r\n\tconst createPageEntity = useCallback(\r\n\t\t( options ) => {\r\n\t\t\tif ( ! userCanCreatePages ) {\r\n\t\t\t\treturn Promise.reject( {\r\n\t\t\t\t\tmessage: __(\r\n\t\t\t\t\t\t'You do not have permission to create Pages.'\r\n\t\t\t\t\t),\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\t\t\treturn saveEntityRecord( 'postType', 'page', options );\r\n\t\t},\r\n\t\t[ saveEntityRecord, userCanCreatePages ]\r\n\t);\r\n\r\n\tconst allowedBlockTypes = useMemo( () => {\r\n\t\t// Omit hidden block types if exists and non-empty.\r\n\t\tif ( hiddenBlockTypes && hiddenBlockTypes.length > 0 ) {\r\n\t\t\t// Defer to passed setting for `allowedBlockTypes` if provided as\r\n\t\t\t// anything other than `true` (where `true` is equivalent to allow\r\n\t\t\t// all block types).\r\n\t\t\tconst defaultAllowedBlockTypes =\r\n\t\t\t\ttrue === settings.allowedBlockTypes\r\n\t\t\t\t\t? blockTypes.map( ( { name } ) => name )\r\n\t\t\t\t\t: settings.allowedBlockTypes || [];\r\n\r\n\t\t\treturn defaultAllowedBlockTypes.filter(\r\n\t\t\t\t( type ) => ! hiddenBlockTypes.includes( type )\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn settings.allowedBlockTypes;\r\n\t}, [ settings.allowedBlockTypes, hiddenBlockTypes, blockTypes ] );\r\n\r\n\tconst forceDisableFocusMode = settings.focusMode === false;\r\n\r\n\treturn useMemo( () => {\r\n\t\tconst blockEditorSettings = {\r\n\t\t\t...Object.fromEntries(\r\n\t\t\t\tObject.entries( settings ).filter( ( [ key ] ) =>\r\n\t\t\t\t\tBLOCK_EDITOR_SETTINGS.includes( key )\r\n\t\t\t\t)\r\n\t\t\t),\r\n\t\t\t[ globalStylesDataKey ]: globalStylesData,\r\n\t\t\t[ globalStylesLinksDataKey ]: globalStylesLinksData,\r\n\t\t\tallowedBlockTypes,\r\n\t\t\tallowRightClickOverrides,\r\n\t\t\tfocusMode: focusMode && ! forceDisableFocusMode,\r\n\t\t\thasFixedToolbar,\r\n\t\t\tisDistractionFree,\r\n\t\t\tkeepCaretInsideBlock,\r\n\t\t\tmediaUpload: hasUploadPermissions ? mediaUpload : undefined,\r\n\t\t\t__experimentalBlockPatterns: blockPatterns,\r\n\t\t\t[ selectBlockPatternsKey ]: ( select ) => {\r\n\t\t\t\tconst { hasFinishedResolution, getBlockPatternsForPostType } =\r\n\t\t\t\t\tunlock( select( coreStore ) );\r\n\t\t\t\tconst patterns = getBlockPatternsForPostType( postType );\r\n\t\t\t\treturn hasFinishedResolution( 'getBlockPatterns' )\r\n\t\t\t\t\t? patterns\r\n\t\t\t\t\t: undefined;\r\n\t\t\t},\r\n\t\t\t[ reusableBlocksSelectKey ]: __experimentalReusableBlocksSelect,\r\n\t\t\t__experimentalBlockPatternCategories: blockPatternCategories,\r\n\t\t\t__experimentalUserPatternCategories: userPatternCategories,\r\n\t\t\t__experimentalFetchLinkSuggestions: ( search, searchOptions ) =>\r\n\t\t\t\tfetchLinkSuggestions( search, searchOptions, settings ),\r\n\t\t\tinserterMediaCategories,\r\n\t\t\t__experimentalFetchRichUrlData: fetchUrlData,\r\n\t\t\t// Todo: This only checks the top level post, not the post within a template or any other entity that can be edited.\r\n\t\t\t// This might be better as a generic \"canUser\" selector.\r\n\t\t\t__experimentalCanUserUseUnfilteredHTML: canUseUnfilteredHTML,\r\n\t\t\t//Todo: this is only needed for native and should probably be removed.\r\n\t\t\t__experimentalUndo: undo,\r\n\t\t\t// Check whether we want all site editor frames to have outlines\r\n\t\t\t// including the navigation / pattern / parts editors.\r\n\t\t\toutlineMode: ! isDistractionFree && postType === 'wp_template',\r\n\t\t\t// Check these two properties: they were not present in the site editor.\r\n\t\t\t__experimentalCreatePageEntity: createPageEntity,\r\n\t\t\t__experimentalUserCanCreatePages: userCanCreatePages,\r\n\t\t\tpageOnFront,\r\n\t\t\tpageForPosts,\r\n\t\t\t__experimentalPreferPatternsOnRoot: postType === 'wp_template',\r\n\t\t\ttemplateLock:\r\n\t\t\t\tpostType === 'wp_navigation' ? 'insert' : settings.templateLock,\r\n\t\t\ttemplate:\r\n\t\t\t\tpostType === 'wp_navigation'\r\n\t\t\t\t\t? [ [ 'core/navigation', {}, [] ] ]\r\n\t\t\t\t\t: settings.template,\r\n\t\t\t__experimentalSetIsInserterOpened: setIsInserterOpened,\r\n\t\t\t[ sectionRootClientIdKey ]: sectionRootClientId,\r\n\t\t};\r\n\r\n\t\treturn blockEditorSettings;\r\n\t}, [\r\n\t\tallowedBlockTypes,\r\n\t\tallowRightClickOverrides,\r\n\t\tfocusMode,\r\n\t\tforceDisableFocusMode,\r\n\t\thasFixedToolbar,\r\n\t\tisDistractionFree,\r\n\t\tkeepCaretInsideBlock,\r\n\t\tsettings,\r\n\t\thasUploadPermissions,\r\n\t\tuserPatternCategories,\r\n\t\tblockPatterns,\r\n\t\tblockPatternCategories,\r\n\t\tcanUseUnfilteredHTML,\r\n\t\tundo,\r\n\t\tcreatePageEntity,\r\n\t\tuserCanCreatePages,\r\n\t\tpageOnFront,\r\n\t\tpageForPosts,\r\n\t\tpostType,\r\n\t\tsetIsInserterOpened,\r\n\t\tsectionRootClientId,\r\n\t\tglobalStylesData,\r\n\t\tglobalStylesLinksData,\r\n\t] );\r\n}\r\n\r\nexport default useBlockEditorSettings;\r\n"],"mappings":"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","ignoreList":[]}