{"version":3,"names":["useSelect","useDispatch","Button","createSlotFill","__","useCallback","EntitiesSavedStates","PostPublishPanel","PluginPrePublishPanel","PluginPostPublishPanel","store","editorStore","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Fill","Slot","ActionsPanelFill","SavePublishPanels","setEntitiesSavedStatesCallback","closeEntitiesSavedStates","isEntitiesSavedStatesOpen","forceIsDirtyPublishPanel","closePublishSidebar","togglePublishSidebar","publishSidebarOpened","isPublishable","isDirty","hasOtherEntitiesChanges","select","isPublishSidebarOpened","isEditedPostPublishable","isCurrentPostPublished","isEditedPostDirty","hasNonPostEntityChanges","_hasOtherEntitiesChanges","openEntitiesSavedStates","unmountableContent","onClose","forceIsDirty","PrePublishExtension","PostPublishExtension","className","children","__next40pxDefaultSize","variant","onClick","disabled","accessibleWhenDisabled","close","bubblesVirtually"],"sources":["@wordpress/editor/src/components/save-publish-panels/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { Button, createSlotFill } from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useCallback } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport EntitiesSavedStates from '../entities-saved-states';\r\nimport PostPublishPanel from '../post-publish-panel';\r\nimport PluginPrePublishPanel from '../plugin-pre-publish-panel';\r\nimport PluginPostPublishPanel from '../plugin-post-publish-panel';\r\nimport { store as editorStore } from '../../store';\r\n\r\nconst { Fill, Slot } = createSlotFill( 'ActionsPanel' );\r\n\r\nexport const ActionsPanelFill = Fill;\r\n\r\nexport default function SavePublishPanels( {\r\n\tsetEntitiesSavedStatesCallback,\r\n\tcloseEntitiesSavedStates,\r\n\tisEntitiesSavedStatesOpen,\r\n\tforceIsDirtyPublishPanel,\r\n} ) {\r\n\tconst { closePublishSidebar, togglePublishSidebar } =\r\n\t\tuseDispatch( editorStore );\r\n\tconst {\r\n\t\tpublishSidebarOpened,\r\n\t\tisPublishable,\r\n\t\tisDirty,\r\n\t\thasOtherEntitiesChanges,\r\n\t} = useSelect( ( select ) => {\r\n\t\tconst {\r\n\t\t\tisPublishSidebarOpened,\r\n\t\t\tisEditedPostPublishable,\r\n\t\t\tisCurrentPostPublished,\r\n\t\t\tisEditedPostDirty,\r\n\t\t\thasNonPostEntityChanges,\r\n\t\t} = select( editorStore );\r\n\t\tconst _hasOtherEntitiesChanges = hasNonPostEntityChanges();\r\n\t\treturn {\r\n\t\t\tpublishSidebarOpened: isPublishSidebarOpened(),\r\n\t\t\tisPublishable:\r\n\t\t\t\t! isCurrentPostPublished() && isEditedPostPublishable(),\r\n\t\t\tisDirty: _hasOtherEntitiesChanges || isEditedPostDirty(),\r\n\t\t\thasOtherEntitiesChanges: _hasOtherEntitiesChanges,\r\n\t\t};\r\n\t}, [] );\r\n\r\n\tconst openEntitiesSavedStates = useCallback(\r\n\t\t() => setEntitiesSavedStatesCallback( true ),\r\n\t\t[]\r\n\t);\r\n\r\n\t// It is ok for these components to be unmounted when not in visual use.\r\n\t// We don't want more than one present at a time, decide which to render.\r\n\tlet unmountableContent;\r\n\tif ( publishSidebarOpened ) {\r\n\t\tunmountableContent = (\r\n\t\t\t<PostPublishPanel\r\n\t\t\t\tonClose={ closePublishSidebar }\r\n\t\t\t\tforceIsDirty={ forceIsDirtyPublishPanel }\r\n\t\t\t\tPrePublishExtension={ PluginPrePublishPanel.Slot }\r\n\t\t\t\tPostPublishExtension={ PluginPostPublishPanel.Slot }\r\n\t\t\t/>\r\n\t\t);\r\n\t} else if ( isPublishable && ! hasOtherEntitiesChanges ) {\r\n\t\tunmountableContent = (\r\n\t\t\t<div className=\"editor-layout__toggle-publish-panel\">\r\n\t\t\t\t<Button\r\n\t\t\t\t\t// TODO: Switch to `true` (40px size) if possible\r\n\t\t\t\t\t__next40pxDefaultSize={ false }\r\n\t\t\t\t\tvariant=\"secondary\"\r\n\t\t\t\t\tclassName=\"editor-layout__toggle-publish-panel-button\"\r\n\t\t\t\t\tonClick={ togglePublishSidebar }\r\n\t\t\t\t\taria-expanded={ false }\r\n\t\t\t\t>\r\n\t\t\t\t\t{ __( 'Open publish panel' ) }\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t);\r\n\t} else {\r\n\t\tunmountableContent = (\r\n\t\t\t<div className=\"editor-layout__toggle-entities-saved-states-panel\">\r\n\t\t\t\t<Button\r\n\t\t\t\t\t// TODO: Switch to `true` (40px size) if possible\r\n\t\t\t\t\t__next40pxDefaultSize={ false }\r\n\t\t\t\t\tvariant=\"secondary\"\r\n\t\t\t\t\tclassName=\"editor-layout__toggle-entities-saved-states-panel-button\"\r\n\t\t\t\t\tonClick={ openEntitiesSavedStates }\r\n\t\t\t\t\taria-expanded={ false }\r\n\t\t\t\t\tdisabled={ ! isDirty }\r\n\t\t\t\t\taccessibleWhenDisabled\r\n\t\t\t\t>\r\n\t\t\t\t\t{ __( 'Open save panel' ) }\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\t// Since EntitiesSavedStates controls its own panel, we can keep it\r\n\t// always mounted to retain its own component state (such as checkboxes).\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ isEntitiesSavedStatesOpen && (\r\n\t\t\t\t<EntitiesSavedStates close={ closeEntitiesSavedStates } />\r\n\t\t\t) }\r\n\t\t\t<Slot bubblesVirtually />\r\n\t\t\t{ ! isEntitiesSavedStatesOpen && unmountableContent }\r\n\t\t</>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}