{"version":3,"names":["BlockInspector","store","blockEditorStore","useSelect","useDispatch","Platform","useCallback","useContext","useEffect","useRef","isRTL","__","drawerLeft","drawerRight","keyboardShortcutsStore","privateApis","componentsPrivateApis","interfaceStore","PatternOverridesPanel","PluginDocumentSettingPanel","PluginSidebar","PostSummary","PostTaxonomiesPanel","PostTransformPanel","SidebarHeader","TemplateContentPanel","TemplatePartContentPanel","useAutoSwitchEditorSidebars","sidebars","unlock","editorStore","NAVIGATION_POST_TYPE","TEMPLATE_PART_POST_TYPE","TEMPLATE_POST_TYPE","jsx","_jsx","jsxs","_jsxs","Tabs","SIDEBAR_ACTIVE_BY_DEFAULT","select","web","native","SidebarContent","tabName","keyboardShortcut","onActionPerformed","extraPanels","tabListRef","tabsContextValue","Context","tabsElements","Array","from","current","querySelectorAll","selectedTabElement","find","element","getAttribute","activeElement","ownerDocument","tabsHasFocus","some","id","focus","identifier","header","Provider","value","children","ref","closeLabel","className","headerClassName","title","toggleShortcut","icon","isActiveByDefault","TabPanel","tabId","document","focusable","Slot","block","Sidebar","showSummary","shortcut","getShortcutRepresentation","sidebar","getActiveComplementaryArea","_isEditorSidebarOpened","includes","_tabName","getBlockSelectionStart","getCurrentPostType","enableComplementaryArea","onTabSelect","newSelectedTabId","selectedTabId","onSelect","selectOnMove"],"sources":["@wordpress/editor/src/components/sidebar/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tBlockInspector,\r\n\tstore as blockEditorStore,\r\n} from '@wordpress/block-editor';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport {\r\n\tPlatform,\r\n\tuseCallback,\r\n\tuseContext,\r\n\tuseEffect,\r\n\tuseRef,\r\n} from '@wordpress/element';\r\nimport { isRTL, __ } from '@wordpress/i18n';\r\nimport { drawerLeft, drawerRight } from '@wordpress/icons';\r\nimport { store as keyboardShortcutsStore } from '@wordpress/keyboard-shortcuts';\r\nimport { privateApis as componentsPrivateApis } from '@wordpress/components';\r\nimport { store as interfaceStore } from '@wordpress/interface';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport PatternOverridesPanel from '../pattern-overrides-panel';\r\nimport PluginDocumentSettingPanel from '../plugin-document-setting-panel';\r\nimport PluginSidebar from '../plugin-sidebar';\r\nimport PostSummary from './post-summary';\r\nimport PostTaxonomiesPanel from '../post-taxonomies/panel';\r\nimport PostTransformPanel from '../post-transform-panel';\r\nimport SidebarHeader from './header';\r\nimport TemplateContentPanel from '../template-content-panel';\r\nimport TemplatePartContentPanel from '../template-part-content-panel';\r\nimport useAutoSwitchEditorSidebars from '../provider/use-auto-switch-editor-sidebars';\r\nimport { sidebars } from './constants';\r\nimport { unlock } from '../../lock-unlock';\r\nimport { store as editorStore } from '../../store';\r\nimport {\r\n\tNAVIGATION_POST_TYPE,\r\n\tTEMPLATE_PART_POST_TYPE,\r\n\tTEMPLATE_POST_TYPE,\r\n} from '../../store/constants';\r\n\r\nconst { Tabs } = unlock( componentsPrivateApis );\r\n\r\nconst SIDEBAR_ACTIVE_BY_DEFAULT = Platform.select( {\r\n\tweb: true,\r\n\tnative: false,\r\n} );\r\n\r\nconst SidebarContent = ( {\r\n\ttabName,\r\n\tkeyboardShortcut,\r\n\tonActionPerformed,\r\n\textraPanels,\r\n} ) => {\r\n\tconst tabListRef = useRef( null );\r\n\t// Because `PluginSidebar` renders a `ComplementaryArea`, we\r\n\t// need to forward the `Tabs` context so it can be passed through the\r\n\t// underlying slot/fill.\r\n\tconst tabsContextValue = useContext( Tabs.Context );\r\n\r\n\t// This effect addresses a race condition caused by tabbing from the last\r\n\t// block in the editor into the settings sidebar. Without this effect, the\r\n\t// selected tab and browser focus can become separated in an unexpected way\r\n\t// (e.g the \"block\" tab is focused, but the \"post\" tab is selected).\r\n\tuseEffect( () => {\r\n\t\tconst tabsElements = Array.from(\r\n\t\t\ttabListRef.current?.querySelectorAll( '[role=\"tab\"]' ) || []\r\n\t\t);\r\n\t\tconst selectedTabElement = tabsElements.find(\r\n\t\t\t// We are purposefully using a custom `data-tab-id` attribute here\r\n\t\t\t// because we don't want rely on any assumptions about `Tabs`\r\n\t\t\t// component internals.\r\n\t\t\t( element ) => element.getAttribute( 'data-tab-id' ) === tabName\r\n\t\t);\r\n\t\tconst activeElement = selectedTabElement?.ownerDocument.activeElement;\r\n\t\tconst tabsHasFocus = tabsElements.some( ( element ) => {\r\n\t\t\treturn activeElement && activeElement.id === element.id;\r\n\t\t} );\r\n\t\tif (\r\n\t\t\ttabsHasFocus &&\r\n\t\t\tselectedTabElement &&\r\n\t\t\tselectedTabElement.id !== activeElement?.id\r\n\t\t) {\r\n\t\t\tselectedTabElement?.focus();\r\n\t\t}\r\n\t}, [ tabName ] );\r\n\r\n\treturn (\r\n\t\t<PluginSidebar\r\n\t\t\tidentifier={ tabName }\r\n\t\t\theader={\r\n\t\t\t\t<Tabs.Context.Provider value={ tabsContextValue }>\r\n\t\t\t\t\t<SidebarHeader ref={ tabListRef } />\r\n\t\t\t\t</Tabs.Context.Provider>\r\n\t\t\t}\r\n\t\t\tcloseLabel={ __( 'Close Settings' ) }\r\n\t\t\t// This classname is added so we can apply a corrective negative\r\n\t\t\t// margin to the panel.\r\n\t\t\t// see https://github.com/WordPress/gutenberg/pull/55360#pullrequestreview-1737671049\r\n\t\t\tclassName=\"editor-sidebar__panel\"\r\n\t\t\theaderClassName=\"editor-sidebar__panel-tabs\"\r\n\t\t\t/* translators: button label text should, if possible, be under 16 characters. */\r\n\t\t\ttitle={ __( 'Settings' ) }\r\n\t\t\ttoggleShortcut={ keyboardShortcut }\r\n\t\t\ticon={ isRTL() ? drawerLeft : drawerRight }\r\n\t\t\tisActiveByDefault={ SIDEBAR_ACTIVE_BY_DEFAULT }\r\n\t\t>\r\n\t\t\t<Tabs.Context.Provider value={ tabsContextValue }>\r\n\t\t\t\t<Tabs.TabPanel tabId={ sidebars.document } focusable={ false }>\r\n\t\t\t\t\t<PostSummary onActionPerformed={ onActionPerformed } />\r\n\t\t\t\t\t<PluginDocumentSettingPanel.Slot />\r\n\t\t\t\t\t<TemplateContentPanel />\r\n\t\t\t\t\t<TemplatePartContentPanel />\r\n\t\t\t\t\t<PostTransformPanel />\r\n\t\t\t\t\t<PostTaxonomiesPanel />\r\n\t\t\t\t\t<PatternOverridesPanel />\r\n\t\t\t\t\t{ extraPanels }\r\n\t\t\t\t</Tabs.TabPanel>\r\n\t\t\t\t<Tabs.TabPanel tabId={ sidebars.block } focusable={ false }>\r\n\t\t\t\t\t<BlockInspector />\r\n\t\t\t\t</Tabs.TabPanel>\r\n\t\t\t</Tabs.Context.Provider>\r\n\t\t</PluginSidebar>\r\n\t);\r\n};\r\n\r\nconst Sidebar = ( { extraPanels, onActionPerformed } ) => {\r\n\tuseAutoSwitchEditorSidebars();\r\n\tconst { tabName, keyboardShortcut, showSummary } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst shortcut = select(\r\n\t\t\t\tkeyboardShortcutsStore\r\n\t\t\t).getShortcutRepresentation( 'core/editor/toggle-sidebar' );\r\n\r\n\t\t\tconst sidebar =\r\n\t\t\t\tselect( interfaceStore ).getActiveComplementaryArea( 'core' );\r\n\t\t\tconst _isEditorSidebarOpened = [\r\n\t\t\t\tsidebars.block,\r\n\t\t\t\tsidebars.document,\r\n\t\t\t].includes( sidebar );\r\n\t\t\tlet _tabName = sidebar;\r\n\t\t\tif ( ! _isEditorSidebarOpened ) {\r\n\t\t\t\t_tabName = !! select(\r\n\t\t\t\t\tblockEditorStore\r\n\t\t\t\t).getBlockSelectionStart()\r\n\t\t\t\t\t? sidebars.block\r\n\t\t\t\t\t: sidebars.document;\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\ttabName: _tabName,\r\n\t\t\t\tkeyboardShortcut: shortcut,\r\n\t\t\t\tshowSummary: ! [\r\n\t\t\t\t\tTEMPLATE_POST_TYPE,\r\n\t\t\t\t\tTEMPLATE_PART_POST_TYPE,\r\n\t\t\t\t\tNAVIGATION_POST_TYPE,\r\n\t\t\t\t].includes( select( editorStore ).getCurrentPostType() ),\r\n\t\t\t};\r\n\t\t},\r\n\t\t[]\r\n\t);\r\n\r\n\tconst { enableComplementaryArea } = useDispatch( interfaceStore );\r\n\r\n\tconst onTabSelect = useCallback(\r\n\t\t( newSelectedTabId ) => {\r\n\t\t\tif ( !! newSelectedTabId ) {\r\n\t\t\t\tenableComplementaryArea( 'core', newSelectedTabId );\r\n\t\t\t}\r\n\t\t},\r\n\t\t[ enableComplementaryArea ]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<Tabs\r\n\t\t\tselectedTabId={ tabName }\r\n\t\t\tonSelect={ onTabSelect }\r\n\t\t\tselectOnMove={ false }\r\n\t\t>\r\n\t\t\t<SidebarContent\r\n\t\t\t\ttabName={ tabName }\r\n\t\t\t\tkeyboardShortcut={ keyboardShortcut }\r\n\t\t\t\tshowSummary={ showSummary }\r\n\t\t\t\tonActionPerformed={ onActionPerformed }\r\n\t\t\t\textraPanels={ extraPanels }\r\n\t\t\t/>\r\n\t\t</Tabs>\r\n\t);\r\n};\r\n\r\nexport default Sidebar;\r\n"],"mappings":"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","ignoreList":[]}