{"version":3,"names":["useDispatch","useSelect","store","blockEditorStore","MenuItem","createBlock","__","useState","noticesStore","symbolFilled","CreateTemplatePartModal","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","ConvertToTemplatePart","clientIds","blocks","isModalOpen","setIsModalOpen","replaceBlocks","createSuccessNotice","canCreate","select","canInsertBlockType","onConvert","templatePart","slug","theme","type","children","icon","onClick","closeModal","onCreate"],"sources":["@wordpress/editor/src/components/template-part-menu-items/convert-to-template-part.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\nimport { store as blockEditorStore } from '@wordpress/block-editor';\r\nimport { MenuItem } from '@wordpress/components';\r\nimport { createBlock } from '@wordpress/blocks';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useState } from '@wordpress/element';\r\nimport { store as noticesStore } from '@wordpress/notices';\r\nimport { symbolFilled } from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport CreateTemplatePartModal from '../create-template-part-modal';\r\n\r\nexport default function ConvertToTemplatePart( { clientIds, blocks } ) {\r\n\tconst [ isModalOpen, setIsModalOpen ] = useState( false );\r\n\tconst { replaceBlocks } = useDispatch( blockEditorStore );\r\n\tconst { createSuccessNotice } = useDispatch( noticesStore );\r\n\r\n\tconst { canCreate } = useSelect( ( select ) => {\r\n\t\treturn {\r\n\t\t\tcanCreate:\r\n\t\t\t\tselect( blockEditorStore ).canInsertBlockType(\r\n\t\t\t\t\t'core/template-part'\r\n\t\t\t\t),\r\n\t\t};\r\n\t}, [] );\r\n\r\n\tif ( ! canCreate ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst onConvert = async ( templatePart ) => {\r\n\t\treplaceBlocks(\r\n\t\t\tclientIds,\r\n\t\t\tcreateBlock( 'core/template-part', {\r\n\t\t\t\tslug: templatePart.slug,\r\n\t\t\t\ttheme: templatePart.theme,\r\n\t\t\t} )\r\n\t\t);\r\n\t\tcreateSuccessNotice( __( 'Template part created.' ), {\r\n\t\t\ttype: 'snackbar',\r\n\t\t} );\r\n\r\n\t\t// The modal and this component will be unmounted because of `replaceBlocks` above,\r\n\t\t// so no need to call `closeModal` or `onClose`.\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<MenuItem\r\n\t\t\t\ticon={ symbolFilled }\r\n\t\t\t\tonClick={ () => {\r\n\t\t\t\t\tsetIsModalOpen( true );\r\n\t\t\t\t} }\r\n\t\t\t\taria-expanded={ isModalOpen }\r\n\t\t\t\taria-haspopup=\"dialog\"\r\n\t\t\t>\r\n\t\t\t\t{ __( 'Create template part' ) }\r\n\t\t\t</MenuItem>\r\n\t\t\t{ isModalOpen && (\r\n\t\t\t\t<CreateTemplatePartModal\r\n\t\t\t\t\tcloseModal={ () => {\r\n\t\t\t\t\t\tsetIsModalOpen( false );\r\n\t\t\t\t\t} }\r\n\t\t\t\t\tblocks={ blocks }\r\n\t\t\t\t\tonCreate={ onConvert }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t</>\r\n\t);\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,WAAW,EAAEC,SAAS,QAAQ,iBAAiB;AACxD,SAASC,KAAK,IAAIC,gBAAgB,QAAQ,yBAAyB;AACnE,SAASC,QAAQ,QAAQ,uBAAuB;AAChD,SAASC,WAAW,QAAQ,mBAAmB;AAC/C,SAASC,EAAE,QAAQ,iBAAiB;AACpC,SAASC,QAAQ,QAAQ,oBAAoB;AAC7C,SAASL,KAAK,IAAIM,YAAY,QAAQ,oBAAoB;AAC1D,SAASC,YAAY,QAAQ,kBAAkB;;AAE/C;AACA;AACA;AACA,OAAOC,uBAAuB,MAAM,+BAA+B;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAEpE,eAAe,SAASC,qBAAqBA,CAAE;EAAEC,SAAS;EAAEC;AAAO,CAAC,EAAG;EACtE,MAAM,CAAEC,WAAW,EAAEC,cAAc,CAAE,GAAGd,QAAQ,CAAE,KAAM,CAAC;EACzD,MAAM;IAAEe;EAAc,CAAC,GAAGtB,WAAW,CAAEG,gBAAiB,CAAC;EACzD,MAAM;IAAEoB;EAAoB,CAAC,GAAGvB,WAAW,CAAEQ,YAAa,CAAC;EAE3D,MAAM;IAAEgB;EAAU,CAAC,GAAGvB,SAAS,CAAIwB,MAAM,IAAM;IAC9C,OAAO;MACND,SAAS,EACRC,MAAM,CAAEtB,gBAAiB,CAAC,CAACuB,kBAAkB,CAC5C,oBACD;IACF,CAAC;EACF,CAAC,EAAE,EAAG,CAAC;EAEP,IAAK,CAAEF,SAAS,EAAG;IAClB,OAAO,IAAI;EACZ;EAEA,MAAMG,SAAS,GAAG,MAAQC,YAAY,IAAM;IAC3CN,aAAa,CACZJ,SAAS,EACTb,WAAW,CAAE,oBAAoB,EAAE;MAClCwB,IAAI,EAAED,YAAY,CAACC,IAAI;MACvBC,KAAK,EAAEF,YAAY,CAACE;IACrB,CAAE,CACH,CAAC;IACDP,mBAAmB,CAAEjB,EAAE,CAAE,wBAAyB,CAAC,EAAE;MACpDyB,IAAI,EAAE;IACP,CAAE,CAAC;;IAEH;IACA;EACD,CAAC;EAED,oBACCf,KAAA,CAAAF,SAAA;IAAAkB,QAAA,gBACCpB,IAAA,CAACR,QAAQ;MACR6B,IAAI,EAAGxB,YAAc;MACrByB,OAAO,EAAGA,CAAA,KAAM;QACfb,cAAc,CAAE,IAAK,CAAC;MACvB,CAAG;MACH,iBAAgBD,WAAa;MAC7B,iBAAc,QAAQ;MAAAY,QAAA,EAEpB1B,EAAE,CAAE,sBAAuB;IAAC,CACrB,CAAC,EACTc,WAAW,iBACZR,IAAA,CAACF,uBAAuB;MACvByB,UAAU,EAAGA,CAAA,KAAM;QAClBd,cAAc,CAAE,KAAM,CAAC;MACxB,CAAG;MACHF,MAAM,EAAGA,MAAQ;MACjBiB,QAAQ,EAAGT;IAAW,CACtB,CACD;EAAA,CACA,CAAC;AAEL","ignoreList":[]}