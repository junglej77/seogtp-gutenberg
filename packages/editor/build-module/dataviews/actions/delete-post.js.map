{"version":3,"names":["trash","useDispatch","__","_n","sprintf","useState","Button","__experimentalText","Text","__experimentalHStack","HStack","__experimentalVStack","VStack","privateApis","patternsPrivateApis","isTemplateRemovable","getItemTitle","isTemplateOrTemplatePart","store","editorStore","unlock","jsx","_jsx","jsxs","_jsxs","PATTERN_TYPES","deletePostAction","id","label","isPrimary","icon","isEligible","post","type","user","supportsBulk","hideModalHeader","RenderModal","items","closeModal","onActionPerformed","isBusy","setIsBusy","removeTemplates","spacing","children","length","justify","variant","onClick","disabled","accessibleWhenDisabled","__next40pxDefaultSize","allowUndo"],"sources":["@wordpress/editor/src/dataviews/actions/delete-post.tsx"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { trash } from '@wordpress/icons';\r\nimport { useDispatch } from '@wordpress/data';\r\nimport { __, _n, sprintf } from '@wordpress/i18n';\r\nimport { useState } from '@wordpress/element';\r\nimport {\r\n\tButton,\r\n\t__experimentalText as Text,\r\n\t__experimentalHStack as HStack,\r\n\t__experimentalVStack as VStack,\r\n} from '@wordpress/components';\r\n// @ts-ignore\r\nimport { privateApis as patternsPrivateApis } from '@wordpress/patterns';\r\nimport type { Action } from '@wordpress/dataviews';\r\nimport type { StoreDescriptor } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport {\r\n\tisTemplateRemovable,\r\n\tgetItemTitle,\r\n\tisTemplateOrTemplatePart,\r\n} from './utils';\r\n// @ts-ignore\r\nimport { store as editorStore } from '../../store';\r\nimport { unlock } from '../../lock-unlock';\r\nimport type { Post } from '../types';\r\n\r\nconst { PATTERN_TYPES } = unlock( patternsPrivateApis );\r\n\r\n// This action is used for templates, patterns and template parts.\r\n// Every other post type uses the similar `trashPostAction` which\r\n// moves the post to trash.\r\nconst deletePostAction: Action< Post > = {\r\n\tid: 'delete-post',\r\n\tlabel: __( 'Delete' ),\r\n\tisPrimary: true,\r\n\ticon: trash,\r\n\tisEligible( post ) {\r\n\t\tif ( isTemplateOrTemplatePart( post ) ) {\r\n\t\t\treturn isTemplateRemovable( post );\r\n\t\t}\r\n\t\t// We can only remove user patterns.\r\n\t\treturn post.type === PATTERN_TYPES.user;\r\n\t},\r\n\tsupportsBulk: true,\r\n\thideModalHeader: true,\r\n\tRenderModal: ( { items, closeModal, onActionPerformed } ) => {\r\n\t\tconst [ isBusy, setIsBusy ] = useState( false );\r\n\t\tconst { removeTemplates } = unlock(\r\n\t\t\tuseDispatch( editorStore as StoreDescriptor )\r\n\t\t);\r\n\t\treturn (\r\n\t\t\t<VStack spacing=\"5\">\r\n\t\t\t\t<Text>\r\n\t\t\t\t\t{ items.length > 1\r\n\t\t\t\t\t\t? sprintf(\r\n\t\t\t\t\t\t\t\t// translators: %d: number of items to delete.\r\n\t\t\t\t\t\t\t\t_n(\r\n\t\t\t\t\t\t\t\t\t'Delete %d item?',\r\n\t\t\t\t\t\t\t\t\t'Delete %d items?',\r\n\t\t\t\t\t\t\t\t\titems.length\r\n\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\titems.length\r\n\t\t\t\t\t\t  )\r\n\t\t\t\t\t\t: sprintf(\r\n\t\t\t\t\t\t\t\t// translators: %s: The template or template part's titles\r\n\t\t\t\t\t\t\t\t__( 'Delete \"%s\"?' ),\r\n\t\t\t\t\t\t\t\tgetItemTitle( items[ 0 ] )\r\n\t\t\t\t\t\t  ) }\r\n\t\t\t\t</Text>\r\n\t\t\t\t<HStack justify=\"right\">\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tvariant=\"tertiary\"\r\n\t\t\t\t\t\tonClick={ closeModal }\r\n\t\t\t\t\t\tdisabled={ isBusy }\r\n\t\t\t\t\t\taccessibleWhenDisabled\r\n\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ __( 'Cancel' ) }\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\tonClick={ async () => {\r\n\t\t\t\t\t\t\tsetIsBusy( true );\r\n\t\t\t\t\t\t\tawait removeTemplates( items, {\r\n\t\t\t\t\t\t\t\tallowUndo: false,\r\n\t\t\t\t\t\t\t} );\r\n\t\t\t\t\t\t\tonActionPerformed?.( items );\r\n\t\t\t\t\t\t\tsetIsBusy( false );\r\n\t\t\t\t\t\t\tcloseModal?.();\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t\tisBusy={ isBusy }\r\n\t\t\t\t\t\tdisabled={ isBusy }\r\n\t\t\t\t\t\taccessibleWhenDisabled\r\n\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ __( 'Delete' ) }\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</HStack>\r\n\t\t\t</VStack>\r\n\t\t);\r\n\t},\r\n};\r\n\r\nexport default deletePostAction;\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,KAAK,QAAQ,kBAAkB;AACxC,SAASC,WAAW,QAAQ,iBAAiB;AAC7C,SAASC,EAAE,EAAEC,EAAE,EAAEC,OAAO,QAAQ,iBAAiB;AACjD,SAASC,QAAQ,QAAQ,oBAAoB;AAC7C,SACCC,MAAM,EACNC,kBAAkB,IAAIC,IAAI,EAC1BC,oBAAoB,IAAIC,MAAM,EAC9BC,oBAAoB,IAAIC,MAAM,QACxB,uBAAuB;AAC9B;AACA,SAASC,WAAW,IAAIC,mBAAmB,QAAQ,qBAAqB;AAIxE;AACA;AACA;AACA,SACCC,mBAAmB,EACnBC,YAAY,EACZC,wBAAwB,QAClB,SAAS;AAChB;AACA,SAASC,KAAK,IAAIC,WAAW,QAAQ,aAAa;AAClD,SAASC,MAAM,QAAQ,mBAAmB;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAG3C,MAAM;EAAEC;AAAc,CAAC,GAAGL,MAAM,CAAEN,mBAAoB,CAAC;;AAEvD;AACA;AACA;AACA,MAAMY,gBAAgC,GAAG;EACxCC,EAAE,EAAE,aAAa;EACjBC,KAAK,EAAE1B,EAAE,CAAE,QAAS,CAAC;EACrB2B,SAAS,EAAE,IAAI;EACfC,IAAI,EAAE9B,KAAK;EACX+B,UAAUA,CAAEC,IAAI,EAAG;IAClB,IAAKf,wBAAwB,CAAEe,IAAK,CAAC,EAAG;MACvC,OAAOjB,mBAAmB,CAAEiB,IAAK,CAAC;IACnC;IACA;IACA,OAAOA,IAAI,CAACC,IAAI,KAAKR,aAAa,CAACS,IAAI;EACxC,CAAC;EACDC,YAAY,EAAE,IAAI;EAClBC,eAAe,EAAE,IAAI;EACrBC,WAAW,EAAEA,CAAE;IAAEC,KAAK;IAAEC,UAAU;IAAEC;EAAkB,CAAC,KAAM;IAC5D,MAAM,CAAEC,MAAM,EAAEC,SAAS,CAAE,GAAGrC,QAAQ,CAAE,KAAM,CAAC;IAC/C,MAAM;MAAEsC;IAAgB,CAAC,GAAGvB,MAAM,CACjCnB,WAAW,CAAEkB,WAA+B,CAC7C,CAAC;IACD,oBACCK,KAAA,CAACZ,MAAM;MAACgC,OAAO,EAAC,GAAG;MAAAC,QAAA,gBAClBvB,IAAA,CAACd,IAAI;QAAAqC,QAAA,EACFP,KAAK,CAACQ,MAAM,GAAG,CAAC,GACf1C,OAAO;QACP;QACAD,EAAE,CACD,iBAAiB,EACjB,kBAAkB,EAClBmC,KAAK,CAACQ,MACP,CAAC,EACDR,KAAK,CAACQ,MACN,CAAC,GACD1C,OAAO;QACP;QACAF,EAAE,CAAE,cAAe,CAAC,EACpBc,YAAY,CAAEsB,KAAK,CAAE,CAAC,CAAG,CACzB;MAAC,CACC,CAAC,eACPd,KAAA,CAACd,MAAM;QAACqC,OAAO,EAAC,OAAO;QAAAF,QAAA,gBACtBvB,IAAA,CAAChB,MAAM;UACN0C,OAAO,EAAC,UAAU;UAClBC,OAAO,EAAGV,UAAY;UACtBW,QAAQ,EAAGT,MAAQ;UACnBU,sBAAsB;UACtBC,qBAAqB;UAAAP,QAAA,EAEnB3C,EAAE,CAAE,QAAS;QAAC,CACT,CAAC,eACToB,IAAA,CAAChB,MAAM;UACN0C,OAAO,EAAC,SAAS;UACjBC,OAAO,EAAG,MAAAA,CAAA,KAAY;YACrBP,SAAS,CAAE,IAAK,CAAC;YACjB,MAAMC,eAAe,CAAEL,KAAK,EAAE;cAC7Be,SAAS,EAAE;YACZ,CAAE,CAAC;YACHb,iBAAiB,GAAIF,KAAM,CAAC;YAC5BI,SAAS,CAAE,KAAM,CAAC;YAClBH,UAAU,GAAG,CAAC;UACf,CAAG;UACHE,MAAM,EAAGA,MAAQ;UACjBS,QAAQ,EAAGT,MAAQ;UACnBU,sBAAsB;UACtBC,qBAAqB;UAAAP,QAAA,EAEnB3C,EAAE,CAAE,QAAS;QAAC,CACT,CAAC;MAAA,CACF,CAAC;IAAA,CACF,CAAC;EAEX;AACD,CAAC;AAED,eAAewB,gBAAgB","ignoreList":[]}