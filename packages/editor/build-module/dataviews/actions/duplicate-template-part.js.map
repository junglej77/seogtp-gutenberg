{"version":3,"names":["useDispatch","__","sprintf","_x","store","noticesStore","useMemo","parse","TEMPLATE_PART_POST_TYPE","CreateTemplatePartModalContents","getItemTitle","jsx","_jsx","duplicateTemplatePart","id","label","isEligible","item","type","modalHeader","RenderModal","items","closeModal","blocks","_item$blocks","content","raw","__unstableSkipMigrationLogs","createSuccessNotice","onTemplatePartSuccess","defaultArea","area","defaultTitle","onCreate","onError","confirmLabel"],"sources":["@wordpress/editor/src/dataviews/actions/duplicate-template-part.tsx"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useDispatch } from '@wordpress/data';\r\nimport { __, sprintf, _x } from '@wordpress/i18n';\r\nimport { store as noticesStore } from '@wordpress/notices';\r\nimport { useMemo } from '@wordpress/element';\r\n// @ts-ignore\r\nimport { parse } from '@wordpress/blocks';\r\nimport type { Action } from '@wordpress/dataviews';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { TEMPLATE_PART_POST_TYPE } from '../../store/constants';\r\nimport { CreateTemplatePartModalContents } from '../../components/create-template-part-modal';\r\nimport { getItemTitle } from './utils';\r\nimport type { TemplatePart } from '../types';\r\n\r\nconst duplicateTemplatePart: Action< TemplatePart > = {\r\n\tid: 'duplicate-template-part',\r\n\tlabel: _x( 'Duplicate', 'action label' ),\r\n\tisEligible: ( item ) => item.type === TEMPLATE_PART_POST_TYPE,\r\n\tmodalHeader: _x( 'Duplicate template part', 'action label' ),\r\n\tRenderModal: ( { items, closeModal } ) => {\r\n\t\tconst [ item ] = items;\r\n\t\tconst blocks = useMemo( () => {\r\n\t\t\treturn (\r\n\t\t\t\titem.blocks ??\r\n\t\t\t\tparse(\r\n\t\t\t\t\ttypeof item.content === 'string'\r\n\t\t\t\t\t\t? item.content\r\n\t\t\t\t\t\t: item.content.raw,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t__unstableSkipMigrationLogs: true,\r\n\t\t\t\t\t}\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t}, [ item.content, item.blocks ] );\r\n\t\tconst { createSuccessNotice } = useDispatch( noticesStore );\r\n\t\tfunction onTemplatePartSuccess() {\r\n\t\t\tcreateSuccessNotice(\r\n\t\t\t\tsprintf(\r\n\t\t\t\t\t// translators: %s: The new template part's title e.g. 'Call to action (copy)'.\r\n\t\t\t\t\t__( '\"%s\" duplicated.' ),\r\n\t\t\t\t\tgetItemTitle( item )\r\n\t\t\t\t),\r\n\t\t\t\t{ type: 'snackbar', id: 'edit-site-patterns-success' }\r\n\t\t\t);\r\n\t\t\tcloseModal?.();\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<CreateTemplatePartModalContents\r\n\t\t\t\tblocks={ blocks }\r\n\t\t\t\tdefaultArea={ item.area }\r\n\t\t\t\tdefaultTitle={ sprintf(\r\n\t\t\t\t\t/* translators: %s: Existing template part title */\r\n\t\t\t\t\t__( '%s (Copy)' ),\r\n\t\t\t\t\tgetItemTitle( item )\r\n\t\t\t\t) }\r\n\t\t\t\tonCreate={ onTemplatePartSuccess }\r\n\t\t\t\tonError={ closeModal }\r\n\t\t\t\tconfirmLabel={ _x( 'Duplicate', 'action label' ) }\r\n\t\t\t\tcloseModal={ closeModal }\r\n\t\t\t/>\r\n\t\t);\r\n\t},\r\n};\r\n\r\nexport default duplicateTemplatePart;\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,WAAW,QAAQ,iBAAiB;AAC7C,SAASC,EAAE,EAAEC,OAAO,EAAEC,EAAE,QAAQ,iBAAiB;AACjD,SAASC,KAAK,IAAIC,YAAY,QAAQ,oBAAoB;AAC1D,SAASC,OAAO,QAAQ,oBAAoB;AAC5C;AACA,SAASC,KAAK,QAAQ,mBAAmB;AAGzC;AACA;AACA;AACA,SAASC,uBAAuB,QAAQ,uBAAuB;AAC/D,SAASC,+BAA+B,QAAQ,6CAA6C;AAC7F,SAASC,YAAY,QAAQ,SAAS;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAGvC,MAAMC,qBAA6C,GAAG;EACrDC,EAAE,EAAE,yBAAyB;EAC7BC,KAAK,EAAEZ,EAAE,CAAE,WAAW,EAAE,cAAe,CAAC;EACxCa,UAAU,EAAIC,IAAI,IAAMA,IAAI,CAACC,IAAI,KAAKV,uBAAuB;EAC7DW,WAAW,EAAEhB,EAAE,CAAE,yBAAyB,EAAE,cAAe,CAAC;EAC5DiB,WAAW,EAAEA,CAAE;IAAEC,KAAK;IAAEC;EAAW,CAAC,KAAM;IACzC,MAAM,CAAEL,IAAI,CAAE,GAAGI,KAAK;IACtB,MAAME,MAAM,GAAGjB,OAAO,CAAE,MAAM;MAAA,IAAAkB,YAAA;MAC7B,QAAAA,YAAA,GACCP,IAAI,CAACM,MAAM,cAAAC,YAAA,cAAAA,YAAA,GACXjB,KAAK,CACJ,OAAOU,IAAI,CAACQ,OAAO,KAAK,QAAQ,GAC7BR,IAAI,CAACQ,OAAO,GACZR,IAAI,CAACQ,OAAO,CAACC,GAAG,EACnB;QACCC,2BAA2B,EAAE;MAC9B,CACD,CAAC;IAEH,CAAC,EAAE,CAAEV,IAAI,CAACQ,OAAO,EAAER,IAAI,CAACM,MAAM,CAAG,CAAC;IAClC,MAAM;MAAEK;IAAoB,CAAC,GAAG5B,WAAW,CAAEK,YAAa,CAAC;IAC3D,SAASwB,qBAAqBA,CAAA,EAAG;MAChCD,mBAAmB,CAClB1B,OAAO;MACN;MACAD,EAAE,CAAE,kBAAmB,CAAC,EACxBS,YAAY,CAAEO,IAAK,CACpB,CAAC,EACD;QAAEC,IAAI,EAAE,UAAU;QAAEJ,EAAE,EAAE;MAA6B,CACtD,CAAC;MACDQ,UAAU,GAAG,CAAC;IACf;IACA,oBACCV,IAAA,CAACH,+BAA+B;MAC/Bc,MAAM,EAAGA,MAAQ;MACjBO,WAAW,EAAGb,IAAI,CAACc,IAAM;MACzBC,YAAY,EAAG9B,OAAO,EACrB;MACAD,EAAE,CAAE,WAAY,CAAC,EACjBS,YAAY,CAAEO,IAAK,CACpB,CAAG;MACHgB,QAAQ,EAAGJ,qBAAuB;MAClCK,OAAO,EAAGZ,UAAY;MACtBa,YAAY,EAAGhC,EAAE,CAAE,WAAW,EAAE,cAAe,CAAG;MAClDmB,UAAU,EAAGA;IAAY,CACzB,CAAC;EAEJ;AACD,CAAC;AAED,eAAeT,qBAAqB","ignoreList":[]}