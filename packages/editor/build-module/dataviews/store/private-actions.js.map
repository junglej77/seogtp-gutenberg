{"version":3,"names":["store","coreStore","doAction","deletePost","duplicatePattern","duplicateTemplatePart","exportPattern","resetPost","trashPost","permanentlyDeletePost","renamePost","reorderPage","restorePost","editorStore","unlock","duplicatePost","viewPostRevisions","viewPost","registerEntityAction","kind","name","config","type","unregisterEntityAction","actionId","setIsReady","registerPostTypeActions","postType","registry","isReady","select","isEntityReady","dispatch","postTypeConfig","resolveSelect","getPostType","canCreate","canUser","currentTheme","getCurrentTheme","actions","viewable","undefined","supports","revisions","globalThis","IS_GUTENBERG_PLUGIN","includes","slug","is_block_theme","title","batch","forEach","action"],"sources":["@wordpress/editor/src/dataviews/store/private-actions.ts"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { store as coreStore } from '@wordpress/core-data';\r\nimport type { Action } from '@wordpress/dataviews';\r\nimport { doAction } from '@wordpress/hooks';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport deletePost from '../actions/delete-post';\r\nimport duplicatePattern from '../actions/duplicate-pattern';\r\nimport duplicateTemplatePart from '../actions/duplicate-template-part';\r\nimport exportPattern from '../actions/export-pattern';\r\nimport resetPost from '../actions/reset-post';\r\nimport trashPost from '../actions/trash-post';\r\nimport permanentlyDeletePost from '../actions/permanently-delete-post';\r\nimport renamePost from '../actions/rename-post';\r\nimport reorderPage from '../actions/reorder-page';\r\nimport restorePost from '../actions/restore-post';\r\nimport type { PostType } from '../types';\r\nimport { store as editorStore } from '../../store';\r\nimport { unlock } from '../../lock-unlock';\r\nimport duplicatePost from '../actions/duplicate-post';\r\nimport viewPostRevisions from '../actions/view-post-revisions';\r\nimport viewPost from '../actions/view-post';\r\n\r\nexport function registerEntityAction< Item >(\r\n\tkind: string,\r\n\tname: string,\r\n\tconfig: Action< Item >\r\n) {\r\n\treturn {\r\n\t\ttype: 'REGISTER_ENTITY_ACTION' as const,\r\n\t\tkind,\r\n\t\tname,\r\n\t\tconfig,\r\n\t};\r\n}\r\n\r\nexport function unregisterEntityAction(\r\n\tkind: string,\r\n\tname: string,\r\n\tactionId: string\r\n) {\r\n\treturn {\r\n\t\ttype: 'UNREGISTER_ENTITY_ACTION' as const,\r\n\t\tkind,\r\n\t\tname,\r\n\t\tactionId,\r\n\t};\r\n}\r\n\r\nexport function setIsReady( kind: string, name: string ) {\r\n\treturn {\r\n\t\ttype: 'SET_IS_READY' as const,\r\n\t\tkind,\r\n\t\tname,\r\n\t};\r\n}\r\n\r\nexport const registerPostTypeActions =\r\n\t( postType: string ) =>\r\n\tasync ( { registry }: { registry: any } ) => {\r\n\t\tconst isReady = unlock( registry.select( editorStore ) ).isEntityReady(\r\n\t\t\t'postType',\r\n\t\t\tpostType\r\n\t\t);\r\n\t\tif ( isReady ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tunlock( registry.dispatch( editorStore ) ).setIsReady(\r\n\t\t\t'postType',\r\n\t\t\tpostType\r\n\t\t);\r\n\r\n\t\tconst postTypeConfig = ( await registry\r\n\t\t\t.resolveSelect( coreStore )\r\n\t\t\t.getPostType( postType ) ) as PostType;\r\n\r\n\t\tconst canCreate = await registry\r\n\t\t\t.resolveSelect( coreStore )\r\n\t\t\t.canUser( 'create', {\r\n\t\t\t\tkind: 'postType',\r\n\t\t\t\tname: postType,\r\n\t\t\t} );\r\n\t\tconst currentTheme = await registry\r\n\t\t\t.resolveSelect( coreStore )\r\n\t\t\t.getCurrentTheme();\r\n\r\n\t\tconst actions = [\r\n\t\t\tpostTypeConfig.viewable ? viewPost : undefined,\r\n\t\t\t!! postTypeConfig?.supports?.revisions\r\n\t\t\t\t? viewPostRevisions\r\n\t\t\t\t: undefined,\r\n\t\t\t// @ts-ignore\r\n\t\t\tglobalThis.IS_GUTENBERG_PLUGIN\r\n\t\t\t\t? ! [ 'wp_template', 'wp_block', 'wp_template_part' ].includes(\r\n\t\t\t\t\t\tpostTypeConfig.slug\r\n\t\t\t\t  ) &&\r\n\t\t\t\t  canCreate &&\r\n\t\t\t\t  duplicatePost\r\n\t\t\t\t: undefined,\r\n\t\t\tpostTypeConfig.slug === 'wp_template_part' &&\r\n\t\t\tcanCreate &&\r\n\t\t\tcurrentTheme?.is_block_theme\r\n\t\t\t\t? duplicateTemplatePart\r\n\t\t\t\t: undefined,\r\n\t\t\tcanCreate && postTypeConfig.slug === 'wp_block'\r\n\t\t\t\t? duplicatePattern\r\n\t\t\t\t: undefined,\r\n\t\t\tpostTypeConfig.supports?.title ? renamePost : undefined,\r\n\t\t\tpostTypeConfig?.supports?.[ 'page-attributes' ]\r\n\t\t\t\t? reorderPage\r\n\t\t\t\t: undefined,\r\n\t\t\tpostTypeConfig.slug === 'wp_block' ? exportPattern : undefined,\r\n\t\t\tresetPost,\r\n\t\t\trestorePost,\r\n\t\t\tdeletePost,\r\n\t\t\ttrashPost,\r\n\t\t\tpermanentlyDeletePost,\r\n\t\t];\r\n\r\n\t\tregistry.batch( () => {\r\n\t\t\tactions.forEach( ( action ) => {\r\n\t\t\t\tif ( ! action ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tunlock( registry.dispatch( editorStore ) ).registerEntityAction(\r\n\t\t\t\t\t'postType',\r\n\t\t\t\t\tpostType,\r\n\t\t\t\t\taction\r\n\t\t\t\t);\r\n\t\t\t} );\r\n\t\t} );\r\n\r\n\t\tdoAction( 'core.registerPostTypeActions', postType );\r\n\t};\r\n"],"mappings":"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","ignoreList":[]}