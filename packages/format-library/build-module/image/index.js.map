{"version":3,"names":["Path","SVG","Popover","Button","ExternalLink","__experimentalHStack","HStack","__experimentalVStack","VStack","__experimentalNumberControl","NumberControl","TextareaControl","__","useState","insertObject","useAnchor","MediaUpload","RichTextToolbarButton","MediaUploadCheck","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","ALLOWED_MEDIA_TYPES","name","title","image","keywords","object","tagName","className","attributes","style","url","alt","edit","Edit","InlineUI","value","onChange","activeObjectAttributes","contentRef","width","replace","editedWidth","setEditedWidth","editedAlt","setEditedAlt","hasChanged","popoverAnchor","editableContentElement","current","settings","placement","focusOnMount","anchor","children","onSubmit","event","newReplacements","replacements","slice","start","type","preventDefault","spacing","__next40pxDefaultSize","label","min","newWidth","__nextHasNoMarginBottom","newAlt","help","href","justify","disabled","accessibleWhenDisabled","variant","size","onFocus","isObjectActive","allowedTypes","onSelect","id","imgWidth","Math","render","open","icon","xmlns","viewBox","d","onClick","isActive"],"sources":["@wordpress/format-library/src/image/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tPath,\r\n\tSVG,\r\n\tPopover,\r\n\tButton,\r\n\tExternalLink,\r\n\t__experimentalHStack as HStack,\r\n\t__experimentalVStack as VStack,\r\n\t__experimentalNumberControl as NumberControl,\r\n\tTextareaControl,\r\n} from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useState } from '@wordpress/element';\r\nimport { insertObject, useAnchor } from '@wordpress/rich-text';\r\nimport {\r\n\tMediaUpload,\r\n\tRichTextToolbarButton,\r\n\tMediaUploadCheck,\r\n} from '@wordpress/block-editor';\r\n\r\nconst ALLOWED_MEDIA_TYPES = [ 'image' ];\r\n\r\nconst name = 'core/image';\r\nconst title = __( 'Inline image' );\r\n\r\nexport const image = {\r\n\tname,\r\n\ttitle,\r\n\tkeywords: [ __( 'photo' ), __( 'media' ) ],\r\n\tobject: true,\r\n\ttagName: 'img',\r\n\tclassName: null,\r\n\tattributes: {\r\n\t\tclassName: 'class',\r\n\t\tstyle: 'style',\r\n\t\turl: 'src',\r\n\t\talt: 'alt',\r\n\t},\r\n\tedit: Edit,\r\n};\r\n\r\nfunction InlineUI( { value, onChange, activeObjectAttributes, contentRef } ) {\r\n\tconst { style, alt } = activeObjectAttributes;\r\n\tconst width = style?.replace( /\\D/g, '' );\r\n\tconst [ editedWidth, setEditedWidth ] = useState( width );\r\n\tconst [ editedAlt, setEditedAlt ] = useState( alt );\r\n\tconst hasChanged = editedWidth !== width || editedAlt !== alt;\r\n\tconst popoverAnchor = useAnchor( {\r\n\t\teditableContentElement: contentRef.current,\r\n\t\tsettings: image,\r\n\t} );\r\n\r\n\treturn (\r\n\t\t<Popover\r\n\t\t\tplacement=\"bottom\"\r\n\t\t\tfocusOnMount={ false }\r\n\t\t\tanchor={ popoverAnchor }\r\n\t\t\tclassName=\"block-editor-format-toolbar__image-popover\"\r\n\t\t>\r\n\t\t\t<form\r\n\t\t\t\tclassName=\"block-editor-format-toolbar__image-container-content\"\r\n\t\t\t\tonSubmit={ ( event ) => {\r\n\t\t\t\t\tconst newReplacements = value.replacements.slice();\r\n\r\n\t\t\t\t\tnewReplacements[ value.start ] = {\r\n\t\t\t\t\t\ttype: name,\r\n\t\t\t\t\t\tattributes: {\r\n\t\t\t\t\t\t\t...activeObjectAttributes,\r\n\t\t\t\t\t\t\tstyle: width ? `width: ${ editedWidth }px;` : '',\r\n\t\t\t\t\t\t\talt: editedAlt,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tonChange( {\r\n\t\t\t\t\t\t...value,\r\n\t\t\t\t\t\treplacements: newReplacements,\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t} }\r\n\t\t\t>\r\n\t\t\t\t<VStack spacing={ 4 }>\r\n\t\t\t\t\t<NumberControl\r\n\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\tlabel={ __( 'Width' ) }\r\n\t\t\t\t\t\tvalue={ editedWidth }\r\n\t\t\t\t\t\tmin={ 1 }\r\n\t\t\t\t\t\tonChange={ ( newWidth ) => {\r\n\t\t\t\t\t\t\tsetEditedWidth( newWidth );\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<TextareaControl\r\n\t\t\t\t\t\tlabel={ __( 'Alternative text' ) }\r\n\t\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\t\tvalue={ editedAlt }\r\n\t\t\t\t\t\tonChange={ ( newAlt ) => {\r\n\t\t\t\t\t\t\tsetEditedAlt( newAlt );\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t\thelp={\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<ExternalLink\r\n\t\t\t\t\t\t\t\t\thref={\r\n\t\t\t\t\t\t\t\t\t\t// translators: Localized tutorial, if one exists. W3C Web Accessibility Initiative link has list of existing translations.\r\n\t\t\t\t\t\t\t\t\t\t__(\r\n\t\t\t\t\t\t\t\t\t\t\t'https://www.w3.org/WAI/tutorials/images/decision-tree/'\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{ __(\r\n\t\t\t\t\t\t\t\t\t\t'Describe the purpose of the image.'\r\n\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t</ExternalLink>\r\n\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t{ __( 'Leave empty if decorative.' ) }\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<HStack justify=\"right\">\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tdisabled={ ! hasChanged }\r\n\t\t\t\t\t\t\taccessibleWhenDisabled\r\n\t\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\tsize=\"compact\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{ __( 'Apply' ) }\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</HStack>\r\n\t\t\t\t</VStack>\r\n\t\t\t</form>\r\n\t\t</Popover>\r\n\t);\r\n}\r\n\r\nfunction Edit( {\r\n\tvalue,\r\n\tonChange,\r\n\tonFocus,\r\n\tisObjectActive,\r\n\tactiveObjectAttributes,\r\n\tcontentRef,\r\n} ) {\r\n\treturn (\r\n\t\t<MediaUploadCheck>\r\n\t\t\t<MediaUpload\r\n\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\r\n\t\t\t\tonSelect={ ( { id, url, alt, width: imgWidth } ) => {\r\n\t\t\t\t\tonChange(\r\n\t\t\t\t\t\tinsertObject( value, {\r\n\t\t\t\t\t\t\ttype: name,\r\n\t\t\t\t\t\t\tattributes: {\r\n\t\t\t\t\t\t\t\tclassName: `wp-image-${ id }`,\r\n\t\t\t\t\t\t\t\tstyle: `width: ${ Math.min(\r\n\t\t\t\t\t\t\t\t\timgWidth,\r\n\t\t\t\t\t\t\t\t\t150\r\n\t\t\t\t\t\t\t\t) }px;`,\r\n\t\t\t\t\t\t\t\turl,\r\n\t\t\t\t\t\t\t\talt,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t} )\r\n\t\t\t\t\t);\r\n\t\t\t\t\tonFocus();\r\n\t\t\t\t} }\r\n\t\t\t\trender={ ( { open } ) => (\r\n\t\t\t\t\t<RichTextToolbarButton\r\n\t\t\t\t\t\ticon={\r\n\t\t\t\t\t\t\t<SVG\r\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Path d=\"M4 18.5h16V17H4v1.5zM16 13v1.5h4V13h-4zM5.1 15h7.8c.6 0 1.1-.5 1.1-1.1V6.1c0-.6-.5-1.1-1.1-1.1H5.1C4.5 5 4 5.5 4 6.1v7.8c0 .6.5 1.1 1.1 1.1zm.4-8.5h7V10l-1-1c-.3-.3-.8-.3-1 0l-1.6 1.5-1.2-.7c-.3-.2-.6-.2-.9 0l-1.3 1V6.5zm0 6.1l1.8-1.3 1.3.8c.3.2.7.2.9-.1l1.5-1.4 1.5 1.4v1.5h-7v-.9z\" />\r\n\t\t\t\t\t\t\t</SVG>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttitle={ title }\r\n\t\t\t\t\t\tonClick={ open }\r\n\t\t\t\t\t\tisActive={ isObjectActive }\r\n\t\t\t\t\t/>\r\n\t\t\t\t) }\r\n\t\t\t/>\r\n\t\t\t{ isObjectActive && (\r\n\t\t\t\t<InlineUI\r\n\t\t\t\t\tvalue={ value }\r\n\t\t\t\t\tonChange={ onChange }\r\n\t\t\t\t\tactiveObjectAttributes={ activeObjectAttributes }\r\n\t\t\t\t\tcontentRef={ contentRef }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t</MediaUploadCheck>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}