{"version":3,"names":["useMemo","createInterpolateElement","__","sprintf","speak","Popover","prependHTTP","create","insert","isCollapsed","applyFormat","removeFormat","slice","replace","split","concat","useAnchor","__experimentalLinkControl","LinkControl","store","blockEditorStore","useDispatch","useSelect","createLinkFormat","isValidHref","getFormatBoundary","link","settings","jsx","_jsx","LINK_SETTINGS","DEFAULT_LINK_SETTINGS","id","title","InlineLinkUI","isActive","activeAttributes","value","onChange","onFocusOutside","stopAddingLink","contentRef","focusOnMount","richLinkTextValue","getRichTextValueFromSelection","richTextText","text","selectionChange","createPageEntity","userCanCreatePages","selectionStart","select","getSettings","getSelectionStart","_settings","__experimentalCreatePageEntity","__experimentalUserCanCreatePages","linkValue","url","type","opensInNewTab","target","nofollow","rel","includes","removeLink","newValue","onChangeLink","nextValue","hasLink","isNewLink","newUrl","linkFormat","undefined","String","opensInNewWindow","newText","inserted","start","length","clientId","identifier","attributeKey","boundary","valBefore","valAfter","newValAfter","popoverAnchor","editableContentElement","current","handleCreate","pageTitle","page","status","rendered","kind","createButtonText","searchTerm","mark","anchor","animate","onClose","placement","offset","shift","constrainTabbing","children","onRemove","hasRichPreviews","createSuggestion","withCreateSuggestion","createSuggestionButtonText","hasTextControl","showInitialSuggestions","suggestionsQuery","initialSuggestionsSearchOptions","subtype","perPage","textStart","textEnd","end"],"sources":["@wordpress/format-library/src/link/inline.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useMemo, createInterpolateElement } from '@wordpress/element';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { speak } from '@wordpress/a11y';\r\nimport { Popover } from '@wordpress/components';\r\nimport { prependHTTP } from '@wordpress/url';\r\nimport {\r\n\tcreate,\r\n\tinsert,\r\n\tisCollapsed,\r\n\tapplyFormat,\r\n\tremoveFormat,\r\n\tslice,\r\n\treplace,\r\n\tsplit,\r\n\tconcat,\r\n\tuseAnchor,\r\n} from '@wordpress/rich-text';\r\nimport {\r\n\t__experimentalLinkControl as LinkControl,\r\n\tstore as blockEditorStore,\r\n} from '@wordpress/block-editor';\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { createLinkFormat, isValidHref, getFormatBoundary } from './utils';\r\nimport { link as settings } from './index';\r\n\r\nconst LINK_SETTINGS = [\r\n\t...LinkControl.DEFAULT_LINK_SETTINGS,\r\n\t{\r\n\t\tid: 'nofollow',\r\n\t\ttitle: __( 'Mark as nofollow' ),\r\n\t},\r\n];\r\n\r\nfunction InlineLinkUI( {\r\n\tisActive,\r\n\tactiveAttributes,\r\n\tvalue,\r\n\tonChange,\r\n\tonFocusOutside,\r\n\tstopAddingLink,\r\n\tcontentRef,\r\n\tfocusOnMount,\r\n} ) {\r\n\tconst richLinkTextValue = getRichTextValueFromSelection( value, isActive );\r\n\r\n\t// Get the text content minus any HTML tags.\r\n\tconst richTextText = richLinkTextValue.text;\r\n\r\n\tconst { selectionChange } = useDispatch( blockEditorStore );\r\n\r\n\tconst { createPageEntity, userCanCreatePages, selectionStart } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst { getSettings, getSelectionStart } =\r\n\t\t\t\tselect( blockEditorStore );\r\n\t\t\tconst _settings = getSettings();\r\n\r\n\t\t\treturn {\r\n\t\t\t\tcreatePageEntity: _settings.__experimentalCreatePageEntity,\r\n\t\t\t\tuserCanCreatePages: _settings.__experimentalUserCanCreatePages,\r\n\t\t\t\tselectionStart: getSelectionStart(),\r\n\t\t\t};\r\n\t\t},\r\n\t\t[]\r\n\t);\r\n\r\n\tconst linkValue = useMemo(\r\n\t\t() => ( {\r\n\t\t\turl: activeAttributes.url,\r\n\t\t\ttype: activeAttributes.type,\r\n\t\t\tid: activeAttributes.id,\r\n\t\t\topensInNewTab: activeAttributes.target === '_blank',\r\n\t\t\tnofollow: activeAttributes.rel?.includes( 'nofollow' ),\r\n\t\t\ttitle: richTextText,\r\n\t\t} ),\r\n\t\t[\r\n\t\t\tactiveAttributes.id,\r\n\t\t\tactiveAttributes.rel,\r\n\t\t\tactiveAttributes.target,\r\n\t\t\tactiveAttributes.type,\r\n\t\t\tactiveAttributes.url,\r\n\t\t\trichTextText,\r\n\t\t]\r\n\t);\r\n\r\n\tfunction removeLink() {\r\n\t\tconst newValue = removeFormat( value, 'core/link' );\r\n\t\tonChange( newValue );\r\n\t\tstopAddingLink();\r\n\t\tspeak( __( 'Link removed.' ), 'assertive' );\r\n\t}\r\n\r\n\tfunction onChangeLink( nextValue ) {\r\n\t\tconst hasLink = linkValue?.url;\r\n\t\tconst isNewLink = ! hasLink;\r\n\r\n\t\t// Merge the next value with the current link value.\r\n\t\tnextValue = {\r\n\t\t\t...linkValue,\r\n\t\t\t...nextValue,\r\n\t\t};\r\n\r\n\t\tconst newUrl = prependHTTP( nextValue.url );\r\n\t\tconst linkFormat = createLinkFormat( {\r\n\t\t\turl: newUrl,\r\n\t\t\ttype: nextValue.type,\r\n\t\t\tid:\r\n\t\t\t\tnextValue.id !== undefined && nextValue.id !== null\r\n\t\t\t\t\t? String( nextValue.id )\r\n\t\t\t\t\t: undefined,\r\n\t\t\topensInNewWindow: nextValue.opensInNewTab,\r\n\t\t\tnofollow: nextValue.nofollow,\r\n\t\t} );\r\n\r\n\t\tconst newText = nextValue.title || newUrl;\r\n\r\n\t\t// Scenario: we have any active text selection or an active format.\r\n\t\tlet newValue;\r\n\t\tif ( isCollapsed( value ) && ! isActive ) {\r\n\t\t\t// Scenario: we don't have any actively selected text or formats.\r\n\t\t\tconst inserted = insert( value, newText );\r\n\r\n\t\t\tnewValue = applyFormat(\r\n\t\t\t\tinserted,\r\n\t\t\t\tlinkFormat,\r\n\t\t\t\tvalue.start,\r\n\t\t\t\tvalue.start + newText.length\r\n\t\t\t);\r\n\r\n\t\t\tonChange( newValue );\r\n\r\n\t\t\t// Close the Link UI.\r\n\t\t\tstopAddingLink();\r\n\r\n\t\t\t// Move the selection to the end of the inserted link outside of the format boundary\r\n\t\t\t// so the user can continue typing after the link.\r\n\t\t\tselectionChange( {\r\n\t\t\t\tclientId: selectionStart.clientId,\r\n\t\t\t\tidentifier: selectionStart.attributeKey,\r\n\t\t\t\tstart: value.start + newText.length + 1,\r\n\t\t\t} );\r\n\r\n\t\t\treturn;\r\n\t\t} else if ( newText === richTextText ) {\r\n\t\t\tnewValue = applyFormat( value, linkFormat );\r\n\t\t} else {\r\n\t\t\t// Scenario: Editing an existing link.\r\n\r\n\t\t\t// Create new RichText value for the new text in order that we\r\n\t\t\t// can apply formats to it.\r\n\t\t\tnewValue = create( { text: newText } );\r\n\t\t\t// Apply the new Link format to this new text value.\r\n\t\t\tnewValue = applyFormat( newValue, linkFormat, 0, newText.length );\r\n\r\n\t\t\t// Get the boundaries of the active link format.\r\n\t\t\tconst boundary = getFormatBoundary( value, {\r\n\t\t\t\ttype: 'core/link',\r\n\t\t\t} );\r\n\r\n\t\t\t// Split the value at the start of the active link format.\r\n\t\t\t// Passing \"start\" as the 3rd parameter is required to ensure\r\n\t\t\t// the second half of the split value is split at the format's\r\n\t\t\t// start boundary and avoids relying on the value's \"end\" property\r\n\t\t\t// which may not correspond correctly.\r\n\t\t\tconst [ valBefore, valAfter ] = split(\r\n\t\t\t\tvalue,\r\n\t\t\t\tboundary.start,\r\n\t\t\t\tboundary.start\r\n\t\t\t);\r\n\r\n\t\t\t// Update the original (full) RichTextValue replacing the\r\n\t\t\t// target text with the *new* RichTextValue containing:\r\n\t\t\t// 1. The new text content.\r\n\t\t\t// 2. The new link format.\r\n\t\t\t// As \"replace\" will operate on the first match only, it is\r\n\t\t\t// run only against the second half of the value which was\r\n\t\t\t// split at the active format's boundary. This avoids a bug\r\n\t\t\t// with incorrectly targetted replacements.\r\n\t\t\t// See: https://github.com/WordPress/gutenberg/issues/41771.\r\n\t\t\t// Note original formats will be lost when applying this change.\r\n\t\t\t// That is expected behaviour.\r\n\t\t\t// See: https://github.com/WordPress/gutenberg/pull/33849#issuecomment-936134179.\r\n\t\t\tconst newValAfter = replace( valAfter, richTextText, newValue );\r\n\r\n\t\t\tnewValue = concat( valBefore, newValAfter );\r\n\t\t}\r\n\r\n\t\tonChange( newValue );\r\n\r\n\t\t// Focus should only be returned to the rich text on submit if this link is not\r\n\t\t// being created for the first time. If it is then focus should remain within the\r\n\t\t// Link UI because it should remain open for the user to modify the link they have\r\n\t\t// just created.\r\n\t\tif ( ! isNewLink ) {\r\n\t\t\tstopAddingLink();\r\n\t\t}\r\n\r\n\t\tif ( ! isValidHref( newUrl ) ) {\r\n\t\t\tspeak(\r\n\t\t\t\t__(\r\n\t\t\t\t\t'Warning: the link has been inserted but may have errors. Please test it.'\r\n\t\t\t\t),\r\n\t\t\t\t'assertive'\r\n\t\t\t);\r\n\t\t} else if ( isActive ) {\r\n\t\t\tspeak( __( 'Link edited.' ), 'assertive' );\r\n\t\t} else {\r\n\t\t\tspeak( __( 'Link inserted.' ), 'assertive' );\r\n\t\t}\r\n\t}\r\n\r\n\tconst popoverAnchor = useAnchor( {\r\n\t\teditableContentElement: contentRef.current,\r\n\t\tsettings: {\r\n\t\t\t...settings,\r\n\t\t\tisActive,\r\n\t\t},\r\n\t} );\r\n\r\n\tasync function handleCreate( pageTitle ) {\r\n\t\tconst page = await createPageEntity( {\r\n\t\t\ttitle: pageTitle,\r\n\t\t\tstatus: 'draft',\r\n\t\t} );\r\n\r\n\t\treturn {\r\n\t\t\tid: page.id,\r\n\t\t\ttype: page.type,\r\n\t\t\ttitle: page.title.rendered,\r\n\t\t\turl: page.link,\r\n\t\t\tkind: 'post-type',\r\n\t\t};\r\n\t}\r\n\r\n\tfunction createButtonText( searchTerm ) {\r\n\t\treturn createInterpolateElement(\r\n\t\t\tsprintf(\r\n\t\t\t\t/* translators: %s: search term. */\r\n\t\t\t\t__( 'Create page: <mark>%s</mark>' ),\r\n\t\t\t\tsearchTerm\r\n\t\t\t),\r\n\t\t\t{ mark: <mark /> }\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Popover\r\n\t\t\tanchor={ popoverAnchor }\r\n\t\t\tanimate={ false }\r\n\t\t\tonClose={ stopAddingLink }\r\n\t\t\tonFocusOutside={ onFocusOutside }\r\n\t\t\tplacement=\"bottom\"\r\n\t\t\toffset={ 8 }\r\n\t\t\tshift\r\n\t\t\tfocusOnMount={ focusOnMount }\r\n\t\t\tconstrainTabbing\r\n\t\t>\r\n\t\t\t<LinkControl\r\n\t\t\t\tvalue={ linkValue }\r\n\t\t\t\tonChange={ onChangeLink }\r\n\t\t\t\tonRemove={ removeLink }\r\n\t\t\t\thasRichPreviews\r\n\t\t\t\tcreateSuggestion={ createPageEntity && handleCreate }\r\n\t\t\t\twithCreateSuggestion={ userCanCreatePages }\r\n\t\t\t\tcreateSuggestionButtonText={ createButtonText }\r\n\t\t\t\thasTextControl\r\n\t\t\t\tsettings={ LINK_SETTINGS }\r\n\t\t\t\tshowInitialSuggestions\r\n\t\t\t\tsuggestionsQuery={ {\r\n\t\t\t\t\t// always show Pages as initial suggestions\r\n\t\t\t\t\tinitialSuggestionsSearchOptions: {\r\n\t\t\t\t\t\ttype: 'post',\r\n\t\t\t\t\t\tsubtype: 'page',\r\n\t\t\t\t\t\tperPage: 20,\r\n\t\t\t\t\t},\r\n\t\t\t\t} }\r\n\t\t\t/>\r\n\t\t</Popover>\r\n\t);\r\n}\r\n\r\nfunction getRichTextValueFromSelection( value, isActive ) {\r\n\t// Default to the selection ranges on the RichTextValue object.\r\n\tlet textStart = value.start;\r\n\tlet textEnd = value.end;\r\n\r\n\t// If the format is currently active then the rich text value\r\n\t// should always be taken from the bounds of the active format\r\n\t// and not the selected text.\r\n\tif ( isActive ) {\r\n\t\tconst boundary = getFormatBoundary( value, {\r\n\t\t\ttype: 'core/link',\r\n\t\t} );\r\n\r\n\t\ttextStart = boundary.start;\r\n\r\n\t\t// Text *selection* always extends +1 beyond the edge of the format.\r\n\t\t// We account for that here.\r\n\t\ttextEnd = boundary.end + 1;\r\n\t}\r\n\r\n\t// Get a RichTextValue containing the selected text content.\r\n\treturn slice( value, textStart, textEnd );\r\n}\r\n\r\nexport default InlineLinkUI;\r\n"],"mappings":"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","ignoreList":[]}