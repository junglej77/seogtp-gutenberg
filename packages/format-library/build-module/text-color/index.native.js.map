{"version":3,"names":["StyleSheet","View","__","useMemo","useState","BlockControls","useSettings","useMobileGlobalStylesColors","ToolbarGroup","ToolbarButton","Icon","color","colorIcon","textColor","textColorIcon","removeFormat","usePreferredColorSchemeStyle","getActiveColors","default","InlineColorUI","styles","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","name","title","getComputedStyleProperty","element","property","_element$props$style","style","props","backgroundColor","baseColors","background","fillComputedColors","TextColorEdit","value","onChange","isActive","activeAttributes","contentRef","allowCustomControl","colors","isAddingColor","setIsAddingColor","colorIndicatorStyle","hasColorsToChoose","length","outlineStyle","borderWidth","hairlineWidth","isActiveStyle","customContainerStyles","children","pointerEvents","icon","Object","keys","extraProps","onClick","onClose","tagName","className","attributes","class","edit"],"sources":["@wordpress/format-library/src/text-color/index.native.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport { StyleSheet, View } from 'react-native';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useMemo, useState } from '@wordpress/element';\r\nimport {\r\n\tBlockControls,\r\n\tuseSettings,\r\n\tuseMobileGlobalStylesColors,\r\n} from '@wordpress/block-editor';\r\nimport { ToolbarGroup, ToolbarButton } from '@wordpress/components';\r\nimport {\r\n\tIcon,\r\n\tcolor as colorIcon,\r\n\ttextColor as textColorIcon,\r\n} from '@wordpress/icons';\r\nimport { removeFormat } from '@wordpress/rich-text';\r\nimport { usePreferredColorSchemeStyle } from '@wordpress/compose';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { getActiveColors } from './inline.native.js';\r\nimport { default as InlineColorUI } from './inline';\r\nimport styles from './style.scss';\r\n\r\nconst name = 'core/text-color';\r\nconst title = __( 'Text color' );\r\n\r\nfunction getComputedStyleProperty( element, property ) {\r\n\tconst style = element?.props?.style ?? {};\r\n\r\n\tif ( property === 'background-color' ) {\r\n\t\tconst { backgroundColor, baseColors } = style;\r\n\r\n\t\tif ( backgroundColor !== 'transparent' ) {\r\n\t\t\treturn backgroundColor;\r\n\t\t} else if ( baseColors && baseColors?.color?.background ) {\r\n\t\t\treturn baseColors?.color?.background;\r\n\t\t}\r\n\r\n\t\treturn 'transparent';\r\n\t}\r\n}\r\n\r\nfunction fillComputedColors( element, { color, backgroundColor } ) {\r\n\tif ( ! color && ! backgroundColor ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\treturn {\r\n\t\tcolor: color || getComputedStyleProperty( element, 'color' ),\r\n\t\tbackgroundColor: getComputedStyleProperty(\r\n\t\t\telement,\r\n\t\t\t'background-color'\r\n\t\t),\r\n\t};\r\n}\r\n\r\nfunction TextColorEdit( {\r\n\tvalue,\r\n\tonChange,\r\n\tisActive,\r\n\tactiveAttributes,\r\n\tcontentRef,\r\n} ) {\r\n\tconst [ allowCustomControl ] = useSettings( 'color.custom' );\r\n\tconst colors = useMobileGlobalStylesColors();\r\n\tconst [ isAddingColor, setIsAddingColor ] = useState( false );\r\n\tconst colorIndicatorStyle = useMemo(\r\n\t\t() =>\r\n\t\t\tfillComputedColors(\r\n\t\t\t\tcontentRef,\r\n\t\t\t\tgetActiveColors( value, name, colors )\r\n\t\t\t),\r\n\t\t[ contentRef, value, colors ]\r\n\t);\r\n\r\n\tconst hasColorsToChoose = colors.length || ! allowCustomControl;\r\n\r\n\tconst outlineStyle = [\r\n\t\tusePreferredColorSchemeStyle(\r\n\t\t\tstyles[ 'components-inline-color__outline' ],\r\n\t\t\tstyles[ 'components-inline-color__outline--dark' ]\r\n\t\t),\r\n\t\t{ borderWidth: StyleSheet.hairlineWidth },\r\n\t];\r\n\r\n\tif ( ! hasColorsToChoose && ! isActive ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst isActiveStyle = {\r\n\t\t...colorIndicatorStyle,\r\n\t\t...( ! colorIndicatorStyle?.backgroundColor\r\n\t\t\t? { backgroundColor: 'transparent' }\r\n\t\t\t: {} ),\r\n\t\t...styles[ 'components-inline-color--is-active' ],\r\n\t};\r\n\r\n\tconst customContainerStyles =\r\n\t\tstyles[ 'components-inline-color__button-container' ];\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<BlockControls>\r\n\t\t\t\t<ToolbarGroup>\r\n\t\t\t\t\t{ isActive && (\r\n\t\t\t\t\t\t<View style={ outlineStyle } pointerEvents=\"none\" />\r\n\t\t\t\t\t) }\r\n\r\n\t\t\t\t\t<ToolbarButton\r\n\t\t\t\t\t\tname=\"text-color\"\r\n\t\t\t\t\t\tisActive={ isActive }\r\n\t\t\t\t\t\ticon={\r\n\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\ticon={\r\n\t\t\t\t\t\t\t\t\tObject.keys( activeAttributes ).length\r\n\t\t\t\t\t\t\t\t\t\t? textColorIcon\r\n\t\t\t\t\t\t\t\t\t\t: colorIcon\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tstyle={\r\n\t\t\t\t\t\t\t\t\tcolorIndicatorStyle?.color && {\r\n\t\t\t\t\t\t\t\t\t\tcolor: colorIndicatorStyle.color,\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttitle={ title }\r\n\t\t\t\t\t\textraProps={ {\r\n\t\t\t\t\t\t\tisActiveStyle,\r\n\t\t\t\t\t\t\tcustomContainerStyles,\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t// If has no colors to choose but a color is active remove the color onClick\r\n\t\t\t\t\t\tonClick={\r\n\t\t\t\t\t\t\thasColorsToChoose\r\n\t\t\t\t\t\t\t\t? () => setIsAddingColor( true )\r\n\t\t\t\t\t\t\t\t: () => onChange( removeFormat( value, name ) )\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</ToolbarGroup>\r\n\t\t\t</BlockControls>\r\n\t\t\t{ isAddingColor && (\r\n\t\t\t\t<InlineColorUI\r\n\t\t\t\t\tname={ name }\r\n\t\t\t\t\tonClose={ () => setIsAddingColor( false ) }\r\n\t\t\t\t\tactiveAttributes={ activeAttributes }\r\n\t\t\t\t\tvalue={ value }\r\n\t\t\t\t\tonChange={ onChange }\r\n\t\t\t\t\tcontentRef={ contentRef }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport const textColor = {\r\n\tname,\r\n\ttitle,\r\n\ttagName: 'mark',\r\n\tclassName: 'has-inline-color',\r\n\tattributes: {\r\n\t\tstyle: 'style',\r\n\t\tclass: 'class',\r\n\t},\r\n\tedit: TextColorEdit,\r\n};\r\n"],"mappings":"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","ignoreList":[]}