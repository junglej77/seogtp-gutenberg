{"version":3,"names":["supportedMatchers","setConsoleMethodSpy","methodName","matcherName","spy","jest","spyOn","console","mockName","resetSpy","mockReset","assertionsNumber","assertExpectedCalls","mock","calls","length","expect","not","beforeAll","beforeEach","afterEach","Object","entries","forEach"],"sources":["@wordpress/jest-console/src/index.js"],"sourcesContent":["/**\r\n * Internal dependencies\r\n */\r\nimport './matchers';\r\nimport supportedMatchers from './supported-matchers';\r\n\r\n/**\r\n * Sets spy on the console object's method to make it possible to fail test when method called without assertion.\r\n *\r\n * @param {Array}  args\r\n * @param {string} args.\"0\" Name of console method.\r\n * @param {string} args.\"1\" Name of Jest matcher.\r\n */\r\nconst setConsoleMethodSpy = ( [ methodName, matcherName ] ) => {\r\n\tconst spy = jest\r\n\t\t.spyOn( console, methodName )\r\n\t\t.mockName( `console.${ methodName }` );\r\n\r\n\t/**\r\n\t * Resets the spy to its initial state.\r\n\t */\r\n\tfunction resetSpy() {\r\n\t\tspy.mockReset();\r\n\t\tspy.assertionsNumber = 0;\r\n\t}\r\n\r\n\t/**\r\n\t * Verifies that the spy has only been called if expected.\r\n\t */\r\n\tfunction assertExpectedCalls() {\r\n\t\tif ( spy.assertionsNumber === 0 && spy.mock.calls.length > 0 ) {\r\n\t\t\texpect( console ).not[ matcherName ]();\r\n\t\t}\r\n\t}\r\n\r\n\tbeforeAll( resetSpy );\r\n\r\n\tbeforeEach( () => {\r\n\t\tassertExpectedCalls();\r\n\t\tresetSpy();\r\n\t} );\r\n\r\n\tafterEach( assertExpectedCalls );\r\n};\r\n\r\nObject.entries( supportedMatchers ).forEach( setConsoleMethodSpy );\r\n"],"mappings":"AAAA;AACA;AACA;AACA,OAAO,YAAY;AACnB,OAAOA,iBAAiB,MAAM,sBAAsB;;AAEpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,mBAAmB,GAAGA,CAAE,CAAEC,UAAU,EAAEC,WAAW,CAAE,KAAM;EAC9D,MAAMC,GAAG,GAAGC,IAAI,CACdC,KAAK,CAAEC,OAAO,EAAEL,UAAW,CAAC,CAC5BM,QAAQ,CAAG,WAAWN,UAAY,EAAE,CAAC;;EAEvC;AACD;AACA;EACC,SAASO,QAAQA,CAAA,EAAG;IACnBL,GAAG,CAACM,SAAS,CAAC,CAAC;IACfN,GAAG,CAACO,gBAAgB,GAAG,CAAC;EACzB;;EAEA;AACD;AACA;EACC,SAASC,mBAAmBA,CAAA,EAAG;IAC9B,IAAKR,GAAG,CAACO,gBAAgB,KAAK,CAAC,IAAIP,GAAG,CAACS,IAAI,CAACC,KAAK,CAACC,MAAM,GAAG,CAAC,EAAG;MAC9DC,MAAM,CAAET,OAAQ,CAAC,CAACU,GAAG,CAAEd,WAAW,CAAE,CAAC,CAAC;IACvC;EACD;EAEAe,SAAS,CAAET,QAAS,CAAC;EAErBU,UAAU,CAAE,MAAM;IACjBP,mBAAmB,CAAC,CAAC;IACrBH,QAAQ,CAAC,CAAC;EACX,CAAE,CAAC;EAEHW,SAAS,CAAER,mBAAoB,CAAC;AACjC,CAAC;AAEDS,MAAM,CAACC,OAAO,CAAEtB,iBAAkB,CAAC,CAACuB,OAAO,CAAEtB,mBAAoB,CAAC","ignoreList":[]}