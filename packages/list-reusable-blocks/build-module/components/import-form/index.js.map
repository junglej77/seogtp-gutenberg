{"version":3,"names":["useState","useRef","withInstanceId","__","_x","Button","Notice","importReusableBlock","jsx","_jsx","jsxs","_jsxs","ImportForm","instanceId","onUpload","inputId","formRef","isLoading","setIsLoading","error","setError","file","setFile","onChangeFile","event","target","files","onSubmit","preventDefault","then","reusableBlock","catch","errors","uiMessage","message","onDismissError","className","ref","children","status","onRemove","htmlFor","id","type","onChange","__next40pxDefaultSize","isBusy","accessibleWhenDisabled","disabled","variant"],"sources":["@wordpress/list-reusable-blocks/src/components/import-form/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { useState, useRef } from '@wordpress/element';\r\nimport { withInstanceId } from '@wordpress/compose';\r\nimport { __, _x } from '@wordpress/i18n';\r\nimport { Button, Notice } from '@wordpress/components';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport importReusableBlock from '../../utils/import';\r\n\r\nfunction ImportForm( { instanceId, onUpload } ) {\r\n\tconst inputId = 'list-reusable-blocks-import-form-' + instanceId;\r\n\r\n\tconst formRef = useRef();\r\n\tconst [ isLoading, setIsLoading ] = useState( false );\r\n\tconst [ error, setError ] = useState( null );\r\n\tconst [ file, setFile ] = useState( null );\r\n\r\n\tconst onChangeFile = ( event ) => {\r\n\t\tsetFile( event.target.files[ 0 ] );\r\n\t\tsetError( null );\r\n\t};\r\n\r\n\tconst onSubmit = ( event ) => {\r\n\t\tevent.preventDefault();\r\n\t\tif ( ! file ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetIsLoading( { isLoading: true } );\r\n\t\timportReusableBlock( file )\r\n\t\t\t.then( ( reusableBlock ) => {\r\n\t\t\t\tif ( ! formRef ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsetIsLoading( false );\r\n\t\t\t\tonUpload( reusableBlock );\r\n\t\t\t} )\r\n\t\t\t.catch( ( errors ) => {\r\n\t\t\t\tif ( ! formRef ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet uiMessage;\r\n\t\t\t\tswitch ( errors.message ) {\r\n\t\t\t\t\tcase 'Invalid JSON file':\r\n\t\t\t\t\t\tuiMessage = __( 'Invalid JSON file' );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'Invalid pattern JSON file':\r\n\t\t\t\t\t\tuiMessage = __( 'Invalid pattern JSON file' );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tuiMessage = __( 'Unknown error' );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsetIsLoading( false );\r\n\t\t\t\tsetError( uiMessage );\r\n\t\t\t} );\r\n\t};\r\n\r\n\tconst onDismissError = () => {\r\n\t\tsetError( null );\r\n\t};\r\n\r\n\treturn (\r\n\t\t<form\r\n\t\t\tclassName=\"list-reusable-blocks-import-form\"\r\n\t\t\tonSubmit={ onSubmit }\r\n\t\t\tref={ formRef }\r\n\t\t>\r\n\t\t\t{ error && (\r\n\t\t\t\t<Notice status=\"error\" onRemove={ () => onDismissError() }>\r\n\t\t\t\t\t{ error }\r\n\t\t\t\t</Notice>\r\n\t\t\t) }\r\n\t\t\t<label\r\n\t\t\t\thtmlFor={ inputId }\r\n\t\t\t\tclassName=\"list-reusable-blocks-import-form__label\"\r\n\t\t\t>\r\n\t\t\t\t{ __( 'File' ) }\r\n\t\t\t</label>\r\n\t\t\t<input id={ inputId } type=\"file\" onChange={ onChangeFile } />\r\n\t\t\t<Button\r\n\t\t\t\t// TODO: Switch to `true` (40px size) if possible\r\n\t\t\t\t__next40pxDefaultSize={ false }\r\n\t\t\t\ttype=\"submit\"\r\n\t\t\t\tisBusy={ isLoading }\r\n\t\t\t\taccessibleWhenDisabled\r\n\t\t\t\tdisabled={ ! file || isLoading }\r\n\t\t\t\tvariant=\"secondary\"\r\n\t\t\t\tclassName=\"list-reusable-blocks-import-form__button\"\r\n\t\t\t>\r\n\t\t\t\t{ _x( 'Import', 'button label' ) }\r\n\t\t\t</Button>\r\n\t\t</form>\r\n\t);\r\n}\r\n\r\nexport default withInstanceId( ImportForm );\r\n"],"mappings":"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","ignoreList":[]}