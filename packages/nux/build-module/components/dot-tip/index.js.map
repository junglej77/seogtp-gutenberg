{"version":3,"names":["compose","Popover","Button","__","withSelect","withDispatch","useCallback","useRef","close","store","nuxStore","jsx","_jsx","jsxs","_jsxs","onClick","event","stopPropagation","DotTip","position","children","isVisible","hasNextTip","onDismiss","onDisable","anchorParent","onFocusOutsideCallback","current","contains","relatedTarget","className","focusOnMount","role","onFocusOutside","__next40pxDefaultSize","variant","icon","label","select","tipId","isTipVisible","getAssociatedGuide","associatedGuide","nextTipId","dispatch","dismissTip","disableTips"],"sources":["@wordpress/nux/src/components/dot-tip/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { compose } from '@wordpress/compose';\r\nimport { Popover, Button } from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { withSelect, withDispatch } from '@wordpress/data';\r\nimport { useCallback, useRef } from '@wordpress/element';\r\nimport { close } from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as nuxStore } from '../../store';\r\n\r\nfunction onClick( event ) {\r\n\t// Tips are often nested within buttons. We stop propagation so that clicking\r\n\t// on a tip doesn't result in the button being clicked.\r\n\tevent.stopPropagation();\r\n}\r\n\r\nexport function DotTip( {\r\n\tposition = 'middle right',\r\n\tchildren,\r\n\tisVisible,\r\n\thasNextTip,\r\n\tonDismiss,\r\n\tonDisable,\r\n} ) {\r\n\tconst anchorParent = useRef( null );\r\n\tconst onFocusOutsideCallback = useCallback(\r\n\t\t( event ) => {\r\n\t\t\tif ( ! anchorParent.current ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif ( anchorParent.current.contains( event.relatedTarget ) ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tonDisable();\r\n\t\t},\r\n\t\t[ onDisable, anchorParent ]\r\n\t);\r\n\tif ( ! isVisible ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Popover\r\n\t\t\tclassName=\"nux-dot-tip\"\r\n\t\t\tposition={ position }\r\n\t\t\tfocusOnMount\r\n\t\t\trole=\"dialog\"\r\n\t\t\taria-label={ __( 'Editor tips' ) }\r\n\t\t\tonClick={ onClick }\r\n\t\t\tonFocusOutside={ onFocusOutsideCallback }\r\n\t\t>\r\n\t\t\t<p>{ children }</p>\r\n\t\t\t<p>\r\n\t\t\t\t<Button\r\n\t\t\t\t\t// TODO: Switch to `true` (40px size) if possible\r\n\t\t\t\t\t__next40pxDefaultSize={ false }\r\n\t\t\t\t\tvariant=\"link\"\r\n\t\t\t\t\tonClick={ onDismiss }\r\n\t\t\t\t>\r\n\t\t\t\t\t{ hasNextTip ? __( 'See next tip' ) : __( 'Got it' ) }\r\n\t\t\t\t</Button>\r\n\t\t\t</p>\r\n\t\t\t<Button\r\n\t\t\t\t// TODO: Switch to `true` (40px size) if possible\r\n\t\t\t\t__next40pxDefaultSize={ false }\r\n\t\t\t\tclassName=\"nux-dot-tip__disable\"\r\n\t\t\t\ticon={ close }\r\n\t\t\t\tlabel={ __( 'Disable tips' ) }\r\n\t\t\t\tonClick={ onDisable }\r\n\t\t\t/>\r\n\t\t</Popover>\r\n\t);\r\n}\r\n\r\nexport default compose(\r\n\twithSelect( ( select, { tipId } ) => {\r\n\t\tconst { isTipVisible, getAssociatedGuide } = select( nuxStore );\r\n\t\tconst associatedGuide = getAssociatedGuide( tipId );\r\n\t\treturn {\r\n\t\t\tisVisible: isTipVisible( tipId ),\r\n\t\t\thasNextTip: !! ( associatedGuide && associatedGuide.nextTipId ),\r\n\t\t};\r\n\t} ),\r\n\twithDispatch( ( dispatch, { tipId } ) => {\r\n\t\tconst { dismissTip, disableTips } = dispatch( nuxStore );\r\n\t\treturn {\r\n\t\t\tonDismiss() {\r\n\t\t\t\tdismissTip( tipId );\r\n\t\t\t},\r\n\t\t\tonDisable() {\r\n\t\t\t\tdisableTips();\r\n\t\t\t},\r\n\t\t};\r\n\t} )\r\n)( DotTip );\r\n"],"mappings":"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","ignoreList":[]}