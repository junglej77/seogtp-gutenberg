{"version":3,"names":["__","useMemo","useState","FormTokenField","useDebounce","decodeEntities","jsx","_jsx","unescapeString","arg","CATEGORY_SLUG","CategorySelector","categoryTerms","onChange","categoryMap","search","setSearch","debouncedSearch","suggestions","Array","from","values","map","category","label","filter","toLowerCase","includes","sort","a","b","localeCompare","handleChange","termNames","uniqueTerms","reduce","terms","newTerm","some","term","push","className","value","onInputChange","tokenizeOnBlur","__experimentalExpandOnFocus","__next40pxDefaultSize","__nextHasNoMarginBottom"],"sources":["@wordpress/patterns/src/components/category-selector.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useMemo, useState } from '@wordpress/element';\r\nimport { FormTokenField } from '@wordpress/components';\r\nimport { useDebounce } from '@wordpress/compose';\r\nimport { decodeEntities } from '@wordpress/html-entities';\r\n\r\nconst unescapeString = ( arg ) => {\r\n\treturn decodeEntities( arg );\r\n};\r\n\r\nexport const CATEGORY_SLUG = 'wp_pattern_category';\r\n\r\nexport default function CategorySelector( {\r\n\tcategoryTerms,\r\n\tonChange,\r\n\tcategoryMap,\r\n} ) {\r\n\tconst [ search, setSearch ] = useState( '' );\r\n\tconst debouncedSearch = useDebounce( setSearch, 500 );\r\n\r\n\tconst suggestions = useMemo( () => {\r\n\t\treturn Array.from( categoryMap.values() )\r\n\t\t\t.map( ( category ) => unescapeString( category.label ) )\r\n\t\t\t.filter( ( category ) => {\r\n\t\t\t\tif ( search !== '' ) {\r\n\t\t\t\t\treturn category\r\n\t\t\t\t\t\t.toLowerCase()\r\n\t\t\t\t\t\t.includes( search.toLowerCase() );\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t} )\r\n\t\t\t.sort( ( a, b ) => a.localeCompare( b ) );\r\n\t}, [ search, categoryMap ] );\r\n\r\n\tfunction handleChange( termNames ) {\r\n\t\tconst uniqueTerms = termNames.reduce( ( terms, newTerm ) => {\r\n\t\t\tif (\r\n\t\t\t\t! terms.some(\r\n\t\t\t\t\t( term ) => term.toLowerCase() === newTerm.toLowerCase()\r\n\t\t\t\t)\r\n\t\t\t) {\r\n\t\t\t\tterms.push( newTerm );\r\n\t\t\t}\r\n\t\t\treturn terms;\r\n\t\t}, [] );\r\n\r\n\t\tonChange( uniqueTerms );\r\n\t}\r\n\r\n\treturn (\r\n\t\t<FormTokenField\r\n\t\t\tclassName=\"patterns-menu-items__convert-modal-categories\"\r\n\t\t\tvalue={ categoryTerms }\r\n\t\t\tsuggestions={ suggestions }\r\n\t\t\tonChange={ handleChange }\r\n\t\t\tonInputChange={ debouncedSearch }\r\n\t\t\tlabel={ __( 'Categories' ) }\r\n\t\t\ttokenizeOnBlur\r\n\t\t\t__experimentalExpandOnFocus\r\n\t\t\t__next40pxDefaultSize\r\n\t\t\t__nextHasNoMarginBottom\r\n\t\t/>\r\n\t);\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,EAAE,QAAQ,iBAAiB;AACpC,SAASC,OAAO,EAAEC,QAAQ,QAAQ,oBAAoB;AACtD,SAASC,cAAc,QAAQ,uBAAuB;AACtD,SAASC,WAAW,QAAQ,oBAAoB;AAChD,SAASC,cAAc,QAAQ,0BAA0B;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAE1D,MAAMC,cAAc,GAAKC,GAAG,IAAM;EACjC,OAAOJ,cAAc,CAAEI,GAAI,CAAC;AAC7B,CAAC;AAED,OAAO,MAAMC,aAAa,GAAG,qBAAqB;AAElD,eAAe,SAASC,gBAAgBA,CAAE;EACzCC,aAAa;EACbC,QAAQ;EACRC;AACD,CAAC,EAAG;EACH,MAAM,CAAEC,MAAM,EAAEC,SAAS,CAAE,GAAGd,QAAQ,CAAE,EAAG,CAAC;EAC5C,MAAMe,eAAe,GAAGb,WAAW,CAAEY,SAAS,EAAE,GAAI,CAAC;EAErD,MAAME,WAAW,GAAGjB,OAAO,CAAE,MAAM;IAClC,OAAOkB,KAAK,CAACC,IAAI,CAAEN,WAAW,CAACO,MAAM,CAAC,CAAE,CAAC,CACvCC,GAAG,CAAIC,QAAQ,IAAMf,cAAc,CAAEe,QAAQ,CAACC,KAAM,CAAE,CAAC,CACvDC,MAAM,CAAIF,QAAQ,IAAM;MACxB,IAAKR,MAAM,KAAK,EAAE,EAAG;QACpB,OAAOQ,QAAQ,CACbG,WAAW,CAAC,CAAC,CACbC,QAAQ,CAAEZ,MAAM,CAACW,WAAW,CAAC,CAAE,CAAC;MACnC;MACA,OAAO,IAAI;IACZ,CAAE,CAAC,CACFE,IAAI,CAAE,CAAEC,CAAC,EAAEC,CAAC,KAAMD,CAAC,CAACE,aAAa,CAAED,CAAE,CAAE,CAAC;EAC3C,CAAC,EAAE,CAAEf,MAAM,EAAED,WAAW,CAAG,CAAC;EAE5B,SAASkB,YAAYA,CAAEC,SAAS,EAAG;IAClC,MAAMC,WAAW,GAAGD,SAAS,CAACE,MAAM,CAAE,CAAEC,KAAK,EAAEC,OAAO,KAAM;MAC3D,IACC,CAAED,KAAK,CAACE,IAAI,CACTC,IAAI,IAAMA,IAAI,CAACb,WAAW,CAAC,CAAC,KAAKW,OAAO,CAACX,WAAW,CAAC,CACxD,CAAC,EACA;QACDU,KAAK,CAACI,IAAI,CAAEH,OAAQ,CAAC;MACtB;MACA,OAAOD,KAAK;IACb,CAAC,EAAE,EAAG,CAAC;IAEPvB,QAAQ,CAAEqB,WAAY,CAAC;EACxB;EAEA,oBACC3B,IAAA,CAACJ,cAAc;IACdsC,SAAS,EAAC,+CAA+C;IACzDC,KAAK,EAAG9B,aAAe;IACvBM,WAAW,EAAGA,WAAa;IAC3BL,QAAQ,EAAGmB,YAAc;IACzBW,aAAa,EAAG1B,eAAiB;IACjCO,KAAK,EAAGxB,EAAE,CAAE,YAAa,CAAG;IAC5B4C,cAAc;IACdC,2BAA2B;IAC3BC,qBAAqB;IACrBC,uBAAuB;EAAA,CACvB,CAAC;AAEJ","ignoreList":[]}