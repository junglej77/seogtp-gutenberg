{"version":3,"names":["store","coreStore","useDispatch","useSelect","__","sprintf","noticesStore","CreatePatternModal","PATTERN_SYNC_TYPES","PATTERN_TYPES","jsx","_jsx","getTermLabels","pattern","categories","type","user","core","filter","category","includes","name","map","label","wp_pattern_category","id","useDuplicatePatternProps","onSuccess","createSuccessNotice","select","getUserPatternCategories","getBlockPatternCategories","content","defaultCategories","defaultSyncType","unsynced","wp_pattern_sync_status","full","defaultTitle","title","raw","newPattern","DuplicatePatternModal","onClose","duplicatedProps","modalTitle","confirmLabel","onError"],"sources":["@wordpress/patterns/src/components/duplicate-pattern-modal.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { store as coreStore } from '@wordpress/core-data';\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { store as noticesStore } from '@wordpress/notices';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport CreatePatternModal from './create-pattern-modal';\r\nimport { PATTERN_SYNC_TYPES, PATTERN_TYPES } from '../constants';\r\n\r\nfunction getTermLabels( pattern, categories ) {\r\n\t// Theme patterns rely on core pattern categories.\r\n\tif ( pattern.type !== PATTERN_TYPES.user ) {\r\n\t\treturn categories.core\r\n\t\t\t?.filter( ( category ) =>\r\n\t\t\t\tpattern.categories.includes( category.name )\r\n\t\t\t)\r\n\t\t\t.map( ( category ) => category.label );\r\n\t}\r\n\r\n\treturn categories.user\r\n\t\t?.filter( ( category ) =>\r\n\t\t\tpattern.wp_pattern_category.includes( category.id )\r\n\t\t)\r\n\t\t.map( ( category ) => category.label );\r\n}\r\n\r\nexport function useDuplicatePatternProps( { pattern, onSuccess } ) {\r\n\tconst { createSuccessNotice } = useDispatch( noticesStore );\r\n\tconst categories = useSelect( ( select ) => {\r\n\t\tconst { getUserPatternCategories, getBlockPatternCategories } =\r\n\t\t\tselect( coreStore );\r\n\r\n\t\treturn {\r\n\t\t\tcore: getBlockPatternCategories(),\r\n\t\t\tuser: getUserPatternCategories(),\r\n\t\t};\r\n\t} );\r\n\tif ( ! pattern ) {\r\n\t\treturn null;\r\n\t}\r\n\treturn {\r\n\t\tcontent: pattern.content,\r\n\t\tdefaultCategories: getTermLabels( pattern, categories ),\r\n\t\tdefaultSyncType:\r\n\t\t\tpattern.type !== PATTERN_TYPES.user // Theme patterns are unsynced by default.\r\n\t\t\t\t? PATTERN_SYNC_TYPES.unsynced\r\n\t\t\t\t: pattern.wp_pattern_sync_status || PATTERN_SYNC_TYPES.full,\r\n\t\tdefaultTitle: sprintf(\r\n\t\t\t/* translators: %s: Existing pattern title */\r\n\t\t\t__( '%s (Copy)' ),\r\n\t\t\ttypeof pattern.title === 'string'\r\n\t\t\t\t? pattern.title\r\n\t\t\t\t: pattern.title.raw\r\n\t\t),\r\n\t\tonSuccess: ( { pattern: newPattern } ) => {\r\n\t\t\tcreateSuccessNotice(\r\n\t\t\t\tsprintf(\r\n\t\t\t\t\t// translators: %s: The new pattern's title e.g. 'Call to action (copy)'.\r\n\t\t\t\t\t__( '\"%s\" duplicated.' ),\r\n\t\t\t\t\tnewPattern.title.raw\r\n\t\t\t\t),\r\n\t\t\t\t{\r\n\t\t\t\t\ttype: 'snackbar',\r\n\t\t\t\t\tid: 'patterns-create',\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tonSuccess?.( { pattern: newPattern } );\r\n\t\t},\r\n\t};\r\n}\r\n\r\nexport default function DuplicatePatternModal( {\r\n\tpattern,\r\n\tonClose,\r\n\tonSuccess,\r\n} ) {\r\n\tconst duplicatedProps = useDuplicatePatternProps( { pattern, onSuccess } );\r\n\tif ( ! pattern ) {\r\n\t\treturn null;\r\n\t}\r\n\treturn (\r\n\t\t<CreatePatternModal\r\n\t\t\tmodalTitle={ __( 'Duplicate pattern' ) }\r\n\t\t\tconfirmLabel={ __( 'Duplicate' ) }\r\n\t\t\tonClose={ onClose }\r\n\t\t\tonError={ onClose }\r\n\t\t\t{ ...duplicatedProps }\r\n\t\t/>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}