{"version":3,"names":["Button","Modal","TextControl","__experimentalHStack","HStack","__experimentalVStack","VStack","store","coreStore","useDispatch","useState","decodeEntities","__","noticesStore","jsx","_jsx","jsxs","_jsxs","RenamePatternModal","onClose","onError","onSuccess","pattern","props","originalName","title","name","setName","isSaving","setIsSaving","editEntityRecord","__experimentalSaveSpecifiedEntityEdits","saveSpecifiedEntityEdits","createSuccessNotice","createErrorNotice","onRename","event","preventDefault","type","id","savedRecord","throwOnError","error","errorMessage","message","code","onRequestClose","focusOnMount","size","children","onSubmit","spacing","__nextHasNoMarginBottom","__next40pxDefaultSize","label","value","onChange","required","justify","variant","onClick"],"sources":["@wordpress/patterns/src/components/rename-pattern-modal.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tButton,\r\n\tModal,\r\n\tTextControl,\r\n\t__experimentalHStack as HStack,\r\n\t__experimentalVStack as VStack,\r\n} from '@wordpress/components';\r\nimport { store as coreStore } from '@wordpress/core-data';\r\nimport { useDispatch } from '@wordpress/data';\r\nimport { useState } from '@wordpress/element';\r\nimport { decodeEntities } from '@wordpress/html-entities';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { store as noticesStore } from '@wordpress/notices';\r\n\r\nexport default function RenamePatternModal( {\r\n\tonClose,\r\n\tonError,\r\n\tonSuccess,\r\n\tpattern,\r\n\t...props\r\n} ) {\r\n\tconst originalName = decodeEntities( pattern.title );\r\n\tconst [ name, setName ] = useState( originalName );\r\n\tconst [ isSaving, setIsSaving ] = useState( false );\r\n\r\n\tconst {\r\n\t\teditEntityRecord,\r\n\t\t__experimentalSaveSpecifiedEntityEdits: saveSpecifiedEntityEdits,\r\n\t} = useDispatch( coreStore );\r\n\r\n\tconst { createSuccessNotice, createErrorNotice } =\r\n\t\tuseDispatch( noticesStore );\r\n\r\n\tconst onRename = async ( event ) => {\r\n\t\tevent.preventDefault();\r\n\r\n\t\tif ( ! name || name === pattern.title || isSaving ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tawait editEntityRecord( 'postType', pattern.type, pattern.id, {\r\n\t\t\t\ttitle: name,\r\n\t\t\t} );\r\n\r\n\t\t\tsetIsSaving( true );\r\n\t\t\tsetName( '' );\r\n\t\t\tonClose?.();\r\n\r\n\t\t\tconst savedRecord = await saveSpecifiedEntityEdits(\r\n\t\t\t\t'postType',\r\n\t\t\t\tpattern.type,\r\n\t\t\t\tpattern.id,\r\n\t\t\t\t[ 'title' ],\r\n\t\t\t\t{ throwOnError: true }\r\n\t\t\t);\r\n\r\n\t\t\tonSuccess?.( savedRecord );\r\n\r\n\t\t\tcreateSuccessNotice( __( 'Pattern renamed' ), {\r\n\t\t\t\ttype: 'snackbar',\r\n\t\t\t\tid: 'pattern-update',\r\n\t\t\t} );\r\n\t\t} catch ( error ) {\r\n\t\t\tonError?.();\r\n\r\n\t\t\tconst errorMessage =\r\n\t\t\t\terror.message && error.code !== 'unknown_error'\r\n\t\t\t\t\t? error.message\r\n\t\t\t\t\t: __( 'An error occurred while renaming the pattern.' );\r\n\r\n\t\t\tcreateErrorNotice( errorMessage, {\r\n\t\t\t\ttype: 'snackbar',\r\n\t\t\t\tid: 'pattern-update',\r\n\t\t\t} );\r\n\t\t} finally {\r\n\t\t\tsetIsSaving( false );\r\n\t\t\tsetName( '' );\r\n\t\t}\r\n\t};\r\n\r\n\tconst onRequestClose = () => {\r\n\t\tonClose?.();\r\n\t\tsetName( '' );\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\ttitle={ __( 'Rename' ) }\r\n\t\t\t{ ...props }\r\n\t\t\tonRequestClose={ onClose }\r\n\t\t\tfocusOnMount=\"firstContentElement\"\r\n\t\t\tsize=\"small\"\r\n\t\t>\r\n\t\t\t<form onSubmit={ onRename }>\r\n\t\t\t\t<VStack spacing=\"5\">\r\n\t\t\t\t\t<TextControl\r\n\t\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\tlabel={ __( 'Name' ) }\r\n\t\t\t\t\t\tvalue={ name }\r\n\t\t\t\t\t\tonChange={ setName }\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<HStack justify=\"right\">\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\t\tvariant=\"tertiary\"\r\n\t\t\t\t\t\t\tonClick={ onRequestClose }\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{ __( 'Cancel' ) }\r\n\t\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{ __( 'Save' ) }\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</HStack>\r\n\t\t\t\t</VStack>\r\n\t\t\t</form>\r\n\t\t</Modal>\r\n\t);\r\n}\r\n"],"mappings":"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","ignoreList":[]}