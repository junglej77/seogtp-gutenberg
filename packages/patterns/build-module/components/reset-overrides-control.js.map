{"version":3,"names":["store","blockEditorStore","__unstableBlockToolbarLastItem","BlockToolbarLastItem","ToolbarButton","ToolbarGroup","useRegistry","useSelect","__","jsx","_jsx","CONTENT","ResetOverridesControl","props","name","attributes","metadata","registry","isOverriden","select","getBlockAttributes","getBlockParentsByBlockName","patternClientId","clientId","overrides","hasOwnProperty","onClick","updateBlockAttributes","__unstableMarkLastChangeAsPersistent","dispatch","newOverrides","Object","keys","length","undefined","children","disabled"],"sources":["@wordpress/patterns/src/components/reset-overrides-control.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tstore as blockEditorStore,\r\n\t__unstableBlockToolbarLastItem as BlockToolbarLastItem,\r\n} from '@wordpress/block-editor';\r\nimport { ToolbarButton, ToolbarGroup } from '@wordpress/components';\r\nimport { useRegistry, useSelect } from '@wordpress/data';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\nconst CONTENT = 'content';\r\n\r\nexport default function ResetOverridesControl( props ) {\r\n\tconst name = props.attributes.metadata?.name;\r\n\tconst registry = useRegistry();\r\n\tconst isOverriden = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tif ( ! name ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst { getBlockAttributes, getBlockParentsByBlockName } =\r\n\t\t\t\tselect( blockEditorStore );\r\n\t\t\tconst [ patternClientId ] = getBlockParentsByBlockName(\r\n\t\t\t\tprops.clientId,\r\n\t\t\t\t'core/block',\r\n\t\t\t\ttrue\r\n\t\t\t);\r\n\r\n\t\t\tif ( ! patternClientId ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst overrides = getBlockAttributes( patternClientId )[ CONTENT ];\r\n\r\n\t\t\tif ( ! overrides ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\treturn overrides.hasOwnProperty( name );\r\n\t\t},\r\n\t\t[ props.clientId, name ]\r\n\t);\r\n\r\n\tfunction onClick() {\r\n\t\tconst { getBlockAttributes, getBlockParentsByBlockName } =\r\n\t\t\tregistry.select( blockEditorStore );\r\n\t\tconst [ patternClientId ] = getBlockParentsByBlockName(\r\n\t\t\tprops.clientId,\r\n\t\t\t'core/block',\r\n\t\t\ttrue\r\n\t\t);\r\n\r\n\t\tif ( ! patternClientId ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst overrides = getBlockAttributes( patternClientId )[ CONTENT ];\r\n\r\n\t\tif ( ! overrides.hasOwnProperty( name ) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst { updateBlockAttributes, __unstableMarkLastChangeAsPersistent } =\r\n\t\t\tregistry.dispatch( blockEditorStore );\r\n\t\t__unstableMarkLastChangeAsPersistent();\r\n\r\n\t\tlet newOverrides = { ...overrides };\r\n\t\tdelete newOverrides[ name ];\r\n\r\n\t\tif ( ! Object.keys( newOverrides ).length ) {\r\n\t\t\tnewOverrides = undefined;\r\n\t\t}\r\n\r\n\t\tupdateBlockAttributes( patternClientId, {\r\n\t\t\t[ CONTENT ]: newOverrides,\r\n\t\t} );\r\n\t}\r\n\r\n\treturn (\r\n\t\t<BlockToolbarLastItem>\r\n\t\t\t<ToolbarGroup>\r\n\t\t\t\t<ToolbarButton onClick={ onClick } disabled={ ! isOverriden }>\r\n\t\t\t\t\t{ __( 'Reset' ) }\r\n\t\t\t\t</ToolbarButton>\r\n\t\t\t</ToolbarGroup>\r\n\t\t</BlockToolbarLastItem>\r\n\t);\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SACCA,KAAK,IAAIC,gBAAgB,EACzBC,8BAA8B,IAAIC,oBAAoB,QAChD,yBAAyB;AAChC,SAASC,aAAa,EAAEC,YAAY,QAAQ,uBAAuB;AACnE,SAASC,WAAW,EAAEC,SAAS,QAAQ,iBAAiB;AACxD,SAASC,EAAE,QAAQ,iBAAiB;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAErC,MAAMC,OAAO,GAAG,SAAS;AAEzB,eAAe,SAASC,qBAAqBA,CAAEC,KAAK,EAAG;EACtD,MAAMC,IAAI,GAAGD,KAAK,CAACE,UAAU,CAACC,QAAQ,EAAEF,IAAI;EAC5C,MAAMG,QAAQ,GAAGX,WAAW,CAAC,CAAC;EAC9B,MAAMY,WAAW,GAAGX,SAAS,CAC1BY,MAAM,IAAM;IACb,IAAK,CAAEL,IAAI,EAAG;MACb;IACD;IAEA,MAAM;MAAEM,kBAAkB;MAAEC;IAA2B,CAAC,GACvDF,MAAM,CAAElB,gBAAiB,CAAC;IAC3B,MAAM,CAAEqB,eAAe,CAAE,GAAGD,0BAA0B,CACrDR,KAAK,CAACU,QAAQ,EACd,YAAY,EACZ,IACD,CAAC;IAED,IAAK,CAAED,eAAe,EAAG;MACxB;IACD;IAEA,MAAME,SAAS,GAAGJ,kBAAkB,CAAEE,eAAgB,CAAC,CAAEX,OAAO,CAAE;IAElE,IAAK,CAAEa,SAAS,EAAG;MAClB;IACD;IAEA,OAAOA,SAAS,CAACC,cAAc,CAAEX,IAAK,CAAC;EACxC,CAAC,EACD,CAAED,KAAK,CAACU,QAAQ,EAAET,IAAI,CACvB,CAAC;EAED,SAASY,OAAOA,CAAA,EAAG;IAClB,MAAM;MAAEN,kBAAkB;MAAEC;IAA2B,CAAC,GACvDJ,QAAQ,CAACE,MAAM,CAAElB,gBAAiB,CAAC;IACpC,MAAM,CAAEqB,eAAe,CAAE,GAAGD,0BAA0B,CACrDR,KAAK,CAACU,QAAQ,EACd,YAAY,EACZ,IACD,CAAC;IAED,IAAK,CAAED,eAAe,EAAG;MACxB;IACD;IAEA,MAAME,SAAS,GAAGJ,kBAAkB,CAAEE,eAAgB,CAAC,CAAEX,OAAO,CAAE;IAElE,IAAK,CAAEa,SAAS,CAACC,cAAc,CAAEX,IAAK,CAAC,EAAG;MACzC;IACD;IAEA,MAAM;MAAEa,qBAAqB;MAAEC;IAAqC,CAAC,GACpEX,QAAQ,CAACY,QAAQ,CAAE5B,gBAAiB,CAAC;IACtC2B,oCAAoC,CAAC,CAAC;IAEtC,IAAIE,YAAY,GAAG;MAAE,GAAGN;IAAU,CAAC;IACnC,OAAOM,YAAY,CAAEhB,IAAI,CAAE;IAE3B,IAAK,CAAEiB,MAAM,CAACC,IAAI,CAAEF,YAAa,CAAC,CAACG,MAAM,EAAG;MAC3CH,YAAY,GAAGI,SAAS;IACzB;IAEAP,qBAAqB,CAAEL,eAAe,EAAE;MACvC,CAAEX,OAAO,GAAImB;IACd,CAAE,CAAC;EACJ;EAEA,oBACCpB,IAAA,CAACP,oBAAoB;IAAAgC,QAAA,eACpBzB,IAAA,CAACL,YAAY;MAAA8B,QAAA,eACZzB,IAAA,CAACN,aAAa;QAACsB,OAAO,EAAGA,OAAS;QAACU,QAAQ,EAAG,CAAElB,WAAa;QAAAiB,QAAA,EAC1D3B,EAAE,CAAE,OAAQ;MAAC,CACD;IAAC,CACH;EAAC,CACM,CAAC;AAEzB","ignoreList":[]}