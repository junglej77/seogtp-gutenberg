{"version":3,"names":["applyFilters","doAction","Component","cloneElement","registerComponent","initialHtml","setupLocale","getTranslation","getGutenbergTranslation","registerGutenberg","beforeInitCallback","pluginTranslations","Gutenberg","constructor","props","rootTag","parentProps","locale","translations","setup","require","default","editorComponent","filteredProps","render","initialHtmlGutenberg"],"sources":["@wordpress/react-native-editor/src/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { applyFilters, doAction } from '@wordpress/hooks';\r\nimport { Component, cloneElement, registerComponent } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport './globals';\r\nimport initialHtml from './initial-html';\r\nimport setupLocale from './setup-locale';\r\nimport { getTranslation as getGutenbergTranslation } from '../i18n-cache';\r\n\r\n/**\r\n *\tRegister Gutenberg editor to React Native App registry.\r\n *\r\n * @typedef {Object} PluginTranslation\r\n * @property {string}              domain                       Domain of the plugin.\r\n * @property {Function}            getTranslation               Function for retrieving translations for a locale.\r\n *\r\n * @param    {Object}              arguments\r\n * @param    {Function}            arguments.beforeInitCallback Callback executed before the editor initialization.\r\n * @param    {PluginTranslation[]} arguments.pluginTranslations Array with plugin translations.\r\n */\r\nconst registerGutenberg = ( {\r\n\tbeforeInitCallback,\r\n\tpluginTranslations = [],\r\n} = {} ) => {\r\n\tclass Gutenberg extends Component {\r\n\t\tconstructor( props ) {\r\n\t\t\tsuper( props );\r\n\r\n\t\t\tconst { rootTag, ...parentProps } = this.props;\r\n\r\n\t\t\t// Setup locale.\r\n\t\t\tsetupLocale(\r\n\t\t\t\tparentProps.locale,\r\n\t\t\t\tparentProps.translations,\r\n\t\t\t\tgetGutenbergTranslation,\r\n\t\t\t\tpluginTranslations\r\n\t\t\t);\r\n\r\n\t\t\tif ( beforeInitCallback ) {\r\n\t\t\t\tbeforeInitCallback( parentProps );\r\n\t\t\t}\r\n\r\n\t\t\t// We have to lazy import the setup code to prevent executing any code located\r\n\t\t\t// at global scope before the editor is initialized, like translations retrieval.\r\n\t\t\tconst setup = require( './setup' ).default;\r\n\t\t\t// Initialize editor\r\n\t\t\tthis.editorComponent = setup();\r\n\r\n\t\t\t// TODO: Reinstate the optional setup configuration once we identify why\r\n\t\t\t// it throws an error after the latest RN 0.73 upgrade.\r\n\t\t\t// https://github.com/facebook/metro/blob/877933ddc03672a00214d26afe620b79479d6489/packages/metro-file-map/src/lib/TreeFS.js#L417\r\n\t\t\t// Apply optional setup configuration, enabling modification via hooks.\r\n\t\t\t// if ( __DEV__ && typeof require.context === 'function' ) {\r\n\t\t\t// \tconst req = require.context( './', false, /setup-local\\.js$/ );\r\n\t\t\t// \treq.keys().forEach( ( key ) => req( key ).default() );\r\n\t\t\t// }\r\n\r\n\t\t\t// Dispatch pre-render hooks.\r\n\t\t\tdoAction( 'native.pre-render', parentProps );\r\n\r\n\t\t\tthis.filteredProps = applyFilters(\r\n\t\t\t\t'native.block_editor_props',\r\n\t\t\t\tparentProps\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\trender() {\r\n\t\t\treturn cloneElement( this.editorComponent, this.filteredProps );\r\n\t\t}\r\n\t}\r\n\r\n\tregisterComponent( 'gutenberg', () => Gutenberg );\r\n};\r\n\r\nexport { initialHtml as initialHtmlGutenberg, registerGutenberg, setupLocale };\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,YAAY,EAAEC,QAAQ,QAAQ,kBAAkB;AACzD,SAASC,SAAS,EAAEC,YAAY,EAAEC,iBAAiB,QAAQ,oBAAoB;;AAE/E;AACA;AACA;AACA,OAAO,WAAW;AAClB,OAAOC,WAAW,MAAM,gBAAgB;AACxC,OAAOC,WAAW,MAAM,gBAAgB;AACxC,SAASC,cAAc,IAAIC,uBAAuB,QAAQ,eAAe;;AAEzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,iBAAiB,GAAGA,CAAE;EAC3BC,kBAAkB;EAClBC,kBAAkB,GAAG;AACtB,CAAC,GAAG,CAAC,CAAC,KAAM;EACX,MAAMC,SAAS,SAASV,SAAS,CAAC;IACjCW,WAAWA,CAAEC,KAAK,EAAG;MACpB,KAAK,CAAEA,KAAM,CAAC;MAEd,MAAM;QAAEC,OAAO;QAAE,GAAGC;MAAY,CAAC,GAAG,IAAI,CAACF,KAAK;;MAE9C;MACAR,WAAW,CACVU,WAAW,CAACC,MAAM,EAClBD,WAAW,CAACE,YAAY,EACxBV,uBAAuB,EACvBG,kBACD,CAAC;MAED,IAAKD,kBAAkB,EAAG;QACzBA,kBAAkB,CAAEM,WAAY,CAAC;MAClC;;MAEA;MACA;MACA,MAAMG,KAAK,GAAGC,OAAO,CAAE,SAAU,CAAC,CAACC,OAAO;MAC1C;MACA,IAAI,CAACC,eAAe,GAAGH,KAAK,CAAC,CAAC;;MAE9B;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;MAEA;MACAlB,QAAQ,CAAE,mBAAmB,EAAEe,WAAY,CAAC;MAE5C,IAAI,CAACO,aAAa,GAAGvB,YAAY,CAChC,2BAA2B,EAC3BgB,WACD,CAAC;IACF;IAEAQ,MAAMA,CAAA,EAAG;MACR,OAAOrB,YAAY,CAAE,IAAI,CAACmB,eAAe,EAAE,IAAI,CAACC,aAAc,CAAC;IAChE;EACD;EAEAnB,iBAAiB,CAAE,WAAW,EAAE,MAAMQ,SAAU,CAAC;AAClD,CAAC;AAED,SAASP,WAAW,IAAIoB,oBAAoB,EAAEhB,iBAAiB,EAAEH,WAAW","ignoreList":[]}