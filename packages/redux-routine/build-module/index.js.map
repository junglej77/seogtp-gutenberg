{"version":3,"names":["isGenerator","createRuntime","createMiddleware","controls","store","runtime","dispatch","next","action"],"sources":["@wordpress/redux-routine/src/index.js"],"sourcesContent":["/**\r\n * Internal dependencies\r\n */\r\nimport isGenerator from './is-generator';\r\nimport createRuntime from './runtime';\r\n\r\n/**\r\n * Creates a Redux middleware, given an object of controls where each key is an\r\n * action type for which to act upon, the value a function which returns either\r\n * a promise which is to resolve when evaluation of the action should continue,\r\n * or a value. The value or resolved promise value is assigned on the return\r\n * value of the yield assignment. If the control handler returns undefined, the\r\n * execution is not continued.\r\n *\r\n * @param {Record<string, (value: import('redux').AnyAction) => Promise<boolean> | boolean>} controls Object of control handlers.\r\n *\r\n * @return {import('redux').Middleware} Co-routine runtime\r\n */\r\nexport default function createMiddleware( controls = {} ) {\r\n\treturn ( store ) => {\r\n\t\tconst runtime = createRuntime( controls, store.dispatch );\r\n\t\treturn ( next ) => ( action ) => {\r\n\t\t\tif ( ! isGenerator( action ) ) {\r\n\t\t\t\treturn next( action );\r\n\t\t\t}\r\n\r\n\t\t\treturn runtime( action );\r\n\t\t};\r\n\t};\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,OAAOA,WAAW,MAAM,gBAAgB;AACxC,OAAOC,aAAa,MAAM,WAAW;;AAErC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAASC,gBAAgBA,CAAEC,QAAQ,GAAG,CAAC,CAAC,EAAG;EACzD,OAASC,KAAK,IAAM;IACnB,MAAMC,OAAO,GAAGJ,aAAa,CAAEE,QAAQ,EAAEC,KAAK,CAACE,QAAS,CAAC;IACzD,OAASC,IAAI,IAAQC,MAAM,IAAM;MAChC,IAAK,CAAER,WAAW,CAAEQ,MAAO,CAAC,EAAG;QAC9B,OAAOD,IAAI,CAAEC,MAAO,CAAC;MACtB;MAEA,OAAOH,OAAO,CAAEG,MAAO,CAAC;IACzB,CAAC;EACF,CAAC;AACF","ignoreList":[]}