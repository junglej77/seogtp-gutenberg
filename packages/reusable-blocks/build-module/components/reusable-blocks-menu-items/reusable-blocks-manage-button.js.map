{"version":3,"names":["MenuItem","__","isReusableBlock","useSelect","useDispatch","store","blockEditorStore","addQueryArgs","coreStore","reusableBlocksStore","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","ReusableBlocksManageButton","clientId","canRemove","isVisible","managePatternsUrl","select","getBlock","canRemoveBlock","getBlockCount","canUser","reusableBlock","kind","name","id","attributes","ref","innerBlockCount","path","post_type","__experimentalConvertBlockToStatic","convertBlockToStatic","children","href","onClick"],"sources":["@wordpress/reusable-blocks/src/components/reusable-blocks-menu-items/reusable-blocks-manage-button.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { MenuItem } from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { isReusableBlock } from '@wordpress/blocks';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { store as blockEditorStore } from '@wordpress/block-editor';\r\nimport { addQueryArgs } from '@wordpress/url';\r\nimport { store as coreStore } from '@wordpress/core-data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as reusableBlocksStore } from '../../store';\r\n\r\nfunction ReusableBlocksManageButton( { clientId } ) {\r\n\tconst { canRemove, isVisible, managePatternsUrl } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst { getBlock, canRemoveBlock, getBlockCount } =\r\n\t\t\t\tselect( blockEditorStore );\r\n\t\t\tconst { canUser } = select( coreStore );\r\n\t\t\tconst reusableBlock = getBlock( clientId );\r\n\r\n\t\t\treturn {\r\n\t\t\t\tcanRemove: canRemoveBlock( clientId ),\r\n\t\t\t\tisVisible:\r\n\t\t\t\t\t!! reusableBlock &&\r\n\t\t\t\t\tisReusableBlock( reusableBlock ) &&\r\n\t\t\t\t\t!! canUser( 'update', {\r\n\t\t\t\t\t\tkind: 'postType',\r\n\t\t\t\t\t\tname: 'wp_block',\r\n\t\t\t\t\t\tid: reusableBlock.attributes.ref,\r\n\t\t\t\t\t} ),\r\n\t\t\t\tinnerBlockCount: getBlockCount( clientId ),\r\n\t\t\t\t// The site editor and templates both check whether the user\r\n\t\t\t\t// has edit_theme_options capabilities. We can leverage that here\r\n\t\t\t\t// and omit the manage patterns link if the user can't access it.\r\n\t\t\t\tmanagePatternsUrl: canUser( 'create', {\r\n\t\t\t\t\tkind: 'postType',\r\n\t\t\t\t\tname: 'wp_template',\r\n\t\t\t\t} )\r\n\t\t\t\t\t? addQueryArgs( 'site-editor.php', {\r\n\t\t\t\t\t\t\tpath: '/patterns',\r\n\t\t\t\t\t  } )\r\n\t\t\t\t\t: addQueryArgs( 'edit.php', {\r\n\t\t\t\t\t\t\tpost_type: 'wp_block',\r\n\t\t\t\t\t  } ),\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ clientId ]\r\n\t);\r\n\r\n\tconst { __experimentalConvertBlockToStatic: convertBlockToStatic } =\r\n\t\tuseDispatch( reusableBlocksStore );\r\n\r\n\tif ( ! isVisible ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<MenuItem href={ managePatternsUrl }>\r\n\t\t\t\t{ __( 'Manage patterns' ) }\r\n\t\t\t</MenuItem>\r\n\t\t\t{ canRemove && (\r\n\t\t\t\t<MenuItem onClick={ () => convertBlockToStatic( clientId ) }>\r\n\t\t\t\t\t{ __( 'Detach' ) }\r\n\t\t\t\t</MenuItem>\r\n\t\t\t) }\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default ReusableBlocksManageButton;\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,QAAQ,QAAQ,uBAAuB;AAChD,SAASC,EAAE,QAAQ,iBAAiB;AACpC,SAASC,eAAe,QAAQ,mBAAmB;AACnD,SAASC,SAAS,EAAEC,WAAW,QAAQ,iBAAiB;AACxD,SAASC,KAAK,IAAIC,gBAAgB,QAAQ,yBAAyB;AACnE,SAASC,YAAY,QAAQ,gBAAgB;AAC7C,SAASF,KAAK,IAAIG,SAAS,QAAQ,sBAAsB;;AAEzD;AACA;AACA;AACA,SAASH,KAAK,IAAII,mBAAmB,QAAQ,aAAa;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAE3D,SAASC,0BAA0BA,CAAE;EAAEC;AAAS,CAAC,EAAG;EACnD,MAAM;IAAEC,SAAS;IAAEC,SAAS;IAAEC;EAAkB,CAAC,GAAGjB,SAAS,CAC1DkB,MAAM,IAAM;IACb,MAAM;MAAEC,QAAQ;MAAEC,cAAc;MAAEC;IAAc,CAAC,GAChDH,MAAM,CAAEf,gBAAiB,CAAC;IAC3B,MAAM;MAAEmB;IAAQ,CAAC,GAAGJ,MAAM,CAAEb,SAAU,CAAC;IACvC,MAAMkB,aAAa,GAAGJ,QAAQ,CAAEL,QAAS,CAAC;IAE1C,OAAO;MACNC,SAAS,EAAEK,cAAc,CAAEN,QAAS,CAAC;MACrCE,SAAS,EACR,CAAC,CAAEO,aAAa,IAChBxB,eAAe,CAAEwB,aAAc,CAAC,IAChC,CAAC,CAAED,OAAO,CAAE,QAAQ,EAAE;QACrBE,IAAI,EAAE,UAAU;QAChBC,IAAI,EAAE,UAAU;QAChBC,EAAE,EAAEH,aAAa,CAACI,UAAU,CAACC;MAC9B,CAAE,CAAC;MACJC,eAAe,EAAER,aAAa,CAAEP,QAAS,CAAC;MAC1C;MACA;MACA;MACAG,iBAAiB,EAAEK,OAAO,CAAE,QAAQ,EAAE;QACrCE,IAAI,EAAE,UAAU;QAChBC,IAAI,EAAE;MACP,CAAE,CAAC,GACArB,YAAY,CAAE,iBAAiB,EAAE;QACjC0B,IAAI,EAAE;MACN,CAAE,CAAC,GACH1B,YAAY,CAAE,UAAU,EAAE;QAC1B2B,SAAS,EAAE;MACX,CAAE;IACN,CAAC;EACF,CAAC,EACD,CAAEjB,QAAQ,CACX,CAAC;EAED,MAAM;IAAEkB,kCAAkC,EAAEC;EAAqB,CAAC,GACjEhC,WAAW,CAAEK,mBAAoB,CAAC;EAEnC,IAAK,CAAEU,SAAS,EAAG;IAClB,OAAO,IAAI;EACZ;EAEA,oBACCJ,KAAA,CAAAF,SAAA;IAAAwB,QAAA,gBACC1B,IAAA,CAACX,QAAQ;MAACsC,IAAI,EAAGlB,iBAAmB;MAAAiB,QAAA,EACjCpC,EAAE,CAAE,iBAAkB;IAAC,CAChB,CAAC,EACTiB,SAAS,iBACVP,IAAA,CAACX,QAAQ;MAACuC,OAAO,EAAGA,CAAA,KAAMH,oBAAoB,CAAEnB,QAAS,CAAG;MAAAoB,QAAA,EACzDpC,EAAE,CAAE,QAAS;IAAC,CACP,CACV;EAAA,CACA,CAAC;AAEL;AAEA,eAAee,0BAA0B","ignoreList":[]}