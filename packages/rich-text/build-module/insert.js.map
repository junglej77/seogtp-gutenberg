{"version":3,"names":["create","normaliseFormats","insert","value","valueToInsert","startIndex","start","endIndex","end","formats","replacements","text","index","length","slice","concat"],"sources":["@wordpress/rich-text/src/insert.js"],"sourcesContent":["/**\r\n * Internal dependencies\r\n */\r\n\r\nimport { create } from './create';\r\nimport { normaliseFormats } from './normalise-formats';\r\n\r\n/** @typedef {import('./types').RichTextValue} RichTextValue */\r\n\r\n/**\r\n * Insert a Rich Text value, an HTML string, or a plain text string, into a\r\n * Rich Text value at the given `startIndex`. Any content between `startIndex`\r\n * and `endIndex` will be removed. Indices are retrieved from the selection if\r\n * none are provided.\r\n *\r\n * @param {RichTextValue}        value         Value to modify.\r\n * @param {RichTextValue|string} valueToInsert Value to insert.\r\n * @param {number}               [startIndex]  Start index.\r\n * @param {number}               [endIndex]    End index.\r\n *\r\n * @return {RichTextValue} A new value with the value inserted.\r\n */\r\nexport function insert(\r\n\tvalue,\r\n\tvalueToInsert,\r\n\tstartIndex = value.start,\r\n\tendIndex = value.end\r\n) {\r\n\tconst { formats, replacements, text } = value;\r\n\r\n\tif ( typeof valueToInsert === 'string' ) {\r\n\t\tvalueToInsert = create( { text: valueToInsert } );\r\n\t}\r\n\r\n\tconst index = startIndex + valueToInsert.text.length;\r\n\r\n\treturn normaliseFormats( {\r\n\t\tformats: formats\r\n\t\t\t.slice( 0, startIndex )\r\n\t\t\t.concat( valueToInsert.formats, formats.slice( endIndex ) ),\r\n\t\treplacements: replacements\r\n\t\t\t.slice( 0, startIndex )\r\n\t\t\t.concat(\r\n\t\t\t\tvalueToInsert.replacements,\r\n\t\t\t\treplacements.slice( endIndex )\r\n\t\t\t),\r\n\t\ttext:\r\n\t\t\ttext.slice( 0, startIndex ) +\r\n\t\t\tvalueToInsert.text +\r\n\t\t\ttext.slice( endIndex ),\r\n\t\tstart: index,\r\n\t\tend: index,\r\n\t} );\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;;AAEA,SAASA,MAAM,QAAQ,UAAU;AACjC,SAASC,gBAAgB,QAAQ,qBAAqB;;AAEtD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,MAAMA,CACrBC,KAAK,EACLC,aAAa,EACbC,UAAU,GAAGF,KAAK,CAACG,KAAK,EACxBC,QAAQ,GAAGJ,KAAK,CAACK,GAAG,EACnB;EACD,MAAM;IAAEC,OAAO;IAAEC,YAAY;IAAEC;EAAK,CAAC,GAAGR,KAAK;EAE7C,IAAK,OAAOC,aAAa,KAAK,QAAQ,EAAG;IACxCA,aAAa,GAAGJ,MAAM,CAAE;MAAEW,IAAI,EAAEP;IAAc,CAAE,CAAC;EAClD;EAEA,MAAMQ,KAAK,GAAGP,UAAU,GAAGD,aAAa,CAACO,IAAI,CAACE,MAAM;EAEpD,OAAOZ,gBAAgB,CAAE;IACxBQ,OAAO,EAAEA,OAAO,CACdK,KAAK,CAAE,CAAC,EAAET,UAAW,CAAC,CACtBU,MAAM,CAAEX,aAAa,CAACK,OAAO,EAAEA,OAAO,CAACK,KAAK,CAAEP,QAAS,CAAE,CAAC;IAC5DG,YAAY,EAAEA,YAAY,CACxBI,KAAK,CAAE,CAAC,EAAET,UAAW,CAAC,CACtBU,MAAM,CACNX,aAAa,CAACM,YAAY,EAC1BA,YAAY,CAACI,KAAK,CAAEP,QAAS,CAC9B,CAAC;IACFI,IAAI,EACHA,IAAI,CAACG,KAAK,CAAE,CAAC,EAAET,UAAW,CAAC,GAC3BD,aAAa,CAACO,IAAI,GAClBA,IAAI,CAACG,KAAK,CAAEP,QAAS,CAAC;IACvBD,KAAK,EAAEM,KAAK;IACZJ,GAAG,EAAEI;EACN,CAAE,CAAC;AACJ","ignoreList":[]}