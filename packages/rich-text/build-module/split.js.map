{"version":3,"names":["split","formats","replacements","text","start","end","string","splitAtSelection","arguments","nextStart","map","substring","startIndex","value","slice","length","undefined","endIndex","before","after"],"sources":["@wordpress/rich-text/src/split.js"],"sourcesContent":["/**\r\n * Internal dependencies\r\n */\r\n\r\n/** @typedef {import('./types').RichTextValue} RichTextValue */\r\n\r\n/**\r\n * Split a Rich Text value in two at the given `startIndex` and `endIndex`, or\r\n * split at the given separator. This is similar to `String.prototype.split`.\r\n * Indices are retrieved from the selection if none are provided.\r\n *\r\n * @param {RichTextValue} value\r\n * @param {number|string} [string] Start index, or string at which to split.\r\n *\r\n * @return {Array<RichTextValue>|undefined} An array of new values.\r\n */\r\nexport function split( { formats, replacements, text, start, end }, string ) {\r\n\tif ( typeof string !== 'string' ) {\r\n\t\treturn splitAtSelection( ...arguments );\r\n\t}\r\n\r\n\tlet nextStart = 0;\r\n\r\n\treturn text.split( string ).map( ( substring ) => {\r\n\t\tconst startIndex = nextStart;\r\n\t\tconst value = {\r\n\t\t\tformats: formats.slice( startIndex, startIndex + substring.length ),\r\n\t\t\treplacements: replacements.slice(\r\n\t\t\t\tstartIndex,\r\n\t\t\t\tstartIndex + substring.length\r\n\t\t\t),\r\n\t\t\ttext: substring,\r\n\t\t};\r\n\r\n\t\tnextStart += string.length + substring.length;\r\n\r\n\t\tif ( start !== undefined && end !== undefined ) {\r\n\t\t\tif ( start >= startIndex && start < nextStart ) {\r\n\t\t\t\tvalue.start = start - startIndex;\r\n\t\t\t} else if ( start < startIndex && end > startIndex ) {\r\n\t\t\t\tvalue.start = 0;\r\n\t\t\t}\r\n\r\n\t\t\tif ( end >= startIndex && end < nextStart ) {\r\n\t\t\t\tvalue.end = end - startIndex;\r\n\t\t\t} else if ( start < nextStart && end > nextStart ) {\r\n\t\t\t\tvalue.end = substring.length;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t} );\r\n}\r\n\r\nfunction splitAtSelection(\r\n\t{ formats, replacements, text, start, end },\r\n\tstartIndex = start,\r\n\tendIndex = end\r\n) {\r\n\tif ( start === undefined || end === undefined ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst before = {\r\n\t\tformats: formats.slice( 0, startIndex ),\r\n\t\treplacements: replacements.slice( 0, startIndex ),\r\n\t\ttext: text.slice( 0, startIndex ),\r\n\t};\r\n\tconst after = {\r\n\t\tformats: formats.slice( endIndex ),\r\n\t\treplacements: replacements.slice( endIndex ),\r\n\t\ttext: text.slice( endIndex ),\r\n\t\tstart: 0,\r\n\t\tend: 0,\r\n\t};\r\n\r\n\treturn [ before, after ];\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASA,KAAKA,CAAE;EAAEC,OAAO;EAAEC,YAAY;EAAEC,IAAI;EAAEC,KAAK;EAAEC;AAAI,CAAC,EAAEC,MAAM,EAAG;EAC5E,IAAK,OAAOA,MAAM,KAAK,QAAQ,EAAG;IACjC,OAAOC,gBAAgB,CAAE,GAAGC,SAAU,CAAC;EACxC;EAEA,IAAIC,SAAS,GAAG,CAAC;EAEjB,OAAON,IAAI,CAACH,KAAK,CAAEM,MAAO,CAAC,CAACI,GAAG,CAAIC,SAAS,IAAM;IACjD,MAAMC,UAAU,GAAGH,SAAS;IAC5B,MAAMI,KAAK,GAAG;MACbZ,OAAO,EAAEA,OAAO,CAACa,KAAK,CAAEF,UAAU,EAAEA,UAAU,GAAGD,SAAS,CAACI,MAAO,CAAC;MACnEb,YAAY,EAAEA,YAAY,CAACY,KAAK,CAC/BF,UAAU,EACVA,UAAU,GAAGD,SAAS,CAACI,MACxB,CAAC;MACDZ,IAAI,EAAEQ;IACP,CAAC;IAEDF,SAAS,IAAIH,MAAM,CAACS,MAAM,GAAGJ,SAAS,CAACI,MAAM;IAE7C,IAAKX,KAAK,KAAKY,SAAS,IAAIX,GAAG,KAAKW,SAAS,EAAG;MAC/C,IAAKZ,KAAK,IAAIQ,UAAU,IAAIR,KAAK,GAAGK,SAAS,EAAG;QAC/CI,KAAK,CAACT,KAAK,GAAGA,KAAK,GAAGQ,UAAU;MACjC,CAAC,MAAM,IAAKR,KAAK,GAAGQ,UAAU,IAAIP,GAAG,GAAGO,UAAU,EAAG;QACpDC,KAAK,CAACT,KAAK,GAAG,CAAC;MAChB;MAEA,IAAKC,GAAG,IAAIO,UAAU,IAAIP,GAAG,GAAGI,SAAS,EAAG;QAC3CI,KAAK,CAACR,GAAG,GAAGA,GAAG,GAAGO,UAAU;MAC7B,CAAC,MAAM,IAAKR,KAAK,GAAGK,SAAS,IAAIJ,GAAG,GAAGI,SAAS,EAAG;QAClDI,KAAK,CAACR,GAAG,GAAGM,SAAS,CAACI,MAAM;MAC7B;IACD;IAEA,OAAOF,KAAK;EACb,CAAE,CAAC;AACJ;AAEA,SAASN,gBAAgBA,CACxB;EAAEN,OAAO;EAAEC,YAAY;EAAEC,IAAI;EAAEC,KAAK;EAAEC;AAAI,CAAC,EAC3CO,UAAU,GAAGR,KAAK,EAClBa,QAAQ,GAAGZ,GAAG,EACb;EACD,IAAKD,KAAK,KAAKY,SAAS,IAAIX,GAAG,KAAKW,SAAS,EAAG;IAC/C;EACD;EAEA,MAAME,MAAM,GAAG;IACdjB,OAAO,EAAEA,OAAO,CAACa,KAAK,CAAE,CAAC,EAAEF,UAAW,CAAC;IACvCV,YAAY,EAAEA,YAAY,CAACY,KAAK,CAAE,CAAC,EAAEF,UAAW,CAAC;IACjDT,IAAI,EAAEA,IAAI,CAACW,KAAK,CAAE,CAAC,EAAEF,UAAW;EACjC,CAAC;EACD,MAAMO,KAAK,GAAG;IACblB,OAAO,EAAEA,OAAO,CAACa,KAAK,CAAEG,QAAS,CAAC;IAClCf,YAAY,EAAEA,YAAY,CAACY,KAAK,CAAEG,QAAS,CAAC;IAC5Cd,IAAI,EAAEA,IAAI,CAACW,KAAK,CAAEG,QAAS,CAAC;IAC5Bb,KAAK,EAAE,CAAC;IACRC,GAAG,EAAE;EACN,CAAC;EAED,OAAO,CAAEa,MAAM,EAAEC,KAAK,CAAE;AACzB","ignoreList":[]}