{"version":3,"names":["createSelector","getFormatTypes","state","Object","values","formatTypes","getFormatType","name","getFormatTypeForBareElement","bareElementTagName","find","className","tagName","getFormatTypeForClassName","elementClassName","indexOf"],"sources":["@wordpress/rich-text/src/store/selectors.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { createSelector } from '@wordpress/data';\r\n\r\n/**\r\n * Returns all the available format types.\r\n *\r\n * @param {Object} state Data state.\r\n *\r\n * @example\r\n * ```js\r\n * import { __, sprintf } from '@wordpress/i18n';\r\n * import { store as richTextStore } from '@wordpress/rich-text';\r\n * import { useSelect } from '@wordpress/data';\r\n *\r\n * const ExampleComponent = () => {\r\n *    const { getFormatTypes } = useSelect(\r\n *        ( select ) => select( richTextStore ),\r\n *        []\r\n *    );\r\n *\r\n *    const availableFormats = getFormatTypes();\r\n *\r\n *    return availableFormats ? (\r\n *        <ul>\r\n *            { availableFormats?.map( ( format ) => (\r\n *                <li>{ format.name }</li>\r\n *           ) ) }\r\n *        </ul>\r\n *    ) : (\r\n *        __( 'No Formats available' )\r\n *    );\r\n * };\r\n * ```\r\n *\r\n * @return {Array} Format types.\r\n */\r\nexport const getFormatTypes = createSelector(\r\n\t( state ) => Object.values( state.formatTypes ),\r\n\t( state ) => [ state.formatTypes ]\r\n);\r\n\r\n/**\r\n * Returns a format type by name.\r\n *\r\n * @param {Object} state Data state.\r\n * @param {string} name  Format type name.\r\n *\r\n * @example\r\n * ```js\r\n * import { __, sprintf } from '@wordpress/i18n';\r\n * import { store as richTextStore } from '@wordpress/rich-text';\r\n * import { useSelect } from '@wordpress/data';\r\n *\r\n * const ExampleComponent = () => {\r\n *    const { getFormatType } = useSelect(\r\n *        ( select ) => select( richTextStore ),\r\n *        []\r\n *    );\r\n *\r\n *    const boldFormat = getFormatType( 'core/bold' );\r\n *\r\n *    return boldFormat ? (\r\n *        <ul>\r\n *            { Object.entries( boldFormat )?.map( ( [ key, value ] ) => (\r\n *                <li>\r\n *                    { key } : { value }\r\n *                </li>\r\n *           ) ) }\r\n *       </ul>\r\n *    ) : (\r\n *        __( 'Not Found' )\r\n *    ;\r\n * };\r\n * ```\r\n *\r\n * @return {Object?} Format type.\r\n */\r\nexport function getFormatType( state, name ) {\r\n\treturn state.formatTypes[ name ];\r\n}\r\n\r\n/**\r\n * Gets the format type, if any, that can handle a bare element (without a\r\n * data-format-type attribute), given the tag name of this element.\r\n *\r\n * @param {Object} state              Data state.\r\n * @param {string} bareElementTagName The tag name of the element to find a\r\n *                                    format type for.\r\n *\r\n * @example\r\n * ```js\r\n * import { __, sprintf } from '@wordpress/i18n';\r\n * import { store as richTextStore } from '@wordpress/rich-text';\r\n * import { useSelect } from '@wordpress/data';\r\n *\r\n * const ExampleComponent = () => {\r\n *    const { getFormatTypeForBareElement } = useSelect(\r\n *        ( select ) => select( richTextStore ),\r\n *        []\r\n *    );\r\n *\r\n *    const format = getFormatTypeForBareElement( 'strong' );\r\n *\r\n *    return format && <p>{ sprintf( __( 'Format name: %s' ), format.name ) }</p>;\r\n * }\r\n * ```\r\n *\r\n * @return {?Object} Format type.\r\n */\r\nexport function getFormatTypeForBareElement( state, bareElementTagName ) {\r\n\tconst formatTypes = getFormatTypes( state );\r\n\treturn (\r\n\t\tformatTypes.find( ( { className, tagName } ) => {\r\n\t\t\treturn className === null && bareElementTagName === tagName;\r\n\t\t} ) ||\r\n\t\tformatTypes.find( ( { className, tagName } ) => {\r\n\t\t\treturn className === null && '*' === tagName;\r\n\t\t} )\r\n\t);\r\n}\r\n\r\n/**\r\n * Gets the format type, if any, that can handle an element, given its classes.\r\n *\r\n * @param {Object} state            Data state.\r\n * @param {string} elementClassName The classes of the element to find a format\r\n *                                  type for.\r\n *\r\n * @example\r\n * ```js\r\n * import { __, sprintf } from '@wordpress/i18n';\r\n * import { store as richTextStore } from '@wordpress/rich-text';\r\n * import { useSelect } from '@wordpress/data';\r\n *\r\n * const ExampleComponent = () => {\r\n *    const { getFormatTypeForClassName } = useSelect(\r\n *        ( select ) => select( richTextStore ),\r\n *        []\r\n *    );\r\n *\r\n *    const format = getFormatTypeForClassName( 'has-inline-color' );\r\n *\r\n *    return format && <p>{ sprintf( __( 'Format name: %s' ), format.name ) }</p>;\r\n * };\r\n * ```\r\n *\r\n * @return {?Object} Format type.\r\n */\r\nexport function getFormatTypeForClassName( state, elementClassName ) {\r\n\treturn getFormatTypes( state ).find( ( { className } ) => {\r\n\t\tif ( className === null ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn ` ${ elementClassName } `.indexOf( ` ${ className } ` ) >= 0;\r\n\t} );\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,cAAc,QAAQ,iBAAiB;;AAEhD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,cAAc,GAAGD,cAAc,CACzCE,KAAK,IAAMC,MAAM,CAACC,MAAM,CAAEF,KAAK,CAACG,WAAY,CAAC,EAC7CH,KAAK,IAAM,CAAEA,KAAK,CAACG,WAAW,CACjC,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,aAAaA,CAAEJ,KAAK,EAAEK,IAAI,EAAG;EAC5C,OAAOL,KAAK,CAACG,WAAW,CAAEE,IAAI,CAAE;AACjC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,2BAA2BA,CAAEN,KAAK,EAAEO,kBAAkB,EAAG;EACxE,MAAMJ,WAAW,GAAGJ,cAAc,CAAEC,KAAM,CAAC;EAC3C,OACCG,WAAW,CAACK,IAAI,CAAE,CAAE;IAAEC,SAAS;IAAEC;EAAQ,CAAC,KAAM;IAC/C,OAAOD,SAAS,KAAK,IAAI,IAAIF,kBAAkB,KAAKG,OAAO;EAC5D,CAAE,CAAC,IACHP,WAAW,CAACK,IAAI,CAAE,CAAE;IAAEC,SAAS;IAAEC;EAAQ,CAAC,KAAM;IAC/C,OAAOD,SAAS,KAAK,IAAI,IAAI,GAAG,KAAKC,OAAO;EAC7C,CAAE,CAAC;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,yBAAyBA,CAAEX,KAAK,EAAEY,gBAAgB,EAAG;EACpE,OAAOb,cAAc,CAAEC,KAAM,CAAC,CAACQ,IAAI,CAAE,CAAE;IAAEC;EAAU,CAAC,KAAM;IACzD,IAAKA,SAAS,KAAK,IAAI,EAAG;MACzB,OAAO,KAAK;IACb;IAEA,OAAQ,IAAIG,gBAAkB,GAAE,CAACC,OAAO,CAAG,IAAIJ,SAAW,GAAG,CAAC,IAAI,CAAC;EACpE,CAAE,CAAC;AACJ","ignoreList":[]}