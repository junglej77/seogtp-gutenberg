{"version":3,"names":["escapeEditableHTML","escapeAttribute","isValidAttributeName","toTree","toHTMLString","value","preserveWhiteSpace","tree","createEmpty","append","getLastChild","getParent","isText","getText","remove","appendText","createChildrenHTML","children","length","parent","object","text","push","index","indexOf","splice","createElementHTML","type","attributes","attributeString","key","map","child","html","undefined","join"],"sources":["@wordpress/rich-text/src/to-html-string.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\n\r\nimport {\r\n\tescapeEditableHTML,\r\n\tescapeAttribute,\r\n\tisValidAttributeName,\r\n} from '@wordpress/escape-html';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\n\r\nimport { toTree } from './to-tree';\r\n\r\n/** @typedef {import('./types').RichTextValue} RichTextValue */\r\n\r\n/**\r\n * Create an HTML string from a Rich Text value.\r\n *\r\n * @param {Object}        $1                      Named argements.\r\n * @param {RichTextValue} $1.value                Rich text value.\r\n * @param {boolean}       [$1.preserveWhiteSpace] Preserves newlines if true.\r\n *\r\n * @return {string} HTML string.\r\n */\r\nexport function toHTMLString( { value, preserveWhiteSpace } ) {\r\n\tconst tree = toTree( {\r\n\t\tvalue,\r\n\t\tpreserveWhiteSpace,\r\n\t\tcreateEmpty,\r\n\t\tappend,\r\n\t\tgetLastChild,\r\n\t\tgetParent,\r\n\t\tisText,\r\n\t\tgetText,\r\n\t\tremove,\r\n\t\tappendText,\r\n\t} );\r\n\r\n\treturn createChildrenHTML( tree.children );\r\n}\r\n\r\nfunction createEmpty() {\r\n\treturn {};\r\n}\r\n\r\nfunction getLastChild( { children } ) {\r\n\treturn children && children[ children.length - 1 ];\r\n}\r\n\r\nfunction append( parent, object ) {\r\n\tif ( typeof object === 'string' ) {\r\n\t\tobject = { text: object };\r\n\t}\r\n\r\n\tobject.parent = parent;\r\n\tparent.children = parent.children || [];\r\n\tparent.children.push( object );\r\n\treturn object;\r\n}\r\n\r\nfunction appendText( object, text ) {\r\n\tobject.text += text;\r\n}\r\n\r\nfunction getParent( { parent } ) {\r\n\treturn parent;\r\n}\r\n\r\nfunction isText( { text } ) {\r\n\treturn typeof text === 'string';\r\n}\r\n\r\nfunction getText( { text } ) {\r\n\treturn text;\r\n}\r\n\r\nfunction remove( object ) {\r\n\tconst index = object.parent.children.indexOf( object );\r\n\r\n\tif ( index !== -1 ) {\r\n\t\tobject.parent.children.splice( index, 1 );\r\n\t}\r\n\r\n\treturn object;\r\n}\r\n\r\nfunction createElementHTML( { type, attributes, object, children } ) {\r\n\tlet attributeString = '';\r\n\r\n\tfor ( const key in attributes ) {\r\n\t\tif ( ! isValidAttributeName( key ) ) {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\r\n\t\tattributeString += ` ${ key }=\"${ escapeAttribute(\r\n\t\t\tattributes[ key ]\r\n\t\t) }\"`;\r\n\t}\r\n\r\n\tif ( object ) {\r\n\t\treturn `<${ type }${ attributeString }>`;\r\n\t}\r\n\r\n\treturn `<${ type }${ attributeString }>${ createChildrenHTML(\r\n\t\tchildren\r\n\t) }</${ type }>`;\r\n}\r\n\r\nfunction createChildrenHTML( children = [] ) {\r\n\treturn children\r\n\t\t.map( ( child ) => {\r\n\t\t\tif ( child.html !== undefined ) {\r\n\t\t\t\treturn child.html;\r\n\t\t\t}\r\n\r\n\t\t\treturn child.text === undefined\r\n\t\t\t\t? createElementHTML( child )\r\n\t\t\t\t: escapeEditableHTML( child.text );\r\n\t\t} )\r\n\t\t.join( '' );\r\n}\r\n"],"mappings":"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","ignoreList":[]}