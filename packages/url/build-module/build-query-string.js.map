{"version":3,"names":["buildQueryString","data","string","stack","Object","entries","pair","shift","key","value","hasNestedData","Array","isArray","constructor","valuePairs","reverse","member","memberValue","unshift","undefined","map","encodeURIComponent","join","substr"],"sources":["@wordpress/url/src/build-query-string.js"],"sourcesContent":["/**\r\n * Generates URL-encoded query string using input query data.\r\n *\r\n * It is intended to behave equivalent as PHP's `http_build_query`, configured\r\n * with encoding type PHP_QUERY_RFC3986 (spaces as `%20`).\r\n *\r\n * @example\r\n * ```js\r\n * const queryString = buildQueryString( {\r\n *    simple: 'is ok',\r\n *    arrays: [ 'are', 'fine', 'too' ],\r\n *    objects: {\r\n *       evenNested: {\r\n *          ok: 'yes',\r\n *       },\r\n *    },\r\n * } );\r\n * // \"simple=is%20ok&arrays%5B0%5D=are&arrays%5B1%5D=fine&arrays%5B2%5D=too&objects%5BevenNested%5D%5Bok%5D=yes\"\r\n * ```\r\n *\r\n * @param {Record<string,*>} data Data to encode.\r\n *\r\n * @return {string} Query string.\r\n */\r\nexport function buildQueryString( data ) {\r\n\tlet string = '';\r\n\r\n\tconst stack = Object.entries( data );\r\n\r\n\tlet pair;\r\n\twhile ( ( pair = stack.shift() ) ) {\r\n\t\tlet [ key, value ] = pair;\r\n\r\n\t\t// Support building deeply nested data, from array or object values.\r\n\t\tconst hasNestedData =\r\n\t\t\tArray.isArray( value ) || ( value && value.constructor === Object );\r\n\r\n\t\tif ( hasNestedData ) {\r\n\t\t\t// Push array or object values onto the stack as composed of their\r\n\t\t\t// original key and nested index or key, retaining order by a\r\n\t\t\t// combination of Array#reverse and Array#unshift onto the stack.\r\n\t\t\tconst valuePairs = Object.entries( value ).reverse();\r\n\t\t\tfor ( const [ member, memberValue ] of valuePairs ) {\r\n\t\t\t\tstack.unshift( [ `${ key }[${ member }]`, memberValue ] );\r\n\t\t\t}\r\n\t\t} else if ( value !== undefined ) {\r\n\t\t\t// Null is treated as special case, equivalent to empty string.\r\n\t\t\tif ( value === null ) {\r\n\t\t\t\tvalue = '';\r\n\t\t\t}\r\n\r\n\t\t\tstring +=\r\n\t\t\t\t'&' + [ key, value ].map( encodeURIComponent ).join( '=' );\r\n\t\t}\r\n\t}\r\n\r\n\t// Loop will concatenate with leading `&`, but it's only expected for all\r\n\t// but the first query parameter. This strips the leading `&`, while still\r\n\t// accounting for the case that the string may in-fact be empty.\r\n\treturn string.substr( 1 );\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASA,gBAAgBA,CAAEC,IAAI,EAAG;EACxC,IAAIC,MAAM,GAAG,EAAE;EAEf,MAAMC,KAAK,GAAGC,MAAM,CAACC,OAAO,CAAEJ,IAAK,CAAC;EAEpC,IAAIK,IAAI;EACR,OAAUA,IAAI,GAAGH,KAAK,CAACI,KAAK,CAAC,CAAC,EAAK;IAClC,IAAI,CAAEC,GAAG,EAAEC,KAAK,CAAE,GAAGH,IAAI;;IAEzB;IACA,MAAMI,aAAa,GAClBC,KAAK,CAACC,OAAO,CAAEH,KAAM,CAAC,IAAMA,KAAK,IAAIA,KAAK,CAACI,WAAW,KAAKT,MAAQ;IAEpE,IAAKM,aAAa,EAAG;MACpB;MACA;MACA;MACA,MAAMI,UAAU,GAAGV,MAAM,CAACC,OAAO,CAAEI,KAAM,CAAC,CAACM,OAAO,CAAC,CAAC;MACpD,KAAM,MAAM,CAAEC,MAAM,EAAEC,WAAW,CAAE,IAAIH,UAAU,EAAG;QACnDX,KAAK,CAACe,OAAO,CAAE,CAAG,GAAGV,GAAK,IAAIQ,MAAQ,GAAE,EAAEC,WAAW,CAAG,CAAC;MAC1D;IACD,CAAC,MAAM,IAAKR,KAAK,KAAKU,SAAS,EAAG;MACjC;MACA,IAAKV,KAAK,KAAK,IAAI,EAAG;QACrBA,KAAK,GAAG,EAAE;MACX;MAEAP,MAAM,IACL,GAAG,GAAG,CAAEM,GAAG,EAAEC,KAAK,CAAE,CAACW,GAAG,CAAEC,kBAAmB,CAAC,CAACC,IAAI,CAAE,GAAI,CAAC;IAC5D;EACD;;EAEA;EACA;EACA;EACA,OAAOpB,MAAM,CAACqB,MAAM,CAAE,CAAE,CAAC;AAC1B","ignoreList":[]}