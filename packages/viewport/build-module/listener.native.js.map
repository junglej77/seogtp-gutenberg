{"version":3,"names":["Dimensions","dispatch","store","matchWidth","operator","breakpoint","width","get","Error","addDimensionsEventListener","breakpoints","operators","operatorEntries","Object","entries","breakpointEntries","setIsMatching","matches","fromEntries","flatMap","name","map","condition","addEventListener"],"sources":["@wordpress/viewport/src/listener.native.js"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\nimport { Dimensions } from 'react-native';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { dispatch } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store } from './store';\r\n\r\nconst matchWidth = ( operator, breakpoint ) => {\r\n\tconst { width } = Dimensions.get( 'window' );\r\n\tif ( operator === 'max-width' ) {\r\n\t\treturn width < breakpoint;\r\n\t} else if ( operator === 'min-width' ) {\r\n\t\treturn width >= breakpoint;\r\n\t}\r\n\tthrow new Error( `Unsupported viewport operator: ${ operator }` );\r\n};\r\n\r\nconst addDimensionsEventListener = ( breakpoints, operators ) => {\r\n\tconst operatorEntries = Object.entries( operators );\r\n\tconst breakpointEntries = Object.entries( breakpoints );\r\n\r\n\tconst setIsMatching = () => {\r\n\t\tconst matches = Object.fromEntries(\r\n\t\t\tbreakpointEntries.flatMap( ( [ name, width ] ) => {\r\n\t\t\t\treturn operatorEntries.map( ( [ operator, condition ] ) => [\r\n\t\t\t\t\t`${ operator } ${ name }`,\r\n\t\t\t\t\tmatchWidth( condition, width ),\r\n\t\t\t\t] );\r\n\t\t\t} )\r\n\t\t);\r\n\r\n\t\tdispatch( store ).setIsMatching( matches );\r\n\t};\r\n\r\n\tDimensions.addEventListener( 'change', setIsMatching );\r\n\r\n\t// Set initial values.\r\n\tsetIsMatching();\r\n};\r\n\r\nexport default addDimensionsEventListener;\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,UAAU,QAAQ,cAAc;;AAEzC;AACA;AACA;AACA,SAASC,QAAQ,QAAQ,iBAAiB;;AAE1C;AACA;AACA;AACA,SAASC,KAAK,QAAQ,SAAS;AAE/B,MAAMC,UAAU,GAAGA,CAAEC,QAAQ,EAAEC,UAAU,KAAM;EAC9C,MAAM;IAAEC;EAAM,CAAC,GAAGN,UAAU,CAACO,GAAG,CAAE,QAAS,CAAC;EAC5C,IAAKH,QAAQ,KAAK,WAAW,EAAG;IAC/B,OAAOE,KAAK,GAAGD,UAAU;EAC1B,CAAC,MAAM,IAAKD,QAAQ,KAAK,WAAW,EAAG;IACtC,OAAOE,KAAK,IAAID,UAAU;EAC3B;EACA,MAAM,IAAIG,KAAK,CAAG,kCAAkCJ,QAAU,EAAE,CAAC;AAClE,CAAC;AAED,MAAMK,0BAA0B,GAAGA,CAAEC,WAAW,EAAEC,SAAS,KAAM;EAChE,MAAMC,eAAe,GAAGC,MAAM,CAACC,OAAO,CAAEH,SAAU,CAAC;EACnD,MAAMI,iBAAiB,GAAGF,MAAM,CAACC,OAAO,CAAEJ,WAAY,CAAC;EAEvD,MAAMM,aAAa,GAAGA,CAAA,KAAM;IAC3B,MAAMC,OAAO,GAAGJ,MAAM,CAACK,WAAW,CACjCH,iBAAiB,CAACI,OAAO,CAAE,CAAE,CAAEC,IAAI,EAAEd,KAAK,CAAE,KAAM;MACjD,OAAOM,eAAe,CAACS,GAAG,CAAE,CAAE,CAAEjB,QAAQ,EAAEkB,SAAS,CAAE,KAAM,CACzD,GAAGlB,QAAU,IAAIgB,IAAM,EAAC,EACzBjB,UAAU,CAAEmB,SAAS,EAAEhB,KAAM,CAAC,CAC7B,CAAC;IACJ,CAAE,CACH,CAAC;IAEDL,QAAQ,CAAEC,KAAM,CAAC,CAACc,aAAa,CAAEC,OAAQ,CAAC;EAC3C,CAAC;EAEDjB,UAAU,CAACuB,gBAAgB,CAAE,QAAQ,EAAEP,aAAc,CAAC;;EAEtD;EACAA,aAAa,CAAC,CAAC;AAChB,CAAC;AAED,eAAeP,0BAA0B","ignoreList":[]}