{"version":3,"names":["Spinner","SelectControl","__","useSelect","store","coreStore","blockEditorStore","jsx","_jsx","WidgetTypeSelector","selectedId","onSelect","widgetTypes","select","_select$getSettings$w","hiddenIds","getSettings","widgetTypesToHideFromLegacyWidgetBlock","getWidgetTypes","per_page","filter","widgetType","includes","id","length","__next40pxDefaultSize","__nextHasNoMarginBottom","label","value","options","map","name","onChange","selected","find","isMulti","is_multi"],"sources":["@wordpress/widgets/src/blocks/legacy-widget/edit/widget-type-selector.js"],"sourcesContent":["/**\r\n * WordPress dependencies\r\n */\r\nimport { Spinner, SelectControl } from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { store as coreStore } from '@wordpress/core-data';\r\nimport { store as blockEditorStore } from '@wordpress/block-editor';\r\n\r\nexport default function WidgetTypeSelector( { selectedId, onSelect } ) {\r\n\tconst widgetTypes = useSelect( ( select ) => {\r\n\t\tconst hiddenIds =\r\n\t\t\tselect( blockEditorStore ).getSettings()\r\n\t\t\t\t?.widgetTypesToHideFromLegacyWidgetBlock ?? [];\r\n\t\treturn select( coreStore )\r\n\t\t\t.getWidgetTypes( { per_page: -1 } )\r\n\t\t\t?.filter( ( widgetType ) => ! hiddenIds.includes( widgetType.id ) );\r\n\t}, [] );\r\n\r\n\tif ( ! widgetTypes ) {\r\n\t\treturn <Spinner />;\r\n\t}\r\n\r\n\tif ( widgetTypes.length === 0 ) {\r\n\t\treturn __( 'There are no widgets available.' );\r\n\t}\r\n\r\n\treturn (\r\n\t\t<SelectControl\r\n\t\t\t__next40pxDefaultSize\r\n\t\t\t__nextHasNoMarginBottom\r\n\t\t\tlabel={ __( 'Select a legacy widget to display:' ) }\r\n\t\t\tvalue={ selectedId ?? '' }\r\n\t\t\toptions={ [\r\n\t\t\t\t{ value: '', label: __( 'Select widget' ) },\r\n\t\t\t\t...widgetTypes.map( ( widgetType ) => ( {\r\n\t\t\t\t\tvalue: widgetType.id,\r\n\t\t\t\t\tlabel: widgetType.name,\r\n\t\t\t\t} ) ),\r\n\t\t\t] }\r\n\t\t\tonChange={ ( value ) => {\r\n\t\t\t\tif ( value ) {\r\n\t\t\t\t\tconst selected = widgetTypes.find(\r\n\t\t\t\t\t\t( widgetType ) => widgetType.id === value\r\n\t\t\t\t\t);\r\n\t\t\t\t\tonSelect( {\r\n\t\t\t\t\t\tselectedId: selected.id,\r\n\t\t\t\t\t\tisMulti: selected.is_multi,\r\n\t\t\t\t\t} );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tonSelect( { selectedId: null } );\r\n\t\t\t\t}\r\n\t\t\t} }\r\n\t\t/>\r\n\t);\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,OAAO,EAAEC,aAAa,QAAQ,uBAAuB;AAC9D,SAASC,EAAE,QAAQ,iBAAiB;AACpC,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,KAAK,IAAIC,SAAS,QAAQ,sBAAsB;AACzD,SAASD,KAAK,IAAIE,gBAAgB,QAAQ,yBAAyB;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAEpE,eAAe,SAASC,kBAAkBA,CAAE;EAAEC,UAAU;EAAEC;AAAS,CAAC,EAAG;EACtE,MAAMC,WAAW,GAAGT,SAAS,CAAIU,MAAM,IAAM;IAAA,IAAAC,qBAAA;IAC5C,MAAMC,SAAS,IAAAD,qBAAA,GACdD,MAAM,CAAEP,gBAAiB,CAAC,CAACU,WAAW,CAAC,CAAC,EACrCC,sCAAsC,cAAAH,qBAAA,cAAAA,qBAAA,GAAI,EAAE;IAChD,OAAOD,MAAM,CAAER,SAAU,CAAC,CACxBa,cAAc,CAAE;MAAEC,QAAQ,EAAE,CAAC;IAAE,CAAE,CAAC,EACjCC,MAAM,CAAIC,UAAU,IAAM,CAAEN,SAAS,CAACO,QAAQ,CAAED,UAAU,CAACE,EAAG,CAAE,CAAC;EACrE,CAAC,EAAE,EAAG,CAAC;EAEP,IAAK,CAAEX,WAAW,EAAG;IACpB,oBAAOJ,IAAA,CAACR,OAAO,IAAE,CAAC;EACnB;EAEA,IAAKY,WAAW,CAACY,MAAM,KAAK,CAAC,EAAG;IAC/B,OAAOtB,EAAE,CAAE,iCAAkC,CAAC;EAC/C;EAEA,oBACCM,IAAA,CAACP,aAAa;IACbwB,qBAAqB;IACrBC,uBAAuB;IACvBC,KAAK,EAAGzB,EAAE,CAAE,oCAAqC,CAAG;IACpD0B,KAAK,EAAGlB,UAAU,aAAVA,UAAU,cAAVA,UAAU,GAAI,EAAI;IAC1BmB,OAAO,EAAG,CACT;MAAED,KAAK,EAAE,EAAE;MAAED,KAAK,EAAEzB,EAAE,CAAE,eAAgB;IAAE,CAAC,EAC3C,GAAGU,WAAW,CAACkB,GAAG,CAAIT,UAAU,KAAQ;MACvCO,KAAK,EAAEP,UAAU,CAACE,EAAE;MACpBI,KAAK,EAAEN,UAAU,CAACU;IACnB,CAAC,CAAG,CAAC,CACH;IACHC,QAAQ,EAAKJ,KAAK,IAAM;MACvB,IAAKA,KAAK,EAAG;QACZ,MAAMK,QAAQ,GAAGrB,WAAW,CAACsB,IAAI,CAC9Bb,UAAU,IAAMA,UAAU,CAACE,EAAE,KAAKK,KACrC,CAAC;QACDjB,QAAQ,CAAE;UACTD,UAAU,EAAEuB,QAAQ,CAACV,EAAE;UACvBY,OAAO,EAAEF,QAAQ,CAACG;QACnB,CAAE,CAAC;MACJ,CAAC,MAAM;QACNzB,QAAQ,CAAE;UAAED,UAAU,EAAE;QAAK,CAAE,CAAC;MACjC;IACD;EAAG,CACH,CAAC;AAEJ","ignoreList":[]}